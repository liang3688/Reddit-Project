,type,score,id,title,text,subreddit,timestamp
0,post,1,ul4icj,Clients do not resolve DNS requests anymore,"Since i updated yesterday, all my clients are not able to request any hostname.  I can ping an ip, but not an address.  The pi pihole is running on can resolve anything as usual.  Here is my debug log:  https://tricorder.pi-hole.net/xKSUXNaV/",pihole,1652024791.0
1,post,1,ul475w,Whitelist for all except 1 client,"Is there a way to do so without adding a group with all other clients? That sounds stupid.

I have reported that to the blocklist maintainer. Of course, after he/she had done something I could obviously blacklist for that client only.",pihole,1652023880.0
2,comment,1,i7t7udf,,Just set the DNS on that one client to pihole and leave the router DNS untouched.,pihole,1652026426.0
3,post,0,ukzmcm,I need a Whitelist for the Oculus quest 2,"Hello,
  
I am looking for a whitelist to allow the quest 2 to operate normally. Last time i wanted to use it, it wasn't updating my games, and so i couldn't play them...
  
Does anyone have a Whitelist for this?
  
Thanks!",pihole,1652008805.0
4,comment,9,i7sbfil,,"Trigger an update, look into the query log and you can just whitelist the needed domains from inside the log.",pihole,1652009595.0
5,comment,1,i7sjjva,,I have a quest 2 and had no issue updating my games.,pihole,1652014899.0
6,comment,1,i7snr4j,,"Could it be a router setting? I had to look into this the other day and it turns out it was because I had all traffic to/from Russia blocked. The Casino game hits and uses an IP out of Germany, which geo-locates to Russia, hence why mine wasn’t working. Rule created, and works now!",pihole,1652017139.0
7,comment,1,i7t50aq,,It is one subdomain that is being blocked.  I had the same thing going on a couple of weeks ago.  At first I thought it was due to Meta changing Oculus dns.  Then I finally thought to look at my pi.,pihole,1652025179.0
8,comment,1,i7snkwb,,I don't know why i didn't think of that. Thanks I'll do that,pihole,1652017049.0
9,comment,1,i7st63r,,I guess op has completely different block lists than you have?,pihole,1652019837.0
10,comment,1,i7snopf,,"I don't really know what the issue might be then... But thanks, I'll try to look into it",pihole,1652017104.0
11,comment,1,i7t29t5,,"Interesting, i didn't know that. I'll check. Thanks a lot",pihole,1652023977.0
12,post,1,ukvf7q,"Not a pihole problem, but an eye-opener!","So I'm browsing the admin page, and there's more queries than I thought would be usual for this time and day (Sunday 8th May). So I hover over the ""Client activity over last 24 hours"" graph, and there's a bunch of queries (over 400 in one 10-minute bracket) from a device that I know is asleep!

In fact, it's sitting in a case on my table, and it's definitely asleep. It's a Toshiba Portege Z20t-B running Windows 8.1. Great little device, it's kind of a hybrid tablet with a detachable touchscreen.

But I wasn't expecting to see evidence of it making DNS queries while it was asleep!

I've searched for the usual such as ""allow windows to turn off this device to save power"", and others - there's known problems with Windows having DNS issues after resuming from sleep, but nothing about making DNS queries \*while\* asleep. I might have to resort to a full shut down instead of sleeping. At least it's fast to boot - it's got a 128GB SSD.",pihole,1651989809.0
13,comment,3,i7s2i3d,,My Samsung Tizen-based TV also does DNS queries while it's in standby. Expect a lot of other devices to the same.,pihole,1652002008.0
14,post,1,uku4v9,Pi-hole not showing nearly enough queries,"Hello,

I noticed that Pi-hole is working, but it seems to only get some queries. For example, I will open a website and it does not appear in the queries list. Some queries do appear though, such as some Discord requests and Firefox stuff, but not everything. Is my computer using ipv6, or does that have nothing to do with this? Did I not configure something correctly?",pihole,1651984313.0
15,comment,1,i7rh0wy,,"I lot of programs and devices these days use hard coded DNS servers and ignore your settings. It can get pretty complicated, but on my pfsense router I blocked the most common dns servers for all devices except my pihole.

For example, the YouTube app on phones is hard coded to use the Google DNS server, and a lot of web browsers like Firefox are hard coded to use cloudflare DNS. If they use DNS over HTTPS, it gets even harder to block them.",pihole,1651985151.0
16,comment,1,i7rg2fh,,How did you config your networks DNS?,pihole,1651984603.0
17,comment,1,i7rslve,,"Did you flush the DNS cache on your PC?

ipconfig /flushdns",pihole,1651993482.0
18,comment,1,i7rh8v0,,"Ah, I see. I found a setting in Firefox to change the DNS setting, so I'm going to try changing that.",pihole,1651985282.0
19,comment,1,i7rjask,,">	the YouTube app on phones is hard coded to use the Google DNS server

Not on any of my phones.",pihole,1651986545.0
20,comment,0,i7s82oe,,The second paragraph is almost entirely incorrect.,pihole,1652006932.0
21,comment,1,i7rgehv,,Currently I have only set the DNS on my computer as I don't want to forward everyone else's traffic yet.,pihole,1651984791.0
22,comment,1,i7sz1wh,,Nope! I'll try that!,pihole,1652022543.0
23,comment,1,i7rttr6,,I must’ve been thinking about the roku or smartTV app then,pihole,1651994480.0
24,comment,1,i7sqmfx,,"Extremely helpful, thank you for your input lol",pihole,1652018586.0
25,comment,1,i7s61y8,,Did you just change the DNS in the IPv4 settings or also the IPv6 settings of your computers network adapter?,pihole,1652005195.0
26,comment,1,i7syx99,,Only IPv4 because I couldn't figure out how to configure pihole for IPv6,pihole,1652022485.0
27,post,0,ukt5vi,"Please solve my three problems in pihole regarding query log , dns server and name of hosts.","Hello I am using pihole since last one week , I was using private dns in mobile before but now my whole family could enjoy ad less experience. Thanks to team behind it. 
Now daily I am getting some problems.. sometimes dns issue ... Sometimes ads were not blocked. 
I am using pihole on raspberry pi connected which is connected with usb slot of router for power.



 Before I was seeing three ips in my dns (in n/w info of tablet) .. [Like this ](https://i.imgur.com/rpSYqdP.png) )
Tried many things but it didn't solve my problem so I am using pihole inbuilt dhcp server..  I turned off both ipv4 and ipv6 dhcp from my router..
But still I am seeing two ip in dns info (https://i.imgur.com/KnVd5G5.png) . (Someone told me it should be just my pihole ip which is 192.168.1.13. how to solve this issue???? 



 Second problem is I can't see my clients name in router .. ( for which I don't care unless pihole provides info )but thing is , I can't see name in dns query log too in pihole web ( https://i.imgur.com/C4BCE52.png ) Here  client name should be showing after enabling dhcp in pihole . How to solve it ???


And third question/problem , why my router ip showing in dns query log with many sites visited by it ??  (https://i.imgur.com/ZEVplZS.png) 

Please tell how to solve these problems as I am new to pihole and not techy person who can understand codes.


Edit : on some devices , ads getting blocked but on some , it doesn't block ..    Devices on which it not blocking , I check on those devices through dnsleaktest , 2 servers has been found and both server name is my ISP while , on devices which is fine in blocking ads, shows only 1 server (cloudfare) which is right.",pihole,1651980557.0
28,comment,1,i7rvxlv,," Its really hard to understand what the exact issue is from what you wrote, If you are having a dns issue its most likely to do with your router/ pihole settings. There are different ways of doing this, I don't think Disabling DHCP on your router helps.",pihole,1651996230.0
29,post,1,ukrwke,Backup Pihole Help,"Hey everyone,

So I'm a little stuck at the moment and need some help. I've been successfully running my pihole on a Raspberry Pi 3 for almost a year. It's been great. I'm currently trying to run a backup pi off of my server. I can't figure out how to route the network traffic to my backup pi.

My setup:

UDM-Pro as gateway and DHCP server.

RPi3 as main pihole @ 192.168.1.35

Server with proxmox -> Ubuntu Server VM @ 192.168.1.169 with docker installed. I installed pihole using the [hub.docker.com](https://hub.docker.com) yaml file. The only change I had to make to it was the ports since they were already in use by other containers (this may be an issue?) I changed the ports as follows:

\- "" 51111:53/tcp""       - ""51111:53/udp""      - ""51000:80/tcp""

I commented out port 67 since I am not using the pihole as my DHCP server.

I am able to access the admin page using [192.168.1.169:51000](https://192.168.1.169:51000)

Now, my problem is that I don't understand how to route the traffic on this backup pihole. I tried setting the secondary DNS on the Unifi web GUI, but it doesn't allow me to map the port. I have NGINX proxy manager setup (I just learned how to use this) and this works for my other services but that's because they are specifically requesting a domain that NPM sends to the correct port. I don't understand how this would work if I want to send all internet traffic to the backup pihole through NPC. This might not even be in the right direction I need to go.....I'm a bit at a lose here.

If someone could point me in the right direction or drop some hints to where I need to start reading I'd be very appreciative.",pihole,1651975862.0
30,comment,3,i7r1tu6,,"Your main pihole is 192.168.1.35:53 and you want a secondary on 192.168.1.169:51111?  You can do that but it won’t work because clients will want to use port 53 in both cases. And 53 is DNS so if something is conflicting with that, then that’s the problem to be resolved first. Maybe see if you can figure out that part and then not being able to specify a port won’t matter.",pihole,1651976758.0
31,comment,2,i7rbqnh,,"You would need to route the incoming traffic on the unify internally from port 51111 to port 53, but I doubt this is possible on this device. I recommend to change the ports your containers use out of the standerized port range.
Port 53 is standerized for the use of DNS.",pihole,1651982144.0
32,comment,1,i7ry7dr,,"You can't tell clients to not use port 53, at least not easily. So the only way to do this AFAIK is to either use separate devices or VMs for each Pihole instance, or to do some masquerading on your router to, for example, redirect port 192.168.1.169:53 to 192.168.1.169:51111.",pihole,1651998198.0
33,comment,1,i7t3ai4,,"Hopefully this command will tell us what's listening on :53 ...

**sudo ss -tulpn | grep :53**

The hope being that we can turn that off whatever that turns out to be, turn on your dockerize secondary, and not get a conflict.",pihole,1652024430.0
34,comment,1,i7syd18,,"Thank you for your reply! Correct, main pihole is on 1.35 and is a raspberry pi, secondary (backup) is on 1.169 in a container. I've tried to use the default docker-compose file which uses port 53 but I get [these errors](https://imgur.com/a/CpSnnLC). That link also contains the compose file I'm trying to use (the original that gives the errors).

If you could give me any suggestions on where to start looking to fix the port 53 error I would appreciate the help.  Thank you again.",pihole,1652022230.0
35,comment,1,i7syt5h,,"Is there any way I could see what else is using port 53 on this VM? Looking at my current containers running, [I don't see anything using it](https://imgur.com/a/CpSnnLC).

Thank you for your reply and help!",pihole,1652022433.0
36,comment,1,i7szbts,,Thanks for the help. I'll look into this some more regarding the port redirect. Both piholes are on separate devices. Main one on a raspberry pi at 1.35 and the backup on a separate device in a VM at 1.169. I figured this would be a quick setup using docker but apparently I was wrong lol.,pihole,1652022669.0
37,comment,1,i7t5glm,,"This looks like the problem's solution.  If you point your Ubuntu host at your docker/secondary Pihole which will forward to another server you should be all set.

[https://www.linuxuprising.com/2020/07/ubuntu-how-to-free-up-port-53-used-by.html](https://www.linuxuprising.com/2020/07/ubuntu-how-to-free-up-port-53-used-by.html)",pihole,1652025377.0
38,post,100,ukoxwn,Paramount Plus Whitelist,"First off, thanks to this subreddit for being a place to find solutions. I have not seen anything bluntly stated for Paramount Plus.

I have whitelisted

[`pubads.g.doubleclick.net`](https://pubads.g.doubleclick.net) allows you to watch your shows and get past the blank loading screen.

[`tags.tiqcdn.com`](https://tags.tiqcdn.com) allows you to keep your timestamps throughout multiple devices.

I only need these to be whitelisted to run on my firefox browser, Android phone, and amazon smart tv.

I have these only used in a group for paramount plus used devices.",pihole,1651965404.0
39,comment,18,i7qrxs5,,"Thanks for this. It maybe just me but it seem Paramount Plus have recently doubled down on  what they're calling ""ad blocking"" as they harden/protect their telemetry gathering.",pihole,1651971545.0
40,comment,13,i7r170p,,I'll give this a try.  Paramount+ is the only streaming service that has a problem with the pihole.  It's frustrating.,pihole,1651976418.0
41,comment,5,i7r33js,,"So far for me the only one I've needed has been ``pubads.g.doubleclick.net`` but TY for the other one, that's good to know re:timestamp retention.",pihole,1651977440.0
42,comment,5,i7r4nmp,,I hope I don’t run into this but this a saved thread in case I do. Good info.,pihole,1651978277.0
43,comment,3,i7r15qz,,"I have a huge list for paramount plus. It was ugly but it worked. After seeing your post, I disabled all of them and added the second you listed (I already had the first) and my paramount plus died. It would show preview videos, but would not launch shows until I added kvinit-prod.api.kochava.com. The shows now launch but chocked full of ads. Curious… do you get ads on your devices?

Edit: added a fourth: secure-dcr.imworldwide.com",pihole,1651976401.0
44,comment,4,i7rfm3m,,Yeah but white listing double click essentially defeats the pihole. It's like the largest broker of ads on the Internet. You'd be better off just not using pihole.,pihole,1651984365.0
45,comment,2,i7rb4wk,,"I gave up. I select a show on paramountplus, but before I click Play I disable pihole for 5 minutes. This works for me using Firefox. That's the only place i watch paramountplus shows.

I have a free year of service through t-mobile. After the year is up, I'll drop then asap.",pihole,1651981798.0
46,comment,2,i7rrenu,,A lot of my adlists are blocking a whole bunch of paramount stuff and none of the suggestions here have worked so I think for now I'm still going to do the disable for 30 secs thing to get a show started,pihole,1651992508.0
47,comment,1,i7sg4hb,,"Interesting. I don’t have either of these in my allowlist and I have no issues with Paramount+.  

What adlists are you using?

I only use Apple TV for streaming. 


Edit: Added line about Apple TV.",pihole,1652012816.0
48,comment,5,i7qzdbr,,Agreed.,pihole,1651975450.0
49,comment,2,i7r38l4,,Do you have timestamp saves between devices?,pihole,1651977518.0
50,comment,2,i7r1guh,,"I only get the cbs logo (ad).

What devices do you use?",pihole,1651976565.0
51,comment,1,i7sb2ft,,That is why I only use it in a group of selected devices. Not my whole networking infrastructure.,pihole,1652009328.0
52,comment,1,i7r1lwa,,"Mainly Apple TV

Edit: the third I listed worked for one episode and is now dead again…",pihole,1651976641.0
53,comment,1,i7r1sqb,,"Ok, thanks. As a programmer I think that having all the information is good for all people.

Did it work before on iPhone?",pihole,1651976741.0
54,comment,1,i7r2h06,,"Not sure. I don’t have it loaded on my phone. I have added a 4th to my list and shows are playing with ads. 

….and now that died too. It seems the ads come from different location each time. I have a whitelist of 38 addresses. I have re-enabled them all and paramount is back. I tried one by one and sometimes they launch, then they don’t, but with this gigantic list, I have had no issues. But it’s like not having the Pi-hole at all. Apple TV sucks.",pihole,1651977105.0
55,comment,1,i7r3o8k,,Can you please provide this list?,pihole,1651977750.0
56,comment,4,i7r4ars,,"
sparrow.paramountplus.com				
s0.2mdn.net				
cbsinteractive.hb.omtrdc.net				
tv.rlcdn.com				
pubads.g.doubleclick.net				
ads.play.cbsi.video				
saa.cbsi.com				
ceres.iad-03.braze.com				
cznpcuyuiceu4p4qnlz9q0fbvdmkl1616974854.uaid.imrworldwide.com				
dpm.demdex.net				
www.paramountplus.com				
api2.branch.io				
cdn.branch.io				
mobile-collector.newrelic.com						
i-amlg-prod.appspot.com				
wwwimage-us.pplusstatic.com				
thumbnails.cbsig.net				
link.theplatform.com			
87a6b28bc7823e67a5bb2a0a6728c702afcae78d.cws.conviva.com				
control.kochava.com				
secure-dcr.imrworldwide.com						
68.68.250.142.in-addr.arpa				
imasdk.googleapis.com				
kvinit-prod.api.kochava.com				
sb.scorecardresearch.com				
c.aaxads.com				
c.amazon-adsystem.com				
i-amlg-prod.appsot.com				
paramountplus.com				
partnerad.l.doubleclick.net				
sdk.imrworldwide.com				
secure-dcr.imworldwide.com				
udm.scorecardresearch.com				
tags.tiqcdn.com",pihole,1651978086.0
57,comment,5,i7rija8,,"You can white paramountplus.com as a wildcard, so you don’t need multiple subdomains whitelisted, and guards against a future subdomain they might use",pihole,1651986075.0
58,comment,1,i7ravt6,,"OMG. I'm never getting Paramount plus now. WTF. imworldwide is #4 on my blocked domains list. I whitelisted it once.

&#x200B;

And then never again.",pihole,1651981660.0
59,comment,1,i7rmdue,,Ok interesting. Thank you.,pihole,1651988655.0
60,post,0,ukmzag,"Pihole doesn't work for ethernet client, does work for wifi clients","I installed Pihole on a Mac Mini running PopOS. The Mini is connected to the router via ethernet. 

I'm having two problems. Maybe they're related and maybe they're not. 

First,  my ethernet-connected desktop won't connect to the internet when I set its DNS to the Pihole. Devices connected by wifi do work just fine, though, when they have the Pihole's IP as their DNS. (Connecting the desktop by wifi isn't an option, unfortunately.)

Second, when I set the router to use the Pihole as a DNS provider, nothing at all connects to the internet.

I'd be grateful for your help.",pihole,1651959333.0
61,comment,3,i7q6zws,,"Did you check this?

https://docs.pi-hole.net/ftldns/interfaces/

Is pihole listening on the right interface(s) and/or are the clients at most 1 hop away?",pihole,1651960989.0
62,comment,1,i7q4ikx,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1651959799.0
63,comment,1,i7qs1rk,,"Interesting. No, I didn't check that, and it is set to be one hop. I'll change that and report back. Thank you.",pihole,1651971603.0
64,comment,1,i7qsnpz,,"Thank you. It's 

https://tricorder.pi-hole.net/NJBOWvf8/",pihole,1651971917.0
65,comment,2,i7qt6c9,,"~~Regrettably, switching it to ""Permit all origins"" doesn't seem to have fixed it.~~

~~I'm sorry, but I don't know how to tell whether it's listening on the right interface(s). If setting it to ""Permit all origins"" allows all interfaces, then I guess it is? Sorry I can't be of more help.~~

I was wrong. It works—I thought to log out and back in again and that fixed it. Thank you for your help.",pihole,1651972187.0
66,comment,1,i7qu0mt,,"Thank you for your help, jfb-pihole. I think I've fixed it with Sloopwafel's advice.",pihole,1651972631.0
67,post,1,uklocg,help me please,I managed to get a pie hole running through VMware Workstation 16 I sent my IP address as static and yet it won't block anything and if I change my Wi-Fi DNS to it gets no Wi-Fi I don't know what to do thanks for any help,pihole,1651955359.0
68,comment,1,i7pvtsv,,Is your VM & wifi on same network? Both on ex: 192.168.1.xxx? And also you did setup your DNS to point to Pi-hole?,pihole,1651955854.0
69,comment,1,i7q2gfp,,Are you using Bridged networking or NAT in workstation? Should be bridged to work,pihole,1651958827.0
70,comment,1,i7q36x8,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1651959174.0
71,comment,1,i7pwalf,,Yes they are on the same network  whenever I set the dns to it on my router the connection dies and my wifi is gone,pihole,1651956058.0
72,comment,1,i7q2ixs,,How would I do bridge networking,pihole,1651958858.0
73,comment,1,i7pwjud,,Try manually putting on your network card on the PC and see. Could be something on the router itself,pihole,1651956168.0
74,comment,1,i7rodfr,,"On the network card settings for the vm you can select between the NAT and Bridged networks. Changing this after you deployed the VM will change the IP and if PiHole changed to a static IP it wont work anymore. 

I would sugest building a new VM this time with Bridged networking from the start.",pihole,1651990128.0
75,comment,1,i7pwmsm,,"What do you mean by that I have it hooked up through
Enthernet",pihole,1651956203.0
76,comment,1,i7pwwaq,,If you using a windows PC go to your network card settings and set your DNS to be the VM ip and see if you got internet (you should) and see if you block ads. Setting the VM as a DNS entry on your router should not remove/disable your wifi,pihole,1651956317.0
77,comment,1,i7pxagv,,Can I private message you and send you some pictures see if you can help me figure this out,pihole,1651956487.0
78,post,4,uklegt,Pihole not working anymore,"Before holidays, I installed a brand new Raspberry 0w and set up pihole on it. It was working very well. We went holidays and when I were back I turned it on back and it's currently not working anymore. I've not touched at it since and don't know wht to do... Any issue ?

Sorry for my very bad english I am french...",pihole,1651954493.0
79,comment,3,i7pw8wo,,"Does the RP have power? Are you sure? What happens when you turn it on? Do any lights come on? Are you sure the power supply actually works? Is there power at the plug? Plug in a lamp to prove this.

Without more information, we are just guessing!",pihole,1651956039.0
80,comment,2,i7q39yx,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1651959213.0
81,comment,1,i7ryikj,,"Same for me, I am French and I can't update my pihole...

[https://zupimages.net/up/22/18/6cc5.png](https://zupimages.net/up/22/18/6cc5.png)

[https://zupimages.net/up/22/18/5vdb.png](https://zupimages.net/up/22/18/5vdb.png)

[https://zupimages.net/up/22/18/1mj6.png](https://zupimages.net/up/22/18/1mj6.png)

I use Cloudflare DNS",pihole,1651998477.0
82,comment,1,i7px05r,,"Yes it is plugged, hot, admin panel works well and the green light is on.

Sorry for those minimal informations I don't know what to notice at all...

I may add that it has a static address, is in the first position of the Dns list of my box.",pihole,1651956363.0
83,comment,1,i7rrwgq,,"[https://tricorder.pi-hole.net/TmjMtJY4/](https://tricorder.pi-hole.net/TmjMtJY4/)  


Hope this is what you want",pihole,1651992907.0
84,comment,1,i7rzisk,,Update Success since 10:40 today,pihole,1651999361.0
85,comment,3,i7pyoi6,,"It should be the only IP in the DNS list.  The ""secondary"" isn't fallback; devices will pick at random which one.  Even if it says ""secondary"" or ""backup dns""",pihole,1651957108.0
86,comment,1,i7s0hw4,,"Yes same

Oui pareil",pihole,1652000209.0
87,comment,1,i7pzgcx,,Changed it but still not working :|,pihole,1651957462.0
88,comment,-1,i7r8jes,,"I only use the Ethernet interface, and not Wi-Fi. I want it to be as fast as possible.",pihole,1651980389.0
89,comment,1,i7q0yqp,,"Cycle the power on the pi, give it a few minutes.  If not, just rebuild it real quick, and reuse the old IP (it'll probably try to use the old one anyways)",pihole,1651958150.0
90,post,15,ukl284,Pihole and openvpn Advertise DNS to clients,"Hello,

In order to configure correctly openvpn and make pihole work fine, i had to put the option ""Advertise DNS to clients"" to NO (the default is set to YES). Also I did all that is said in the guide ([https://docs.pi-hole.net/guides/vpn/openvpn/setup-openvpn-server/](https://docs.pi-hole.net/guides/vpn/openvpn/setup-openvpn-server/)). I just wanted to know if this is normal.

Thank you for all your work!",pihole,1651953457.0
91,comment,1,i7qss8o,,I pointed my routers DNS to the static IP for the pi. I don’t even know what that setting is.,pihole,1651971983.0
92,comment,1,i7sjki0,,"On case you end stuck, if I recall well PiVPN setups the DNS automatically when it detects Pihole is already running on the VPN host.",pihole,1652014909.0
93,comment,1,i7rwxlv,,"If I only did this, I couldn't make it work...",pihole,1651997084.0
94,post,2,ukj8tq,A question regarding best practice of either using a Pi on my Router or my NAS,"So. After my search here I found that many say it would be up to me if install it either way. But would the same be true in the case that the NAS is only connected to the router via WLAN?

&#x200B;

Maybe to elaborate a little. I have in the ground floor my router. My NAS is on the first floor and only connected to the router via WLAN. I could also either connect a Pi directly to my router with a networc cable or use the application/Docker container on my TrueNAS Scale box (and as I mention it extra, is it better to use the docker image or use the application from the official charts/truecharts?).

&#x200B;

Should I see a lag if my request goes PC/Laptop/Android Box - Router - NAS - Router - WWW or is it negligible?",pihole,1651947897.0
95,comment,2,i7pmmi6,,I run my pihole on my qnap NAS using a docker. I have zero problems with speed or request latency.,pihole,1651951653.0
96,comment,1,i7prhw7,,"PiHole is a DNS server. Servers should always be wired. 

WiFi is convenient and for mobility. It's not really meant for low latency and reliability.",pihole,1651953873.0
97,comment,1,i7pnkbg,,"Least lag will be pihole on something with an ethernet cable to your router. If you put the pihole on wifi, all dns traffic will go over wifi to pihole, then back over wifi from pihole to your desktop. It adds up.",pihole,1651952085.0
98,comment,1,i7pzs18,,Both. Have multiple instances for redundancy,pihole,1651957608.0
99,post,1,uk9hz1,help,"I'm trying to set up my pie hole through docker using this command and it keeps telling me invalid reference format

docker run -d --name pihole -e ServerIP=172.16.154.130 -e WEBPASSWORD=password -e TZ=Europe/Copenhagen -e DNS1=127.17.0.1 -e DNS2=1.1.1.1 -e DNS3=1.0.0.1 -p 80:80 -p 53:53/tcp -p 53:53/udp -p 443:443 --restart=unless-stopped pihole/pihole:latest 
Any help would be appreciated I have changed out the things on my side that need to be private",pihole,1651914887.0
100,comment,4,i7nthjn,,"DNS3 is not a valid env variable
https://github.com/pi-hole/docker-pi-hole",pihole,1651918087.0
101,comment,0,i7nrjty,,"Your Server IP and DNS1 appear to be in public IP ranges.

Private IP ranges are:

* 10.0.0.0 — 10.255.255.255
* 172.16.0.0 — 172.31.255.255
* 192.168.0.0 — 192.168.255.255

Unless you've manually changed the IP subnet on your router, the range currently in use on your network is 192.168.0.0/24.  So you need to pick a Server IP in that range.

DNS1 also needs to be a local IP, which(I believe) should be your router's IP (please someone correct me if I'm wrong on that).

If you HAVE manually changed the IP subnet on your router to a public IP range, I'd recommend changing that to something in one of the above private ranges.  Otherwise, even if you DO get PiHole installed l, if you lock it down to only allow administration from private IP ranges, you'll lose access to the Administrative console.

Edit: formatting

Edit 2: I misread your server IP it is in a private range.  Still, DNS may be an issue.

Edit 3: sounds like I was wrong on the loopback DNS as well.  BUT unless you're using something like Unbound for recursive DNS on the same container, having the loopback may still be the issue.  Try doing the setup without it and see if the error goes away.",pihole,1651916352.0
102,comment,2,i7ns5aa,,"If I remembered correctly, the entire 127.x.x.x is loopback",pihole,1651916900.0
103,comment,1,i7o2xqq,,[deleted],pihole,1651925225.0
104,comment,1,i7ntbxc,,Huh...learn something new every day.  I've always only used 127.0.0.1.,pihole,1651917946.0
105,comment,1,i7o4eju,,"No it's in the private range.  I was mistaken, per my comment edits.",pihole,1651926151.0
106,post,38,uk6i0k,Max Clients for DNSMASQ,"I am thinking of running Pihole on a large environment, I am wondering how much queries can dnsmasq handle.  Just eyeballing the leases there are about 6000 to 9000 clients.  These are simultaneous connections, just leases.

I think ISC Bind can handle it, also if the load gets too high we can build more.  Just need to watch the service monitors (nagios, prometheus, grafana) to see if anything gets critical.

OS will be Rocky Linux on an ESXi host  
4GB RAM  
2 core vCPU  
60GB of Disk (I can do SSD, SAS, or SATA)

So NOT on a SBC like a Pi, further more, there will some filtering, but considerably less than home users.

It will be native build, not docker.  Access to the GUI will be https.  

Why pihole?  Analytics and metrics.",pihole,1651901808.0
107,comment,7,i7o7slj,,"I think it really depends on how active the clients are.  Expect the volume of requests to increase. When blocked via DNS some clients recheck immediately and then keep checking.  I see this with some iot devices, but I have also seen this with some network devices and with endpoint management software installed on my work laptop.  
I suspect you'll want to increase the cache size.   It saves forwarding overhead if the response can be returned from cache.
Regardless, you'll probably want to tune settings, this link provides some good info on that. https://www.redhat.com/en/blog/five-nines-dnsmasq
You'll also want to test as you tune.  If you have logs from the existing DNS server you should be able build a realistic test dataset.  

You may also want to keep an eye on what you're blocking.",pihole,1651928146.0
108,comment,3,i7q3ow8,,">Why pihole? Analytics and metrics.

Pi-hole should be able to handle that many clients, but the difficulty will be in looking at the dashboard.  The huge query volume and slow response of PHP may make this quite slow, or it may not load at all.

Most users in Enterprise environments end up disabling the web admin GUI for this reason.",pihole,1651959409.0
109,post,2,uk02ef,Problem running Argo Tunnel with Pi-Hole (Cloudflared),"When I try to access Pi-Hole via Cloudflared's proxy I get this error.

 `[ERROR]: Unable to parse results from queryads.php:`

`(boolean)`

Any ideas on how to fix this?",pihole,1651879147.0
110,comment,1,i7o3idy,,Did you forget /admin in your URL?,pihole,1651925589.0
111,comment,1,i7obljn,,"Yes.... Yes, I did.",pihole,1651930208.0
112,post,0,ujxi2l,NAN,For some reason my pihole keeps showing NAN and not starting up.,pihole,1651871631.0
113,comment,11,i7lwi1u,,It wants Flatbread.,pihole,1651875311.0
114,comment,2,i7nkcrd,,do not show your pihole to your nan!,pihole,1651909855.0
115,comment,1,i7mbcd2,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1651882488.0
116,comment,2,i7m3hq7,,Not actually nonsense,pihole,1651878628.0
117,comment,2,i7mrzfn,,Hmm some how my Ubuntu has no space left to create a log. Maybe that’s why,pihole,1651890837.0
118,comment,1,i7mwypc,,Four NAN Jeremy? Four?!,pihole,1651893502.0
119,post,12,ujrwlk,Properly displaying clients,"I've read about this and don't believe it's possible due to Docker but wanted to verify since I'm new to pihole.

I only have one client ip show up and it's the docker container's internal ip.

From what I've read this is because I'm running Windows as my Docker host which doesn't allow promiscuous mode, which would be needed to fix this.

Currently, clients are using the IP of the Windows host machine for DNS.",pihole,1651856154.0
120,comment,-3,i7n486v,,"1. Don't use docker for self hosted Projects. Use LXC, an actual VM or a real Raspberry Pi instead

2. The issue is that the Container you're running pihole in is running in a seperate Network with its own Gateway and Firewall that in Turn Port forwards UDP-53 to the Container. That means pihole can only show the ip address of the Gateway, because it's doing NAT. The solution is to Run the pihole directly on the Same Network as your Clients.",pihole,1651897733.0
121,comment,2,i7o13bg,,Use macvlan networking to the container. There are several videos for running in docker on synology and regular server environments.,pihole,1651924004.0
122,post,1,ujqnwu,"Pihole appears to be blocking ads, no dashboard queries","Hi, my Pihole setup appears to be blocking ads, however the dashboard shows no queries. Here is my setup:

\- Pihole 5.15 running in a Ubuntu 21.10 VM on an Unraid 6.10rc5 server- Router is a Bell Hub 3000 providing DHCP

\- Router is pointing to Pihole IP for DNS

What's the right path to troubleshoot?

Previously I was using Pihole as DHCP server but had some issues, but the dashboard was showing queries, now it does not.

Thanks!",pihole,1651852744.0
123,comment,1,i7kjv0t,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1651853694.0
124,comment,1,i7kk4de,,https://tricorder.pi-hole.net/WLrIktrB/,pihole,1651853797.0
125,comment,1,i7mzbre,,Any ideas?,pihole,1651894821.0
126,post,0,ujq32h,Multi-interface Pi-hole docker. How to restrict WebGUI to management interface only,"Multi-interface Pi-hole docker. 

How to restrict WebGUI to management interface only?",pihole,1651851129.0
127,post,7,ujq1sr,Filter out known bad data from dashboard,"I just got pihole setup on my network and it's working great but noticed some device is making requests to a nonexistent dns win-0g0e3e7a2at.localdomain 

I don't think I'll be able to easily find out which device is making the requests but is there a way to filter this data out of my stats? Right now it shows 50% of all my traffic is being blocked because of this frequent request.",pihole,1651851033.0
128,comment,5,i7kjtfw,,">	is there a way to filter this data out of my stats?

You can exclude this domain from your top lists, but not from the overall stats or the query log. 

>	Right now it shows 50% of all my traffic is being blocked because of this frequent request.

This is an accurate reflection of the query activity.  It is not ""bad data.""",pihole,1651853676.0
129,comment,1,i7kpbfc,,Thanks for the quick response! Loving the tool btw.,pihole,1651855861.0
130,post,49,ujmdzg,WireGuard from outside LAN speeds crippled,"Followed this guide - [https://docs.pi-hole.net/guides/vpn/wireguard/overview/](https://docs.pi-hole.net/guides/vpn/wireguard/overview/) 

Everything connects fine but the the connection is crippled to 1mbps max - surely this isn't a limitation of 4/5G? :S",pihole,1651840211.0
131,comment,19,i7k2v0q,,"Your throughout will be limited by the slowest element in the data flow chain. Downloads on the remote device are limited by the upload speed on your home data connection.  That includes the device on which Wireguard is running, the modem, etc. 

To avoid this limitation you can set up a split tunnel so only the DNS traffic is routed to your home network, while the data remains on the network the remote client is using.",pihole,1651846825.0
132,comment,9,i7jtjwu,,"  Did you check the allowed IP section? If the default is active it should be 0.0.0.0, which will route everything through the tunnel which in return will limit your speed to your homes max upstream. 
I guess you want to have AdBlock on the go, so I would change the allowed IP's to your home IP range; i.e. 192.168.1.0/24",pihole,1651842659.0
133,comment,3,i7kyb8h,,"What's your internet connection's uplink speed? 

What's your phone's uplink speed?

Use Speedtest.net to get an idea of both, allow for the overhead added by the VPN, and you now know your approximate upper limits for up & down speed.

For me I have a 1Gbps fiber line and a decent 4G connection on my phone. I generally get 600Mbps up and down on my home connection though some days it can be as slow as 300Mbps.

So I ran a few tests:

PC over Ethernet: ~500Mbps down & up

Phone on WiFi: ~150Mbps down & up

Phone on 4G: ~100Mbps down and 16Mbps up

Phone on 4G with WireGuard to pi-vpn: ~71Mbps down and 16Mbps up

All were run to the same Speedtest server within a short period of time.",pihole,1651859637.0
134,comment,3,i7lwsll,,"Do split tunnel. Using the AllowedIPs I set up ranges it is allowed to use. Like 10.2.0.0/24, 192.168.178.0/24 (personal scenario), which allows the VPN only to send DNS to Pi Hole, and send requests to my internal network when I request a page from a home server.

That way I can use it as needed, my home network is limited to 50 Mbit up, but at work we have fiber, with VPN on I can use home Pi-hole, home network devices, while reaching 500 Mbit while downloading some like random, because that traffic isn’t routed through my VPN.

That’s how it works best.",pihole,1651875449.0
135,comment,1,i7kcwhf,,"Are you using TCP or UDP?
UDP performance has been much better in my experience though I've only played around with it a little.",pihole,1651850925.0
136,comment,1,i7nl3uk,,"a) My experience so far on WG was bad. Cannot even connect when not in LAN. To be fair it does block ads, but everything else was also blocked...

b) the download speed on your client is affected by the upload speed, poccessing power of your server.",pihole,1651910511.0
137,comment,3,i7k3gcx,,Is that kind of setup possible with Wireguard? I see a section on Pi-holes website to do that with OpenVPN.,pihole,1651847075.0
138,comment,1,i7jvujv,,That sounded promising but ain't it - are you saying I'm limited to my ISP upload speed no matter what though?,pihole,1651843732.0
139,comment,1,i7nlsn5,,"I also have terrible up and down speed on VPN. I tried this (i assume in wireguard app/profile?) But i get error when doing it. 

But how dose it work in theory, now i have low speed because all is going true VPN, but if i add IP, how dose that ""allow"" for faster speeds?!",pihole,1651911109.0
140,comment,2,i7lai4z,,he's using wireguard.,pihole,1651865102.0
141,comment,7,i7kheqb,,"In the guide you followed, don't do this step. 

https://docs.pi-hole.net/guides/vpn/wireguard/route-everything/",pihole,1651852714.0
142,comment,7,i7kpe13,,"Yes. In your VPN, you mobile device is connecting to your home network and passing all traffic through your home network.

Your home upload speed is the fastest it can send data to your mobile device, so if you have 1 mbps upload speed limit at home, then that's as fast you're going to get on the mobile device as download. And vice versa, your home download speed is going to be a limiting factor your mobile device's upload speed.

You could look into a split tunnel VPN, where only the dns queries are routed to your home network and everything else doesn't. This will help with the bandwidth issues but it will also not hide your ip address and would let you access your home region's streaming content in case you are traveling internationally.",pihole,1651855890.0
143,comment,5,i7kyjrx,,"> are you saying I'm limited to my ISP upload speed no matter what though?

Yes. Using a VPN to connect remotely to your home VPN server won't result in your ISP giving you faster upload speeds.",pihole,1651859736.0
144,comment,2,i7jwti4,,"Did you disconnect and connect after the change?

I configured it like this:
 Adresse: 10.6.0.2/24
 Nameserver: 192.168.2.249
 Allowed IP: 192.168.2.0/24
 Endpoint: my.DDNS.Adress:Port 
Maybe my trick is the local IP address instead of the VPN address for the pihole",pihole,1651844182.0
145,comment,1,i7nm9ja,,"The theory behind it is, if you have a bottleneck between your VPN server and end using device, the split tunnel fixes that. It only tunnels stuur through the VPN which IP’s matching the AllowedIPs part, all other packets like video or downloads bypass the VPN making the bottleneck disappear for regular usage.",pihole,1651911527.0
146,comment,2,i7ldd60,,"Haha I totally forgot that Wireguard only supports UDP.
When I was experimenting I looked at both OpenVPN and Wireguard. I must have been thinking about OpenVPN.
Disregard.",pihole,1651866424.0
147,comment,1,i7l8p74,,Ok - it all makes sense now!,pihole,1651864275.0
148,comment,1,i7npaph,,And how do I achieve this then? I got error when editing the profile in wireguard?,pihole,1651914274.0
149,comment,1,i7npd8w,,What error dit you get? And what did you change? What you enter really depends on how the server is configured,pihole,1651914337.0
150,comment,1,i7nq9mk,,"I open wireguard and change the profile there in ""AllowedIPs:"" now it's:    0.0.0.0/0,  ::/0

And o try to change it to x.x.x.x, 192.168.87.0/24 and got error ""bad adress""

Edit x.x.x.x is my wireguard IP, don't know it by memory so that's why x instead.",pihole,1651915174.0
151,comment,1,i7nqww8,,Can you try with only the local network ip part? The WireGuard ip isn’t needed. I have the Pi-hole IP (DNS) and local network ip.,pihole,1651915772.0
152,comment,1,i7nvwri,,"I tried to change it only to '''192.168.87.0/24 ::/0''' but no success. Is it on ""AllowedIPs""i should add it?

[photo](https://i.imgur.com/ADOSd65.png)",pihole,1651920139.0
153,comment,1,i7nx3ru,,"Yes, try with only 192.168.87.0/24 without the ::/0 part.

https://i.imgur.com/dcs1Na3.jpg",pihole,1651921097.0
154,comment,1,i7o4fq1,,Doing that resulted in no internet access :/,pihole,1651926170.0
155,comment,1,i7oio08,,How is the WireGuard server set up?,pihole,1651933735.0
156,comment,1,i7onjtf,,"I mean... Set up and set up, i just have it for fun and to test this out, and it workes great but terrible up/down speed, so general setup i would assume, no special config.",pihole,1651935992.0
157,comment,1,i7oo94w,,"Wat are the up and download speeds at your home? Because yeah with 0.0.0.0 all traffic, include visiting website, downloading apps and stuff are going to the vpn first, and then back to the phone.",pihole,1651936316.0
158,comment,1,i7oxjy5,,Home i have 100/100 but on the phone i only get (tops) 10 down and 10 up.,pihole,1651940474.0
159,post,86,uj688r,Plex and Pi-hole on same Raspberry Pi Device,"So I've successfully been running Pi-hole on a Rasp pi zero for awhile now. I wanted to turn my Pi into a Plex Server. I followed [this](https://pimylifeup.com/raspberry-pi-plex-server/) guide. Seems like a successful install.

My Pi has a static IP address of [192.168.0.110](https://192.168.0.110) so to try and access my Plex I go to [192.168.0.110](https://192.168.0.110):32400/web but it says:

""This site can’t be reached

**192.168.0.110** refused to connect.

Try:

* Checking the connection
* Checking the proxy and the firewall

ERR\_CONNECTION\_REFUSED""

Any advice on this would be appreciated!

EDIT:

So looks to be an issue starting the Plex server not a network issue. I ran `sudo systemctl status plexmediaserver` and it says failed to start Plex server. Any tips from here would be great.",pihole,1651781830.0
160,comment,14,i7h7r3u,,"Try with `http://192.168.0.110:32400/web` (and not https). If you just type the IP without a protocoll, it is possible the browser adds https by itself.

If this does not work, check if plex is listening on that port : `sudo ss -tulpena |grep :32400`",pihole,1651786324.0
161,comment,5,i7h5c2x,,"Hmmm. It shouldn't at all conflict with your pi-hole install

  


I'd say start by checking Plex is running (I believe it runs as a service) and then check the IP is actually the one you think it should be by checking your router (and that you can access pi hole properly)

  


See what that turns up and I guess we go from there?",pihole,1651785294.0
162,comment,35,i7gzk3o,,"While PiHole takes up very little in the way of system resources, Plex can easily crush a Pi into oblivion depending what you use it for. Consider not hosing them on the same hardware if possible.",pihole,1651782941.0
163,comment,2,i7j06pt,,I’m seeing a lot of posts from people discouraging you to install plex on a pi. I’ve got to say it works like a charm as long as you make sure your pi does not try to transcode anything.,pihole,1651821601.0
164,comment,2,i7hvybw,,"I would look into running these both with Docker if you can, I do this (not on a pi, but same idea) and it’s really cut down on the issue where different services collide.",pihole,1651797566.0
165,comment,1,i7h7hk9,,Have you opened the relevant port on your router to enable you to access your Pi?,pihole,1651786208.0
166,comment,1,i7hnk2w,,"I wouldn’t run Plex on anything but a powerful computer. When you start transcoding for subtitles or resolution, it really hammers the system.",pihole,1651793414.0
167,comment,1,i7jfdar,,"Some time back I ran both side by side and had this exact issue. I've since moved plex onto its own box for all of the reasons stated here.  It drove me nuts for a few days. I'm trying to remember the solution.  

I believe it is related to the interface of both pi-hole and plex wanting to use using lighttpd web server over port 80 causing a conflict. You can configure pi-hole to use a different port via /etc/lighttpd/lighttpd.conf but be aware that it will overwrite whenever you update pi-hole. I am sure there is a more elegant solution. 

Some googling will solve this for you. Also see the [Pi-hole support discord server here.](https://discourse.pi-hole.net/)",pihole,1651834524.0
168,comment,1,i7jx05k,,Are you running plex from a docker or portainer? Normally for me I setup a Mac VLAN in portainer and any container that i want to access independently of the host IP address i attach it to the Mac VLAN so that i reach it independently of the host IP. This works effectively for me.,pihole,1651844267.0
169,comment,1,i7k8cm9,,"I'm not a fan of using a Raspberry Pi for Plex, even if you only ""direct play"" without transcoding.

Plex involves a massive amount disk reads / disk writes in its various DBs, and I don't think a microSD card is up to the task.

Pi-hole is super lightweight by itself, but I think it will suffer when Plex starts updating its medata, starts scanning your drives to find new medias, etc.",pihole,1651849086.0
170,comment,1,i7leqrj,,I could be wrong the the pi zero is armv6 and it looks like armv7 is the minimum plex supports.,pihole,1651867065.0
171,comment,12,i7h9yaj,,"Beat me to it! This will solve your problem: Port 32400 (specific to being able to access the Plex webserver). 

HOWEVER (and, speaking from experience), I moved my library when I got my brand new, shiny RPi and after about a week, put it back on my 15-year old headless Dell PC. RPi just doesn't have the muscle meeded.

Edit: I re-read OP's post, and saw he mentioned port 32400, so my first piece is completely unhelpful. Clearly, it's been a long week for me lol, so don't flood me with downvotes, please.",pihole,1651787269.0
172,comment,3,i7hc897,,"Ok thanks for the suggestions.

I tried the http:// and that didn't work.

I entered the command `sudo ss -tulpena |grep :32400` , still doesn't work, is there supposed to be any output after entering that?

Thanks again!",pihole,1651788256.0
173,comment,0,i7ha2w1,,"And remove the IP= stuff from the file `/boot/cmdline.txt`.
The parameters in this file have to be on one line, don't add another line, this will break things.
And secondly, the syntax for this kernel parameter is 
```
IP= ip<client-IP-number>:[<server-id>]:<gateway-IP-number>:<netmask>:<client-hostname>:<interface>:{dhcp|dhcp6|auto6|on|any|none|off}
```
So you can't just set the client IP without the other values. Normally your device will always get the same IP from the DHCP server. The lease time is at least 7 days, mostly longer. So if your device is regularly powered up it will get the same IP, don't worry about this. You can always check the local IP with `hostname -I`.

(I will write the author of the tutorial about this)",pihole,1651787323.0
174,comment,1,i7hd7lb,,"Aha, looks like we might be onto something here.

I ran `sudo systemctl status plexmediaserver` and it gave me:

● plexmediaserver.service - Plex Media Server  
   Loaded: loaded (/lib/systemd/system/plexmediaserver.service; enabled; vendor preset: enabled)  
   Active: failed (Result: signal) since Thu 2022-05-05 15:06:58 PDT; 2min 17s ago  
  Process: 11728 ExecStartPre=/bin/sh -c /usr/bin/test -d ""${PLEX\_MEDIA\_SERVER\_APPLICATION\_SUPPORT\_DIR}"" || /bin/mkdir -p ""${PLEX\_MEDIA\_S  
  Process: 11731 ExecStart=/bin/sh -c  export PLEX\_MEDIA\_SERVER\_INFO\_VENDOR=""$(grep \^NAME= /etc/os-release | awk -F= ""{print \\$2}"" | tr -  
 Main PID: 11731 (code=killed, signal=SEGV)  
May 05 15:06:58 raspberrypi systemd\[1\]: plexmediaserver.service: Service RestartSec=5s expired, scheduling restart.  
May 05 15:06:58 raspberrypi systemd\[1\]: plexmediaserver.service: Scheduled restart job, restart counter is at 3.  
May 05 15:06:58 raspberrypi systemd\[1\]: Stopped Plex Media Server.  
May 05 15:06:58 raspberrypi systemd\[1\]: plexmediaserver.service: Start request repeated too quickly.  
May 05 15:06:58 raspberrypi systemd\[1\]: plexmediaserver.service: Failed with result 'signal'.  
May 05 15:06:58 raspberrypi systemd\[1\]: Failed to start Plex Media Server.  
lines 1-13/13 (END)  


Any thoughts on what to do from here?",pihole,1651788689.0
175,comment,9,i7h84o4,,"Direct playing (no transcodes) from a Pi isn't an issue, but the UI lag sucks unless you are using an SSD for the metadata. And since the Pi doesn't even have SATA lanes, it is pretty crummy for the task. A 4-5 year old laptop would perform way better. I'm sure you could find a junker on craigslist.",pihole,1651786484.0
176,comment,1,i7hdnfr,,Agreed. When scanning for new files on a USB HDD my pi4 is out of breath.,pihole,1651788884.0
177,comment,0,i7h895d,,"Or raise the ""nice"" value of the pihole process above plex, so pihole will be preferred.",pihole,1651786537.0
178,comment,1,i7jjmpb,,That's what I did. Runs both on my RPI4 (2gb) flawlessly. Getting it to run though was another thing for me.,pihole,1651837320.0
179,comment,4,i7hadqt,,Seems like they're trying to access it locally right now since the IP is 192.168.0.x,pihole,1651787453.0
180,comment,1,i7hcti4,,I'm just trying to access it locally for now.,pihole,1651788516.0
181,comment,0,i7h7uxi,,"This. You have to open the port, OP. And, as a bonus config, you might look into mapping a different external port to the Plex internal port, as added security.",pihole,1651786369.0
182,comment,3,i7hcaz8,,"lol all good, thank you for trying! :)",pihole,1651788289.0
183,comment,2,i7j9wm8,,"Here, have an upvote for trying :)",pihole,1651830225.0
184,comment,2,i7hi5fh,,"Yes, when there is no output then no service is listening on that port.
You can check the status of plex with
`sudo systemctl status plexmediaserver`

Edit: I see you posted this already.",pihole,1651790913.0
185,comment,1,i7hchkc,,Ok I removed the IP=x.x.x.x from the `/boot/cmdline.txt` file. Also I've set the [192.168.0.110](https://192.168.0.110) to be a static IP on the router. Still doesn't work though lol,pihole,1651788370.0
186,comment,2,i7hieks,,"> Failed to start Plex Media Server.

what gives you `sudo journalctl -xe` right after you try to start the server with `sudo journcalctl start plexmediaserver`?",pihole,1651791029.0
187,comment,2,i7hbxi4,,Yeah I was just planning on using it within my home network for direct playing. If I use it a decent amount I might look into getting a dedicated laptop/computer for it to run on.,pihole,1651788126.0
188,comment,1,i7qnyle,,"> I'm sure you could find a junker on craigslist.

Or if you're good with your local IT guy at work, see if they have something old going to recycling that works/boots to run PiHole/Plex and their little geek-hearts will light up and hook you up.",pihole,1651969452.0
189,comment,3,i7hc07f,,"Yes, that's what I'm trying to do.",pihole,1651788159.0
190,comment,2,i7hi9oq,,Not when he is trying to reach from inside the LAN.,pihole,1651790968.0
191,comment,1,i7hictx,,I did that and it says Plex failed to start. Any thoughts?,pihole,1651791008.0
192,comment,1,i7hkk2p,,There should be also logs inside `/var/lib/plexmediaserver/Library/Application Support/Plex Media Server/` you can check.,pihole,1651792018.0
193,comment,1,i7hpcq5,,"`sudo journalctl -xe` gives:

The job identifier is 3389.  
May 05 16:39:03 raspberrypi systemd\[1\]: phpsessionclean.service: Succeeded.  
\-- Subject: Unit succeeded  
\-- Defined-By: systemd  
\-- Support: https://www.debian.org/support  
\--   
\-- The unit phpsessionclean.service has successfully entered the 'dead' state.  
May 05 16:39:03 raspberrypi systemd\[1\]: Started Clean php session files.  
\-- Subject: A start job for unit phpsessionclean.service has finished successfully  
\-- Defined-By: systemd  
\-- Support: https://www.debian.org/support  
\--   
\-- A start job for unit phpsessionclean.service has finished successfully.  
\--   
\-- The job identifier is 3389.  
May 05 16:40:01 raspberrypi CRON\[19360\]: pam\_unix(cron:session): session opened for user root by (uid=0)  
May 05 16:40:01 raspberrypi CRON\[19361\]: (root) CMD (   PATH=""$PATH:/usr/sbin:/usr/local/bin/"" pihole updatechecker local)  
May 05 16:40:02 raspberrypi CRON\[19360\]: pam\_unix(cron:session): session closed for user root  
May 05 16:43:09 raspberrypi sudo\[19392\]:       pi : TTY=pts/0 ; PWD=/home/pi ; USER=root ; COMMAND=/bin/systemctl status plexmediaserver  
May 05 16:43:09 raspberrypi sudo\[19392\]: pam\_unix(sudo:session): session opened for user root by pi(uid=0)  
May 05 16:43:22 raspberrypi sudo\[19392\]: pam\_unix(sudo:session): session closed for user root  
May 05 16:43:24 raspberrypi sudo\[19397\]:       pi : TTY=pts/0 ; PWD=/home/pi ; USER=root ; COMMAND=/bin/journalctl -xe  
May 05 16:43:24 raspberrypi sudo\[19397\]: pam\_unix(sudo:session): session opened for user root by pi(uid=0)",pihole,1651794261.0
194,comment,6,i7hcs1w,,"If you're really gonna use the Pi Zero for a plex server, you would need to invest in a USB drive for the database so it doesn't page the SD card and kill it prematurely. You would also want to try an ethernet adapter, or you're gonna be in a world of hurt. The Pi Zero isn't a really good candidate for what you're doing for all of the above reasons, but if you spec it out, it SHOULD work as long as you are direct playing. But the experience is gonna suck.",pihole,1651788498.0
195,comment,2,i7hu9ue,,Off topic with this being a PiHole sub but the Nvidia Shield is a fantastic Plex server that supports real-time transcoding in addition to being arguably the best player available,pihole,1651796621.0
196,comment,1,i7j4yd4,,"Consider the chicken and egg problem here. You wont use plex a decent amount if its a bad slow experience. But you dont want to get a dedicated laptop pc to run it on unless its a good experience, and Pi Zero is not it. Regular pi at the very least.

Also it does not have to be a dedicated laptop/pc, you can move your pihole and run a ton of other stuff even on weak-ish old-ish laptops and PCs",pihole,1651825807.0
197,comment,2,i7hibp3,,"Didn't see that, thanks.",pihole,1651790993.0
198,comment,1,i7hqd6u,,Also nothing usable. Inside the folder `/var/lib/plexmediaserver/Library/Application Support` should be a server.log file.,pihole,1651794741.0
199,comment,3,i7hdumu,,Ok I have a 2 TB drive plugged into my router and set up as a network share and was going to use that to store the movies.,pihole,1651788971.0
200,comment,1,i7hsgwe,,">/var/lib/plexmediaserver/Library/Application Support/Plex Media Server/

I followed that path and 'Plex Media Server' folder is empty.",pihole,1651795742.0
201,comment,5,i7he1ug,,You need to make sure the Plex database is not stored on the SD card. That is different from the media storage.,pihole,1651789060.0
202,comment,4,i7i8ggp,,"Ok plex is even unable to write to that directory.
Try `sudo chown -R plex:plex /var/lib/plexmediaserver`",pihole,1651803880.0
203,comment,3,i7he4p5,,"Ok good to know, thank you!",pihole,1651789095.0
204,post,13,uix9mi,Running pi-hole in a qnap nas container station,"I'm having around thousands of hits from my tailscale vpn qnap app probably a dns loop. I'm running pi-hole on my qnap nas' container station (docker). According to step 2 in this link: [https://tailscale.com/kb/1114/pi-hole/](https://tailscale.com/kb/1114/pi-hole/) I need to run  tailscale up --accept-dns=false  inorder to pi-hole not to try to use itself as its own upstream.

Where and how I will type this command? Thanks.

 Also, according to step 3, [https://tailscale.com/kb/1114/pi-hole/](https://tailscale.com/kb/1114/pi-hole/), how can I know my tailscale ip if I run it inside my qnap container station (docker)? Is it the tailscale ip of the nas or pi-hole? ",pihole,1651756720.0
205,comment,2,i7fb3ld,,Just run it in CLI. First bring it down with `tailscail down` and then bring it up again with the accept-dns flag.,pihole,1651758333.0
206,comment,2,i7fdi25,,">tailscail down

At the terminal of pi-hole under the container station (docker app of qnap) I have typed tailscale down it has an error. Same with tailscale up --accept-dns=false.

OCI runtime exec failed: exec failed: container\_linux.go:380: starting container process caused: exec: ""tailscale"": executable file not found in $PATH: unknown",pihole,1651759381.0
207,comment,1,i7fkjoj,,How did you bring up tailscale after installation?,pihole,1651762295.0
208,comment,1,i7flq8d,,"I found something:
Ssh into qnap, than execute this to get to the cli:
`docker exec -i -t CONTAINER-NAME bash`",pihole,1651762770.0
209,comment,1,i7fnsg2,,Installed tailscale as a qnap app. Pi-hole installed and run via qnap's container station (docker),pihole,1651763596.0
210,comment,1,i7fqv4t,,"What about disable dns overriding here:
https://login.tailscale.com/login?next_url=/admin/dns",pihole,1651764815.0
211,post,0,uix3n6,how to block mobile apps?,"I have pi-hole running on my network and it is perfect! no ads

but, I was wondering is there a way to block snapchat mobile app, instagram mobile app, mobile tiktok app, and youtube mobile app... 

I am not asking to block ads in those apps! I am asking how can I block them completely",pihole,1651756181.0
212,comment,2,i7f6v5y,,"You cannot block apps. You can only block domains. This will include mobile, desktop, TV, etc.",pihole,1651756381.0
213,comment,2,i7f6wow,,"You can load up blocklists that will make them non-functional yes.

You could also just do a straight wildcard domain block. That would probably have the same effect. A full blocklist would probably be better though, as these services sometimes use alternative URLs.

Just search google for ""Pihole blocklist snapchat"" etc

This will of course block them across the whole network though, so desktop sites won't work either. If you specifically want to block them only on phones, make a user group for that and assign it to the specific devices",pihole,1651756400.0
214,comment,2,i7frp9s,,"Use these tools to determine which domains are requested by each app. Then block all the domains. 

https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522",pihole,1651765148.0
215,comment,1,i7g04z0,,"You can combine it with upstream dns provider which provide this kind of service, like nextdns.io or dnsfilter.com.",pihole,1651768515.0
216,comment,2,i7f70zp,,This is true but you can functionally block them by blocking the domains the apps try to connect to.,pihole,1651756457.0
217,post,6,uis4vu,"blank ipv4, pihole not working","hi, I created my pihole in oracle cloud, connected it with openvpn to my home network, but pihole is not working. System is ubuntu.  Device is reachable from home, home is reachable from cloud. I can't open web admin page (timeout) and when I try to set pihole as dns in my dhcp server it's not working. What I think is the issue is pihole is not finding my ip address from tun0 interface. But i couldn't find any instructions how to resolve this. Can anyone help, please?

&#x200B;

&#x200B;

https://preview.redd.it/yn37idea2mx81.png?width=636&format=png&auto=webp&s=01de3ba689a48ae703acf6ab6c5823eaa414bb15",pihole,1651736202.0
218,comment,2,i7efyrv,,"> What I think is the issue is pihole is not finding my ip address from tun0 interface.  

I'm confused here. Normally, you install Pihole first, then you add a VPN on top of that to connect ""as coming from the LAN"".  
So when you install Pihole, tun0 should not exist yet and I expect Pihole to not detect it during install.  

> But i couldn't find any instructions how to resolve this. Can anyone help, please?  

In Pihole settings, switch ""eth0 only"" to ""Allow from all origins"" (the unsafe setting)",pihole,1651737485.0
219,comment,1,i7gc2pf,,"i found workaround, maybe someone will have same issue in future. I created pihole using docker image, seems it's working good, i'll test more tomorrow.",pihole,1651773488.0
220,comment,1,i7gghpl,,"Try these commands

```
sudo firewall-cmd --permanent --zone=public --add-service=http
sudo firewall-cmd --reload

```",pihole,1651775286.0
221,comment,1,i7en1pa,,how can i do it from cli? i don't have access to admin panel in browser,pihole,1651743828.0
222,comment,2,i7epu54,,"Just in case you aren’t aware of: If you have ssh access (and did not disable the web GUI) you can tunnel http(s) through SSH.

Google ssh portforwarding!

You ssh into the pi with an additional parameter and a remote port 80 can be opened by http://localhost:8080

eg: -L 8080:192.168.100.201:80",pihole,1651746128.0
223,comment,0,i7ened5,,"i didn't find option to change to allow from all origins in pihole -r, but if i try interface enp0s3 (it's local one i have on device, beside it i have only lo and tun0) it look's same, blank ipv4.",pihole,1651744125.0
224,comment,0,i7ey7pi,,"i didn't work with portforwarding, also i tried to change interface to enp0s3. same issue, blank ipv4, as mentioned above. I just tried also opening ports in ingress rules, and try to access panel through public ip of instance. Timeout again :/",pihole,1651751816.0
225,post,6,uirztq,Dell Wyse 3040 for PiHole?,"I'm gearing up to move out of my dorm and with that I'll be able to actually manage my own network. Part of this is setting up a PiHole, and my question is do I use my Wyse 3040 or my RPi 4 (4GB ram)? Or maybe both? I wasn't sure if anyone has had good/bad experiences using a Wyse for this or if running a PiHole on a raspberry pi just works better for some reason. Thanks!",pihole,1651735566.0
226,comment,3,i7egqmm,,"I don't know about the Dell but i use a thin client from hp (T630) with a quad core and 4gb ram. Running ubuntu server + pihole is not even close to stressing this system. 

(Ram usage about 650mb, cpu usage is negligible)

The whole installaltion requires a little over 8gb, so if the dell has only 8gb and can't be upgraded, that could be a problem.",pihole,1651738183.0
227,comment,2,i7ehakk,,I run mine on my RPI 4 and it's great. Also installed Privoxy on it for an extra layer of security. Economical on power and space.,pihole,1651738688.0
228,comment,2,i7eln4c,,"Either will work just fine for Pihole. The Atom in the 3040 will also do AES and VT-d and may be better if you also want to do VPN or virtualization. My only concern about the 3040 is that its flash is permanent (BGA-type flash) and there's no easy way to replace it if you wear it out.

FWIW [here](https://www.reddit.com/r/homelab/comments/r7qp9r/wireguard_performance_on_the_wyse_3040/) is someone who installed Ubuntu onto the 3040 to use with Wireguard.",pihole,1651742585.0
229,comment,2,i7euy4g,,I run pihole on a $5 Pi0 and it’s 99% idle.,pihole,1651749793.0
230,comment,2,i7f0umt,,Pihole is super lightweight.  I run mine on a 2B+ at home and even that's probably overpowered.  I know plenty of people run it on Pi Zeros.,pihole,1651753321.0
231,comment,1,i7ejbdx,,"1gb RPi4 w/ dietpi + pihole + cloudflared + gitea
 
been my setup for years now, minimal issues.",pihole,1651740520.0
232,comment,1,i7fwzqa,,"It runs fine, I had proxmox backup server alongside pihole and it never hadmore than 2-5% usage except when backups were copied
If you install it on Debian you need to force install GRUB as the BIOS on these thinclients are buggy. Ubuntu runs fine though.

If you can get one with powersupply for cheaper than a rpi, go for it.",pihole,1651767211.0
233,comment,1,i7gy9oa,,"if you already have a Rasp Pi 4, just run it on that.  Pihole adds almost no load, especially if it's only a few devices.

If you expect your Rasp pi to frequently be offline, because you're re-configuring etc, then a 2nd pihole can be very useful for continued connectivity.",pihole,1651782420.0
234,comment,1,i7hmv7g,,"I have a rpi 4 and a rpi zero w. Both run pi-hole fine.

For the Wyse is better than the pi zero in terms of specs, so it will run just fine :)",pihole,1651793096.0
235,post,4,uirc5k,"munin-pihole-plugins: mastering munin monitoring, meeting multiple marvellous milestones & more!","# [Munin](https://munin-monitoring.org/) [plugins](https://gallery.munin-monitoring.org/) and management script for monitoring various [Pi-hole®](https://github.com/pi-hole/pi-hole) statistics.

# What's new in [munin-pihole-plugins](https://github.com/saint-lascivious/munin-pihole-plugins)?

* **Monolithic Plugin**

The old, dedicated use plugins have been deprecated and removed from the repository. The same functionality is now achieved by a single plugin which determines its mode of operation from its basename. The munin-pihole-plugins script will clean up any deprecated munin-pihole-plugins plugins that may remain on the host during installation.

&#x200B;

* **Branch Selection**

Instead of constantly breaking things in the `master` branch, I am now constantly breaking things in the `development` branch. Mostly.

&#x200B;

* **More Colour**

A literal rainbow of colour, in supported terminals. The option to display colour can be disabled if desired using the SHOW\_COLOR\* environment variable (default: `true`).

\*Development branch only

&#x200B;

* **Bash Completion**

When the munin-pihole-plugins script is installed on the host (default: `true`), if `/etc/bash_completion.d` is found, a bash completion script covering all three of `munin-pihole-plugins`' input styles (short, human readable, and GNU long) will also be installed.

&#x200B;

* **More Flexibility**

Do you already have a Munin webserver environment, and only want to install the plugins? That's a thing you can totally do now. Don't want to install the `munin-pihole-plugins` script locally? Absolutely fine.  You can install/uninstall `munin-pihole-plugins`' plugin, script, and webserver components individually.

&#x200B;

* **Verbosity Levels**

There are now five verbosity levels, ranging from `0` (total silence) to `4` (maximum verbosity). The default value is `3`.

&#x200B;

* **More Helpful Help**

The `-h`, `help,` `--help` function has been refactored and reformatted, to offer more information. Individual help topics are available for each `munin-pihole-plugins` command. The `-V`, `variables`, `--variables` function can now provide the value of individual environment variables `munin-pihole-plugins` uses, as well as listing the full set. Both functions output through a simple in-house opportunistic pagination wrapper, making use of either `more` or `less`, depending on their availability.

&#x200B;

* **Vanity Domains**

Because every project needs a vanity domain, right? Downloads and DNS based version checking is now handled at my personal domain by [munin-pihole-plugins.sainternet.xyz](https://munin-pihole-plugins.sainternet.xyz) and [munin-pihole-plugins-dev.sainternet.xyz](https://munin-pihole-plugins-dev.sainternet.xyz) for `master` and `development` branches respectively.

&#x200B;

# What Systems Does [munin-pihole-plugins](https://github.com/saint-lascivious/munin-pihole-plugins) Run On?

This project is intended to be, but is not required to be, installed alongside an existing Pi-hole installation. If the system runs Pi-hole, it can probably run `munin-pihole-plugins` too.

Development and testing has been primarily performed on Debian and Ubuntu hosts, but I don't reasonably foresee any difficulties with most Debian derivatives. Dependency satisfaction using `apt` and `dpkg-query` can be disabled by setting the `SKIP_DEPENDENCY_CHECK` environment variable to any value other than `false`.

Note: `munin-pihole-plugins` has no dependency on either Pi-hole's logging, or its long term database. All information is obtained via Pi-hole's API.

# How Do I Install [munin-pihole-plugins](https://github.com/saint-lascivious/munin-pihole-plugins)?

Transforming a server into a powerful monitoring platform, is as simple as [one](https://github.com/saint-lascivious/munin-pihole-plugins#step-one-download), [two](https://github.com/saint-lascivious/munin-pihole-plugins#step-two-install), [three](https://github.com/saint-lascivious/munin-pihole-plugins#step-three-wait), …[four](https://github.com/saint-lascivious/munin-pihole-plugins#step-four-monitor).

One of these steps is literally doing nothing!

&#x200B;

* **How Do I Change Or Update My Current Installation?**

Just re-run the installer again at any time, at your discretion. The `munin-pihole-plugins` script will notify you of available updates when using the `-v`, `version`, `--version` function. If a newer version of the `munin-pihole-plugins` script is available, the newer version will be automatically downloaded and executed upon installation. This function can be disabled by setting the UPDATE\_SELF environment variable to any value other than `true` (default: `true`).

# More Information

More information on installation and usage, including [command list](https://github.com/saint-lascivious/munin-pihole-plugins#command-list), [example graph gallery](https://github.com/saint-lascivious/munin-pihole-plugins#example-graph-gallery), [plugin](https://github.com/saint-lascivious/munin-pihole-plugins#plugin-configuration) and [script](https://github.com/saint-lascivious/munin-pihole-plugins#script-configuration) configuration is available at the [munin-pihole-plugins project repository](https://github.com/saint-lascivious/munin-pihole-plugins).

# Finally, Thank You, Users!

I would like to give a ***great big thank you*** to all those who have helped test `munin-pihole-plugins`, and provided feedback, criticism, support, encouragement, and inspiration. It really is invaluable to me, and I appreciate it immensely.

This project would not exist without you. It would still be the janky rapid deployment script, entirely devoid of any meaningful features or options, that I had stashed away in a personal repository.

Knowing I made even just one person's life slightly better or easier through introducing them to a powerful, distributed, system monitoring platform (as many of you have made a point of telling me), is something that I have found extremely rewarding.

Regards, Saint.",pihole,1651732794.0
236,comment,3,i7ep16v,,"The simplest way of demonstrating what this project does, is with a [screenshot of the munin interface](https://imgur.com/a/mr6ocvz) showing `munin-pihole-plugins` in action monitoring a test environment with two nodes.

You can view graphs by category (left panel), by day, week, month, and year. You can zoom in on any graph with three simple clicks. The first to set the start of the zoom range, the second to set the end of the zoom range, and a third within the defined range to redraw the graph at that zoom level.

Graphs are generated on demand (this is very fast) using cgi graph and html strategies to both facilitate dynamic graph zooming and lower the footprint and overhead while graphs aren't currently being viewed (there is no point generating a graph you're not looking at).

Thank you and take care, Saint.",pihole,1651745482.0
237,post,41,uir85a,Exposing Pi-hole Outside Network (Internet),"I have been reading tutorials and questions/answers relating to this matter and everything i have read said that its not safe to expose your pihole outside your lan network, but i have been using pihole in an amazon ec2 instance for a quiet awhile now and i did not across any problem with unwanted traffic to port 53. probably its mainly due to the two firewall i set up with my ec2. the one you set up with amazon console and ufw in debian.

basically my setup is i have certain ip addresses im only allowing access to pihole with the two firewalls i have on aws ec2. its been working great. My question now is am I safe continuing this setup? Would I not encounter any vulnerabilities from someone gaining access to my aws ec2 dns server like someone (unknown ip) using my dns server bypassing the firewall i used. take note im using amazon ec2 firewall and installled ufw as my second firewall if ever the first one fail.

Im asking right now because i wanted to deploy this setup in my home using raspberry pi for pihole, but this time instead with amazon ec2 firewall..im gonna use a mikrotik router firewall and would still deploy ufw in raspbian as fallback firewall. the same firewall setting: only allowing certain ip addresses to use my pihole outside the lan network.

If anyone can explain if theres problem with my setup or i should not do this setup because its not safe. please enlighten me. the reason why im doing this weird setup is i have been using pihole as dns server for squid proxy servers on several vps i have. lol.

the reason why im not using vpn is vpn connection cuts your internet speed in half. only have limited internet at home and id rather use ssh protocol to stay secure and maintain good internet speed.",pihole,1651732339.0
238,comment,18,i7efi4o,,"> the same firewall setting: only allowing certain ip addresses to use my pihole outside the lan network [...] using pihole as dns server for squid proxy servers on several vps i have. lol.  

Are you SURE (like contract-warranty sure) that : 
* Your IP will never be reassigned?  
* Your IP is static and permanent?  
* Your IP is not shared by two people?  

2 weeks ago, Oracle Cloud accidentally wiped the IPs of their free vps by mistake.  
When travelling outside, devices change IPs are not predictable.  
A lot of US homes run behind CG-NAT.  

Any of those possibilities would break your ""trusted IP"" assumption (and I'm kinda surprised you never wanted to use Pihole outside despite dealing with granting access from the Internet). Sounds a troublesome way to not have complete security nor usability.  
YOU may decide to change your VPS host in a hurry.  
You may forgot to unwhitelist stuff and grant access to the former VPS.  

You're better using OpenVPN or Wireguard and connect your devices this way.   VPNs are *designed* to provide a trusted LAN over untrusted networks.  
On the Pihole side, PiVPN can setup the server, define Pihole as the client resolver, and add clients easily.  

All you need is to install the OpenVPN/Wireguard client on your vps/devices and provide the key generated on the Pihole side. No key? No access.  
And it also ensures the network host can't intercept your vps-pihole connexion over port 53, something you seem to lack?",pihole,1651737069.0
239,comment,5,i7ekgnb,,"firewall allow list is usually fine. theoretically, it can get spoofed but it's unlikely. personally, i'd setup wireguard on your ec2 cluster.
 
for your home, get an RPi or a thin client. dns lookup should be as fast as possible which means latency matters.",pihole,1651741539.0
240,comment,3,i7f9omh,,safe yourself all the security hassles and take a look into pivpn. it works pretty good for my case and nothing gets exposed.,pihole,1651757686.0
241,comment,3,i7ewi70,,"If you can configure Squid Proxy to use DOH (probably using cloudflared?), then I would suggest to use Adguard Home and use it's DOH, which simply works over HTTPS. And to make it more secure, you can use cloudflare to hide your public IP over clpoudflare reverse proxy, and in your Adguard Home server, allow only cloudflare IP address to access port 443. You can also use unbound to configure Adguard Home as upstream DNS resolver.

If you are able to set everything up, it will be quite secure.

&#x200B;

I personally use PiHole for home network and wireguard for mobile and outside wifi, also do have an Adguard Home with DOH and DOT configured in my Azure for backup.",pihole,1651750787.0
242,comment,7,i7ea38z,,Look into pivpn.,pihole,1651732555.0
243,comment,2,i7fm7c0,,">the reason why im not using vpn is vpn connection cuts your internet speed in half

You can configure your VPN so that only traffic destined for things on your home network go over the VPN. It's not an all-or-nothing situation. This way you can have DNS lookups happen from your home pi-hole with minimum impact to other traffic. Configured properly it shouldn't be too bad in terms of traffic consumption unless whatever is doing lookups against it are doing an excessive amount. In that case though, it wouldn't matter if the DNS server were only accessible via VPN or publicly exposed.

&#x200B;

>If anyone can explain if theres problem with my setup or i should not do this setup because its not safe

You shouldn't expose \_any\_ service directly to the Internet that you don't have to, from a security perspective, at least not if you can avoid it. In the big picture, IPv6 makes that statement a little bit of an interesting discussion, but in the IPv4 world, I'd try to avoid it. The difference ultimately is between having an opening that you have to secure as much as you can, vs not having an opening at all. A door can have a dozen locks, but it's still a door, a thing intended to allow things through it, not a wall, which is intended to not. While that might seem a bit extreme in view on the surface, that's really where we are in terms of network security these days.

If you do your VPN setup as I mentioned, it should give you a best of both worlds situation- that's what I would do if I were trying to avoid impacting my performance but still wanting pihole type DNS protection. A VPN connection also avoids the whole problem of your client address changing and breaking everything entirely.",pihole,1651762957.0
244,comment,2,i7ei034,,"id admit my setup is kinda weird shit and has security flaws you mention. i kinda thought of all that actually and took precaution and making sure those are covered, but theres always a chance my connection would be intercept between my vps-pihole connection over port 53 because my connection is plain view without any encryption to cover.

but the way i thought of possibility my connection getting intercepted is if someone is already listening at network end of my vps network or at the network end of pihole server. im thinking if this is happening right now, some intruder is already in the network of vps datacenter of amazon. thats where few of my vps are deployed and pihole is. when i thought of that though, theres no way amazon IT guys would be hack that easily and they would not realize someone has gained access to their network and accessing all vps they have in the datacenter.

...but youre saying though, my connection between the vps and the pihole on a vps has a chance getting intercepted in the middle when they cross internet?",pihole,1651739330.0
245,comment,1,i7fyvh6,,thanks for the info.,pihole,1651767954.0
246,comment,1,i7fyt4g,,thanks for recommending wireguard. it seems its an alternative to openvpn. id read more into it and use it one of my vps and see its performance.,pihole,1651767928.0
247,comment,1,i7fy3vn,,will check into pivpn. thanks,pihole,1651767651.0
248,comment,1,i7ifg6b,,This is the best way.,pihole,1651807527.0
249,comment,1,i7fyfj5,,thanks for the suggestion. ill check on this and integrate this on my squid proxy vps.,pihole,1651767778.0
250,comment,1,i7fy1pd,,thanks for enlightening my flaws in my setup. will check on vpn and adding on my setup,pihole,1651767627.0
251,comment,3,i7ek8wq,,"Yeah. while your security model seems to secure Pi-hole correctly but in an usual way, I don't think it protects the users of Pihole.  

I have no idea if Amazon's vps-to-vps cross the Internet. I would naïvely assume they may already provide their own VPN-like encrypted access between datacenters, especially after NSA's infamous slide about Google Cloud's internal coms [10 years ago](https://grahamcluley.com/nsa-tapping-google-yahoo-data-centers/).  

But *if* it is implemented, now you depend on your Pihole and your vps to be hosted on the same provider with a special rule for internal traffic and... yeah, let's assume it crosses the Internet somewhere.  

> ...but youre saying though, my connection between the vps and the pihole on a vps has a chance getting intercepted in the middle when they cross internet network?  

Basic DNS (port 53) has no protection to either hide the content or prevent redirection : no MITM mitigation at all.  
Hiding the content is kinda hard because as long you use the IP as a target later, somebody can know where you go. So let's assume DNS answers is public info and focus on ""are my answers *true*?""  

Anybody between pihole and the vps could say ""redirect all requests to port 53 towards our own resolver instead""  
Because your vps expects no auth from Pihole, it can't know if it talks to Pihole. Simply that ""pihole"" answers correctly formatted answers.  
I don't know how feasible it's possible between two Amazon networks, but it's commonly done by Wifi admins or ISPs to implement content filtering.  

The usual defense against that is DNS over TLS and variants (DoH, DoQuid) to auth the server... but sending regular DNS over a VPN tunnel will obviously fix it too, as the VPN handles auth *on both sides*.",pihole,1651741352.0
252,comment,2,i7fzz0u,,"wireguard is one of the best performing VPNs because it's uses modern cryptography. just read up on how to generate your private / public / preshared keys then it's really as simple as:

    [user@server1 ~] $ sudo vim /etc/wireguard/wg0.conf

    [Interface]
    PrivateKey = 1234567890abcdefghijklmopqrstuvwxyz=========
    Address = 10.11.12.1/24
    ListenPort = 51820
    
    # Server <-> Server
    [Peer]
    Endpoint = vps2.domain.com:51820
    PublicKey = 1234567890abcdefghijklmopqrstuvwxyz=========
    PresharedKey = 1234567890abcdefghijklmopqrstuvwxyz=========
    AllowedIPs = 10.11.12.2/32
    PersistentKeepalive = 25

&nbsp;

    [user@server2 ~] $ sudo vim /etc/wireguard/wg0.conf

    [Interface]
    PrivateKey = 1234567890abcdefghijklmopqrstuvwxyz=========
    Address = 10.11.12.2/24
    ListenPort = 51820
    
    # Server <-> Server
    [Peer]
    Endpoint = vps1.domain.com:51820
    PublicKey = 1234567890abcdefghijklmopqrstuvwxyz=========
    PresharedKey = 1234567890abcdefghijklmopqrstuvwxyz=========
    AllowedIPs = 10.11.12.1/32
    PersistentKeepalive = 25",pihole,1651768431.0
253,comment,2,i7h83b1,,"Advantage of WireGuard is you can easily do ""Split Tunnels"" where DNS traffic is sent through the WG-VPN to the PiHole, and the remainder of the traffic is not routed via the VPN.",pihole,1651786468.0
254,comment,2,i7fz39f,,"You welcome, do let us know your progress.",pihole,1651768038.0
255,comment,1,i7fzsb2,,thanks for the detail info and suggestion what i need to do to secure my DNS. thank again.,pihole,1651768337.0
256,comment,2,i7g1onv,,i heard alot good things about it. yeah will deploy it some of my vps and will update my setup too. i have not had time reading about it due to im too beat up afterwork and had to sleep and rest for another shift in hospital the next day.,pihole,1651769336.0
257,comment,1,i7fzwsc,,will do. hehe,pihole,1651768399.0
258,comment,2,i7g3lit,,"i hear ya... i'm currently battling my own health issues, hospitals are still clogged up with covid, 8 hour wait times, it's rough out there.",pihole,1651770133.0
259,comment,2,i7g4n5i,,"FYI, If you are considering Wireguard in Docker, you should give this a try. All you have to do is to run one line code to create your isolated environment for Wireguard with a nice GUI to manage connections, I am using this for my own setup. No complexity, no command, just running in a container, if you don't like, terminate the container. :)

[https://github.com/weejewel/wg-easy](https://github.com/weejewel/wg-easy)",pihole,1651770549.0
260,post,6,uiq96q,NetGuard android and PiHole,"If I'm using the StevenBlack list in both Netguard android and Pihole, I would think NetGuard would block everything that PiHole would not allow. So why does PiHole show domains that are blocked? Wouldn't NetGuard block before hitting PiHole? I must be missing something obvious.",pihole,1651728458.0
261,comment,2,i7ecf80,,Could be the other way around.,pihole,1651734419.0
262,post,0,uipon5,internet speed tanked when using pihole,"So when I installed the pihole onto my router via ethernet I was finding that my internet speed went from about 90-100 to 45-50! This never happened before I installed the pihole. I am also using the pi as a DHCP server for ipv4, does that potentially slow it down? What can I do about this?",pihole,1651726312.0
263,comment,7,i7e3ach,,"No. Internet speed tests measure the flow of data from the host to the designation along the routing path. The DNS or DHCP servers are not links in that chain and don’t alter ISP speed. Slow DNS (very rare) can slow the loading time if pages with a lot of content from multiple domains, but that’s more a latency type issue than speed.",pihole,1651727632.0
264,comment,4,i7e3574,,"That doesn't make a lot of sense to me. I could understand a misconfiguration causing a bit of latency with resolving names to IPs, but to affect overall bandwidth seems a bit odd. Can you replicate both conditions by either changing your endpoint DNS provider to bypass Pihole or by doing that and turning off the PiHole services to see a bandwidth improvement? Then turn them on again to watch it slow down?

Do you have cpu monitoring on your router? I wonder if the router has a weak cpu? My PiHole runes on a Raspberry Pi and performance doesn't suffer at all.",pihole,1651727539.0
265,comment,2,i7eg2jv,,"What upstream resolver do you use?  
It's possible your ISP sends you to optimized servers, but the resolver you used sends you to less optimal adresses.  
Make sure Pihole uses the same resolver as the router. If necessary, do nslookup or dig to Pihole and to the router to compare results.   

> I am also using the pi as a DHCP server for ipv4, does that potentially slow it down?  

No. DHCP is used during network configuration to ensure you have an address in the local network.  
DHCP itself is not involved during speedtests and DNS is only used when the machine doesn't know where to talk too.",pihole,1651737579.0
266,comment,1,i7gtxb9,,Make sure your router is not also still acting as your DHCP server.,pihole,1651780668.0
267,comment,1,i7l8whz,,"Building on an earlier suggestion, try manually setting the speed test server you are connecting to. That avoids any changes Pi-Hole could make in the server selection.

You can easily do that here: [https://www.speedtest.net/](https://www.speedtest.net/)",pihole,1651864370.0
268,comment,2,i7eyw60,,"Everyone blames PiHole for every problem with their network. They want the latest and greatest without knowing anything about how it all works. Here's a simple solution. Install the cheap, crap router from your ISP, use it for WiFi and Lan, and there you go. Now nothing will happen and if it breaks you can cal the ISP for help.",pihole,1651752214.0
269,comment,1,i7e3cug,,I'll try to turn off the pihole and make the router do the dchp servers for a bit and I'll see if it increases the speed.,pihole,1651727679.0
270,comment,2,i7f61gx,,"I'm not blaming it, I might've configured it wrong and I'm also noticing that this started happening after I put the pihole in my network. I have no hard feelings towards the pihole and I just want to fix whatever is wrong with it. I may be a idiot in terms of understanding networking but I want to learn by using things such as the pihole.",pihole,1651755976.0
271,post,0,uipbei,Random Queries When Not Using Google Phone?,"Probably less than 30 minutes I go to sleep, my phone starts doing a bunch of things, a lot of it is blocked. Is it random shitty game apps that I have that is doing this even though I haven't opened them in a while? Or is this just regular google stuff? It's only while I'm sleeping and having it charge, I've seen a post a while back about some dude friends phone requesting like 30k queries. Pixel 5 Also free pic of how I have my pihole set up because I don't have a case or want to waste money on a case.

https://preview.redd.it/f4vj15ajzkx81.png?width=1008&format=png&auto=webp&s=42632f9f53685883222c13019378b661653df2cb

https://preview.redd.it/hsihc8ajzkx81.png?width=1005&format=png&auto=webp&s=eb95f6d072b17067fbcc3a89f4ea984a26dfa494

https://preview.redd.it/dtde2qt04lx81.jpg?width=721&format=pjpg&auto=webp&s=cc5d1413b519d10fcab1ab747cde9379bf448863",pihole,1651724903.0
272,comment,5,i7eb4p5,,">Or is this just regular google stuff?

It is.

>It's only while I'm sleeping and having it charge

By design. The device being idle, with an external power source, is the absolute perfect time to perform system management tasks like data sync, backup/restore etc.",pihole,1651733379.0
273,comment,1,i7eci40,,smart tvs and other smart devices do the same. even asus routers do random queries too at certain period and pihole will catch all those queries.,pihole,1651734487.0
274,post,0,uiiywo,Getting Pi-hole with DHCP enabled to play nice with isc-dhcp-server,to turn DietPi into a Wireless AP - it's telling me port already in use because I am using the Pi-hole as a DHCP server.,pihole,1651705085.0
275,comment,2,i7d15ov,,"I'm guessing dnsmasq was installed?

Pi-hole embeds dnsmasq itself. You could remove dnsmasq, and leave the configuration in place (Pi-hole doesn't reinvent the wheel with dnsmasq configuration/location).",pihole,1651708793.0
276,comment,2,i7d1nk1,,"No ...

It is bugging out because wlan0 is set to 192.168.42.0 for DHCP and my Pi-hole isn't serving IPs on that IP range.",pihole,1651709011.0
277,comment,3,i7d2ltm,,"Well, shit. That's annoying.

I'm not certain there's any easy fix here. Normally port conflicts like this wouldn't be so dire and you could just move one server to another port, but I don't think I've seen a client option to configure DHCP listening port... literally ever. You're kinda married to port 67 here.

Edit: If this reply looks slightly weird/out of context, it's because OP edited its parent in its entirety after the fact lol.",pihole,1651709443.0
278,comment,1,i7d2w0z,,I find it hard to believe there is nobody out there who has set up a Pi-hole running in DHCP mode with wireless access point enabled ...,pihole,1651709573.0
279,comment,1,i7d3hfq,,"So do I. That was never the implication.

I would imagine most of those people would be using some combination of `dnsmasq` and `hostapd` to do so.",pihole,1651709837.0
280,comment,1,i7d4pta,,"Pi-hole has dnsmasq bundled in tho, this is the issue - there must be a workaround?",pihole,1651710376.0
281,comment,1,i7d56yi,,"As above, they could just remove the dnsmasq package, and leave whatever dnsmasq configuration they had in place, and it would continue to function.",pihole,1651710589.0
282,comment,1,i7d9mrc,,What's confusing is that it doesn't install dnsmasq ...,pihole,1651712547.0
283,comment,1,i7dacjd,,"It shouldn't be confusing, it installs another DHCP server package (which still occupies port 67, as it must). There's a few options it could have gone for. Why it went this way in particular, is unknown to me.",pihole,1651712865.0
284,comment,1,i7dbxsz,,Is there a better way? :p,pihole,1651713575.0
285,comment,2,i7dcycg,,"As above, I think most would go with the fairly ubiquitous [dnsmasq+hostapd solution](https://raspberrypi-guide.github.io/networking/create-wireless-access-point).

Just keep in mind with that documentation that with Pi-hole dnsmasq is ""already installed"". If you're already using Pi-hole for DHCP and already have the DHCP scope you want set, you can just ignore the dnsmasq configuration section of that document.",pihole,1651714028.0
286,comment,1,i7emueq,,"Honestly I'm apprehensive to follow another one of these guides - I've bricked the Pi twice unable to connect in or out from anywhere. :S

It freaks me out I don't even have some of the config files it mentions.",pihole,1651743650.0
287,comment,2,i7gl2no,,Link the guides,pihole,1651777140.0
288,comment,1,i7gp9z2,,"Here's one that ended up in a brick

https://thepi.io/how-to-use-your-raspberry-pi-as-a-wireless-access-point/",pihole,1651778820.0
289,post,0,uiielp,Is it possible to use Pi-Hole while connected to my iPhone with ExpressVPN on my home network?,"I was wondering if it is possible to have ExpressVPN running only on my iPhone and be able to utilize Pi-Home while on my home network? If so, how? I really only want the VPN running on my phone but still would like Pi-Hole access on my Pi.",pihole,1651703477.0
290,comment,1,i7ct8sc,,"I use PiVPN to connect to my home network and then my phone just uses the DNS I configured for my LAN, which is PiHole. If you didn't set a custom DNS inside ExpressVPN it should also use the default DNS from your home network, I guess.",pihole,1651705219.0
291,comment,1,i7cuasi,,I'm confused about what you're asking. Can you clarify?,pihole,1651705690.0
292,comment,1,i7d6h62,,"This is entirely possible, but it would make you experience DNS leaks, so the privacy benefit of the VPN would be gone.

The way to do this properly is to put pihole behind a VPN too. You could install the VPN app on your pihole device.",pihole,1651711161.0
293,comment,1,i7ekv76,,"I use an ExpressVPN router with my Pi-Hole DNS pointing to it. I then configure my device DNS to be the IP address of the Pi-Hole if I want to use it or the router IP if not.

The ExpressVPN router firmware is quite flexible and you can configure each device on the network to either use a VPN or not. You can even have multiple tunnels, having different devices pointing to different VPN server locations. best bit is the router only uses a single device slot of your subscription.",pihole,1651741902.0
294,comment,1,i7d1k3n,,Use my phone at home with the VPN enabled on it and blocking ads with Pi-Hole.,pihole,1651708968.0
295,comment,1,i7dgxgl,,"What if I did not want to run the other devices on the VPN, only the iPhone?",pihole,1651715829.0
296,comment,1,i7d68lx,,[deleted],pihole,1651711056.0
297,comment,1,i7di5ip,,Have a second pihole device.,pihole,1651716377.0
298,comment,2,i7devjo,,You can absolutely be on your network and connected to VPN.  Just run the client on your router instead of your device.,pihole,1651714897.0
299,post,7,uih3pp,Set upstream DNS Servers and unbound,"Hello everyone!

My last post concerning Pi-hole in combination with unbound wasn't resolved but i think i might have found a solution. If anyone wants to know more, the old post can be found here:

* [https://www.reddit.com/r/pihole/comments/tnm3pf/dns\_query\_limit\_pihole\_and\_unbound/?utm\_source=share&utm\_medium=web2x&context=3](https://www.reddit.com/r/pihole/comments/tnm3pf/dns_query_limit_pihole_and_unbound/?utm_source=share&utm_medium=web2x&context=3)

The solution (or what i think might have solved the problem for me) is to set up a second upstream DNS server, i chose quad9 for that.

The time server requests (NTP) now don't show up in my warnings anymore. 

I have a question on this however: is there a way to prioritise a specific upstream DNS (unbound preferably)? I couldn't find a setting for this",pihole,1651699794.0
300,comment,1,i7ckavy,,">	is there a way to prioritise a specific upstream DNS (unbound preferably)?

Pi-hole favors the best performer(s) among your assigned upstream DNS servers. 

https://docs.pi-hole.net/ftldns/dns-resolver/#improve-detection-algorithm-for-determining-the-best-forward-destination",pihole,1651701449.0
301,comment,1,i7ckud7,,"~~No, it's just picks one from the servers you set. So if you want to prioritize one, just set one. ""Primary"" does not mean it's choosen first.~~

~~If you want a backup, if pihole and / or unbound failes, you have to setup another pihole with unbound on another machine.~~

I found this in the forum, I didn't know this options exists in dnsmasq.[https://discourse.pi-hole.net/t/fallback-secondary-upstream-dns/33753](https://discourse.pi-hole.net/t/fallback-secondary-upstream-dns/33753)

But it seems it contacts the servers in reverse order, and grabs the IPs from the file /etc/resolv.conf!  
For setup see: https://www.reddit.com/r/pihole/comments/4o2ajm/comment/d49isfc/?utm\_source=share&utm\_medium=web2x&context=3",pihole,1651701660.0
302,comment,1,i7cn3s9,,"Is this ""strict-order"" thing via dnsmasq a thing, do you know if it still will work?",pihole,1651702578.0
303,comment,1,i7haioy,,"So i looked at the post, seems to be exactly what i tried.

They are over 6 years old however, and some things definitely changed.

For example:

The DNS serverlist - at least in my case - is now directly under /etc/dnsmasq.d/01-pihole.conf

Also restarting dnsmasq.service is not running on my Rasp. Instead i only have the service named unbound.service

Still i will try to make the recommended changes and give you an update soon.

At a first glance it still seems to work. At least unbound is currently more prominent after the restart",pihole,1651787513.0
304,post,0,uiekmn,Did I buy the wrong kit? (me stupid),"Hey guys,   
i am very sorry to bother with a noob question like this.. also I would call myself tech savvy after building many computers and setting up some networks with quite cool features. nevertheless, I am new to Raspberry tech and long story short: I have to work a lot and thought I can simply spend a bit more money and get a kit.   


which I did: [https://www.amazon.de/gp/product/B07D5G3459/ref=ppx\_yo\_dt\_b\_asin\_title\_o00\_s00?ie=UTF8&psc=1](https://www.amazon.de/gp/product/B07D5G3459/ref=ppx_yo_dt_b_asin_title_o00_s00?ie=UTF8&psc=1)   


Well, I hold it in my hands now, and I see that it doesn't come with an Ethernet port - and I definitely don't want to set the device up to be connected via WiFi. 

&#x200B;

Long story short: Can I buy a module to be added easily to my kit? Some research was actually giving me both results so before going crazy, I thought of simply asking here. 

&#x200B;

Here are my questions: 

\- Can I add an Ethernet device to my kit? If so, do you have an Amazon link? I am located in Austria in a small village so therefore I can't run to the closest shop and get help there. 

\- Should I send back the kit and order another? (anyone got a link maybe)

&#x200B;

Sorry for the absolute stupid questions.",pihole,1651692805.0
305,comment,4,i7bz5p4,,"The W stands for Wifi :) (btw there is no Pi Zero with integrated ethernet port)
You can use an adapter like this to run ethernet
https://www.berrybase.de/netzwerk-iot/netzwerkgeraete/lan-usb-konverter/usb-2.0-fast-ethernet-netzwerkkonverter?c=291",pihole,1651693189.0
306,comment,2,i7bzcss,,"If you don't want to sacrifice the USB port, you can apply a HAT like this:
https://www.berrybase.de/raspberry-pi/raspberry-pi-computer/gpio-hats-phats/usb-seriell/ethernet/usb-hub-hat-f-252-r-raspberry-pi-zero-1x-rj45-3x-usb

But because you have the Zero W and not the Zero WH you have to solder a bit to apply it, I guess (The WH comes with pre-soldered GPIO pin header)",pihole,1651693265.0
307,comment,1,i7c0i8a,,"Ok I have another idea for you: 
If you just want a small SBC and you don't need more then one USB port, you could grab a Rock Pi S or a NanoPi ZeroPi / NanoPi Neo / NanoPi Neo 2. They all come with an ethernet port.",pihole,1651693713.0
308,comment,1,i7ca3cp,,Pretty much any USB 3.0 Ethernet adaptor would work. You need a MicroUSB male to USB A female adaptor to plug those in though. Not too expensive.,pihole,1651697437.0
309,comment,1,i7eia6t,,"> Sorry for the absolute stupid questions.  

FAIL stands for First Attempt At Learning. I would say it's nearly impossible to judge how ""cost effective it is"" without seeing one first hand.  

There's no Pi Zero with Ethernet built in, and other Pis are way over kill for Pihole. So it's not that you purchased the wrong kit, more that built-in Ethernet is only provided with other features that are useless to setup a lightweight headless server.  

> Can I add an Ethernet device to my kit?  

RP doesn't provide an official microUSB-to-Ethernet converters anymore, so I don't think it exists in any approved kit.  
But it's not hard to find a third-party adapter and plug it in if Wifi is a concern for you.  


> Should I send back the kit and order another?  

Completely unrelated to the Ethernet issue, but I notice your kit doesn't include a power source, do you have something to power it?  
Else you may be better with a starter kit which includes the power source (For RPis up to RPi3, if I recall well)",pihole,1651739588.0
310,comment,3,i7c9w2l,,"This. OP, I run my Pihole on the exact device you have, so I am not sure what the concern about running it over Wifi is for you, but you absolutely can add an ethernet adapter if that is your preference.",pihole,1651697370.0
311,comment,1,i7eiaef,,"Regarding the kit question :  

Personally, I didn't purchase a kit, but my next purchase will probably be one.  

I would say that it you REALLY want to setup a Pihole and never touch a RPi otherwise, you wouldn't need a kit anyway... but you wouldn't spare money thanks to economics.  
A kit (with power source) is a good starting point because it *also* give spare parts for later projects.  

For your Pihole, you'll need 5 elements + 1 for the setup :  
- The board (with built in wifi, in case Ethernet fails)  
- A microSD card  
- A reliable power source  
- An Ethernet adapter 
- A case (technically optional, but... yeah.)  

- And for the setup, either a preinstall on the microSD card  
... or a microSD-to-SD adapter and a computer able to read partitioned SD cards. RPi provides an easy flashing installer, obv for free  



When you purchase a microSD card, the microSD-to-SD adapter is often included. So if you have the computer, no need for the preinstall and the point of the kit is to provide a preinstalled microSD.  
*Also, because you'll probably want to be able to have a backup for emergency, you'll probably want to purchase another card and research how to flash the microSD. That defeats the point of having a unique kit-provided card. If you can create a backup card, you can create two cards.*  

Each one it's opinion about the case, but being ""locked"" to a case in the kit in a bit sad when there's a lot of cases available for purchase. So the money efficiency entirely depends if you'll use it or replace it later for a more nicer looking one (clear cases is always an eye-catcher for my wife)  

And, as said before, there's no official Ethernet adapter so you won't find a ""standard"" kit with one.  



So what would you use in a kit for Pihole (besides the SD card that sidetracks a process that you'll need to learn if you want a backup)?   

1) The RPi board, but if you REALLY don't want the wifi (spoiler : you WILL want wifi as a safety measure), the RPi Zero (not W) is cheaper.  
But if your unofficial Ethernal adapter breaks, you're in trouble.  
So use the ZeroW, buuuut... it doesn't need a kit. It's the base. At best, the kit allows to have one instead of being out of stock.  

2) Because Pihole is critical, I use an official power source. it's often not in kit because it costs as much as the board, and most makers have spare power sources, like phone chargers.  

3) If *really* on a budget, the official case.  

So, I took both parts seperately and ordered a case to a third party. Probably didn't spare anything meaningful (and I had a lot of issues flashing my SD cards), but it took less storage space. And kits were out of stock in my country anyway.  


What *won't* be used for Pihole?  

The USB-microUSB and HDMI-miniHDMI adapters, because it's a server and Wifi allows to connect to SSH for the config. But it can be useful if you use another RPi Zero for something else.  
The camera cable. Obviously.  
The heat sink, because Pihole is lightweight.  
The header, as it needs to be welded manually (which is why there is the RPi Zero WH that provides Wifi *and* an already welded header)",pihole,1651739593.0
312,comment,1,i7cgfmd,,I've been running pihole on a Pi Zero W connected via wifi for over a year without a hiccup.,pihole,1651699933.0
313,post,3,uidsyl,Blocking works but DNS still ISP,"Like the title says, I have setup pihole on a rpi 4 4gb, Debian bullseye. The ad blocking works as expected, but on dnsleaktest i always get my isps dns. Unbound always gives servfail to every request so I can't use that. In the dns page of pi hole I have set cloudflare but I'm pretty sure it doesn't use that.

I would love to use unbound, can someone help me out?",pihole,1651690691.0
314,comment,1,i7bwki2,,"Is unbound running? Does it listen on the right port? Did you set the right port in pihole DNS settings?
```
systemctl status unbound.service
sudo ss -ulpn sport = :5353
cat /etc/unbound/unbound.conf
cat /etc/pihole/setupVars.conf
```
(your configured port may differ)

You can set verbosity of the log to 5 to see whats happending with unbound, in `/etc/unbound/unbound.conf`
You find the log usualy at /var/log/unbound/unbound.log",pihole,1651692186.0
315,comment,1,i7bxv9u,,your ISP might be intercepting your DNS requests so you'd have to tunnel unbound over a VPN or just use something like [stubby](https://wiki.archlinux.org/title/Stubby) + cloudflare.,pihole,1651692697.0
316,comment,1,i7ckz5p,,"A forwarding configuration may have installed by Bullseye through resolvconf.

Edit file `/etc/resolvconf.conf` and comment out the last line which should read:

    unbound_conf=/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf

Delete the unwanted unbound configuration file:

`sudo rm /etc/unbound/unbound.conf.d/resolvconf_resolvers.conf`

restart unbound:

`sudo service unbound restart`",pihole,1651701711.0
317,comment,1,i7emr30,,"This was one of the first things I tried, especially since unbound was working on the first boot and stopped working after reboot... But unfortunately it doesn't work",pihole,1651743570.0
318,comment,1,i7ffao9,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1651760146.0
319,comment,1,i7fmz82,,Your debug token is: https://tricorder.pi-hole.net/CPIakgLO/,pihole,1651763270.0
320,post,4,uib61b,"Not sure how, but my internet keeps dropping very quickly","I have Ubuntu server 64 bit VM.

I have pihole installed, piVPN (wireguard), and Cloudflared installed only.

On my desktop I see my internet in the bottom right of Windows 11 disconnect for about 1 second and connects again.

&#x200B;

I am tailing on pihole.log to see if I see anything when it drops but I don't.

&#x200B;

any suggestions what it could be? I USED to have pihole, piVPN on a pi 2 but I have upgraded but now having this issue...",pihole,1651683499.0
321,comment,4,i7bblv8,,Loss of internet connection on a client is likely a client issue.  Pi-hole only serves DNS - the connection to your network is done at the client level.,pihole,1651684010.0
322,comment,2,i7bl3c6,,I would check if your computer is actually losing connection or if Windows just thinks it is. Try running a constant ping and see if those are dropping at all. Something like ping -t 8.8.8.8 and next time you see Windows complain it has no Internet check the cmd window.,pihole,1651687687.0
323,comment,1,i7bv0nf,,Almost sounds like interface/port flapping.,pihole,1651691582.0
324,comment,1,i7c293e,,"These are all great suggestions... sometimes it goes down 4 times in 10 mins... and sometimes once an hour... I am just downloading a linux iso at a very slow speed because I assume any interruption would cause the download to stop.

&#x200B;

I thought maybe there was like a DNS entry trying to phone home and if it gets blocked it stops my adapter?",pihole,1651694389.0
325,comment,1,i7c2tck,,"The other thing I changed, Was on my PIHOLE I set it up to ""Permit all origins"" under interface settings... because I use piVPN it was the only way I could get it to work.",pihole,1651694600.0
326,comment,1,i7cl2pb,,"when it drops, 
check access to your internal network. 
the ping or traceroute to an external Ip.  
do an internal and an external host dns query. 

you aren’t wrong in thinking it may be an issue reaching the external dns server, but you need to narrow down where the issue is.

can you reach external dns but it’s not answering queries? or is it that your queries aren’t even getting to the dns server?",pihole,1651701751.0
327,comment,1,i7dzys4,,"Windows 11 sucks that might be your problem too check for updated network card drivers and something that has been a constant pain with Windows since the Windows XP days is power management for the network card.  If you are physically seen the ethernet connection dropped to the globe your network card is losing connection it could be your ethernet cable or your network card

If you don't need magic packet or wake on lan hit up the device manager and spend the network interfaces section double click on your ethernet adapter and go to the power management tab where it says something to the effect of allow the computer to turn this device off to save power uncheck it save shut off your computer pull the power cable out plug it back in and boot back up. 

To verify if it's the cable or not try a new cable and if you have another computer in the house or laptop that has ethernet plug that into the cable you're using now and see if it happens there too if it doesn't then you likely have a failing network card in your computer if it does it's almost certainly the ethernet cable",pihole,1651725498.0
328,comment,2,i7bd0ik,,What about Cloudflared? Can't find much with Cloudflared. But I disabled it just now to test.,pihole,1651684557.0
329,comment,2,i7ckhex,,"This is technically impossible. When it's getting blocked it will not establish a connection, but it will not affect other connections.  


Did you set PiHole to be the DHCP server? Maybe you interface has some issues assigning an IP?  
How does you connection behave when you don't use pihole as forwarding DNS server ?",pihole,1651701521.0
330,comment,1,i7cshj1,,I try but it all happens within a second.disconnect and reconnect less than 1 sec,pihole,1651704882.0
331,comment,2,i7bqlda,,"Cloudflared is on the opposite side of Pi-hole from the client, and also will not affect whether your client device can connect to your network.",pihole,1651689843.0
332,comment,1,i7cspeo,,I have my Eero doing the DHCP. I only have my desktop connected so I don't have much else to go by.,pihole,1651704980.0
333,comment,1,i7ctllb,,And what happens when you disable PiHole and set another DNS in your router?,pihole,1651705375.0
334,comment,1,i7cuvvc,,I will follow up later. Just at work right now,pihole,1651705956.0
335,post,3,ui97yj,Android phone sending AAAA queries with no ipv6 connectivity/disabled,"Can't quite get my head around this - does it matter? Can it be disabled completely somehow?

&#x200B;

https://preview.redd.it/en088h7t9hx81.png?width=373&format=png&auto=webp&s=6e99dde95d15d84b4dce4d020218ee6a596fdf85",pihole,1651678215.0
336,comment,6,i7ay97s,,"Most applications (and OS API’s) ask for both A and AAAA records by default. No big deal, if the client doesn’t have IPv6 connectivity, the AAAA record doesn’t get used.",pihole,1651678599.0
337,comment,2,i7aza6o,,"The type of query (A or AAAA) is independent of the type of IP address the client is using (IPV4 or IPv6). Either type of query can be answered using either IP address protocol. 

>	Can it be disabled completely somehow?

You can configure Pi-hole to block all AAAA queries,if that is what you want to do.",pihole,1651679027.0
338,comment,3,i7aygtr,,"Whats weird is they show as ""OK Answered"" - shouldn't that not be the case?",pihole,1651678687.0
339,comment,1,i7azjso,,"Yes that makes sense, how would I go about that? I thought perhaps disabling IPV6 on the Raspberry Pi itself would have been enough.",pihole,1651679139.0
340,comment,3,i7b16mo,,"The DNS query is simply “give me the A and AAAA record”, and the DNS server gives them both. The device then decides to use them or not.",pihole,1651679831.0
341,comment,2,i7b1wcu,,"It makes no actual difference if you block AAAA queries.  The slight benefit here is that the AAAA queries won't be forwarded to an upstream DNS server for resolution.

Regardless of whether the client receives a NODATA reply or an actual IPv6 IP, if the client has no IPv6 connectivity, it won't be able to connect to the IPv6 IP.

See this page for some Pi-hole specific regex that will block or allow various DNS query types:

https://docs.pi-hole.net/regex/pi-hole/",pihole,1651680132.0
342,comment,1,i7b5lxf,,Thanks again!,pihole,1651681668.0
343,comment,3,i7c6qs7,,Keep in mind that blocking AAAA will skew your dashboard statistics. Top blocked domains and top blocked clients will reflect metrics that are heavily weighted by AAAA queries.,pihole,1651696141.0
344,post,36,ui829p,Getting errors using android apps and API key while trying to view query logs.,"Yeah, I'm not asking for app support necessarily, but is there a known reason why an app using the API would error out trying to retrieve query logs? Flutterhole just never gets them, but looks like it's trying endlessly, and ""Pihole Connect"" tells me ""an error has ocurred"" and my API key isn't set. This used to work, but not in the current release. FWIW, I'm running under docker, and all other functions seem fine.",pihole,1651675086.0
345,comment,7,i7b9gcp,,https://github.com/tien/pi-hole-connect/issues/99#issuecomment-1107393671,pihole,1651683175.0
346,comment,3,i7awvya,,I would contact the developers of the apps you are using.,pihole,1651678048.0
347,comment,2,i7c54si,,"Ugh. That's what I was hoping to find, but somehow didn't.",pihole,1651695513.0
348,comment,1,i7c5hwy,,"It's a known/reported pi-hole bug, apparently. See https://github.com/tien/pi-hole-connect/issues/99#issuecomment-1107393671",pihole,1651695654.0
349,post,4,ui6maw,chrome first search results are ads,"Is there a way to prevent chrome from giving ads as a search result?  My pihole box blocks all of these  and I have my people complaining.  Any thoughts? 
I know they are ads, and the box is just doing what I want it to do, but it would be nice if they just didn't show up.  It's almost like Googles step to get through or something.",pihole,1651670990.0
350,comment,7,i7ajoqq,,"As far as I know all search engines, not the browser, return ads at the top.  That is how they make money.",pihole,1651672661.0
351,comment,3,i7azkl2,,"uBlock Origin will work for Chrome on Desktop/Laptop, but isn't available for mobile. Firefox, on the other hand, supports uBlock Origin for mobile.",pihole,1651679149.0
352,comment,2,i7ch26k,,"Chrome is Google. Google is an ad company disguised as a tech company. You’re the product. If you want ads out, you’re using the wrong browser.",pihole,1651700189.0
353,comment,2,i7amtmu,,"if you use chrome install ublock origin

OR use Brave browser",pihole,1651673997.0
354,comment,1,i7ce3hx,,Depends where the ads are being served from. Some sites serve their own ads so blocking the domain won’t work.,pihole,1651699001.0
355,comment,1,i7eaxae,,"I switched people to duckduckgo, obviously being up front and explaining the difference. The main one being that ads are a bit more transparent to users, with Google sometimes the whole first page of results (without scrolling) are ads and they blend in too well. And offering to switch them back if they didn't get on with it.
Also if you are changing chrome settings - show them the sync setting where it sends Google every single webpage they open(and turn it off). No point installing and blocking ads/trackers and using Chrome with default settings as their life is still being uploaded.


The other option is to go into pihole and disable blocking for those devices to keep the other people happy - had to do it with out work laptops as they were having some wierd issues when dropping off the work VPN.",pihole,1651733218.0
356,comment,2,i7aomui,,"Yeah,  I think this is right.  Google seems to be the one to serve this up.  So you don't think there is any way around this?",pihole,1651674753.0
357,comment,1,i7azque,,So do you have to install the extension for each browser?,pihole,1651679225.0
358,comment,0,i7e0cvh,,"I never said I used it.  I said my people use it.  If you can't say something helpful,  how about not saying something.",pihole,1651725739.0
359,comment,6,i7ardu7,,"A browser based blocker in addition to Pi-hole will clean these up. uBlock Origin is a good one.

The reason you see the ad links is that they are served from the same domain as the content. You can't open the links, since the are blocked by Pi-hole.",pihole,1651675861.0
360,comment,2,i7b0jvf,,"Yup. Each mobile device would need it installed in Firefox. For a shared Desktop/Laptop I think you need to install once, but enable for each profile that will use it.",pihole,1651679564.0
361,comment,0,i7efl7n,,Just use Brave. So much easier,pihole,1651737147.0
362,comment,2,i7e3lbk,,"Nah I’ll say stuff as I see fit. It’s Reddit. How about if you want to make dumb comments you don’t say them. No? I didn’t think so.

It wasn’t about you it was about anyone that thinks Google is not evil. They’re fools.

Helpful is subjective.",pihole,1651727838.0
363,comment,1,i7arj0c,,I'll check it out.  Thank you,pihole,1651675919.0
364,comment,1,i7b0ppo,,"Sorry,  I mean one install for Firefox, one for Chrome,  one for IE, etc?",pihole,1651679632.0
365,comment,2,i7b2ulg,,"Each browser requires it's own uBlock Origin extension. I know uBlock Origin is available on Chrome, Firefox, Opera, and Chromium.

I don't think there's a uBlock Origin extension for Internet Explorer, but Microsoft is ending support for Internet Explorer on June 15, 2022 so hopefully everyone is moved to a different browser by then.",pihole,1651680545.0
366,comment,1,i7b3c48,,Thank you,pihole,1651680753.0
367,post,7,ui5z7y,VPN with split tunnelling enabled issue,It seems with the VPN connected my Windows machine prioritizes the VPNs tunneled DNS server which is odd because the app in question should be routed outside of the tunnel and connected to the Pi-hole right? I'm sure this is some sort of config file problem?,pihole,1651669051.0
368,comment,1,i7adn0a,,"would help to know what vpn: openvpn, wireguard, etc...",pihole,1651669898.0
369,comment,1,i7c1ikn,,"Cant say for sure that this will work for you, but have a look at https://github.com/gitbls/pistrong/blob/master/CertInstall.md#windows-10-cert-installation the section starting with “If you want to route all of your internet traffic over the VPN, as opposed to only traffic destined for your VPN server network, you need to enable Use default”

This is a Windows setting and my understanding is that it’s VPN-independent, but it’s an easy try and easy to revert if it doesn’t work for you",pihole,1651694104.0
370,comment,1,i7aejjm,,ProtonVPNs own Windows app which uses OpenVPN or Wireguard - works on neither.,pihole,1651670331.0
371,comment,1,i7ga1r2,,Unfortunately that wasn't it. :/,pihole,1651772690.0
372,comment,2,i7afiu1,,"then it's a ProtonVPN issue. if it was your own wireguard server, might have been able to help.",pihole,1651670786.0
373,comment,1,i7afqmj,,Split tunnelling just ain't working then? :S,pihole,1651670884.0
374,comment,1,i7afzyz,,"no idea... i don't pay for VPNs, i set them up myself and my split-tunnel is working fine.",pihole,1651671003.0
375,comment,1,i7ahkjy,,"Proton release their .ovpn configs for download, is there something I can do with that?",pihole,1651671724.0
376,comment,1,i7ahzbh,,"open it in a text editor

https://serverfault.com/a/416719",pihole,1651671906.0
377,comment,1,i7b9kye,,"> Proton release their .ovpn configs for download

I'd go with Wireguard if you can, it's a whole lot easier to work with.",pihole,1651683224.0
378,comment,1,i7bjdiq,,I'm finding the opposite :/ can't get it to connect with the custom DNS either.,pihole,1651687025.0
379,post,1,ui51xe,Is carrier NAT trying to bypass pi-hole?,"I noticed in my Pi-hole diagnosis today that I had a DNSMASQ\_WARN of ""ignoring query from non-local network [100.115.92.133](https://100.115.92.133)""

A little digging indicates this is an RFC6598 address, which is ""carrier-grade NAT"" before the typical RFC1918 subnets.  I've been using the same ISP and pi-hole together for about two years and never had this before.  What does this DNSMASQ warning mean?  Any one else with something similar?",pihole,1651666019.0
380,comment,2,i7ar4de,,">	What does this DNSMASQ warning mean?

https://docs.pi-hole.net/ftldns/dnsmasq_warn/

""dnsmasq can be configured to only accept queries from at-most-one-hop-away addresses using the option local-service. Other queries are discarded in this case.

This is meant to be a safe default to keep otherwise unconfigured installations safe. Note that local-service is ignored if any access-control config is in place (interface, except-interface, listen-address or auth-server).""",pihole,1651675757.0
381,comment,1,i7d56l9,,Have you got tailscale installed? If so then it could well be another device on your tailnet. I have had this a few times until I configured things correctly,pihole,1651710585.0
382,post,4,ui1604,DBFILE does not seem to work.,"When I add the line DBFILE=/var/log/pihole-FTL.db to /etc/pihole/pihole-FTL.conf, it never gets updated.

It just does not seem to work.

I restarted the pihole-FTL service too.

What am I doing wrong?",pihole,1651649528.0
383,comment,1,i7ac1q3,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1651669127.0
384,comment,0,i79xia9,,"The config file has to be in
`/etc/pihole/pihole-FTL.conf`

See https://docs.pi-hole.net/ftldns/configfile/",pihole,1651660380.0
385,comment,1,i7ahqpm,,https://tricorder.pi-hole.net/sWnLQibo/,pihole,1651671800.0
386,comment,1,i7a2bdq,,That's exactly where I put it.,pihole,1651663735.0
387,comment,1,i7b2bky,,">https://tricorder.pi-hole.net/sWnLQibo/

You appear to have a permissions error in that directory/file:

       [2022-05-04 17:45:07.744 42649M] ERROR: SQL query ""DELETE FROM message;"" failed: attempt to write a readonly database
       [2022-05-04 17:45:07.745 42649M] WARN: Database /var/log/pihole-FTL.db is read-only and cannot be used.",pihole,1651680316.0
388,comment,1,i7a3i0d,,"Ok, because earlier you wrote /etc/pihole-FTL.conf
Does the db file exist already in the new destination? If not create one. Has pihole the permissions to write to it?",pihole,1651664469.0
389,comment,1,i7b461r,,"It doesn't even work if I change DBFILE to /etc/pihole/database/pihole-FTL.db

(I tried that after creating a directory 'database' in /etc/pihole/)",pihole,1651681106.0
390,comment,1,i7b4zry,,"I did chmod pihole:pihole on /etc/pihole/database. So, it seems that pihole needs to own the directory it stores the database in.

Can I do this in /var/log/?",pihole,1651681427.0
391,comment,1,i7a4djv,,The original file belongs to pihole:pihole with permissions 664,pihole,1651664992.0
392,comment,1,i7a75w5,,"I changed the permissions to 644 with pihole:pihole as owner.

Still does not work.",pihole,1651666598.0
393,comment,1,i7b5d6w,,You will likely need to clean up your permissions.,pihole,1651681573.0
394,comment,1,i7b5iaq,,Just curious - why do you want to change the location of the query database?  Is there a problem leaving it in the /etc/pihole directory?,pihole,1651681629.0
395,comment,1,i7a7zdz,,"Hmm according to this ftl should create an empty file if ther is none.
Did you restart FTL?
https://docs.pi-hole.net/database/ftl/",pihole,1651667047.0
396,comment,2,i7b7p2o,,"Was setting up log2ram. Yes, I know SD cards dying due to logging is controversial but I am extremely paranoid and I can't help it. It will bug my mind forever. I do have an original SanDisk card and the original Power supply. But as I said, it will bug me forever if I don't do this.

&#x200B;

Edit: I just put /etc/pihole/database in /etc/log2ram.conf. Its all sorted now. Thanks for your help.",pihole,1651682491.0
397,comment,1,i7a8oof,,Another possibility: query logging is disabled an nothing gets written to that file.,pihole,1651667428.0
398,comment,1,i7ab2i7,,I did restart FTL and query logging is enabled.,pihole,1651668645.0
399,comment,1,i7abzed,,">	query logging is disabled an nothing gets written to that file

The ""disable query logging"" toggle in the web admin GUI controls writing to the dnsmasq log at ***/var/log/pihole.log***. 

Writing to the query database is controlled by your privacy settings or by either of two parameters in the FTL configuration file.",pihole,1651669096.0
400,post,4,uht9fb,Hulu RegEx help,"I have a whitelist for hulu;

\^(.+\\.)?(hulu(-ios)?|hulustream)\\..+$

It hits 33/34 domains that contains ""hulu"" in the name. How would I add to this regex to allow for [assetshuluimcom-a.akamaihd.net](https://assetshuluimcom-a.akamaihd.net) to be tagged under this rule?",pihole,1651621190.0
401,comment,1,i78992k,,`^(.+\.)?(.*hulu.*(-ios)?|hulustream)\..+$`,pihole,1651623406.0
402,comment,3,i789eg5,,"this should also include ""hulustream"" and ""-ios""

`^(.+\.)?.*hulu.*\..+$`  


btw a nice tool for testing:  
https://regexr.com/",pihole,1651623475.0
403,comment,1,i78dkzh,,Thank you! I've been using [regex101.com](https://regex101.com). That seems to work the best for me.,pihole,1651625363.0
404,post,12,uhn73x,Pi-hole + Unbound,Just wondering how DNSSEC works in this setup? Should it be enabled in the Pi-hole admin panel or is this redudant/slower/I don't know?,pihole,1651604353.0
405,comment,12,i7748lt,,">Should it be enabled in the Pi-hole admin panel or is this redudant/slower/I don't know?

Unbound is handling DNSSEC.  Enabling DNSSEC in Pi-hole will include the DNSSEC status in the query log, but won't do an independent DNSSEC check.  Adding the status to the query log will slightly increase the size of your long term database to store the DNSSEC information.",pihole,1651605632.0
406,comment,2,i773cfb,,If you configure unbound to use dnssec you don't have to activate it in pihole.,pihole,1651605252.0
407,comment,3,i78yt5r,,Just thank you for being so involved and amazing. You answer so many questions on here and have personally helped me with my own post. Thank you for being awesome!!!,pihole,1651635031.0
408,comment,2,i774t7z,,Thank you!,pihole,1651605875.0
409,post,2,uhjypl,Pi-Hole with Caddy and DNS-over-TLS,"Greetings,

I have Pi-Hole setup, and it is setup with HTTPS through Caddy. I would like to setup DNS-over-TLS/Private DNS for my android phone. Everything I have seen has you setup Let's Encrypt on the actual Pi-Hole host, and not through Caddy. Have any of you setup private DNS with Caddy, and have some resources you can point me towards?

Thank you!",pihole,1651595382.0
410,comment,2,i76hw3z,,"DNS over TLS / DNS over HTTPS is really designed for DNS traffic leaving your LAN. if you want pihole on your phone all the time, look at setting up a wireguard split tunnel.",pihole,1651596478.0
411,comment,1,i76gv8a,,"You mix things up, I guess. Caddy is just a webserver. It candle handle HTTPS with self signed certificates. It can serve public DNS names over HTTPS using certificates from a public ACME CA such as Let's Encrypt or ZeroSSL. But the client decides which way he resolves the DNS request, not the server. The server just look into the certifcate and compares the domain with his public IP (sort of).So if you want to use DoH you need both, caddy and Let's Encrypt (or ZeroSSL). But Caddy is just a server which listens on port 80 / 443. It does not answer DNS requests, It  just serves the pihole web panel page.DNS requests ar another thing, in your case they go thru pihole to you upstream DNS. So you have to config DoT inside pihole, independent from the web server you use.

You could use a VPN like PiVPN, which tunnels all the traffic from your phone (also the DNS requests) thru a encryptet tunnel to your LAN to pihole and then to a local resolver like unbound.",pihole,1651596081.0
412,post,2,uhioul,Can't Install Unbound on QNAP Container,"I have pihole running on my QNAP NAS in container station. I'm trying to install Unbound based on the video below. 

[https://www.youtube.com/watch?v=FnFtWsZ8IP0](https://www.youtube.com/watch?v=FnFtWsZ8IP0)

Ran this from the container terminal and it installed. 

Install Unbound DNS - sudo apt install unbound 

But running this gives me a sudo: nano: command not found error in the terminal. 

Create Unbound Configuration File - sudo nano /etc/unbound/unbound.conf.d/pi-hole.conf 

&#x200B;

Also, I'm not able to ssh into the pihole container... 

&#x200B;

Any ideas?",pihole,1651591872.0
413,comment,2,i77djn5,,"It tells you what the issue is: 
```
nano: command not found
```


Nano is a terminal text editor, you can install it 
```
sudo apt install nano
```

Or try any other terminal text editor like vim, micro, etc..",pihole,1651609477.0
414,post,13,uhh3ok,Maximum number of concurrent DNS queries reached (max: 150),"Hello, I have received 160 warnings today stating ""Maximum number of concurrent DNS queries reached (max: 150)"" for about 1,000 to 7,000 hits in each domain below. I'm running pi-hole in my qnap ts-251a NAS (dual celeron, year 2016).

1. What should I do? Should I get worried?
2. Should I replace syncthing with qnap's qsync central instead (update every 24hours)?
3. Should I avoid using tailscale vpn? I'm using this to access my NAS files via Qnap's Qfile app from my phone when outside. I can use Nextcloud at a private server instead.
4. In the Settings, DNS, Upstream DNS Servers, I checked cloudfare (DNSSEC) for IPv4 and IPv6 since I set pi-hole as my primary DNS server 1 and Cloudfare's 1.1.1.1 as secondary. Thank you.

log.tailscale.io

relays.syncthing.net

discovery-v6.syncthing.net

discovery-v4.syncthing.net

controlplane.tailscale.com

ncsi.qnap.com

discovery.syncthing.net

dns.msftncsi.com

update.qnap.com

stun.syncthing.net",pihole,1651587387.0
415,comment,2,i75wgjn,,"\>I set pi-hole as my primary DNS server 1 and Cloudfare's 1.1.1.1 as secondary

Doing this will result in some DNS queries bypassing pihole.",pihole,1651588076.0
416,comment,1,i75x6lq,,"Hi, I do this because my NAS only runs 7am to 12 midnight. So if my NAS is turned off, my devices can still query DNS via cloudfare. Anyway, what should I do with Maximum number of concurrent DNS queries reached (max: 150)?",pihole,1651588370.0
417,comment,3,i78q95m,,"So this is very much the wrong approach. 

Leave the NAS on all the time and remove the secondary.",pihole,1651630970.0
418,comment,1,i75xhke,,https://discourse.pi-hole.net/t/maximum-number-of-concurrent-dns-queries-reached-max-150/26775,pihole,1651588492.0
419,comment,1,i75yv55,,"Thanks, how can issue the command below and what would be a good number? 

\-0, --dns-forward-max=<queries>",pihole,1651589052.0
420,comment,1,i79yj5s,,"Don't do that, instead find out why there are so many queries and stop it.
Also remove your secondary DNS entry. Your clients pick either one or the other and some requests will bypass your pihole. Primary means not it is picked first.",pihole,1651661162.0
421,comment,1,i79zdr3,,Most are from my tailscale vpn and qnap qsync.,pihole,1651661776.0
422,comment,1,i7a2otx,,I would assume you created a DNS loop somehow. It's not normal that two devices make so much concurrent queries.,pihole,1651663970.0
423,comment,1,i7ahn4o,,How can I avoid that dns loop?,pihole,1651671756.0
424,comment,1,i7doxb4,,"If it is a DNS loop, [this tailscale help article](https://tailscale.com/kb/1114/pi-hole/) probably has the answer to your question.

Specifically, you'll want to run the command `tailscale up --accept-dns=false`, with the `--accept-dns=false` preventing the loop.",pihole,1651719573.0
425,comment,1,i7en2yk,,"Ok thanks, where should i put this command. Im running pihole inside container station (docker) of qnap nas.",pihole,1651743858.0
426,post,28,uhdhow,Can i safely install Portainer alongside PiHole,"Sorry struggled to find this when googling etc.  


So I have a ubuntu server running with PiHole installed via the usual command line method.  
Since then I have been playing with a virtual setup which I have portainer running on.  


Can I cut out the virtual machine and install Portainer on Ubuntu alongside PiHole or will this screw with the ports?  


Anything I plan to use on Portainer will use randomised ports, so its more the worry Portainer itself may mess with PiHole port wise?   


Thanks!",pihole,1651575553.0
427,comment,11,i758dbl,,Yup You are good to go,pihole,1651575877.0
428,comment,3,i76hd26,,"You can, but management would be easier if you used Pi-hole on Docker.\
Updating, restarting, starting from scratch because of unknown bug, managing containers is where Docker shines.",pihole,1651596274.0
429,comment,2,i761hcd,,"I run docker on a RP 1 B+, and have two containers, pihole and portainer. Naturallly, I must use a script to stop, remove, and pull/reload the latest portainer. But I use portainer to stop and re-deploy the latest pihole when needed. I could just use a script to deal with pihole too, but I like playing with portainer a little bit.",pihole,1651590095.0
430,comment,1,i75xszl,,"I'm running pihole in a docker container, and use portainer to manage it.  
I'm also running apache on the default port 80.
The only thing I do is remap the port 80 traffic to another one.",pihole,1651588621.0
431,comment,1,i764kye,,Maybe,pihole,1651591328.0
432,comment,1,i764wim,,"Yes,  You can

Here is my setup  Pihole running natively later added a few more services (containers) to run on the same PI

https://i.imgur.com/pYRiG6k.png",pihole,1651591453.0
433,comment,1,i77gay4,,"Yup. I have both running along with 20 other containers, it's no problem.",pihole,1651610587.0
434,comment,1,i78mdhs,,"Hey I have that setup.... Linux VM on hyperv core, Linux running socket and portainer

As for the ports I believe I read in the pi-hole did that it needs port 53 to work properly....i may be wrong tho....I left it to port 53 myself",pihole,1651629254.0
435,comment,0,i75pj95,,You could install pihole in a container with portainer and give it a specified IP address,pihole,1651585126.0
436,comment,3,i75ag6u,,"Ace, thanks! :)",pihole,1651577257.0
437,comment,2,i75z1tk,,"I don't want pihole in a container however. I want to run portainer alongside pihole installed directly to the system.

Switching over isn't such an issue.  But can I just run both on the system and use portainer for other bits?",pihole,1651589128.0
438,comment,3,i7604aw,,"I was doing that for a while, but moved it to a container and let it auto update instead of having to log into the box to push pihole updates.",pihole,1651589554.0
439,comment,1,i76reas,,"I do exactly this, Pi-Hole on bare metal alongside Portainer.  Runs just fine on a 3B+.",pihole,1651600216.0
440,comment,1,i760ix0,,That's a good point actually.  Thanks!,pihole,1651589717.0
441,post,21,uh8fr9,Problems upgrading dockerized Pi-hole on synology,"I've been using Pi-hole successfully for a few years, but I've been stuck on 5.3.1 for some time.  
I put this off for a while as I ran into all sorts of problems trying to get my install to properly run newer code due to some combination of structural changes made in Pi-hole docker image 5.4, misc bugs with Portainer and/or the Synology docker implementation.  


I last set everything up using this guide where I use portainer to manage my containers running on my Synology's docker server.

[https://servicemax.com.au/tips/pi-hole-in-docker-on-synology-the-best-way/](https://servicemax.com.au/tips/pi-hole-in-docker-on-synology-the-best-way/)  


Tonight, I was finally able to spent some time tracking down how to get Pi-hole running on the latest docker container (2022.04.3) [https://hub.docker.com/layers/pihole/pihole/pihole/2022.04.3/images/sha256-b8916d3f2c224159405a9f26a5dbc734d6669e0d6efe114a5e0e87214bb8a5b4?context=explore](https://hub.docker.com/layers/pihole/pihole/pihole/2022.04.3/images/sha256-b8916d3f2c224159405a9f26a5dbc734d6669e0d6efe114a5e0e87214bb8a5b4?context=explore)  
In particular, recreate does not work and I had to set DNSMASQ\_USER=root.

  
When I finally got Pi-hole to launch, I noticed that many of my configurations such as DHCP reservations, query logs, etc are all gone, despite properly mounting all of the volumes where my configs live. How do I migrate these settings over?  


Do I have to redefine all of these things as container variables? (a la [https://github.com/pi-hole/docker-pi-hole#optional-variables](https://github.com/pi-hole/docker-pi-hole#optional-variables) ?)

  
Is there another set of folder(s) that I should be mounting?  


Any/all help appreciated.",pihole,1651553224.0
442,comment,2,i74tqsb,,"I also had issues getting Pihole to work in Docker on Synology and as my Synology NAS supported VMs I installed a small generic CLI linux build as a VM and then installed Pihole using the standard install. It just works and Pihole updates normally, the VM has it’s own IP and doesn’t affect any other Synology apps. 

I also use Synology as my DHCP server as it allows me to specify two DNS servers, one is my VM Pihole and the 2nd is pihole on a Raspberry Pi.",pihole,1651563643.0
443,comment,1,i75im9j,,"I've used Ouroboros with success for years. 

https://hub.docker.com/r/pyouroboros/ouroboros

Keep in mind that if an update introduces a bug your whole pihole will go down. I've had this happen a few times with auto updates.",pihole,1651581860.0
444,comment,1,i75psqo,,"So what I was able to do is go and download the latest image in the docker app on Synology, then after that is downloaded take your current pihole turn it off and copy it and it will take the new image without losing any of the data. Make sure new one is working and delete the old one. I'm not at home to get the exact steps but something close to that.",pihole,1651585243.0
445,comment,2,i751vgx,,"To be clear, I never had any trouble getting it running since guides like the one I shared in the OP made it very clear how to do the initial setup.

The problem I've always had is keeping an existing system going with the latest software upgrades.

I could wipe it and start over, but given the time investment I had made in using pinhole asy DHCP server and adding names and address reservations, I didn't want to have to start over from scratch.",pihole,1651570788.0
446,comment,1,i76ki3s,,"I've got all my data setup with volume mounts so that part should be OK. New version spins up just fine, but it doesn't have a lot of my old configuration.",pihole,1651597486.0
447,comment,0,i78xaki,,"Bro, use Ouroboros",pihole,1651634280.0
448,post,7,uh4ai2,warning in dnsmasq ignoring query from non-local network --> Azure VM + whitelisted IP,"Hello,

I have a secondary pi-hole running in Azure on a separate network w/o and internal connectivity to it. I only allow my home internet IP address accessing it. I would like to ""whitelist"" that IP in pihole but I'm having a hard time understanding where I can do that.",pihole,1651539166.0
449,comment,4,i73nnmb,,"In interface options (Settings -> DNS) you have to ""permit all origins"" but you need to setup a firewal,l that only allows your IP to get through to the pihole, otherwise everybody could use your VM as a DNS resolver.",pihole,1651539678.0
450,comment,2,i73osg4,,Thank you! I couldn't find that with all my google power :-/. Appreciate it!,pihole,1651540192.0
451,post,11,uh434g,Granular DNS Blacklist control from Home Kit?,"Hello Everyone -

Long time fan of pihole. As a parent, I want to ""disable"" youtube at the  touch of a button without disabling everything\[2\]. So that, I get a few more years of home-network control until my kids figure out how to use cloudflare DNS.

&#x200B;

As such, for my own  use, I have created a little wrapper around pihole using  homebridge/node-red/python to allow one-touch enabling/disabling of  blacklisting services like youtube, disney plus+.

It was a fun home project. It'll probably have to be re-written when the new pihole API is released - potentially simplified.

If  this is something interesting to others, I'll post the github link  here. If this comes off as too spammy,  I'll delete the post and go back to lurking.

&#x200B;

Update: Repo is here (Pull requests welcome)

[https://github.com/5L-Labs/dns\_admin](https://github.com/5L-Labs/dns_admin)

Thank you",pihole,1651538514.0
452,comment,4,i73xavy,,"FWIW, you can (depending upon your router) force all DNS requests to go through the pihole - even if the device in question explicitly tries a different DNS server.",pihole,1651543947.0
453,comment,2,i74sfev,,I use homebridge also. Would love to see your project. Please post the link. Thanks.,pihole,1651562527.0
454,comment,3,i75azj1,,"Redirect port 53 to Pihole, block port outbound 853 (DoT), block known ips on 443 (DoH)",pihole,1651577595.0
455,comment,1,i794n67,,Main post has been updated! Thank you for the support. Let's see where this goes.,pihole,1651638065.0
456,comment,1,i79i0ll,,You'll possibly need to masquerade so devices don't whinge about incorrect sources.,pihole,1651647086.0
457,post,0,ugzxyy,Reverse proxy port forwarding when piHole DHCP enabled,"Hi - I have an Unraid 6.10rc5 server with Nginx proxy manager working great for external and lan access for all my subdomains. I wanted to install Pihole and use it as the DHCP server for my wireless lan, so avoid having to manually set the DNS server for every client. The pihole instance is running in a Ubuntu VM on the Unraid server. This seems to have broken my reverse proxy. I'm wondering if since I'm no longer using the router's DNS server (I cannot point it to custom DNS), if my port 80 and 443 forwards are no longer working. Any thoughts? Thanks!",pihole,1651526183.0
458,comment,2,i730psh,,Simple as that. Thanks!,pihole,1651529316.0
459,comment,1,i72yzgr,,maybe the http ports are now occupied by Pihole‘s web Gui? change them to another port.,pihole,1651528560.0
460,comment,1,i7389cd,,BTW you can pihole use on every device without the need it has to be the DHCP server and without set DNS manually on every client. Just use it as DNS in your wireless router or your current DHCP server.,pihole,1651532727.0
461,comment,1,i73f3sl,,Unfortunately I have a Bell Home Hub 3000 which does not let me manually specify a DNS server,pihole,1651535822.0
462,comment,1,i73fplf,,According to this [https://help.ncf.ca/Bell\_Home\_Hub\_3000\_Configuration](https://help.ncf.ca/Bell_Home_Hub_3000_Configuration) there is a DNS entry under advanced options or maybe it's worth a look at the DHCP  options.,pihole,1651536088.0
463,comment,1,i746m8y,,"I have that that (terribly mediocre) modem/router too.  It doesn't let you do much, but it allows you to specify a primary and secondary DNS servers though (but you'll need to note your modem serial number because it's requiredto access the setting)  


Check under ""Advanced Tools and settings"" and ""DNS"" under the ""Modem"" section  


https://i.postimg.cc/L5LZfzjm/firefox-On4i3z-RI7z.png",pihole,1651548316.0
464,comment,1,i73g3ph,,Well what do you know... right you are... Thank you sir!,pihole,1651536259.0
465,post,0,ugz398,need HELP! my Pi-hole webpage isn't working,after I updated my pihole the webpage won't show any statistic or even load any data. tried repairing the install but it didn't work. if someone could help me I would be very thankful.,pihole,1651523892.0
466,comment,1,i72rwxf,,Is lighthttpd running?,pihole,1651525513.0
467,comment,1,i737uws,,Can you provide a screenshot?,pihole,1651532542.0
468,comment,0,i72xjvz,,yes,pihole,1651527936.0
469,post,1,ugyndc,Pihole not working on Android 12,"so when I try using Pihole with either a DNS changer app or manually setting the DNS on my phone settings, no webpage loads except the admin interface. I've disabled Private DNS, put the IP of my pi in both fields, and enabled the necessary ports on ufw.

Debug log:
https://tricorder.pi-hole.net/JgOmzUlV/",pihole,1651522688.0
470,comment,1,i7a7avg,,"I've also noticed some ads in apps in my new Android 12 phone which weren't there in Android 9.

I had Google DNS 8.8.8.8 configured as a secondary DNS, so maybe Android 1x now uses this if it doesn't get a 'good' result from PiHole. 

As a quick fix, I changed the WiFi IP settings to Static and left the secondary DNS blank and ads seem to have been removed again.",pihole,1651666675.0
471,post,3,ugykng,Pihole and Apple,Anyone able to tell me what exactly “metrics.iCloud.com” does or is for? And is it ok to keep it being blocked on my pihole with my iOS devices?,pihole,1651522481.0
472,comment,3,i740p8u,,I would Block it. If something with your iOS device stops working then you can troubleshoot and whitelist. I’ve had no issues blocking it but I don’t use any iOS/Apple services. It’s likely just for telemetry and tracking.,pihole,1651545483.0
473,comment,4,i74ceon,,Keep it blocked. It’s for telemetry.,pihole,1651551349.0
474,comment,2,i738scn,,"Sure you don't mean [metrics.icloud.com](https://metrics.icloud.com) ? This domain don't serve ads, according to this post [https://github.com/blocklistproject/Lists/issues/433](https://github.com/blocklistproject/Lists/issues/433).

It's ""just"" for telemetry / statistics etc.",pihole,1651532970.0
475,comment,1,i74uhgv,,But don’t I want to keep it on if it’s apple giving me helpful suggestions like which apps I want to open etc? Or is that not what it does….,pihole,1651564278.0
476,comment,0,i75r051,,That's always telemetry's secondary task.,pihole,1651585769.0
477,comment,1,i75x3v2,,Then surely I should enable it as I want the suggestions they give me…?,pihole,1651588339.0
478,comment,1,i762poa,,You can always whitelist it and see what happens. Report back because I’ve wondered the same.,pihole,1651590588.0
479,comment,1,i76rn55,,"It is not used to serve ads, and disabling it probably won't break any kind of suggestions or make them (much) less relevant. 

Tracker blocking is a privacy based decision, you just have to decide how much data you're ok with giving away. It is used mostly for targeting ads, improving suggestions, scheduling new releases, and other business related decisions. It may not be.

I personally block all tracker domains (mostly Amazon and Apple) and have always had a good experience on both.",pihole,1651600316.0
480,post,0,ugxzqt,Do you guys use any companion extensions?,"Hi all,

I was using local filtering with adguard. But lately I'm not happy about their product anymore. 

I'm looking to set up PiHole in my network. But I'm wondering how will the 'empty ads' visually filter from the browser. Do you still need some kind of extension?",pihole,1651520897.0
481,comment,2,i72hior,,"I'm using pi-hole for my whole network and uBlock Origin for ads that are served through the same host like youtube, because in this case pi-hole can't block it since the domain they are sent from is the same.",pihole,1651521275.0
482,post,2,ugtpsz,Forwarding some local domains to local DNS,"Hi! Quick reading of documentation and reddit didn't bring answers, so i decided to ask. 

I have MS AD domain in my lan (like home.local) and some domain names with internal adresses (like [mylab.com](https://mylab.com) A [192.168.0.5](https://192.168.0.5)) so i want to thats querys was forwarded to local DNS, not to upstreem. 

I do it now with static forward entries in my mikrotik router, or with bind.

Is it real wit pi-hole?",pihole,1651509417.0
483,comment,1,i7202hw,,I would set you AD server as the primary DNS server for your whole network and then have your AD server forward DNS entries to the Pi-Hole and then have that point at upstream servers.,pihole,1651514277.0
484,comment,1,i72e7ll,,"There is an option under settings -> DNS called ""Never forward non-FQDN A and AAAA queries""

>When there is a Pi-hole domain set and this box is ticked, this asks FTL that this domain is purely local and FTL may answer queries from /etc/hostsor DHCP leases but should never forward queries on that domain to any upstream servers.If Conditional Forwarding is enabled, unticking this box may cause a partialDNS loop under certain circumstances (e.g. if a client would send TLD DNSSEC queries).",pihole,1651519954.0
485,comment,1,i720otz,,"no, thats not an option, AD DNS forwards most regular clients to DNS with a lot of restrictions,  only vip users has access to pi-hole.",pihole,1651514522.0
486,post,2,ugpxjm,Can you use Pihole connected via wifi to share connection to ethernet using dhcp from router?,"I have a raspberry pi 3b+ connected to wifi as my pihole device, would it be possible to share it's wifi connection to ethernet while still having the main routers dhcp allocated ip adresses? I wanna ssh into both pi:s.",pihole,1651498971.0
487,comment,2,i716z03,,"I don‘t understand. Where is this second Pi? 

Do you want the first Pi (wireless uplink to LAN) to be the AP for the second? Wifi daisy chain?

Whatever you connect through Layer 2 (bridging) will be one domain with all clients seeing the same DHCP.",pihole,1651502461.0
488,comment,1,i74wbfs,,So you wanted to make your pi as a ethernet dongle?,pihole,1651565891.0
489,comment,1,i71b9o7,,"Sorry, I have one pi currently serving as the pihole connected to wifi to a router/accesspoint. I want another pi to connect to it via ethernet as the second pi doesn’t have 5ghz wifi and cuts out alot.

router (dhcp) — wifi —> pihole (only dns)  — ethernet —> pi nr.2

I want to keep the ip adresses that the router gives the devices.

if im not mistaken the only way to share the internet via the ethernet port means that I create a dhcp server on the pihole server, which in turn gives new ip adresses to the newly created sub network?

I might have gotten some terms wrong but is this better?

I just want to be able to ssh into the servers easily.",pihole,1651504300.0
490,comment,1,i74wcwx,,basically,pihole,1651565927.0
491,comment,3,i71c289,,"No, that is not necessary. It should be enough to have the Wifi interface and the Ethernet interface on Pi in bridge mode. I would have to look it up or try myself, but on whiteboard level this should be the task.

Google for Raspberry wireless bridge.",pihole,1651504636.0
492,comment,2,i71ce1u,,"Yes, you want to run the pihole device as a network bridge. I found a tutorial in german, maybe you can use google translate to use it:
https://www.elektronik-kompendium.de/sites/raspberry-pi/2002161.htm",pihole,1651504774.0
493,comment,1,i71fuy3,,"Thanks, tried searching for it and it seems like one of the software that is used for bridging is conflicting with pihole, dnsmasq.",pihole,1651506203.0
494,comment,2,i71goqh,,"I can‘t tell for sure, but I can‘t believe that there is a conflict. To set up a bridge and add interfaces to it is standard Linux stuff. No software required. A (passive) service listening and running on the CPU shouldn‘t influence this. But I have no proof. 

So hopefully some other more informed comment shows up here.",pihole,1651506544.0
495,comment,1,i71k0zw,,"Says that it's a port conflict, however it seems like pihole itself has some dnsmasq usage as there are config files for pihole in /etc/dnsmasq.d/ these say that they are regenerative every time you update, so you can't just modify them",pihole,1651507918.0
496,comment,2,i71kfze,,Pihole is based on dnsmasq. At what step do you encounter this port conflict and what exactly do you observe? (Or was this just read information?),pihole,1651508087.0
497,comment,2,i71l3ad,,"Just speculation: if Pihole binds the service to both interfaces and these get bridged together a conflict could be explained. 

What could be tried: In Pihole settings change listening to „only on“ wifi interface.",pihole,1651508347.0
498,comment,2,i71lnmi,,"If all fails: buy a little Wifi router (GL.inet for example) put this into Wifi-Bridge mode. Then you can connect one or both Pis to LAN ports of the device. 30$ or so.

eg https://www.amazon.de/GL-iNet-GL-AR300M16-Pre-installed-Performance-Programmable/dp/B07794JRC5/ref=mp_s_a_1_8?crid=2I2SY2YFJV63A&keywords=gl.inet&qid=1651508586&sprefix=gl.inet%2Caps%2C83&sr=8-8",pihole,1651508569.0
499,comment,2,i73ohg3,,"you can just put additional config files in that folder, so updates of pihole don't interfere with them",pihole,1651540052.0
500,comment,1,i71m95x,,"# When installing dnsmasq via apt

    Job for dnsmasq.service failed because the control process exited with error code.
    See ""systemctl status dnsmasq.service"" and ""journalctl -xe"" for details.
    invoke-rc.d: initscript dnsmasq, action ""start"" failed.
     ● dnsmasq.service - dnsmasq - A lightweight DHCP and caching DNS server
    Loaded: loaded (/lib/systemd/system/dnsmasq.service; enabled; vendor preset: enabled)
    Active: failed (Result: exit-code) since Mon 2022-05-02 18:19:40 CEST; 29ms ago
    Process: 74569 ExecStartPre=/etc/init.d/dnsmasq checkconfig (code=exited, status=0/SUCCESS)
    Process: 74576 ExecStart=/etc/init.d/dnsmasq systemd-exec (code=exited, status=2)
    CPU: 100ms
    May 02 18:19:40 hostname systemd[1]: Starting dnsmasq - A lightweight DHCP and caching DNS server...
    May 02 18:19:40 hostname dnsmasq[74576]: dnsmasq: failed to create listening socket for port 53: Address already in use
    May 02 18:19:40 hostname dnsmasq[74576]: failed to create listening socket for port 53: Address already in use
    May 02 18:19:40 hostname dnsmasq[74576]: FAILED to start up
    May 02 18:19:40 hostname systemd[1]: dnsmasq.service: Control process exited, code=exited, status=2/INVALIDARGUMENT 
    May 02 18:19:40 hostname systemd[1]: dnsmasq.service: Failed with result 'exit-code'. 
    May 02 18:19:40 hostname systemd[1]: Failed to start dnsmasq - A lightweight DHCP and caching DNS server.
    
    fixed the indentation, kinda.",pihole,1651508804.0
501,comment,1,i73otmp,,"Cool, however it seems like pihole-ftl doesn’t use dnsmasq anymore. so the port is still occupied if im not mistaken. and I am not sure if you can change the ports.",pihole,1651540207.0
502,comment,1,i73orgg,,"yes you can't run an additional instance of dnsmasq when pihole already installed it ;)  
Use instead hostapd to run a network bridge. No fiddeling with dnsmasq is needed.",pihole,1651540179.0
503,comment,1,i73ow3d,,https://www-elektronik--kompendium-de.translate.goog/sites/raspberry-pi/2002161.htm?\_x\_tr\_sl=de&\_x\_tr\_tl=en&\_x\_tr\_hl=de&\_x\_tr\_pto=wapp,pihole,1651540238.0
504,comment,2,i73pdcp,,"Nope.

>FTLDNS comes with a lightweight but powerful inbuilt DNS/DHCP/TFTP/... server eliminating the need to install dnsmasq separately (we used to do this before Pi-hole v4.0). However, it is important to understand that we are not moving away from dnsmasq, but, in contrast, are coupling even closer to it by incorporating it into FTL. This provides us with a much more reliable monolith DNS solution where we can be sure that the versions of FTL and the DNS internals are always 100% compatible with each other.

https://docs.pi-hole.net/ftldns/dns-resolver/",pihole,1651540458.0
505,comment,1,i73oxvq,,isn’t hosapd only for wifi share?,pihole,1651540260.0
506,comment,1,i73qpef,,"I figured out this tutorial is about the ""other"" way, you bridge from ethernet to wifi, but you want the other way, from wifi to ethernet.Have a look into this:[https://pimylifeup.com/raspberry-pi-wifi-bridge/](https://pimylifeup.com/raspberry-pi-wifi-bridge/)

Everything should already be set up, until step 14. At this point you tell your wifi interface to handle the traffic to the eth0 interface.  
but step 16 looks outdated, current Raspi OS uses systemd.",pihole,1651541055.0
507,comment,1,i73r8mw,,"look at this, this looks like it works with current raspi os:

https://www.glennklockwood.com/sysadmin-howtos/rpi-wifi-island.html",pihole,1651541298.0
508,post,0,ugnrok,Pihole keeps changing my Raspberry Pi IP Adress,"I've setup my pihole using ```curl -sSL https://install.pi-hole.net | bash```
and every time I use a device to connect to the dns server, the IP of my Raspberry Pi changes. I tried giving it a static IP in the Pi itself but it doesn't work. I also tried giving it on the router one time but still the same result. How can I fix this?",pihole,1651491898.0
509,comment,4,i70r1yd,,"Your router serves as the DHCP I presume?  If so, you need to instruct your router to issue a static IP to the Pi-hole. This can be done in your router settings.",pihole,1651494828.0
510,comment,3,i70uvqe,,I think this is a router issue not a pi issue. You can assign a static address to your pi in your router admin page.,pihole,1651496863.0
511,comment,2,i70vrax,,"A device does not change it‘s IP when one of it‘s services is used. Can you be more specific with your observations? 

What exactly do you mean with „every time I connect to DNS“? You mean ssh-ing into Pi or using DNS?

How you find out about the changed IP?

(However, a pinned dynamic IP (set in your DHCP settings in router) would be a good idea!)",pihole,1651497305.0
512,comment,2,i71vsra,,"It’s your router DHCP function that changes device IP addresses. On your Pi’s Network Settings, you can manually set a static network IP address. If you do it right, your Pi will keep the IP you set. After you set the address, remember to shut off the network connection on the Pi, then turn it back on, and then check that your IP setting is still set the way you want. If you succeeded, that IP will not change.",pihole,1651512575.0
513,comment,1,i70vsse,,"Are you running DHCP from PiHole? That’s the one way pihole can give addresses. Then do you have DHCP disabled on your router? If you have both you have a bit of a race condition. Then if your Pi had a DHCP assigned address things might get weird. DHCP on PiHole, no DHCP on Router, static IP on Pi should be the right recipe. Whatever way your Pi gets an IP address though it should last for the duration of its lease. I’ve no theory why connecting to it changes its address.",pihole,1651497326.0
514,comment,1,i70w37f,,"You only need to set up a static IP for your PI in your router, but after setting it in the router you may need to restart your Pi for it to obtain the new IP address. After that it should never change unless you manually change the static IP you gave it.",pihole,1651497471.0
515,comment,1,i71tfhk,,"No, pi-hole is not doing that. Your router is doing it. Tell your router to give it a static ip.",pihole,1651511646.0
516,comment,1,i74oilb,,Thanks for all the comments. I fixed it by manually giving my Pi a static IP address on the router.,pihole,1651559288.0
517,comment,1,i73us01,,oh ok thanks!,pihole,1651542843.0
518,comment,2,i76cdnc,,"Good!

Make sure to reserve that address on the router, i.e. ensure that the router does not accidentally give that address to another device :)",pihole,1651594357.0
519,post,75,ugnnw7,Had a power outage and now pihole isn't blocking anything..,"Looking at the info boxes on the dash, it looks like there isn't anything on the adlists.  


[the temp sensor is faulty on this old pc.  ignore that glaring red circle :\)](https://preview.redd.it/dniv94uct1x81.png?width=1302&format=png&auto=webp&s=8860bc90e15fe26237bab9199168e847f2a6ce4f)

However, I have not touched any adlists.  They simply went away after turning the server back on.  Another weird thing that I assume is related is that on the dashboard, it used to have Top Permitted Domains, Top Clients, **Top Blocked Domains, Top Blocked Clients.**  The last 2 are missing as well.  


I have tried to use the pihole -g to no avail, and have tried to update gravity from within the ui and I get the following:  


> \[i\] Neutrino emissions detected...   \[✓\] Pulling blocklist source list into range   \[i\] No source list found, or it is empty     \[✓\] Preparing new gravity database   \[i\] Using libz compression    \[✓\] Creating new gravity databases   \[✓\] Storing downloaded domains in new gravity database   \[✓\] Building tree   \[✓\] Swapping databases   \[✓\] The old database remains available.   \[i\] Number of gravity domains: 0 (0 unique domains)   \[i\] Number of exact blacklisted domains: 0   \[i\] Number of regex blacklist filters: 0   \[i\] Number of exact whitelisted domains: 0   \[i\] Number of regex whitelist filters: 0   \[✓\] Cleaning up stray matter    \[✓\] FTL is listening on port 53      \[✓\] UDP (IPv4)      \[✓\] TCP (IPv4)      \[✓\] UDP (IPv6)      \[✓\] TCP (IPv6)    \[✓\] Pi-hole blocking is enabled 

So on the surface it looks like it's blocking, but with no lists.  Further research suggested I take a look at /etc/pihole/adlists.list and that contains:  


[https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts](https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts)

So I tried to repair pihole, which failed because I am using a custom port on lighttpd (80 is in use by apache for a different service).  


Here is the debug code:   elRMYSMr

Thanks for any help.  This is driving me nuts.

(and any tips to clean up the docker garbage would be helpful :) )",pihole,1651491507.0
520,comment,40,i71am2a,,"If you're using DNSSEC make sure that the time and date is set correctly on your pihole. Every time my power goes out, everything stops working until I fix the time. Because I have DNSSEC enabled, it can't connect to a NTP service because of the time drift.",pihole,1651504023.0
521,comment,6,i70lytd,,have you gone to the pi-hole block lists to see if it recognizes the list?,pihole,1651491808.0
522,comment,3,i72nsyp,,I had a similar problem and eventually discovered Pihole has a repair option (pihole -r) which fixed it for me.,pihole,1651523823.0
523,comment,2,i70mr2n,,"I put those in manually, I found the lists online. my router has built in malware blocking, but you can never be too safe.",pihole,1651492294.0
524,comment,1,i71gbcq,,"Does pi-hole include the lists in the teleporter backup file? if so, you could make a backup file, extract the contents, and examine the lists.

also, when pi-hole starts up, it prints the list processing info ( list not found, no data error, downloading list) to the console, so you could restart it and look for issues that way. 

g/l !",pihole,1651506394.0
525,comment,11,i71ucfm,,"+1 for this, found out the hard way after coming back from my holidays",pihole,1651512003.0
526,comment,6,i72kpg0,,This has happened to me twice. The piholes boot up faster than my router/firewall so the piholes can't get the correct time. A simple restart fixes the issue.,pihole,1651522565.0
527,comment,5,i72belu,,That’s been my issue every time we have a power outage. I now have it plugged into a UPS so I don’t have to set the date/time every time.,pihole,1651518820.0
528,comment,8,i70mb75,,"Well, not sure why I didn't think of that.  I looked via CLI and it showed something there so I assumed (yes, silly me, I know) that it was in place.  After looking and realizing it wasn't there, I added it using the webUI and now gravity updated nicely.

I assume (hopefully rightfully this time) that the top blocked domain stuff will show up again over time.  (edit:  it did)

Thanks for the heads up!

edit2:  any idea why this would have happened?  Only thing I can think of would be if it was being written, but why write to the adlists if its not being actively updated...?",pihole,1651492024.0
529,comment,1,i70m7m3,,"should look similar to this:
https://imgur.com/a/0epUQZu",pihole,1651491962.0
530,comment,1,i70msb8,,amen.  Thanks for the assist!,pihole,1651492316.0
531,comment,5,i70mhqc,,"there can sometimes be a difference between what's in the files and what's on the web ui, I can't explain what's behind it, I just figured I'd try something simple first. and no sweat! we're here to help each other and sometimes the simple stuff for our own problems tends to escape us.",pihole,1651492137.0
532,comment,1,i70mm1p,,I just have the top one in mine....should the others be added automatically or did you put those in manually?,pihole,1651492209.0
533,comment,2,i75fvqg,,[removed],pihole,1651580422.0
534,comment,2,i75fz2v,,"Right.  Somehow I had lost my default list. All is fixed now, and thanks for that massive list of filters to choose from :)",pihole,1651580471.0
535,post,0,ugkxpf,[HELP] IPTV and pihole,"Hi!

After several tests I can confirm that my ISP is blocking some IPTV urls. Checked using a shared connection from my mobile with a different ISP. Changing plain DNS does not help.

I am planning to use a Pihole + unbound/cloudflared solution to be able bypass this ISP restriction. I am not sure if unbound would help because it doesn't use https (DoH) but I prefer it over cloudflared.

Anyway could bypass these IPTV restrictions with a similar solution?  
I know VPN would be the best solution but for my it is the last possibility.",pihole,1651480056.0
536,comment,3,i70tnqo,,"How is your ISP blocking them?  If it's anything other than not resolving the domain names, which changing the DNS server should have addressed, then pihole isn't going to help.",pihole,1651496235.0
537,comment,2,i70xgua,,"What u/Important-Comfort said. If changing DNS doesn't work, nothing other than a VPN will. DNS just takes [www.somesite.com](https://www.somesite.com), figures out it belongs to the server at the [10.11.12.13](https://10.11.12.13) IP address, and then your browser sends that IP address to your ISP to connect you. If the ISP is blocking that IP address, there's no way around it other than a VPN.

The only thing DoH does is protect your DNS query, it doesn't hide your IP request to your ISP, so even DoH wouldn't help you here.

Are you sure you changed your DNS resolver properly?",pihole,1651498150.0
538,comment,0,i74v2bd,,Why is people downvoting?,pihole,1651564789.0
539,comment,0,i74v6u0,,Because they have their own IPTV servers and block some competitors (I know it is illegal),pihole,1651564893.0
540,comment,1,i74v526,,"Yes, I tried cloudflare and Quad.

Thanks, then I will make a wireguard client to connect directly to another server I have",pihole,1651564850.0
541,comment,1,i751hrm,,"I said ""how"", not ""why"".  If they are blocking the traffic then pihole won't help.",pihole,1651570458.0
542,post,39,ugh98e,PiHole stops working every few hours,"PiHole running on a Raspberry Pi 3B+, using DietPi installation. Connected via Ethernet to the router, and DNS in router set to PiHole. Also configured to use Unbound as a recursive resolver.

Also running Tailscale and using PiHole as DNS for Tailscale too.

The issue is PiHole stops working every few hours, overnight almost certainly. This is a clean installation on a new SD Card and the power supply is fine. The PiHole is still accessible, but all devices are unable to access the internet during this period. Changing DNS away from the PiHole fixes the problem. Interestingly, it appears that TailScale devices are still able to continue using the PiHole for internet despite the issue, while normal devices on the home network cannot. No custom ad lists or the sort, everything is clean to my knowledge.

The PiHole device is also running Docker and Portainer as of now, with no other containers. These don't seem to be causing issues and the PiHole is configured to use eth0. Tailscale was run with accept-dns=false flag so it can function as a pihole.

Also to add: My OnePlus phomes report no Wifi even when Wifi is working!

PiHole log developers token here: [https://tricorder.pi-hole.net/DgbyUzv4/](https://tricorder.pi-hole.net/DgbyUzv4/)",pihole,1651464744.0
543,comment,4,i70k7vp,,"Can you still access Pi-hole during these outages? I know you said it’s a new SD card, but maybe it’s defective. Same goes with the power supply.",pihole,1651490679.0
544,comment,3,i72d119,,"Out of curiosity, is this how your traffic appears during the outage? [https://i.imgur.com/Dz4e2Ph.png](https://i.imgur.com/Dz4e2Ph.png)

Over the past few days, I'll wake up to find that traffic across devices isn't flowing quite as expected. I've reached the point where I simply have to reboot the PiHole to quickly restore service. A few days ago, all traffic was interrupted overnight (probably a 6-hour outage). All this seems to have started occurring since the last round of updates - but I can't tie it directly to that update.",pihole,1651519476.0
545,comment,2,i70nldo,,My guess would be power supply. You can check journactl log for the errors when it’s not working.,pihole,1651492815.0
546,comment,2,i72xkgg,,"Ya PIHOLE sucks..I spent lots of time playing with it..

No offense, I loved it, but, since you have the pi, just come on over to dd-wrt and get a full-featured router! with ad block and VPN, firewall etc, etc

Is there anything that is unique to PIHOLE?",pihole,1651527943.0
547,comment,1,i71120z,,"Sounds like your router is doing something wonky with DNS. Can you set a client to use the pihole directly? Then you'd rule out the router barfing on something. 

I had an issue with a LTE router that would freak out if DNS was changed from the default AT&T DNS servers. I never really figured out what the issue was, seemed like there was some keep alive or phone home that would fail and DNS wouldn't work until the router was restarted.",pihole,1651499846.0
548,comment,1,i7165l0,,"""...on a new SD Card""

Test that setup with a different SD card.",pihole,1651502106.0
549,comment,1,i717qnq,,"have you tried removing unbound from the equation? run cloudflare as your upstream for a day, see if it happens again.",pihole,1651502793.0
550,comment,1,i732k0o,,"You may be running into rate limiting. I had this same problem as a result of my router proxying all DNS requests (so they all came from 193.168.1.1). If you set the rate limit to something higher (I chose infinity), it may solve the problem.

Edit: I just saw you're doing a docker container, like I did. The rate limit can be set via an environment variable in the container and restarting. It's in the docs for the container image.",pihole,1651530137.0
551,comment,3,i70n38o,,"Yes, the pihole is accessible and functional during the outage.",pihole,1651492503.0
552,comment,2,i72iit3,,"Hmm, I’m seeing something similar, spotted one outage yesterday and then another this evening too. In both cases it seems to recover itself https://i.imgur.com/nYuSuNr.jpg",pihole,1651521677.0
553,comment,1,i74dp8l,,Something like this but it continues functioning for tailscale,pihole,1651552065.0
554,comment,1,i74drla,,"It might be this, let me try",pihole,1651552100.0
555,comment,1,i74dpy9,,"Done, still the same issue",pihole,1651552076.0
556,comment,1,i774032,,Alright,pihole,1651605534.0
557,comment,1,i74dunv,,"I'm not using docker, I'll figure it out though",pihole,1651552149.0
558,comment,1,i75deq4,,"I misread your post, but since the pihole device is running docker, you could do a clean install as a new container. That might let you test it out without disturbing the current setup.",pihole,1651579040.0
559,post,1,ugenak,Several other DNS servers being used?,"I set the Pi as the DNS in DHCP settings on my router, but DNS tests are showing several other DNS servers in addition to the one I have set in PiHole settings. Sometimes it’s all from my ISP, other times it’s a mix of ISP (Spectrum), cloudflare, time Warner cable.",pihole,1651455550.0
560,comment,1,i6z7ifw,,"Ads are being blocked just fine, so is it normal to see my ISP and other random servers in these tests while using pihole? I never had this when I had my devices manually set to NextDNS or Quad9",pihole,1651455980.0
561,comment,1,i6zaqfi,,"Either you specified these servers in pi-hole, or your router sends DNS queries to these servers for some reason.

I suggest using a router you buy yourself (if your ISP allows it), or using a VPN for your entire network (or at least for pi-hole and your laptop).",pihole,1651457647.0
562,comment,1,i6zyv8f,,I noticed that for eero secure. But once I set it to Cloudflare via Pi-Hole that’s the only one that shows.,pihole,1651472945.0
563,comment,1,i70276k,,IPv6 is a common reason why Pihole get’s bypassed: The DHCP settings only configure IPv4 settings while IPv6 is autoconfigured. Router advertising may set the router as DNS for v6 transported queries.,pihole,1651475688.0
564,comment,1,i6zcjzp,,">Ads are being blocked just fine, so is it normal to see my ISP and other random servers in these tests while using pihole?

No.",pihole,1651458600.0
565,comment,1,i6zbex3,,"I’m using an Asus router, and can’t find any setting where it would be using these random DNS servers. I haven’t touched WAN settings at all though, but another post advised against it.",pihole,1651458001.0
566,comment,2,i6zg7kv,,"The comments at https://www.reddit.com/r/pihole/comments/apfrpz/asus_router_owners_simple_way_to_force_all_dns/ point to a ""feature"" in merlin firmware called `Advertise router's IP in addition to user-specified DNS` which you should disable. The main post has a different solution you can try.",pihole,1651460561.0
567,comment,1,i71dgwu,,">**I’m using an Asus router**

That is one potential cause, particularly if you are using stock Asus firmware. Asus routers using the stock Asus firmware will include the router as one of the LAN DNS servers. This means requests can bypass the Pi-Hole. The solution is to use [Asus-Merlin firmware](https://www.asuswrt-merlin.net/) if your router is supported by it. Once Asus Merlin is installed and configured one then goes to LAN > DHCP Server > DNS and WINS Server Setting and set the option ""**Advertise router's IP in addition to user-specified DNS**"" to NO then one saves the changes.

Much more discussion on Asus Merlin firmware and Asus Merlin Add-On's over on SNB Forums.

[https://www.snbforums.com/forums/asuswrt-merlin.42/](https://www.snbforums.com/forums/asuswrt-merlin.42/)

[https://www.snbforums.com/forums/asuswrt-merlin-addons.60/](https://www.snbforums.com/forums/asuswrt-merlin-addons.60/)",pihole,1651505215.0
568,comment,1,i72wopa,,The WAN setting is where you set your DNS. Also if you have IPv6 turned on you need to set the DNS there too.,pihole,1651527560.0
569,comment,1,i72f4bz,,Yeah I think this is it. Thanks.,pihole,1651520326.0
570,post,3,ugek3i,Raspberry Pi 1 Model B running Pi-hole: System non-responsive every morning and needs reboot,"Okay, pretty much what the title says, but let me provide more details:

I am running two different instances of Pi-hole. Both are set up almost exactly the same except (DHCP servers, unbound) for the IP range that each is allowed to hand out. The first Pi-hole install is on a Raspberry Pi Zero 2 and it seems to be doing great. The second install is on a Raspberry Pi 1 Model B and that's what I need some direction for troubleshooting.   


During the day, both devices are doing a great job, and no complaints. However, every morning I find that the Raspberry Pi 1 Model B is offline (and clearly the Pi-hole instance with it). I can't ssh into the device as well. The only thing so far that I have worked out is just to force a reboot by disconnecting and connecting the power. I would really like some direction in how I go about troubleshooting what's going on. I have no other applications/services running on this Raspberry Pi 1 Model B.

I did realize that if I disable the DHCP server on this Raspberry Pi 1 Model B, then it doesn't seem to go unresponsive on me and seems to be running great for the last 3 days. So, something to do with the DHCP server? I don't know how that can be related.",pihole,1651455245.0
571,comment,4,i6zpdxy,,Copy the SD card to a new one. You will learn if that is the issue in 24 hours or less....,pihole,1651466047.0
572,comment,2,i6zaw9r,,"Are you ensuring that your DHCP servers are handing out distinct IP ranges without overlap?

Have you edited the dnsmasq configuration on both Pi-hole instances so they they also pass each other's address as a secondary nameserver as opposed to just themselves?",pihole,1651457730.0
573,comment,2,i6zf4eg,,"You can have a look into your systemd logs by executing
`journalctl`",pihole,1651459960.0
574,comment,1,i6zk0di,,"Sounds like a hardware issue ,try it with another device",pihole,1651462736.0
575,comment,1,i72yom0,,"I retired my Pi 1 from PI-Hole use due to the limited memory and CPU power it had. Didn't use it for DHCP, just DNS. The cost/effort needed to change beat the aggravation of trying to keep something so old and limited running.

Using a pair of old 3Bs now and they run without problem between updates.",pihole,1651528429.0
576,comment,1,i71aa1h,,I had a very similar thing happen. I cloned the boot SD from a lexmark SD card to a new Samsung one and I've been stable since.,pihole,1651503881.0
577,comment,1,i7gk0ti,,Yes to both. Distinct IP range for both. And they both give out both of their IPs as DNS servers to clients,pihole,1651776721.0
578,comment,1,i7gjsge,,Thank you. I will try this out and report back here,pihole,1651776628.0
579,post,2,ugc9wv,can't update gravity after restart,"Hi, I have followed all the instructions I could find online to install cbcrowe/pihole-unbound via portainer. My pihole with unbound ran without an issue for weeks. The Raspberry Pi 4 restarted a few times during this time and there was no issue whatsoever. Now after the latest update I can't update Gravity anymore and get ""DNS resolution is currently unavailable"". The various website I found don't really help me unfortunatley, Main take away is that something messed up the DNS server setting and that I need to make sure it points at [127.0.0.1](https://127.0.0.1). However, that is still the case and hasn't changed.  Now I don't really know what I am doing here unfortunately... Pihole is still running ok. It just doesn't update Gravity (and on a side note my syncthing service is now showing up on pihole under a totally weird IP as well since that restart. Can anyone point me in the right direction so that I don't have to start again by formatting my sd card please?",pihole,1651447740.0
580,comment,1,i6z3zxw,,https://discourse.pi-hole.net/t/solved-dns-resolution-is-currently-unavailable/33725,pihole,1651454196.0
581,comment,1,i6zpyhd,,"Thanks for that. I had found that link earlier. However, it does not apply here since the nameserver is still set at [127.0.0.1](https://127.0.0.1).  So no need to change resolv.conf. Or have I overlooked anything?",pihole,1651466418.0
582,post,6,ugak2j,need abit of help please.,"Hello could someone help me please. I'm using Ubuntu and trying to get this script to work but don't understand what todo. 
Here is a link 
https://discourse.pi-hole.net/t/youtube-script-seems-to-be-working-very-well/31316?filter=summary
I'm trying to copy Evey it's saying but I'm getting no such file or directory. Wish there was video how to get this working because I'm not good understanding instructions by text.",pihole,1651442511.0
583,comment,1,i6z2tb6,,"You mean this?  
[https://gitlab.com/grublets/youtube-updater-for-pi-hole/-/tree/master](https://gitlab.com/grublets/youtube-updater-for-pi-hole/-/tree/master)

And at which step do you get the error? When you run the script?",pihole,1651453590.0
584,comment,1,i6z31fz,,Yes that's right this one. I add the script changed the IP to and save it but then I can't do anything after that. I just get no file or directory.,pihole,1651453706.0
585,comment,1,i6z3ojq,,"When you run `./youtube.update.sh` ?

Try `/path/to/script/youtube.update.sh` or cd into the correct path",pihole,1651454038.0
586,comment,1,i6z704f,,Hello I'm using ubontu is probably why?,pihole,1651455718.0
587,comment,2,i6zb8gs,,No.,pihole,1651457908.0
588,comment,1,i6zeixp,,"`\`\`\`cd ~wget` [`https://gitlab.com/grublets/youtube-updater-for-pi-hole/-/blob/master/youtube.update.sh\``](https://gitlab.com/grublets/youtube-updater-for-pi-hole/-/blob/master/youtube.update.sh)

`chmod a+x` [`youtube.update.sh`](https://youtube.update.sh)

Edit the script like mentioned in the how-to `nano` `youtube.udpdate.sh`

run the script:`sudo ./youtube.update.sh`

Do the other stuff mentioned in the how-to",pihole,1651459638.0
589,comment,1,i6zf4f8,,"You'll want to break that up, Reddit is taking a crap on your formatting.

Wrap code blocks in three backticks.",pihole,1651459960.0
590,comment,2,i6zhm4z,,"I hate this shit editor lol

here the commands in better formatting:

```
cd~ 
wget https://gitlab.com/grublets/youtube-updater-for-pi-hole/-/blob/master/youtube.update.sh
chmod a+x youtube.update.sh
nano youtube.udpdate.sh
sudo ./youtube.update.sh
```",pihole,1651461351.0
591,comment,1,i70cow3,,Thanks I give this ago,pihole,1651484913.0
592,post,1,ug7k44,General betting regex blacklist,"(wager)|(jack-?pot)|(black-?jack)|(poker)|(slot)|(bingo)|(cas?z?ino)|(lott)|(bet)|(gambl)

if you find any of them too intrusive you can remove it or edit, the bet one might cause some problems but it's probably the most effective

&#x200B;

this won't catch every single site, so you'll probably have to add some additional gambling blocklists EDIT: 

[https://raw.githubusercontent.com/cbuijs/shallalist/master/gamble/domains](https://raw.githubusercontent.com/cbuijs/shallalist/master/gamble/domains) [https://raw.githubusercontent.com/Sinfonietta/hostfiles/master/gambling-hosts](https://raw.githubusercontent.com/Sinfonietta/hostfiles/master/gambling-hosts) [https://raw.githubusercontent.com/blocklistproject/Lists/master/gambling.txt](https://raw.githubusercontent.com/blocklistproject/Lists/master/gambling.txt)

a few decent ones that work w pihole",pihole,1651433893.0
593,post,1,ug77em,How to fully block traffic of iOS Books app?,I would like to only block the traffic of this app. I was successful in fully blocking all akamai and apple as regex but that blocks the traffic of the whole iOS. However I got the App Store and iOS updates running with only whitelisting two servers. Yet I think that this is not the proper solution. Does anyone know what needs to be blocked for books?,pihole,1651432857.0
594,comment,2,i6y40a3,,"https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522

This should help you out.",pihole,1651437236.0
595,comment,1,i6y6kpx,,I'm interested in blocking any possible tracking that might be going on. Problem here is that I cannot see whether the blocking was successful or not.,pihole,1651438372.0
596,post,1,ug6xs2,Harley Davidson sign in on their website only spins with Pihole active,"Does any one have the same behavior with this website [https://www.harley-davidson.com](https://www.harley-davidson.com) or any other. Everything on the site loads and works with exception to the Sign In, it only spins. If I click it nothing happens unless I disable Pihole. I added the web site to the whitelist, but it didn't help. Do they use a third party sign in service that is blocked?",pihole,1651432084.0
597,comment,2,i6xxkvo,,browser developer tools (F12) -> network then see which requests are being blocked after you click the button,pihole,1651434434.0
598,comment,1,i6xv4hp,,You could check the query log.,pihole,1651433374.0
599,comment,0,i6xxlx9,,"only way to make a harley spin...login with pihole active

&#x200B;

edit:spelling",pihole,1651434447.0
600,comment,1,i6y1ocj,,I tried and see nothing. When I have Pi-hole disabled and I click it a side bar slides and theirs is where you enter the credentials. With Pi-hole active nothing happens at all. I’m not seeing anything happen in the logs.,pihole,1651436211.0
601,comment,2,i6ybwq6,,"https://cdns.us1.gigya.com  

https://login-us.harley-davidson.com

when i click Sign In and the slider opens, that's what it loads.",pihole,1651440711.0
602,comment,1,i739ppa,,I finally was able to catch it. I whitelisted cdns.us1.gigya.com but it didn't work until I whitelisted [cdns3.gigya.com](https://cdns3.gigya.com). Thanks all,pihole,1651533395.0
603,post,1,ug6g65,Error when adding Pi-hole IP to Orbi Address reservation.,"Hi there, I am following [this how-to here](https://www.mbreviews.com/netgear-orbi-with-pi-hole/) as its similar to my current set-up.

However, when I get to this part: DHCP enabled on Netgear Orbi, DHCP disabled on Pi-Hole - I get the following: 

> Error: This IP address should be in the same subnet as the LAN IP address.

Looking at the list of devices connect to my router, that appears to be true. My pi-hole starts with 128 while other devices start as 10.? 

Should I simply re-install pi-hole on my rasberry pi and reassign an IP address that starts with 10? 

Current set-up: 
Rasberry Pi 4 
Gateway (ATT Arris I think?): Pass-through mode Dynamic 
Router (OrbiR50): set as router mode

Thank you!",pihole,1651430711.0
604,comment,2,i6xrlwr,,"Reserve a static ip-address based on the mac-address of the Raspberry Pi on the Orbi. Choose an address that falls within the dhcp-range of the Orbi.

Reboot the Raspberry Pi.

Configure the new static ip-address of the Raspberry Pi as dns-server in the Orbi.",pihole,1651431873.0
605,comment,1,i75rr8t,,I have the same setup. I'm now using Pihole for DHCP as my internet wouldn't connect when I selected Pihole DNS within Orbi. Not sure what was wrong as I have had it working in the past. Prefer it this way though as I can see the client list and the IPs blocked so would make troubleshooting easier.,pihole,1651586093.0
606,comment,1,i6xzewy,,Thank you!,pihole,1651435227.0
607,comment,1,i75u5nz,,"I might have to do this. 

I finally got it working last night, using the instructions from the first comment, and this morning, nothing is filtering and I’m getting errors. So I think I’m going to have to use pi-hole for DHCP. 

Do you  you remember if you had to use Orbi R50 specific instructions?",pihole,1651587120.0
608,comment,1,i76j4hk,,Nothing specific.  I’ve got pihole connected via Ethernet. Reserved pihole IP in the orbi. Set dns to the IP address of the pihole turned off dhcp in orbi and turned it on in the gui of pihole. Was really easy all my devices reconnected fine and it’s all good. Had a small issue with my plex on a TV but fixed it. Was an issue with  dns binding. Didn’t understand a word of the issue but added a line to the pihole configuration and it works fine.,pihole,1651596951.0
609,post,2,ug60xx,not giving name raspberrypi.lan to the DHCP lease of 192.168.100.220 because the name exists in /etc/hosts with address 127.0.1.1,"I keep getting this error, also the pihole web interface says it blocked 12.5% out of 640 queries. Is that normal? Sorry if this is basic stuff, I'm very new to this.",pihole,1651429507.0
610,comment,3,i6xua0p,,"You probably have another RPi in your network, which also uses the hostname ""raspberrypi""?!  Change the hostname of one of these devices.",pihole,1651433011.0
611,comment,1,i6zgg0a,,"Nope, that's not the case. I did reset pihole and I think that caused it, do you think that's the problem?",pihole,1651460691.0
612,comment,1,i6zhbqf,,"Could be possible, when the DHCP lease is still active and your Pi got a new IP for some reason?",pihole,1651461186.0
613,comment,1,i6zhsab,,"I disabled the DHCP function on the router and made the pi do it instead as I couldn't get pihole to work, once I tried doing that it seemed to start working. I also added the pi's ip address to static ip on my router as well. Is there something I'm missing?",pihole,1651461449.0
614,comment,1,i7000dq,,nevermind I edited the etc/hosts file on the pi and changed it's ip of [127.0.1.1](https://127.0.1.1) to [192.168.100.220](https://192.168.100.220) and I think it worked so far...It hasn't given me any errors.,pihole,1651473879.0
615,post,0,ug5k48,Moving routers,"I have multiple things setup on my pi (wireguard vpn, pihole, homebridge, unbound dns) and want to move it from one router to another router and it will be a different internet connection and so have a different private ip - is there any way to move over and keep everything I’ve already setup and just change some configs or am I going to have setup the vpns etc from scratch?",pihole,1651428209.0
616,comment,1,i6xjiej,,Don't know about wireguard VPN. In the new router; you'll have to make sure you point the DNS field to your PiHole IP device in the new router. Homebridge should work automatically via DHCP.,pihole,1651428375.0
617,comment,1,i6xsuzc,,"Just moved and when I moved I kept my same router until my ISP came in and added a new line. When the new router arrived, I simply added the same IP to the internal IP & then I had to reinstall PIVPN to allow proper connections back to the home network! 

Only took a few minutes to get done!",pihole,1651432417.0
618,post,0,ug58ci,PiHole takes several minutes it to work properly after start (docker),"Running pihole in a docker container hosted on unraid, my pihole takes several minutes to work properly for other devices. Both DNS resolution and the web ui barely work.

I've noticed that when it does load before it works properly, most domains end with "".lan"", as example, ""`play.googleapis.com.lan`"" which I believe isn't normal?

If I open bash for the container, it works fine for itself.

After some minutes passed, it seems to start operating like expected.

DNSSEC and conditional forwarding are enabled

https://tricorder.pi-hole.net/r1f1lQE6/

My DHCP server (192.168.0.2) runs OpenWrt and the PiHole is properly set up as DHCP option.

If more info is needed, let me know. :)",pihole,1651427296.0
619,comment,1,i6xhkdv,,"I had a similar issue with proxmox and a container, but found out the issue was an IPv6 timeout.  Once I disabled that, it was back to its normal startup of less than 30 seconds.  Not sure if its the same, but thought it was worth mentioning.",pihole,1651427545.0
620,comment,1,i6xyfpd,,"Pihole in Docker on my Synology NAS starts up very quickly, but I have a fully working IPv6 setup and a second Pihole (on a Pi) which might help things. In other words, it's not expected behaviour for Docker installs to be slow.",pihole,1651434803.0
621,comment,1,i6xhwi8,,"IPv6 for it should be disabled, at least according to the variables, `IPv6: False`

E: So, UnRAID has community apps, which are premade templates, and IPv6 is set to ""False"" instead of ""false"", I'm not sure if that makes a difference",pihole,1651427688.0
622,post,72,ug3gmd,HBO Max ads are gone,"I didn't change any blocklists. We still see the black screen break where the ads are supposed to be. I'm not complaining, just weird. (Samsung The Frame tv)",pihole,1651422264.0
623,comment,32,i6xncfa,,Maybe a blocklist updated?,pihole,1651430045.0
624,comment,27,i6y6ag8,,Is there a free version or something? HBO max has never had ads for me.,pihole,1651438244.0
625,comment,4,i6z1tbx,,[deleted],pihole,1651453090.0
626,comment,6,i6xsd5g,,"What lists are you using?

Reread the message and it’s the default ones with the pi? Double checking",pihole,1651432200.0
627,comment,1,i6xod4d,,I noticed the same thing with freevee (formerly IMDBtv) and I'm loving it!,pihole,1651430484.0
628,comment,1,i6yj9ij,,Before I ever had pi-hole I would have some apps occasionally glitch out and just block ads for seemingly no reason. I think sometimes you just get lucky and pi-hole *might* not have anything do with it.,pihole,1651444052.0
629,comment,1,i718r73,,"Ah, thank you. I keep watching the log and not seeing anything but this is probably it.",pihole,1651503232.0
630,comment,9,i6y6wi8,,"yeah there are levels (to this shit, lol)",pihole,1651438516.0
631,comment,4,i6z1r60,,Yeah never seen any ads.,pihole,1651453059.0
632,comment,-2,i6zl3lj,,What did you just call me???,pihole,1651463378.0
633,comment,1,i6yndbw,,FreeVee has ads on my end,pihole,1651445936.0
634,comment,2,i733pw1,,"That does happen. A streaming provider I worked for had their ad insertion system break more than once. 

We’d be like, it’s sucks for us because advertisers will want their money back, but for viewers it’s nirvana since there were no ads.",pihole,1651530663.0
635,comment,2,i6z4spr,,There’s an ad version that’s cheaper,pihole,1651454594.0
636,comment,1,i6yphrq,,"Which block lists are you using?
 
We've been binging White Collar over the weekend and about 95%+ of the ads are just black screens. We do occasionally get one or two ads sneaking in, but the majority of them are not there.",pihole,1651446960.0
637,comment,1,i6yzuwu,,I am using just the normal ones you get on installing of Pihole. I never heard of any that work on IMDB or FreeVee,pihole,1651452110.0
638,comment,1,i6z272h,,"I am by no means an expert on the use of pihole with these kind of apps. I haven't actually used IMDbtv a few months, but I was pleasantly surprised to find the ads largely gone. Since that's the only kind of ad blocker I use I assume PiHole was responsible.",pihole,1651453282.0
639,comment,1,i6z3kpx,,"Well maybe it will start working for me soon. That would be great, there are some decent shows on there.",pihole,1651453983.0
640,comment,2,i6z3qwe,,"You could try to do an update on your PiHole, then an uninstall / reinstall of the app to clear any DNS entries it's using. In my case I'm using freevee on the fire stick (I'm not sure if that makes a difference).",pihole,1651454070.0
641,post,1,ug2nan,DNS Not Working,Pihole + unbound was working fine until I recently changed the router. After changing the usual settings all devices connect to pihole but do not have an internet connection. I tried using the other DNS servers v/s unbound to see if that helps with the issue but had no luck. Any help would be very much appreciated. Thank you,pihole,1651419980.0
642,comment,1,i6x1oeo,,Is your Pi doing DHCP? When you say no internet connection can the devices access 1.1.1.1 (for example)?,pihole,1651420737.0
643,comment,1,i71amhk,,"What happens when you run `dig google.com`?
You can check your current network config with `ip a` and `ip r` and show the currently used dns server with `cat /etc/resolv.conf`",pihole,1651504028.0
644,comment,1,i6x2423,,yes pihole is doing DHCP and there is no issue with that. Devices connect to pihole but not to 1.1.1.1 or any other website,pihole,1651420923.0
645,comment,1,i6x60fv,,Is it possible the router address in your pihole dhcp settings is not correct? Not the address of your new router? Also your new router must have dhcp disabled.,pihole,1651422590.0
646,comment,1,i6xdc4b,,verified that the router address is correct and that dhcp is disabled on the router side,pihole,1651425742.0
647,comment,2,i6xlof7,,Sounds like the issue is at the router. That the Pi etc. are good but traffic isn’t getting out. Some ISPs lock the router to the modem by MAC. Could that be going on here? Power cycling the modem may fix that.,pihole,1651429310.0
648,post,25,ug0gb1,Which raspberry pi should I use for a pihole?,Is the latest one recommended or is it okay to get a less powerful one?,pihole,1651413482.0
649,comment,30,i6wnphq,,My secondary runs in a pi zero. It'll run on any of them fine. Good luck finding any of them right now though if you don't already have one.,pihole,1651414335.0
650,comment,17,i6wqxtd,,I'm still running mine on a first-gen pi. Works great. lol,pihole,1651415900.0
651,comment,12,i6x8aiz,,"I’ve been using a $5 Pi Zero with a $5 micro USB to Ethernet adapter for over 5 years without any issues. It averages around 13% memory usage with 1,200,000 domains on the Adlists.",pihole,1651423563.0
652,comment,35,i6wm8iz,,"It doesn't matter. A Pi0 can run the app.

Many of us like one that comes with a LAN connector on the main board.",pihole,1651413597.0
653,comment,7,i6womb2,,Any Pi will do. I'm running an original Pi B and it doesn't break a sweat.,pihole,1651414783.0
654,comment,5,i6wosw8,,"Indeed, finding any pi board is like the lottery or extortion. Clearly an opportunity for The competition but I think they have the same issue with the chip supply.",pihole,1651414870.0
655,comment,4,i6wwrnu,,I have a Pi Zero W and it works fine. Updating is slow but that’s not very often so it’s not a big deal. I have an old computer that is running Ubuntu and I installed it on there. Haven’t actually set it all up yet but the computer doesn’t ever turn off or freeze up and the HDD I won’t have to worry about fucking up like a SD card can do. So basically whatever you can install PiHole on will work just fine.,pihole,1651418543.0
656,comment,4,i6wum84,,"Pi-Hole can run on a potato. Get whatever you find, I promise you there will be no discernable difference.",pihole,1651417577.0
657,comment,5,i6wylxy,,"i run 2 on pi zero W . connect to the router on the 2.4g wifi. have had no issues for last 2 + years ...

VNC into them if I need to make any changes / updates...",pihole,1651419375.0
658,comment,3,i6wrllb,,I run mine on an old pi 2 model b and it's absolutely fine.,pihole,1651416206.0
659,comment,3,i6wynhu,,"I run primary on 3B+ and secondary on Pi Zero 2W.

I would run both on Zero's, but I prefer to have at least one instance with wired connection for the pi-hole, and I rather run it without a HAT, so the 3B+ integrated ethernet is nice.

Of course the 3B+ is overkill for just pi-hole.  I also run some other containerized apps there (pihole-sync, traefik, restic, jackett, Heyu, HomeAssistant, and probably a few more!).",pihole,1651419394.0
660,comment,2,i6x1foy,,"I’m using a Zero 2 W, headless, and it’s perfect.",pihole,1651420630.0
661,comment,2,i6xdgz4,,"I use a plain old Zero with a hub and a usb LAN adapter but I’m moving it to one of these to tidy it up.

https://smile.amazon.com/gp/aw/d/B09MBBFM8Q

I’m the only user but the Pi0 is 99% idle.",pihole,1651425799.0
662,comment,2,i6xfim3,,"A RockPi S with 256 MB RAM and ethernet only (no BT and WIFI) sounds nice and needs less then 1 Watt! Under synthetic, ""non real world"" full load it still needs under 2 Watts!IMO the best choice if you only want to run Pihole, Unbound, Dropbear for SSH and maybe Lighttpd and PHP for the webinterface.  


And you actually can buy them, in contrast to the shortage of RPis. I found some on german ebay for around 25€/$.",pihole,1651426666.0
663,comment,2,i70ted3,,"I'm using a Raspberry Pi 3 B with also Plex Server, PiVPN, Unbound, Samba Server. Works flawlessly on top of DietPi.",pihole,1651496100.0
664,comment,1,i6wnjab,,basically anything but the newer ones have 64bit CPUs which makes installing certain software a lot easier.,pihole,1651414247.0
665,comment,1,i6ww0w4,,I'd suggest running it in Docker if you're able. No extra hardware required. I've even heard of people running it on a router running Merlin firmware.,pihole,1651418211.0
666,comment,-1,i6wvrel,,I'd buy the 4 or 8 gb Model B and play around with self hosting.,pihole,1651418093.0
667,comment,1,i6x0frn,,Can a pihole also run another docker container on the same pi? 🤔,pihole,1651420189.0
668,comment,1,i6x0h1m,,"Pi-hole is super light, it could probably run on a smartwatch or a ARM-based calculator with a little bit of work. Any Pi-hole will do",pihole,1651420204.0
669,comment,1,i6x1qoj,,I’m running it on raspberry pi 3b and honestly it a little over kill. But i feel like since it has ethernet it more relabel and faster. But thats might be just me.,pihole,1651420764.0
670,comment,1,i6xal8l,,I use a Pi Zero W with a mini usb to ethernet dongle. Also running unbound on it and it barely breaks a sweat unless I'm updating it. You can get fancy and use a POE hat with it if you want better cable management,pihole,1651424560.0
671,comment,1,i6xantg,,I run my primary and secondary on Pi Zero Ws.  I even have a Y cable that powers them from one battery backed up plug.  Also one runs Wireguard and the other OpenVPN.,pihole,1651424591.0
672,comment,1,i6xdh0m,,"I use a Zero2W, had it before on a ZeroW and additional on the Pi4/8gb. 
I want to PiHole to run as my wife kills me if our is one and that is not available. 
zero2W + Pi4 run it in Docker. 
BTW. zero2W is not so stable in the network. (2.4 GHz wifi) the Pi4 is Rock stable on 5GHZ",pihole,1651425799.0
673,comment,1,i6xdk1t,,"Running great on a Zero 2 W here. It was $10 at MicroCenter. 

Currently using it via wifi and haven't seen any sort of speed issue so I have not bothered to hook up the USB to ethernet adapter.

Extremely pleased with this little Pi.",pihole,1651425834.0
674,comment,1,i6xlugb,,"I’m running it in a LXC container with 128MB RAM and one core @1.5GHz and haven’t had any trouble.

You can run in on a potato if you want to.",pihole,1651429382.0
675,comment,1,i6xoe2e,,I run my pihole + unbound on 2.,pihole,1651430496.0
676,comment,1,i6xoick,,"using a pi3b as pihole + unbound for years, and 3 cores crunching for BOINC, so they see some use :)",pihole,1651430547.0
677,comment,1,i6y07ba,,Been running a pi zero w with a micro USB Ethernet connector and have had no issues I do plan on upgrading for further projects,pihole,1651435566.0
678,comment,1,i6y8ude,,I am running all of mine on 3bs. They work well. Just don't skimp on the sd card,pihole,1651439347.0
679,comment,1,i6y9boy,,"Any Pi will work just fine, I ran it on both a first generation Pi and Pi Zero.",pihole,1651439560.0
680,comment,1,i6ycvk5,,Any Pi - it takes such a tiny amount of power and RAM that you can run it even on a pi zero,pihole,1651441144.0
681,comment,1,i6yhe26,,I use a pi0,pihole,1651443191.0
682,comment,1,i6yhngh,,Any of them,pihole,1651443312.0
683,comment,1,i6yin7u,,i run it on a 3b+ with homebridge as well,pihole,1651443768.0
684,comment,1,i6ytmx8,,I use a zero w,pihole,1651448987.0
685,comment,1,i6yx4v0,,Whatever pi you can actually find in stock right now,pihole,1651450735.0
686,comment,1,i6z4hkx,,I’ve been using a pi zero original with a 128gb class10 card and it’s been operating fine for about 2 years so far,pihole,1651454440.0
687,comment,1,i6zgurp,,Less powerful will likely still be too powerful,pihole,1651460917.0
688,comment,1,i6zi3fn,,"I have a pi2 as the main, pi B as secondary - because they were from old projects. No noticeable difference between them on a home network with about 50 devices.",pihole,1651461623.0
689,comment,1,i6zrf5v,,"Use a 3B for it, it is nice to have a LAN port",pihole,1651467402.0
690,comment,1,i700jb6,,"Anyway, I tried with the pi 3b and the pi4 and it is kif kif.",pihole,1651474310.0
691,comment,1,i704lxm,,If you plan on running a whole network like more than 10 devices i would suggest pi 3 and above. Otherwise the loading time would be terrible. If you are planning to use a single device then using a better pi will let you add millions of domains in the adlist and blacklist,pihole,1651477765.0
692,comment,1,i704ss3,,It’ll run in absolutely anything. Mine runs on an LXC container with 256MB of RAM and half a CPU core and is like 90% idle all the time.,pihole,1651477930.0
693,comment,1,i707uh5,,One with an Ethernet port would make sense. You may start with Pihole but having room to expand for the next however many years might serve you well. Plus even the 4B is cheap.,pihole,1651480649.0
694,comment,1,i7086wc,,"I run it on a Pi 1 b+, in a docker container. Just because it's possible.",pihole,1651480968.0
695,comment,1,i710ggq,,"Just set one up and had trouble finding an actual raspberry pi, so I went with an orange pi zero 2...",pihole,1651499571.0
696,comment,1,i712qoq,,"My Raspberry Pi Zero W (one) uses an Ethernet adapter and runs :  
- PiHole with DHCP handling  
- Two openVPN instances with PiVPN  
- A ddns updater  
- Unbound (recursive) and stubby (DoT) as two ""special-cases"" resolvers with Unbound open to my LAN  

It serves an half-dozen devices and never had performance issues over a few months. So a ""mere"" Pihole install will clearly be fine with a Raspberry Zero (as long you don't mind having to do everything over SSH : the Zero uses microUSB and miniHDMI which requires adapters)  

> Is the latest one recommended or is it okay to get a less powerful one?  

Technically, the latest Raspberry Pi *is* ""the less powerful one"".  
The RPi Zero 2 is their latest product, the more powerful one is Raspberry Pi 4.  
*Nitpick : more power may not even be a good thing. The more powerful your RPi runs, the more important cooling gets.*",pihole,1651500610.0
697,comment,1,i71fm4u,,"I have a pi model B rev 1.2 running pi-hole and I added a ds3231 RTC + GPS module, brought the PPS from the GPS to a gpio on the pi and tapped the 5v to power a small fan. 

The GPS is feeding chrony the PPS and date time. The RTC is synced so my boot timestamps are good.
Pi-hole is obviously my dns but is also dhcp server and configured to serve the ntp server address of it's self.

Tldr - any pi with wifi or ethernet will work.",pihole,1651506103.0
698,comment,3,i6y437e,,Same here. Original Pi B running with no problems,pihole,1651437270.0
699,comment,7,i6xhmhu,,"I got a more powerful one with a Ethernet port because I wanted to play with other projects.

It's total overkill.",pihole,1651427569.0
700,comment,1,i6x1ksi,,Agreed. I just SSH in when I need to do something.,pihole,1651420693.0
701,comment,3,i6wzvlw,,Me too.,pihole,1651419940.0
702,comment,1,i6xafn9,,"I do that too. Still overkill, but the overall package is just so convenient.",pihole,1651424493.0
703,comment,2,i6x1pkh,,I have a micro USB to Ethernet connection on my Zero 2 W.,pihole,1651420751.0
704,comment,1,i6yrpk9,,"I have a 4B only with pihole. It is constantly running kind of hot (60-65 C) if the fan is off.

I'd like to run other things alongside it, but given that the pihole alone is heating it up to that point, I don't know.",pihole,1651448038.0
705,comment,1,i6xt8er,,How much power usage does this add to the pi? Can it save power compared to use wi-fi?,pihole,1651432573.0
706,comment,1,i6ydtpe,,"I thought about getting a pi zero 2 with a ethernet hat but the RockPi S sounds really interesting.

Which OS do you use? Would you rather get the one with 512mb to RAM or do you think 256mb is completely fine? Did you had to compile the programs from source or are compiled readily available in public repositories?",pihole,1651441573.0
707,comment,2,i711z40,,Second RPi 3B using DietPi,pihole,1651500262.0
708,comment,3,i6wsq0z,,Wait are you saying get any except the new ones or saying the news ones are good lol,pihole,1651416721.0
709,comment,5,i6xcvko,,"A gen 4 is way overkill for running pihole, and debugging self-hosting is going to be a pain if DNS breaks. I would recommend separate systems in this case.",pihole,1651425549.0
710,comment,1,i6x195r,,"I also run some other containerized apps there (pihole-sync, traefik, restic, jackett, Heyu, HomeAssistant, Node-Red, and probably a few more!).",pihole,1651420549.0
711,comment,1,i6xbrdf,,"Pihole doesn't run dockers, it's a DNS server. But yes, you can run pihole and additional dockers on the same Pi (in the same OS). However in this case I'd suggest just using plain Raspbian and running both pihole and the other container as containers.",pihole,1651425065.0
712,comment,1,i710pe1,,Yeah I'm having trouble right now... I'm keeping an eye on the stocks it seems to disappear very quick,pihole,1651499686.0
713,comment,1,i6xhaay,,"I had one that I wasn't using for anything else so when I wanted a pi-hole, that's what I used.",pihole,1651427424.0
714,comment,1,i6x2pdj,,"Could you provide brand / model reference?

This could be interesting as I am already using POE with a power/ethernet splitter to power the Pi0, so I already have the cable sitting there.  This may be a good solution if not more expensive than the Pi0 itself!  :)",pihole,1651421180.0
715,comment,1,i6yslxw,,"How hot does it run without pi-hole?  65C is a little  high maybe, but depends on ambient temperature and heat sink (if any) you are using.

I would check it without pi-hole running.  if you have a problem, I don't think pi-hole is causing it.  

Mine are fanless with passive cooling only (case is the heat sink) and I rarely see them go above 52-53 C.  They are in a climate controled environment, about 25-26C.",pihole,1651448477.0
716,comment,1,i70tnn9,,Install a different OS like DietPi: my Raspberry Pi 3 B runs constantly at 55.0 °C without any fan and the ram (1gb) is constantly less then 50% used. DietPi uses RamLog to avoid stress on the SD and with a very low CPU and RAM consumption.,pihole,1651496233.0
717,comment,2,i6yevet,,"my pi0/usb hub/lan adapter running pihole is about 280ma and a pi0w doing nothing but hosting a login session via wifi is about 120ma. A 0w may be better power-wise but I don’t have pihole loaded on my 0w to say for sure.

I haven’t switched over to the new case and lan interface yet but given that it’s the same number of USB ports and a similar wired-ethernet interface I expect it to stay at about 250ma.",pihole,1651442052.0
718,comment,2,i77ijus,,"The answer is that pihole on the zero with the combined usb + ethernet adapter uses 220ma vs 280ma for the 4yo Startech usb lan adapter I was using.

I still can’t say how much the pi0w uses in a real comparison because my pihole image doesn’t have wifi enabled nor have the AP password (so I can’t test it). I’m going out on a limb and say less than either of these wired ethernet solutions: probably less than 50 ma less - not enough to be worth the trouble. I live offgrid entirely on solar and batteries so I pay attention to power but this is too close to bother reducing. Besides, I want a wired connection for my pihole.",pihole,1651611486.0
719,comment,2,i6yltta,,"I don't own a Rock Pi S, but this thread made me think about to move from the RPi3 to another device. I'm not sure if I will do this, bc the RPi 3 draws around 2 to 3 watts,  which is ruffly around 13€ elictricy costs per year. (I calculated worst case scenario with 3 watts and 50cents per kilowatt hour). And when I buy the rockpi s with a cheapo case and an extra power supply I'm around 40€.  


But when I would run it on a RockPi S, I would use the [Dietpi image](https://dietpi.com/#download), which uses Debian as foundation.  
I use DietPi on the RPi 3b+ and run unbound, PiHole (with webinterface),PiVPN (wireguard), samba server and dropbear SSH server on it and it needs around 170MB of memory, so the 256 model should be fine for this purpose.",pihole,1651445204.0
720,comment,1,i6wv0ni,,older models like the `zero w` run 32bit CPUs which are slowly being phased out so developers are not bothering to compile their software for them.,pihole,1651417756.0
721,comment,1,i6x37e5,,Oh wow thank you! HomeAssistant is another I’d run too…I need to get a pi. Thank you!,pihole,1651421396.0
722,comment,3,i6x3axn,,"[This.](https://www.amazon.com/gp/aw/d/B01AT4C3KQ?psc=1&ref=ppx_pop_mob_b_asin_title)

This is plugged into one connector, and then into a switch connected to my gateway, and the power supply into the other.",pihole,1651421438.0
723,comment,1,i6yttzp,,"No idea how it runs without pihole. I also use my pihole as my network's DHCP server, so it is never off.",pihole,1651449085.0
724,comment,6,i6wzcjw,,"Not wanting to be that guy… but you’ll be hard pressed to find many developers in the pi world who are only developing for 64 bit.

Sure… someday… but that isn’t today.",pihole,1651419704.0
725,comment,1,i6xjq2f,,"If you run HomeAssistant, then I suggest you invest in a SSD .  You can find a lot of comments all over the place about this, but I have had not good luck due to the large number of writes to SD cards by HA for logging. 

Again, you can find tons of stuff on this, ways to get around it (RAM disks etc).  I have just always found it easier, and less risky to just get a $15-20 SSD drive (you don't need a huge one, 128 is fine, even 64 if you can find one) and boot the Pi from that.",pihole,1651428468.0
726,comment,1,i6xf4pv,,"How much power does it draw? USB to Ethernet problaly introduces higher power usage? Does turning off WiFi save enough/more power?

I'm thinking about the same solution but was unsure because it's not useful to me if power usage becomes to high. My old atom netbook runs around 7-14 watt with low load.",pihole,1651426503.0
727,comment,3,i6x08wq,,"i was trying to keep it simple for OP but it's also dealing with 3 different instruction sets:  ARMv6 -> ARMv7 -> ARMv8 

ARMv6 is not receiving as much love as it once did.",pihole,1651420105.0
728,comment,3,i6xhb82,,No idea. It works. It doesn’t get above 42 C. I’m happy.,pihole,1651427435.0
729,post,38,ufz754,"Pihole works and blocks across the network, but the dashboard is only accessible from the host RPi","I've noticed a strange issue. Although everything starts out fine, after about a day that it's been running, I cannot reach the dashboard from my phone's browser, the request times out. However, requests are getting blocked, and the dashboard is accessible from the host RPi. 

Note that I use the IP address to access the dashboard. The IP address is correct and I don't see any obvious issues.

Any ideas why it's not working?",pihole,1651409328.0
730,comment,14,i6werti,,Could it be possible that you have firewall rule that’s causing the issue? You must have dns port open and accessible to local network but not default port 80?,pihole,1651409480.0
731,comment,5,i6wi3jo,,"Might be a local FW rule, can you SSH to it from your phone via termius or similar?",pihole,1651411393.0
732,comment,3,i6wjk7b,,"you can check if it's listening on only localhost / 127.0.0.1:

    $ sudo ss -netulpn
    Netid   State    Recv-Q   Send-Q     Local Address:Port      Peer Address:Port  Process                                                                                                             
    udp     UNCONN   0        0                0.0.0.0:53             0.0.0.0:*      users:((""docker-proxy"",pid=994,fd=4))                                                                                                                          
    tcp     LISTEN   0        4096             0.0.0.0:443            0.0.0.0:*      users:((""docker-proxy"",pid=795,fd=4)) ino:13502 sk:3001 cgroup:/system.slice/docker.service <->
    tcp     LISTEN   0        4096             0.0.0.0:80             0.0.0.0:*      users:((""docker-proxy"",pid=817,fd=4)) ino:11843 sk:3003 cgroup:/system.slice/docker.service <->
    tcp     LISTEN   0        4096             0.0.0.0:53             0.0.0.0:*      users:((""docker-proxy"",pid=980,fd=4)) ino:11113 sk:3005 cgroup:/system.slice/docker.service <->
    tcp     LISTEN   0        128              0.0.0.0:22             0.0.0.0:*      users:((""sshd"",pid=483,fd=3)) ino:10205 sk:3006 cgroup:/system.slice/ssh.service <->
    tcp     LISTEN   0        128                 [::]:22                [::]:*      users:((""sshd"",pid=483,fd=4)) ino:10207 sk:3007 cgroup:/system.slice/ssh.service v6only:1 <->",pihole,1651412198.0
733,comment,2,i6wteox,,Are you trying to access it via host name or IP?,pihole,1651417040.0
734,comment,1,i6wxfz2,,"In my experience (with far more than just pihole) whenever something on a network ""should"" be working, it's almost always because of the firewall when it isn't working. Check it.",pihole,1651418850.0
735,comment,1,i6x4828,,"Check firewall rule in pihole and if it’s enabled, open ports needed for http/https ports as needed.",pihole,1651421834.0
736,comment,1,i6xww8b,,"if it works and then it doesn't, is the web server crashing?",pihole,1651434139.0
737,comment,1,i6xydqc,,"I had the same issue after a recent update. 
Try uninstalling and then reinstalling lighttpd. 
> 

If your are on Ubuntu Server, try: 
```
sudo apt-get --reinstall install lighttpd
```


After that make sure that the service is running. 
```
sudo systemctl status lighttpd
```

If it's not, do: 
```
sudo service start lighttpd
```



If none of that works, try backing up the configuration and reinstalling pihole.",pihole,1651434778.0
738,post,1,ufw4r2,time setting - fire tv,"Ever since I implemented blocks on fire tv my time and date settings on device are out whack. 

Anyone know what amazon use for this service?",pihole,1651396686.0
739,comment,1,i6vzshx,,From memory it's several subdomains of `*.ntp-fireos.com`.,pihole,1651397821.0
740,comment,1,i6waoh5,,Thanks not blocking anything with NTP from query of logs,pihole,1651406824.0
741,post,4,ufvswp,Cloudflared installation on Pi Zero W,"I've decided to give Cloudflared a go having been using unbound but recently noticing my ISP is intercepting and filtering DNS queries.

I consulted the Pi-hole documentation but it mentions a specific installation method for Pi Zero W, which is what I'm using, however the file it refers to is not there any more (broken link).

Does anyone have a more recent guide and/or the file I need to install cloudflared over SSH on a Pi Zero W running on DietPi?

Thanks in advance.",pihole,1651395216.0
742,comment,2,i6vx22r,,">having been using unbound but recently noticing my ISP is intercepting and filtering DNS queries.

How have you come to this determination out of curiosity?",pihole,1651395351.0
743,comment,1,i6vyeq0,,"Adguard home, easy to install, easy to manage, supports DOH/DOT.",pihole,1651396575.0
744,comment,1,i6vysxa,,Cloudflared is not supported on the Pi Zero I believe,pihole,1651396926.0
745,comment,1,i6wc5ms,,https://dnsprivacy.org/dns_privacy_daemon_-_stubby,pihole,1651407822.0
746,comment,1,i6w2veh,,"I noticed some torrent APIs were blocked and I couldn't figure out how if I was using my own DNS.

When using unbound a DNS leak test shows my ISP as the DNS provider.

When using OpenDNS this is reflected in the leak test but the APIs in question are still inaccessible.

When using Cloudflare app or Cloudflare thorough wireguard the APIs in question are accessible.",pihole,1651400620.0
747,comment,4,i6w0kh9,,"No need for the full AGH stack. You can easily [run dnsproxy alongside or in front of Pi-hole](https://github.com/saint-lascivious/dnsproxy-config). It's surprisingly light.

Note: If you're wishing to use this with certification, on an Android device using Android Private DNS, you must ensure your certificate is generated using `certbot`'s `--preferred-chain ""ISRG Root X1""` flag.

Additional note: As well as DoHTTPS/DoTLS, `dnsproxy` also supports DNSCrypt and DoQUIC protocols.

Tertiary note (heh): all this repo really serves to do is provide a framework for running `dnsproxy` as a simple standalone service, with the addition of breaking its configuration down into manageable/obvious yaml chunks.",pihole,1651398526.0
748,comment,1,i6w6c0u,,I had started looking into this but seemed a bit daunting to set up initially.,pihole,1651403586.0
749,comment,1,i6w3pq4,,">When using unbound a DNS leak test shows my ISP as the DNS provider.

You sure it's not showing your public address, and your ISP's rDNS hostname? This would be perfectly expected behaviour.",pihole,1651401369.0
750,comment,1,i6w5w5n,,"I am not a developer but if I have understood this right, this is an additional service that encrypts DNS requests before they are sent to upstream provider set in pi-hole?",pihole,1651403225.0
751,comment,1,i6weo20,,"If you use Adguard Home instead of Pi-hole, then it becomes really simple since it’s built into the product.",pihole,1651409417.0
752,comment,1,i6wg4sp,,"Then use nextdns (cli), that is just more easier to use. BTW you can use cloudflare with unbound, you just set to forward in the config file. I can not offer you easier ways to solve this.",pihole,1651410281.0
753,comment,1,i6w5thh,,"I will double check that.

I think they're doing something as others have reported the same issue with this ISP (Sky) and I couldn't access certain sites that are accessible with the cloudflare app.",pihole,1651403166.0
754,comment,1,i6zuk0x,,"You could use this as a replacement for `cloudflared` and friends, for encrypted upstream from Pi-hole if you wanted.

And/or use it beside or in front of Pi-hole, so clients can pass encrypted queries to it, for it to pass on to Pi-hole (as plain DNS, because Pi-hole doesn't support any encryption standards, which is the whole problem in the first place really).",pihole,1651469628.0
755,comment,1,i6x24oj,,Might have to bite the bullet then. Thanks.,pihole,1651420930.0
756,comment,1,i6wivsv,,The problem I have per the original post is that the installation instructions for cloudflared for Pi Zero seem to be outdated.,pihole,1651411829.0
757,comment,1,i72dlru,,Thanks. That looks to be just what I'm looking for. I'm a bit of a simpleton and couldn't see how you actually configure it in those instructions.,pihole,1651519708.0
758,comment,1,i73khcf,,"The primary yaml file serves as functional documentation.

Full documentation can be found at AdGuard's [dnsproxy master repository](https://github.com/AdguardTeam/dnsproxy).",pihole,1651538248.0
759,comment,1,i7jbwzk,,"Thanks for your help on this.

I did some reading of the link you shared and the documentation.

In the end it inspired me to set up dnscrypt successfully, which appears very similar.",pihole,1651831895.0
760,post,2,ufvjqo,Troubleshooting a single computer not using pihole,"So after setting everything up and activating the dns through an ASUS 3100 router, all connections through pihole as confirmed through the query log. But I have one computer that does not show up. It's an iMac and I have in the network settings after seeing this, put the IP address of the pihole. But still no luck

When I'm in the interface, I go into tools, network, and see the IP address of the iMac in the list and see it there but shown greater than 24 hours ago.

Any tips and leads to troubleshoot this computer to use the pihole?",pihole,1651394062.0
761,comment,2,i6wbc1c,,"Do you have iCloud Private relay active on this Mac?
Check by going into System Preferences > Network and untick « Limit IP address tracking » on your home network connection",pihole,1651407276.0
762,comment,1,i6vypm6,,I would assume apple uses some private DNS over tls like ios does,pihole,1651396845.0
763,comment,0,i6vx4bo,,"Maybe the Mac uses IPv6 for querying DNS, which usually points to the router if not cared about. Try deactivate v6 for testing in the Mac network settings.",pihole,1651395410.0
764,comment,1,i6vymzc,,"So from MacOS side, no option to turn off or disable.

From router side, it's disabled globally.",pihole,1651396783.0
765,comment,1,i6w0ywr,,"Ok, then the router shouldn‘t answer DNS queries on v6. 

When you open the Mac‘s network settings can you confirm that there is just the Pihole‘s IP as DNS and no secondary?",pihole,1651398891.0
766,post,1,ufsf6a,"""Disable for x Seconds"" web interface command forwarded to the remote host.","Hi all, I was wondering if there was a way to achive this with a redundant pi-hole setup.

When using the ""Disable for x Seconds"" button from the web interface of the primary Server, it would be nice if this command could be forwarded to the remote host. 

This may require running some sort of listening service on either end, or maybe it would be possible to forward the javascript command to the remote host?

Partner frequently uses this button when online shopping and actually needs to visit a site that is being blocked etc.

Is this something that could be achieved with a simple script or modification to the front end?",pihole,1651380945.0
767,comment,1,i6vfdnh,,disclosure: minimal knowledge of web development / javascript.,pihole,1651381003.0
768,comment,2,i6vgky5,,I use [this](https://www.reddit.com/r/pihole/comments/kdoidv/enabledisable_pihole_from_the_command_line/ggcpno2/?utm_source=share&utm_medium=ios_app&utm_name=iossmf&context=3),pihole,1651381862.0
769,comment,1,i6vhak4,,"Ah thats an awesome solution.  
I can just make 2 disable buttons for my homer dashboard so I don't even need to open up the Pi-Hole Interface",pihole,1651382382.0
770,post,0,ufq9lj,Stupid question time: Can I force the Web UI to use human-friendly names?,"I entered all my devices as known entries in Group Management -> Clients, [but I could only choose/comment via the device's MAC addresses](https://i.imgur.com/xiNKWvQ.png). However, [all the graphs show the devices' IPs](https://i.imgur.com/JjaCbXh.png), and frankly I don't have them all memorized.

Is there any way that the graphs on the Web homepage, the query log, etc. could use readable hostnames/assigned comment instead of the IP?",pihole,1651372893.0
771,comment,6,i6v34zd,,"Use pihole as the DHCP server

Use conditional forwarding

Both would work to do what you want.",pihole,1651373289.0
772,comment,1,i6voc8l,,"You can use in pihole:
Local DNS/DNS Record.
After that when You chosing client to add to group, IP have hostname in bracket.
192.168.1.123 ( hostname: my_printer)",pihole,1651387868.0
773,comment,1,i6vtgsm,,"This is only going to work reliably if every device is statically addressed, or has otherwise unwaveringly solid lease behaviour, which is somewhat unlikely in an average home network. Otherwise you'll need to constantly maintain the address/hostname relationship.

Incidentally, your example hostname isn't RFC882 compliant (the underscore). A record can contain an underscore, but a hostname should not.",pihole,1651392209.0
774,comment,1,i6wr9qn,,The hostname in pihole is a comment rather than the actual hostname.,pihole,1651416055.0
775,post,0,ufpstw,How does Pihole know which IP is pi.hole redirects to?,"I am just curious about the config file in which is defined where pi.hole domain points to. If anyone knows, please share. I couldn’t find it in any of the Pihole conf files.",pihole,1651371232.0
776,comment,4,i6v3p07,,https://docs.pi-hole.net/ftldns/configfile/#pihole_ptr,pihole,1651373605.0
777,comment,1,i6w9pl1,,"Although this link is very helpful for me for different reason, it still doesn’t specify where the actual connection between pi.hole local dns record and IP it corresponds to is specified in existing setup. Maybe I am missing something. My Pihole-FTCH.conf does not  have LOCAL_IPV4= parameter specified yet pi.hole still resolves to ip of my pihole.",pihole,1651406155.0
778,comment,1,i7304k7,,"It does specifically answer your question.

PIHOLE_PTR=PI.HOLE|HOSTNAME|HOSTNAMEFQDN|NONE

That is the setting that's controlling it.

What don't you understand about it?",pihole,1651529055.0
779,comment,1,i734si4,,"No need to be condescending. Not everyone is a genius that you may be. We are all learning here. If we knew everything, we wouldn’t be here asking questions. None the less, thanks for the reply and pointing out actual setting strings. I will look further into it.",pihole,1651531149.0
780,comment,1,i7360xo,,"Wasn't being condescending at all, I just pointed out you totally missed it and focused on something else.",pihole,1651531709.0
781,post,0,ufp8wu,Is it safe to use Pi-hole in a public VPS?,There are public VPS that you can rent for about $5 a month. Is it safe to install Pi-hole in one of them to access it from anywhere?,pihole,1651369322.0
782,comment,12,i6v5ptq,,Another approach is to keep the pi-hole securely on your home network and install pivpn so that your portable devices can VPN back to you’re home network when on the go.,pihole,1651374794.0
783,comment,4,i6uwjvw,,"If secured behind a VPN, yes.

Pi-hole's interface is not intended to be public facing and you'll very likely lose control of it in fairly short fashion if all that's standing between yourself and anyone else accessing it is the webpassword.",pihole,1651369647.0
784,comment,1,i70e8zw,,"Going forward from your helpful comments & advices, my question is how to create a secured VPS ""setup""? 

is pihole + pivpn (wireguard or OpenVPN in that case?) is enough for a VPS?

is there anything else i should consider beforehand? 

  
My main use for the pihole is blocking on-the-go (mostly over cellular), and my home network speed is trash (\~40/5 mbps)  
i currently run a pihole + openvpn on my pi (locally at home) with a forwarded port for the VPN anda static ip (that costs like a vps..), but i fell more vulnerable this way and the speed is again, trash...

\*DDNS is not an option in my region because all ISPs around here uses CGNAT...",pihole,1651486230.0
785,comment,1,i6vhe2e,,"This is the most desirable and fool proof approach in my opinion, yeah.

If configured as a split tunnel VPN, it's also extremely efficient and has very little overhead, and you don't suffer the same limitations of your maximum download speed being exactly half of what your home network's maximum upspeed is as you would with a full tunnel VPN (you can easily run both if you need full remote access to your network).",pihole,1651382449.0
786,comment,1,i6wmtss,,Wireguard is a great alternative also! Allows split-tunnel if needed! Mine runs in a docker-container on my HomeAssistant.,pihole,1651413893.0
787,comment,2,i6uwszc,,Thanks for your reply. What if you close all ports and only leave port 53 open for DNS?,pihole,1651369784.0
788,comment,1,i6uwpui,,If they only allow their home public IP it should be ok? Just gotta keep that in mind if it ever changes.,pihole,1651369738.0
789,comment,2,i72jon7,,"I had a similar issue where the speed of PiVPN (Wireguard) on cellular data was limited by the upload speed of my home ISP, which was especially noticable when connected to my own WiFi (my VPN is set to 'Always On' on my phone) where my phone would get 30Mbps download, but a PC on the same network was getting 940Mbps. The solution was to configure Wireguard to be a 'split tunnel' VPN so on the DNS requests from my phone went back to my home network and PiHole, whilst everything else loaded over cellular data.",pihole,1651522145.0
790,comment,1,i6x3tct,,"PiVPN is a tool that installs WireGuard and makes configuration easier, so it kinda is installing WireGuard",pihole,1651421658.0
791,comment,8,i6uxbzr,,"Then you've created a public resolver, and it'll be found, and abused to shit out low effort high yield reflection style attacks (like malformed/absurdly large RRs, ANY requests (usually for the aforementioned), etc.) and you're just adding more fuel to the global DDOS fire.",pihole,1651370077.0
792,comment,3,i6uxlt8,,"I'm assuming they're wanting it for mobile access, in which the odds of having a single unique address are quite unlikely. It'll almost certainly be behind CGNAT. My ISP provides static IP4/6 for mobile devices at request but they're very much the exception to the rule in my locality.",pihole,1651370229.0
793,comment,1,i6uzjps,,I see. Thank you for the information.,pihole,1651371297.0
794,comment,2,i6v17h8,,"No worries. None of this is necessarily obvious. It's all quite the learning journey.

Poorly configured public resolvers are attractive targets for abuse through how easily network traffic can be amplified. Sending one 50~100b query, and getting a potentially ~4096k reply is a rather significant amplification. Stack those replies up, across multiple open resolvers, pointed against a single target, and it is easy to see how multi-GB+ floods can happen with relatively small outgoing bandwidth costs for the attacker.

Blocking/progressive jitter/etc. via heuristics or RR type is outside of Pi-hole's wheelhouse.",pihole,1651372197.0
795,post,3,ufo0mz,Debian Buster with Raspberry Pi Desktop,"I have a PC running Debian Buster with Raspberry Pi Desktop running Pi-Hole and from testing, PI-Hole won't work with the Firewalla Family Filter enabled. Is there a way around this?",pihole,1651365124.0
796,comment,1,i6uw5ky,,Set Pi-hole as your default DNS server instead of Firewalla.,pihole,1651369429.0
797,post,10,ufmcw9,Trouble after updating to FTL 5.15,"Updated Pihole, FTL, and Web Interface last night, and now it appears that the DNS on the RPi is not responding or running. Trying to reach ""pi.hole/admin"" does not work, but works fine if I use the IP address. Using nslookup from another computer on the network doesn't work. Trying to set my router to use my RPi as a DNS fails. I've uninstalled and reinstalled, and used the repair feature as well. I've uploaded the [debug log](https://tricorder.pi-hole.net/7mEo3O7N/) to tricorder. Anyone with any ideas, I'd appreciate them.",pihole,1651359897.0
798,comment,4,i6uqwev,,"Go to settings - DNS - change to Respond only on interface. 

Does it work now?",pihole,1651366598.0
799,comment,1,i6uj1lo,,Reboot pi,pihole,1651362454.0
800,comment,1,i6utf9j,,"Why, yes, that does seem to have solved the problem! Is that a new setting in the update? Thank you!",pihole,1651367949.0
801,comment,1,i6unn43,,"Thanks, I did that multiple times, and once more on your suggestion, but still no good.",pihole,1651364857.0
802,comment,1,i6v41uf,,"Was the prior installation particularly old? Or did you just update from the prior release version to the current?

This behaviour/wording/settings flow did change slightly, but off the top of my head that was quite a while ago.",pihole,1651373813.0
803,comment,-1,i6uqlh3,,"http://pi.hole/admin/

You forget the end slash?",pihole,1651366433.0
804,comment,1,i6xq3tn,,"Not particularly old, maybe a month or two. Anyway it seems to have solved the problem.",pihole,1651431223.0
805,comment,1,i6v5os0,,"A training slash isn't required, and will be stripped at the destination anyway.

The reality is there's just no single consistent behaviour for how various browser search bars/omnibars work with their prediction.

[Here](https://imgur.com/a/GZykGgt) is a small album of three images showing how Chrome (Chromium behaves the same way - let's just say libchromium) operates.

In the first image, you can see it's not quite absolutely certain that `raspberrypi-primary/admin` is a valid domain/url. The first options it suggests in the omnibar are related searches - but note that the option to select it as a domain/url is present below this. You can see the difference between the hourglass icon for searches, and the globe icon for domain/url.

In the second image with `raspberrypi-primary/admin/`, it's significantly more confident about my intention, and domain/url is presented as the first option with related searches below it.

In the third image, with `https://raspberrypi-primary/admin` it knows with absolute certainty my intention due to the protocol prefix.",pihole,1651374778.0
806,post,11,uflft8,Ssh keys + fail2ban,"I have some questions:
1. I have setup ssh to not allow passwords and only allow ssh keys - is it possible to be hacked with ssh keys being the only way in? As I’ve heard it’s impossible to brute force an ssh key… 
2. I setup fail2ban previously (when I used passwords with ssh) to ban IP’s that tried more than three times, now that I have only ssh keys enabled - if it IS necessary to still use fail2ban does anyone know what the config would be to put in my fail2ban jail config file for blocking ssh key login attempts (rather than ssh password login attempts as I think it’s set to now)",pihole,1651357003.0
807,comment,9,i6upjqp,,"fail2ban is still useful because it can still blacklist IPs hammering your server on your SSH port even if you're using a key instead of a password to login.

I'm using a 4096-RSA key with password login disabled on all my machines with SSH exposed to the web and fail2ban still intercepts and blacklists many IPs trying to SSH into them, mainly from China and Russia.

Another good practice is to avoid using the default port 22 and use something else

Finally, a great (and more robust) solution than fail2ban would be to use CrowdSec. I'm in the process of converting my servers from fail2ban to CrowdSec and it's pretty awesome so far, have a look

https://crowdsec.net/",pihole,1651365870.0
808,comment,1,i6u9kg6,,"I currently run passwordless ssh, from my understanding, don't need fail2ban, just make 100% sure you did disable ssh access via password, try from another machine that doesn't have the keys, it should not give the option to enter a password",pihole,1651357676.0
809,comment,-3,i6uf244,,"it's technically possible to brute force an ssh key but it's not cost effective. just rotate every year and use a strong passphrase on the private key in case one of your backups ends up in the wrong hands.
 
&nbsp;

as for fail2ban with passwordless auth, it's just complicating things for little to no benefit. every ip address on the internet is going to get port scanned and as soon as these bots see that password auth is disabled, they'll move on.",pihole,1651360424.0
810,comment,1,i6ufp6f,,"In this case I would put up a service like `endlessh` to throw those script kiddies in a deep dark hole.

I would also say do not open port 22 to the internet, just use a vpn.",pihole,1651360754.0
811,comment,1,i6uqafy,,"Consider adding [secondary or even tertiary authentication](https://www.linode.com/docs/guides/how-to-use-one-time-passwords-for-two-factor-authentication-with-ssh-on-debian/) to your SSH auth flow.

Realistically I could post up my keypair and passphrase publicly and still be fine. You'd need to get through the VPN first anyway, which is a much safer option than allowing external SSH directly.",pihole,1651366268.0
812,comment,4,i6ui2mp,,"> I would also say do not open port 22 to the internet, just use a vpn.

ssh is secure, just stay on top of your updates.",pihole,1651361958.0
813,comment,2,i6uwop4,,Never heard about endlessh before and learned something tonight. Thanks!,pihole,1651369720.0
814,comment,1,i6un1py,,"You can definitely open a port different from 22 for ssh. Mine is somewhere in the 10000-65000 range. Setting up and whitelisting a VPN is better, but more complex and requires more maintenance.",pihole,1651364541.0
815,comment,1,i6uv1qr,,"[defense in depth](https://en.wikipedia.org/wiki/Defense_in_depth_\(computing\)) is a good idea but at the sametime, there's something to be said about [keeping it simple, stupid](https://en.wikipedia.org/wiki/KISS_principle). 
 
&nbsp;

for the newer self-hoster who is struggling to make sense of it all, disabling SSH password authentication and enabling password-less auth is an easy concept to wrap their heads around and will protect them against enumeration attacks.",pihole,1651368836.0
816,comment,1,i6vp92l,,"I’m not sure, but this might also be referred to as a honeypot.",pihole,1651388627.0
817,comment,1,i6uvzh4,,"If we're keeping it simple, I'd argue the simplest approach would be to just have all your remote access VPN driven and have the VPN as the sole point of external access.

At that point one needs to drop the ball quite fantastically already before unwanted SSH probes could ever be a concern.",pihole,1651369336.0
818,comment,4,i6v0drk,,"the problem with using a VPN as the only entry point is that you should really have out-of-band access to the server. wireguard might make that less of an issue but then you're having to bind SSH to select interfaces / write firewall rules blocking certain ports on certain interfaces. for a new comer, who's asking this question in a raspberry pi related sub, it might be a goal for them to work towards but kinda overkill to get them started.

&nbsp;

as for unwanted SSH probes, what does a random scan give an attacker?

    sudo nmap -sS -sV -p 22 11.22.33.44
    PORT   STATE SERVICE VERSION
    22/tcp open  ssh     OpenSSH 8.4p1 Debian 5 (protocol 2.0)
    Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

    ssh root@11.22.33.44
    11.22.33.44: Permission denied (publickey).

    ssh alice@11.22.33.44
    11.22.33.44: Permission denied (publickey).

    ssh bob@11.22.33.44
    11.22.33.44: Permission denied (publickey).

oh, it's running OpenSSH 8.4p1 on Debian, that's the latest version on bullseye, password auth is disabled, `PermitRootLogin` might be set to `no` and i still don't have a clue as to what username to login as. 

&nbsp;

just keep your systems up to date and pay attention to security related news. your random little server is not that interesting.",pihole,1651371745.0
819,post,5,ufj03k,[Question] Reducing DNS packet size for nameserver,"So I’ve had this issue in the past. But I always received the *reducing DNS packet size for nameserver 127.0.0.1 to 1280*.

I followed [this](https://discourse.pi-hole.net/t/dnsmasq-warn-reducing-dns-packet-size/51803) and set my conf to `edns-packet-max=1280` and it worked fine until the most recent update. 

Now after the most recent update, I’m receiving a similar message as before, but now it is: *reducing DNS packet size for nameserver 127.0.0.1 to 1232*

I used cloudflared as my upstream and I’m on the latest version of pihole. I went ahead and edited my conf file to 1232 instead of 1280, but I’m wondering why after all the time that I had it as 1280, it didn’t throw any errors until after the update?",pihole,1651349423.0
820,comment,3,i6v3wus,,The packet size is controlled by your local upstream server. That is what is reducing to 1232. Pi-hole is not doing this; it's telling you that it happened.,pihole,1651373733.0
821,comment,1,i6usj44,,"It didn’t start logging the alert until after the update. And it isn’t really an error, more of a notification. It was always doing this, you just were not seeing it on the dashboard.",pihole,1651367470.0
822,post,2,ufh7y2,Custom client name based on MAC Address,"Is there any way that I could set a custom name to my clients based on their mac address? Inside Group Management -> Clients, I wrote a comment with my network devices with their hostname but it's only a comment, and Pihole don't use it as client hostname.

I'm not using Pihole as DHCP server and I know that I would be a possibility",pihole,1651344019.0
823,comment,1,i6udoxd,,"You can do this if you connect the name to an IP, and you can certainly connect a MAC to a static IP. Either with reservations on your current DHCP server, or as you say use the pihole to do it. 
Either way, then use the local name table on the pihole to give you names. 

It adds a step, yes. But puts the name at the IP layer which is where it actually becomes useful.",pihole,1651359735.0
824,comment,1,i6ufvyx,,"If this is just on the local network: Enable mDNS (Avahi on Linux, it’s already enabled by default on Windows and macOS/iOS). Then you can connect to any machine by using *hostname.local*",pihole,1651360849.0
825,comment,1,i6uqevf,,"What is running your DHCP? Does it have useful names and/or can you set them? If so, you can (have PiHole) use that.",pihole,1651366334.0
826,comment,1,i6urugu,,"I have been running DHCP on Huawei AX3 Pro and it does have my network devices name, but even with it pihole can't get these names and uses only IP address",pihole,1651367102.0
827,comment,1,i6uusjy,,"Try going to the /admin panel of PiHole. Settings, DNS tab, scroll to the bottom. Check the box for “Use conditional forwarding”, enter your LAN which will be something like [192.168.0.0/16](https://192.168.0.0/16), the IP of your Huawei as the Router, and optionally an LAN name like “local”. Restart PiHole.  What this is doing is telling PiHole that if it sees an IP like 192.168.x.y then (that condition says) ask the Huawei to reverse look it up.",pihole,1651368697.0
828,post,50,ufh4xh,Use 2 URLs to connect to pihole,"Currently, I connect to my pihole using \[localhost\]/admin. Would it be possible to add another one like \[localhost\]/pihole or to create a redirect from that one to the default /admin?

Edit: u/krysus's answer is exactly what I was looking for. I also decided to host a webpage using apache with buttons linking to my various other webservers to control things like Home Assistant.",pihole,1651343778.0
829,comment,22,i6ts4h0,,"Create a symlink from /var/www/html/pihole to /var/www/html/admin.

Bear in mind there's already a pihole directory which needs renaming first.

SSH into your pi

    cd /var/www/html
    mv pihole pihole_old
    ln -s admin pihole

You might need to sudo all of the above depending on permissions on /var/www/html.",pihole,1651349145.0
830,comment,10,i6ul5fh,,"A simple reverse proxy (something like Caddy) would be useful in your case, because you could get a different URL (subdomain) for all your different services/WebUIs very easily and without adding complexity

Something like:

* pihole.yourdomain.com
* sonarr.yourdomain.com
* radarr.yourdomain.com
* tautulli.yourdomain.com
* qbittorrent.yourdomain.com
* homeassistant.yourdomain.com

etc.",pihole,1651363553.0
831,comment,4,i6uxah1,,"There are also things like Heimdall, made to provide a single point of entry to your network applications.",pihole,1651370053.0
832,comment,2,i6tsixs,,"I have nothing of value to add, I’m simply curious as to why you want to do this? What’s wrong with the current url?",pihole,1651349345.0
833,comment,1,i6tlygy,,"[Yes](https://doc.lighttpd.net/lighttpd2/mod_redirect.html) ... but it will require some small effort to configure, and any changes to lighttpd.conf will get tromped during pihole updates.",pihole,1651346153.0
834,comment,-6,i6thkxw,,"See ""Local DNS Records""",pihole,1651344106.0
835,comment,9,i6ttgnn,,"This is actually a great idea and the direct answer to my question. Thank you very much.

I decided to do that and create a simple webpage with buttons with links to my various webpages. I'll make an edit on the post with my solutions.",pihole,1651349805.0
836,comment,1,i6vvsj7,,Well that looks awesome. Thanks.,pihole,1651394221.0
837,comment,5,i6tsyt2,,"I have multiple webpages managed from my rpi (home assistant, portainer, etc.) and i thought having one with a simple name would be easier to manage. It's mostly out of curiosity.",pihole,1651349560.0
838,comment,6,i6tibps,,DNS doesn't handle the URL paths.,pihole,1651344448.0
839,comment,2,i6ti3i4,,"I have already tried and it says:

`Failure! Something went wrong, see output below:`  
`IP must be valid`

I try to set the ip address as [192.168.0.2/admin](https://192.168.0.2/admin) ([192.168.0.2](https://192.168.0.2) being the local ip of my pihole) and the domain as [192.168.0.2/pihole](https://192.168.0.2/pihole). Using \[localhost\] instead of the ip doesn't work either.",pihole,1651344346.0
840,comment,1,i6tt3pc,,"Thanks for taking the time to answer. Makes sense. Though a bookmark would also work just as well and you can name it however you like. 

Cheers!",pihole,1651349627.0
841,comment,-9,i6tm6nq,,So don't use paths,pihole,1651346261.0
842,comment,0,i6tlueo,,"Just set up 2 different domain redirects.

For example:

Domain 1: pihole1.home

Domain 2: pihole2.home

IP: whatever is your pihole ip.

&#x200B;

Now you can get in with both: pihole1.home/admin & pihole2.home/admin addresses.",pihole,1651346099.0
843,comment,1,i6tu79i,,I already had a bookmark but I like being able to connect from different computers on the network too. u/krysus posted a great answer.,pihole,1651350159.0
844,comment,7,i6tmn72,,The whole request from OP is to use a different path.,pihole,1651346479.0
845,comment,5,i6tvm3y,,Your edit made me think of how I could host a small web server with links to my various dockers across my NAS and rpi. Thank you for the inspiration,pihole,1651350851.0
846,comment,-15,i6tmx8q,,"Op doesn't know what he wants.

Setting up 2 domain names will work just fine.

Not sure why would anyone need this though.",pihole,1651346610.0
847,comment,2,i6tvsd4,,That's exactly what I did and it's very simple.,pihole,1651350934.0
848,comment,12,i6tnu95,,"No, *you* don't know what *OP* wants. Stop trying to be a smart ass.",pihole,1651347051.0
849,comment,4,i6ttt6o,,"I edited the post with my fix, and yes, I know what I want.",pihole,1651349971.0
850,comment,-8,i6u1e4y,,"My solution would achieve the same result with shorter and even more friendlier address name.

And I still don't see the point of this. Just use the default ""pi.hole"" address.",pihole,1651353666.0
851,comment,3,i6udl1l,,Read the post again. OP wants to redirect paths on the same host. They don't want to assign another hostname or DNS name to the host.,pihole,1651359681.0
852,post,2,uf7en1,Question: Upstream DNS Servers only ipv4?,I've just set up my pihole and noticed that in the upstream dns servers only the two ipv4 boxes are ticked (openDNS). Should i also tick and enable the ipv6 boxes or what difference do they make?,pihole,1651309870.0
853,comment,6,i6rtjmf,,If your Pi/Pihole has IPv6-connectivity to these servers nothing speaks against it. (Both protocols can be used to resolve A and AAAA queries.),pihole,1651311049.0
854,comment,1,i6ufd01,,"Doesn’t really make much difference.

Only situation when it would make a difference I can think of, is if your ISP would have an outage on IPv4 and not IPv6, but how often does that happen?",pihole,1651360581.0
855,comment,1,i6ru1af,,Alright thank you!,pihole,1651311493.0
856,post,21,uf5vx0,Advice for Pihole + nut (ups) lighttpd cgi-bin,"Hello community,

I never ask but I'm really ""desperate"" I can't find any guide online to help me configure the lighttpd.conf generated with pihole.

Basically I would like to enable the cgi-bin to be able to use lighttp both with pihole and to see the statistics pages of my ups with the NUT software.

I must be able to execute from the browser the cgi-bin requests that point to 

/usr/lib/cgi-bin/upsimage.cgi
/usr/lib/cgi-bin/upsset.cgi
/usr/lib/cgi-bin/upsstats.cgi

Kindly someone could help me maybe linking me a working lighttpd.conf for my case so I can use it and study?

thanks to all",pihole,1651302522.0
857,comment,3,i6rkkjl,,"Don't edit the lighttpd.conf directly. Your edits will be overwritten by Pi-hole updates.

Use external.conf instead.",pihole,1651302909.0
858,comment,2,i6t5cs9,,"I configured this awhile back but ended up turning off lightttp and used Apache web server for both pi-hole and NUT. I don’t remember details but I think you disable lighttp, install Apache, and then set pihole not to install lighttp updates.",pihole,1651338539.0
859,comment,2,i6vx00y,,"I solved with ""slackerian"" philosovia. :I have restored the original conf of lighttpd and then

sudo apt install nut-cgi -ysudo lighttpd-enable-mod cgi

sudo nano /etc/nut/hosts.conf and insert :MONITOR ups@localhost ""Local UPS""

sudo nano/etc/nut/upsset.conf and allow ""I\_HAVE\_SECURED\_MY\_CGI\_DIRECTORY""

sudo apt install nut-cgi -y sudo lighttpd-enable-mod cgi sudo service lighttpd force-reload

sudo nano /etc/lighttpd/conf-enabled/10-cgi.conf

&#x200B;

    server.modules += ( ""mod_cgi"" , ""mod_auth"" , ""mod_expire"" , ""mod_rewrite"" , ""mod_fastcgi"" , ""mod_setenv"" , ""mod_status""  )
    
    $HTTP[""url""] =~ ""^/cgi-bin/"" {
        	cgi.assign = ( """" => """" )
        	alias.url += ( ""/nut/cgi-bin"" => ""/usr/lib/cgi-bin/nut"" )
        	alias.url += ( ""/cgi-bin/nut"" => ""/usr/lib/cgi-bin/nut"" )
        	alias.url += ( ""/nut"" => ""/usr/share/nut/www"" )
    }

service lighttpd force-reload sudo systemctl restart lighttpd.service

&#x200B;

if you know a more elegant solution I would be happy to know, thanks",pihole,1651395299.0
860,comment,1,i6rl1wi,,"yes but how, could you give me an example or maybe tell me what exactly to write in it?   
thank you very much",pihole,1651303316.0
861,comment,1,i6t86xn,,"Thank you, I had initially installed apache to run just NUT but it seems to be a waste since pihole installs lighttp I wanted to use it for nut as well.  
Is it possible that no one in the world knows how to do it? I have searched all over the net but no one I say no one who posts a configuration file for pihole+nut cgi-bin.",pihole,1651339818.0
862,comment,1,i6u9yij,,"Pretty sure I used apache for my NUT server also, I just remember taking hours getting nut and the webserver running as it should",pihole,1651357871.0
863,comment,1,i6tv4la,,I just remember that with lighttp it was problematic to get the cgi support working that NUT requires but it was super easy to get the pihole to work with Apache.,pihole,1651350614.0
864,post,0,uf3y8g,Ublock Origin compared to Pihole with video ads?,"I understand that pihole can’t block YouTube ads, and if it does, it’s unreliable. I’ve wondered how ublock origin is able to achieve this without any issue? Don’t they work similarly where they block/don’t load domains on block lists?",pihole,1651294354.0
865,comment,4,i6rr8p9,,"Using both is a great solution, almost all ads gone, and ad free YouTube.",pihole,1651308944.0
866,comment,3,i6ra7jw,,"Pi-hole is a DNS (and optionally DHCP) server.

It has absolutely no idea what content is. It doesn't know if you even visit a domain after having resolved it. You ask it a question, it answers, it's job is done.

Browser level add-ons however can see the page at the source/asset level, and make changes to that on the fly.",pihole,1651294835.0
867,comment,2,i6t5kkn,,Privacy badger is also good. I use it to find the domains that still get past my pi hole server and then add them to the black list.,pihole,1651338637.0
868,comment,1,i6sdo4d,,"And if you want to go the extra mile, SponsorBlock or something similar.",pihole,1651325497.0
869,comment,-1,i6rbc8p,,"This was kinda my assumption, but I hear that ublock origin is not an intelligent content blocker and only knows what to block based on ad lists.",pihole,1651295621.0
870,comment,1,i6tt0h8,,"Ghostery is decent too, as an alternative to Privacy Badger. Use either.

I use Ublock Origin, Ghostery, and have a pi-hole. As well as built-in browser security settings.

It's the swiss cheese model of security. Each thing has limits, but between them all, they get most of the things i want to block. 

Video ads can be real hard to block, esp on Youtube.Don't be surprised if you need to jump through a few hoops here.",pihole,1651349583.0
871,comment,2,i6rcf3i,,"To make what's happening somewhat clearer, while yes they're still certainly list driven (though you can block assets at will arbitrarily also), you need to understand the difference between a domain and a url/uri.

`this-is-a.domain`

Pi-hole can either block this, or allow it. It's binary. There's no middle states.

`this-is-a.domain/now/its/a/url`

Pi-hole can't see the section that makes it a url. It never gets that information. The browser does.",pihole,1651296391.0
872,comment,1,i6rbstu,,"See [here](https://github.com/gorhill/uBlock/wiki/Does-uBlock-Origin-block-ads-or-just-hide-them%3F) for some general information.

The wiki is good in general. It's a multispectral approach.",pihole,1651295950.0
873,comment,0,i6sdfan,,"The main difference is that pihole can only block ads from their domain name, video ads are often injected into the page from the same domain, so pihole cannot block them, because it cannot detect the difference between a requested video and an unrequested one.

Ublock Origin, as other browser extensions, has control over the web page execution loop, so it can differentiate between what is the video you requested, and the one that's being forced on you, and can prevent the second from being played, regardless of where it's being streamed from.

Both use block lists, but browser extensions handle ""how"" the ads are streamed to you, and pihole can handle only ""from where"".

Ublock Origin for instance has a separate block list specific for HTML tags, separated by domain, you're correct, it is a block list, but it's not a domain block list.

Also, Pihole can remove ads from all the devices on your network (just not those on video streams), Ublock Origin can instead remove ads only from the device you install it on, and those which are supported, youtube for android is not supported, for instance, while pihole has no issues removing ads from chrome for android.

Neither of them can handle ads that are ""baked"" into the video stream, like self-promotion or sponsor segments from content creators, there are separate extensions for that.",pihole,1651325365.0
874,post,14,uf32c2,Identifying unnecessary adlists?,"Is there a way or a tool to find adlists that I have enabled, where every domain in that adlist is covered by one or more other adlists?  

For instance, if Adlist A and B each have 20 domains, but Adlist C has those 40 and more, then I don't actually need A and B.",pihole,1651291088.0
875,comment,7,i6r6jzt,,"Not that I'm aware of, but what I did was write a shell script that downloaded the lists using curl once a day and then used an awk script that reads all the files and pick out the unique values and create my own custom list. This also allows me to strip out certain urls that I don't want blocked because they block functionality. And since there is a web server for the pi, I just hosted it on my pi and pointed my pi at that list.",pihole,1651292430.0
876,comment,6,i6rmkla,,"Just use SQL to de-duplicate gravity:

`sudo sqlite3 /etc/pihole/gravity.db ""DELETE FROM gravity WHERE rowid NOT IN (SELECT rowid FROM gravity GROUP BY domain); VACUUM;""`

This will not help with identifying unnecessary lists, but at least it will remove duplicated entries in database.",pihole,1651304671.0
877,comment,3,i6r9p6x,,"This https://github.com/yubiuser/pihole_adlist_tool#:~:text=Pihole%20Adlist%20Tool&text=It%20does%20that%20by%20matching,been%20in%20place%20back%20then.",pihole,1651294488.0
878,comment,1,i7jkbgz,,This: https://github.com/badmojr/crosscheck,pihole,1651837735.0
879,comment,7,i6r8qax,,"""No, I don't use the groups function. Why do you ask?""",pihole,1651293840.0
880,comment,5,i6rtjoi,,"Isn't this... Like a core function of the gravity system, to remove and duplicates from your Blocklist?

I'm not really even sure I see the point in OPs concern, if you have double-coverage of even an entire list worth of URLs, the only downside is the extra 15 seconds or so it takes to fetch and scrub the domains when using `pihole -g`",pihole,1651311050.0
881,comment,1,i6rcnrn,,"I have this, but doesn’t it base its statistics off of browsing history?  I’d like to get coverage over every domain in the lists, not just which lists block my visited sites.

Perhaps I’m unclear on what “hits” and “covered domains” mean, though.",pihole,1651296568.0
882,comment,3,i6rugc3,,">Isn't this... Like a core function of the gravity system, to remove and duplicates from your Blocklist?

No. Not for an eternity.

Lists are kept intact for use with the group's system.",pihole,1651311872.0
883,comment,3,i6s5axr,,"Well, it seems not: https://github.com/pi-hole/pi-hole/issues/3286",pihole,1651320530.0
884,comment,2,i6s93ik,,"Your second point is what I highly suspected, but my brain is not such that I can abide extraneous adlists 😆",pihole,1651322921.0
885,post,2,uex4r1,How to set local time on browser queries on pi's GUI with fingerprint resist setting enabled? (Without disabling),"I found the request for the feature was fulfilled: [here](https://discourse.pi-hole.net/t/use-local-device-time-instead-of-user-browser-time-for-query-timeline/17621)  
However, I am one of those who have the fingerprint setting enabled.   
Attached is a screenshot from ssh & timedatectl, which shows I have the local time enabled, but what I don't know is how to enable local time on the browser GUI query table. Note: Query table reflects that of Universal time.  
Any guidance is appreciated, thank you.  


https://preview.redd.it/imbdpxpkmjw81.png?width=816&format=png&auto=webp&s=0136d5ad93431512bcfb4a4b68c9a601588ed750",pihole,1651270921.0
886,comment,2,i6q79rh,,"I found several threads about this topic:[https://discourse.pi-hole.net/t/timezone-for-web-interface/32409/9](https://discourse.pi-hole.net/t/timezone-for-web-interface/32409/9)

[https://discourse.pi-hole.net/t/use-local-device-time-instead-of-user-browser-time-for-query-timeline/17621/2](https://discourse.pi-hole.net/t/use-local-device-time-instead-of-user-browser-time-for-query-timeline/17621/2)

Somebody wrote a script for tampermonkey/greasemonkey and there was even somebody who wanted to implement this in PiHole, but the [pull request](https://greasyfork.org/en/scripts/403345-pi-hole) on github was never carried out. So you can stick to the script, if you want

[https://greasyfork.org/en/scripts/403345-pi-hole](https://greasyfork.org/en/scripts/403345-pi-hole)",pihole,1651274579.0
887,comment,1,i6qk3y2,,Thank you for finding that work around,pihole,1651280693.0
888,post,12,ues17j,unblock Youtube and Twitter using Dns Over Https?,"YouTube, Twitter and some other apps are blocked in my country.  6 months ago I was able to use YouTube and other sites and apps that support Https, using DOH protocol. But since then I have been able to use only some applications and sites. Youtube and twitter are inaccessible.
I have tried a lot of dns clients and dns servers such as cloudflare, google dns, open dns and etc but none of them worked for twitter and youtube.

Is the problem by my isp? can it be caused by myself? Can it be by router settings?
Is there a solution that I can unblock youtube and twitter again (using DOH)?",pihole,1651256190.0
889,comment,7,i6p491z,,"DoH won't solve anything. All that does is protect your DNS query. The DNS query responds with the IP that you are trying to visit with your browser and that IP address is then sent to your ISP to request that it serve you that website. I would assume the only way around the block would be a VPN. Although sometimes those are blocked as well because the IP addresses are often known by either the ISPs and/or whichever services you are trying to access, assuming they don't want you accessing them via a VPN, which happens sometimes.",pihole,1651257095.0
890,comment,3,i6p4afv,,Why not use VPN? If you want to be super fancy you can set up a reverse proxy that only uses the VPN for sites that you can't get locally; save you some data use.,pihole,1651257112.0
891,comment,1,i6p8c8o,,"There are other people who use it to unblock youtube and twitter with same isp!
I mean can isp block youtube only for me?",pihole,1651258839.0
892,comment,1,i6p7wga,,"Because its(DOH) faster and eats less data comparing VPN
Also i still can use it to unblock some sites that are blocked by isp but youtube and twitter doesn't work which is weird",pihole,1651258655.0
893,comment,3,i6p9osj,,"The only way that is unblocking anything is if they are currently using the ISP's DNS resolver and that resolver has been set to not resolve those sites. Then by using a DoH service they are replacing the ISP DNS service. If they are still using the ISPs DNS but just over DoH then in that case the ISP must have different filtering rules for their DoH service. Which DNS service are your friends using? 

The only thing the ISP does is connect you to whatever server the sites you want to visit are sitting on. And that's done by you passing the ISP the IP address you want to connect to. It doesn't matter which DNS resolver you use so long as it will get you the IP address so you can send it to your ISP. If it won't return the IP address to you, then it will look like the site is blocked, when in fact the ISP simply doesn't know what IP address you're trying to reach.",pihole,1651259409.0
894,comment,3,i6q5ajf,,"Some ISPs are lazy and will resort to DNS filtering to block websites. A smart ISP would country code block the Ip range for an entire country or block specific IP addresses while also blocking via DNS. This way they can ensure people are not getting around the block.

It usually never works out this way and I can't tell you how any times using another DNS would unblock 'blocked' pages.

However, if firefox with DoH enabled does not allow you to go to youtube, then using it with pihole may not work either. Your best bet would be to use a VPN.

edit: FYI, most hotels use DNS filtering to control access to their wifi. If you find a way around the DNS redirect, you usually have free internet at a hotel.",pihole,1651273641.0
895,comment,2,i6rtxwj,,"I'm ready to bet those ""other people"" don't use a public resolver, and use a Smart DNS service instead.  
Basically, some DNS queries are redirected to a proxy, acting the same as a VPN except it doesn't used client-based routing.",pihole,1651311407.0
896,comment,5,i6p8o81,,"It's not weird. YouTube and Twitter have their own dedicated IP space where other online things you use probably don't (they are in 3rd party data centers behind NAT). Your ISP is blocking the IP connections not the DNS lookups; ergo, you need to use a VPN to tunnel the traffic through your ISP. This is not a problem a PiHole (DNS server) can solve.",pihole,1651258980.0
897,comment,4,i6pp5wa,,"What Coldafsteel mentioned, chances are your isp is blocking those IPs for those services. 

Easiest way is to just use a VPN.

Did those “other people” tell you what DNS they are connecting to? Cause it’s possible they may be using a different country/region DNS servers and it’s returning different IPs for those services.",pihole,1651266131.0
898,comment,3,i6rtuk9,,">The only way that is unblocking anything is if they are using the ISP's DNS resolver and that resolver has been set to not resolve those sites.

Unless those other people use the DoH feature to connect to a *smart DNS* service which is a basically acting as a client-less VPN",pihole,1651311323.0
899,comment,3,i6rtyzj,,">Some ISPs are lazy and will resort to DNS filtering to block websites.

For example, that's how it is done in Belgium.",pihole,1651311435.0
900,comment,1,i6rusv9,,"All i know is that they use [intra](https://play.google.com/store/apps/details?id=app.intra&hl=en&gl=US&referrer=utm_source=google&utm_medium=organic&utm_term=intra&pcampaignid=APPU_1_FQVtYvjDDv-C9u8P4OSziAU)
And cloudflare works for them good enough
It works like VPN for them(i know it does not change ip but still)
The thing is i dont care if my isp find out im using blocked sites i just want to pass it with dns",pihole,1651312191.0
901,comment,3,i6ru3ep,,"In case, you don't know, ""Smart DNS"" is a thing. Basically a resolver that sends to a proxy, that aims at providing VPN-like features without a TLS tunnel.  

I wonder if those other people use DoH to reach a Smart DNS service, and OP confused DoH config with using a public DoH resolver",pihole,1651311546.0
902,comment,1,i6rv2wu,,Cloudflare in [intra](https://play.google.com/store/apps/details?id=app.intra&hl=en&gl=US&referrer=utm_source=google&utm_medium=organic&utm_term=intra&pcampaignid=APPU_1_FQVtYvjDDv-C9u8P4OSziAU),pihole,1651312443.0
903,comment,2,i71nher,,"I searched a bit about it...  
https://medium.com/@JigsawTeam/introducing-intra-a-new-app-to-stop-dns-manipulation-f76de3f5d01  

> Intra works by encrypting your connection to the Domain Name System, so no one can manipulate it or see what websites you’re trying to visit.  
> That’s it. If you want to customize your connection, you can change the DNS provider you use.  

So, basically, it is an app that encrypts DNS?  
That shouldn't unblock a website except if :  
1) Your ISP only filters on DNS, like Belgium.  
In this case, *any DoT/DoH provider will work*  
2) The other users use a specific DNS provider  
In this case, you need to know the specific provider  

> The thing is i dont care if my isp find out im using blocked sites i just want to pass it with dns  

Did *you* try using that app? Does it work?  

If it works and your Pihole config doesn't... your DOH configuration broke somehow.  
If it doesn't work... DOH is not enough anymore on your ISP.",pihole,1651509302.0
904,post,15,uemm5x,"Just installed raspbianlite and pihole on my pi, I'm not sure I understand how to proceed now","I'd like the pi to work on my whole network so I went on my router settings and here's where I'm not sure I'm doing things right. I added a static lease giving hostname, mac and IP of the pi, clicking add I get this message:

>The latest added/modified static lease is set to an IP that is already in use, please perform a reboot to apply the changes

And that's what I'm not so sure about. Is that's how it's supposed to happen? My router is a technicolos aghp.",pihole,1651240950.0
905,comment,5,i6o3d44,,"Your router wants you to reboot it to apply the static IP to your pi. That’s normal. After you do that, edit DNS settings in your router and set it to the pi IP address.",pihole,1651241966.0
906,comment,2,i6oyy55,,Most devices on your network will retain the old dns settings and bypass the pihole until they renew their ip addresses. It'll probably take about a week for everything to pick it up if you don't manually intervene.,pihole,1651254849.0
907,comment,1,i6oa1zo,,"You can block a domain/IP address manually in the Pihole GUI.

Add a known domain and see if it's blocked.

Also make sure you don't have DNS over HTTPS enabled in your browser or anywhere as that will just bypass your Pihole.",pihole,1651244755.0
908,comment,1,i6rzm4k,,If it was me I would probably turn off DHCP on your router and have pihole do the dhcp for the network instead.,pihole,1651316368.0
909,comment,0,i6o3wo2,,Hm... Not sure I see DNS settings actually.,pihole,1651242194.0
910,comment,0,i6o4gbd,,"Would it be this part?

https://i.imgur.com/tlzzYQO.png",pihole,1651242427.0
911,comment,1,i6p2et0,,"Gotcha, thank you!",pihole,1651256312.0
912,comment,1,i6oamrd,,"Alright, checked I didn't have dns over https.

Tried to blacklist yahoo.com and all subdomains but alas, I can still browse yahoo normally.",pihole,1651244990.0
913,comment,1,i6s79sj,,How do I go about that?,pihole,1651321804.0
914,comment,1,i6o4ctc,,Look around your settings. It’s usually in the same place as DHCP settings.,pihole,1651242386.0
915,comment,1,i6o4xsx,,No.  You're looking for a place to input an IP address,pihole,1651242633.0
916,comment,1,i6ob776,,"Your DNS may be cached somewhere. Google for clearing the DNS cache on the devices you are using. e.g. on Windows it's:

ipconfig /flushdns {using an Admin account}

Good idea to do a reboot on any devices you have changed the DNS settings on.",pihole,1651245224.0
917,comment,1,i6oc2sp,,Also restart whatever device you are using to go to Yahoo.  Your DNS settings will be received that way via DHCP if they weren't on the device already.,pihole,1651245581.0
918,comment,1,i6s9o4t,,On the pihole interface it is in settings -> DHCP to make pihole your dhcp server. Once you have put in the DHCP options and enabled it you would then turn off the DHCP service on your router,pihole,1651323260.0
919,comment,0,i6o56x1,,"I think I found it.

https://i.imgur.com/hxzicuH.png

So far I'm not getting any ad, but the web interface doesn't show any blocked content so I'm a little unsure.",pihole,1651242739.0
920,comment,1,i6obuk4,,"Shouldn't it work on a network level? I'll restart my phone to see if anything changes but I tried to set my router to filter everything through the pi, unless I misunderstood things.",pihole,1651245491.0
921,comment,1,i6od4mt,,"Alright, restarted, but I'm still having the banner there.",pihole,1651246005.0
922,comment,1,i6se617,,Thanks! Hopefully I'll remember when I get back from work,pihole,1651325764.0
923,comment,1,i6vkv7z,,"Incredible that I did remember to look into this. 

That said, in which way would I benefit from this?",pihole,1651385082.0
924,comment,1,i6o5s51,,DNS Server is what you're looking for.  Put your pi IP address there then restart your router again.,pihole,1651242987.0
925,comment,1,i6oi12v,,"Every device has it's own DNS cache. So it may be caching an old result before your pi-hole kicked in, assuming that you've even set it up right in the first place.",pihole,1651247988.0
926,comment,1,i6oe0vl,,Does your phone have an option to set dns for it's own use?,pihole,1651246372.0
927,comment,1,i6o8fn3,,"Done. 

The dashboard seems to show more stuff than before, but when I test it by starting the youtube app on my phone I still see ads galore. 

I must've done something wrong, I wanna say maybe I didn't set the filters right but I used the auto installing script, so I assume it should know better than me.",pihole,1651244085.0
928,comment,1,i6ofa8e,,"I believe so, it doesn't let me save though, but I tried to go on ahead and change then reboot. No changes.",pihole,1651246883.0
929,comment,2,i6o90um,,"AFAIK, pihole doesn't block youtube ads. Try something like yahoo.com",pihole,1651244330.0
930,comment,1,i6o9dpk,,"> AFAIK, pihole doesn't block youtube ads. 

Well dangit... I was excited cause my wife uses the youtube app a lot and I wanted her to browse with no ads... A shame.

> Try something like yahoo.com

I still get ads there though.",pihole,1651244477.0
931,comment,1,i6obllr,,"Do a test. With pihole running go to yahoo.com and take a screen shot. Then disabled pihole, there's an option in the gui to disabled for x amount of time, and go back to yahoo.com.

I just tried this on chrome in windows. With pihole enabled the big banner ad across the top is blank. Without pihole is can see the ad. The default Pihole block lists won't block all ads unless you add a whole lot of black lists which can lead to other problems where legitimate stuff can't get through.",pihole,1651245388.0
932,comment,1,i6pb1pw,,Use Smarttube Next instead of YT App.,pihole,1651259988.0
933,comment,1,i6oc88j,,"Tried, the banner is still there, looking at me defiantly.",pihole,1651245642.0
934,comment,1,i6rervv,,"I use newpipe personally, but my wife likes using the yt app for her subscriptions.",pihole,1651298152.0
935,comment,1,i6ohuwt,,Did you enable your ad list in pihole?,pihole,1651247920.0
936,comment,1,i6otadq,,"I started tinkering a bit and in the end I think I made it work. Ads show up much less but occasionally I still get them, I think it's a matter of finding the right blocklists now.",pihole,1651252528.0
937,comment,1,i6oxwsn,,Sometimes it's because the ads are already cached. Please delete your browser cache/dns cache and try,pihole,1651254421.0
938,comment,1,i6p2dft,,"I'll try that, thanks!",pihole,1651256296.0
939,post,118,ueme0u,Low percentage of cached responses makes me concerned unbound isn't working properly?,,pihole,1651240303.0
940,comment,30,i6qhdkr,,"IIRC that chart only shows queries that are cached by pihole, not by unbound",pihole,1651279400.0
941,comment,7,i6nzzdk,,"I've been running Pihole + unbound for about a week. Adblocking is definitely working but I'm seeing <1% cached responses. Is this normal? 

I used the default configuration from here (just with 'do-ip6' set to 'yes') [https://docs.pi-hole.net/guides/dns/unbound/](https://docs.pi-hole.net/guides/dns/unbound/)

I am running a Ubiquiti UDM pro as a router/DHCP server and I set my pihole as the DNS sever for the internet connection - its not being handed out to individual clients.",pihole,1651240497.0
942,comment,6,i6pop6w,,"Pretty sure I've read that you shouldn't use the pihole cache when using unbound, as the unbound cache is far faster.",pihole,1651265921.0
943,comment,1,i6ps0rz,,"Star Trek Overlay, nice choice!",pihole,1651267430.0
944,comment,1,i6pzfyf,,"I had to reinstall unbound today, no idea what caused it to start playing up but it's never had a problem before",pihole,1651270860.0
945,comment,1,i6qioc7,,"Which guide did you follow to setup unbound with Pihole?  I had it working at one point, but then got a pihole update and everything broke.  Tried several times to get it back, but never could, so I gave up.",pihole,1651280015.0
946,comment,11,i6o0rhj,,"> its not being handed out to individual clients.

So if pihole is feeding some other NS downstream of it that your clients ask.  How often do you think it would get asked again for something that is within the ttl, ie cached.

So client asks for www.domain.tld of your udm pro, which asks your pihole.. Gets a ttl which is going to be what pretty much exactly what your pihole ttl it got from where it asked or resolved.

So client or other client asks udm prof for www.domain.tld, it would answer via its cache.  But pihole would never see such a request.",pihole,1651240840.0
947,comment,1,i6py2wu,,To hand out DNS Server to network clients set DHCP DNS Server in Network > choose the network > DHCP Service Management (show options) > DHCP DNS Server,pihole,1651270218.0
948,comment,12,i6pyce8,,It’s not better or worse. The reason some recommend it is to not dual-cache since that would be redundant,pihole,1651270342.0
949,comment,6,i6qj49l,,"You reckon it's faster to pass to a second hop, when the first hop could just answer directly?

That's somewhat interesting logic.",pihole,1651280227.0
950,comment,1,i6qh9ie,,I was already pretty impressed with the UI before I found that in the settings menu. Honestly the most functional/slickest LCARS skin I've ever seen!,pihole,1651279346.0
951,comment,1,i6thdum,,Craft Computing's https://www.youtube.com/watch?v=FnFtWsZ8IP0,pihole,1651344017.0
952,comment,6,i6o1bbx,,"Fair, I had forgotten that there would be other caching in the system. I'll switch some clients to use the pihole directly and see if the % increases.",pihole,1651241082.0
953,comment,1,i6qh4yz,,"Yea, I got that part figured out. I had left it being used by the UDM-Pro to avoid having to figure out firewall rules to allow things from my guest and IOT subnets/vlans to see the pihole.

I have currently decided 'F that' and Pihole is just servicing things on my main network/subnet. I'm up to 9% cached responses",pihole,1651279285.0
954,comment,7,i6qegyg,,since that would be redundant,pihole,1651277999.0
955,comment,2,i6skjwu,,"That makes sense, I guess if you start having two caches the hit rate for both would end up being low and not properly optimized.",pihole,1651329002.0
956,comment,3,i6rkyps,,"Unbound can prefetch fresh entries for common domains so that you still have a cache hit even after the TTL. But it needs to know what domains you hit a lot and having the pi-hole cache get hit means unbound never sees the request and can't appropriately see the frequency of your requests.

So yes, a small hit of a ms or two is definitely worth more consistently low response times on common domains.",pihole,1651303240.0
957,comment,1,i6skb81,,"Check on this sub for a post about unbound speeds mate, you will find a better explanation than I could ever give. I know following the settings shared to disable pihole cache and increase unbound hits reduced the latency quite a lot for myself and others.",pihole,1651328883.0
958,comment,2,i6thfyp,,Thanks.  Going to have to give it another go.,pihole,1651344045.0
959,comment,1,i7a48dm,,[removed],pihole,1651664909.0
960,comment,6,i6qg8fo,,Which would be redundant,pihole,1651278846.0
961,comment,2,i6rl5w2,,"I have Pi-hole's cache enabled, I *also* have a whole other distribution proxy in front of Pi-hole, doing its own optimistic cache.

My Unbound prefetch rate is still ~20% of Unbound's queries total. This seems to be an entirely imagined problem.",pihole,1651303411.0
962,comment,1,i7afyky,,"The bubble is popping, my dude",pihole,1651670985.0
963,comment,2,i6qmav8,,Which would be,pihole,1651281751.0
964,comment,1,i6s2iie,,Which would,pihole,1651318598.0
965,comment,1,i6skgs3,,Redundant which would,pihole,1651328959.0
966,post,1,uej6xy,Unbound to listen to IPv6,"I modified  /etc/unbound/unbound.conf.d/pi-hole.conf:

interface: [127.0.0.1](https://127.0.0.1)

interface: ::1              <-- added

do-ip4: yes

do-udp: yes

do-tcp: yes

 do-ip6: yes 

\-----------------------------------------------------

After I have done this  and restarted unbound, I am able to add ::1#5335 to the custom3 (IPv6) upstream DNS address and Unbound now listens to either IPv4 ([127.0.0.1#5335](https://127.0.0.1#5335)) or IPv6 (::1#5335).

Can someone comment if there is any harm with this, benefit, etc?

I know that pihole team has commented that IPv4 is capable of resolving IPv4 and IPv6 queries. But I am curious.",pihole,1651229446.0
967,comment,3,i6npvlr,,">	Can someone comment if there is any harm with this, benefit, etc?

There is no harm and no benefit. The two loopback paths lead to the same kernel.",pihole,1651235705.0
968,comment,2,i6njx1z,,"I think you have to add ""do-ip6: yes"" in the unbound configuration file. 

It's not necessary to do this. You can resolve ipv6 queries with a IPv4 address. It's only necessary to provide IPv6 DNS for devices that ONLY use IPv6.",pihole,1651232348.0
969,comment,1,i6nplpb,,"thanks, I did have ""do-ip6: yes"".  I was curious about adding the IPv6 interface in conf file and whether it offers anything different or causes any harm.",pihole,1651235560.0
970,comment,1,i6nrans,,"You are complicating things unnecessarily. Also if your router reboots or your ISP changes your public IP address, the server's ipv6 address will change. You'll have to update the IPv6 DNS server in setupVars.conf every so often. Not updating the IPv6 DNS server in setupVars.conf will cause no harm if you happen to forget to do so.

Edit: I use my own DHCP server. If you use your router's DHCP server make sure to update your IPv6 DNS. Again, if you fail to do so there is no harm, you will resolve IPv6 queries through IPv4 DNS.",pihole,1651236443.0
971,comment,2,i6nsf2l,,">Also if your router reboots or your ISP changes your public IP address, the server's ipv6 address will change.

This depends:

* the Pi's public address only changes when the IPv6 prefix changes. It is rare that the router gets a new prefix when it reboots, most ISPs keep it stable for months/years

* if you use the link-local address of your Pi for DNS, it doesn't change

* if you use a ULA address for DNS, it doesn't change",pihole,1651237007.0
972,comment,1,i6nswfs,,"Correct. For some reason when I set my link local address in setupVars, devices still get the GUA address despite rebooting my pi and reconnecting all devices. But if you use LLA on the router DHCP server then it'll never change.",pihole,1651237246.0
973,post,45,uehbwl,Firewall on Pi,"Stupid question but I can’t figure this out.

I have seen I should Enable a firewall (UFW) on my pi to secure it.

I have services running internally only such as pihole etc and also some with port forwarding such as ssh (22) and WireGuard (51820) so I’m wondering why it’s necessary to have the firewall? 

What’s the need to block internal connections with a firewall if they are internal anyways? And why use a firewall for the external ports when the only ones that will come in anyways are the one set on port forwarding?

My router anyways only forwards the ports I have set it to so does that mean there is no use for a firewall on my Pi also?",pihole,1651221047.0
974,comment,7,i6nu68a,,Asking for myself here: If its behind a router and working locally with no external or remote management connection whats the issue? I don't see a reason to have a firewall setup. On default pihole only uses what 3 ports for itself and nothing else open unless you use unbound and the only known exploit in Unbound was patched. I just did lsof -i -P -n | grep LISTEN and got exactly what I was expecting and nothing else open.,pihole,1651237860.0
975,comment,3,i6o5fhc,,"You don't need an external firewall if all your internal services are secure. Iff! So why do you have a firewall on your router? Because there are known exploits on many/most services. You may have misconfigured something. You simply don't want to expose something to denial of service, probes, being copied. Maybe you opened things temporarily as you deploy them. 

But yes security is a inverse of convenience. You probably lock your home's doors and windows. Do you lock the inside doors too? I used to when I lived in a high crime area and a window/room was broken into, the inside door was kicked but not broken. Do I do it now? No.

Ufw is so easy, why not. Don't trust anything. Especially yourself.",pihole,1651242839.0
976,comment,4,i6nxch9,,">What’s the need to block internal connections with a firewall if they are internal anyways?

Strictly speaking, there probably isn't one. It's a somewhat philosophical choice, based on how one approaches security. For people that work in IT, we tend to just default to doing that sort of thing anyway, especially as you get into higher end network gear. Higher end network gear and configurations start flipping things around so that more default states are deny than allow, so you end up having to configure rules anyway.

Also, as time goes on, we are slowly moving (back)towards a state where the concept of internal/external is less clear, if not completely non-existent. A lot of the idea of internal/external, particularly for consumers, is a side effect of IPv4 address exhaustion. IPv6 doesn't have that issue, and with it, we're back to a place where everything can have it's own unique address, and just be on the Internet directly. You can lose the idea of ""internal"" in that scenario. This was actually a bit of an issue for a while, years back, when IPv6 first started getting widespread- it would be on by default, but firewalls would only screen IPv4 traffic, allow IPv6 to be a less protected attack surface with people not even realizing that it was a thing, let alone that they could get attacked through it.

This is where the idea of a Zero-Trust network comes in, implicit trust that was a part of many corporate networks is going away in many organizations. I like to make a comparison to our own homes...just because someone is in your house, do you just let them wander around all the rooms in it as they please? It doesn't matter if it's a stranger, a friend, or family (even parents probably don't want their kids rummaging around in their bedroom). It's no different on your network.

Zero-Trust then falls nicely into the IPv6 scenario, because IPv6 can(doesn't have to) cause you to lose that internal/external demarcation, IPv6 in many ways benefits if it is just natively considered to require a Zero-Trust approach.",pihole,1651239331.0
977,comment,6,i6n8188,,"I have my internal network set up in a pretty highly restrictive fashion.

Not necessarily because I need to, but more because I can, and it's more about confidence. My personal network is treated as adversarial. Where machines are only allowed to interconnect with each other on approved ports and protocols.

I also like to run my machines and users on the principle of least operations. Users and groups are pretty heavily restricted, root doesn't have a login shell, etc. Nothing responds to ping. Very few users have any more permission or scope than they strictly require. I quite literally can't get a root shell on my machines if I wanted to, and prefer to run through sudo. My auth/login flows require 2FA.

As much confidence as I have in my internal network, if any machine *was* to be compromised, it's within my best interests to limit its scope. My guest network is also reasonably restrictive and just completely isolates guests.

None of this I would necessarily consider strictly necessary, but I sure like having the confidence it's in place. If one of my canaries suddenly starts trying to sing a different tune, it's nice to know about it.",pihole,1651223322.0
978,comment,1,i6pj3qh,,"Do you trust everyone/everything on your internal network?  


I often have house guests, sure I have no reason not to trust them but still while they can access my plex server the Pi. the router, my laptop and desktop are firewalled internally apart from a couple of addresses and externally too. That's on top of the usual passwords/keys et al why wouldn't you it is as easy to lock down as to not lock down.",pihole,1651263453.0
979,comment,-5,i6nswkp,,"Why have a firewall? Post your WAN IP address and within 5 minutes, you'll see why! Remember, there are unscrupulous people out there from all over the world looking for easy targets like you, and they don't need to know your WAN IP, they already have it!

Don't be an idiot.......Secure it!",pihole,1651237247.0
980,comment,1,i6o6ygh,,But how does UFW help if I’m anyways going to allow all the ports that I use stuff on? People can’t do anything with the other ports anyways if nothings on them right?,pihole,1651243475.0
981,comment,1,i6pricd,,"> A lot of the idea of internal/external, particularly for consumers, is a side effect of IPv4 address exhaustion. IPv6 doesn't have that issue, and with it, we're back to a place where everything can have it's own unique address, and just be on the Internet directly.

Although NAT is not needed in IPv6 I don't see why the concept of a firewall is any less relevant. Anything behind a network firewall could be considered ""internal"". Sounds like the issue with IPv6 in the beginning was bad firewall implementations with outdated code. That says nothing about the theoretical differences between IPv6 and IPv4.",pihole,1651267200.0
982,comment,4,i6nf4u0,,So you implemented a zero trust security architecture model. Nice!,pihole,1651229153.0
983,comment,2,i6p297v,,"If you really want to be fancy, you could put your wireless and wired on different subnets and filter what types of traffic are allowed between the two. This would protect you against those that break into your wifi.

I do this bc all it takes is one of my neighbors' kids to use kali and they have all of the time in the world to either capture IVs and run a list against the hash or use reaver to break WPS.",pihole,1651256245.0
984,comment,-6,i6nu17v,,[deleted],pihole,1651237794.0
985,comment,2,i6nt6uy,,I assume my router has a firewall in which case there would be no need for one on my pi… I think?,pihole,1651237387.0
986,comment,1,i6nt49m,,"Yes but the only ports that’ll be allowed into my network are the ones I’ve set on port forwarding correct? In that case why use firewall on pi? Let’s say soemone tries port 80 - it’s not on port forwarding so nothing will happen, but port 22 ssh it will but I can’t just block that because I use it…",pihole,1651237352.0
987,comment,5,i6o9gyt,,">People can’t do anything with the other ports anyways if nothings on them right?

The assumption here is that you are 100% aware of all other network services that are running. Your statement is technically not wrong. However, it assumes infallibility. 

One of the the things that none of us really explicitly said, is that one of the ideas here is to have a default posture of security. Not just security when you think you need it. It's like many things in life, wearing a seat belt in a car, or as u/RuaidhriM mentioned, locking your doors and windows. Those are all default postures of the safe state- you don't do it expecting a problem, you do it as a preparedness thing.

It's too late to put the seat belt on after the accident, too late to lock the door after the break in, and too late to turn the firewall after you've been hacked.",pihole,1651244516.0
988,comment,1,i6oaq9h,,"That's right if there are never any exploits/security issues on your router, no worms on your internal network,  you never make a mistake opening incorrect ports or putting up flawed services on an allowed port.

For sure the only mostly secure system is turned off, encased in concrete, and lost. But that's also unusable. Locking a door, not just closing it, is a good extra measure. It's a bit extra work but under lots of circumstance folks think it's worth the effort. The door being closed is a pretty good deterrent. A locked door can still be broken through. The extra level of security seems like a good balance though.",pihole,1651245031.0
989,comment,1,i6pu6yi,,">Although NAT is not needed in IPv6 I don't see why the concept of a firewall is any less relevant.

I think you misunderstood or missed the details of what I said- I wasn't saying that a firewall isn't relevant. I was saying that the idea of an internal network vs an external network is \_less\_ relevant, because NAT isn't a requirement in IPv6 the way it is a defacto one for most people under IPv4. Hence why I say you lose the idea of ""internal"", not that you don't need firewalls. I just didn't explicitly say ""You may not have internal because you don't have to have NAT in IPv6"". I'm actually agreeing with what you say.

 And yes, early in the life of IPv6, firewall implementations were often incomplete. The IPv6 network stack got turned on, but the firewalls weren't IPv6 aware. 

&#x200B;

> I think in both these cases you are mixing up what ""theoretical"" and ""philosophical"" mean.

Not at all. I completely think that the decision to have a firewall on all devices in a NAT scenario is a philosophical one, at least as the word gets used colloquially. If you subscribe to the idea that all the devices behind the network border firewall are protected by it, and everything in the internal network is implicitly trustworthy, then you can argue (as the OP is asking) that there is no need for a firewall on all the devices in the internal network. If you subscribe to a zero-trust philosophy, that is, just because something is ""local"" doesn't make it trustworthy, then you put firewalls on internal devices as well. Going back to my house example, rooms would explicitly be devices on the network, the house itself is the network. Just because a person is in a house, they aren't implicitly trustworthy to all rooms, so rooms may have locks(firewalls) on them to keep unauthorized persons out. Even people (children) that are supposed to be in the network aren't necessarily trusted to go everywhere in it.",pihole,1651268426.0
990,comment,2,i6o05ff,,Yes and you should be scared too,pihole,1651240571.0
991,comment,1,i6o0pgf,,That’s how layer 3 should work.,pihole,1651240817.0
992,comment,1,i6pfkzz,,"But on port 22 will listen a service like dropbear. And if you keep the service up to date, use a safe password for SSH login, and there will be no zero day vulnerabilities for this service, it is safe.  
And of course assuming your router has no (undocumented) backdoor. There was a mysterious case back in 2014 with different manufactures, which had a backdoor on port 32764.",pihole,1651261933.0
993,comment,1,i6oeyar,,"Thanks I think I will turn on my firewall now haha - so just checking I’ve understood - you’re saying that I should turn on UFW and allow all ports of the things I use so that in case there’s something I don’t know
Open then it’s shut and safe… - and I think you are saying that even if I open all the ports up of the services I use then there is still a point of having the firewall up?",pihole,1651246750.0
994,comment,1,i6px10j,,"> I was saying that the idea of an internal network vs an external network is _less_ relevant, because NAT isn't a requirement in IPv6 the way it is a defacto one for most people under IPv4.

I guess that with regards to the post, the idea of setting up a firewall per client is independent of IP implementation. With IPv6 you would still be behind a firewall so it shouldn't be less risky with or without NAT. 

Maybe I'm not explaining myself correctly but I would not have mentioned NAT, IPv4 or IPv6 because none of that adds to the argument (at least, theoretically speaking). In practical terms, sure but that is due to bad firewall software.
 

> I completely think that the decision to have a firewall on all devices in a NAT scenario is a philosophical one, at least as the word gets used colloquially.

For what it's worth I deleted the second part of my comment because it sounded too confrontational compared to my intention.


> If you subscribe to the idea that all the devices behind the network border firewall are protected by it, and everything in the internal network is implicitly trustworthy, then you can argue (as the OP is asking) that there is no need for a firewall on all the devices in the internal network. 

I see what you are saying. I still disagree because all philosophical examples of ""schools of thought"" are always about unprovable and mostly theoretical issues. The answers usually depend on your assumptions. 

I don't see how that applies to a zero trust network since home networks can't ever be trusted. Not because of my assumptions but because I can objectively show evidence of vulnerabilities in the ""Common Vulnerabilities and Exposures"" (CVE) database. Vulnerabilities in common home network applications. 

Therefore, you can't ""subscribe to the idea that your network is inherently trusted"" in a sensible way. But with philosophical schools of thought I can't do the same.",pihole,1651269732.0
995,comment,1,i6onfwn,,"> ports up of the services I use then there is still a point of having the firewall up

It's the infallibility thing. You are really assuming you have 100% awareness of everything that is using the network all the time. That may be true, but you also don't have to take the risk, it's part of the default security posture. 

This can also prevent surprises, as in you install an app, and it doesn't work, and it turns out it's trying to listen for a network reply, and you weren't aware it needed network access before it didn't work.

There's a lot of good reasons from a security standpoint to have a default posture of secure. That said though, it should be pointed out here, most of the time when we are talking about enabling the firewall, we're really talking about default posture on inbound traffic. While you can default lock down outbound as well, most people probably don't do that. 

There's a certain balance point where you have to ask yourself how worried you are about a hack; what is the value of what you are protecting etc. For most people, outbound connections(and generally, allowing a return connection to be established as a result of that) is something that they allow to have happen automatically. I would consider this reasonable- anyone that needs a more locked down environment than that hopefully already knows of that need. Or for people that just don't want to have anything happening on their network without their knowledge. Yep, that takes a lot more effort, but it's a judgement call of what is right for you.

Because of the relatively marginal effort of running a local firewall, I would expect most people with good technical skills probably don't think there's any reason not to.",pihole,1651250176.0
996,comment,1,i6pxfnx,,">Therefore, you can't ""subscribe to the idea that your network is inherently trusted"" in a sensible way. But with philosophical schools of thought I can't do the same.

As I said, the colloquial use of the term. You're reading a little bit too literally here. I'd also point out that you are basically saying that you are deciding what other people are allowed to believe or what is sensible. I'd suggest you should take care about declaring yourself the decider or such things.",pihole,1651269918.0
997,comment,1,i6q0m3r,,"> As I said, the colloquial use of the term. You're reading a little bit too literally here. 

I mean I'm using the colloquial use of the term too. Not like I'm referencing a paper or textbook.

> I'd also point out that you are basically saying that you are deciding what other people are allowed to believe or what is sensible. I'd suggest you should take care about declaring yourself the decider or such things. 

I'm not a decider of anything of course. I'm pointing you to a database of exploits. It's not me merely giving my opinion.",pihole,1651271409.0
998,post,1,ueg1zv,"Toggled ""Enable IPv6 support (SLAAC + RA)"" for DHCP for just one second; completely de-railed my pi-hole","**tl;dr: toggled on ""Enable IPv6 support (SLAAC + RA)""; devices now cannot find a DHCP server, and also un-toggling this option and restarting all hardware does not resolve the issue.** 

My current setup for pi-hole is to run my DHCP server using the Pi-Hole. 

My router has LTE failover features, which temporarily forces the network into an IPv6 situation. I also noticed that this forces a carrier DNS instead of the Pi-Hole. 

I decided I wanted to try enabling IPv6 support (SLAAC + RA) in order to see if this produced better results when the router failed over to the LTE network. However, right after enabling this feature, my entire DHCP server hosted on the Pi-Hole went down. Furthermore, it became completely un-recoverable.

Devices stopped connecting to the network immediately unless I made the devices static IP. All pointing to DHCP issues... but when I un-toggle the ""Enable IPv6 support (SLAAC + RA)""... the behavior of the router + pi-hole do not revert back to their previous behavior. My devices still cannot resolve their own IP addresses anymore. 

I have turned off the pi-hole for now, turned on DHCP server on my router, and changed the DNS on the router to google. 

What unholiness have I cursed my pi-hole with? Why is it that un-toggling the option that broke everything doesn't bring it back to how it behaved originally? I've hard restarted my entire house and all devices using my circuit breakers several times to confirm if power cycling will fix this",pihole,1651215199.0
999,comment,3,i6n1obj,,"Difficult to say, especially because the symptoms aren‘t very clear. 

„Doesn‘t connect to the network…“ - seems to be just a DHCP problem. Sometimes people write „no Internet“ and it turns out „no DNS but IPs are working“.

Maybe you want to inspect (and eventually share) the client‘s IP configuration in the various situations (working/not working; LTE/other ISP)? Same for the Pihole, the router‘s LAN config and the routing for LTE and other WAN.

And: the outside situation (ISP A vs ISP B) should have little to none influence on the inside situation. To simplify things you could turn off IPv6 in the LAN completely (if LTE is using IPv6 as transport it must be converted.)",pihole,1651217693.0
1000,comment,2,i6n6de4,,"When you turned on IPv6 support, your router pushed the network config over router advertisements. This probably contained IPv6 DNS servers from the router/ISP. Your devices picked this up an prefer IPv6 over IPv4 for DNS, so they now use the servers.

Wen you turned the option of, the router just stops broadcasting the network settings, so the entries do not get removed. You would need to reconnect all devices to clear the network settings.

You router is forcing IPv6 to be on when using LTE, because your LTE provider provides only  IPv6, and tunnels IPv4 packets via IPv6 packets. Tunneling IPv4 via IPv6 is a common trick mobile providers do to make heir infrastructure simpler",pihole,1651221854.0
1001,comment,1,i6myvk3,,"Some more notes; IPv6 is turned off for my normal ISP provided internet; I have no choice in the matter and it turns to IPv6 ""auto"" when the ISP fails and the router reverts to LTE for internet",pihole,1651215342.0
1002,post,1,uednkt,How do I set Pi-Hole to check for updates more frequently?,"I just updated my install earlier while I was trying to resolve some connection issues I was having, and the update did the trick, but I noticed that the last update was released eight days ago.

I'm pretty sure I've used the WebUI at least once in the last eight days, if not more than once, and yet somehow I didn't see the update notification until today.

Can Pi-Hole be slow to check for updates sometimes? If so, is there a way I can get it to check more frequently?

My Pi-Hole setup is pretty boring. I have it running on a Pi 3B under Raspbian 10 Buster.

EDIT: I just want it to **check** for updates more regularly, I don't want it to update on its own.",pihole,1651205704.0
1003,comment,1,i6mo72u,,"I set up the root’s crontab to add two jobs, one to update the OS and another to update apps, every Sunday in the middle of the night. It is also piped into a cron.log file I created in my home user folder. 

You can set it up to update more frequently if you want. 

I did it on the root’s file because they’re sudo commands and I won’t store my password in plain text.",pihole,1651207717.0
1004,comment,4,i6mugop,,"If you're going to be updating the OS automatically, please consider installing and configuring both `unattended-upgrades` and `needrestart` to do this properly instead.

Just updating a package alone very often isn't sufficient to actually ensure that that updated binary/service is the one that's running after having updated it. This is where `needrestart` comes in. You'll want to configure it so that it runs as an unattended session by default. After a package is updated, `needrestart` will restart the services involved in its dependency chain.

`unattended-upgrades` is very configurable, including when and how, and what, is updated. As well as what to do in cases where configuration of a newer package differ from what's currently installed. It can also be configured to always attempt to break updates down into smaller, less failure prone chunks than just pulling trigger on everything. Despite the naming of the two packages it's actually this one that handles required restarts (also configurable, including when/what to do if a user is currently logged in, etc).",pihole,1651211959.0
1005,comment,2,i6mvki0,,Thanks for this. I'm new to RPi and had just set up crontab. I like this approach a lot more.,pihole,1651212778.0
1006,comment,2,i6qzotw,,Thanks. Good info.,pihole,1651288471.0
1007,comment,2,i6mw248,,"The configuration files are located at `/etc/apt/apt.conf.d/50unattended-upgrades` and `/etc/needrestart/needrestart.conf` respectively.

The configuration files also serve as functional documentation.",pihole,1651213151.0
1008,comment,2,i6mwh3v,,"Awesome, thank you!",pihole,1651213462.0
1009,comment,1,i6n0nuw,,"No worries. Have fun.

One could argue that this makes operating a headless server rather hands off, and somewhat boring, as you'll frequently log in and find you don't need to do anything. This is a good thing, though, I think. Headless servers should be boring.",pihole,1651216828.0
1010,post,1,uedmmg,Installing pi-hole,"Hello,

Trying to install pi-hole again as I'm rebuilding my server but I can't set the IP address during initial setup and I can't find anywhere where I can update it. All the tutorials and stuff I'm finding says to do it during initial install but I'm not seeing it. So I don't know if it's just been removed or I'm missing some small step.",pihole,1651205620.0
1011,comment,2,i6qfnu7,,"There is no way to change the IP with pihole. It uses the IP configured in your OS. 
Default config is to use the IP it got from your networks DHCP server.
Assuming you use Raspberry Pi Os:
If you want a static IP you can assign this in `/etc/dhcpcd.conf`.",pihole,1651278568.0
1012,comment,1,i6mko3k,,Tried following the digital ocean tutorial and pihole's on their website. Neither has been useful because I can't do this one step.,pihole,1651205656.0
1013,comment,1,i6qh733,,Ah. I ended up just swapping out the CA on my old server and that worked. Idk why they took out the section you can configure the network interface during setup for. Kind of screwed me.,pihole,1651279313.0
1014,comment,1,i6mq5y6,,Think I might just figure out how to switch CAs on my old openvpn setup because that seems easier at this point than seeing up a recursive pihole again.,pihole,1651208980.0
1015,comment,1,i6qy5io,,Mabye you used DietPi the last time? When you insall it with DietPi there is an option to change your network config inside the setup process.,pihole,1651287639.0
1016,comment,1,i6qyjgr,,Maybe? I don't think I did. Guides I used show an additional step to confirm the IP (and allow you to say no and change it) but that step seems gone from last time I ran it. Granted last time I ran it was over a year ago.,pihole,1651287847.0
1017,post,2,ue9o3h,Disable DNSMAQ_WARN?,"Hello!

Is there a way to disable DNSMAQ\_WARN entries? I checked the Settings tab and didn't find any.

I'm on Pi-hole 5.9.1 FTL 5.14 Web 5.\`14. I know I need to upgrade. Thanks.

Kind regards.",pihole,1651193006.0
1018,comment,2,i6m3zrd,,"The proper way of doing so would be ""address the specific issue"".

It should be linking you to [documentation](https://docs.pi-hole.net/ftldns/dnsmasq_warn/) on the given warning(s).

Which are you seeing?",pihole,1651197548.0
1019,comment,1,i6m4rho,,"Agreed.

There is NAS box in the infrastructure with multiple IP addresses. Pihole does not want to assign the same FQDN to the secondary address. I can live with that. However, I don't want Pihole to log the warning. Thanks.

Kind regards.",pihole,1651197869.0
1020,post,5,ue8shm,Pi+Unbound single docker container DNS issue,"I followed these instructions to setup Pihole+Unbound in one Docker container using Portainer.

[https://github.com/chriscrowe/docker-pihole-unbound/tree/main/one-container](https://github.com/chriscrowe/docker-pihole-unbound/tree/main/one-container)

Pihole is working correctly, however a DNS leak test shows requests being forwarded to Quad9 instead of using unbound as the recursive server.

Can anybody help? Running on a RPi 3B+.

Thanks in advance.",pihole,1651190211.0
1021,comment,2,i6lqz6k,,"https://github.com/chriscrowe/docker-pihole-unbound/blob/main/one-container/pihole-unbound/unbound-pihole.conf#L8-L9

login to your pihole web gui, settings -> dns, make sure everything is unchecked and that custom 1 is set to `127.0.0.1#5335`",pihole,1651191859.0
1022,comment,1,i6m01cl,,I already have pihole setup that way.,pihole,1651195857.0
1023,comment,0,i6mctff,,"Here is the docker-compose I used to create a container in Portainer via stacks:

version: '3.0'

volumes:
  etc_pihole-unbound:
  etc_pihole_dnsmasq-unbound:

services:
  pihole:
    container_name: pihole
    image: cbcrowe/pihole-unbound:latest
    hostname: ${HOSTNAME}
    domainname: ${DOMAIN_NAME}
    ports:
      - 443:443/tcp
      - 53:53/tcp
      - 53:53/udp
      - ${PIHOLE_WEBPORT:-80}:80/tcp #Allows use of different port to access pihole web interface when other docker containers use port 80
      # - 5335:5335/tcp # Uncomment to enable unbound access on local server
      # - 22/tcp # Uncomment to enable SSH
    environment:
      - FTLCONF_REPLY_ADDR4=${FTLCONF_REPLY_ADDR4}
      - TZ=${TZ:-UTC}
      - WEBPASSWORD=${WEBPASSWORD}
      - WEBTHEME=${WEBTHEME:-default-light}
      - REV_SERVER=${REV_SERVER:-false}
      - REV_SERVER_TARGET=${REV_SERVER_TARGET}
      - REV_SERVER_DOMAIN=${REV_SERVER_DOMAIN}
      - REV_SERVER_CIDR=${REV_SERVER_CIDR}
      - PIHOLE_DNS_=127.0.0.1#5335
      - DNSSEC=""true""
      - DNSMASQ_LISTENING=single
    volumes:
      - etc_pihole-unbound:/etc/pihole:rw
      - etc_pihole_dnsmasq-unbound:/etc/dnsmasq.d:rw
    restart: unless-stopped

everything after this line I setup in Portainer stacks environment variables section

FTLCONF_REPLY_ADDR4 = 192.168.7.10
TZ = America/Los_Angeles
WEBPASSWORD = [*****]
REV_SERVER = true
REV_SERVER_DOMAIN = local
REV_SERVER_TARGET = 192.168.7.1
REV_SERVER_CIDR = 192.168.7.0/24
HOSTNAME = pihole
DOMAIN_NAME = pihole.local
PIHOLE_WEBPORT = 80
WEBTHEME = default-light",pihole,1651201530.0
1024,comment,1,i6m386b,,what device is performing the leak test? are you connected to a VPN?,pihole,1651197218.0
1025,comment,1,i6onyd8,,"I have Pi-Hole and Unbound running on two Pis on my network, my Primary DNS on a dedicated Pi Zero W 2 and my Secondary DNS runs in a Docker container and I installed it using Pi-Hosted's Portainer template on Pi 400 since I have been able to find those locally cheaper the Pi 4s at scalper pricing.

Pi-Hosted also has some great videos posted on the other templates he created for Portainer. 

[https://github.com/pi-hosted/pi-hosted](https://github.com/pi-hosted/pi-hosted)",pihole,1651250384.0
1026,comment,1,i6mblc6,,"I am checking with my iPhone, both on my LAN and switching to cellular and connecting back to my LAN via VPN (Wireguard, also running on my RPi in a separate Docker container via Portainer). In both cases I see Quad9 DNS.",pihole,1651200937.0
1027,comment,1,i6p877y,,Thanks! I will give the GitHub a read.,pihole,1651258780.0
1028,comment,1,i6md8kh,,"* pihole needs to be listening on all network interfaces on port 53
* router needs to be configured with the local ip of the pihole for the dns server, it's usually under dhcp settings
* wireguard client config needs `DNS = <ip of pihole on wg subnet>`
* ensure your iphone doesn't have hardcoded dns servers",pihole,1651201736.0
1029,comment,1,i6qzk7a,,"You're welcome, if you watch the guy's videos they're pretty helpful as well.",pihole,1651288402.0
1030,comment,1,i6me6em,,"Which of these is the right option in pihole:

- allow only local requests
- respond only on interface eth0
- bind only to interface eth0
- permit all origins

Is this section what you reference in the first bullet above?",pihole,1651202207.0
1031,comment,1,i6t51w9,,"So I’ve installed pinhole + unbound per the Portainer template. I’ve confirmed ad blocking is working, pi-hole shows 127.0.0.1 as the resolver, but when I run DNS leak tests all of them report quad 9 as the resolver. Any ideas?",pihole,1651338401.0
1032,comment,1,i6megsx,,"you only have one interface in the docker container, anything but local.",pihole,1651202350.0
1033,comment,1,i6u9vqr,,"More than likely you are using a browser based on Chromium with the ""Use secure DNS"" setting toggled on, this is also known as DNS over HTTPS.

In your browser go to Settings > Privacy and security > Security  and toggle off ""Use secure DNS"". 

Re-test for DNS leaks and let me know if this worked.",pihole,1651357832.0
1034,comment,1,i6meutb,,"Okay, I have “respond only on interface eth0” selected, and I am complying with all your points in your checklist.",pihole,1651202541.0
1035,comment,1,i6xa9qx,,"I've tried running the [dnsleaktest.com](https://dnsleaktest.com) test using Safari, Brave, and Firefox on Mac and I still get the same results - all pointing to WoodyNet.

I think there may be something wrong with my unbound setup, even though I used the Portainer template you referenced. I get quite a few ""Safari cannot establish connection"" errors even on sites that were able to resolve only a few minutes prior. I also see this in my logs. Not sure what it means or how to correcr:

unbound\[531:0\] warning: so-rcvbuf 1048576 was not granted. Got 425984. To fix: start with root permissions(linux) or sysctl bigger net.core.rmem\_max(linux) or kern.ipc.maxsockbuf(bsd) values.",pihole,1651424423.0
1036,comment,1,i72p1ot,,"I am not a macOS user but you may want to see what DNS servers are set at the OS level.   


Apple menu > System Preferences > Network > Advanced  


Check this for each of your network connections (ethernet, wifi, etc.) and make sure the OS is pointing to your Pi-Hole Unbound IP address.  Even though you have set your internal DNS server on your router, the local setting on the machine will ignore that and use what is stored in the network setting on the PC.",pihole,1651524334.0
1037,post,2,ue8fdu,Suddenly can't access PiHole web control panel or access Pi via PuTTY...,"I recently updated to the latest version of PiHole and it was working fine for a few days, but then suddenly my computer and any computers using it didn't have internet.  So I changed my DNS on my devices to get that out of the way, and restarted the PiHole manually.  

*This happened around 7PM CDT 24th, which I believe is around 12AM GMT on the 25th, so isn't that when the clocks change over in Euroland? (A few weeks after the US)  Just a hunch that maybe the units clock is wrong and can't function as a DNS server?*

&#x200B;

* The PiHole control panel is not accessible and I can't login via PuTTY anymore.
* My router says it still has its static IP allocated and with a status of ON.  
* No packets sent or received from the unit.
* The Pi has its power light on.  
* I haven't taken the SD card out yet to see if it just died.

I'm using a Raspberry Pi Zero 2 W.",pihole,1651189051.0
1038,comment,2,i6lm18q,,"I was having trouble. A reboot fixed till the following sunday...

This week I pulled the SD card and cloned it to a new one. We shall see Monday morning.",pihole,1651189548.0
1039,comment,1,i6madrd,,"A manual gravity update goes fine and it was like the files stem went read only and ssh stopped. I noticed that if I left a shell open when things went wonky then all commands failed too....

We will see in a few days. The orig micro SD was of questionable origin.",pihole,1651200372.0
1040,comment,1,i6mc3z2,,"Yikes,

this is my largest concern. The Pi-Hole is a single point of failure in my network. So far it's been flawless, but been up 5 days.",pihole,1651201185.0
1041,comment,1,i6ofo1c,,"something similar happened to me and it was the SD card. So now after re-doing things on a fresh card, i make sure to have a backup of the config and a second pihole running on Docker (on a separate pi) as a failover. if you want to get really fancy you could setup rsync to make the configs auto sync but i just use the same config on each.",pihole,1651247036.0
1042,comment,1,i6s4mk9,,"For whatever reason the PiHole webserver **started working again** suddenly and I can access it via PuTTY...  


* No traffic on it since the 25th.
* I have not touched the the device since I made the original post.
* I just had it plugged in and powered on.  


It might be worth noting that my DNS config uses OpenDNS w/ IPv4 only.",pihole,1651320082.0
1043,comment,1,i6sdttq,,"Try replacing the power adapter, unstable DC power can cause some funky stuff on the pi.",pihole,1651325582.0
1044,comment,2,i6lp50d,,"I sincerely doubt that's a coincidence. Sunday is ""gravity automatic update day"".",pihole,1651191006.0
1045,comment,1,i6uewd3,,"Not sure if that's it for me, but this is one of only two devices on my network that is not plugged into a surge protector or UPS.  Going to move both ASAP regardless.",pihole,1651360342.0
1046,post,1,ue7iv3,Dashboard Time,Is there a way to change the Dashboard time to 12 hour instead or 24 hour?,pihole,1651186307.0
1047,comment,1,i6n27w3,,"No option for that yet, sorry :/",pihole,1651218172.0
1048,post,0,ue6bqb,Quick question regarding static IP,"I’m about to set the Pi as my DNS through the router, but just wanted to make sure I’m in the right place and also ask about setting static IP for the Pi. 
“IP Pool Starting Address” and “Ending Address”, is the IP range for the DHCP server? So if I were to set the DNS to the Pi while the Pi’s IP is within that range, I could run into problems, but if I set it outside that range, everything would be good?
[Router settings](https://i.imgur.com/u1PnKwR.jpg)",pihole,1651182855.0
1049,comment,2,i6pew68,,">“IP Pool Starting Address” and “Ending Address”, is the IP range for the DHCP server?

Yes.

&#x200B;

>So if I were to set the DNS to the Pi while the Pi’s IP is within that   
range, I could run into problems, but if I set it outside that range,   
everything would be good?

Yes.",pihole,1651261641.0
1050,comment,1,i6l7vho,,"Also do I have to enable “Manual Assignment”, or just set the IP for the Pi from “Manually Assigned IP around the DHCP list”?",pihole,1651183038.0
1051,comment,1,i6l897x,,you can do something like `192.168.50.10 -> 192.168.50.254`  then just set the the static ip on the pi itself to `192.168.50.2`,pihole,1651183207.0
1052,comment,1,i6q5u8m,,"This option looks like a static lease, but outside of the DHCP range. To make sure you should have a look into the manual of the router.  
Above the ""basic config"" section I see a link to the FAQ which adresses this feature. You may have a look there.",pihole,1651273904.0
1053,post,4,ue3ast,How do I automate the teleporter to export from my primary to secondary on a schedule?,"I have two PIHoles set up as primary and secondary with a large number of regex filters, white/black lists, adlists, static IP's and group data. I can easily use teleporter to export from one to the other but would like a way to schedule this as a cron job or something to be able to forget about it unless there's a problem and only manage them on the primary. If the primary fails for some reason I will have to turn on the DHCP server on the secondary but if I added a static IP I would like it to just show up on the secondary without having to do it on both. Is there an easy way to make this happen?",pihole,1651174749.0
1054,comment,5,i6knmc0,,gravitysync,pihole,1651174930.0
1055,comment,2,i6kpn8i,,"Gravitysync for settings, adlists, etc. I adapted a script from somewhere to sync DHCP leases (including static) (basically just copying everything in /etc/dnsmasq.d/). Keepalived for creating a virtual IP that will automatically switch between primary and backup and trigger a command to enable DHCP on secondary during failover (and turn it off once it fails back).

I would share the scripts I was using, but I forgot to make a copy before blowing away my secondary/backup pihole 😭.",pihole,1651175720.0
1056,comment,1,i6kz404,,How does one blow away their pihole?,pihole,1651179397.0
1057,comment,1,i6l1rl1,,"Ha, well it was intentional as part of cleaning it off to decom. I just forgot that I didn't have the scripts backed up anywhere.",pihole,1651180483.0
1058,post,1,ue26n3,DHCP Server IP Address Range,"How can I setup my Pi-Hole DHCP server to allow IP addresses in the 192.168.1.x and 192.168.2.x ranges, but only offer leases to the 192.168.1.x range and then I'll use the other for static IP's?",pihole,1651171717.0
1059,comment,2,i6kje41,,"Change the subnetmask in `/etc/dhcpcd.conf` to 255.255.254.0, but set the DHCP range in the webpanel only from .1.1 to .1.254.

See [https://www.calculator.net/ip-subnet-calculator.html?cclass=any&csubnet=23&cip=192.168.2.1&ctype=ipv4&printit=0&x=65&y=22](https://www.calculator.net/ip-subnet-calculator.html?cclass=any&csubnet=23&cip=192.168.2.1&ctype=ipv4&printit=0&x=65&y=22)

Edit: It seems your range is not possible, only 192.168.0.1 to 192.168.1.254 or 192.168.2.1 to 192.168.3.254.",pihole,1651173288.0
1060,comment,1,i6ma3fk,,Do you have more than 254 devices? Otherwise you're just going to make things confusing doing this.,pihole,1651200241.0
1061,comment,1,i6kt3oo,,"I knew it would be an easy one; I just couldn't find it myself. 

Also, thanks for the info regarding the range issue. I currently have 1.x for everything, so I'll just make my super special stuff sit on 0.x!

Thank you so much!",pihole,1651177045.0
1062,comment,1,i6mjayw,,"Static IP and other important devices on one set, all the other crap (mobile devices, IoT, Chromecasts, etc. on the other. Simply to feed my OCD lol",pihole,1651204885.0
1063,comment,1,i6l2qhe,,"I did not test this, so I can't garantee this really works :D  
MAybe you can leave a message here if it worked.",pihole,1651180880.0
1064,comment,2,i6nr6tl,,"Why not let the DHCP range start at 192.168.1.100 and set static addresses 192.168.1.2-99 ?

Unless you really like playing around with VLANs, it’s a lot easier to use one /24 subnet for a simple network on a single link.",pihole,1651236388.0
1065,comment,1,i6l83kh,,"If course!

However, I can't find where to put the subnet mask in dhcpd.conf",pihole,1651183137.0
1066,comment,1,i6lk6nv,,"can you post what is already in the dhcpd.conf?
Edit: on what OS are you running your pihole? Do you even use dhcpd? Or what kind of network config do you use, do you know that? :)",pihole,1651188676.0
1067,comment,1,i6lyq7s,,"I'm running Pi-Hole on a dedicated RPi3B+ with a small SSD; I have it running as my DHCP server as well \[obviously\] my DNS server. DHCP is turned off at my main router, and my router's DNS is pointing at my Pi-Hole IP.

Not quite sure what you're meaning when asking what kind of network config...but with a little more context, I might be able to explain.  (I know just enough to be dangerous lol). 

As for the dhcpd.conf file, I copied it to [here](https://github.com/smibrandon/misc/blob/main/etc-dhcpd.conf%202022-04-28).

Thanks in advance!",pihole,1651195300.0
1068,comment,2,i6n7659,,"Alright, to make sure we do not break your network config, can you post the output of
`cat /etc/network/interfaces`?",pihole,1651222566.0
1069,comment,1,i6nc7ai,,">cat /etc/network/interfaces

Here ya go!

Edit...reddit really had a field day thinking what I pasted was used for formatting. Soooo, it's [here](https://github.com/smibrandon/misc/blob/main/-network-interfaces%202022-04-29)",pihole,1651226893.0
1070,comment,2,i6nqxwl,,"Ok there is only a link to config files inside `/etc/network/interfaces.d`. you could now show the insides of this folder for any configs, but screw that. I'm pretty sure the the entries in dhcpd.conf will overwrite configs in /etc/network/interfaces

So change in dhcpd.conf at the bottom the line the IP behind `static ip_adress=` to 192.168.0.100/23
Your Pi has than the IP .0.100 and the range of the subnet reaches from .0.1 to .1.254
Restart your device to apply the changes.

You can set then the DHCP range in the web panel of pihole to your desire. (Probably .1.0 to 1.254)",pihole,1651236261.0
1071,comment,2,i75kzy2,,"That all worked! Had a little challenge, and learned I also had to set the subnet on my router. Butttt...I've got it setup exactly like I was hoping. 

Thanks again! I appreciate your assistance on this!

&#x200B;

Now, if you have NGINX knowledge, you'll be my best friend forever lmao",pihole,1651583023.0
1072,comment,1,i761oia,,"Glad to hear you figured it out. Unfortunately I have no no experience with ngnix, I'm a lighttpd user.  
But just out of curiosity, what do you wanna know about nginx?",pihole,1651590174.0
1073,post,106,ue08c9,"Why do people configure an upstream DNS instead of installing unbound, and then using it?","I prefer to keep as much as I can to my local devices.  Using unbound, although it goes out to get the responses, it caches my common queries, making the queries faster to my devices, and provides me some security (I hope).  It also helps with some privacy.  I know the non-DNSSEC queries are open text.

Am I missing something?  Would it be better to have 1.1.1.1 or 8.8.8.8 as an upstream DNS entry?

EDIT:  I’m using it at home, and I don’t have a public domain name to be concerned with.",pihole,1651166548.0
1074,comment,39,i6k8w8w,,"I guess reasons to use a third party upstream are because it's easier and one less thing to maintain (not that setting up unbound is hard, but some people find bash intimidating, and that's fair enough), or because some upstream servers provide additional protections like their own blocklists.",pihole,1651169053.0
1075,comment,32,i6ka8mv,,"A number of ISPs (e.g. sky, virgin media) are turning to forwarding all UDP/TCP port 53 DNS traffic to their own DNS servers irrespective of the destination marked on the packet.

Hence I use DNSCryptProxy instead.",pihole,1651169598.0
1076,comment,46,i6kapyx,,"> it caches my common queries, making the queries faster to my devices

dnsmasq/pihole already does caching.

Security/privacy increase is debatable. Yes, not using a specific upstream DNS means that there isn't a specific upstream DNS server that can log your queries, but if e.g. your ISP wants to snoop on your DNS traffic, it doesn't matter whether you send those queries to 8.8.8.8 or recursively to the relevant authoritative servers.",pihole,1651169792.0
1077,comment,7,i6kf96l,,I use external upstream DNS servers because unbound gave me a great deal of trouble and I couldn't be bothered to deal with it. Speed has never been an issue so there's little for me to gain by switching to unbound.,pihole,1651171623.0
1078,comment,5,i6ly60g,,"it's one less thing to manage and depending [where you live](https://root-servers.org/), cloudflare and google's networks can offer better performance:

    1.1.1.1 or 8.8.8.8 | ping <20 ms; traceroute 7 hops

vs

    b.root-servers.net | ping ~35 ms; traceroute 11 hops
           ns2.zone.ee | ping ~110ms; traceroute 16 hops

zone.ee being just some random domain registrar that hosts their name servers overseas. it is a ""worst case"" scenario but you can see how it can add up quickly. personally, i trust cloudflare enough to send them my queries. google on the other hand...",pihole,1651195059.0
1079,comment,4,i6k5z5v,,"I use Cisco Umbrella (formarly OpenDNS) for my upstream DNS.

It allows some more generic filtering in addition to what I do with Pihole. I could do all this myself as you say but for the hassle it would be and how reliable OpenDNS has been it's not worth self hosting IMHO.

Been using it for over 15 years now and never had a problem. Also any new domains I fire up propogate there very quickly. They even have a web page to update their world wide cache when you start off new domains.

 208.67.222.222 / 208.67.220.220
2620:119:35::35 / 2620:119:53::53",pihole,1651167895.0
1080,comment,3,i6kfq9w,,"Some may not know about it, the benefits, or think it’s too hard to set up. I used to use upsteam DNS until I learned about unbound. Probably anecdotal, but the performance is great.",pihole,1651171813.0
1081,comment,6,i6kna5d,,"Because that assumes that:

A) people understand or are able to do it

and/or

B) they could be bothered",pihole,1651174804.0
1082,comment,4,i6k46cu,,I use the Cloudflare family DNS 1.1.1.2 & 1.0.0.2. For all the stuff I really care about keeping away from my ISP (AT&T) I use TOR.,pihole,1651167174.0
1083,comment,2,i6ktlc0,,"Using Quad 9 for its threat blocking capability.  It may overlap with some block lists, but I like the extra protection.  Plus their privacy policy seems solid.",pihole,1651177231.0
1084,comment,2,i6l4j2l,,"I use NextDNS with DoH on my router for the filtering, and on the router I do have caching setup to cache 7 days of requests to speed things up.  I did have a pihole setup but the pihole does not work for me when I am away from the home network and with NextDNS I can DoH all teh dns to the same dns servers, blocklists etc with ease.",pihole,1651181623.0
1085,comment,2,i6nld07,,"It also helps with some privacy. I know the non-DNSSEC queries are open text.

To be clear DNSSEC in no way obscures your DNS queries. DNSSEC is a cryptographic thumbprint use to verify the authenticity of the response to your query. The queries and response are in clear text and the response will have an additional record which is the cryptographic thumb print that your resolver will verify to ensure you haven't been man in the middled",pihole,1651233206.0
1086,comment,4,i6k5k2v,,My upstream DNS from the Pihole are my domain controllers. That controls my home lab and all of the DNS stuff at home. It has forwarders set up for everything else. It has been working well so I leave it at that. It is local to the network vs local to the Pihole.,pihole,1651167730.0
1087,comment,3,i6kfy4g,,"The average internet user can't even install pihole, or even has the will to inform yourself about this stuff.",pihole,1651171901.0
1088,comment,1,i6knlue,,"Among other reasons listed, Mullvad at present still hijacks port 53 traffic so Unbound is near impossible to use despite myriad attempts at doing so. It felt kinda pointless if I was just routing unbound traffic out of the VPN just for local DNS.",pihole,1651174926.0
1089,comment,1,i6knyup,,"In my case, it was because I didn't think Unbound on OpnSense supported any of the encrypted DNS protocols, so using dnscrypt-proxy+local AD servers+Pihole were closer to what I wanted to do. Now I just have dnscrtpy proxy, and Pihole, but I don't feel like reconfiguring to use Unbound when I have a working setup.",pihole,1651175067.0
1090,comment,1,i6l8isy,,"Less to maintain, and judging by your description, I don't really see enough of a benefit. Plus Pi-hole already caches queries.",pihole,1651183322.0
1091,comment,1,i6ln0rv,,"I use unbound and pi-hole. They just work out of the box with the installation with DietPi. I also use Pivpn, it’s so great. Speed is so much better than standard connection with ISPs dns. Regarding security, not a big expert but I think you should encrypt the DNS requests to another VPN server so in that case the ISP will only see encrypted stuff.",pihole,1651190011.0
1092,comment,1,i6lp8bz,,"I have PiHole -> local authoritative DNS -> cloudflare/Quad9

PiHole is advertised in DHCP.  My local DNS responds authoritative for my local domain and caches upstream for non-local DNS queries.",pihole,1651191048.0
1093,comment,1,i6my1q1,,"I use Quad9 for upstream DNS because they also maintain anti-malware blocklists. It's an extra layer of protection and it means I don't have to set up and maintain yet another service (unbound) locally. (Yeah, lazy.)

If unbound was already integrated into pi-hole I might change to using that.",pihole,1651214687.0
1094,comment,1,i6nc1ox,,"Mine point to quad 9 filtered dnssec. Works great out of the box, tons of stuff is filtered. Don’t really care to mess with it too much.",pihole,1651226763.0
1095,comment,1,i6nm216,,When I first set up my pi-hole I tried to set up unbound based on both pi-hole’s instructions and inbounds own. In either case it did not function properly. I didn’t feel like taking the time to figure it out and just set up a few third party upstreams. I wasn’t so worried about privacy of my browsing history as I was devices and apps sending data who-knows-where.  If the step-by-step instructions actually provided a working end result then more people would do it.,pihole,1651233612.0
1096,comment,1,i6nxn5a,,"My main gripe from when I had Unbound set up was that it was an extra service to clear the cache on when I made a change to any public domains.

Plus, it could never resolve any of the internal domains I needed for work despite them being public DNS records 🤷",pihole,1651239465.0
1097,comment,0,i6n2pa4,,"And easier to config for roaming endpoints.

What upstream provider are people recommending? I got a price on the cisco product a few years back and couldnt believe the high cost.",pihole,1651218593.0
1098,comment,8,i6mnm35,,"If ISPs doing this, is there a way for user to know if isp doing this???",pihole,1651207357.0
1099,comment,4,i6kayq3,,I do have DNSSEC configured.  But I have not heard of DNSCryptProxy.  I’ll look into that.,pihole,1651169891.0
1100,comment,7,i6kgtu2,,"I use unbound in an Oracle free tier compute instance then my local pihole connects to for upstream via a wireguard split tunnel vpn.

My ISP is sky they have no control over my personal DNS all they see is my wifes phone, the sky q box and guests that don't care for DNS privacy.

It's really shitty what our gov is forcing ISPs to do.",pihole,1651172260.0
1101,comment,1,i6l4a1y,,"So my Pihole, asking [1.1.1.1](https://1.1.1.1) for a DNS via Virgin will use Virgin??? WTF?",pihole,1651181518.0
1102,comment,7,i6l32cr,,Unless you tunnel the queries trough a VPN to hide the dns traffic from your ISP.,pihole,1651181015.0
1103,comment,5,i6ka51g,,How do you get umbrella for home use?,pihole,1651169557.0
1104,comment,-1,i6l29bs,,"I mean I guess, but if you’re already setting up PiHole then you’re able to do Unbound as well. Following the official PiHole guide is dead simple",pihole,1651180687.0
1105,comment,2,i6mvt07,,"Also, most average internet users don't care about neither security nor privacy.",pihole,1651212961.0
1106,comment,1,i6kozvr,,"I understand that most internet users have not, can not or will not install PiHole.  I’ve been using PiHole and unbound for about six months.  I’m curious as to how and why other PiHole users configure their systems differently.

I also use a Dream Machine Pro, with several VLANs configured, some with internet capability; some without.  Most people have no idea what that means.",pihole,1651175466.0
1107,comment,2,i6lgkdr,,"My network was compromised last year.  So I am trying to do everything I can to protect it myself, since I don’t trust xFinity/Comcast or consumer routers to keep my network protected.  

I have gone prosumer with Dream Machine Pro.  I purchased my own Arris modem.   

This is why I want to rely on my own configurations.  I don’t want to rely on another’s DNS servers.",pihole,1651186974.0
1108,comment,1,i6nwaxb,,I found the step-by-step instructions worked flawlessly for setting up PiHole and Unbound.  I installed them on a fresh install of Raspian.,pihole,1651238851.0
1109,comment,3,i6nglqw,,"Yes, you can use this to see the actual IP of your resolver: [https://www.akamai.com/blog/developers/introducing-new-whoami-tool-dns-resolver-information](https://www.akamai.com/blog/developers/introducing-new-whoami-tool-dns-resolver-information)

(NB: google and cloudflare will not appear as `8.8.8.8` and `1.1.1.1`, you have to check with `whois IP_ADDRESS` and reverse dns `dig -x IP_ADDRESS`)",pihole,1651230192.0
1110,comment,2,i6n0g3k,,I'd expect [dig](https://linuxhandbook.com/dig-command/) to show the traffic being routed to the wrong server. Just a guess though TBH.,pihole,1651216646.0
1111,comment,1,i6njn85,,"There are tools, I think another strat would be perhaps to select a filtering based DNS server and see if you can resolve a record that should be filtered.",pihole,1651232178.0
1112,comment,1,i6nfadu,,"Thanks to this post I've just realised this is happening for me too when using unbound on my pi (I'm on Now broadband which is effectively Sky broadband).

Looks like I'll need to use cloudflared and then presumably Sky's blocking of certain websites can be circumvented?",pihole,1651229265.0
1113,comment,14,i6l4s50,,"This is why DNS over https exists.

Setup via cloudflared https://docs.pi-hole.net/guides/dns/cloudflared/

or DNSCryptProxy https://github.com/pi-hole/pi-hole/wiki/DNSCrypt-2.0",pihole,1651181725.0
1114,comment,1,i6nfdfe,,Looks like it. I've just realised that's happening for me on Now broadband (Sky).  Using unbound but a DNS leak test shows that my DNS is actually Sky.,pihole,1651229327.0
1115,comment,5,i6n9k54,,"That is true, pushing DNS through a VPN will hide your DNS traffic from your ISP, but you could argue that we're merely moving the goalposts here. Now you need to decide if you trust your VPN provider not to snoop on your DNS traffic.

DNS-over-HTTPS (DoH) will avoid this plaintext-DNS eavesdropping completely, but since it is only suported by ""DNS forwarders"" and not by roots and authoritative servers (AFAIK!), then this yet again places the burden of trust onto someone - the DoH service provider.

Seems like at the end of the day, you gotta trust someone... :/",pihole,1651224666.0
1116,comment,15,i6lil2u,,"But then that ISP will have them 🤷‍♂️ 

It’s a network built on knowing where things come from and where they want to go.",pihole,1651187923.0
1117,comment,1,i6n16zx,,And then what? You get the IP address and visit that server. Then your ISP knows you’ve visited that server… Hiding DNS from your ISP without hiding all your traffic makes no sense.,pihole,1651217281.0
1118,comment,1,i6mcq0z,,"To get it for home use you basically have to work for Cisco. If you don’t, then using OpenDNS Home or OpenDNS Family Shield is as close as you can get for general upstream DNS via your Pihole.

There is also a “OpenDNS Umbrella Prosumer” tier you can pay for, but it requires installing an agent on your computer and so will not work in tandem with Pihole.

Home and Family Shield are still great options for lots of people though.",pihole,1651201484.0
1119,comment,9,i6lcdqc,,"For me, it's all about B).   I have done so many cool geeky projects like pihole over 30+ years and the experience of doing so has taught me that the pleasure I get from setting it up is rarely matched by the pleasure of keeping it working,   

e.g. A critical system software security update knocks out the software that did the thing, and then the software updated but wouldn't run on older hardware and then you have to buy new hardware and then the open source project gets bought by Elon Musk and sold to Tim Apple or suddenly it's the Microsoft Thing™ and security updates stop at version 0.9b and a year later you discover the thing is actually just DDOS'ing Ukranian utility websites.

Sometimes cool things are just a bit of a pain to keep alive unless you have time to dedicate to them.   Replacing commercial upstream servers with Unbound seems like that thing to me, though I do love my pihole.",pihole,1651185052.0
1120,comment,1,i6lht31,,How did your network get compromised? Did you have stuff open to the internet?,pihole,1651187554.0
1121,comment,1,i6qdhs0,,"Perhaps they’ve fixed the instructions now; but when I followed them it didn’t work (well, it would for a few minutes and then it would stop until I restarted everything). As I said I didn’t really care too much about it so I just set upstream resolvers and have been happy.",pihole,1651277539.0
1122,comment,2,i6nj9wn,,"https://github.com/DNSCrypt/dnscrypt-proxy

https://dnscrypt.info/public-servers/

I really do recommend dnscrypt-proxy over cloudflared. You can pick from 200 or so random DNS providers, enforce no_log, dnssec and apply an additional layer of regex/website filters.

If you pick random servers after the queries are cached, and filtered, what exactly can be inferred from that data?

It's open source too.",pihole,1651231952.0
1123,comment,-5,i6l6bpd,,"I would recommend using DoT, with stubby.  
DoH is pushed by Google as it is easier to implement in Chrome.  
Technically your ISP could block DoT, but they can't redirect it sneakily.",pihole,1651182377.0
1124,comment,1,i6nxazv,,"Wonder if it's the Virgin (or Sky) Router which would be doing (overriding) that then, as I've got mine hooked up in modem mode to a 2nd router (Asus 82U), and DNS Leak test shows Cloudflare as expected from my pihole.",pihole,1651239314.0
1125,comment,2,i6ni0wd,,"Correct, at the end of the day, we need to put our trust somewhere, unless we delete all our accounts and use tor for everything.

On my current trust-list:
Mullvad VPN
Protonmail
ProtonVPN

The funny thing about trust, it changes daily…

Thanks for a good discussion, hopefully this info can help others!",pihole,1651231152.0
1126,comment,1,i6nkisq,,">DNS-over-HTTPS (DoH) will avoid this plaintext-DNS eavesdropping completely, but since it is only suported by ""DNS forwarders"" and not by roots and authoritative servers (AFAIK!), then this yet again places the burden of trust onto someone - the DoH service provider.

Not necessarily true. If you have a resolver that constantly picks random DoH providers, they shouldn't really be able to infer anything from the request data in theory.

There is also the ODoH being pushed out which provides again random intermediate proxies so the providers can't even tell who originally made the request.",pihole,1651232711.0
1127,comment,-1,i6mkpv6,,But that ISP won't know who you are.,pihole,1651205684.0
1128,comment,1,i6n4jje,,"Well, it’s up to you to properly route the destinations trough a different gateway if you wanna move all of the trust to the vpn. In some cases it might be enough to segment dns traffic and other connections for a more simplistic obfuscation, as long as the websites you are using have ssl. 

Your isp knows who you are, why enable them to correlate your personal information with all of your dns queries? Just use dnssec for example.

Also, your isp is not saving your ip connection history in the same way they save your dns traffic, whole another level of scrutiny. 

You should obfuscate as much as possible for your isp. I’m not saying that any of this is the definitive method, however, some places have really bad isp’s doing all kinds of crazy stuff, to each is own.",pihole,1651220218.0
1129,comment,4,i6lp1vk,,"I get what you mean and I’m not trying to change your opinion, just saying the Unbound is a well established package that requires little to no maintenance apart from updates, to be reliably used as a private resolver. I’m and IT pro and anytime I think about doing the next cool project, I definitely think long and hard about how much time I might spend fixing the thing or just maintaining it, and I was pleasantly surprised by Unbound, and PiHole for that matter.",pihole,1651190967.0
1130,comment,2,i6lia1q,,I don’t know how it was compromised.  I only know that all traffic was being redirected.  Camera feeds were being modified.  I had a Blue Iris server exposed via port forwarding.,pihole,1651187777.0
1131,comment,1,i6npga9,,Looks better but possibly more complex to set up to a non Dev like me!  Will look into it in any case.  My main goal is to circumvent content blocks mainly of torrent sites.,pihole,1651235481.0
1132,comment,1,i6nyei0,,"Cloudflared can be used with non-Cloudflare DoH servers, fwiw. I use it with Quad9 as its upstream. Seems to be better than dnscrypt-proxy as far as stability IME, if you usually use a specific set of servers.",pihole,1651239802.0
1133,comment,10,i6l6uvx,,"DoH is also pushed by Mozilla, Microsoft, Apple, Cloudflare and NextDNS and others. ODoH was produced by both Apple and Cloudflare.

If you don't want to use them, use dnscrypt-proxy, it maintains a list of 200 DoH relays and you can pick randomly from the top 100 or lowest latency resolver.

DoH is hidden in plain sight, the ISP can't tell you are using it. DoT can be blocked. DoH is also gonna be more important when ECH eventually comes out which will plug up the SNI hole.

Both are fine and don't really give one advantage over the other. In fact I run a local DoH instance that is firefox/chrome compatible via dnscryptproxy.

I can also put in a second blacklist in the dnscrypt-proxy layer via regexes which I personally find rather useful.",pihole,1651182599.0
1134,comment,1,i6o5a1y,,It's not at the router level as I am not using the ISP router.  It must be happening in their network.  Are you on Sky or Virgin?  I think Virgin from your previous post implying they are not redirecting DNS traffic.,pihole,1651242777.0
1135,comment,5,i6mprzv,,Ofc it does. You have a payment schedule with them.,pihole,1651208730.0
1136,comment,1,i6s47ex,,"I looked into cloudflared but looks like it has issues with the Pi Zero W which is what I have.

I am thinking of trying Adguard Home instead of pi-hole as it appears to support DoH out of the box.",pihole,1651319796.0
1137,comment,1,i6ndl2o,,"[EDIT]  
My answers is getting lengthy so here's a tldr :  
The issue is not WHO runs the relay. The issue is that the entire protocol is a goldmine for ad providers, who can simply run their private DoH relay.  
That's the tech equivalent of advocating to ""bear arms"" to own a pistol to defend against robbers, and end robbed by somebody with a nuke. If I consider Pihole to be a wonderful tool on my network, then I don't see how I could defend a protocol that overrides it.  
[/EDIT]  

*Frame challenge:*
Because the roots don't support encryption, we *need* to trust *someone* else along the DNS path. The ISP, a VPN/proxy, or the DOT/DOH resolver.  
If your ISP is REALLY blocking legitimate requests, securing DNS won't be enough. You would need a VPN/proxy, then the ""DNS vs DOH vs DOT"" is about securing from the VPN gateway.  
Because it's useless to trust two middlemen, I would say in theory the best would be VPN+Unbound, because DoH/DoT won't help if the ISP starts interfering with other protocols.  
*Now, we can go back to DoH vs DoT.*  

> Cloudflare and NextDNS and others.  

NextDNS supports DoT too. I *just switched* from cloudflared to Stubby. But yeah, the cloudflared tool from cloudflare doesn't support DoT and only provides DoH resolution.  

As far I can tell, *resolvers* don't have a ""no DoT"" policy, it's more on the provided *clients*. Like Chrome and Firefox which are browsers and already handle HTTPS, so *for them* it is easy to implement.  
And once DoH is built in the browsers, it is the mainstream protocol, no matter how suited it is.  

> DoH is hidden in plain sight, the ISP can't tell you are using it.  

DoH is hidden in plain sight, *you* can't tell if your devices are using it.  

> DoT can be blocked.  

DoH can ALSO be blocked by blacklisting the IP addresses. Users will need a *public* list of IP adresses, so the ISP can block them.  
When DoH is blocked *you don't have a connexion* which is kinda easy to notice. The real issue is when you get ""false answers"" which DoT prevents too.  
I don't see an issue with a protocol that can be blocked when the network administrator doesn't accept said protocol. The DNS issue was that a the netadmin could send *different* results.  

> use dnscrypt-proxy, it maintains a list of 200 DoH relays  

Who is going to have a better chance at blocking DoH? Every pihole user, who will need a router able to parse an IP list, of your ISP, which has the same list as you?  
If your ISP can easily block it, but users can't, who is going to use DoH? The IOT manufacturers who try to circumvent the network's DNS blocker.  

> DoH is also gonna be more important when ECH eventually comes out which will plug up the SNI hole.  

Now you interest me. At a privacy level, what is the upside of DNS-over-TLS, and DNS-over-HTTPS (which is the app layer leveraging TLS)  ?  
From what I know, it's the same but *hard to detect* with a performance downside. There's another upside besides traffic detection?",pihole,1651227985.0
1138,comment,1,i6o5l0s,,How are you on NowTV without using the sky hub? Do you have an alternative MER compatible router?,pihole,1651242903.0
1139,comment,1,i6o8pi2,,"Virgin. And I opted out of their ""Advanced Search"" years ago, maybe that's (part) of the solution.",pihole,1651244200.0
1140,comment,-1,i6mqcyv,,"What.

You pay a VPN, they know who you are (though good VPNs let you pay anonymously), their ISP knows who the VPN is, but they don't know who the VPN's customers are. If you send DNS through a VPN, the VPN provider might know what your DNS queries are, but that's it.",pihole,1651209106.0
1141,comment,2,i6ngw6s,,">If your ISP is REALLY blocking legitimate requests, securing DNS won't be enough. You would need a VPN/proxy, then the ""DNS vs DOH vs DOT"" is about securing from the VPN gateway.

This depends on HOW they are filtering requests. A significant amount of ISPs and mobile providers rely on DNS purely for implementing filtering.

Granted this is also why I have my own personal global (residentially hosted at family members) VPN but equally I don't really visit sites that are often blocked.

>As far I can tell, resolvers don't have a ""no DoT"" policy, it's more on the provided clients. Like Chrome and Firefox which are browsers and already handle HTTPS, so for them it is easy to implement. 

The motivation for Chrome and Firefox is more complex than you envision. I think the idea of implementing DoH as is, is for future optimizations on the connection. I.E. Given the response is in JSON, when you request x.blog.com, the DoH resolver can give more metadata upfront for say resources and/or likely subsequent DNS records.  E.G. You are requesting x.blog.com, you will likely need these fonts, or to resolve fontawesome as well.

Not to mention the whole prevention of ISPs/enterprises screwing with the web via DNS records.

>DoH can ALSO be blocked by blacklisting the IP addresses. Users will need a public list of IP adresses, so the ISP can block them.

The ISPs will never block cloudflare, next-cloud and the relays. They may do for individual ones, but blocking off say cloudflare or any major CDN would have major repercussions for the web.

>If your ISP can easily block it, but users can't, who is going to use DoH? The IOT manufacturers who try to circumvent the network's DNS blocker. 

I get the problem of hardware vendors hardcoding DoH and looking for ways to bypass dns based adblockers. However, you can't block cloudflare. You do that you cut yourself off to 10-20% of the internet.

>From what I know, it's the same but hard to detect with a performance downside. There's another upside besides traffic detection?

You get a privacy win from it being hidden in plain sight, and potential future speed/performance benefits by the browser doing cool things with metadata in the protocol and/or ECH support.",pihole,1651230390.0
1142,comment,1,i6og1r7,,"Yes, a TP Link.",pihole,1651247191.0
1143,comment,8,i6mreya,,"Wow. So instead of trusting your ISP, you are now trusting the VPN + the VPN's ISP? Lol. 

Either way, that's too many chains of trust for little if any anonymity.",pihole,1651209805.0
1144,comment,1,i6nndi7,,"Hmmm, yeah I guess the DOH records may sends extra info intended for HTTPS use. Why not, maybe in the future it could help. However, assuming your device contact over DNS Pihole that then sends a request, I think we're a *loooooong* time away from getting preloading benefits from DOH. We'll have to see I guess...  

However, I don't think that cloudflare will ever tie it's cdn to the use of their DNS resolver. Doing so would break the web, (or at least ask for *a lot* of performance usage, given how ""wasty"" DNS can be).  
Let's say you want to setup your network to filter with Pihole : if an ISP would break the web by blocking Cloudflare DOH, Pihole would break the web as well when putting IoT outside Cloudflare.  

The issue is that the ISP and ourselves are in exact the same situation : both try to force the lower-access to obey DNS filtering. The only difference is that the ISP is way more qualified to setup a solution.",pihole,1651234358.0
1145,comment,1,i6omsno,,How did you extract the username and password from the router?,pihole,1651249918.0
1146,comment,1,i6mrx4e,,"You don't need to trust the VPN's ISP, they don't know who you are, only that *some traffic from X VPN is making this DNS query*. If the VPN has more than 1 customer, it can't be linked to you without the VPN's cooperation.

You have to trust someone somewhere if you ever want to be online. You have to pick who seems more trustworthy based on your security situation.

But since you can pay for a VPN anonymously, they have the fewest bits of information about you, even if they end up being a bad actor.",pihole,1651210148.0
1147,comment,1,i6nsbc7,,"I know the design of cloudflare's infrastructure both cdn and DNS. There is no dedicated server differences between them both run and point to the same edge servers.

i.e. https://blog.cloudflare.com/unimog-cloudflares-edge-load-balancer/",pihole,1651236955.0
1148,comment,1,i6opbri,,"You don't need to.

Just use whatever@nowtv for the username and whatever value you want for password.",pihole,1651250933.0
1149,comment,5,i6mua45,,"Your traffic on a VPN network can be distinguished by the provider since you have to connect to them through an access point (HW mac address in the case of openvpn or a via smartphone app) and can even be pinpoint accurate if you are accessing unique domains.

If you use Tor, you do not have to trust any individual operator to get online.

I do however agree that with VPNs that accept anonymous payment methods  you can get a nice balance of anonymity and privacy. Though most crypto can still be tracked. So it's not as bulletproof as Tor.",pihole,1651211826.0
1150,comment,1,i71oucr,,"Yeah, so the DNS service is... not tied to the cdn/loadbalancer?  
Any request aimed at their IP address will work. You can get said address from any DNS resolver, right?",pihole,1651509847.0
1151,comment,2,i6ndfls,,"If you use Tor to access sites outside the Tor network, not for DNS, but you need to trust the exit node.

Different vector, but still there are some issues there.",pihole,1651227869.0
1152,comment,1,i71rcpf,,"Basically all cloudflare services run on the same host. 

ISPs can't fuck with port 443 traffic, because it is shared by everything else on the web, there is no way for ISPs to break DoH to cloudflare without breaking 10-20% of the web and therefore user web pages.

Port 53 DNS traffic, can be intercepted and forwarded to their own revolvers without breaking the web or cloudflare.

DoT traffic can be blocked without impacting anything major and gives away more metadata than DoH.",pihole,1651510831.0
1153,post,26,udr59n,Probably a stupid question (DHCP and DNS1 and DNS2 related),"Hi guys, it's probably obvious for the wizards on this sub but it doesn't make any sense to me...

I've been running my primary Pi-hole setup (a virtual machine) for a long time, and it also acts as my DHCP server (192.168.2.90)

I've recently installed a secondary Pi-hole (VM also) on a different machine (192.168.2.91) because I sometimes have to reboot the other ""primary"" VM , and the kids and wife complain that ""Internet stopped working again"" (you absolutely know what I'm referring to :P)

So since I've installed that secondary Pi-hole VM, I've added the IP addresses of both my Pi-hole VMs in my router as DNS #1 and DNS #2 but I doubt it's useful because to my understanding, the DHCP server is the one responsible for announcing to the devices which DNS servers (or forwarders in this case) are available. As far as I know, Pi-hole can only announce itself as the only available DNS server/forwarder, and it totally ignore Pi-hole #2 even exists.

The solution I thought about was to specify, in the Pi-hole ""Upstream DNS servers"" under ""Custom 2"" the adress of IP address from the Pi-hole #2 on the Pi-hole #1, and the adress of the Pi-hole #1 on the Pi-hole #2, but it obviously wouldn't work if one of the server reboots or crashes (so yeah it pretty muchs breaks the purpose of having a second Pi-hole), and they're flooding each others with queries and getting rate-limited after a few seconds anyway so it's a no go.

What do I have to do with my Pi-hole #1 / DHCP server if I want it to be able to tell my devices, when they connect, that there is a Pi-hole #2 they can also use (so to make it act like my router if I used it as my DHCP server basically)? I thought about using both servers as DHCP servers but it's a pain in the ass because I have a very long list of ""static DHCP leases"" Gravity Sync isn't able to sync between both servers.

Any idea?

Many thanks, and I hope my explanations were clear (English is my third language)",pihole,1651138451.0
1154,comment,15,i6ik3ju,,"Create a .conf file. sudo nano /etc/dnsmasq.d/02-secondarydns.conf and type dhcp-option=6,yourIP1,yourIP2. Ctr+x and then y to save the file. sudo service dhcpd restart",pihole,1651140100.0
1155,comment,1,i6il9u2,,"Pretty sure if clients are still on the same DHCP lease that nothing would change while you power cycle VM1 and clients would still be able to query VM2. There are different ways you could configure things, but on VM1(DNS+DHCP) you could firstly just go and renew the leases then make them last much longer. You could also give static leases to your commonly used devices if you want

This is more preference, but it's probably easier to use a separate DHCP server like the one available on your router while also having several pihole(/unbound) instances on the network for redundancy. You can mitigate the risk of losing DNS by having overkill with several discrete instances. If one goes down it just doesn't matter. Some use Gravity Sync, but it's not really necessary

Further, you can make them all VPN servers at the same time and have the same redundancy for remote access if you would like to",pihole,1651141086.0
1156,comment,1,i6ke8fg,,"My ""solution"" goes like that. I use only one Pi and my router is set up to use the PiHole as DNS1 and I use 1.1.1.2 (CouldFlare no malware DNS) for DNS2 so if my Pi is not available for some reason it falls back to the CloudFlare one. Sure at that moment I don't get the benefit of the PiHole but that's OK, it's not that often that my Pi drops from the internet.",pihole,1651171208.0
1157,comment,6,i6ik8ic,,"No way? It's that simple?  


MANY thanks!",pihole,1651140215.0
1158,comment,1,i6jsym9,,"If it wouldn’t be a bother, I don’t suppose you might be open to an ELI5-style explanation of what those commands do (and on which device one would need to make that change)?",pihole,1651162667.0
1159,comment,1,i6o1bwb,,"Complementary information if someone stumbles upon that thread in the future.

I've noticed modifying ""02-pihole-dhcp.conf"" is temporary and it will be modified back to its default state by Pi-hole at some point if you login into the Pi-hole webui, as mentioned in the file itself:


> ############################## # DHCP SERVER CONFIG FILE AUTOMATICALLY POPULATED BY PI-HOLE WEB INTERFACE. # # ANY CHANGES MADE TO THIS FILE WILL BE LOST ON CHANGE #


What did the trick was creating a new file in /etc/dnsmasq.d named ""22-extra-options.conf"" which contained my line:

dhcp-option=6,192.168.2.90,192.168.2.91

It will override whatever's written in 02-pihole-dhcp.conf on that specific ""dhcphoption="" line",pihole,1651241089.0
1160,comment,1,i6im1n5,,"I've removed the leases in both Pi-hole, just to be sure, and disabled/re-enabled wi-fi on my router and access points. It forced like 90% of all the devices there is on that network to re-acquire an IP lease (mostly smart lights, thermostats and appliances, phones/tablets and my kids' consoles, etc. with a static leave).  So far most of them look like they have also noticed the secondary DNS forwarder address when they reconnected because I see some queries reaching the Pi-hole #2 too now (and not just the VM itself). Both are using Unbound.

For the wired devices, I guess I'll have to reboot them at some point anyway ;) Next step will be to add redundancy for my VPN (using WireGuard) and my reverse proxy (Caddy, nothing fancy).

Thanks for the tips, have a good one",pihole,1651141680.0
1161,comment,1,i6kr7zm,,"Most devices use all DNS servers provided by the DHCP server. I tested this on my local network with 3 DNS servers and noticed that all are getting queried. Devices don't use DNS1 and if they don't get a response then they query DNS2. Most devices query all DNS servers and fetch the fastest answer from any server. 

Let's assume I'm wrong and devices query only DNS1. If it goes offline then the secondary DNS (1.1.1.2) would resolve your queries, filling your clients' dns cache with IP addresses your are trying to block with pi-hole. Even if pi-hole comes back online your clients will use their own dns cache thus bypassing DNS servers entirelly. I know that because I had the same configuration as you early on.  


Another issue I noticed: I had my pi-hole provide only one DNS server (itself). I noticed that some smartphones would use their hardcoded DNS server ([8.8.4.4](https://8.8.4.4)), thus bypassing pi-hole. So I configured my DHCP server to provide a bogus secondary dns address (my DNS IP address twice) so that smartphones don't use their hardcoded DNS. I could be wrong here but it doesn't hurt anything.  


Like you said. it's not that often that my Pi drops from the internet. I have 4 of them and none of them crashed once. Pretty reliable little machines.",pihole,1651176323.0
1162,comment,8,i6j1c5m,,"Hah! Everything is simple when you know how to do it!

Reminds me of the plumber story--  A man owned a large office building that was having problems with the hot water. He called a plumber. He followed the plumber all throughout the building. Finally, the plumber stopped, pulled out a hammer, and tapped five times on a pipe with a large wrench. The plumber cocked his head and squinted for a minute or so.

""OK! That'll do it!"" said the plumber, ""That'll be $500.""

The man was mortified. ""What?!! $500 to tap on a pipe?! That's outrageous! That's insane! I demand an itemized bill!!""

The plumber thought for a moment, and reached into his back pocket, pulling out a pad of paper and a pen. He wrote for a moment, then tore off a page and handed it to the man. It read:

   * Tapping on pipe:              $0

   * Knowing where to tap:    $500",pihole,1651150939.0
1163,comment,5,i6ikg01,,Yes. You can even add more than 2 dns servers if you like.,pihole,1651140388.0
1164,comment,5,i6k3kba,,"In a few words: Since you can't do it through the web interface of pi-hole you have to do it by manually editing the configuration files in etc/dnsmasq.d/

Why do it this way: Since the OP has two servers running, he wants his primary DNS+DHCP server to advertise the IP of the secondary DNS server so that if one server goes down for maintenance there will always be one server online to receive client requests and devices will use the secondary DNS if the primary DNS doesn't respond or is slow to respond. If you only use one DNS server on your network when it crashes or stops working then devices can't resolve domain names to IP addresses and thus you can't access websites. 

What is DHCP: When a client-device connects to a network it asks the DHCP server for an address through the broadcast channel. The DHCP provides an IP address alongside with IP addresses for DNS servers. 

The problem: The web interface of pi-hole doesn't give you many options about DHCP. The DHCP server only provides its own IP for DNS. If you have another pi-hole server running on the local network clients wouldn't know about its existence. So you have to dig into the configuration files and modify them accordingly. Then we have to restart the dhcpd service that is running when DHCP is enabled. After that, when a device connects to your network it will be served with an IP address and the DNS servers that you have configured. Personally I'm also interested in blocking devices with their MAC address so that they don't get server an IP address at all. You can do that too.

What machines you need to do this change: Your machine that is running your DHCP server. Ideally you need one DHCP server on your network.",pihole,1651166929.0
1165,comment,1,i6l16p0,,"The point about cache is a good one, but in my experience, or at least with my router the Primary DNS is the only one that is used unless it's not working.",pihole,1651180244.0
1166,comment,6,i6ikt4h,,"Working great, thanks again!

https://i.postimg.cc/W1q2WTrQ/explorer-0-Sk2-Zv-Ga-XF.png",pihole,1651140700.0
1167,comment,1,i6jw94c,,"This gets the second PIHole working on the clients. Is there a way to sync the gravity and other settings on the two other than using teleporter? I just did this to get a secondary up and running. Thanks for posting, it helped me too.",pihole,1651164001.0
1168,comment,2,i6k3x9l,,That’s extremely helpful—thank you so much!,pihole,1651167072.0
1169,comment,1,i6k4u1q,,Happy to help. I wish I could help further but I only run the Steven Black blocklist so I don't have many settings that need to be synced to the secondary pihole. Both pi-hole servers do an automatic gravity update once a week so at least my lists are the same between the two.,pihole,1651167440.0
1170,comment,2,i6k5puu,,Thanks for the response. I have a number of ad lists and regex entries on mine and have used the teleporter function/feature to get them the same on both.,pihole,1651167794.0
1171,post,4,udpb5k,Weird issue with DNS responses,"Hey, so for some reason my pihole gives two different ip addresses for the orion.managewp.com. 

When spamming nslookup, it gives 54.149.181.96 (wrong) and 52.88.29.150 (correct) so that every second response the other is first address and every second the other.  

I have changed the upstream DNS from google to Quad9 and restarted the DNS service but no change.",pihole,1651130172.0
1172,comment,1,i6il77b,,"I'm totally guessing: could some sort of load balancer redirect you to another server with another IP? And maybe this other server is not available, but the load balancer doesn't know?
For how long do you have the issue?",pihole,1651141028.0
1173,comment,1,i6ivhv8,,Not sure if this will help but I get [54.149.181.96](https://54.149.181.96) for orion.managewp.com,pihole,1651147890.0
1174,comment,1,i6jp0kn,,"Both those addresses are returned by a standard query, there both are 'correct'.

No change to upstream servers is required.

Output from nslookup:

Non-authoritative answer:Name:    [prod-elb-orion-tcp-nat-393404146.us-west-2.elb.amazonaws.com](https://prod-elb-orion-tcp-nat-393404146.us-west-2.elb.amazonaws.com)

Addresses:  52.88.29.150          [54.149.181.96](https://54.149.181.96)

Aliases:  orion.managewp.com",pihole,1651161065.0
1175,comment,1,i6ilnlh,,"The issue has been on/off for few days. When I get the wrong IP, the SSL is for wrong domain also.",pihole,1651141380.0
1176,comment,1,i6jtxl1,,Interesting. That .96 address gave different address before and therefore offered wrong domain SSL cert. Now it seems to work.,pihole,1651163061.0
1177,comment,1,i6inn1z,,"Ok I read a little bit about DNS and it's totally possible that the DNS hold multiple records for the same domain. So I assume it's a misconfiguration of the server side. Especially when you didn't change anything in your setup and the error occurred out of nowhere. Maybe you can inform the domain / website owner?
To nail it further down, you could flush your DNS cache and see if this helps.",pihole,1651142890.0
1178,post,4,udnf3h,Negative number of domains on adlist,"I have a peculiar issue with my new pihole install. When going through the audit log, sometimes, the log resets to an older state. And I can no longer audit / blacklist / whitelist domains. Once this happens, the number of domains on the adlists also goes to -2.

Updating gravity always fixes the issue. Both the number of domains on the adlist and the state of the audit logs. What is going on and how do I fix it?",pihole,1651122572.0
1179,comment,1,i6iam1x,,"My best guess is to report the bug to Pi-Hole's GitHub Repository and attach a log with it. But try a Pi-Hole full upgrade first, just in case.",pihole,1651131427.0
1180,comment,1,i6jb40x,,"It means when your Pi-Hole tries to access those domains, it deletes deleted from the overall DNS system and invalidates them for future use, making them inaccessible to everyone.  Please don't go to goog, twit, fb or the other top FANG platforms as their loss could be catastrophic to users of the information superhighway.  
Grin!",pihole,1651155329.0
1181,comment,1,i6vsat4,,"I had this issue once or twice in the past year and thought that it had to do with a failed gravity update.
Like your pi passing out from processing too many entries.
What's the usual number of blocked domains on your pihole?",pihole,1651391211.0
1182,post,3,udmotj,pinhole on a Synology,I have a Synology Nas I run my plex on is it possible to run pinhole on it if so could I get some help I don't have too much experience with this kinda stuff,pihole,1651119964.0
1183,comment,2,i6hv3m5,,You should be able to find a super easy tutorial for Pi-hole in Docker.,pihole,1651120139.0
1184,comment,2,i6ixhku,,I'm running PiHole on my Synology through Docker.,pihole,1651148978.0
1185,comment,1,i6hw9my,,I followed a pi hole tutorial and the docker container just kept crashing,pihole,1651120818.0
1186,comment,1,i6ijfid,,Why do people call it pinhole?,pihole,1651139516.0
1187,comment,1,i6j0fvi,,"https://youtu.be/1yG0p9gU104

you can follow the steps in the video. I just installed Pi Hole on my synology a few days before",pihole,1651150498.0
1188,comment,1,i6jd4pu,,"Here’s a good tutorial.

https://youtu.be/4Z9Mtpc7Tak",pihole,1651156183.0
1189,comment,5,i6hvpvm,,"Yes, but what about pinhole?",pihole,1651120497.0
1190,comment,1,i6i7k36,,I am running pihole on synology in docker. What error do you get? Can you share your docker-compose.yml?,pihole,1651128840.0
1191,comment,1,i6imo33,,Autocorrect - happens to me all the time!,pihole,1651142157.0
1192,comment,1,i6k0l3l,,"If you have an iPhone or iPad, you can go to General > Keyboard > Text Replacement, and then create a shortcut to have ph change to PiHole.  Then you don’t have to worry about pinhole any longer.",pihole,1651165739.0
1193,post,0,udlmi8,School wifi problems,"Whenever i’m connected to my schools network pi-hole still works as a ad blocker but for some reason the dns resolver doesn’t work? like on my phone on cellular i can access octo.print (or any other local site) for my printing server but the second i connect to the school network i have to use the IP address instead. and i’ve confirmed that it still works as an adblocker when i’m connected to the school network

(using pivpn)",pihole,1651116386.0
1194,comment,2,i6ikmxi,,"So the resolving oh local hostnames via VPN doesn't work. Do you have conditional forwarding enabled?
And do you use openvpn or wireguard?
For openvpn to propagade local DNS/hostnames you need this in your config: `push ""dhcp-option DOMAIN mylocaldomain.lan""`
Replace the domain with your local domain.",pihole,1651140553.0
1195,comment,1,i6hvjj9,,"PiHole is not an adblocker. So I think ads are being blocked by your school’s internet, and your PiHole isn’t working at all while on your school’s wifi.

Can you access your PiHole admin panel while on the wifi?",pihole,1651120397.0
1196,comment,1,i6k5wr6,,"thing is, the domains are forwarded on the vpn but not when i’m connected to the school network, but on cellular or at a cafe it works fine",pihole,1651167869.0
1197,comment,1,i6hvwtj,,yes i can access all my local websites on via my vpn. pi hole IS in fact working because i don’t get ads blocked when i’m not using it on my school network but when i am the ads are blocked. dns resolver for local sites is the only thing that doesn’t work,pihole,1651120607.0
1198,comment,1,i6k9p39,,"Yes domains are resolved by your upstream DNS, but this resolver has no chance to know you local domains / hostnames.",pihole,1651169377.0
1199,comment,-2,i6hw97n,,"Yes of course you can access your local network on your VPN. Can you access your local network on your VPN AND on your school’s wifi?

Also not sure why you’d downvote when I’m trying to help…",pihole,1651120811.0
1200,comment,1,i6hwb5h,,yes i can? that’s what i was saying sorry if that wasn’t clear,pihole,1651120843.0
1201,comment,1,i6hws6g,,"When connected to your school’s wifi, go to the wifi settings of your phone, click the network your connected to, and check the DNS. Is the IP address there pointing to your PiHole?",pihole,1651121132.0
1202,comment,2,i6hzrat,,">When connected to your school’s wifi, go to the wifi settings of your phone, click the network your connected to, and check the DNS. Is the IP address there pointing to your PiHole?

Why on Earth would it be? Why on Earth would you want it to be, or think it should be?

For that to happen OP would need to have set it themselves explicitly, and OP would *also* need an open resolver on their home network. That's...no. Don't do this.

This comment also appears to be ignoring the VPN aspect, where the current network is only going to be used to bootstrap the VPN.",pihole,1651123044.0
1203,comment,1,i6hxeuj,,yep done that already,pihole,1651121518.0
1204,comment,-1,i6i13qk,,"I never said to do this. I’m trying to pinpoint if the issue is on the VPN config or not. And based on OP’s answer, that is what he did.",pihole,1651123962.0
1205,comment,1,i6hz69e,,Is the DNS IP on your wifi set to your PiHole’s local IP or your home network’s public IP?,pihole,1651122655.0
1206,comment,1,i6hz99d,,pi holes local ip,pihole,1651122709.0
1207,comment,1,i6i2b6a,,"So, you have an open resolver?

If your Pi-hole is accessible externally through the IP alone, that's an issue my man.

If it's not, it has no business being set there.",pihole,1651124813.0
1208,comment,1,i6ikbh3,,"He is using a VPN, no open revolver needed. And sure the DNS is set to the local IP of the Pi. If he uses a VPN, the device is literally connected to his LAN.",pihole,1651140284.0
1209,comment,1,i6irgjy,,"He's using a VPN, that already includes his local resolver, and the wireless connection doesn't need to be configured to use it at all.

The device using network derived DNS as opposed to VPN derived DNS would be a pretty big problem from the VPN perspective and invalidate its existence.

Sorry if I failed to make that point clear but I assumed it would be obvious that the VPN's DNS is used when connected. It is largely the point of it.",pihole,1651145496.0
1210,post,1,udgejh,Pi-hole not blocking ads despite being set as the DHCP server,"Hi. I'm new to Linux and to Pi-hole. I'm still seeing ads across all my devices, despite having set Pi-hole as my DHCP server (since my ISP-owned router won't allow me to configure DNS). It looks like there's some traffic going through Pi-hole, but a much lower amount than what I would expect. I'm not too sure how to troubleshoot this issue.

I'm happy to provide more information if I'm not providing enough; just let me know what I missed.

Below is my debug token:[https://tricorder.pi-hole.net/PT96Ba4Q/](https://tricorder.pi-hole.net/PT96Ba4Q/)

Thanks in advance for any help.

*\*edit\* This was resolved by disabling IPv6 in the router.* ",pihole,1651100452.0
1211,comment,3,i6gqp42,,"Have you checked DNS settings on each device? If they differ, then Manually set it to Pihole IP. Don’t include secondary DNS.",pihole,1651101079.0
1212,comment,2,i6grmhr,,"Set one of your devices manually with a static ip and the ip address of your pi-hole.

Then you can see if it is working. You should also see the ip address of that device in your pi-hole query log.",pihole,1651101517.0
1213,comment,1,i6gscxk,,"Thanks. I didn't realize I had to set each device manually. 

I just tried this on my desktop (I set up a manual ethernet connection with only Pi-hole as the DNS) and then reset the network connection. I still see plenty of ads despite having half a dozen of the recommended blocklists loaded into Pi-hole.",pihole,1651101866.0
1214,comment,1,i6gsubx,,Just tried this. It didn't reduce the number of ads and I don't see the IP of that device in the query log.,pihole,1651102097.0
1215,comment,3,i6h4h7k,,">Thanks. I didn't realize I had to set each device manually. 

You shouldn't have to when Pi-hole is operating as the DHCP server. It will advertise itself exclusively. That's a big part of the point of it.",pihole,1651107507.0
1216,comment,2,i6gttjo,,"If you don't see the ip address of your device in the pi-hole query log then the device is not using the pi-hole.

What sort of device are you using and have you verified that it has only your pi-hole as its DNS?",pihole,1651102560.0
1217,comment,1,i6ivqwp,,"Hey, just confirming that you're saying Pi-hole should normally block ads without having to manually configure settings on each device, when it is set as the DHCP server.

I think I'm missing something because I fixed my desktop by disabling IPv6 (that was the problem) but I still see ads everywhere else. See a reply a bit lower down for the context.

*\*edit\* See post below. This is all fixed by disabling IPv6.*",pihole,1651148032.0
1218,comment,1,i6gu51t,,"It's a desktop PC. Yes, it's only using the IP of my Pi-hole as DNS.",pihole,1651102714.0
1219,comment,1,i6lnwbe,,"Yes. That's exactly what I was saying.

Disabling IPv6 is kinda brutal. I would be putting at least some degree of effort into trying to figure out why I had an endpoint within my network that's pointing to an external resolver.

Two typical ways this can be handled is that the router just broadcasts its own address as the V6 DNS endpoint, or often they'll inherent WAN configuration.

If you configure Pi-hole as both LAN and WAN DNS it's likely you can have your cake and eat it too.",pihole,1651190420.0
1220,comment,1,i6gvikr,,"How do you know that the DNS is set to pi-hole?

Is this windows? if so, did you do ipconfig in a dos box to see what the settings are?

If it works with the internet and only has Pi-hole as its DNS but there is nothing in   
the query log then perhaps you have pi-hole disabled?

Did you have any installation issues with pi-hole?",pihole,1651103368.0
1221,comment,1,i6lpf2e,,"Sorry for the stupid question, but how do I set Pi-hole as the DNS server for WAN? And I assume you're saying I: 1) do that and then 2) re-enable IPv6 on my router?",pihole,1651191135.0
1222,comment,1,i6gwxhd,,"I created a manual Ethernet connection that pointed to the Pi-hole as my sole DNS (no backup). 

Yes, it's Windows, and Pi-hole is active. 

Here's what my ipconfig looks like:   
https://imgur.com/a/83CMoRq",pihole,1651104038.0
1223,comment,2,i6h9q6d,,I'd suggest turning off IPv6 on your system to see if that's the problem.,pihole,1651109918.0
1224,comment,1,i6h16wk,,Are you sending ipv6 to your Pi-hole too? I would start with ipv4 and see,pihole,1651106012.0
1225,comment,1,i6iv7qr,,"So I didn't realize I was doing that, because in Windows 10 you can create a manual connection with no IPv6 *and still have IPv6 enabled*. I dug around in my Control Panel and fixed that, and that fixed the desktop. 

But of course, I still see ads on my other devices (a Google TV set top box and a couple of iOS devices). 

I guess my question becomes: how do I block ads on the other devices without configuring the internet connection manually on each one?",pihole,1651147730.0
1226,comment,1,i6ixhq3,,"Since you cant set dns on your ISP's equipment, can you disable dhcp and just use the pi hole for dhcp?",pihole,1651148981.0
1227,comment,1,i6ixopv,,"Oh, I did. That's how it's been from the start (once I discovered the nasty surprise on my router). 

DHCP is also disabled on the router.",pihole,1651149084.0
1228,comment,1,i6j0ffj,,Can you shut off IPv6 on the router and pi hole?,pihole,1651150491.0
1229,comment,1,i6j2il6,,"Yup, that worked. All I had to do was shut it off on the router. Can't thank you enough for your patience!

One last question, what are the implications of shutting off IPv6 network-wide?",pihole,1651151510.0
1230,comment,1,i6j8sxx,,"You are welcome. Glad you got it working. 

You don't need IPv6 so there are no implications.",pihole,1651154343.0
1231,comment,1,i6j901g,,Cool. Hopefully this thread helps someone else!,pihole,1651154429.0
1232,post,31,udfjhe,IPV6 DNS settings with port 5335 and Pihole with Unbound,"What do I use for the IPV6 upstream servers in Pihole using Unbound.   Here is my Pihole address

pi@raspberrypi:\~$ ip -6 addr

1: lo: <LOOPBACK,UP,LOWER\_UP> mtu 65536 state UNKNOWN qlen 1000

inet6 ::1/128 scope host 

valid\_lft forever preferred\_lft forever

2: eth0: <BROADCAST,MULTICAST,UP,LOWER\_UP> mtu 1500 state UP qlen 1000

inet6 2601:1c0:8800:aaa:bbbb:cccc:dddd:ffff/64 scope global dynamic mngtmpaddr noprefixroute 

valid\_lft 597sec preferred\_lft 597sec

inet6 fe80::aaaa:bbbb:cccc:dddd/64 scope link 

valid\_lft forever preferred\_lft forever

pi@raspberrypi:\~$ 

  
My raspberry PI looks like this.

  


https://preview.redd.it/df4q3mhec5w81.png?width=1109&format=png&auto=webp&s=cee535a5e9954d8f32ef60b69c474293b4e2842b

I think I am missing something.   But I am not sure what I should put in the IPV6 address to point to port #5335?    The Pihole is my DHCP server.",pihole,1651098012.0
1233,comment,8,i6hwmno,,">What do I use for the IPV6 upstream servers in Pihole using Unbound

You don't need a separate IPv6 address.  Both the IPv4 and IPv6 addresses lead to the same kernel.  Only one is required.

Both A and AAAA queries can be resolved by a DNS server addressed via either IPv4 or IPv6.",pihole,1651121038.0
1234,comment,7,i6h67zh,,"There's no inherent reason to put anything at all there.

You'd be entering the same loopback address twice, just with slightly different formatting.

An IP4/A nameserver is perfectly capable of providing an IP6/AAAA record, and vice versa. It's not that one handles IP4 traffic or IP6 traffic respectively, exclusively",pihole,1651108312.0
1235,comment,8,i6gxoyn,,"I was told to enter this in Custom 3 (IPv6):

::1#5335",pihole,1651104392.0
1236,comment,1,i6kttio,,"Alright.  I thought adding ""::1#5335"" to IPv6 upstream DNS servers would work.  However, I just removed [127.0.0.1#5335](https://127.0.0.1#5335) in IPv4 custom server, but leaving ::1#5335 in IPv6 custom server.  But DNS is not working anymore.  So this IPv6 server thing is just a decoy?  ?",pihole,1651177316.0
1237,comment,1,i6la278,,"If you used the PiHole guide to setup Unbound (assuming it hasn't changed), then Unbound is setup to only listen on [127.0.0.1](https://127.0.0.1) and will not respond to the IPv6 loopback interface. So if you entered an IPv6 address here it may actually have a detrimental affect on your PiHole server (slowing it down while waiting on a IPv6 response)",pihole,1651184006.0
1238,comment,1,i6lr4ep,,"OK, I think that I might have figured this out.  Unbound installed with Pihole using the official instructions ([https://docs.pi-hole.net/guides/dns/unbound/](https://docs.pi-hole.net/guides/dns/unbound/)) only listens to [127.0.0.1](https://127.0.0.1).  It is defined in the /etc/unbound/unbound.conf.d/pi-hole.conf.  So no need to add anything in the IPv6 boxes.    


However, if you look at the official Unbound documents at ArchWiki, it states:   
If you want to use unbound as your local DNS server, set your nameserver to the loopback addresses ::1 and 127.0.0.1 in /etc/resolv.conf.  Here, ::1 is listed as a loopback address.",pihole,1651191927.0
1239,comment,3,i6h6law,,"yes, just use custom 1 IPv4 and remove the 3 others.",pihole,1651108485.0
1240,comment,0,i6hsog9,,[deleted],pihole,1651118736.0
1241,comment,8,i6h9rti,,"This is the answer. OP, 127.0.0.1 is the loopback IPv4 address and ::1 is the same in IPv6. The # is the format Pi-hole uses for port value, though it’s not conventional.

The conventional format is to use a colon before the port number. In IPv6 to add a port, you bracket the address portion, e.g., [2601:1c01::1]:5335",pihole,1651109939.0
1242,comment,1,i6lf38b,,I am looking for the guide.  I followed a YouTube video.,pihole,1651186287.0
1243,comment,1,i6loozf,,Interesting and you may be right.  I put ::1#5335 at the IPv6 upstream for loopback and it does not work without [127.0.0.1#5335](https://127.0.0.1#5335).   Can someone from Unbound universe confirm this  this (Unbound will not respond to the IPv6 loopback interface.)?,pihole,1651190796.0
1244,comment,1,i6lrfr1,,I disabled all but the custom 1(IPv4)  127.0.0.1#5335 and test-ipv6.com passes 10/10.,pihole,1651192072.0
1245,comment,5,i6hwr0l,,"Whether or not Google devices fall back to IPv6 or not has no bearing on this question.  The loopback IP is private between Pi-hole and unbound, and unseen to any clients.  All the clients see is Pi-hole.",pihole,1651121113.0
1246,comment,1,i6huaid,,">Yes, because there is almost always Google devices that fallback to IPv6 DNS when 4 is Mr. reachable

Which Google devices would those be, exactly?

It's not clear to me what you're trying to say here or which side of the argument you're coming from.",pihole,1651119661.0
1247,comment,3,i6hsf4d,,Thank you.  This makes sense.,pihole,1651118592.0
1248,comment,2,i6ibs9x,,[deleted],pihole,1651132468.0
1249,comment,3,i6igb2j,,God I hate IPv6 lmao this format is whack,pihole,1651136649.0
1250,comment,1,i6nwr6l,,"It can respond on all interfaces or just one. It depends on how it is configured. Most Unbound setups, that involve PiHole, have it setup for just [127.0.0.1](https://127.0.0.1). You can change it to listen on IPv6 loopback also, but like others have said, it's not necessary.",pihole,1651239061.0
1251,comment,1,i6li3aa,,Chromecasts not sure why im downvoted litterally look at your logs on your routers firewall,pihole,1651187689.0
1252,comment,2,i6iddrh,,"Good catch, thanks! I updated my comment",pihole,1651133930.0
1253,comment,4,i6iyvzm,,I got IPv6 to work.  It passes all the tests.   I still don't understand it.,pihole,1651149716.0
1254,comment,1,i6jlckr,,"I agree with you the format and address lengths are cumbersome. However, IPv6 does have a lot of great benefits like more efficient routing, auto discovery and setup (if gateway is setup properly), and best of all no NAT",pihole,1651159572.0
1255,post,0,udfgeq,dont hit me with the fence pls,hey can i buy a prebuild pi with pihole installed? im a nonse and have no clue :U,pihole,1651097777.0
1256,comment,3,i6h78ks,,"You really don't want to include a device you know nothing about, that someone else has configured, within your network. That's a major trust issue.

Perhaps especially if you can't maintain/repair/restore it after the fact. One day it'll just abruptly stop working and take your network down with it (if correctly configured), and then you'll just...what? Throw it out and buy a new one?

There's plenty of resources available from a very near zero starting point for what you want to do, and large communities available for support.",pihole,1651108779.0
1257,comment,2,i6gkiui,,"I highly doubt it?

Pihole is genuinely super easy to setup and everything is well documented.
Do you know anyone that could help you set it up?",pihole,1651098273.0
1258,comment,1,i6gls9o,,"If you have a the Pi hardware, you can buy SD cards that folks have installed an OS and pihole on. Do a search on a well known auction site for hits. Personally I would prefer to learn to do this myself, so I know what has been installed.",pihole,1651098838.0
1259,comment,1,i6hxijp,,"Even if you were to find somebody to ship you a pre-built Pi-hole device, you will still need to configure your network and/or clients to use Pi-hole.  The person who builds the Pi-hole likely won't do that for you, so you would need to know how to do this.",pihole,1651121582.0
1260,comment,1,i6jms33,,"Essentially there's two parts to setting up a pihole, setting up the device and configuring it up in your router. Honestly the device setup is easy. Essentially put the raspberry pi into the case, and close it up. You can even buy [kits that come with everything you need](https://www.raspberrypi.com/products/raspberry-pi-4-desktop-kit/). Then you either plug your sd card into another computer and download the raspberry os loader, select your micro SD card and click go or [buy one with it pre-installed like what's inside the kit](https://www.microcenter.com/product/613767/raspberry-pi-32gb-os-microsd-card-noobs-2019) then plug in SD card, mouse, keyboard and display cable and USB c power supply and it boots into Linux with a graphical user interface. Then with the built in web browser you'll go to the pihole website and copy the command into the terminal and essentially will ask you a bunch of questions and tell you things to do in order to set it up. 

The harder part is setting it up with your router. Every router is different and some routers especially ISP routers might not allow you to change your DNS server meaning you have to do the more complicated approach. Figuring out what you can do in your router should be your first step.",pihole,1651160162.0
1261,comment,1,i6nnj65,,"https://linustechtips.com/topic/1094810-pi-hole-setup-tutorial/

Follow this tutorial from Linus Tech Tips; but keep in mind a few things that caught me (and will probably catch you too):

Don’t even bother hooking the thing up to a monitor/kb/mouse, you can do everything through SSH. Don’t worry, SSH is stupidly easy. See below for how easy. 

Don’t fuck with Wi-Fi; Buy a Pi Zero and throw one of these on top of it. Bam, you have an Ethernet port now. https://www.amazon.com/Waveshare-Ethernet-Raspberry-RTL8152B-Perfectly/dp/B07T31S7TB this will prevent the hassle of setting up WiFi on a headless Pi ENTIRELY. 

When you set up the SD card for the pi, ignore their setup instructions and just download the Raspberry Pi Imager and install the default “Raspberry Pi OS” image. https://www.raspberrypi.com/software/

Make sure that when you are flashing the SD card with the imager, you hit the gear icon and turn on SSH and make up a user/pass for it. Use that in place of “pi” and “raspberry” when the tutorial has you use those for logging in later. (More recent versions of PiOS don’t agree with the method they use of putting the “extension-less” file in a folder on the SD)

To find the IP of the pi when you first have it up and running, download “fing network tools” on your phone from google play/App Store, and hit “scan for devices”.

Once you have that IP address, log into your router and just set it as static (follow their tutorial). 

Once you have the static IP of the Pi, download ANY SSH app from play/App Store or on your PC, and feed it the IP of the Pi. It will start a connection and ask for that username and password you set earlier. When it asks for the password, DON’T WORRY THAT YOUR “*” THINGS ARENT SHOWING UP AS YOU TYPE IT, THIS IS NORMAL IN LINUX. 

I used an SSH app on my iPad and it worked wonderfully. 

from there, it’s pretty much smooth sailing. Follow their tutorial, enter in those commands they tell you to at the command line thru your SSH. 


If you really want to mess with the Pi through a normal graphical desktop-based GUI, enter “sudo raspi-config” at the SSH terminal and turn on VNC.  You can then use any VNC app on PC/mobile to log into it and use it as if you had a monitor/kb/mouse on the Pi.

Edit: noticed you don’t know what to buy. Literally only need 5 things:
-	Pi Zero
-	That Ethernet module above
-	A MicroSD card
-	A USB power supply (you probably have an old microUSB phone charger. Great; as long as it’s decent wattage (2A or so) that will work for a Pi Zero)
-	Ethernet cable (you probably have one somewhere spare but if not Amazon one for like a dollar)",pihole,1651234445.0
1262,comment,2,i6hhm0g,,"Following the documentation part was easy. One of the steps I think people may overlook is hardening (e.g., disabling root, ssh authn, removing unnecessary/unused services). The latter, IMHO, is important.",pihole,1651113429.0
1263,comment,-1,i6gkyoi,,"Sadly not rly No, i was lf a Shopping list - i dont think the Install itself will be a Problem but idk what to buy",pihole,1651098470.0
1264,comment,0,i6grmuz,,"I have nothing, Not even a Pi - what do i buy for such a simple thng ? Im 100% cluless",pihole,1651101522.0
1265,comment,1,i6kepj6,,"ty sounds good to me, im able to change my dns - did this to filter some ad's but want the adv technic no, so maybe that but isnt that hard.  
Ill check ur links ty.",pihole,1651171401.0
1266,comment,3,i6h4oh3,,If you can't even install pihole you really shouldn't be running a pihole. Basic networking and Linux skills are required.,pihole,1651107599.0
1267,comment,2,i6gz2j3,,"If you look on YouTube there are a great number of videos that can help you with the install and give you an idea of what you need.

Off the top of my head  - a pi, power supply for the pi, monitor cable for the pi, usb keyboard and mouse, SD card, SD card reader/writer, possibly an ethernet cable (unless you plan to use Wi-Fi). There are differences in the pi models so things like size of SD card and type of monitor cable cable can change.",pihole,1651105030.0
1268,comment,1,i6h7n1z,,"Buy a Pi Zero 2 W and an usb to ethernet adapter (or just use the build in wifi, but ethernet is more reliable). You don't need a keyboard, mouse and monitor cable, you can just do everything from another computer via network with SSH.  
Then you need a micro SD card and a card reader. That's it.",pihole,1651108960.0
1269,post,3,udfe7n,Pi-hole + Unbound | Servfail on one website only,"I've set up Unbound and it seems to be working for every site apart from one: [deepl.com](https://deepl.com)

Using Cloudflared's port, it returns NOERROR (Success) as the status, but using unbound's port it returns SERVFAIL (error) instead.

Here is the result using Unbound's port:

    ; <<>> DiG 9.16.27-Debian <<>> www.deepl.com @127.0.0.1 -p 5335
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: SERVFAIL, id: 35233
    ;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1
    
    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 1232
    ;; QUESTION SECTION:
    ;www.deepl.com.                 IN      A
    
    ;; Query time: 64 msec
    ;; SERVER: 127.0.0.1#5335(127.0.0.1)
    ;; WHEN: Wed Apr 27 23:07:58 BST 2022
    ;; MSG SIZE  rcvd: 42

I've disabled UFW to test and restarted Unbound to no avail. Any ideas?",pihole,1651097611.0
1270,comment,1,i6glj7i,,welcome to the wonderful world of caching. the site itself is hosted on cloudflare  so it would explain why both servers are throwing empty / error responses.,pihole,1651098725.0
1271,comment,1,i6h87aj,,"No issues here, for what it's worth.

I'm using my own mainline builds of Unbound with all the bells and whistles enabled/in use, but that shouldn't be the issue here.

You can test against an online Unbound instance [here](https://unboundtest.com/), if you're wondering in future if the issue is yours or not.",pihole,1651109217.0
1272,post,2,udepfj,Logging use?,"Probably stupid question but I just can't find an answer:

what's the use to having logging on on pihole?

I've read that having logging on can damage the SD card overtime so turned it off (sudo pihole logging off) although still am able to see the query logs in the web ui (which is all I need) so what would keeping logging on even do? Does it just save every single log permanently? and if this is the case then what need would anyone even have for saving all query logs permanently?",pihole,1651095731.0
1273,comment,3,i6gugny,,"Leaving the reasons aside for a moment, you can reduce the wear on the SD card by installing a utility called log2ram.

Like the name suggests, it writes log files to memory, then periodically flushes that to the SD card. Drastically reduces the number of write operations.",pihole,1651102867.0
1274,comment,2,i6h93q6,,One could say the same of the long term query database. I disable both personally. I don't have a want or need for an entire year's worth of resolution history. In fact I quite specifically don't want *any* amount of resolution history.,pihole,1651109631.0
1275,comment,2,i6hiptz,,I would have never know this was a thing without you asking. Thank you!,pihole,1651113930.0
1276,comment,1,i6hxd74,,">so what would keeping logging on even do?

This is the log that populates the Pi-hole log tail (real time view of queries and replies).

>Does it just save every single log permanently?  
>  
>No.  The dnsmasq log at ***/var/log/pihole.log*** rotates nightly at midnight, and the five previous days are kept.  Anything older is discarded.",pihole,1651121487.0
1277,comment,1,i6i7t9o,,Yes I saw online about that but is there even any point in that? I mean I’m never going to look at my query history more than the last minute so do I even need any queries stored at all…?,pihole,1651129047.0
1278,comment,1,i6i7r84,,I understand but what would anyone need the saved logs for? Is it just for having a history of queries? In which case I do not need this as will never look at it and can happily disable it….,pihole,1651129001.0
1279,post,5,udcxkp,Dual mode Operation with OpenVPN not working,"Hi guys,

I set up OpenVPN and PiHole to run side by side as docker containers. PiHole itself works just fine accessed from my local network and also connecting to the VPN works. However, I have the problem that DNS when using OpenVPN is not working

&#x200B;

PiHole docker-compose:

    services:
      pihole:
        image: pihole/pihole:latest
        container_name: pihole
        ports:
          - ""53:53/tcp""
          - ""53:53/udp""
        dns:
          - 127.0.0.1
          - 9.9.9.9
        environment:
          WEBPASSWORD: '<REDACTED>'
          DNSSEC: 'true'
          FTLCONF_REPLY_ADDR4: '192.168.0.2'
          DNSMASQ_LISTENING: all
          DHCP_ACTIVE: 'true'
          DHCP_START: 192.168.0.10
          DHCP_END: 192.168.0.251
          DHCP_ROUTER: 192.168.0.1
          DHCP_LEASETIME: 24
          PIHOLE_DOMAIN: <DOMAIN>
        volumes:
          - './data/pihole/pihole:/etc/pihole/'
          - './data/pihole/dnsmasq.d:/etc/dnsmasq.d/'
        cap_add:
          - NET_ADMIN
        restart: unless-stopped
        depends_on:
          - dhcphelper
        restart: unless-stopped
        networks:
          dockernet: {}
          pihole-backend:
            ipv4_address: '172.31.0.100'
    
      dhcphelper:
        image: noamokman/dhcp-helper
        container_name: dhcp-helper
        restart: unless-stopped
        network_mode: ""host""
        command: -s 172.31.0.100
        cap_add:
          - NET_ADMIN
    
    networks:
      dockernet:
        name: dockernet
      pihole-backend:
        ipam:
          config:
            - subnet: 172.31.0.0/16

So PiHole listens on all interfaces, which is also visible in the Web UI.

OpenVPN docker compose:

    services:
      openvpn:
        image: kylemanna/openvpn
        container_name: openvpn
        ports:
         - ""1194:1194/udp""
        volumes:
         - ./openvpn-data/conf:/etc/openvpn
        restart: unless-stopped
        cap_add:
         - NET_ADMIN
        networks:
          - dockernet
    
    networks:
      dockernet:
        name: dockernet

OpenVPN config:

    server 192.168.255.0 255.255.255.0
    verb 3
    key /etc/openvpn/pki/private/<KEY>
    ca /etc/openvpn/pki/ca.crt
    cert /etc/openvpn/pki/issued/<CRT>
    dh /etc/openvpn/pki/dh.pem
    tls-auth /etc/openvpn/pki/ta.key
    key-direction 0
    keepalive 10 60
    persist-key
    persist-tun
    
    proto udp
    # Rely on Docker to do port mapping, internally always 1194
    port 1194
    dev tun0
    status /tmp/openvpn-status.log
    
    user nobody
    group nogroup
    comp-lzo no
    
    ### Route Configurations Below
    route 192.168.254.0 255.255.255.0
    
    ### Push Configurations Below
    #push ""block-outside-dns""
    #push ""dhcp-option DNS 8.8.8.8""
    #push ""dhcp-option DNS 8.8.4.4""
    push ""comp-lzo no""
    push ""route 192.168.0.0 255.255.255.0""
    push ""dhcp-option DNS 192.168.0.2""

The even more interesting fact is that requests over VPN are actually shown in the QueryLog of PiHole (with the client [172.20.0.1](https://172.20.0.1), which is the host IP of the docker network) but when executing DNS requests, I always get timeouts (the DNS server is correctly set to [192.168.0.2](https://192.168.0.2) and I can also ping it when inside VPN).

Any help is greatly appreciated since I spent already days looking at the configs and can't get my head around them :)",pihole,1651091053.0
1280,comment,2,i6gfzbx,,In Pihole: did you restrict the interfaces or networks queries are taken from? Try the „all“ option.,pihole,1651096293.0
1281,comment,1,i6gp6e0,,"Thanks for taking the time! Actually, the queries should be taken from everywhere (as specified by ""DNSMASQ\_LISTENING: ALL"") and I can also see the queries also from within the VPN in the query log normally. So it seems that from PiHole perspective the DNS queries are processed as they should but the answer never reaches the caller (if the request comes from within the VPN, inside the LAN it works perfectly)",pihole,1651100376.0
1282,comment,1,i6i8cvn,,"Although your descriptions are very good I got unsure after the last sentence of your previous comment: In which situation does the resolution fail? The client is connected through VPN, the client itself is not remote but inside the same LAN (so typical testing)? 

If correct: When a client connect from some outside location (I am using my mobile device for an „outside“ test - last time forgot to turn off Wifi 😂) - is resolution working or not?

(You have no additional ovpn settings on client side?)


I admit that above  I am following a useless theory, since you say the queries do reach Pihole but are not answered at all, right? It is not that an answer is given, but the answer doesn‘t reach the client?

So the place to look at might be the path to the upstream DNS.

Can you verify that while the tunnel is up, DNS queries from other clients outside the tunnel are answered correctly?",pihole,1651129494.0
1283,comment,1,i6idt52,,"Looking at the last sentence of my comment again, I see you are right and that was a bit misleading. So I try to recap on what works and what does not work:

* If I connect the client ""only"" to the LAN (while the VPN container is running), the DNS resolution works just fine.
* If I connect the client to the VPN outside of the LAN (using my mobile phone), the DNS resolution does not work.
* If I connect the client to LAN and VPN at the same time, the DNS Resolution also does not work.

What are my observations, when it doesn't work?

* On the client, I get the following error back: *;; connection timed out; no servers could be reached*
* Within the PiHole UI, I see that the query was received and returned OK with the client being ""[172.20.0.1](https://172.20.0.1)"" (the servers IP in the docker network) and the status ""OK, answered by [dns.google#53](https://dns.google#53)"". This status is the same for the working DNS resolutions.

So it seems that when using VPN PiHole receives the request and can resolve just fine but for whatever reason (don't see anything in the logs) the response from PiHole does not reach the client.

I hope, it is more clear now :D

EDIT: One more observation: I can also successfully ping [172.20.0.1](https://172.20.0.1) from within the PiHole container, so the route back should also seem to work in theory",pihole,1651134325.0
1284,comment,1,i6itshl,,"That is now very clear - I don‘t have an answer for now. Hard to believe but could be sth different with UDP. 

I keep on thinking about it … I will write should I have an idea.",pihole,1651146913.0
1285,comment,1,i6ivg3e,,Thanks a lot for taking the time! :),pihole,1651147863.0
1286,comment,1,i6pf78y,,"Update: Seems I finally solved it by setting ""[172.20.0.1](https://172.20.0.1)"" (the IP of the docker network) as DNS server in openvpn.conf instead of 192.168.0.2.",pihole,1651261768.0
1287,post,26,ud9r04,PiHole quick beginner questions,"Hello,

I'm just planning to set up my PiHole on my Pi3+B and 2 questions came into my mind.


* What is the actual difference between a PiHole and setting a DNS provider to 1.1.1.1 for example?


* I only want to set my PiHole as a DNS server only for the wireless connections to the router. Anyone has experience with it? My router has OpenWrt, I guess I need to set up a different interface then?


Thanks in advance!",pihole,1651082578.0
1288,comment,6,i6fpxem,,"When the wifi router runs is own dhcp server (with an exclusive range for the wifi clients) you can just set pihole as DNS there.
If the router also serves for wired clients (and/or another machine is the DHCP server), you can config groups inside pihole. One for the wifi clients with blocklist use and another group without blocking.",pihole,1651085910.0
1289,comment,5,i6fq1sq,,"Pihole is under your control, you decide what gets blocked. It also has a built-in DNS server to define local static DNS names. [1.1.1.1](https://1.1.1.1) does not do any of these :)",pihole,1651085958.0
1290,comment,3,i6g1xwk,,It's closer to setting your DNS to 1.1.1.2 which blocks malware. Or 1.1.1.3 which blocks malware and adult content. But the benefit of pihole is lots of the queries happen locally as they are cached so no need to keep telling cloudflare what you want and increased filtering options that you control.,pihole,1651090632.0
1291,comment,4,i6fpmnf,,"I really enjoy these questions as I’m new to this, and had my pi-hole up for four days on my eero network (three eero Pro 6s) and it’s been pretty seamless so far. 

Temp hovers just under 50 C most of the time. It’s in a case and I added a heat sink. (Headless Zero 2 W). Any concerns with that temp? When should I remove from the case and get air flow over it?",pihole,1651085792.0
1292,comment,0,i6fi2e6,,"The difference is the Blocklist, you can still set cloudflare as your primary DNS via pihole.

I guess use WAN settings instead of LAN settings for DNS if that's your end goal. Or alternatively, just assign the pis IP as the DNS of the devices in question.",pihole,1651082777.0
1293,comment,1,i6kzs25,,"So this means, I don't have to set a DNS server on the PiHole, I may leave it empty and use my ISP as default?

As the filetering will be done by my ad / black / whitelist? (what is the difference btw between an adlist vs a blacklist? - adlist is a group of black+whitelists?)",pihole,1651179664.0
1294,comment,2,i6fq6j1,,"50ish celsius is fine, it won't hurt your Pi.",pihole,1651086010.0
1295,comment,3,i6firm6,,Why my WAN interface? I'd like to redirect my LAN dns queries.,pihole,1651083061.0
1296,comment,1,i7erekg,,"Think there is some confusion on the terms in your reply.

You have a modem from your provider which has DHCP + a default DNS set.

If you can change the default dns on this modem to cloudflare that is one step and removes the need to mess with DHCP which is good news! If you want increased filtering with a pihole you would change the DNS set on your modem to that of your pihole and have this setup with the filtering you want (like ads or other block lists). 

Hope that helps",pihole,1651747328.0
1297,comment,1,i6fsh5h,,Thanks,pihole,1651086924.0
1298,comment,-2,i6fj0bk,,"I'm a bit of a noob, so bare with me, but, isn't WAN for wireless, which is what you were wanting to aim for? LAN would affect both.",pihole,1651083157.0
1299,comment,1,i7shpkk,,"I have a modem from my ISP, which is set in bridge mode, so basically my router does all the work (WAN connection + DHCP) with OpenWrt installed.

What I'd like to achieve is, to have DHCP set up ranges for LAN connections (PC) and wifi connections. As the PC has already adblocks installed, there is no need to divert the DNS requests for my PiHole, it may go straight to my ISP DNS server.

On wifi I have the phones and guest phones, which I would like to filter though.",pihole,1652013807.0
1300,comment,6,i6flua2,,You are thinking of WLAN which is not the same as WAN.,pihole,1651084292.0
1301,comment,5,i6fk693,,WAN is the wide area network. The internet :),pihole,1651083626.0
1302,comment,2,i6flxpw,,"Noted, thanks.",pihole,1651084331.0
1303,comment,3,i6fkbj4,,"Oh, fucks sake, I should have known that by now, I always presumed it was Wireless",pihole,1651083683.0
1304,post,0,ud5edw,"Two Pi-holes, phone seems to be using both?","I added a second pi-hole and changed my phone's DNS settings to use it. However, I can see from both pi-holes' dashboard that the majority of the phone's queries are still going to the first one. How is this possible?",pihole,1651071145.0
1305,comment,3,i6fxv91,,"Your router tells clients what DNS servers are available, the clients pick one to use.

Here Pi-Hole #1 = 57,974 Queries and #2 = 1,455",pihole,1651089059.0
1306,comment,2,i6h5wpm,,"Most OSs will use the first DNS.  If it does not respond quick enough it will try the 2nd, 3rd...

Which ever one replies first will become the first in the list.

It should be noted the list is dynamic, the starting positions are based on the DNS or manual order given.",pihole,1651108164.0
1307,comment,2,i6eqlhv,,Are you saying that your phone has both PiHoles configured as DNS servers?,pihole,1651072077.0
1308,comment,1,i6eq4qt,,You may need to clear your application cache.,pihole,1651071889.0
1309,comment,0,i6go643,,You could use two pihole in front of a shared unbound. Will this improve speed or is one pihole efficient enough to answer all querries simultaneously?,pihole,1651099911.0
1310,comment,1,i6hvwd3,,"In my experience the typical Linux-y, Android-y, iOS-y (the vast majority of operating system deployments) approach is matching or very near matching/similar to dnsmasq's consistent polling strategy of ""ask everyone, choose the fastest answer, wait a bit, do it all again"".

Where initially a request is sent to any and all configured upstreams in parallel, and the responder with the lowest latency wins, and will be used until the next polling period (typically 10 minutes, though I've also seen 5 and 1 minute periods).

If you run two or more Pi-hole instances at home this can usually be seen quite well, with the secondary instance still handling a volume of requests despite the primary being active at the time and responding.

Incidentally you can pretty easily configure Pi-hole/dnsmasq to always query all upstreams in parallel, and I do so within my network with my Pi-hole instances. So in my case, primary, secondary, tertiary, etc. Pi-hole instances are all receiving an exactly equal amount of requests. I also have load balancing/distribution proxies in front of Pi-hole using `dnsproxy` and `dns-dist`, but I digress somewhat.",pihole,1651120599.0
1311,comment,1,i6i6c80,,"I've pointed both DNS entries on my phone SSID entry to the 2nd pi-hole, so it was weird that it still kept using the first one.",pihole,1651127856.0
1312,comment,1,i6ev9tb,,Thanks. This might be the reason. Would this be fixed by forgetting the wifi?,pihole,1651073905.0
1313,comment,1,i6gqwav,,"I was going to retire the first one, which I have now done. The question was more for curiosity. Thanks to all the responders.",pihole,1651101173.0
1314,post,2,ud5db7,The icons disappear,"Hi,   


Someone knows why this happens when pihole is active. 

https://preview.redd.it/lhec8u0f43w81.jpg?width=298&format=pjpg&auto=webp&s=d458783b079921b1e9e57892a9a75b832bd48469",pihole,1651071063.0
1315,comment,1,i6f3hlg,,"Whoa, yeah!  Good question.

I recently (probably a few weeks ago) noticed some of my icons are also messed up...  Google calendar switched the arrows(?) for Chinese characters, and Google translate changed the buttons to their text placeholders(?).  Switching to my non-PiHole wifi fixes the icons.

Weird...

Here's a pic: [https://i.imgur.com/XDiOEAF.jpg](https://i.imgur.com/XDiOEAF.jpg)",pihole,1651077051.0
1316,comment,2,i6fp32j,,"It is probably because of a blocked gstatic domain. This happened to me years ago.

try making sure [fonts.gstatic.com](https://fonts.gstatic.com) is not poisoned via pihole. There are a few other domains this may rely on and the 'AdamOne' assistant browser plugin can help rule these out.",pihole,1651085578.0
1317,comment,1,i6f52uy,,"Yes, me too also with the emojis in gmail and google meet.   


Pic: https://imgur.com/a/rgxyL0d",pihole,1651077667.0
1318,comment,1,i6g9aqu,,"Yup, I had that blacklisted because it caused a [runaway query incident](https://www.reddit.com/r/pihole/comments/u2z2pv/runaway_queries_crippling_internet_until/) at some point... time to unblock it.",pihole,1651093512.0
1319,post,1,ud461t,Could use some help clarifying a few things,"Pi-hole v5.10 FTL v5.15 Web Interface v5.12  
I've encountered 3 instances where I am not sure if it is working as expected or a bug. You may need to click the images or rightclick+newtab on imgur to see the full size and make out the details. Thanks pibros!

&nbsp;

1) Some types are blocked but not others even though they are the exact same domain? How does this work? Ideally all types would be blocked for the domain. I do not see a ""type"" field when creating  exact or regex blacklists.  
https://i.imgur.com/oDycHKF.png

&nbsp;

2) Youtube suggestions are working despite being ""blocked"". I am using Firefox flatpak with no DOH/DNS over HTTPS or proxy. Everything goes through the pi-hole and my router even forces all DNS through pi-hole. I do not want suggestions to work. Is this another one of those ""they are hosted on google.com or youtube.com like ads? If so why does it also say suggestqueries-clients6.youtube.com was blocked?  
https://i.imgur.com/SvjFKDk.png

&nbsp;

3) Logging host logs despite saying right below those are not logged. Does it just mean saved to the database? This is on the ""Query Log"" page so I would assume the LOG part means it was logged.  
https://i.imgur.com/9yTS1ug.png",pihole,1651067762.0
1320,post,9,ud178f,I changed default group name and pihole stopped working.,"It seems that by changing default group name i broke it :)

It no longer blocks anything by default, changing it back didnt fix it. 

Any ideas how should i fix this?",pihole,1651058448.0
1321,comment,2,i6e06af,,"My ISP decided to override my own DHCP settings.

it just coincided with my change.

To be honest im outraged :P",pihole,1651059840.0
1322,comment,1,i6fu3ox,,This is why you don't use the ISP's wifi router.,pihole,1651087568.0
1323,comment,-4,i6e5etj,,"Ok,but not related to the topic.",pihole,1651062780.0
1324,post,2,ud0087,dns lookups using pihole result in a different hostname being searched,"Getting some weird stuff going on on my pihole install. My NAS in which pihole is running has the hostname ansible-nas  
. My network has a domain name of local  
, but after I try to get the ip of my NAS using nslookup ansible-nas.local  
 from another PC on the LAN I get as result the ip [127.0.0.2](https://127.0.0.2/). The weird thing is that in the answer section I get this

Name: ansible-nas.local.rpz.GS.local

and this

origin =  
 blacklistw3.zone

which  after some digging indicates that a Response Policy Zone is set up? I  never had to deal with such thing, and pihole is running on a docker  container on a fresh ubuntu install.

This is my complete response:

    >nslookup ansible-nas.local Server:		192.168.1.112 Address:	192.168.1.112#53  Non-authoritative answer: Name:	ansible-nas.local.rpz.GS.local Address: 127.0.0.2 ansible-nas.local 	origin = blacklistw3.zone 	mail addr = hostmaster.feedrpz.blacklistw3.zone 	serial = 1 	refresh = 10800 	retry = 3600 	expire = 604800 	minimum = 86400 

Running the same lookup  command from the NAS toward another computer on the lan results in the  same rpz zone added. I really have no idea how to even look for a  solution to this.

For  now I added the hostname-ip paring for the computers that I frequently  need ips to the DNS records section, but I really would like to find the  root cause of the problem",pihole,1651053727.0
1325,comment,2,i6dvn3j,,Use .lan or something for your local domain,pihole,1651056919.0
1326,comment,1,i6ds87e,,"On a hunch, try changing your local domain from .local, which it realistically shouldn't be anyway.

Edit: Did you repost this?",pihole,1651054362.0
1327,comment,1,i6dscpo,,"Yes I reposted this because I accidentally deleted my other post

Why shouldn't it be local?",pihole,1651054462.0
1328,comment,1,i6dt4nn,,"Reserved/special domain, that pretty much exists only for multicast DNS now.

If you query an Unbound instance and it replies for a .local domain, you should also see an additional warning something to the effect of

>""something something, misconfigured, something something something - you are currently testing what happens when an mDNS query is leaked to DNS""",pihole,1651055064.0
1329,comment,1,i6dyxpu,,"I removed the .local domain from my router and updated pihole to not use it. For some reason I can't still ping the services anyway. I'll keep the DNS records enabled for now, and try to see if the problem fixes itself by moving pihole to an external raspberry pi with dhcp enabled. Thank you for your help!

&#x200B;

Edit: looks like pinging works but nslookup doesn't? Sorry if I'm missing something obvious, I'm not very knowledgeable on the subject",pihole,1651059096.0
1330,post,2,ucznzz,QNAP NAS flooding Pi-hole with LAN requests,"My storage QNAP NAS is flooding the router with requests to know who is located on two different LAN IP addresses.

It’s only two PC's which happen to be my desktop and laptop. Why is it wanting to know over and over who is located at these addresses?

My router is the DHCP server and I have conditional forwarding set under the DNS settings page in the pi-hole web interface.

I currently have the /etc/hosts file filled out with the current addresses so it is updating the NAS but it is spamming regardless.

https://i.imgur.com/6zIP7xD.jpg

I am running ubuntu 20.04 inside an LXD container on the NAS that in turn is running the pi-hole server.

1) The NAS is located at 192.168.1.2 and my pi-hole is at 192.168.1.40 and is bridged to the NAS's eth0.

2) My desktop is located at 192.168.1.3

3) As you can see in the attached image the last query is pointed at 'jmsi' which is my laptop and is located at 192.168.1.4.",pihole,1651052253.0
1331,comment,1,i6hnwl5,,The screenshot looks like it’s mostly queries from your desktop asking for the NAS.,pihole,1651116328.0
1332,comment,2,i6os96t,,I added my routing table to my desktop's hosts file on windows 11 and it stopped.,pihole,1651252113.0
1333,post,2,ucyhyc,No internet access when change DNS on linux,"hi there, 

I did setup my pi-hole in docker.

    pihole:
        container_name: pihole
        restart: unless-stopped
        image: pihole/pihole:latest
        ports:
          - 53:53/tcp
          - 53:53/udp
          - 80:80/tcp
        environment:
          - TZ=Europe/Warsaw
          - PIHOLE_DNS_=192.168.3.21#39785
          - IPv6=false
          - DNSMASQ_LISTENING=all
          - WEBPASSWORD=pass # Put a strong password here.
        volumes:
          - etc-pihole:/etc/pihole/
          - etc-dnsmasq.d:/etc/dnsmasq.d/
        mac_address: d0:ca:ab:33:22:ab
        networks:
          macvlan:
            ipv4_address: 192.168.3.2

When I change DNS settings on the router everything works fine ads are blocked etc. 

Setting up pi-hole as DNS on the router is not good for me as I don't want all my services rely on pi-hole DNS. 

So I changed DNS settings only on my main PC but when I did it, the internet access is gone. 

https://preview.redd.it/bd1ohzqx21w81.png?width=608&format=png&auto=webp&s=0a474754656c2b5072908233b00585902ea8f4cf

I can ping pi-hole from my main PC. Also when I enter pi-hole container I can ping websites so there is an internet access. 

I tried few times to restart pi-hole container and network service on my PC but it didn't change anything.

Any hints on what I-m doing wrong?

Thanks!",pihole,1651046913.0
1334,comment,2,i6dwy81,,"Your pihole device is .3.2
What is .3.21 ?",pihole,1651057808.0
1335,comment,1,i6do2ss,,"I guess you can still reach an IP in the internet from your PC? Can you verify? Ping 8.8.8.8 eg

The recommended setup is different: Configure your DHCP server to tell clients use Pihole as DNS. (Instead of promoting the router as DNS and redirecting the router‘s upstream DNS)

Then you can control clients by defining „groups“ and attaching filter policies for each group.",pihole,1651050760.0
1336,comment,1,i6dorhy,,"Sorry I didn‘t answer your question but gave you a recommendation to reconfigure your DNS flow. 

(Your setup should work also but I can‘t tell you why. My point was: instead of debugging this setup, better invest the time and do it „right“.)",pihole,1651051378.0
1337,comment,1,i6dyshj,,As another post already recommended: best solution is to use Pihole in your whole network and config two groups inside Pihole. One with blocking and one without. Then assign your devices as you need,pihole,1651059006.0
1338,comment,1,i6ebpf1,,Your Pi is 192.168.3.2 correct? And when you configure your router (AsusWireless_5G at 192.168.3.21) to use 192.168.3.2 as its DNS server everything works but when you configure a PC on the LAN that can ping 192.168.3.2 to use 192.168.3.2 as DNS it does not work. Are all the above details correct? The router being at .21 and that #39785 are a little unusual although not necessarily wrong.,pihole,1651065823.0
1339,comment,1,i6dr7f0,,"Thanks for reply :) I'm happy to do it as you advised buy I'm not sure if I understand fully what you said.

yes, I can ping 8.8.8.8. 

&#x200B;

*The recommended setup is different: Configure your DHCP server to tell*   
*clients use Pihole as DNS. (Instead of promoting the router as DNS and*   
*redirecting the router‘s upstream DNS)*

My DHCP server is running on the router (4g-ac68u). So should I install e.g. OpenWRT inside container to manage my DHCP?

&#x200B;

*Then you can control clients by defining „groups“ and attaching filter policies for each group.*

This is related to pi-hole settings?

&#x200B;

Thanks!",pihole,1651053510.0
1340,comment,2,i6ed09z,,"If .3.2 is the Pi and .3.21 is the router, then he created a loop. The DNS in pihole points to .21 and the posted screenshot indicates he set .2 as DNS in the router?!",pihole,1651066415.0
1341,comment,0,i6drxen,,"The standard use is to use the router‘s DHCP, only tell em to propagate Pihole as DNS to the clients. (Pihole has also a DHCP server - if you can configure your existing I would not use this.)

Yes, the „groups“ are in Pihole. You can use the Web-Gui to add clients to a group and configure filtering for this group. 

And you will see in the statistics and log, which client did what!",pihole,1651054118.0
1342,comment,1,i6ek0q5,,Good thought ... maybe. The Upstream DNS Servers settings (c/o the admin console) will overwrite that docker-compose setting I believe. And he'll see it in etc/pihole/setupVars.conf,pihole,1651069421.0
1343,comment,1,i6dvtxz,,"ok, so that was me configuration from the beginning but without groups. In that case I gonna change it back as it was. Thanks you your help :)",pihole,1651057049.0
1344,comment,1,i6f5qcz,,"Ok, I have no clue about docker :)",pihole,1651077919.0
1345,post,1,ucxpda,Can someone explain why this is happening?!,"Pi hole is doing a weird thing with the blocking ads aspect.  


So I want to watch [https://beta.crunchyroll.com/es-es](https://beta.crunchyroll.com/es-es) with no ads.  
I have 3 devices: my PC, my phone and my Chromecast.  


On Firefox, on my PC, pi hole blocks the first ad but not the following that are inside the video.  
On the app, in my phone, pi hole blocks everything smoothly.  
And on the TV with the Chromecast, pi hole just does not block anything.  


I'm sure these 3 devices have all its DNS servers set as the Pi hole IP.",pihole,1651043405.0
1346,comment,2,i6dhf17,,"On the website, the first ad is served from a domain that pihole can block, while during the video the ads are baked in. 

On the phone, all the ads are served from domains that pihole can block. 

On the Chromecast, all ads are baked into the video.",pihole,1651044812.0
1347,comment,2,i6drju5,,"Baked or embedded, either requires a change in the medium of the material served.

Just using Chrome or Chromium on Windows, or Chromium on different flavors of Linux, or Mobile Chrome, or ChromeOS are all able to block some things, not block others, insidiously embedded in others.  Adblocking extensions all work differently, or not at all.  I'm not mentioning ""edge"", I believe the world is round and has no Edge! 

I've gone to read the HTML, CSS, and Page Coding to look for some disgusting add-based URLs.  To do a system update, many of my blocked items are back.

I've gone to using low overhead browsers like Dillo, and some others that don't allow add frames at all.  Dillo specifically does not use any Java code.   FYI.",pihole,1651053806.0
1348,comment,1,i6dhxap,,baked?,pihole,1651045246.0
1349,comment,1,i6dsj9q,,uBlock Origin seems to smoothly block every ad on Crunchyroll,pihole,1651054608.0
1350,comment,2,i6dhzz0,,Baked into the video. Like baking a file into cake to get your boyfriend out of prison.,pihole,1651045311.0
1351,comment,1,i6gmi94,,"It is a default extension in Chrome or ""ium""  I my self like ""Adblock plus""",pihole,1651099161.0
1352,comment,1,i6din6m,,"Oh, yeah… mmm… seems that the problem is that Chromecast uses its own DNS resolver.(https://www.reddit.com/r/pihole/comments/asmyig/ive\_gotten\_my\_chromecast\_to\_use\_my\_pihole\_as\_its/)",pihole,1651045851.0
1353,comment,1,i6dj9n5,,Some devices could also be using DNS over HTTPS or have a hard coded resolver.,pihole,1651046401.0
1354,post,253,ucvs3z,"Thanks, Roku! 🤦🏻‍♂️",,pihole,1651035752.0
1355,comment,43,i6e2p63,,"Vizio TVs try to take a screenshot of whatever's on the display (any input, doesn't matter) then upload it every few minutes. It's insane. Pi-hole puts a stop to that.",pihole,1651061302.0
1356,comment,112,i6dayfi,,"Many people misinterpret the blocked numbers.

Most devices will simply try again if they cannot get a connection. And again. And *again*.",pihole,1651039742.0
1357,comment,12,i6d7v9k,,"[Same](https://imgur.com/a/PUczGjc), I only have one Roku device and I had just purged my logs like 4 days ago when trying to fix some stuff (fresh install)",pihole,1651037591.0
1358,comment,21,i6d5t1y,,Pretty standard; all of my Samsung TVs do the same thing.,pihole,1651036204.0
1359,comment,9,i6da9vz,,"Roku... samsung tv, and my samsung phone (tho that is the apps) eat up lots.  Prob 90 of my blocks

Samsung tv is a pita, as you have to figure out what to whitelist otherwise the smart tv apps fail",pihole,1651039255.0
1360,comment,2,i6en4d0,,My  FireTV isn’t far behind.,pihole,1651070681.0
1361,comment,2,i6eqwy9,,Amazon's products are no better...,pihole,1651072203.0
1362,comment,2,i6h2bt7,,Yeah I legit bought another streaming box cause of this. Honestly Roku should be paying the customers a monthly fee for how much data they're scraping. Sure every streaming box out there will do this to a certain extent but Roku is WAY worse than anything else,pihole,1651106537.0
1363,comment,2,i6hqg3r,,NVIDIA SHIELD TV is the same so many pings for netflix which you may think is ok but I do not even have Netflix installed...i blocked it but most of the time just keep the whole device off line by blocking it in the router setting I just turn it on to do updates every so often.,pihole,1651117585.0
1364,comment,1,i6dzvxm,,"Laughs at 50,000",pihole,1651059668.0
1365,comment,1,i6em1a2,,The spike from when I turn on my roku every night is ridiculous.,pihole,1651070243.0
1366,comment,-4,i6f0cfz,,OP doesn't know how DNS works🤣,pihole,1651075840.0
1367,comment,1,i6ey21k,,Plug in a Samsung smart tv and see what happens.,pihole,1651074967.0
1368,comment,1,i6f6zh9,,"My docker host is spamming index.docker.io for no reason.

It reached 136,000 requests, 37 thousand from it alone",pihole,1651078402.0
1369,comment,1,i6fpoji,,One of the reasons I switched to Apple TV.,pihole,1651085813.0
1370,comment,1,i6fqgfk,,"More lists to add

https://firebog.net/",pihole,1651086115.0
1371,comment,1,i6fwswe,,How did you even set your roku to listen to a pi-hole? There's no DNS settings on the device.,pihole,1651088645.0
1372,comment,1,i6fzobo,,"Oh hello scribe.logs.roku.com.  (or whatever the syntax was) Been a while.   I reset my roku and won't let it onto my network ever again.

Its apps were dog doodoo anyway.",pihole,1651089756.0
1373,comment,1,i6gwmxg,,"My Vizio isn’t connected to my LAN/WiFi and the Apple TV isn’t very chatty, generally. Pretty happy with this setup.",pihole,1651103900.0
1374,comment,1,i6hfaqx,,same: https://i.imgur.com/kgEK6f1.png,pihole,1651112411.0
1375,comment,1,i6hq3k4,,"I am using the default block list, current block rate is only around 25%.
Any additional list being used?",pihole,1651117411.0
1376,comment,1,i6ybiam,,"Many smart devices do this, but Roku is by far the worst. Followed by some phone apps, they can get very chatty.",pihole,1651440530.0
1377,comment,-2,i6en00u,,In my experience Rokus are pretty “silent“ I replaced all my Fire TV sticks with Rokus half a year ago and my stats went from 5Million blocked to around 700k per month.  But that may be related to my Blocklist being heavily focused on Amazon services.,pihole,1651070632.0
1378,comment,13,i6gr5h8,,I will never give my TV my wifi password because of these stories. I prefer my TV’s to be dumb.,pihole,1651101294.0
1379,comment,19,i6e5jdh,,Woah. Do you have a source for that? Because that is awful.,pihole,1651062846.0
1380,comment,6,i6fkeud,,I once interviewed for a job with a company in Austin that basically made the software these companies use to do this analytics. The name is SambaTV. Not sure if that’s who Vizio use but they had a lot of smarttv manufacturer contracts when I interviewed there.,pihole,1651083720.0
1381,comment,5,i6gxnml,,They must see a lot of porn,pihole,1651104375.0
1382,comment,6,i6f1yn7,,"Since smart TVs have become ubiquitous, Vizio is basically an advertising and data analytics company that only makes televisions to further that primary mission.",pihole,1651076463.0
1383,comment,26,i6f262u,,"I also have a Roku that was doing this, and [increasing the block TTL](https://docs.pi-hole.net/ftldns/configfile/#block_ttl) on my Pi-hole reduced the volume of retries. Devices will retry queries when their internal cache of the reply expires, so increasing the TTL on blocked responses from the Pi-hole will make them wait longer.

The block TTL should be low enough that you don't have to wait very long after you've allowed a domain or disabled Pi-hole to see the effects. That's why the default is 2 seconds. I increased it to 10, which reduced my volume of blocked queries by about 80%, but has still been short enough for me so that I'm never waiting for cache to clear when I allow domains.",pihole,1651076543.0
1384,comment,45,i6dbtm6,,"That’s exactly it. No back off timer, apparently. Top flight software design across the board 🤢",pihole,1651040376.0
1385,comment,10,i6d8soo,,">and I had just purged my logs like 4 days ago when trying to fix some stuff (fresh install)

For what it's worth, the period represented there is a rolling 24h window, not ""since all time"". In other words flushing logs $ANY_PERIOD ago isn't relevant, where $ANY_PERIOD is greater than 24h.

You might notice that the block rate/percentage blocked operates within the same window, as opposed to being a perpetual counter.",pihole,1651038214.0
1386,comment,17,i6eu5bd,,"I still find it bizarre that people actually connect their smart TVs to the Internet, doing so seems to cause nothing but problems and they are *definitely* spying on you.",pihole,1651073468.0
1387,comment,1,i6f2sne,,Its only standard because they are getting away with it.,pihole,1651076784.0
1388,comment,4,i6g53tr,,DHCP Server in the network,pihole,1651091855.0
1389,comment,1,i767sai,,The Hulu iOS app is roughly 50% blocked.,pihole,1651592579.0
1390,comment,3,i6h1kms,,"yep. have several TVs in the living room, they exist as 'dumb' screens for my living room PC and game systems. works great",pihole,1651106191.0
1391,comment,26,i6eieeh,,Found it https://finance.yahoo.com/news/government-confirms-vizio-tvs-spy-152300028.html,pihole,1651068744.0
1392,comment,10,i6gtafx,,"That's why they're so inexpensive. You don't buy it with money, you buy it with your data.",pihole,1651102313.0
1393,comment,1,i6q388g,,I have 2 Vizio TVs and neither one of them shows any ads even when unblocked so 🤷‍♂️,pihole,1651272650.0
1394,comment,6,i6h043n,,This is amazing. I was wondering how to reduce the chatter from my damn Roku. Much appreciated!,pihole,1651105511.0
1395,comment,1,i76xctb,,How did you do that? When I try to edit the /etc/pihole/pihole-FTL.conf file and set BLOCK\_TTL=10. But it says that file is unwritable. Thanks in advance! :),pihole,1651602691.0
1396,comment,31,i6dfbpv,,"It’s intentional though. An average Jo’s network may be really patchy and the connection may not be established until the third try (especially if someone is using a mobile router for their network). 

As you say, there should be a timeout after day 10 tries, but if it happens every 5 mins, that’s 120 requests every hour or 2880 every day, that quickly adds up.",pihole,1651043082.0
1397,comment,1,i6dbxll,,"Makes sense, I thought the top part was 24hrs but the bottom was all time",pihole,1651040456.0
1398,comment,10,i6evea2,,I actually don't. I isolate them to a VLAN that doesn't have direct internet access (yay layer three switches). They are on the network so I can cast to them and use Plex.,pihole,1651073953.0
1399,comment,3,i6f6ts0,,"So is VISA/Mastercard on *everything* you spend, Youtube on what you Watch, Google on where you go.  Everyone is spying.  I connect my TV via a VPN personally.",pihole,1651078341.0
1400,comment,1,i6f3dx4,,It's a consumer electronic devise and the vast majority of consumers don't know it's going on or don't care. They want stuff to just work and mass spewing DNS requests is how manufacturers create high availability and a “positive user experience.” Only us nerds poke around in the guts of networks.,pihole,1651077011.0
1401,comment,14,i6ejgf8,,"Wow. Well, that's an enormous pile of yikes.

Thanks.",pihole,1651069191.0
1402,comment,1,i6q44g3,,"I'm happy for you! My point is more that pawning off your data is more lucrative for them, which is why they are able to sell their TVs for so cheap.",pihole,1651273083.0
1403,comment,2,i77b68o,,"Try editing it as root, `sudo nano /etc/pihole/pihole-FTL.conf`. It's not owned by the default `pi` user that you log in through. Hope that helps!",pihole,1651608499.0
1404,comment,25,i6dgeiv,,"I was thinking more along the lines of Exponential Backoff like TCP uses: https://en.m.wikipedia.org/wiki/Exponential_backoff 

It’s not a secret or anything. Just sloppy design.  Makes me shudder to think what else is in that code… that’s why it’s in a VLAN!",pihole,1651043966.0
1405,comment,1,i6lkpev,,"I just added a wifi module onto my Rain Bird sprinkler system & it is reaching out to rainbird.com over 25,000 times per day!",pihole,1651188922.0
1406,comment,2,i6ewaav,,Isn't that more trouble than it's worth? Doesn't the device you are casting from have to be in the same VLAN for that to work?,pihole,1651074290.0
1407,comment,1,i6grf0j,,Why not just not give it a wifi password? Your solutions seems unnecessarily complicated.,pihole,1651101419.0
1408,comment,0,i6f8n8e,,"> So is VISA/Mastercard on everything you spend

Honestly I use cash for most of my expenses. I live in Japan and cash is still the most common way to pay here, you'll still find stores (even some pretty big ones) that don't take cards. My favorite chain of supermarkets doesn't take cards at all, for example. Cash only.

> Youtube on what you Watch

I can live with this as I use pi-hole and uBlock Origin to block anything they might serve to me based on the spying they do.

> Google on where you go

I own no Android devices and for navigation I use NaviTime (Google *sucks* in Japan for navigation.)

> Everyone is spying.

Probably. I have no doubt that Apple gathers data on iPhone users but they don't *seem* to be selling it to 3rd parties.",pihole,1651079045.0
1409,comment,1,i6zk0px,,"Vizio doesn't seem to do that quite as much though. That's more the realm of TCL, Hisense, etc...",pihole,1651462742.0
1410,comment,1,i77bwhc,,That worked. Thanks for the help!,pihole,1651608811.0
1411,comment,11,i6e5jkx,,"Exactly. I really hope Roku changes this going forward, I have two on my network and my block percentage jumped from 20% to about 80% as soon as I plugged these into my network. They are trying to connect every second all day long. Very annoying. 

Each time it fails to connect, it should increase the check in time, it should keep doing this until it gets to one check per day or something like that. If the user absolutely needs the Roku to check in (not sure why this would be needed) they can follow the universal 'unplug' when it isn't working and on boot it will force for a check in.

With that being said, I would bet that most Roku users have no idea what this device is doing behind the scenes and this isn't an issue for them.",pihole,1651062848.0
1412,comment,6,i6exzvo,,"Exponential back off makes sense when you have someone monitoring the system and can repair failures. That isn’t the case here. 

This is a “feature” where expected transient failures are retried forever. I don’t think Roku is coding for the pihole case.",pihole,1651074944.0
1413,comment,4,i6fvynx,,"I disagree that it's sloppy. I believe it's completely intentional and well within the design goals of an always connected device that they want to have phone home all the time. It's completely reasonable IMO. 

I don't like it, wish the thing would shut up. But I understand.",pihole,1651088307.0
1414,comment,7,i6ewtsm,,"It's definitely complicated. You have to have inter-VLAN firewalls, tagging, and switching. But if you have the right hardware it's not horrible. I had one of my smarter networking friends watch me set it up and correct my mistakes.",pihole,1651074501.0
1415,comment,1,i6grl3g,,"I wouldn't be able to use Plex, Chromecast, or my network TV tuner.",pihole,1651101499.0
1416,comment,1,i6fsad0,,"Ah, you were doing so well until you mentioned Apple.  But on a serious note well done for being so protective of your data. But for 99% of people no shits are given. So connecting a TV to the internet is a moot point.",pihole,1651086849.0
1417,comment,1,i6zme3y,,"Hard numbers are hard to get for Chinese companies, for sure, but Vizio is public, and fiscally, data is a bigger business for them.

https://www.theverge.com/2021/11/10/22773073/vizio-acr-advertising-inscape-data-privacy-q3-2021",pihole,1651464173.0
1418,comment,10,i6eb7r4,,"> With that being said, I would bet that most Roku users have no idea what this device is doing behind the scenes and this isn't an issue for them.

it's not a problem for anyone. Roku making requests every second went completely unnoticed until you setup a pihole on your network. Re-trying failed keep alive requests is cheap, why over complicate it with logic to throttle requests? Just because it's elegant?",pihole,1651065603.0
1419,comment,3,i6f2jn1,,"Roku, wyze, Toshiba, Fire tv... everyone uses this network abusive programming. I agree. Time to start buying only decent coded hardware to force change. (why I chose to learn python, and create my own things like tv dashboards)",pihole,1651076687.0
1420,comment,-1,i6fxk0i,,"I agree that they aren’t writing their software with this type of monitoring in mind, but I’m inclined to note that the content of these domains aren’t critical to the function of the device, so maybe don’t spam the network with useless traffic for no reason?

Basically, I’m just trying to say it’s a bad design and possibly indicative of more “interesting” things just below the surface.

Exponential backoff isn’t just for monitoring, either. It’s for healthy network function. Even Ethernet has a timer for packer collision based retransmission: it doesn’t just flood the network. This is all fundamental design they decided wasn’t worth the effort, and it’s ridiculous. 🤷🏻‍♂️

(Edited for clarity)",pihole,1651088940.0
1421,comment,1,i6fxykr,,"My point is that there are ways to do that without this type of traffic. Ways that are well established, publicly available, and widely implemented. They just decided not to do that for… reasons?
In the big picture it’s nothing, I agree. It certainly has brought some really great discussion on this thread, and it’s all been constructive thus far. So that’s a positive, at the least!",pihole,1651089096.0
1422,comment,2,i6exd81,,"That's a hell of a lot of work, and I'm not sure exactly what it accomplishes. Are you concerned about your Smart TV attacking other devices on your network? If not, why not use firewall rules to block it from accessing the Internet? That would avoid the whole VLAN issue and be a LOT easier to manage.

(I'm trying to understand the reasoning here. If there is a sold reason behind why doing it this way is better than just blocking them at the firewall, I might consider doing something similar when I redo my network next time.)",pihole,1651074705.0
1423,comment,1,i6gtxpe,,"How does your tv not having internet affect a chromecast? For others, i prefer getting a 3rd party decice (not roku) to ise those apps. I like to game, so my xbox serves as my media center hub. Streams plex just fine from my pc",pihole,1651102616.0
1424,comment,1,i6hb94x,,I make no claims on apple being *good* overall. They do however seem more interested in the privacy of their users than Google does.,pihole,1651110618.0
1425,comment,10,i6eejbo,,"I agree, it isn't a problem, it is annoying. Mainly because roku is just one device and with everything being cloud connected, many devices will have similar lookup requests. I had devices with blocked check in requests before I added Roku, but Roku is on their own level. The other devices would check in every 30 seconds or 60 seconds, but the numbers weren't crazy. Roku is way overboard, imo.",pihole,1651067090.0
1426,comment,1,i6fx1bb,,"Actually, yes, just because it’s elegant. It shows the quality of code that shop is putting out, and suggests a lack of quality in general. I’m inclined to try to grab an update off the network and see what is in the package. Time to look into certificate handling on the Roku and hope it’s as poorly designed as the networking code!",pihole,1651088738.0
1427,comment,2,i6g4mhb,,"Exponential back off makes sense when you have someone that can fix an issue (and is typically not used for monitoring) specifically for cases with an explicit number of retries.  This is not Roku’s intended functionality and by no means is indicative of poor design. 

Exponential backoff would eventually result in the function being effectively turned off, which they don’t want. They aren’t including a function to turn this off because they don’t want you to turn it off. The traffic is useless to you but not to them.",pihole,1651091666.0
1428,comment,3,i6fy4ce,,"it's not bad design.

your argument is that bulletproof vests are badly designed because they don't protect against gas.

it is an excellent design for the intended use case - someone who simply plugs in the device. you intentionally sabotaging the product and them not designing with your form of sabotage in mind is not a bad design.",pihole,1651089158.0
1429,comment,3,i6eyzoi,,"It's not for everyone. If you can do it I don't see the harm, but if you can't I don't see a reason for people to rush out and buy hardware. I do it for several reasons.
* Devises like TVs very often get dropped for support by the manufacturer a few years after then are sold. So the older they get the more vulnerable they become. I buy a new TV every 3 years. 
* Smart devises can become compromise other network systems. It's rare but it can happen. I've got Plex, DNS servers, a NAS system, and several other devices that I don't expose to the internet that are more at risk of attack from within. 
* Aside  from internal attack, comprised smart devices can criptomine driving up power use or become members of botnets distributing malware and doing DDoS attacks. 
* I work from home quite often and having C2 or known malicious traffic coming out of my public IP would make my job a little harder.",pihole,1651075323.0
1430,comment,1,i6gv50y,,I have several TVs (six in total) I don't feel like spending the money to buy dongles or game systems when they are perfectly capable of running native applications that connect them to the media they display. It's eissier to just use the network infrastructure I have already to block them from the internet.,pihole,1651103188.0
1431,comment,3,i6ej9n8,,I wish they had more transparency (that goes for everyone else too). If I knew what each request was doing without looking through my network I'd be more OK with it I guess.,pihole,1651069113.0
1432,comment,1,i6gewoq,,"You make a valid point about it eventually being turned off. Maybe I should’ve been more clear, but I was including the assumption that the connection would attempt to be initiated again at a later time. Just not 5 seconds later, repeated essentially ad infinitum.",pihole,1651095842.0
1433,comment,1,i6fzh8c,,"I  see your point, but I consider it poor design because:

1) This is a known failure mode
2) Solutions have been available since the 1980s
3) Said solutions are publicly available
4) and they’re widely implemented elsewhere

It’s pretty basic network functionality, and has been addressed with varying levels of effectiveness for nearly half a century. If you’re selling a networked device that doesn’t follow best practices that have been recognized for that long, it makes me curious about the rest of the code base. 

I say this recognizing that perfect is the enemy of good, and at best it was a “it compiles, it works good enough, ship it”. I don’t blame them for that because it’s how commercial software works.

It’s my belief that this is representative of how the software is designed and implemented, and doesn’t speak highly to that end. End of the day, I’m still using it, though!  So not too bad in the end, clearly.

(Edit: half a decade changed to half a century. Pretty big difference there!)",pihole,1651089680.0
1434,comment,1,i6hhofx,,"Wow 6 TVs, ya I guess your solution is best for your use-case!",pihole,1651113459.0
1435,comment,2,i6hi0g8,,"Living room, office, basement, and 3x bedrooms.",pihole,1651113612.0
1436,post,6,ucvdxd,how to change pi.hole to pi2.hole,"I am running a few instances of pihole for redundancy on proxmox. I was wondering how would I go about accessing another pihole on my lan as pi2.hole since my first pi is pi.hole. Hope the question doesnt seem dumb, but doing a little bit of research has gotten me no where.  Thanks again",pihole,1651034253.0
1437,comment,7,i6d33ht,,"Change the hostname.

hostnamectl set-hostname <new hostname>",pihole,1651034510.0
1438,comment,1,i6d34ra,,"Numbers are invalid for Local DNS records.

Edit: Use something like pihole-slave.lan on the local DNS menu",pihole,1651034532.0
1439,comment,1,i6ecdcp,,u/jfb-pihole any suggestions?,pihole,1651066126.0
1440,comment,1,i6ff8f5,,You can name them whatever you want.,pihole,1651081639.0
1441,comment,1,i6d98rv,,"The device will still respond to pi.hole, you would also want to set the [PIHOLE_PTR](https://docs.pi-hole.net/ftldns/configfile/#pihole_ptr) value to HOSTNAME/HOSTNAMEFQDN.",pihole,1651038526.0
1442,comment,1,i6d8s6j,,"That all kinda depends on what RFC you refer to, as some say yay and others say nay….. At which point worth noting they’re not a “Standard”, but “Informational”. And to be honest I’ve not come across a situation where including numbers haven’t worked in local dns.",pihole,1651038204.0
1443,comment,1,i6hvr7z,,https://docs.pi-hole.net/ftldns/configfile/#pihole\_ptr,pihole,1651120519.0
1444,comment,1,i6ec9bi,,">hostnamectl set-hostname

hm so I did both of the suggested and it never worked.",pihole,1651066075.0
1445,comment,1,i6da99c,,Yes I totally agree. For example I can access my secondary pi @ raspberrypizero2w/admin which its hostname. But if you what to use the local DNS feature you can't use numbers. And for hostname you can't use underscore for example. Programs like sudo can't resolve hostnames with non ascii characters. I found out the hard way.,pihole,1651039242.0
1446,comment,1,i6dj5ii,,"I would consider that a bug, personally. It's worth reporting.

Digits are perfectly valid/fair game for hostnames. Underscores present weirdness too. Invalid in a hostname, but quite valid in a record.

There's also some other oddball cases like - being a valid character, but a hostname not being able to start or end with it (`this-hostname` is fine, whereas `-this-one-is-not-`).",pihole,1651046298.0
1447,post,2,uctk15,What’s a benefit of using DNS over HTTPS?,"I’ve been thinking about running it on top of pi hole since I’ve heard it increases privacy, but in what ways? Does it hide my traffic from ISP and such?",pihole,1651027855.0
1448,comment,3,i6cqqim,,"Encrypted DNS resolution. But ultimately you're sending the IP address of the site you want to visit to your ISP so it doesn't hide your browsing at all, but does help with MITM attacks and such.",pihole,1651027986.0
1449,comment,2,i6crxpc,,"Related question: Does pihole support being a DoH resolver? All I can find online seems like setting up forwarding for DoH, but not resolving.",pihole,1651028539.0
1450,comment,2,i6cwkak,,it's a quick read: https://www.cloudflare.com/en-ca/learning/dns/dns-over-tls,pihole,1651030826.0
1451,comment,1,i6cy7kw,,"One of main benefit, on some countries, ISP are mandatory to have Safe Internet Experience using DNS redirection. So, DoH, DoT, DoQ, or DNS over vpn can help  to bypass it.",pihole,1651031698.0
1452,comment,1,i6e7vw9,,"There's a few trivial DNS blocks in the county I live, easily circumvented, using in my case DOT give a slight edge over just using another DNS server. I use stubby running on the PI and PiHole queries stubby.",pihole,1651064027.0
1453,comment,-1,i6d7hq3,,"You don’t need DoHTTPS. It causes way more issues than it solves. We already have a secure solution for DNS, it’s called DNSSEC. If you want encrypted, use DNS over TLS. Pihole doesn’t support that though. 

All DoH does is hide your DNS lookups from your isp or others, but you still send traffic to those websites. So it is trivial to track the activity anyway.",pihole,1651037338.0
1454,comment,3,i6ctvuv,,">Does pihole support being a DoH resolver?

No.",pihole,1651029475.0
1455,comment,1,i6idztf,,"DNSSEC deals with a different issue, which is verifying the integrity of the DNS record itself. It has nothing to do with the privacy of the request.

DoH and DoT are two methods of accomplishing the same thing, just using different transport means. If your goal is to evade ISP or government censoring/highjacking via DNS, then DoT is pretty easy to block, whereas DoH is virtually indistinguishable from normal HTTPS traffic.

I don't know what you mean by DoH causes more issues than it solves; if deployed correctly, it will work fine. It only really becomes an issue for you as a network operator when rogue devices or layer 7 traffic attempts to circumvent your primary DNS ie. pihole",pihole,1651134498.0
1456,comment,1,i6cyf7c,,You can. Not easy tho,pihole,1651031816.0
1457,comment,1,i6ie7de,,"https://www.google.com/amp/s/www.zdnet.com/google-amp/article/dns-over-https-causes-more-problems-than-it-solves-experts-say/

Keeping your DNS traffic secret is almost pointless because the beginning of every TCP handshake identifies the server you are talking to. It takes a bit more effort to track it, but it’s still extremely easy.",pihole,1651134692.0
1458,comment,2,i6d3fw9,,Not without another service doing the forwarding like cloudflared or unbound.,pihole,1651034719.0
1459,comment,1,i6dqepi,,Yep. Thats what I am talking about,pihole,1651052822.0
1460,comment,3,i6i0itb,,"Semantic issue I think.

That still counts as a no for me. If someone asks me if X can do Y, and I say ""yes, but you need to include Z to do it"", that's Z doing Y, totally removed from X.",pihole,1651123557.0
1461,post,1,ucq49u,Pihole blocking Sony Bravia/AndroidTV Over the air guide menu?,"I've been running pihole with OpenDNS for about 6 months now with great success. But it seems that ever since I started with this setup, on my Sony Bravia / AndroidTV, the TV Guide for my digital over-the-air channels no longer populate the actual program in the browsable guide, it just says 'Not Available'. Prior to that, all of the channels would display what is currently playing on that channel, and I could browse without actually switching the channel to see what is playing on other channels. Has anyone else seen or experienced this?",pihole,1651016846.0
1462,comment,2,i6c8jp9,,"Have you tried the pihole FAQ? This should probably help you. 

https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522",pihole,1651020094.0
1463,comment,1,i6c7bzv,,"I have a Hisense U8G 55"" and sometime ago (I think it was last week) I had the same thing happen.  I would tell you what I did to resolve it, but all I did was wait - I'm not convinced there wasn't an issue on their source end of the data for the OTA programming guide.  Only mentioning this in case it helps you.  I tried disabling my Pihole when it happened and it had no impact.  Try disabling your Pihole, try an alternate DNS provider - if neither resolves might not be your DNS provider or Pihole at fault.",pihole,1651019560.0
1464,comment,2,i6cncee,,"This helped. I tried bypassing the pihole/opendns with [8.8.8.8](https://8.8.8.8) as a test and the problem persisted, ruling out issues with the pihole, the timing must have been a coincidence. 

I found an article for AndroidTV which suggested I force stop the 'TV App', clear data, and clear cache, then rescan channels and that seemed to resolve my issue, all OTA guide channels are present and browsable.  


https://digihelpdesk.co.uk/youview-showing-no-information-available-on-a-sony-tv-what-to-do-next/#:\~:text=Clear%20your%20Sony%20TV%20cache,data%20and%20clear%20all%20caches.  


Cheers,",pihole,1651026465.0
1465,comment,1,i6e6uyp,,Awesome glad it helped.  On 2nd thought I think I might have cleared my AndroidTV cache as well so maybe that was a part of the solution.,pihole,1651063523.0
1466,post,0,ucnrsx,Raspi with pihole crashing,"So I installed pihole on a computer using Rasberry Pi os, and recently its been crashing after a few hours. Need this to be up and running, and have no idea how to troubleshoot.",pihole,1651010020.0
1467,comment,1,i6c0y98,,"You haven't given us much to go on. Is the computer a Raspberry Pi? The way you posted, it's not clear. If so, which model? Which RPiOS distro? Do you have other software/servers running on it? Have you run this ""computer"" before? Same mSD card? Good quality mSD card? Size of mSD card (smaller ones develop faults much faster than large ones)?

Describe what you mean by ""crashing."" How long does it run after boot before crashing?",pihole,1651016686.0
1468,comment,1,i6ccp97,,"First you could check your logs and tell us some more about your system:

`uname -a`

`lsb_release -a`

`dmesg -l err,crit,emerg`",pihole,1651021920.0
1469,comment,0,i6dbx8r,,"Get the latest Ubuntu Server, install that and then install Pihole.",pihole,1651040449.0
1470,comment,1,i6c1ftn,,"No it's an old Thinkpad T series, but has never had problems and runs fine. It just runs pihole, and is using a usb thumbdrive for pi os. I haven't seen the crash happens, all of the sudden the wifi stop, and i have to restart the computer. From what i can tell, the computer is still running after the crash, but has no os.",pihole,1651016906.0
1471,comment,1,i6cecde,,"Linux Pi-Hole 4.19.0-13-amd64 #1 SMP Debian 4.19.160-2 (2020-11-28) x86\_64 GNU/Linux  


No LSB modules are available.  
Distributor ID: Debian  
Description:    Debian GNU/Linux 10 (buster)  
Release:        10  
Codename:       buster  


dmesg: read kernel buffer failed: Operation not permitted",pihole,1651022629.0
1472,comment,1,i6gjeut,,"As i have previously said, im not trying to go through that.",pihole,1651097789.0
1473,comment,1,i6c2nbl,,"Okay, there is no RPiOS that runs on x86 such as your T-Pad. There is a version of Debian that has an RPiOS desktop with menu items that look like the ones on RPiOS. I don't know the last time it was updated but I suspect that may be out of date and not compatible with current Pi-Hole. You'll need to check the distro (lsb\_release -a). Check the codename value. Current is bullseye.  


If it's current, my guess is wrong and I'll leave it to the talented folks here to offer more useful assistance.",pihole,1651017460.0
1474,comment,1,i6ceq9e,,">dmesg: read kernel buffer failed: Operation not permitted

try:

`sudo dmesg -l err,crit,emerg`",pihole,1651022796.0
1475,comment,1,i6kg1t6,,If you want a stable experience yet aren't prepared to do anything to get it.  Good luck with that.,pihole,1651171943.0
1476,comment,1,i6c32g9,,"It says its running buster. I hadn't had problems for over a month, and don't want to have to reinstall an entire OS, setup pi hole and update my router settings, is there a way around this. Where do I go from here.",pihole,1651017653.0
1477,comment,1,i6cf0v7,,"PiHole is even compatible with stretch:  
https://docs.pi-hole.net/main/prerequisites/",pihole,1651022920.0
1478,comment,1,i6gj495,,didn't work,pihole,1651097660.0
1479,comment,1,i6h6oie,,what do you mean? what was the output of the command?,pihole,1651108525.0
1480,comment,1,i6lagvs,,"There wasn't one, just blank.",pihole,1651184189.0
1481,comment,1,i6lrka0,,"Ok, what about

`systemctl status pihole-FTL.service`

and

`journalctl -xe`",pihole,1651192128.0
1482,post,6,ucmfn1,Normal to have scores of reverse dns requests?,"**EDIT:Upon reviewing my 1st Grade literature, I decided to read the rules and search my question. I see now that these are service discovery requests commonly associated with the Bonjour network protocol. This aligns with my network setup.**

**However, what I am still unclear on is why these requests are being made for subnets that don't exist on my network, and why (how) they would return DNSSEC validation as well as NXDOMAIN.**

&#x200B;

**Original Post:**

One **known** client on my network is constantly making ~~reverse dns requests for hosts on my network,~~ **(see edit)** many of which don't exist or are on subnets that don't exist.

From what I can tell, all requests are being served NXDOMAIN, but strangely some come back with NXDOMAIN... **and** DNSSEC Validation.

They basically all follow this format (sans DNSSEC validation for ones without it):

    Validated with DNSSEC
    
    lb._dns-sd._udp.6.0.0.192.in-addr.arpa
    Type: PTR, Plain DNS
    
    Response details
    
    Status
    Processed
    
    DNS server
    https://dns10.quad9.net:443/dns-query (served from cache)
    
    Elapsed
    0.16 ms
    
    Response code
    NXDOMAIN

Any clues?",pihole,1651006324.0
1483,comment,2,i6cgzs6,,[deleted],pihole,1651023753.0
1484,comment,2,i6cjyov,,"https://docs.pi-hole.net/ftldns/configfile/

ANALYZE_ONLY_A_AND_AAAA=true",pihole,1651025023.0
1485,comment,2,i6cn7o1,,"Yes, it is an iphone, and same here. More than one on the network, yet it is only the one client that does it. Strange!",pihole,1651026406.0
1486,comment,1,i6co4sh,,"Hmm, that *would* solve the issue of them appearing in logs... however that feels very much like just putting a bandaid over the problem and not useful for discovering possible root causes of the issue. 

&#x200B;

What if the cause is a system compromised in some way? Then the nature of how the issue presents may change after altering the configfile; allowing for some future unknown behavior",pihole,1651026817.0
1487,post,1,ucgwpt,What is this domain?,"New place, and internet provider: I've gotten over 100,000 queries for  ""206d31019c57"" and therefore I blocked the domain. What is this domain? 

Setup: ISP provided gateway (now bridge mode) --> firewall --> router/AP. The only thing that is new compared my previous setup is the gateway, whereas before I had my own modem. So far everything works.",pihole,1650991473.0
1488,comment,1,i6ae4ty,,"That would be a MAC address - of your firewall presumably. 

https://aruljohn.com/mac/206D31019C57",pihole,1650992564.0
1489,comment,1,i6ahl57,,"Thanks, why would it start showing up now as I've had the firewall for over a year?",pihole,1650993897.0
1490,comment,1,i6aldh5,,I haven't the slightest idea.,pihole,1650995357.0
1491,post,1,ucfepg,Cisco Umbrella Client on Work Machine - Having Issues Loading Websites,"Hey Everyone,

I currently started a new job and was given a work macbook with the Cisco Umbrella Client for ""DNS Protection"" according to their IT department. However, I already run a pi-hole (with unbound configured) at home to handle all my DNS traffic for all my local devices. 

The Problem:

Occasionally, the work macbook will timeout when trying to load pages (gmail, google, etc.). I am unsure if this is due to some conflicts with my pi-hole and the Cisco Umbrella client, so I thought I would ask. In addition, is there some special settings or whitelisting I need to do to make sure the work laptop is able to function without issue?

Thanks in advance to everyone for your time and help, it is greatly appreciated!",pihole,1650987517.0
1492,post,1,ucf0pf,Adding LocalDNS records with ports on pihole,"I’ve have multiple services running on my raspberry pi (pihole, omv, homebridge, etc) they all run off the same ip (my pi’s ip) but all on different ports. I’ve searched for a whole online and can’t seem to find a way to  add a DNS record on pihole with a port in the IP address. Is there a possible way to do this?

I would like to have something like:
Omv.com = 192.168.5.60 (port 70)
Homebridge.com = 192.168.5.60 (port 90)
And so on…

When trying to add the ip with the port on the end with : or # or () it just says “IP must be valid”",pihole,1650986489.0
1493,comment,8,i6a2a47,,I think you would need a reverse proxy for that.,pihole,1650988013.0
1494,comment,5,i6ameej,,"DNS doesn't speak ports, you need a reverse proxy for this",pihole,1650995752.0
1495,comment,0,i6a5hlh,,"I think what you might be looking for is a DNS SRV record. [https://www.cloudflare.com/learning/dns/dns-records/dns-srv-record/](https://www.cloudflare.com/learning/dns/dns-records/dns-srv-record/)

I'll have to pled ignorance as to how you might make PiHole alone serve back SRV records; I'd argue weakly that it can't/doesn't. By itself I mean. But I'm pretty sure unbound will do it for you. You'd have PiHole use unbound as its upstream DNS server and add SRV records to unbound's (local) a-records.conf.

Interested as to how you foresee using this. Is it just for documentation purposes? For documentation, AND if you use ufw, you can add a comment to rules. If you don't then sorry for the tangent and please ignore me.

sudo ufw status  
Status: active  
To                         Action      From  
\--                         ------      ----  
22                         ALLOW       Anywhere                   # ssh  
53                         ALLOW       Anywhere                   # pihole DNS  
81                         ALLOW       Anywhere                   # pihole docker maps this to 80  
1883                       ALLOW       Anywhere                   # Mosquitto MQTT  
2342                       ALLOW       Anywhere                   # photosync  
8060                       ALLOW       Anywhere                   # HomeAssistant Roku Emulator  
8123                       ALLOW       Anywhere                   # HomeAssistant main  
51820/udp                  ALLOW       Anywhere                   # Wireguard",pihole,1650989232.0
1496,comment,1,i6amml5,,Any idea if I’m able to do this through unbound with pihole?,pihole,1650995839.0
1497,comment,1,i6cdglo,,"Pihole has no need for a firewall thats what your router is for it stops all unrequested packets.

I run pihole on a ubuntu VM and UFW is not running.

&#x200B;

    sudo ufw status
    Status: inactive",pihole,1651022252.0
1498,comment,1,i6aqmny,,"Yes (set a SRV record in unbound):

[https://nlnetlabs.nl/documentation/unbound/unbound.conf/](https://nlnetlabs.nl/documentation/unbound/unbound.conf/)

[https://securitytidbits.wordpress.com/2019/10/15/unbound-srv-record/](https://securitytidbits.wordpress.com/2019/10/15/unbound-srv-record/)",pihole,1650997390.0
1499,comment,1,i6cf22j,,Good for you.,pihole,1651022935.0
1500,comment,1,i6ara3k,,for the syntax check https://en.wikipedia.org/wiki/SRV\_record,pihole,1650997644.0
1501,post,24,ucdd6t,Did they just rolled back FTL to 5.14?,I just noticed they rolled back FTL from 5.15 to 5.14. Any particular reason as to why? Just wondering.,pihole,1650981992.0
1502,comment,13,i6cf37b,,"It wasn't intentional. Seems like GH has lost our most recent release on a few repositories in the past month or so.

Should be at v5.15 for the latest.",pihole,1651022949.0
1503,comment,6,i69y5wo,,Yeh seems to have rolled back. Did pihole -up and my install went from 5.15 -> 5.14,pihole,1650986423.0
1504,comment,1,i69xm2f,,Mine is still at 5.15...,pihole,1650986211.0
1505,comment,1,i6a129d,,They might have something posted in the logs for either 5.15 or 5.14 for the roll back.,pihole,1650987546.0
1506,comment,1,i6al7xl,,Mine is at 5.15,pihole,1650995299.0
1507,comment,1,i6anjsf,,"There is a 5.15 release but on github the latest release is shown as 5.14.

[https://github.com/pi-hole/FTL](https://github.com/pi-hole/FTL)  
https://github.com/pi-hole/FTL/releases/v5.15  


I'm not sure what's going on here.

Nothing in the official forum about a rollback tho.",pihole,1650996192.0
1508,comment,1,i6bryvs,,"Mine did this too... I also had some weird issue a couple days ago where none of my long term data was showing in the web interface, but was in the FTL database. It randomly started working again, but it threw all kinds of weird errors in the pihole-FTL.log file related to database locking when trying to write. It was probably a bug that they rolled back",pihole,1651012565.0
1509,comment,1,i6c0v88,,"My kern.log and syslog filled up my sd card, most recent message were like this:

Apr 26 16:35:19 raspberrypi kernel: \[326245.924758\] brcmfmac: brcmf\_sdio\_readframes: RXHEADER FAILED: -84

Apr 26 16:35:19 raspberrypi kernel: \[326245.924763\] brcmfmac: brcmf\_sdio\_rxfail: abort command, terminate frame, send NAK

Anyone else having the same issue?  I just did a pihole -up and went back to 5.14 but i'm not confident it resolved that issue.

Edit: it did not, looks like a different issue",pihole,1651016648.0
1510,comment,1,i6da5o4,,Doing another pihole-up today has (re)updated my FTL back to 5.15,pihole,1651039173.0
1511,post,5,uc7soo,Pi-Hole with Unbound reporting Cloudflare DNS when checking for DNS leaks,"I have Pi-Hole setup along with Unbound, with Wireguard as the VPN solution. They are all on separate docker containers, on the same Raspberry Pi. I added the correct address and port of the Unbound docker container to Pi-Hole, with no other DNS servers selected. However, when I go to websites like dnsleaktest.com, they report my DNS Servers to be ones from Cloudflare, instead of my own public IP address. I tested this on my Android phone on LTE data, connected to the Wireguard VPN. As a test, while staying on data on my phone, disconnecting the VPN showed the AT&T DNS server as expected, connecting to the VPN immediately switches back to Cloudflare.

In Pi-Hole, all the queries are sent to and answered by the Unbound docker container, as confirmed by the Pi-Hole logs. I am not seeing any query in Pi-Hole going outside my network for resolution, so I am stumped as to what the cause of this is. The best guess that I could come up with is that somehow Unbound got configured in forwarding mode instead of a recursive resolver. I am not an expert on networking or Unbound, so I am looking for anyone who has an idea as to how to solve this. If it helps, I used https://github.com/MatthewVance/unbound-docker-rpi as the docker image to set up unbound.",pihole,1650961864.0
1512,comment,2,i68rtg5,,"Hard to say without seeing your config, but the short of it is that somewhere on your network you have Cloudflare set as the DNS resolver. Check all your clients, switches, vlans, router, etc., for hard-coded DNS.",pihole,1650963427.0
1513,comment,2,i68ta5p,,check for `DNS = 1.1.1.1` in your wireguard client config,pihole,1650964716.0
1514,comment,2,i69g18p,,Are you using the WireGuard client app? What does it show for DNS in the config settings on the client app?,pihole,1650978984.0
1515,comment,2,i6b9ac6,,"I was able to fix this issue. As I suspected, the unbound docker image I was using was setup in forwarder mode, meaning that the DNS server was forwarding the queries to Cloudflare. I commented out the include for the forward-mode file in unbound.conf and restarted the unbound container, and now the dnsleakstest (and other tools) only show my public IP as the DNS server.",pihole,1651004594.0
1516,comment,1,i68u0th,,Wireguard is probably forcing the use of Cloudflare DNS (WARP) somewhere either by config either by design,pihole,1650965367.0
1517,comment,1,i6995tv,,"Check your unbound config, 

I was once use onbound then just relize inside the unbound somehow it point to cloudflare DoH",pihole,1650975611.0
1518,comment,1,i68sc63,,"I did check actually and I don't see it anywhere. I don't have switches or VLAN setup, and my phone and router definitely don't have the Cloudflare DNS. I can provide any config here if that would help diagnose this.",pihole,1650963887.0
1519,comment,1,i6aejyp,,It is showing the unbound address in the client app for DNS.,pihole,1650992728.0
1520,comment,1,i691xn0,,"Nope, you can define in every client config which DNS should be used.",pihole,1650971383.0
1521,comment,3,i68ss5o,,It has to be set somewhere otherwise it wouldn't know how to request Cloudflare. Maybe triple check the whole setup again. Start from step one.,pihole,1650964274.0
1522,post,9,uc5w40,Pihole dns can't resolve it's own name.,"I have pihole setup to be used as the dns and dhcp server for my network.

In dhcp settings, the domain name is set to ""lan"". I'm able to ping other devices via `ping [hostname].lan`, however I can't access the pi running pihole like this. `ping pine.lan` (the pi's hostname is ""pine"") doesn't work, neither does `ping pine`.

I've added an entry in the local dns records to resolve `pine.local` to the pi's ip address which works. I initially tried to add the entry for `pine.lan` but that didn't work.

Is there a way I can get `pine.lan` to resolve to the pi's ip, or am I misunderstanding and this is expected behavior?",pihole,1650953375.0
1523,comment,2,i68gvgx,,Try pi.hole instead of your custom dns. On my setup it also refuses to work otherwise.,pihole,1650954183.0
1524,comment,2,i68x9on,,"In case you don't know .local is reserved by mDNS so I *strongly* recommend not using the local TLD for testing if dns works. Half the devices may ""work fine"" without ever calling Pihole",pihole,1650968036.0
1525,comment,1,i69jfpa,,"I have a Meraki mx65 as my router and pihole running on a Dell optiplex as the DNS server and I can resolve pi.hole without issues, even via SSH.",pihole,1650980500.0
1526,comment,1,i69qbxo,,"Not sure if this will help you, but my ISP-issued router has some kind of undocumented DHCPv6 capabilities that cannot be disabled and they interfere with resolving pi.hole and any other local hostname from the local network. If I instead tunnel my connection to the Pi directly via VPN, I am able to resolve pi.hole and other local hostnames.",pihole,1650983341.0
1527,comment,1,i68i0fk,,pi.hole doesn't work for me either :(,pihole,1650955070.0
1528,comment,1,i69ki7t,,"Ok, thanks.",pihole,1650980959.0
1529,comment,2,i68xlzd,,"Are you *sure* you're using Pihole for dhcp? Sounds like you're sending requests to a seperate dhcp that redirects to Pihole.  

Did you gave a static IP to Pihole?  
I think you assigned .lan to another DHCP, so you can use DEVICE.lan for this other DHCP... but if Pihole has a static IP, that accidental other DHCP doesn't know about it so pine.lan wouldn't exist as far that DHCP is concerned.  

Try to set a record ""pine.home.arpa""? You use .lan for DHCP and .local is reserved for mDNS, so it would make sure your test domain is not used by another protocol.",pihole,1650968298.0
1530,comment,1,i69kg29,,"You were right, I had my router set to redirect dhcp instead of just disabling it.",pihole,1650980934.0
1531,post,2,uc5gy1,Slow loading across multiple devices,"I've had a pihole running on the latest stable version for about a year. Sometime a while ago I found that selectively sites would load extremely slowly across multiple devices. Generally the page will resolve, then some subset of elements will take an extended time to load fully. I could believe the issue is one I have read about of an issue with waiting for something to time out, but I'm not clear what the solution would be. Switching off the pihole seems to resolve it. Hoping someone can help out.

&#x200B;

Verizon Fios

Pihole up to date with unbound on a Pi 3b+

&#x200B;",pihole,1650951656.0
1532,comment,2,i68pzr3,,"Maybe someone knows a less generic solution. If not I would try to investigate deeper and try to isolate the issue.

Watch the query log during a slow web site loads. Where is the time spent, are there patterns?

View Pihole’s log of the same test.

Most browsers offer a developer mode. I guess you would find a view where you can see what resources are coming in slowly.

Is the page reload fast?

Walk through the isolated steps a DNS query should take and watch for anomalies. Did you configure the intended path (client > Pihole > Internet)?

Is Pihole the only DNS the client uses or do you have a secondary? (Pihole doesn‘t work, but secondary DNS and/or DNSv6 brings the answer occasionally)?",pihole,1650961774.0
1533,comment,1,i6c2fw3,,"I've had something similar before and I changed the blocking mode to `BLOCKINGMODE=NXDOMAIN` as per [https://docs.pi-hole.net/ftldns/blockingmode/](https://docs.pi-hole.net/ftldns/blockingmode/) 

It seemed to worked for me, whether that was just coincidence or what, I've no idea. It simple to do, and simple to undo if it doesn't work for you.",pihole,1651017364.0
1534,comment,1,i6c597r,,"> only DNS the client uses or do you have a secondary? (Pihole doe

It's solely the Pihole, though I was planning on setting up a second one for redundancy down the line. 

&#x200B;

Page reload seems to vary, and I can't tell what the factor is. I've had a few that were lightning quick, and a few that clearly went through the full process again and took 10+seconds 20-40 is pretty common.",pihole,1651018643.0
1535,post,0,uc4xw4,PC takes 5 minutes to find a network everytime I wake it from sleep,"It's been a while since I set up pi.hole, so I don't really remember all the details of how i set it up, but... I set it up such that pi.hole is the DHCP server. I have a google mesh and my PC is the only device on my network that is hard-wired to a puck. (everything else is using the Wifi). Whenever I wake up my PC it doesn't think it's on any network for about 5 to 10 minutes before it can hit a website in the browser. Don't know if it's not getting an IP right away, or what exactly is happening. Any ideas on what's going on and the best way to resolve. Thanks so much in advance.",pihole,1650949528.0
1536,comment,4,i69zn28,,"Not a lot of details, but here are some things you can check:

1. As soon as you start the PC and log in (assuming it's windows) open a Cmd prompt and run ""ipconfig / all"" to see if it has a valid address
2. Also run task manager, to see if something is pegging your resources (like processor)
3. Check in Event Viewer (Start, then type 'Event Viewer') and the system log to see if there are errors after the startup

More advanced options are installing wireguard on the PC and capturing udp 67 / 68 to see what's happening to the DHCP packets.

:)",pihole,1650986994.0
1537,comment,1,i6dhqa9,,"Thanks for the suggestions. I do think I know what's happening now, but don't know what to do to fix it.

Right after waking the PC, ipconfig output (I'm just putting in the relevant bits, putting  in #'s to redact the full ip addresses)

  Autoconfiguraiton IPv4 Address . . : **169**.###.###.##(Preferred)  
  DNS Servers . . . . . . . . . . . . . . . .: 192.168.##.###  

So the reason I can't see any websites is I'm on a different network
than the DNS server (If I ping the DNS server ip, I just get timeouts). But after a few minutes if i run the ipconfig command again, I get:

  IPv4 Address . . . . . . : **192**.168.###.###  (on the same 192 network now)  
  DNS Servers . . . . . . .. 192.168.##.### (same as before)  

So after the IP address refreshes to be on the internal 192.xxx lan, it can talk fine to
the DNS server (the pi), and things start working.

  

Don't really know squat about networking on a Windows system, so not sure how to force it to renew the IP address, but at least I have a little more to go on.  Thanks for the info!

Edit:will try  

  ipconfig /release  
  ipconfig /renew  

next time, to see if that works.",pihole,1651045078.0
1538,comment,2,i6et93u,,"That 169 address is an ""auto-assigned"" address.  I.E. the PC is assigning itself an address because it's not getting a response from the DHCP server.

Based on your description, it sounds like a communication issue between the PC and pihole to get a DHCP assigned address.

Now, this communication is broadcast based (at the MAC address level) so no IP is required for it.  Either the PC isn't listening to the response, or the Pihole isn't responding in a timely fashion, or in a way that the PC is expecting.

Difficult to troubleshoot remotely.

My advice: Look in the Event viewer, system log, to see if the PC is complaining about networking in any way.

:)

Edit:  to further narrow it down, do you have any other devices on that network?  Phone maybe?  If so, are they having issues joining the network?",pihole,1651073121.0
1539,comment,2,i6gwoy5,,"> Edit: to further narrow it down, do you have any other devices on that network? Phone maybe? If so, are they having issue

Yep definitely lots of devices on the network, but as I mentioned all the other devices on the network (google mesh network), connect over Wifi, whereas the PC is the only device that is connected to one of the pucks via an ethernet cable. I suspect it has something to do with that. But, I'll check out the event viewer next time I boot up and see if it illuminates anything further.",pihole,1651103927.0
1540,post,0,uc3sjc,"trying to set up dns on my router, but i'm lost in here, wasn't it supposed to be under LAN menu and not WAN?",,pihole,1650945377.0
1541,comment,2,i683qej,,Its not supposed to be in WAN menu. Maybe in LAN or DHCP.,pihole,1650945703.0
1542,comment,2,i68bshv,,"Hm... I assume you want to point your tomato at your pi-hole? If yes, then you'll want to change the DNS1 and DNS2 settings in you screenshot. You already have the DNS Server to ""Manual"" in the screenshot, so that's good. You also go to Advanced Settings > DHCP/DNS :

1. Use internal DNS: Uncheck the box (This disables DNSMasq on the router, since you already have it on the pi).
2. Intercept DNS port (UDP 53): Uncheck the box(Checking it will cause the Pi to be unable to connect to the Internet)
3. Dnsmasq custom configuration: This can be left blank

Finally, if you want to get around devices that hard code, go to Administration > Scripts > Firewall: 

`iptables -t nat -A OUTPUT -p udp --dport 53 -j DNAT --to 192.168.2.X:53`

(Replace The X with the IP of your Pi).

Anyways, the LAN vs WAN thing was changed a while back, older versions of tomato had it under LAN as Static DNS, but the latest versions it's under WAN.",pihole,1650950577.0
1543,comment,1,i685hg6,,Usually you have two LAN settings found under the DHCP menu. Put the Pi-hole LAN address in the first LAN entry.,pihole,1650946685.0
1544,comment,1,i688tsz,,"And also, it might be in the basic settings > network. Did you scroll down?",pihole,1650948681.0
1545,comment,1,i689q7r,,"I have a few options for you, one is dig around in advanved settings and other tabs, see if there are any suitable settings. I think ""advanced"", ""administration"" would be likely. The other is create a lan without DHCP, and allow pihole to be the DHCP.",pihole,1650949243.0
1546,comment,1,i69sz4d,,I think DNS1/2 would be ip address of the pihole.,pihole,1650984400.0
1547,comment,1,i6aigyn,,What is under the DDNS selection?,pihole,1650994235.0
1548,comment,2,i683tr5,,I think its basic settings > DHCP/ARP/BW,pihole,1650945754.0
1549,comment,-1,i68fctu,,"Um.. he wants to change the upstream dns of the router to his pihole, so it should be under WAN.",pihole,1650953065.0
1550,comment,1,i6895ep,,"no, if i scroll down, there's only configuration for ssids",pihole,1650948879.0
1551,comment,1,i689v1x,,there is dnsmasq option under Advanced Settings > DHCP/DNS. should i use that instead?,pihole,1650949328.0
1552,comment,1,i69tqok,,"Also, don't use piHole as DHCP otherwise when you restart router it won't connect and run into deadlock.",pihole,1650984703.0
1553,comment,1,i686dkz,,"I've not used tomato before, but usually it's under dhcp in other routers. This is a good spot to check.",pihole,1650947198.0
1554,comment,1,i686mk9,,the option are [these](https://imgur.com/a/li8Q4Iv),pihole,1650947346.0
1555,comment,1,i68fvvb,,"No, that would break his network",pihole,1650953446.0
1556,comment,1,i689wm0,,Screenshot?,pihole,1650949356.0
1557,comment,1,i686z0z,,They are compressed so much that I cannot see the small text... Maybe post the image to your reddit profile?,pihole,1650947554.0
1558,comment,0,i68g0t5,, it would just show all dns requests in the pihole statistics like they are coming from his router.,pihole,1650953548.0
1559,comment,1,i68a4w2,,https://www.reddit.com/user/Ezzaskywalker\_11/comments/uc4xff/\_/?utm\_source=share&utm\_medium=web2x&context=3,pihole,1650949500.0
1560,comment,1,i688m4a,,[https://www.reddit.com/user/Ezzaskywalker\_11/comments/uc4nd4/\_/?utm\_source=share&utm\_medium=web2x&context=3](https://www.reddit.com/user/Ezzaskywalker_11/comments/uc4nd4/_/?utm_source=share&utm_medium=web2x&context=3) is it clear?,pihole,1650948549.0
1561,comment,3,i68g881,,"No. That would break his network. The router needs to resolve DNS to get info like public IP from your ISP, so it asks pihole, which needs the public IP first to allow upstream resolvers to respond to. Then you have created a catch-22",pihole,1650953699.0
1562,comment,0,i68aqio,,Yep. If it work then its fine.,pihole,1650949889.0
1563,comment,1,i688r9z,,Way better. What is under options?,pihole,1650948638.0
1564,comment,1,i68gs13,,"well it works for me. I've tried that. it's dumb but it doesn't cause problems. well but I have a static public ip, so you might be right.",pihole,1650954111.0
1565,comment,1,i69u3re,,It seems to me that it doesn't work that way.,pihole,1650984845.0
1566,comment,1,i6899sx,,> Ignore DHCP requests from unknown devices,pihole,1650948957.0
1567,comment,1,i68gu57,,You have static public IP?! What a luxury!,pihole,1650954155.0
1568,comment,1,i68i4kc,,"I have cable ipv6, but for my work VPN to work, I needed a public ipv4 address and not just dualstack lite. so my employer pays for a public ipv4 lol.",pihole,1650955162.0
1569,post,1,uc3rlo,Why does my pi-hole dashboard shows local devices' IP only in the Clients section?,"&#x200B;

https://preview.redd.it/rlih6q4dqsv81.png?width=2074&format=png&auto=webp&s=3ae9b8ec30a15f3a7a67444e65f479cad9a5a0f5",pihole,1650945285.0
1570,comment,1,i69f967,,The clients are the machines using Pi-hole as dns. Unless you have this opened to the web (which isn't a good idea) all you will see is the IP of devices utilizing the device as dns.,pihole,1650978618.0
1571,comment,1,i69pj6t,,If you're not using DHCP on the pihole turn on conditional forwarding and/or assign the IP addresses domains so reverse lookup works.  They'll resolve into names once done.,pihole,1650983022.0
1572,comment,1,i69vrvj,,how to use that?,pihole,1650985494.0
1573,post,0,uc3027,Will Raspberry pi (pi-hole on it) change its IP address every time I restart the device?,Will Raspberry pi (pi-hole on it) change its IP address every time I restart the device?,pihole,1650942730.0
1574,comment,2,i67yw2b,,It shouldn’t of you set an IP reservation/static IP. That’s what I did and so the router always points to that eth0 to connect.,pihole,1650943196.0
1575,comment,2,i687yj9,,"Assuming you have the Pi set to use DHCP, it will be up to whatever device is running DHCP for your network - usually your router - which IP is assigned to a device after a reboot.

As others mentioned, you can have the Pi set with a static IP (instead of DHCP). This effect can also be achieved with DHCP on, using an IP reservation set on the DHCP server, so that the device is always assigned the same IP based on the device's MAC address.",pihole,1650948150.0
1576,comment,1,i68008u,,Any device is likely to be given a new IP address unless you've set a static address.,pihole,1650943756.0
1577,comment,1,i6979iy,,"Normally the lease time is set to several days, so you will always get the same IP unless this time limit is exceeded.
So if your device isn't powered off for several days, you should be fine.",pihole,1650974585.0
1578,comment,1,i6c7tdy,,Reservation ip on router,pihole,1651019771.0
1579,post,0,uc1yj0,Is it possible to find the IP address of my Pi-hole when it's connected to router?,"My Rasberry-pi pihole is connected to my Modem(Router) via LAN cable. How do I find the IP address of my Pi-hole? I don't have Monitor/Keyboard to connect with Pi-hole.

&#x200B;

I needs Pi-hole address so I can put it as a DHCP server in my main modem

&#x200B;

&#x200B;

https://preview.redd.it/me3v8vix8sv81.png?width=400&format=png&auto=webp&s=e1703f8e34407e9de88cfbcd938f6c4b143a2a2b",pihole,1650939485.0
1580,comment,3,i68hcy0,,"If you have windows client, install angry IP scanner or other similar app. You will see all the IP under your router.",pihole,1650954563.0
1581,comment,2,i67rcxu,,"you can find it in your routers network info thingy that shows a list of connected devices. However I recommend not setting the pi as your DHCP server until you've actually set it up, which given you don't know its IP address and don't have a monitor or keyboard connected is something you haven't done, which means your DHCP will completely stop working once you set the not set up pi as your DHCP server. Set up pi-hole first, then switch DHCP.",pihole,1650939707.0
1582,comment,1,i67sq3o,,"You can look at your routers client list to view the IP address your Pi-Hole received.

You can try opening command prompt and type: **ping pi.hole** to see if its IP address gets resolved.

You can also run a [tool](https://www.advanced-ip-scanner.com/) that will show you all IP addresses that respond on your network. One of them will be your Pi-Hole.",pihole,1650940311.0
1583,comment,1,i68lb8e,,"One more point: if you have IPv6 running in your network you have to care about this differently. Clients asking DNS queries via IPv6 will not use Pihole if you do not care separately. It will still work, but ads get through occasionally when IPv6 transported queries bypass Pihole. Check this after you solved this here.",pihole,1650957693.0
1584,comment,1,i68zdoo,,"arp -a

https://raspberrytips.com/find-current-ip-raspberry-pi/",pihole,1650969631.0
1585,comment,1,i68kujk,,"A LAN scanner is very handy!! If you are a shell guy, there are commands you could use also. Not sure the exact Windows syntax.

E.g.: you can ping the broadcast address of you subnet. Usually the highest IP in this subnet, eg 192.168.0.255 - all devices should reply.
If your network has many clients you need to isolate to recognize.

Better is „arp -a“ - this displays what your PC has learned about its neighbors. After the above ping every client should show up.

But: If your Pi is on a dynamic address you must „pin“ this address in the router‘s DHCP server (otherwise your DNS breaks if IP changes in the future). And this can be achieved in the client list of the router‘s LAN section. So you have to go there anyway!",pihole,1650957319.0
1586,comment,1,i67s0yn,,pi-hole is already setup as I had purchased the device with pi-hole already on it,pihole,1650940002.0
1587,comment,2,i67vuut,,">You can try opening command prompt and type: ping pi.hole to see if its IP address gets resolved.

That's only going to work if by some sheer miracle the router or client is already aware of and using the Pi-hole installation.",pihole,1650941734.0
1588,comment,1,i67t6op,,">ping pi.hole

ping: cannot resolve pi.hole: Unknown host",pihole,1650940511.0
1589,comment,2,i67s4j1,,by default DHCP is off and also why would you do that,pihole,1650940045.0
1590,comment,1,i67tae1,,"...then try the other two options.

You can also connect a monitor, keyboard, mouse to it and configure the network interface manually, or contact the vendor or see if they provide instructions since this seems to be a pre-configured Pi-hole.",pihole,1650940556.0
1591,comment,1,i67sg06,,Sorry I mean DNS,pihole,1650940184.0
1592,comment,2,i67vndp,,"My first step in this arrangement would be to completely wipe the SD card, install a light/server oriented operating system on it yourself (I recommend Ubuntu Server 64 personally, but in general people seem to go with RaspiOS Lite as a known constant), and then run through the Pi-hole installation yourself.

At some point whatever preinstalled voodoo you've got going on there *will* fail, and you'll have to be able to do this yourself anyway.

It's not difficult, and there's plenty of documentation.",pihole,1650941633.0
1593,comment,1,i68l5rd,,"Do you mind explaining to me the benefits of running an Ubuntu server instead of the Lite, or even ghastly Voodoo? Thanks in advance",pihole,1650957570.0
1594,post,59,ubz1m9,AT&T Fiber (can’t change DNS) + PiHole DHCP Issues,"#EDIT 2 SOLVED: I've setup my new WiFi 6 router, set the DNS to the PiHole, and all is working as intended. I didn't want to shell out for the new router, but if anyone else with AT&T fiber stumbles upon this thread, I wanted to document what ended up working best for me. Thanks everyone for all the help.

EDIT: I've caved and purchased a wifi6 router. I'll set the AT&T router to pass through to the router I purchased and configure the DNS from there. This wasn't what I wanted, but looking at some of the features of new routers convinced me it was worth the money. Thanks for all of you who helped!

Hello! I’ve done some searching but I can’t seem to find help on the problem I’m stuck on. I have AT&T fiber and the router won’t let me change the DNS settings. My research suggests the best solutions are to either let PiHole manage my DHCP (plan A) or buy another router (plan B).

Following guides, I have tried the following steps:

1.	Assign my PiHole device a static IP on my AT&T router of 192.168.1.111
2.	Turn off my AT&T Router DHCP
3.	Turn on my PiHole DHCP
4.	Set the PiHole Gateway to 192.168.1.254 (my AT&T Router?)
5.	Set my PiHole DHCP range from 192.168.1.112-253
6.	Turn off ipv6 everywhere (AT&T router, my computer, PiHole)
7.	Reboot AT&T router and PiHole

Following these steps, the Wi-Fi will work on my devices but they don’t seem to be going through PiHole and my PC that is hardwired to the AT&T router stops connecting to the internet.

I’m not certain, but I think my wifi devices are still using my AT&T router for their DHCP leases, because they don’t seem to show up as devices with DHCP leases in PiHole or in the dashboard, and my PC seems to be unable to get a lease for an IP at all.

I’m sorry if this is something that has been asked a million times, if so, I’m just not finding the right thread. I’d like to avoid plan B where I buy another router if possible. Hoping there is a solution! Thanks for the help.",pihole,1650930585.0
1595,comment,7,i67jbog,,I can't change it in my Xfinity router either. I just set the DNS server in my devices.,pihole,1650936268.0
1596,comment,6,i67k7fc,,AT&T doesn't allow their users to change the DNS because they want you to use their servers. Most folks who care about this buy their own router and put the gateway into IP Passthrough mode. You're still subject to their NAT table limitation but it's not an issue for most people.,pihole,1650936646.0
1597,comment,21,i67bd84,,Can you set your router in bridge mode? If yes I would suggest to do so and then hook up a fully customizable router,pihole,1650932829.0
1598,comment,3,i67anr2,,">Assign my PiHole device a static IP on my AT&T router of 192.168.1.111

What do you mean by this? A static DHCP lease? (Which wouldn't make sense, bc you disable DHCP later on that router)You have to config a static IP on the PiHole device. On what kind of device / OS do you run PiHole?",pihole,1650932521.0
1599,comment,3,i67exfb,,https://forums.att.com/conversations/att-internet-equipment/manual-dns-server-setting-on-arris-bgw210/5defc450bad5f2f606fdc7db,pihole,1650934373.0
1600,comment,2,i67cwtz,,I could help you out in a bit. I have the same exact router and run pi-hole + a bunch of other servers. I'll message you in about an hour or so,pihole,1650933498.0
1601,comment,2,i682028,,Get another Wi-Fi router. Have everything connect to that. Use the pihole with the 2nd router. The AT&T Wi-Fi set top box wants to use its preferred DNS - this takes it out of the drivers seat & makes it just another hop on your way to the internet.,pihole,1650944785.0
1602,comment,5,i67ui1h,,"Have ATT fiber and have a pihole.

You need to set the modem to bridge mode (a bit tricky with att) and have a differnt wifi router as the lan connection for DHCP and DNS.  ATT requires their DNS for connectivity.  No way around it.",pihole,1650941103.0
1603,comment,1,i67ahck,,What model is your router?,pihole,1650932442.0
1604,comment,1,i68hg8v,,"I'm in the same situation. Switched to AT&T Fiber last week, gateway/router is model BGW320-500, no option to change DNS and google'ing concludes that for my model. Sad we can't change something as simple as a DNS server.

I was also going to try using PiHole as DHCP temporarily just to get DNS, but long term will probably replace with my own router/switch/AP and use the AT&T device strictly as the gateway.",pihole,1650954635.0
1605,comment,1,i68hgll,,"I also have AT&T fiber (my ISP is a local company, been around for ~30 years, but they run off of AT&T's infrastructure, and use AT&T's hardware). I've [disabled DHCP on their dogshit modem/router](https://i.imgur.com/kGv1o6x.png), and just [let the PiHole handle it all](https://i.imgur.com/sDDRPti.png). It's pretty simple and works well. Static assignments, DHCP, all done there with any device that logs on to any of my home networks. Another added benefit is that you manage almost everything through the /admin page of the PiHole. In the last 2 years, I've only logged in to the modem/router to reboot the damned thing. And I'm getting [decent speeds](https://i.imgur.com/E1wckUR.png), too, though this is far from the best I've seen.",pihole,1650954643.0
1606,comment,1,i692s8n,,"I use pihole as DHCP and it’s flawless. I had to do it because my Verizon router does let you change DNS, but always sends itself as primary DNS to my devices and as a result pihole logs show all traffic as a single device with routers IP.",pihole,1650971933.0
1607,comment,1,i693d4a,,I don't think my Xfinity modem does either. I have a linksys router under it that serves my wifi. I actually another one in bridge mode upstairs because my house was built in the 1960s and the signal doesn't reach well from the basement router. The linksys router points to a pihole for dns.,pihole,1650972294.0
1608,comment,1,i695urm,,I have the same setup. Lookup IP pass through. You need to set the modem/router up this way. It basically passes all configuration onto your equipment and simply supplies the connectivity.,pihole,1650973784.0
1609,comment,1,i699gc0,,"Did you did a DHCP lease renew, maybe you still have the AT&T router IP as your DNS server on your computer, so it's why the DNS queries does not goes into PiHole",pihole,1650975760.0
1610,comment,1,i69bhlo,,"Buy a router that can clone the Mac address of the AT&T  router and ditch the at&t router altogether.    I did this a couple of months ago.   My at&t router is sitting in the closet unplugged.   And my service has been flawless.  

Recommend putting a UPS on the ONT and router when doing this though or you'll need your RG if you lose power to re authenticate the service.",pihole,1650976810.0
1611,comment,1,i69turn,,"Have you tried statically assigning your pihole ip as your devices dns? Kind of a pain in the ass but at least it would let you get by this, or in theory it should.",pihole,1650984747.0
1612,comment,1,i69z2kr,,"Did you try to set a fixed IP (not using DHCP but manual) on your pc with DNS to your pihole and the correct gateway address? 
Try that to see if it works.",pihole,1650986773.0
1613,comment,1,i6alcl1,,"My buddy looked into it, he has AT&T fiber. He couldn't do what you need to on the Arris hardware.

The answer is to buy a separate router.",pihole,1650995347.0
1614,comment,-11,i67f4pv,,Took me less time to Google the answer than it did for you to figure out what router you have.,pihole,1650934458.0
1615,comment,-2,i67dyw5,,"Not sure what u r doing in step 4. In router setup, primary DNS should be same as static Pi ip. Give secondary as 8.8.8.8 for Google dns (or look around for opendns ips). This will keep ur network access alive during pi / pi hole reboots. Let me know if this helps.

Edit : mine was either automatically setup or i don’t remember setting up step 4.. its’ been a while..",pihole,1650933960.0
1616,comment,-1,i67f1g1,,https://forums.att.com/conversations/att-internet-equipment/turning-off-dhcp-on-att-bgw210700-modemrouter/5df01772bad5f2f606aea0df,pihole,1650934420.0
1617,comment,3,i67zqdw,,"Yeah I have the same ATT router and I just do this too. While having everything automatically go through the Pi-hole would be great, I also enjoy having full control over each device (my wife just really likes clicking ads actually and I can’t get her to stop lol)",pihole,1650943618.0
1618,comment,1,i69vpe2,,">  I just set the DNS server in my devices.

You must not have many devices. I have nearly 100 devices as registered clients on my network. Many of which would be very tricky to manually assign settings. Trying to manage everything manually would be a nightmare. THis is what DHCP was designed for.",pihole,1650985468.0
1619,comment,9,i67shr4,,This may not be necessary. Sometimes you need to disable the DHCP server on the router and use Pi-Hole for both DNS and DHCP. I helped someone set up an AT&T router with Pi-Hole and they had the same question.,pihole,1650940207.0
1620,comment,2,i69bmdz,,"AT&T routers don't have an actual bridge mode, but it is possible to set up the AT&T router to pass the WAN IP thru to a downstream router. At least, it has been possible to do that with a few AT&T routers/gateways I've encountered over the years. It would be great to see a bridge mode button in their firmware at some point where you can simply enable bridge mode and it simply passes the WAN IP down to the next device downstream of the router.",pihole,1650976875.0
1621,comment,-3,i67er9p,,"I can, yes. Hoping not to have to buy another router just to get pihole running.",pihole,1650934300.0
1622,comment,1,i67el7f,,"This is for sure my network ignorance showing, but I went into the AT&T router and allocated that specific IP for the pihole device.  Everything else connected is set to auto DHCP.",pihole,1650934225.0
1623,comment,1,i67epct,,Awesome. Thanks!,pihole,1650934277.0
1624,comment,2,i69yp2g,,"Bit surprised about this. I have AT&T fiber too. Used pihole and adguard and never had issues with them and never had to set up as bridge mode. Used to have BGW210 and now have a BGW320. Everything goes thru pihole (now adguard because Home Assistant switched to that but I prefer pihole) for DHCP and DNS. 

I turned off DHCP in modem and set it up in pihole. Renewed IP lease on clients and then it worked.

Is it different depending on region?",pihole,1650986629.0
1625,comment,1,i67amh8,,I believe it’s a BGW210-700,pihole,1650932506.0
1626,comment,1,i6f06um,,"I got a BGW320. I turned off DHCP and turned it on in Pihole. When DHCP lease renewed, it was using pihole for DNS. You dont need to change DNS in router, just run off DHCP and let Pihole manage this.",pihole,1651075781.0
1627,comment,1,i68tzvb,,Are you manually adding each device by max address in Pihole or are devices automatically getting an IP? This is the part that I am stuck on.,pihole,1650965343.0
1628,comment,1,i6bbboa,,"This does work, yes. But I have a *lot* of devices on my network, and manually configuring a bunch of them to use the pihole DNS is unappealing.",pihole,1651005413.0
1629,comment,6,i67jmhj,,Congrats,pihole,1650936403.0
1630,comment,1,i67kclh,,Are you saying to manually set each device on my network to point to the PiHole device’s static IP then google as a backup? Just wanting to make sure I understand what you mean.,pihole,1650936707.0
1631,comment,2,i69erp1,,Divorce is the only option here :P,pihole,1650978389.0
1632,comment,1,i6kt9os,,"Oh then, I would buy an AT&T compliant modem/router that you can configure yourself. Does AT&T allow this?",pihole,1651177109.0
1633,comment,1,i6ayfs4,,">AT&T routers don't have an actual bridge mode, but it is possible to set up the AT&T router to pass the WAN IP thru to a downstream router.

Can you explain the difference between ""true bridge mode"" and ""passthrough mode""? I've got ATT as well and while I've heard this many times I realize I don't actually know what it means. (Currently using passthrough myself)",pihole,1651000401.0
1634,comment,12,i67s3lz,,I have att fiber and that’s how I run my pihole. Their wifi router is crap.,pihole,1650940033.0
1635,comment,3,i67k8xn,,"Their equipment is garbage, do yourself a favor buy some enterprise grade shit. That’s what I did, now my zoom calls don’t drop. Shit just works, no more rebooting the router.",pihole,1650936664.0
1636,comment,1,i69b59v,,"This is what I would do if I were you and wanted to continue using the AT&T router.

1- Assign the pihole with a static IP, 192.168.1.10 (assuming nothing is using that address) subnet 255.255.255.0 and gateway 192.168.1.254

2- Confirm you can access the pihole web interface and login

3- Disable DHCP on the AT&T router
4- Enable DCP on the pihole and make sure the DNS server is is pushing out is 192.168.1.10 or whichever IP you used as static.
5- Reboot your clients or wait for their existing DHCP lease to expire

No need to set any DHCP reservations on the AT&T router since your pihole is static and DHCP is no longer running on the AT&T router.

Don't forget to set your upstream DNS severs within pihole (google DNS, quad DNS, custom, etc...",pihole,1650976637.0
1637,comment,5,i67go5c,,"But you have to allocate this IP on the PiHole device itself, not in the router.  
Because you wrote in step 2, you deactivate the DHCP in the router, so the IP you assigned gets lost in that step. Your PiHole device knew his IP from the DHCP of the router. It's static, yes, but only for the time the DHCP is turned on. This is called a static DHCP lease. When DHCP it#s deactivated your PiHole device has nobody to ask anymore what it's IP is.  
So you have to define the IP on the PiHole device itself. If you run it on a debian based distribution, you can define the static IP in `/etc/network/interfaces`",pihole,1650935129.0
1638,comment,2,i69z83s,,"I work in IT and tried a few different things to make it work.  That being said maybe i over complicated it.  The ATT Modem interface was hot garbage so maybe i missed something.

Might be because i didn't use DHCP on the pihole.",pihole,1650986834.0
1639,comment,1,i69pqyq,,"I have a few that I've manually assigned static IPs, sure. My and my partner's desktops, for instance. My desk phone. All my RPis in their various uses. Her laptop. Etc. 

But most everything is getting their IP assigned to them via DHCP. You know, like a normal DHCP setup. Why would I have a DHCP server configured if I'm going to manually add everything? 

The more I think on it, I don't understand what you're asking. And what do you mean ""by max address""?",pihole,1650983109.0
1640,comment,1,i6f0bzo,,"Ok so if that works and you are using pihole DNS, there is something wrong with the DHCP portion. Did you turn it off in router? Do you have any other DHCP servers on same network?",pihole,1651075835.0
1641,comment,0,i67wunn,,"No, just on the router. Config the primary (pi / pi hole) n secondary DNS (google). Based on the URL someone posted, seems like that was not an option on ur router.",pihole,1650942208.0
1642,comment,1,i6lqynn,,I believe by law they all now have to allow you to buy your own equipment. I bought my own modem for my Spectrum cable service a couple of years back.,pihole,1651191852.0
1643,comment,2,i6azlzb,,"It is the same thing, the difference being that with bridge mode you click a button and press ok/apply and possibly a reboot vs passthrough, you are accomplishing the same thing as bridge mode, but you have to manually change settings to get the WAN IP to the downstream device.

Basically, if you want to use your own router and you don't want to double NAT your connection, you need to go through the passthrough instructions, which you've done, on the AT&T device.",pihole,1651000844.0
1644,comment,5,i694y5o,,"Same here, I have disabled the wireless on the ATT router, my own wifi router is set to bridge mode and my raspberry running pihole as  myDNS and DHCP",pihole,1650973264.0
1645,comment,3,i67smok,,"It feels like I’m in the minority here, but this is the only issue I have with their router. It’s otherwise fast and reliable.",pihole,1650940268.0
1646,comment,2,i67z1rk,,"Do you have a link to the “enterprise shit?”
I am interested in upgrading my network.",pihole,1650943272.0
1647,comment,1,i67kp1f,,"I may ultimately do this, but I have absolutely zero problems with the AT&T router outside of this one. It’s super reliable, super fast. I’m not against spending some money on a better router, it just feels like a waste if I’m dropping hundreds of dollars only to get PiHole to work properly.",pihole,1650936850.0
1648,comment,3,i67jld7,,That makes sense! Thanks for the help.,pihole,1650936389.0
1649,comment,2,i6a2m16,,I tried to complain and ask for improvements on the modems (json api to collect metrics to be used in Prometheus for example) but its like talking to a wall.,pihole,1650988139.0
1650,comment,2,i6bbg5r,,"Sorry, max is a typo from my phone. You answered my question, though. Thanks!",pihole,1651005464.0
1651,comment,1,i67zp92,,"Router:
https://store.ui.com/collections/unifi-network-unifi-os-consoles/products/udm-pro

APs:
https://store.ui.com/products/unifi-ac-pro

For a switch I have a small business Cisco switch. I also have a big 48 port Cisco switch with iOS.",pihole,1650943602.0
1652,comment,-1,i67kzsw,,I tried two different new routers and had the same thing. Also they would factory reset every six months. It was a pain. Yeah it’s a chunk of change. I have at least $700 invested in my network.,pihole,1650936970.0
1653,comment,2,i6bfa4e,,"Happy to help!

Edit: MAC address. Makes more sense!",pihole,1651007026.0
1654,post,2,ubxhod,"Web Interface Update: Git error ""The unauthenticated git protocol on port 9418 is no longer supported""","Hey everyone, I am trying to update my Pi-hole instance to the latest version, however I get a git error when updating the web interface:
                    
    [i] Checking for updates...
    [i] Pi-hole Core:     up to date
    
    fatal: remote error: 
    The unauthenticated git protocol on port 9418 is no longer supported.
    Please see https://github.blog/2021-09-01-improving-git-protocol-security-github/ for more information.
    
    [i] Web Interface:    up to date
    [i] FTL:              up to date
    [✓] Everything is up to date!

    Pi-hole version is v5.10 (Latest: v5.10)
    AdminLTE version is v5.11 (Latest: v5.12)
    FTL version is v5.15 (Latest: v5.15)

Also, I have checked the git remotes:

    pi@raspberrypi:/var/www/html/admin $ git remote -v
    origin  https://github.com/pi-hole/AdminLTE.git (fetch)
    origin  https://github.com/pi-hole/AdminLTE.git (push)

Please let me know if there is a fix for this issue, thanks!",pihole,1650926105.0
1655,comment,2,i677rko,,"Try this in terminal:

`git config --global url.""https://github.com/"".insteadOf git://github.com/`

As per:

[https://stackoverflow.com/questions/70663523/the-unauthenticated-git-protocol-on-port-9418-is-no-longer-supported](https://stackoverflow.com/questions/70663523/the-unauthenticated-git-protocol-on-port-9418-is-no-longer-supported)

After that, I'd be thinking about doing a fresh install. I should mention I wasn't having any problems with Buster earlier this week before doing a fresh install of Bullseye.",pihole,1650931237.0
1656,comment,2,i679nk0,,"**SOLUTION:**

Edit `/var/www/html/admin/.git/config` file:

    [remote ""origin""]
            url = git://github.com/pi-hole/AdminLTE.git
            fetch = +refs/heads/*:refs/remotes/origin/*

On the `url =` line, I changed `git://` to `https://` and it worked!",pihole,1650932082.0
1657,comment,1,i672961,,"What are you running Pi-hole on? What hardware? What operating system? What version? Are you using a terminal emulator to access it? When was the last time you updated the OS?

I can't replicate this on the most recent Raspberry Pi 64bit OS via ssh in Microsoft Terminal.

The error is telling you that the process is trying to use a now disallowed protocol. Read the blog post for more info. That means something in the equation isn't up to date.",pihole,1650928786.0
1658,comment,2,i678ct1,,"Thanks for the reference! However, I already tried that command and it's still not working :(

EDIT: I found a solution (posted as a new comment), thanks for the help!",pihole,1650931504.0
1659,comment,1,i67b3vv,,Thanks for posting the solution. That was the very thing that other script was supposed to fix. Glad you figured it out.,pihole,1650932716.0
1660,comment,1,i6756tk,,"I'm running it on a Raspberry Pi Zero W and using SSH to access it.

OS: Raspbian GNU/Linux 10 (buster)

I read the blog post but can't seem to figure out where the issue is coming from on my Raspberry Pi. I checked the git remotes and all of them start with https://github.com instead of git://

I didn't have this issue before when running `pihole -up`, this issue started today for me.",pihole,1650930077.0
1661,comment,1,i67a3lw,,"Found a solution, thanks for your help!",pihole,1650932278.0
1662,comment,1,i67a8gc,,"If you don't mind, what was the fix?",pihole,1650932337.0
1663,comment,1,i67ahxx,,Posted as a new comment: https://www.reddit.com/r/pihole/comments/ubxhod/web_interface_update_git_error_the/i679nk0/,pihole,1650932449.0
1664,post,4,ubvamv,Pi-hole firewall (useful for Docker containers)?,"Since devices and apps can bypass Pi-hole easily (via hard-coded DNS like 8.8.8.8), does someone know how to generate firewall rules (e.g. `iptables` or `nftables`) that match Pi-hole's ad lists? It would eliminate the bypassing issue.\
It would mostly be useful when used in a Docker container, because other containers can route their traffic through that firewall container. Despite that, I am sure many people would benefit from something like this. I know I would.

I can't manage to find any info on it. Am I the first one to think of this?",pihole,1650920209.0
1665,comment,1,i67fjoi,,So you have access to change DNS but not firewall rules. You maintain rules on every box not one. You put it in a container and have all other containers use that one because it’s harder to bypass? Not adding up. You could simply set one firewall rule to mandate pihole in these cases. 53 to X is allowed. 53 to not X is not.,pihole,1650934640.0
1666,comment,2,i67m2sn,,"> You could simply set one firewall rule to mandate pihole in these cases. 53 to X is allowed. 53 to not X is not.

True, but this cannot prevent DNS-over-HTTPS, and hence connections to IPs on the blacklist.

Also, some consumer routers cannot even prevent outgoing (e.g. to 8.8.8.8) DNS requests. The router from my ISP cannot, for example.

> You put it in a container and have all other containers use that one because it’s harder to bypass?

Yes, that's the point of the firewall. Containers, apps, smart TVs, etc, can bypass Pihole with e.g. DNS-over-HTTPS. I would like to see them try to bypass a firewall.\
(They could with VPNs, but I doubt any consumer software would go through the burden of a VPN connection to counter the few people using Pi-hole with a firewall.)

I'm looking for something similar to pfBlockerNG from pfSense which does exactly this but requires the pfSense operating system.",pihole,1650937431.0
1667,post,1,ubu6bw,PiHole and WireGuard - address unreachable,"Hi,

i found many topics on internet with this issue, but i still dont undrestand where is problem.  I set PiHole and WireGuard on my Ubuntu server in dockers. PiHole has own address. I set WireGuard with own subnet and I set FW rules. I tried access to some sources in my main LAN. I can reach my router, etc. BUT I cant reach PiHole. Pihole is listening on all interfaces but it didn help ( pihole -a -i local ). Where can be a problem?",pihole,1650917305.0
1668,comment,2,i66sdvw,,"What is the output of `sudo netstat -plnt | grep :80`

If you don't have netstat installed, use `sudo ss -tlnp | grep -E "":80\b""`",pihole,1650924503.0
1669,comment,1,i6dw450,,"I think it's a problem of your docker config, but I'm not familiar with docker.",pihole,1651057247.0
1670,comment,1,i6dga31,,">sudo ss -tlnp | grep -E "":80\\b""

Hi.

I have this output from pihole container:

root@9654ae8f756d:/# sudo ss -tlnp | grep -E "":80\\b""  
LISTEN 0      1024         0.0.0.0:80         0.0.0.0:\*            
LISTEN 0      1024            \[::\]:80            \[::\]:\*",pihole,1651043866.0
1671,post,6,ubqtxf,How to see names instead of IP's,"Hi all. 

I want to see friendly name instead of IP address on my dashboard. I found this article ([https://discourse.pi-hole.net/t/how-do-i-show-hostnames-instead-of-ip-addresses-in-the-dashboard/3530?page=2](https://discourse.pi-hole.net/t/how-do-i-show-hostnames-instead-of-ip-addresses-in-the-dashboard/3530?page=2)) and even though it works, I feel like its not a solution as all devices on my network are not static and I dont want to use the Pi-Hole as my DHCP server. 

Is there no place where I can basically do the same but instead of adding IP, I add Mac address as that is a constant.

Thank you",pihole,1650908529.0
1672,comment,3,i65r45n,,"MAC to name isn't possible as far as I know. But routers DHCP will usually renew and give out the same IP for the same MAC. In other words the IPs of your devices will be stable over time. And then  [https://discourse.pi-hole.net/t/format-of-custom-list/32355](https://discourse.pi-hole.net/t/format-of-custom-list/32355)  (i.e. list of IP, name pairs in /etc/pihole/custom.list) should work.",pihole,1650909713.0
1673,comment,2,i65pcrl,,"Is your router your DHCP server? And it has the names you want to see? If so, then conditional forwarding should do what you want.",pihole,1650909049.0
1674,comment,1,i66b7ir,,"Hope that you find a solution !    


Just wanted to say that conditional forwarding does not work in my case.  I have a Nighthawk router acting as DHCP and my pihole (on beaglebone black) is upstream of my router (with unbound).  Both Ipv4 and Ipv6 are enabled in my router.  I can see the logs of Ipv4 and Ipv6 queries, but have never seen resolved hostnames with conditional forwarding ON.  Enabling conditional forwarding also causes spikes of queries (likely DNS looping) and leads to rate limiting.  Can someone enlighten me on this?",pihole,1650917572.0
1675,comment,1,i66i5kn,,"I use the local (static) DNS capabilities on the pi-hole. I have to manually enter the records, but since I use DHCP reservations on my firewall it's once when the new device shows up and once when it goes to the grave. I don't use the pi-hole DNS as I do DHCPv6 reservations as well.",pihole,1650920317.0
1676,comment,3,i65yjcv,,Thank you. I thought someone had a way to do it with MAC instead of IP,pihole,1650912624.0
1677,comment,0,i666w2z,,"MAC to IP is possible, it's called an ARP lookup. Your devices do them all the time. PiHole is a DNS server, so it uses IP address and hostnames.",pihole,1650915897.0
1678,comment,2,i65ppko,,The router is the DHCP server yes. But no also not. The hostnames are all janky. I would like to add my own names.,pihole,1650909184.0
1679,comment,2,i66a7ak,,"Right, but he wants names instead of IPs. His ARP tables will give MAC to IPs but won't get names.",pihole,1650917174.0
1680,comment,2,i66103e,,"You change the hostname on the device, or by adding a static DHCP lease on the router for each device. That has nothing to do with pihole.",pihole,1650913586.0
1681,comment,1,i661ypb,,I dont want to add every device on my network to static ip on my router. I feel like using the MAC address should be possible and a better solution than linking it with the IP as the MAC is always the same and you dont have to maintain the list. Its a onetime thing and you are done.,pihole,1650913968.0
1682,comment,1,i663car,,"So if I am understanding what you want correctly, you want hostnames to show up in the pihole logs, not IP address. That's a simple enough fix, just use conditional forwarding, which you have done. So that's good. But I am not sure what you are wanting tied to the MAC address? Is it the IP, because thats on the DHCP server. Is it the hostname, because that is also on the DHCP server.

PiHole is a DNS server, which operates on Layer 3 of the OSI model. It only cares about IP address. It takes a request for a hostname like [Reddit.com](https://Reddit.com), or a local device, and turns it into an IP address. DNS has no idea what to do with a MAC address.

A DHCP server assigns devices IP address and ties those devices to a MAC address.

A hostname is how a device identifies itself on the network in a human friendly way.

If you want to change the hostname of a device, you do that on the device itself, or some devices allow it in the DHCP server. Those are the options.

EDIT: To be clear, the device pihole is running on does ARP lookups all the time, and has a full ARP table tieng hostnames to IPs. It is just that as a DNS server, pihole itself doesn't care what the MAC is. So if you were to tie the ARP table into the pihole query logs somehow, that might work.",pihole,1650914507.0
1683,comment,1,i6659se,,"I have not set up ""conditional forwarding"". Pi-Hole shows IP and not hostnames. I want to see hostnames so I know what I am looking at. In the /etc/hosts file you can add the IP and the hostname ([192.168.0.35](https://192.168.0.35)Apple-TV). But since not all my devices are static on my router the IP changes sometimes and I dont want to have to activity update that lists as devices gets new IP's. As the MAC address of a device is a constant I would like the link the Hostname in the /etc/hosts file with the MAC address so I dont have to update the list.   


I have smart lights etc that i cant change the hostname on. That is why I want to set my own friendly names for all devices.

Does that make sense ?",pihole,1650915265.0
1684,comment,2,i666mp5,,"It makes sense that is what you want. I am not sure why you won't just use conditional forwarding, or the pihole as DHCP, but here we go.

In order to do a MAC address lookup, which is possible, you would use the ARP table. That's address resolution protocol. It links MAC address to IP address. You can perform these manually if you want. 

No matter what you do, pihole is always going to be linking the hostnames to the IP address, because that's what it does.",pihole,1650915797.0
1685,comment,1,i66cpx7,,Do you use pihole as DHCP server?,pihole,1650918162.0
1686,comment,2,i66d6kl,,"No. I use my pfsense firewall as a DHCP server. Pihole only supports one network, pfsense can run DHCP on multiple VLANs. Anything I care about gets a static lease in the DHCP server. I use conditional forwarding to lookup hostnames for devices on my guest network. Anything else I can just refer to the DHCP leases to see what it is, if I do not already know. 

Prior to getting pfsense, I was using pihole as my DHCP server.",pihole,1650918344.0
1687,comment,1,i66e0xw,,Do you not have complications with Port Forwarding on the router then?,pihole,1650918677.0
1688,comment,1,i66mrva,,"Sorry for a side thread, but are you running seperate instances of PiHole for each VLAN?",pihole,1650922183.0
1689,comment,1,i66ehcn,,"Port Forwarding on the router is a firewall configuration. Firewalls are Layer 3, so they make decision on IP address. DHCP simply provides devices with IP configurations needed to access the network. Your router has a DHCP server in it, but that has no effect on Port Forwarding or anything like that.",pihole,1650918858.0
1690,comment,1,i66mya3,,No. Just a pass rule allowing them all to talk to a single instance.,pihole,1650922257.0
1691,comment,1,i66hkh1,,Awesome thank you for all the help!! I really do appreciate it!,pihole,1650920084.0
1692,comment,1,i66o2dk,,Ok thanks for advising,pihole,1650922715.0
1693,comment,2,i66i2fj,,You are welcome,pihole,1650920282.0
1694,post,3,ubqj2l,How can I set up PIA using OpenVPN with Pihole for DNS?,"So, I configured the Pihole and it works like a charm on the local network. As the next step, I would like to run the Pihole and PIA VPN on the same RPi. I am not at all interested in using Pihole as my DNS on remote devices. I just want to get PIA VPN to work on the Raspberry Pi Internet connection *only*, while preserving the Pihole as DNS across all the devices on the local network.

I've trawled through so many articles, and I've decided to configure PIA through OpenVPN, but the default configuration still isn't working. I wish I could say searching the subreddit/going through Pihole documentation/tutorials helped, but I only keep coming across instructions for setting up VPN for remote Pihole DNS (which I'm not looking for) or general instructions for PIA via OpenVPN (which also doesn't work).

If someone could point me in the right direction instead of mentioning the search function, I'd appreciate it. Surely this can't be some exotic setup idea I'm angling for?",pihole,1650907743.0
1695,comment,1,i65x1nb,,"You can define a custom DNS in the openvpn config file
https://customer.cradlepoint.com/s/article/How-To-Set-Custom-DNS-Servers-Over-a-Routed-OpenVPN-Tunnel",pihole,1650912038.0
1696,post,38,ubjsoc,How to set up pi-hole raspberry pi in this condition so ads become unavailable to all devices connected to Deco routers.,"Deco routers are Deco M5 Mesh Wi-fi routers

And ISP's router is a Nokia Router which is given by my ISP and provides an Optical fiber connection. THis router has 4 LAN ports.

How wiring should be connected and which device Pi-Hole's DNS should be added?

&#x200B;

https://preview.redd.it/2zyc463o2ov81.png?width=1778&format=png&auto=webp&s=7e6fabe838b5257d67bfece9a91e73d0d4da0862",pihole,1650889029.0
1697,comment,11,i64f9t6,,"Regardless of whether you put the Decos in routing mode or access point mode - put the PiHole on the same level as them and have your DHCP server set the Pi-hole IP as the DNS.

So something like:

ISP Router
|
Deco Level with the Pi-hole connected to the second port of one of them.

Or…

ISP Router
|
Deco Level with a switch connected to one of them
|
PiHole connected to switch along with any wired devices. 


Ideally, connect the PiHole or switch to the Main Deco. That is, the one that is wired to your ISP Router. If they are all connected via Ethernet backbone then it matters less. If you’re using wireless backbone, you really want to avoid sending all DNS traffic across the wifi backbone. 

Hope that helps.",pihole,1650890099.0
1698,comment,5,i674a9y,,"Open Deco App.


Router Settings --> Advanced --> DHCP Server
Primary DNS give ip of pi-hole locally in my case I have 192.168.0.102
Give secondary dns whichever you like.

This assumes pi-hole is having a static ip.",pihole,1650929676.0
1699,comment,3,i64hpjo,,"So I have this set-up.  One Deco is the ""main"" and the rest are clients.  I run mine wireless because I don't have the opportunity to run Cat cable all over my house (I have 6 nodes).

Anyway, I don't use my ISP's router, but I do have a network switch in my office.  I go straight to my main Deco first out of the modem (you can set which one is main in the app).  Then to my network switch (there is an pass-through Ethernet on each Deco). I then set that Deco's DNS server to my two Pi-holes... easy pesy.  The two Pi-Holes are also on the network switch.

Regardless, I wire from ISP, through the main Deco, to a network switch (for hard wire devices), and my Pi-holes... and I suppose you could wire to other Deco units from there.  So all network traffic passes through the main Deco and to my ISP modem/router.",pihole,1650891340.0
1700,comment,2,i64frc3,,"What are Deco routers? Are we talking about routing or are these access points? 

Usually these devices are not routers, so all clients should come up in the same L2 network and all clients receive their settings from the same DHCP usually in the ISP router. Alternatively DHCP of the Pi.

If these are routers you could either configure DHCP relays on these. Or if this is not possible maintain DHCP servers on each of them pointing to the IP of the PI.",pihole,1650890352.0
1701,comment,2,i64wq4d,,"I have 4 Deco M5 mesh points.  I have it in AP mode because I use pFsense for my router.  All the M5 mesh points are connected via ethernet backhaul.  My Pihole is a virtual running on one of my servers.  Everything gets an IP from the pFsense DHCP.  I have the IP address for the Pihole set in the settings for the DHCP server so that any machine that gets an IP (including the M5 mesh points), uses the Pihole for DNS.  I've also had an actual Raspberry Pi running Pihole with the same M5 setup.  I have the Pihole pointed to my two caching DNS servers, but Google DNS, OpenDNS or your ISP DNS servers would work as well.",pihole,1650897971.0
1702,comment,2,i65qna3,,"This is how I'd do it. 

Incase it's not obvious x.y.z can be anything. 192.168.1, 10.10.10, or whatever your network is. 

ISP Router as the Gateway of x.y.z.1 and disable the wifi on the router. The Router will only act as a Router, the Decos will only work as wifi access points. 

When setting up your network have the range of IPs as x.y.z.10-99 and the DNS as x.y.z.250. 

Have the Decos as access points with the static IPs of  x.y.z.251,252,253

Have the pihole with a static IP of x.y.z.250

Wire the first Deco and the piHole to the ISP Router directly. 

Pic for help https://imgur.com/a/OSvpDOi",pihole,1650909535.0
1703,comment,1,i64kwm9,,"Set your equipment up so the ISP's Nokia router is the only one that assigns IP addresses via DHCP, disable the DHCP on the TP-Link Deco mesh devices.

On the Nokia router set a static IP address for the device that is hosting the Pi-Hole instance.

Next, on the Nokia router set the DHCP setting to use the IP address of the Pi-Hole instance as the primary DNS server. You can point the secondary DNS server to a publicly available server, this way you failover to that server if your Pi-Hole instance goes offline for some reason. You'll have continued use of your connection just won't get any ad blocking etc.

I run two instances of Pi-Hole on my network, a primary one on a dedicated Pi Zero W 2, and a second one in a Docker container on another PI. This way if my primary one goes down for some reason the secondary one handles all the traffic rather than a public DNS server. I'm also running these as recursive DNS servers using Pi-Hole's Unbound.

The final thing I do when I am home is turn off the mobile data connection on my mobile phone, so that all traffic is routed through the Wi-Fi to stop ads from being served, if I leave the mobile data on I get ads. This is a PITA, since you have to remember to turn your mobile data on when you leave the house, but I would prefer not to see ads on my devices when I'm home.

I haven't yet gotten around to setting up a VPN here so that my mobile device can VPN back to my Pi-Hole when I'm out of the house. This would block ads then, but it also means all of your mobile data traffic from your device will be back hauled through the VPN and out via your ISP's network and not the your mobile carrier's network. Which means if you ISP provides a slower connection than your mobile provider will be limited to what speed your ISP can provide.

Not related to your question, but wanted to give you an idea of what my setup is. I have a Netgear cable modem, which connects to a TP-Link VPN router, connected to a 24-port TP-Link switch, and three TP-Link access points connect via ethernet cables and installed on each floor of my house (basement, first floor, and second floor). DHCP and DNS is handled by the TP-Link VPN router only.",pihole,1650892887.0
1704,comment,1,i65l45r,,I have a Deco router/AP (3 Pack) around the house and they don't play nice with Pi-hole unless you set the Pi to do the DNS.  I don't trust the Pi to handle DNS from a reliability/up time perspective so gave up on this unless things change from Deco in the future.,pihole,1650907433.0
1705,comment,0,i65cg3k,,ISP Router -> DNS Settings to: RaspPi Device IP,pihole,1650904147.0
1706,comment,3,i64frpy,,I have LAN cable for each deco to my ISP router. Decos will be connected to ISP router via LAN cable and all Decos are on each floor of the house,pihole,1650890358.0
1707,comment,1,i64fj91,,Do you mean I need to purchase a switch?,pihole,1650890235.0
1708,comment,1,i682hfu,,My ISP router has 4 LAN ports already. Can I connect 3 Decos and pi-device to that directly?,pihole,1650945033.0
1709,comment,2,i675crc,,"Holy. Hell. They finally did it. I have been using Deco for years and they never had the DHCP setting so I just gave up and used the Hole purely for DNS. This comment made me go look and I am dam near shocked! I am gonna have a busy weekend.

Thank you so much!",pihole,1650930152.0
1710,comment,1,i67d9oi,,Ok but how devices should be connected? Other two Deco device can't be connected to main deco because Main deco has two Ethernet port only,pihole,1650933653.0
1711,comment,2,i64ii51,,Can you please make a diagram and share it?,pihole,1650891733.0
1712,comment,3,i64hqdu,,"They’re a mesh access point, but they can be set to route as well.",pihole,1650891351.0
1713,comment,1,i64fys9,,These https://www.tp-link.com/us/deco-mesh-wifi/product-family/deco-m5/,pihole,1650890458.0
1714,comment,1,i64hx8q,,They are a home mesh system made by TP-Link.  You set one as the main and the rest of the nodes are clients.,pihole,1650891447.0
1715,comment,1,i67g1ju,,Wifi or ISP router is already disabled.,pihole,1650934854.0
1716,comment,1,i67jd0z,,Should Deco be in Router or access point mode?,pihole,1650936285.0
1717,comment,1,i681gm2,,">Wire the first Deco and the piHole to the ISP Router directly

What about other 2 Decos?",pihole,1650944505.0
1718,comment,1,i682adl,,should i change my deco setting from router mode to access point mode?,pihole,1650944932.0
1719,comment,1,i67qc5u,,"Strange, my Deco M5s play nice with my two PiHoles.  I have 6 of them with wireless backhaul.  Most all my devices are static, but I let Deco hand out all other IP dynamic addresses because, I just like and am used to my Deco system.  You can also set all the Deco IP clients as reserve addresses (even wireless ones since it looks for MAC addresses) so they fall into place on a reboot.  Been running for a couple of years with no problems at all.",pihole,1650939265.0
1720,comment,1,i64hxlh,,"No, you don’t *have* to buy a switch - I only mentioned one in case you were using one for wired devices. Are you landing in using Access Point mode or router mode? I’d recommend Access Point mode, at which point, connect the Pi-hole to the second port of any of your Decos. The Decos, your PiHole, and your Wi-Fi clients will all be in the same L2 network and subnet.",pihole,1650891452.0
1721,comment,2,i67h6ij,,"One deco would be main deco and others would be secondary. That is how Mesh works. IP would be given out by the main router.

Looks like your modem is the router as I doubt your ISP is giving you 4 ip addresses to use. Iand you are connecting your pi-hole to the same. So it should be something like 
main deco x.x.x.1
second deco  x.x.x.2
third deco x.x.x.3
pi x.x.x.4

I am not sure how will you make pi static ip (may be  in modem console)

If deco are not giving the ip and are just in access mode then you can potentially configure the dns in the dhcp settings of the nokia modem.

update your OP with how are the decos configured, what is your dhcp server to understand the exact network topology.",pihole,1650935350.0
1722,comment,1,i67e9ka,,"[https://i.imgur.com/6XLCsXz.jpg](https://i.imgur.com/6XLCsXz.jpg)

Try this link",pihole,1650934087.0
1723,comment,2,i64iktv,,"If there is no specific reason I would always use bridge mode: keep things simple, routing might be slower (not sure how the traffic flows in case of routing: routing at each device or some tunneling and central break out?).

If all is flat then everything should work straightforward.",pihole,1650891771.0
1724,comment,1,i64lg74,,"Ah, some master/slave setup for a swarm of devices with „virtual“ controller. Still, would not tend to put this system into routing mode. I guess the traffic is always tunneled to the master, where it is routed out. The better systems implement local / distributed routing.",pihole,1650893140.0
1725,comment,1,i69ugt5,,"Access point mode.

&#x200B;

""What about other 2 Decos?""

They should automatically mesh with other decos, no? Im not familiar with them sorry.",pihole,1650984988.0
1726,comment,1,i6d4ek0,,"I like having one device to check to see all the devices on my network.  You can leave it in router mode,  just turn off the DHCP on the Deco and let the other router hand out IP addresses.",pihole,1651035313.0
1727,comment,1,i67uflp,,"On my end, Deco doesn’t like an internal DNS address and will only use external DNS address. Confirmed with the company online and it was mentioned as a request by multiple people. I hope they change it.",pihole,1650941073.0
1728,comment,2,i64ie2x,,I use Deco's Wireless Router mode as that is recommended by Deco and that allows to to use all feature deco provides,pihole,1650891677.0
1729,comment,1,i682rh9,,">connect the Pi-hole to the second port of any of your Decos.

Would it be better if I connect Pi-hole to my ISP router directly instead Deco. My ISP router has 4 ethernet ports. If I want I can connect 3 Decos and pi-device to it.",pihole,1650945177.0
1730,comment,1,i67lbfi,,Deco has two modes Router and AccessPoint. I can use any mode which solves the problem,pihole,1650937107.0
1731,comment,1,i67ep51,,Thanks but where are other Decos in this setup?,pihole,1650934273.0
1732,comment,1,i6643mt,,I don’t have that opportunity to run wires.  I’ve got 6000 sq ft and two stories to cover and a wireless distributed node system is my answer.  It will do wired nodes though.,pihole,1650914804.0
1733,comment,3,i66i964,,"Router mode is recommended by TP-Link because that’s the only mode they can upsell the extra features in. Depending on the features of your ISP router, putting the Decos in router mode may result in double NAT’ing which, while not the end of the world, is generally not recommended.

Personally, I prefer to use the Access Points as Access Points, and a good quality firewall / router as a firewall router.",pihole,1650920357.0
1734,comment,1,i67yovl,,"Use the router mode. then what I stated above should work with primary and secodanry deco.

Pie you should connect to the lan out of one of the deco and then give it static ip.",pihole,1650943101.0
1735,comment,1,i67m4wi,,On the bottom labeled.,pihole,1650937456.0
1736,comment,1,i667lrq,,"Wired or not, it will be easier if you can avoid separate networks (routed). In one L2 without routed separation one DHCP would be visible to every client and no different zones have to be maintained.

Others wrote that this is possible with Deco. 

But other approaches surely are possible (but more complicated I would say).",pihole,1650916172.0
1737,comment,1,i67my6x,,"In my case, all Decos should be connected via LAN cable",pihole,1650937805.0
1738,comment,1,i67n2x2,,Then wire them off your network switch.,pihole,1650937861.0
1739,post,3,ubexev,pi-hole + wireguard via docker = cannot see clients in pi-hole,"I installed pi-hole, unbound and wireguard on my RPi using the [wirehole](https://github.com/IAmStoxe/wirehole) docker-compose project and have successfully pointed some of my clients to the RPi running pi-hole.

However, I cannot see individual clients. All I see in pi-hole as the listed client is ""wireguard.wirehole\_private\_network"".  

I've tried setting conditional forwarding in pi-hole but am either doing something wrong or it's not working.

What I am trying to accomplish:

1. Local network traffic DNS requests get routed through pi-hole, which is using unbound. Ideally I would like to set my router's DNS settings to point to pi-hole, but I need the ability to see device client IPs within pi-hole so I can use groups to exclude certain clients from certain block lists.
2. When mobile devices are connected via Wireguard VPN, use pi-hole as the DNS server.
3. Ideally would like pi-hole, unbound, wireguard in their own docker containers.

Any assistance appreciated.",pihole,1650869631.0
1740,comment,5,i649aww,,"You will not see individual clients, because you're NATing your client traffic.  You will only see DNS traffic coming from your WireGuard server IP address.",pihole,1650886703.0
1741,comment,1,i64pwvv,,"I only care to see client IPs for devices connected to my LAN internally - that is, not through VPN. 

Any way to get this setup to work like that?",pihole,1650895144.0
1742,post,11,ub856l,"Error: Unable to update package cache. Please try ""sudo apt update""","Trying to update pi-hole but get below error:  
\[✗\] Update local cache of available packages

  Error: Unable to update package cache. Please try ""sudo apt update""

Have tried both 'sudo apt update' and 'sudo apt upgrade', with the same result.

Help would be appreciated",pihole,1650845727.0
1743,comment,6,i62iu25,,What is the full output of `sudo apt update`?,pihole,1650847071.0
1744,comment,2,i62p2ca,,What OS?,pihole,1650849944.0
1745,comment,2,i633qy1,,"In the absence of details (operating system, hosting type [docker, local, etc]) have you tried a good old `sudo apt -f install`?

EDIT: …in case you’re wondering what the `-f` does:

    -f, --fix-broken
           Fix; attempt to correct a system with broken dependencies in place. This option, when used with install/remove, can omit any packages
           to permit APT to deduce a likely solution. If packages are specified, these have to completely correct the problem. The option is
           sometimes necessary when running APT for the first time; APT itself does not allow broken package dependencies to exist on a system.
           It is possible that a system's dependency structure can be so corrupt as to require manual intervention (which usually means using
           dpkg --remove to eliminate some of the offending packages). Use of this option together with -m may produce an error in some
           situations. Configuration Item: APT::Get::Fix-Broken.",pihole,1650856994.0
1746,comment,2,i63eke8,,Are using ssh to update?,pihole,1650863123.0
1747,comment,0,i637x9u,,"sudo apt update

sudo apt full-upgrade

Allow Pi OS to update, reboot, then try pihole -up.",pihole,1650859214.0
1748,comment,-2,i64smt2,,"sudo apt-get update

sudo apt-get upgrade",pihole,1650896298.0
1749,comment,1,i63svl2,,"Hit:1 [http://deb.debian.org/debian](http://deb.debian.org/debian) bullseye InRelease

Hit:2 [http://deb.debian.org/debian](http://deb.debian.org/debian) bullseye-updates InRelease

Hit:3 [http://security.debian.org/debian-security](http://security.debian.org/debian-security) bullseye-security InRelease

Hit:4 [http://archive.raspberrypi.org/debian](http://archive.raspberrypi.org/debian) bullseye InReleaseGet:5 [http://archive.raspbian.org/raspbian](http://archive.raspbian.org/raspbian) stretch InRelease \[15.0 kB\]

Err:5 [http://archive.raspbian.org/raspbian](http://archive.raspbian.org/raspbian) stretch InRelease 

 The following signatures couldn't be verified because the public key is not available: NO\_PUBKEY 9165938D90FDDD2EReading package lists... Done

W: GPG error: [http://archive.raspbian.org/raspbian](http://archive.raspbian.org/raspbian) stretch InRelease: The following signatures couldn't be verified because the public key is not available: NO\_PUBKEY 9165938D90FDDD2E

E: The repository '[http://archive.raspbian.org/raspbian](http://archive.raspbian.org/raspbian) stretch InRelease' is not signed.

N: Updating from such a repository can't be done securely, and is therefore disabled by default.

N: See apt-secure(8) manpage for repository creation and user configuration details.",pihole,1650873794.0
1750,comment,1,i63t4ar,,Raspberry Pi OS with desktop,pihole,1650874000.0
1751,comment,1,i63tay9,,"Tried this, but still get same error",pihole,1650874161.0
1752,comment,1,i63sxvr,,"Yes, using SSH via PuTTY",pihole,1650873847.0
1753,comment,4,i63w2t4,,`sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 9165938D90FDDD2E`,pihole,1650876587.0
1754,comment,3,i657k78,,"You will need to clean up your sources list. You are running Bullseye but still have a Stretch source.

This is an OS level issue. Until apt update completes normally, the Pi-hole updater won't continue.",pihole,1650902282.0
1755,comment,1,i67iggo,,"Sorry noob question, how would I do that?

sudo apt-get clean
or
sudo apt-get autoremove
or both?",pihole,1650935904.0
1756,comment,2,i67jxrg,,Neither. Visit the Debian forums for how to change your source list.,pihole,1650936535.0
1757,post,49,ub6a7a,Move to another Raspberry Pi,"Currently have PiHole all setup on a Pi4 for a while now. Have the 4GB model and it's overkill as Pihole uses very minimal resources. Also have no OS GUI and manage the server through SSH when need be. I have a Pi3 on hand and would like to use the PiHole there instead. To avoid setting it up all again, would there be any compatibility issues to simply just move the SD card to the Pi3 from the Pi4?",pihole,1650839937.0
1758,comment,42,i629ro6,,Just dona fresh pihole install in the pi3 and use the transporter to copy everything,pihole,1650842813.0
1759,comment,23,i62d4z0,,I’ve moved from a 4 to a 2. And vice versa. No issues. Easy as pi. Sorry.,pihole,1650844397.0
1760,comment,20,i62mdpm,,"Even a 3 is overkill. It runs fine on my RPi 0 W, which is more than sufficient.",pihole,1650848710.0
1761,comment,4,i625hn4,,I have had no issues going from a Pi 3 to a 4 so I assume it should work in reverse. The IP will change but that's no a huge deal.,pihole,1650840841.0
1762,comment,2,i629nd5,,"I have 2 pi 3B's and tried moving the SD card. Wouldn't boot. Not purchased at the same time, so possibly subtle firmware differences. Plus, I wouldn't try going 4-to-3. No harm in trying, but the OS could get messed up.",pihole,1650842757.0
1763,comment,1,i629u6r,,I have 3 instances of pihole (2 for main network set up with HA via keepalived plus 1 for kids network) all running happily on Pi3 along with several other services.,pihole,1650842845.0
1764,comment,1,i62uig2,,Shouldn’t be an issue if you have say rasbian and the 3 is a b+,pihole,1650852438.0
1765,comment,1,i64ouyl,,"Sure its overkill but i have dual piholes on 2 of those 4gb pi4s. I might figure something else out for them but for now, they are doing their job and have room for the future.

Funny thing is i just bought a NAS that has like an ""app store"" and one of the apps is pihole. So the NAS can run a pihole and honestly, i could add a 3rd pihole to my network.

Hahahaahaha..",pihole,1650894678.0
1766,comment,1,i69sj79,,"Update for anyone interested: I just moved the SD card from the 4 to the 3, and works perfectly! Thanks for your input everyone!",pihole,1650984225.0
1767,comment,1,i6csap3,,I just setup pi on a 4B 8gb and that's all that's running. Opps. Is there no way to use the pi for other services if not needing port 53?,pihole,1651028708.0
1768,comment,8,i63b5b1,,"Yeah, I upgraded the Raspbian on my two piholes at the beginning of the year. Took about an hour for both while watching TV, and that was without using transporter. I just manually copied my black/white lists via the web UI as an opportunity to review them.",pihole,1650861024.0
1769,comment,5,i63m9x1,,"Having not used Transporter for uploading yet, how would one use it if one were doing SSH.",pihole,1650868485.0
1770,comment,2,i62guh1,,This is the way!,pihole,1650846149.0
1771,comment,3,i64d6s7,,I run it on a 0W as well. I’ve been considering running TailScale for VPN. Curious if there are any other services you’re running concurrently on the 0W.,pihole,1650888967.0
1772,comment,1,i64au9t,,"My Pi3 has never worked right and trying to run Pihole was no exception. The box is trash.

Got a Pi Zero 2 W and pihole works great there.  There is no lack of performance and the things are cheap.",pihole,1650887625.0
1773,comment,5,i62ddw6,,That really should work. Too late to debug?,pihole,1650844517.0
1774,comment,6,i646d6v,,You can upload a teleporter file via the web service.,pihole,1650884787.0
1775,comment,3,i64f4dx,,"I've been running Pi-Hole and Wireguard (split tunnel, so I get the benefits of the Pi-Hole and access to my NAS remotely) on a 0w for years now with no issues at all.",pihole,1650890019.0
1776,comment,5,i62pwp5,,That was like more than a year ago. Ya gotta move on....,pihole,1650850332.0
1777,comment,2,i64keho,,Any tutorial you followed?,pihole,1650892656.0
1778,comment,2,i64lo6l,,"https://www.reddit.com/r/pihole/comments/bnihyz/guide_how_to_install_wireguard_on_a_raspberry_pi/

I think that's the one I used, but it's been working for a few years now so I can't remember if I had to go ""off script"" at any point",pihole,1650893242.0
1779,post,11,ub3un2,some of my clients are being reported as a dot for their hostnames,"
Solved (Kind of)

By editing the file /etc/hosts Then adding

Using the syntax of E.G.

192.168.1.100 Phone

Then flushing again it fixes the issue however I feel this isn’t a real fix since I think there is an error

)


So I have a client on my pi-hole which is my laptop, it has been running fine and until today, it has been fine on my pihole.

&#x200B;

The hostname of the computer is Thinkpad-X230 and is now thinkpad-X230 because I tried to fix the issue.

&#x200B;

&#x200B;

https://preview.redd.it/ydne9x1mfjv81.png?width=842&format=png&auto=webp&s=5a7a1c2e2293f4d37df064f6289b176fb6aade30

&#x200B;

I have tried running `pihole arpflush`

However this did not fix my issue.

&#x200B;

My only recent changes which may be linked are adding this BLOCKINGMODE=IP-NODATA-AAAA

to the conf file and adding a wireguard configuration, where for some reason the hostnames are also just dot and appear as a dot in the query log

&#x200B;

TLDR: query log shows wireguard clients and my laptop as having a hostname of . (dot)",pihole,1650833017.0
1780,comment,1,i658g64,,"Solved (Kind of)

By editing the file /etc/hosts
Then adding 

Using the syntax of E.G.

192.168.1.100 Phone

Then flushing again it fixes the issue however I feel this isn’t a real fix since I think there is an error",pihole,1650902618.0
1781,comment,1,i68dkgy,,"Go to web gui > settings tab > DHCP > static lease 

Fill the MAC address and desired name, leave the IP blank, click the + sign next to it. Then you are fine.",pihole,1650951792.0
1782,comment,1,i68jyjg,,I don’t want to use pihole as my dhcp so I don’t think it will work,pihole,1650956601.0
1783,post,3,ub0spr,Live tv streams,"I recently cut the cord to only use streaming of content.  I want to try and block the bbc iplayer stream completely, including any live feeds on the bbc news app.  Also I would like to block itv, channel 4 and channel 5 but only their live broadcasts.  Has anyone got a relevant block list for these??",pihole,1650824360.0
1784,comment,1,i62jwzw,,"Watch the query log for the device as you use these services, then blacklist those urls with regix entries.   Should be pretty simple.",pihole,1650847573.0
1785,comment,1,i64gssg,,"Could do that,  possibly should have done that before. But now that I have cut the cord I really should not do it as I live in UK and you need a licence to view live TV.  I was hoping some may have the lists already.",pihole,1650890881.0
1786,post,0,uavcpu,Still ads,"Hello all,

Is there anyone who might know an answer. I have set up the Pi-hole it works fine. For example, only if I browse to this link '[https://turkish123.com/yemin-aa/](https://turkish123.com/yemin-aa/)' as soon as I click on an episode and play it opens a new tab with ads?  Is there a specific adlist for this or can I avoid it?

Thanks in advance!",pihole,1650808751.0
1787,comment,3,i603lbx,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1650809654.0
1788,comment,2,i602ner,,You need a browser extension blocker like uBlock Origin to stop things like opening of new tabs.,pihole,1650809219.0
1789,comment,0,i603dx8,,"Is it not possible to set this in the pi hole or raspberry? So if I want to look up on my different devices such as iPhone, tablet and laptop that it is automatically blocked?",pihole,1650809559.0
1790,comment,2,i603za1,,"You should be able to block the ads, but the tab will still open.",pihole,1650809835.0
1791,comment,2,i60xzhs,,"Code is telling your computer 

Open new tab (link)

You can block the link but you can’t block the action (with pinhole)",pihole,1650822303.0
1792,post,1,uatvpk,Help me understand this recurring dnsmasq warning: Ignoring domain repeater for DHCP host name fritz,"Since maybe two updates ago, pihole keeps warning me several times a day with the following:

Warning in dnsmasq core:

Ignoring domain repeater for DHCP host name fritz  


Can somebody please help me understand what this means? I haven't found this specific warning in the official documentation. Is this something that I should try and address? If so, how? Pihole seems to be working fine regardless.

Thanks a ton in advance!",pihole,1650803815.0
1793,comment,1,i5zsn3w,,Is your router a Fritz box by any chance?,pihole,1650804013.0
1794,comment,1,i603zwu,,"**Ignoring domain CONFIG_DOMAIN for DHCP host name HOSTNAME**

A DHCP client is not allowed to claim name HOSTNAME in the current DHCP configuration.",pihole,1650809843.0
1795,comment,1,i5zufmq,,"No, but we do have two fritz repeaters to get signal all the way around the house.",pihole,1650805041.0
1796,comment,2,i60g4or,,"Now I see it too. Embarrassing. :)

So might the problem be that both repeaters want to be known as fritz?

Edit: Have assigned individual hostnames to the repeaters and the warnings have disappeared. Hopefully it stays that way. Thank you for pointing in the right direction!",pihole,1650815036.0
1797,comment,1,i64ctyu,,"Right. Well, if memory serves they use the default hostname fritz.repeater. So that would explain the messages.

I don't think it's anything to worry about, but I guess you could change the hostnames of your repeaters to something that conforms to whatever your correct  default search domain is for your home network.",pihole,1650888767.0
1798,post,0,uaphu4,Admin GUI graph dont have 20 minutes of data,"So I noticed there were no queries between 6:40 - 7:00 from the web GUI, as the bar graph was missing a slice. That does not make any sense to me. I then checked the pihole log and verified there were queries. In confusion I restarted FTL by `pihole restartdns` and the graph were normal again. Anyone have similar behaviors or have possible theories to why this might happen? 

I forgot to capture a debug log before I restart, but heres one after restart: https://tricorder.pi-hole.net/M55wwNwH/

This also occurs to me yesterday, but I didnt think of it much, since it occured at about 4:30 and I did have a script to restart the router every other day, and it triggered yesterday.",pihole,1650785938.0
1799,comment,1,i6023bm,,There is nothing unusual in your debug log.,pihole,1650808959.0
1800,comment,1,i61atr5,,"I’m having the same issue but between 4 am and 5 am. I’m running two RPis separately, and both have the same gap.

[https://imgur.com/a/WvTV9Tq](https://imgur.com/a/WvTV9Tq)

[Edit]: added link to screenshots of my pi-holes",pihole,1650827622.0
1801,comment,1,i63b0rm,,Mine too. Both piholes. About an hour between 7 - 8am.,pihole,1650860951.0
1802,comment,1,i64tlb4,,"Mine did it again, this time between 5 and 6 am.

[https://imgur.com/a/KU7cQ9f](https://imgur.com/a/KU7cQ9f)",pihole,1650896689.0
1803,comment,1,i60he1d,,"How about this? 

https://tricorder.pi-hole.net/JDIkbrbx/

https://imgur.com/a/Xa5M2Vm",pihole,1650815567.0
1804,post,149,uaov2a,How can I override Chromecast's hardcoded Google DNS and redirect it to my Pi-Hole without breaking the functionality of the Chromecast on a Arris NVG468MQ router?,"I see way too many ads on Chromecast.

Then, I realized Chromecast isn't even using my Pi-Hole.

I tried blocking port 53 (DNS) from the router hoping that it would fall back to the routers DNS settings (which are pointing at the Pi Hole) - but, nope, instead, it broke the chromecast + videos failed to load on YouTube etc.

Would appreciate some pointers etc... on how to do this.",pihole,1650783310.0
1805,comment,58,i5za9ee,,"Via firewall only:

* force DNS, DNS-over-HTPS, DNS-over-TLS request to Pi-Holes
* and only Pi-Hole can forward the request

I have a Samsung smartTV dogshit for that (hardcoded DNS). OPNSense and some firewall rules to put things in place.",pihole,1650789933.0
1806,comment,35,i5zf8yr,,"I use a raspberry pi running openwrt as my router. I have firewall rules set up to forward all port 53 traffic to my pihole. I have another rule to make it look like the answer is coming from where the request was sent instead of the pihole. Now, all my devices are using pihole whether they know it or not.

This was fairly easy to setup. There are plenty of step by step guides out there. In my case, my AIO router couldn’t be flashed with openwrt, so I used a raspberry pi and put the AIO router in AP mode.",pihole,1650794176.0
1807,comment,12,i5z6pq1,,"I use a redirect on my router, such that any outbound port 53 traffic from a client gets passed to one of my two piholes.

Your ability to do this, and the steps to take, would depend on your router. I have a Ubiquiti USG-3P, which needed some fairly advanced CLI config to achieve this. 

I don't have a Chromecast, but my Nest Mini was also ignoring DHCP and using 8.8.8.8 — it is now using pihole (without knowing) and still works fine.",pihole,1650787041.0
1808,comment,4,i5zdt4u,,"Interesting discussion! Do you need to rewrite the DNS answers (source IP 8.8.8.8 although different)? If one did this successfully maybe they want to share the required config, maybe in iptables language.

Side topic: Is there a lot of advertising on Chromecast which could be filtered by DNS? I could imagine they use more injected video content which can‘t be differentiated by source?",pihole,1650792939.0
1809,comment,2,i5zg6zc,,You basically need to set up a force-redirect of all DNS and DoT traffic (port based) to your Pihole. How you do that depends on your router.,pihole,1650794965.0
1810,comment,2,i5zlcrr,,"[This](https://docs.netgate.com/pfsense/en/latest/recipes/dns-redirect.html) might help you.

It’s instructions for pfSense but it might give you the necessary information you need to make DNAT work on your router.",pihole,1650799168.0
1811,comment,2,i5zltcn,,"I can’t say I spent too long trying it but when I tried forcing all my Chromecast’s DNS traffic to my internal resolver using a NAT rule I found the Chromecast just completely stopped working.

Using the same method on other devices works as it should.

I didn’t bother to debug it much though. But if anyone else gets it to work reliably I’d be interested to hear.",pihole,1650799510.0
1812,comment,2,i60oa1n,,"Add static routes, block 8.8.8.8 and 8.8.4.4.

I followed this [guide](https://www.techilife.com/bypassing-chromecast-dns-and-blocking-google-dns/).

Hope it helps.",pihole,1650818391.0
1813,comment,1,i5z5cqv,,"The only way ive seen it work is to setup your raspberry with an aditional ip address. Use that as the gateway in stead and apply ip tables to fotward any trafic to your router and do some Mac address based prerouting to forward the dns requests from your chromecast to an pihole.

I recommand a secondairy pihole, docker so you can spin up multiple piholes *note to apply macvlan. One for your normal setup and a second one for your chromecast.  Because its so dependend on getting an awnsers from google, you need to setup the second one with the googledns as upstream dns servers.",pihole,1650785925.0
1814,comment,1,i60lpic,,"I block any outgoing trafic on tcp/udp 53 in the router, except for pihole and it works fine. Both Chromecast end up using pihole with no problem. But even using pihole, Youtube it's a lost cause, ads are loading from the same domains that content...",pihole,1650817344.0
1815,comment,1,i61x53c,,I used this [guide](https://www.derekseaman.com/2019/10/redirect-hard-coded-dns-to-pi-hole-using-ubiquiti-edgerouter.html) for an edgerouter.,pihole,1650837135.0
1816,comment,1,i62c2jp,,DNS Hijack anything going to port 53 or 5335 then send it to your pihole server this is what i do.,pihole,1650843893.0
1817,comment,1,i62thjc,,Wait what...my Chromecast with GoogleTV seems to just follow the DNS I've set in my router and go to my Pi-Hole just fine...am I lucky or is there something I'm missing here?,pihole,1650851971.0
1818,comment,-5,i61dl75,,why?,pihole,1650828782.0
1819,comment,-1,i60d1t0,,Port forwarding,pihole,1650813714.0
1820,comment,-1,i62m454,,"First failure is using anything google. The ones pushing the ads at you. Of course they force their own DNS, and utilize workarounds.",pihole,1650848590.0
1821,comment,0,i5zyo1x,,Where are you seeing ads on Chromecast? I've had one for close to 10 years now and have never gotten an ad pushed to my screen.,pihole,1650807301.0
1822,comment,21,i5zu2pm,,"Iirc you can’t force dot or doh but you can force normal dns to go through pihole.
For doh or dot the most you can do is block the most common domains and that may force the apps to use vanilla dns",pihole,1650804837.0
1823,comment,4,i6069w4,,I tried redirecting Google traffic but all it did was stop my chromecast from working. Could you share how you have the rules set up in opnsense?,pihole,1650810857.0
1824,comment,10,i5zlgwg,,Could you share a link to one of those guides please? In the meantime I'll try guessing at a good search query. Thx...,pihole,1650799251.0
1825,comment,0,i60wpmn,,"Same. But I'm curious, where OP sees ads.

On most services I don't see ads since I've paid for them.

With this set up however, I don't pay for things like Crunchyroll (but I've not used it in ages...), and only see a black screen for 1 second where ads would happen.

But, the one exception is YouTube. They hardcore the ad servers, so there is no way to catch this through DNS filtering. I could try to set up some IP blocking system, but I recall reading that these ad servers keep rotating IPs constantly, so such a system may work for a week, and then I'd have to somehow find the new IPs to apply, and then in 1 week repeat. When ads mainly are 20-30 seconds total per video (if even), I'm honestly not sure how much time I'd save each week, plus my favorite YouTubers would miss out adsense revenue, for mere minutes of my time. With all other privacy measures, I'm fairly certain the ad servers are clueless about my profile (guy being served female hair product ads 😅🤣)

All in all, I'm pretty happy with this kind of set up, and don't feel overrun with ads.

Ps! This what you did? DNAT for port 53

 https://help.ui.com/hc/en-us/articles/215458888",pihole,1650821789.0
1826,comment,2,i60ymyr,,"You intercept destination requests bound for DNS servers on port 53, with a DNAT rule. How to do this, depends on your router/firewall.

As per the side topic, it depends what app you cast with. Chromecast is basically a Android device hooked to a big screen, and when you cast you basically are running an app on the Chromecast. If you can stop ads, depends on the code and how developers coded the app. If the app needs DNS to resolve the ad servers, you can successfully stop ads. But for the likes of YouTube, they hardcode those IPs into the app, thus DNS filtering won't catch it.",pihole,1650822566.0
1827,comment,2,i5zqa0x,,"Re side topic I’m curious too OP, what ads you’re seeing a Chromecast? I’m a heavy Chromecast user and have never seen any ads.",pihole,1650802568.0
1828,comment,1,i60xkg6,,"DNAT rule for port 53 only, not a static NAT for the Chromecast itself.

Likely stopped working due to SSL issues and failed handshakes. DNAT for port 53 would only intercept destination request bound for a DNS server.",pihole,1650822133.0
1829,comment,1,i61zpoq,,Setting a static route to your default gateway doesnt do anything..,pihole,1650838261.0
1830,comment,1,i61c2jl,,"You can sideload SmartTube APK if you use dev mode on an Android-based tv device
Works like a charm on my Chromecast",pihole,1650828139.0
1831,comment,2,i6001dm,,Not necessarily for ads but for privacy and tracking.,pihole,1650807985.0
1832,comment,7,i5zzux9,,"DoT runs over port 853. Simply blocking all traffic on that port with firewall rules will work to prevent it. As for DoH, you are correct since it runs over port 443 which is used for HTTPS.",pihole,1650807897.0
1833,comment,2,i5zybas,,"Yes you can force, DOT and DOH, have dynamic rules in place to get updated with the DOT and DOH lists.

I've being doing this for ages and in fact I've seen network tools showing me the redirection.",pihole,1650807120.0
1834,comment,5,i60c18i,,"https://docs.netgate.com/pfsense/en/latest/recipes/dns-redirect.html

pfsense setup guide but should give same results on opnsense, this is how I have it setup on each of my vlans.  I also do this for NTP so all devices hit my pfsense box for NTP and let the pfsense box hit my NTP servers for time.",pihole,1650813284.0
1835,comment,16,i5zls76,,This looks like what you're talking about: https://jeff.vtkellers.com/posts/technology/force-all-dns-queries-through-pihole-with-openwrt/,pihole,1650799486.0
1836,comment,1,i5zvj9z,,I think the objective here is more to block any telemetry Google might be collecting.,pihole,1650805645.0
1837,comment,3,i607e1y,,"Yes, so for DoH you have to use IP Blocklists for known DoH providers. That is assuming your firewall allows you to import those blocklists (usually just a text file). 

Ii have scripted the process of pulling down a DoH blocklist once a week and then it loads into PFSense.",pihole,1650811336.0
1838,comment,8,i5znn4z,,And this (since my router is actually a unifi UDMpro)... https://www.reddit.com/r/Ubiquiti/comments/fw6whf/udm_pro_redirect_all_dns_queries_through_pihole/g470isz,pihole,1650800824.0
1839,comment,2,i60g7t3,,"This isn’t the exact one I used, but the end result is the same. As mentioned in the guide, make sure to put in both rules. Devices don’t like to receive an answer from somewhere other than where they are expecting it to come from.",pihole,1650815073.0
1840,comment,1,i60pgth,,"Any chance you know of a guide somewhere for the same thing on FreshTomato? 

I have a router with Broadcom so I need to use it instead of OpenWRT to use 5GHz.",pihole,1650818872.0
1841,comment,5,i602v8c,,"Blocking tracking telemetry on Chromecast is always good, agree. OP specifically said 
> I see way to many ads on Chromecast",pihole,1650809320.0
1842,comment,1,i627eyw,,"This is what I do. For Chromecast, they will probably be using Google's DNS servers, so blocking those should work.

My Roku has hardcoded Google DNS servers which I block with my firewall.",pihole,1650841724.0
1843,comment,1,i62nj22,,I’m about to replace a consumer router with a PFSense unit. Automated DoH blocking is something on the to-do list. Did you work from a guide or can you share your process?,pihole,1650849247.0
1844,comment,4,i5zxk7g,,"Thanks for that!

Would you mind to post a somehow step-by-step that you followed to achieve the port forwarding on UDM Pro?

I am pretty new to this :)

Thanks",pihole,1650806727.0
1845,comment,1,i61sisv,,"why this over blocking port 53 to the internet, and only allowing pihole access to port 53",pihole,1650835108.0
1846,comment,3,i6037p4,,"Oops, overlooked that first line of OP’s message. My bad, and I would second that as a Chromecast user, I never see any ads.",pihole,1650809479.0
1847,comment,3,i62qqgg,,"I just customized this process

https://www.derman.com/blogs/Loading-BlockLists-Into-pfSense",pihole,1650850710.0
1848,comment,1,i62ra93,,Nice - thanks! I might port the PHP script component to Python (not a huge fan of PHP for sysadmin stuff) but that will work for now.,pihole,1650850961.0
1849,post,2,uaoc16,Cheapest way to use pihole?,"I have an ATT gateway modem so I need to buy a $60 router to be able to change DNS settings. I’ll also need to buy a raspberry pi which is costing around $40+ on eBay.

Is there a way to do this cheaper? Id like it to have 100% uptime without changing each devices’ dns settings",pihole,1650781048.0
1850,comment,5,i5yzjpx,,"So if you can disable DHCP on the gateway you can enable it on the pihole instead and have that do all your DNS assignment which sidesteps the issue. I did this for a while and it worked fine , but I did eventually get my own router for more control over my home network and stick the gateway in modem only mode.

Re: the pi - you can pick up a zero W or an older model, it doesn’t have to be one of the newest ones - pihole is not resource intensive at all if that can save you a few notes. Good luck!",pihole,1650781419.0
1851,comment,4,i5z156c,,"there is a github page with a nice script that installs pihole on a regular windows machine as a background process. It works well. just point your network settings to the pihole dns and no router or raspberrypi needed.

[https://github.com/DesktopECHO/Pi-Hole-for-WSL1](https://github.com/DesktopECHO/Pi-Hole-for-WSL1)",pihole,1650782627.0
1852,comment,3,i5zahz1,,I can't change my router settings usefully so I just configure each device and my Pi Zero was a fiver which is powered by the USB port on the router and plugged into an ethernet port.,pihole,1650790129.0
1853,comment,3,i5zg6ak,,"I got it on a pi zero 2 with a case, velcroed to my router and taking power from its USB port. Over wi-fi. Works absolutely fine.

100 per cent uptime is impossible on a datacenter managed by professionals with top of the line hardware, power and network. Let alone at home.",pihole,1650794949.0
1854,comment,3,i5zl7lx,,Wouldn't running it in Docker remove the need for  Pi? That's how I do it.,pihole,1650799064.0
1855,comment,1,i5z1qur,,"You could also think about hosting it on a VPS server, you'd rent?

As some examples show (often together with pivpn)? These are only indicative as some are older implementstions.

Might even be possible for free for example a small vps on Oracle cloud. I myself don't believe in ""free"" by companies like Oracle but that's just me...

https://blog.inforeseau.com/2019/04/install-your-vpn-server-with-pi-hole-on-ovh-vps-in-30-min

https://nledford.github.io/Pi-Hole-VPS-Tutorial/

https://www.digitalocean.com/community/tutorials/how-to-block-advertisements-at-the-dns-level-using-pi-hole-and-openvpn-on-ubuntu-16-04",pihole,1650783082.0
1856,comment,1,i78wutm,,"1. find android phone lying around
2. Host pihole on that
3. keep that phone on by connecting it to powerbank which is connected to wall charger
4. update dns settings for network to point to that phone on port 53 (whatever port you decide)

https://github.com/DesktopECHO/Pi-hole-for-Android",pihole,1651634066.0
1857,comment,0,i5zj5e1,,"Yes there are any number of Raspberry Pi models you can buy for low cost, just add a microSD card and power supply and you should be good to go. Install Raspberry Pi Lite, install Pi-Hole, set the Pi-Hole to be the DHCP server and disable the DHCP server on the router.",pihole,1650797442.0
1858,comment,2,i5z1ky5,,"That’s cool, I’ll need to leave my pc on though right? I might do this for the time being",pihole,1650782958.0
1859,comment,2,i62j54r,,"the Piz2 is the sameish specs as a Pi3, Pi3b+ or Pi3a+.  More the last two.  I have my PH instance running on a 3A+, it runs between 0% and 2% CPU.  I have 15-20 clients.",pihole,1650847215.0
1860,comment,2,i60a7uf,,It would yeah. Just switched over to a docker install on my plex server for pi hole,pihole,1650812516.0
1861,comment,2,i5z58jz,,"If the OP wants a DHCP to point clients to a special DNS the VPS solution would be complicated to implement for DNS and DHCP serving.

A PI Zero would be all the OP need. In my eyes mich smoother than VPS or background Pihole on Windows client.",pihole,1650785828.0
1862,comment,1,i5z24hb,,I’ll totally consider this! Would I experience a big decrease in internet speeds doing this?,pihole,1650783375.0
1863,comment,3,i62jcjq,,"Prices on eBay are ridiculous!  A pi3b for \~$90.  Do a search & be afraid, very afraid.",pihole,1650847309.0
1864,comment,3,i5z20zw,,"Yes, i also did it as a temporary measure. Super easy install and even includes amnuninstall script.",pihole,1650783299.0
1865,comment,2,i63yt8h,,"Its because of the chip shortage. Prior to the shortage that began last year Pi's could be had for *significantly* lower cost. On eBay one can find certain ""used"" Pi's for around $50 USB.

But there are other ways to run Pi-Hole without using a Raspberry Pi. ([Pi-Hole supported operating systems](https://docs.pi-hole.net/main/prerequisites/#supported-operating-systems)) If one has an old PC laying around they could run one of the Linux supported OS's. Or find a device to install Docker to and run Pi-Hole in Docker. If one has a Synology or other NAS they may be able to shoe horn Pi-Hole onto it using Docker.",pihole,1650878946.0
1866,comment,2,i6cqs7p,,"If you have root on an old Android device you can run Pi-hole in a Linux Deploy container:

[Pi-hole for Android](https://github.com/DesktopECHO/Pi-hole-for-Android)",pihole,1651028007.0
1867,comment,1,i66scky,,"fortunately I have 2-z 1.0, 5 Zw, 1-b, 2-b, 1-2b+ 1-3b, 1-3b+, 3-3A+, 1-4b-8, 2-4b-4, 1-Pi400.  My pockets are stuffed.  Oh and I highly overpaid for a Z-2. It runs like a 3A+ or a 3B+, as advertised.",pihole,1650924487.0
1868,post,1,uan13h,Where to put pihole server to see devices on different vlans,"Here is my network setup. 

Vmware 10.0.0.2
Sophos Firewall 10.0.0.1
 - Streaming VLAN 172.0.10.1
 - IOT VLAN 172.0.20.1
 - Local WLAN 172.0.30.1
 - Guest WLAN 172.0.40.1
 - Switches VLAN 192.168.10.1

My current config, every vlans dns is their gateway, and my routers dns forwarder is pihole. In my pihole log, the only client I see is 172.0.20.1 (my pihole is using this subnet).

I want to be able to see each devices under each vlans show up in the clients, is that possible? If so, where do I place my pihole? Thanks",pihole,1650775689.0
1869,comment,1,i5yshan,,"Depends how your VLANs are separated. If you're using firewall rules to block communication between VLANs the just create a new VLAN for ""communal"" services like the pihole. Allow commutation between all VLANs and the pihole VLAN and then have the router as the upstream DNS.",pihole,1650776544.0
1870,comment,1,i5yum9k,,"just tag the pihole's switch port for each vlan then setup the interfaces. i'd also slap a few firewall rules on there so the web gui is only exposed on the local vlan.
 
https://wiki.archlinux.org/title/VLAN",pihole,1650777905.0
1871,comment,1,i6093h6,,"Allow routing (at least DNS) to the PiHole between your VLANs and point the clients at the PiHole address.

You will have to allow other networks on the PiHole or it will drop the requests from other networks.",pihole,1650812044.0
1872,comment,1,i5zoeti,,"I have pihole and unbound dns in a virtual machine on iot vlan. I have firewall rule that connects each vlan to my pihole. So my setup is, on the vlan interfaces, my default dns provider is my router, and my router’s dns forwarder is my pihole. Probably, that’s the reason why pihole only sees the router as it’s client not each devices in vlan. So should I change the default IP for dns on each vlan interface to my pihole IP and I’ll choose my router as upstream dns provider in pihole? Thanks",pihole,1650801350.0
1873,comment,1,i5zp8m5,,"My pihole with unbound server is in a virtual machine. So, just to clarify, tagging each vlan to switch port is basically connecting my pihole to a trunk port? Will my pihole resolve an IP?",pihole,1650801893.0
1874,comment,1,i67qhe1,,I just did ay dnat going to pihole. It worked.,pihole,1650939328.0
1875,post,1,uajy33,Unbound Question,"Attempted to set up unbound, and it seemed to go smoothly, but when I do a DNS Leak test the IP’s shown are all belonging to my ISP, and they don’t match my IP. Found a couple other posts of people saying that it’s normal for it to show your ISP, but what I’m worried about is that the DNS leak test isn’t showing my IP, it’s showing IP’s that don’t match any of the mine. I’m new to this so could be me worrying over nothing, but it just doesn’t seem right so hopefully someone can help me understand.",pihole,1650764432.0
1876,comment,2,i5y6rzu,,[dnsleaktest.com](https://dnsleaktest.com) should show your external IP resolving to your ISP. This is normal.,pihole,1650764724.0
1877,comment,1,i5ybrgq,,[deleted],pihole,1650767183.0
1878,comment,1,i5yc0ck,,"Please post the output of the following command from the Pi terminal:

`sudo grep -v ‘#\|^$’ -R /etc/unbound/unbound.conf*`",pihole,1650767307.0
1879,post,15,uai3r5,"resolvconf only adding nameserver 127.0.0.1 to ""/etc/resolv.conf"" *FIX*","Just adding this here in case anyone else ever has this problems and needs the fix

In `/etc/resolvconf/update.d/libc`, on line 52:
```shell
    TRUNCATE_NAMESERVER_LIST_AFTER_LOOPBACK_ADDRESS=y
```
just set that var to ""n"" and run `resolvconf -u` and the name servers in `/etc/resolvconf/resolv.conf.d/base` (or whichever file) will be added to `/etc/resolv.conf`",pihole,1650758195.0
1880,comment,5,i5xwvr6,,What OS is this?,pihole,1650759823.0
1881,comment,1,i6271rm,,"Is this because you are trying to use a non-standard upstream dns server?

Typically, you'd want to use [127.0.0.1](https://127.0.0.1) on the rpi so that it uses the pihole managed dns servers?",pihole,1650841555.0
1882,comment,2,i5y9em9,,Raspbian GNU/Linux 11 (bullseye) armv7l (Linux 5.15.32-v7+),pihole,1650766002.0
1883,comment,1,i62f1h4,,just wanted to set the gateway as a fallback in case something happens and Pihole has a problem,pihole,1650845297.0
1884,post,28,uai1n6,Edit Pihole Web interface,"Is there a way to edit the pihole ""dashboard"" web interface?  I want to create my own edited version of it,  but want to keep the stats, etc. Is there a way to do this?  Also,  if there is,  what file and location would I edit?",pihole,1650757995.0
1885,comment,10,i5xtnco,,https://github.com/pi-hole/AdminLTE/blob/master/index.php,pihole,1650758214.0
1886,comment,3,i5za0jk,,"You can also build your own by using the APIs.
I have „Pi-Hole remote“ on my iPhone - a client looking completely different from the web GUI.
For example:
https://apps.apple.com/de/app/pi-hole-remote/id1515445551",pihole,1650789727.0
1887,comment,2,i60sy7n,,"You can absolutely - the html is generated via php

you can find it here: /var/www/html/

&#x200B;

I would use <!-- --> around blocks of html you don't want to include (which makes it easier to undo instead of deleting

From an editing functionality make sure you keep backups of the files (You can get a fresh copy from: [https://github.com/pi-hole/AdminLTE/blob/master/index.php](https://github.com/pi-hole/AdminLTE/blob/master/index.php))

This will also be ""reset"" when you do an update to the web interface",pihole,1650820284.0
1888,comment,3,i5xwyjl,,"No,  it's for me.  I just live things simple.  There is no motivation behind this except that I just like to see something simpler.  That's all.",pihole,1650759861.0
1889,comment,-2,i5xvsb8,,"No, only pi running on it.  Just an edited dasboard.",pihole,1650759280.0
1890,comment,1,i61fwqk,,"If you want that SNMP stuff, use one of the Nagios branches.  A new fun Linux ""thaaaang"".  Besides, it can give you TONS of data!",pihole,1650829764.0
1891,comment,1,i61t5s7,,"Maybe using ""Stylish"" browser plugin or similar is enough? Made a lot of websites acceptable this way.",pihole,1650835381.0
1892,comment,-10,i5z7f2z,,[deleted],pihole,1650787600.0
1893,comment,0,i5xu034,,"I'm guessing I could edit this to my desire, but where does it go?",pihole,1650758391.0
1894,comment,0,i5xubf2,,Thank you,pihole,1650758544.0
1895,comment,0,i5za4xk,,@u/tschloss Thank you,pihole,1650789830.0
1896,comment,1,i6hynxj,,Thank you,pihole,1651122320.0
1897,comment,4,i5xybct,,"If you want simple, don't load the web interface.",pihole,1650760538.0
1898,comment,2,i5z9gjn,,"@u/khaizity considering it's a personal home pihole, I guess it really doesn't matter.  That's how you learn.  
Part of this platform is to help others out.  In fact,  this platform is full of people asking questions and getting helpful responses.  
Then there are a few people like yourself.  It really doesnt matter if you think it's a recipe for disaster or not.",pihole,1650789268.0
1899,comment,7,i5xu5tj,,"    /var/www/html/pihole

    /var/www/html/admin",pihole,1650758466.0
1900,comment,6,i5xyx5a,,"Look guys,  this isn't something to get up in arms about.  It's just a personal preference.  If you feel strongly about this,  you can tell me.  But I thought this was open source.  It's a great product.  And I appreciate the efforts around this.  But it's really not worth the snide comment here. Am I wrong that open source is something I can modify for my own purposes?",pihole,1650760842.0
1901,comment,-18,i5yo622,,That and maybe get outside more or get a job.,pihole,1650773938.0
1902,comment,-7,i5z9ybi,,[deleted],pihole,1650789675.0
1903,comment,2,i5xubu5,,Thank you,pihole,1650758550.0
1904,comment,18,i5y0jby,,You are not wrong. I am simply noting that the web interface isn't required at all.,pihole,1650761643.0
1905,comment,0,i5za293,,[removed],pihole,1650789766.0
1906,comment,4,i5xufmr,,Note that they would be wiped on the next update or repair,pihole,1650758603.0
1907,comment,3,i5xult1,,"Understood.  As long as I could replace it when I do the update,  that would be ok.  Thank you",pihole,1650758688.0
1908,comment,1,i5xuxhk,,May I ask why do you need to do this?,pihole,1650758852.0
1909,comment,1,i5yii18,,I’m not exactly sure how it updates but you could possibly add the file to .gitignote. You’d have to dig through the update script though.,pihole,1650770741.0
1910,comment,0,i5xv99j,,"Site.  If like to take out the pihole logo, cpu, temp, etc.",pihole,1650759015.0
1911,comment,7,i5xwro1,,">	If like to take out the pihole logo

What are your plans here?  Hosting a public server?",pihole,1650759766.0
1912,comment,3,i5xvm0k,,"You mean you want to have another site hosted on the same pi? You dont need to edit the pihole files, just create another folder in `/var/www/html`, like `/var/www/html/myPage/index.html`",pihole,1650759191.0
1913,post,15,uah75r,Conditional turned on -> alert flag for suspended router,Why does pihole generate an alert message about my router being blocked due to excessive requests every time I turn on conditional forwarding?,pihole,1650755232.0
1914,comment,1,i5xqarb,,"Conditional forwarding produces additional traffic from your router to Pi-hole. This is causing the router to hit the rate limit.

You can change the limit:

https://docs.pi-hole.net/ftldns/configfile/#rate_limit",pihole,1650756580.0
1915,post,2,uah0pr,admin interface not available on Rock64,"So i got all the way through the install and gave my rock a static Ip via opnsense. However the admin interface is not available. I am able to ssh into the board and confirm pihole and unbound are both working. Any suggestions?.

I am getting this [error](https://prnt.sc/TQGLqXTlAfVC)",pihole,1650754690.0
1916,comment,1,i5xr8ap,,"The web server failed to start. Is pihole blocking anything?

Also, what does the logs say?

    sudo cat /var/log/lighttpd/error.log",pihole,1650757030.0
1917,comment,1,i5xyfnj,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1650760599.0
1918,comment,1,i5zn9ep,,Do you run any other webserver on port 80?,pihole,1650800557.0
1919,post,0,uagxzs,Can you monitor IP addresses with Pi-hole? If there a way to check if devices are making connections using IP addresses instead of domain names?,Is there a way to monitor any IP connections going through Pi-hole?,pihole,1650754452.0
1920,comment,3,i5xmaya,,"No.  PiHole is a domain name server.  It translates domain names to IP addresses.  If a device already knows the IP address, then it doesn’t need to connect to a domain name server.",pihole,1650754712.0
1921,comment,1,i5xpv8o,,Use Wireshark.,pihole,1650756371.0
1922,comment,1,i5xmi3b,,"I see, that makes sense. Thanks for the information. Would you know of a way to monitor this?",pihole,1650754806.0
1923,comment,2,i5xmphj,,Router logs?,pihole,1650754902.0
1924,comment,1,i5xmsls,,Most people would do this at the firewall level.,pihole,1650754942.0
1925,comment,2,i5xohgf,,The router is the device I want to monitor. I see it making dns requests every 10 - 15 seconds. I wanted to check if it was doing something similar with IP addresses.,pihole,1650755733.0
1926,comment,2,i5xoxw9,,"Yeah you need firewall logs that show what devices the router is trying to connect to. If you do not have a router with firewall logs, you’re kind of out of luck.",pihole,1650755939.0
1927,comment,2,i5xpjlu,,"If the router is your suspect, you’ll at least temporarily need to install a device to watch the traffic one level higher than the router. Most firewall solutions (such as pfsense) can do this for you.",pihole,1650756215.0
1928,comment,1,i5xpkq0,,Can you place a firewall between the router and the modem? I have them separate.,pihole,1650756230.0
1929,comment,1,i5xrbmu,,Thank you. I'm going to look into this.,pihole,1650757077.0
1930,comment,1,i5xq17t,,"You can. Your router has a firewall, it just doesn’t expose the logs to the user. 

You could use an application like Wireshark to run a packet capture on your router and maybe that would show it.",pihole,1650756452.0
1931,post,20,ua8v0a,Block Lists,Is there one really good collected block list that covers mostly everything? Looking to add just one instead of 10 to 15 different ones.,pihole,1650730458.0
1932,comment,19,i5w7uig,,"Probably not. There is little downside to subscribing to multiple adlists, and there is an upside - they can be selectively applied to different management groups. 

This website has a good collection of lists tailored to different needs. 

https://firebog.net",pihole,1650731852.0
1933,comment,4,i5wu074,,"As already indicated, Firebog then use Jacklul's script to keep the list synced.

[https://firebog.net/](https://firebog.net/)

[https://github.com/jacklul/pihole-updatelists](https://github.com/jacklul/pihole-updatelists)",pihole,1650741654.0
1934,comment,4,i5wy8d5,,This website has the most comprehensive block list I’ve found so far - https://beaconsandwich.co.uk/2020/05/03/shut-your-pi-hole/,pihole,1650743605.0
1935,comment,2,i5z6scf,,"I use OISD. I have no problems or any ads.
Very good blocklist in my opinion
https://oisd.nl",pihole,1650787100.0
1936,comment,1,i5wg0ef,,Thank you for the response. I appreciate it!,pihole,1650735419.0
1937,comment,1,i5ynrwi,,"This is the best, then whitelist any false positives as you hit them.",pihole,1650773711.0
1938,comment,-2,i5x154a,,Stellar! Added this a deleted all others - getting a 96% block rate when testing! Thanks!,pihole,1650744931.0
1939,comment,1,i5zkq5w,,"I’ve been having a helluva time whitelisting click.redditmail.com. No matter what I can’t click through on those emails from Reddit.

edit: nevermind. the app I was using update my lists (pi-hole remote on iOS) was only applying it to the default group, but I had set most of my clients and domains to use groups other than Default. corrected by setting my domain filters to also use Default for now. May go back to more specificity later if needed. I probably got more granular than is needed",pihole,1650798697.0
1940,post,13,ua3ehj,pihole and openvpn on asus router,"Pihole works perfectly at home. I have openvpn working correctly on my asus router.

The problem is when i connect from my android or ios through openvpn, pihole doesn't work on those devices. Is there something i should to to use pihole dns when using vpn?

If you can point me to some tutorial, i found many but i'm not sure which one should i use in my case.

&#x200B;

Thank you.",pihole,1650713428.0
1941,comment,5,i5v8g3c,,https://openvpn.net/community-resources/how-to/#pushing-dhcp-options-to-clients,pihole,1650714373.0
1942,comment,1,i5wxtpt,,"I use the Merlin firmware on my Asus router, so I don't know if this would apply if you are on stock firmware.  We I go in to the openvpn server setting, change it from general to advanced settings, and there is an option for advertise DNS to clients.  Do you have that set to yes?",pihole,1650743417.0
1943,comment,1,i5wypmi,,"Is your phone not hitting PiHole? What exactly isn’t working?

If it’s not hitting PiHole, make sure the DNS server settings on your router is pointing to your PiHole. Or manually override the DNS setting in your wifi settings on your phone.",pihole,1650743824.0
1944,comment,2,i5wyk2u,,I did it and it worked. Thank you!,pihole,1650743754.0
1945,comment,1,i7ox4gd,,"Hello, I though it was working, but ublock was blocking it.

I think i don't know which DNS do I have to put. The one of the router or the one of the pihole? I tried both (pihole 192.168.1.221 and router where openvpn is 10.8.0.0) but none worked. Could you help me a bit more?

I have my openvpn server configured like this: https://imgur.com/a/Nll4fj7",pihole,1651940289.0
1946,comment,1,i5xwd41,,"I struggled with getting this to work using Tunnelblick on my Mac.  I ended up writing a client side script to set the DNS manually if I'm on VPN or not. 

I suspect it's the VPN client... but then if I connect with my phone via the OpenVPN client, it'd disconnect my Tunnelblick session... so I think it's my ASUS config. 

Too many places to troubleshoot. It was super annoying.",pihole,1650759568.0
1947,comment,1,i5y8llh,,"I have an Asus router and use OpenVPN on my Android.  When I'm connected to the VPN server my router pushes my PiHole for DNS to my phone.  So it's the same use case as OP is describing, and works exactly as they are wanting.  The big variable between OP and me is whether they are using the stock firmware or Merlin.  It's been so long since I've used stock I'm not sure which settings are available on both and which are just Merlin.  So hopefully they have the setting to advertise the router DNS address to VPN clients.  I know mine allows that.",pihole,1650765612.0
1948,post,7,ua2qp0,pihole diagnosis warnings...but nothing listed,"Recently updated to:

Pi-hole v5.10 

FTL v5.15 

Web Interface v5.12

And now I'm getting the little warning count in the side menu for the diagnostics link. However when I go to that screen, there's nothing listed.

These warning notifications weren't there at all prior to updating and I've not changed any other settings.

The notification count seems to rise at a rate of about 50 per minute so I'm concerned there's something I need to fix but I can't see what it is in the diagnosis screen as nothing is listed.",pihole,1650710843.0
1949,comment,1,i5w4sct,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1650730501.0
1950,comment,1,i755spr,,"Further update: https://tricorder.pi-hole.net/IYCsMWsn/

For some reason, warning are now appearing on the diagnosis page.",pihole,1651574014.0
1951,comment,1,i6xmawy,,"Sorry for the delay - had to turn off pihole while we had to work from home.

Here's the log I just output now I've turned it all back on again: https://tricorder.pi-hole.net/92SeYIBF/",pihole,1651429586.0
1952,post,1,ua15l6,ASUS RT-AC68U making large amounts of requests,"The router on the pihole admin site is making 200k+ requests and it keeps increasing, is this normal? I don't fully understand whats going on with it.",pihole,1650703954.0
1953,comment,3,i5wvurj,,"How is Pi-Hole setup on your router? Are you using the stock Asus firmware or [Asus-Merlin firmware](https://www.asuswrt-merlin.net/)? Putting Pi-Hole into the router's WAN DNS fields and enabling ""Use Conditional Forwarding"" in Pi-Hole can setup a potential loop. Using the stock Asus firmware also presents an issue with the router adding itself as a DNS server to network clients in addition to what ever value one uses for LAN DNS Server 1 and 2.

If one uses the [Asus-Merlin firmware](https://www.asuswrt-merlin.net/) they can stop the router from including itself as a DNS server by disabling (set to no) the DHCP Server page option ""Advertise router's IP in addition to user-specified DNS"".

Personally on a AC68U running Asus-Merlin I have Pi-Hole in the LAN DNS Server 1 and 2 fields, the WAN DNS Server 1 and 2 are set to public DNS servers (currently Cloudflare), and DNSFilter enabled with global filter set to router with Pi-Hole's MAC address in a client list entry with that entries filter mode set to no filtering. No issues with the router making large amounts of requests.",pihole,1650742512.0
1954,comment,1,i5v0zn0,,"I had a similar issue, make sure to spread your Pi-hole as dns server and router as gateway. I’ve configured as PiHole being the dns for the router and the router being dns for ever client and I had every request twice  so maybe check that",pihole,1650708621.0
1955,comment,1,i5z9iz3,,"Hey thanks for the reply! I flashed Merlin, and will do your config and reply with the results",pihole,1650789322.0
1956,comment,1,i5zadiq,,"So 2 questions, for DNSFilter did you put anything for the Custom DNS 1-3? And on the admin site for the Pihole what DNS servers did you select?",pihole,1650790028.0
1957,comment,2,i5wbzbo,,"Based on your post this might be worth a read and potentially resolve duplicated and large amounts of requests.

[https://www.reddit.com/r/pihole/comments/u9ecwd/asus\_ax92u\_pihole/](https://www.reddit.com/r/pihole/comments/u9ecwd/asus_ax92u_pihole/)

&#x200B;

Summary: Only having a single DNS entry in ASUS firmware makes the second entry for DNS the router. Follow my procedures for the same IP to both DNS slots. Also ensure your router is on the latest firmware and you have the WAN also set to your PiHole. The last thing to ensure is that you do not ""DROP"" requests but ""BLOCK"" them. Dropping them makes the client keep retrying for a response. Blocking them tells the client no so the client stops asking.",pihole,1650733653.0
1958,comment,1,i5zdn89,,"You should leave the DNSFilter custom DNS fields #1-3 blank or empty.

You should use what ever upstream DNS servers you want on the Pi-Hole Settings > DNS page. Currently I'm using Unbound ([https://docs.pi-hole.net/guides/dns/unbound/](https://docs.pi-hole.net/guides/dns/unbound/)) so that is what I put in the Custom DNS #1 field. In the past I simply used Cloudflare's but its a personal choice on what to use for public DNS servers.",pihole,1650792800.0
1959,post,44,u9zhak,Pihole & Unbound Docker?,"Hey I'm trying to setup pihole and unbound with docker. I'm able to get the docker-compose to setup pihole [thanks to the github guide](https://github.com/pi-hole/docker-pi-hole#quick-start), but I can't find any guide from pihole's documentation on how to setup unbound via docker. I was able to find a repo for a combined container of pihole and docker [here](https://github.com/chriscrowe/docker-pihole-unbound) but my issue was that the pihole version in that container is outdated as of this post. So I'm looking to tips on how to do this.

Thanks",pihole,1650696822.0
1960,comment,4,i5v2f21,,"Maybe this helps. 
https://github.com/chriscrowe/docker-pihole-unbound/tree/main/two-container

What’s your system?",pihole,1650709836.0
1961,comment,8,i5usui5,,"I use this image

https://github.com/MatthewVance/unbound-docker",pihole,1650701485.0
1962,comment,3,i5w4ng5,,">	I can’t find any guide from pihole’s documentation on how to setup unbound via docker.

We don't have one. You will need to find a Docker unbound image.",pihole,1650730441.0
1963,comment,2,i5vk5a3,,You could get Wirehole and not use the VPN part if docker-compose is good for you.  https://github.com/IAmStoxe/wirehole,pihole,1650721035.0
1964,comment,2,i5vugqb,,"I use 2 containers on a Pi4, the official pihole and mvance/unbound-rpi. They both work fine. Once both containers are running, then you need to point the pihole upstream server to the internal ip address of unbound container.  
mvance has 2 docker images, the mvance/unbound-rpi for arm and mvance/unbound for amd64. Pls make sure that you're using the correct image for your machine.  
There's a guide on [https://hub.docker.com/r/mvance/unbound](https://hub.docker.com/r/mvance/unbound)",pihole,1650725942.0
1965,comment,2,i6es95y,,"Here's my `docker-compose.yml` for Pihole + Unbound in a two container Docker configuration on an amd64 host (running Debian):

	# based on https://www.xfelix.com/2020/09/pihole-unbound-docker-setup-on-raspberry-pi/
	version: '3'
	
	networks:
	  dns_net:
	    driver: bridge
	    ipam:
	        config:
	        - subnet: 172.20.0.0/16
	
	services:
	  pihole:
	    container_name: pihole
	    hostname: pihole
	    image: pihole/pihole:latest
	    networks:
	      dns_net:
	        ipv4_address: 172.20.0.6
	    ports:
	    - ""yy.yy.yy.yy:53:53/tcp""
	    - ""yy.yy.yy.yy:53:53/udp""
	    # we can't just do '53:53/tcp' and '53:53/udp' because of libvirt's dnsmasq  
	    - ""80:80/tcp""
	    - ""443:443/tcp""
	    environment:
	    - 'TZ=America/New_York'
	    - 'WEBPASSWORD=xxxxxxxx
	    - 'DNS1=172.20.0.7#5053'
	    - 'DNS2=no'
	    - 'ServerIP=yy.yy.yy.yy'
	    volumes:
	    - '/root/docker/dns_net/pihole/etc-pihole/:/etc/pihole/'
	    - '/root/docker/dns_net/pihole/etc-dnsmasq.d/:/etc/dnsmasq.d/'
	    restart: unless-stopped
	    cap_add:
	      - NET_ADMIN
	  unbound:
	    container_name: unbound
	    image: mvance/unbound:latest
	    networks:
	      dns_net:
	        ipv4_address: 172.20.0.7
	    volumes:
	    - /root/docker/dns_net/unbound/:/opt/unbound/etc/unbound/
	    ports:
	    - ""5053:5053/tcp""
	    - ""5053:5053/udp""
	    healthcheck:
	      disable: true
	    restart: unless-stopped
	
(The `volumes` stanzas map various configuration files of Pihole and Unbound to the host filesystem. `xxxxxxxx` is a random password; `yy.yy.yy.yy` is the LAN IP address of the host system. I'm happy to provide further clarification.)",pihole,1651072733.0
1966,comment,1,i5vjs8s,,"If you need a Docker compose file for Unbound+PiHole in two containers on Raspi64, just get in touch.",pihole,1650720845.0
1967,comment,-2,i5uxfnm,,"Uhm, create a github account;
-	Fork the combined repository, change the pihole version number and create a pull request?
-	Or create an issue to update the pihole version",pihole,1650705528.0
1968,comment,1,i5wjvck,,"Pi 4, that guide mentions using cloudflare. I thought unbound was supposed to be a recursive option?",pihole,1650737115.0
1969,comment,1,i5wkp0m,,"I'm going with this one, but I don't see instructions that are similar to the normal way of installing unbound (like the same ports). Could you please share your docker-compose or config?

https://docs.pi-hole.net/guides/dns/unbound/?h=unbound",pihole,1650737485.0
1970,comment,1,i63rb5c,,This is what I am doing but haven’t figured out how to list individual clients in pi-hole. The only client I’m seeing is wireguard.wirehole_private_network.,pihole,1650872477.0
1971,comment,1,i6ob6ku,,I would like this please.,pihole,1651245217.0
1972,comment,2,i5xgwdi,,"If you tell piHole to resolve via unbound, you can configure Cloudflare etc. as a backup. But actually, unbound resolves the DNS query.

This is a good guide to installing Docker and unbound. [https://www.xfelix.com/2020/09/pihole-unbound-docker-setup-on-raspberry-pi/](https://www.xfelix.com/2020/09/pihole-unbound-docker-setup-on-raspberry-pi/)",pihole,1650752190.0
1973,comment,2,i5wz77o,,"you don't have to expose any ports, just ensure it's on the same docker network as pihole, give it a `--name` and then tell pihole to use it as an upstream.",pihole,1650744043.0
1974,comment,2,i6xscxk,,"I have uploaded it here as text. Also a read-me. You still have to create a few folders and edit the Unbound-Config (see Readme).

https://pastebin.com/u/rddtt34/1/qvGYu17Q",pihole,1651432197.0
1975,comment,2,i6y87nj,,Thank you for this. Will take a read per your suggestion. I can already see a few things I didn’t do - create an unbound folder with config files.,pihole,1651439074.0
1976,comment,1,i6ypms0,,"This is a good start/tutorial:

https://www.xfelix.com/2020/09/pihole-unbound-docker-setup-on-raspberry-pi/",pihole,1651447028.0
1977,comment,1,i6zy2c3,,"Okay, so I've gone through the install, but when I get to this part after starting the pihole docker, I get no response:

dig www.google.com @127.0.0.1 -p 53

These I get responses for:

dig www.google.com @172.20.0.7 -p 5053  
dig www.google.com @127.0.0.1 -p 5053

dig www.google.com @172.20.0.6 -p 53

Any ideas?",pihole,1651472306.0
1978,comment,1,i70b4d3,,"Unbound and Pihole-Container are running fine?

downloaded root.hints to home/USER/unbound/ ?

wget -O root.hints [https://www.internic.net/domain/named.root](https://www.internic.net/domain/named.root)

I had some problems with the 32-bit OS, so I installed the 64 and every thing was fine.

What does piHole says\`? it s using unbound (logfile)?

The IP of the Raspi is static and the same as in the docker-compose?",pihole,1651483538.0
1979,comment,1,i70c3wq,,"You have to put the

172.20.0.7#5053 in Pihole->settings->DNS/DNS-Upstream.

172...7 is the Unbound container.",pihole,1651484407.0
1980,comment,1,i71pudp,,"OKay, I have everything setup like you said, and my RPi OS is 64 bit.

One think I have confirmed is that unbound does not run if I uncomment the root.hints line from unbound.conf.

I've run wget -O root.hints [https://www.internic.net/domain/named.root](https://www.internic.net/domain/named.root) and confirmed I have a root.hints file in my /home/pi/unbound folder. I also have the following in my docker-compose.yml file.

volumes:  
\- /home/pi/unbound:/opt/unbound/etc/unbound

Not sure how to successfully run unbound and have it use the root.hints file.",pihole,1651510243.0
1981,comment,1,i727w3b,,Ive send you a message.,pihole,1651517406.0
1982,comment,1,i7299uw,,"You can check, if unbound runs in the piholes log.

The container are running? And you've set the upstream-DNS to the unbound-Container Ip on Port 5053?

if everything is running but pihole does not connect to unbound - no internet, cause of no DNS ... Try to check the

* respond only on interface eth0

in pihole->settings->DNS

Maybe ""alllow only local requests"" does'nt work ...",pihole,1651517966.0
1983,post,3,u9zdnt,DNS Not resolving,"Hello All,

Am new here.. I just install pihole on my proxmox server and it work fine for the first day. after 24 hours i get to see i cant get on the internet again and i disable pihole as my DNS server and all work fine, going back to the Pihole i get to see some errors like  "" ignoring query from non-local network 10.x.x.x (logged only once) "" . This seems fine on my firewall. any idea what might be wrong or what am not doing right. Thanks",pihole,1650696386.0
1984,comment,1,i5usco0,,"you might want to enable ""permit all origins"" in settings/dns/interfacesettings but read the warning there first",pihole,1650701068.0
1985,comment,1,i5xls8b,,"Stupid question, but... 10.x.x.x is a legitimate address, right?  
It's weird that Pi-hole treat it as non-local",pihole,1650754466.0
1986,comment,1,i5v216n,,"Thanks, i have read this and give it a try, it works. so now i know where my problem is and i need to look more into my firewall.",pihole,1650709507.0
1987,post,14,u9vark,pi-hole detected as an Ad-Blocker,"hello, at [https://www.investing.com/](https://www.investing.com/) when begin browser it popup say 

\` **We've noticed you're using an ad blocker** 

how to disable this overlay?

thanks",pihole,1650681344.0
1988,comment,33,i5u3tul,,"It’s likely a bit of code on the page is looking to see if an ad asset was loaded. If not, you’ll get that message.",pihole,1650684049.0
1989,comment,4,i5tyyoz,,"Are you sure it’s pi Hole? Just tried and not getting the pop up, I’m also using Ublock origin on firefox",pihole,1650681541.0
1990,comment,3,i5uw4fj,,"Get that sort of adwall warning fairly often.  I am browsing on my phone so if it is something very interesting, I'll just drop the wifi and use cellular data to reload the page.

The pihole is far too valuable to me to disable it in such cases.",pihole,1650704354.0
1991,comment,3,i5tzdey,,Also install ublock and remove them,pihole,1650681748.0
1992,comment,3,i5udv6f,,Can't replicate,pihole,1650689917.0
1993,comment,2,i5uznba,,"This is going to depend on which domains you're blocking -- it's not really pihole-specific, but instead it is blocklist-specific. For example I do not get the banner when I visit the page.",pihole,1650707473.0
1994,comment,3,i5u7h8d,,"I run Pi-hole on my network and tried that investing site you linked all from this computer:

* Chrome + uBlock Origin extension.
* Firefox with no extensions at all.
* Edge with no extensions at all.

None of them showed any complaint about using an ad blocker, so /shrug.",pihole,1650686069.0
1995,comment,1,i5uc04g,,"interestingly, the site works for me (safari with no plugins)",pihole,1650688717.0
1996,comment,1,i5vvh4k,,"Using Pi-Hole, clicked on the link, no ad blocker overlay. Also using Brave browser. My theory on what is happening. If your blocklist isn't updated, one of the new domains might have made it through. your browser loaded it and modified the page to eliminate the ad. The page is written to detect this in your browser and pop up the overlay. Try updating Gravity.",pihole,1650726398.0
1997,comment,1,i5w8lzx,,I can't say for mobile devices but there are Chrome and Firefox extensions to remove overlays. It's not perfect but it does get around some of those to allow you to browse the site. Some of these overlays though look to load a brand new page so you can't actually get to any of the content of the website you intended to get to.,pihole,1650732192.0
1998,comment,1,i5xghf2,,">how to disable this overlay?

The only literal answer to your question is ""use a client-based adblocker, as it will be able to detect the overlay""",pihole,1650751995.0
1999,comment,1,i60surz,,"This looks like you need to figure out what is being blocked by PiHole when you visit this website.   

One solution would be to login to your PiHole control panel, and monitor the ""recent queries"" log page.    This will allow you to see what is happening as you browse the site.  Reload the web page causing the problems, and monitor what queries take place when you visit the site.  You may wish to filter the recent queries by client (to select the device doing the web browsing), and possibly by 'blocked' status.

You could selectively add  domains to the whitelist, and reload the site until you find what is required to allow the site to work normally.   After you find a combination which works, you may wish to prune the whitelist, to try to find the smallest combination of whitelisted domains which works for you.

[https://discourse.pi-hole.net/t/how-do-i-whitelist-or-blacklist-a-domain/244](https://discourse.pi-hole.net/t/how-do-i-whitelist-or-blacklist-a-domain/244)",pihole,1650820243.0
2000,comment,0,i5upt0a,,Brave/Android and PiHole has no popup here,pihole,1650698930.0
2001,comment,18,i5u0kpb,,">	I’m also using Ublock origin on firefox

UBO can inspect the html and defeat some a blocker detection. Pi-hole cannot.",pihole,1650682349.0
2002,comment,1,i5u2dqt,,"Yup,if disable pihole and warning no popup.",pihole,1650683278.0
2003,comment,1,i5wnek2,,Reader view is a good workaround too when available.,pihole,1650738675.0
2004,comment,3,i5wq4uz,,Ublock Origin,pihole,1650739893.0
2005,comment,1,i5urscy,,I use Pi-hole and my Android phone using Chrome appeared OK initially but the third page I drilled down into gave me the popup the OP refers to.,pihole,1650700587.0
2006,comment,1,i5wq72k,,Brave is a shit company and Brave browser is spyware,pihole,1650739920.0
2007,comment,5,i5v6ibj,,"And UBO will let you block the javascript from running, which makes some newspaper sites usable.",pihole,1650713038.0
2008,comment,2,i5ukq2o,,Was able to visit the site without issues using default repo with Pi-hole.,pihole,1650694902.0
2009,comment,1,i6jjkyn,,Source?,pihole,1651158851.0
2010,post,1,u9spnz,"Pi-Hole, Ubuntu 22.04, and LightTPD","It looks like Ubuntu 22.04 comes with an updated config file for lighttpd. If you accept the new config file, you'll lose necessary Pi-Hole configuration and may experience an issue starting the lighttpd daemon. 

While Ubuntu 22.04 is not officially supported yet, I was able to run 

    sudo PIHOLE_SKIP_OS_CHECK=true pihole -up

to perform an update which fixed the lighttpd config file and restored functionality of the Pi-Hole admin page. This might have only been possible because I hadn't installed this week's update yet. If you can't use the update command above, a Pi-Hole might solve the issue (although I can't confirm).",pihole,1650673030.0
2011,comment,1,i5tislp,,I had this issue too. Had to go in and reset my custom port for the admin page as I use nginx as my proxy.,pihole,1650673746.0
2012,comment,1,i5wva6y,,"I keep my ""Pi-Hole"" on a Pi.  Actually a 3A+. It runs the CPU at 0-2% Memory around 20%, swap at 100, that's what swap is for.  Fewer ways for FUBAR, IMHO.  I tried a ZW but that was too much for it. I'm playing with a ZW\_2 it is essentially a 3b+ only smaller, less power load.",pihole,1650742246.0
2013,comment,2,i5tq9gv,,"> Had to go in and reset my custom port for the admin page as I use nginx as my proxy.

You won't have to do this if you make the port change in the external.conf file for lighttpd.",pihole,1650677308.0
2014,comment,1,i5xltkw,,"My primary Pi-Hole install is on a Pi 3B+, but I run a secondary install on my Ubuntu server in case there's any issues with the primary one. I can't afford to upset the wife if she can't reach the internet because the ""internet breaker"" is acting up.",pihole,1650754484.0
2015,comment,2,i5tqqbi,,Thanks for that tip. Just made that change :),pihole,1650677528.0
2016,comment,1,i61e2ul,,"I had to set up BGP for an employer for the same issue.  You should always blame the ISP...

my pihole logs showed this morning the router got stupid at 0100, I rebooted it at 1400, ""alles es im orgnun""",pihole,1650828990.0
2017,comment,1,i5trh99,,"Here is the link for any interested readers.  The previous commenter did not post it:

https://discourse.pi-hole.net/t/lighttpd-daemon-wont-start/44985/10",pihole,1650677880.0
2018,post,40,u9rbph,What's the best way to monitor pihole uptime?,"The situation I'm trying to avoid is where pihole A goes down and I don't realise because pihole B seamlessly handles the traffic. Then one day I deliberately take down pihole B for whatever reason, thinking pihole A is running but it's not and hasn't been for days or weeks, and all hell breaks loose in the house because no DNS effectively means no internet. 

I know about services like uptime kuma and healthchecks.io but I think they both expect something to be pinging them, rather than them pinging the piholes. In my mind the ideal would be for something to periodically try to resolve google.com against each of the piholes and integrate with a messaging service to notify failures.

I'll write my own if nothing exists, but no point reinventing the wheel if something is already out there.

EDIT: Seems like I was wrong about Uptime Kuma, it can do exactly this.",pihole,1650668770.0
2019,comment,63,i5tatjd,,Maybe I just play on the edge but I have 1 pihole running and no outages in almost 3 years.,pihole,1650670021.0
2020,comment,5,i5tqdjl,,I use uptime kuma to resolve google.com every 15 seconds instead of of pinging the host itself.,pihole,1650677361.0
2021,comment,12,i5tdhc6,,Uptime Kuma?,pihole,1650671263.0
2022,comment,4,i5tm6mu,,"You can ping each other pihole with watchdog. When there is no response the watchdog can send an eMail to an specified adress.  
And the watchdog can monitor the device it is running on. when the pihole service failes it can alert you also, via mail.

[https://linux.die.net/man/8/watchdog](https://linux.die.net/man/8/watchdog)",pihole,1650675349.0
2023,comment,4,i5uvmke,,Zabbix? Monitor DNS and do a lookup for a record or three every minute or 5.,pihole,1650703905.0
2024,comment,5,i5tipvr,,"Why not a simple script that does a DNS lookup on each Pi-Hole and returns an error if one or more are down?

Either dig or nmap should work in the script. If you want to automate it use a crontab entry and have it send you an e-mail if it sees an error.

Something similar should work if you are using Winodws.",pihole,1650673710.0
2025,comment,4,i5tvxmd,,"I think the easiest solution, if you have a Windows machine that's on all the time, is PRTG. It installs in a couple of minutes.

[https://www.paessler.com/dns-monitoring](https://www.paessler.com/dns-monitoring)

Use the free version with the limit of 100 sensors and watch a lot more than DNS. You can configure it to email or text you when pihole goes down. Also, watch 99 other things on your network.",pihole,1650680055.0
2026,comment,2,i5teaeo,,PADD?,pihole,1650671645.0
2027,comment,2,i5ujyxl,,"This is definitely overkill, but it you already happen to be doing other monitoring of self hosted things there is a great Prometheus exporter for Pihole: https://github.com/eko/pihole-exporter.

I was already using Prometheus / Grafana / Alertmanager to monitor other things, so this was a drop-in solution to exactly the problem you describe.",pihole,1650694329.0
2028,comment,2,i5v8h4p,,"Sometimes my Raspberry Pi Zero W would lock up and be unresponsive, which I wouldn't know unless I went looking, so I set up Watchdog: https://diode.io/raspberry%20pi/running-forever-with-the-raspberry-pi-hardware-watchdog-20202/

Since doing that probably 18 months ago, I've never been unable to access it, and it restarts fast enough that it doesn't trigger healthchecks.io

Both are fairly quick and dirty solutions but it does the job.",pihole,1650714391.0
2029,comment,1,i5t9xkj,,"Have each pihole ping the other every 15 minutes, and alert you if there's no response. That'll take care of power loss or if it's gone unresponsive due to a kernel panic, or even a network problem between the two devices.

Otherwise, if it's just the pihole service that's gone unresponsive, you could use the watchdog timer. I think someone else mentioned this a few months ago - maybe search this sub for ""watchdog"".",pihole,1650669612.0
2030,comment,1,i5ubylw,,"Overkill solution: To monitor the DNS servers on the large network of my employer, I use Xymon to make test queries every minute. Works quite well in addition to the many other system checks it is doing.",pihole,1650688690.0
2031,comment,1,i5v1tjr,,It's overkill but I've been using Nagios core to keep tabs on things including the piholes on my network. It's a bit complicated to set up but you've only got to get it right once.,pihole,1650709327.0
2032,comment,1,i5v5npx,,"I'd find out why it is going down.  I have had various RPIs running, doing various jobs, 24/7 for years and they never crash, ever.",pihole,1650712410.0
2033,comment,4,i5u9nlp,,"Same here ever since first pihole first came out. Zero issues

Sandisk extreme cards

Ups power",pihole,1650687318.0
2034,comment,14,i5tcfv1,,"Yeah no kidding.  I agree.  Plus if it did go down, with the plethora of ads showing up again, pretty much a dead giveaway.",pihole,1650670776.0
2035,comment,2,i5ug89p,,"Well I don't have an UPS so mine hasn't been running continuously, but other than power outages or server updates/reboots (the whole Ubuntu, not just pihole), I have had no issues with pihole uptime. It's truly a set-it-and-forget-it kinda thing for me.",pihole,1650691545.0
2036,comment,2,i5uma31,,"Upvote for your pihole's reliability! Sadly mine as a VM has locked up on me on multiple occasions over the last year, CPU hits 100% and it's toast until I restart it. May consider moving it physical if it happens again.",pihole,1650696092.0
2037,comment,1,i5uvbx7,,"I have 3, but as a docker on my pis. 
Had 2 downtimes in the last 3 months or so, due to the container having issues after an update.
Even though I don't update them (Automatically) on the same days, I haven't noticed the fist one gone so after a couple of days internet down.
So yeah there are scenarios where that might happen ^^",pihole,1650703641.0
2038,comment,0,i5usz2z,,That's how I do it.  I set the Pi Hole as primary DNS and google as secondary.  The only time mine has ever gone down is when I've physically shut it down but if it did go down google would take over and I'd see ads but I would know something isn't working.,pihole,1650701595.0
2039,comment,1,i5v488e,,"I think that would only work if there was only 1 pihole. However, doesn't uptime Kuma also have a slack notification feature?",pihole,1650711313.0
2040,comment,3,i5v1lql,,"This. Uptime Kuma supports DNS looks up, not just pinging!",pihole,1650709146.0
2041,comment,1,i5uno26,,"So much this. Easy to setup and configure, actively being developed, and alerting options are plentiful.",pihole,1650697201.0
2042,comment,4,i5ue6mz,,"I use Watchdog too, but I ping the switch it is connected to.  if the switch is offline for more than 360s, I restart the Pi.  Works well, especially on the Pi Zero which always locks up.

why 360s and not 15s?  I want to prevent the Pi from restarting if I restart the switch, which has a max boot time if 300s.  otherwise you can cause a restart domino effect between devices.",pihole,1650690130.0
2043,comment,2,i5uhegc,,"\+1 for PRTG. For Pi-hole, I have a custom script which runs a DNS query on a blocked domain, and if the output is not [0.0.0.0](https://0.0.0.0) (hence not blocked), it issues an alarm.",pihole,1650692402.0
2044,comment,4,i5tc8jz,,">	Have each pihole ping the other every 15 minutes

This does not verify that the target of the ping is able to resolve DNS queries. It simply checks connectivity.  Connectivity could be fine, but the target may not have a functioning DNS server.",pihole,1650670682.0
2045,comment,15,i5u86lx,,If mine goes down there is no DNS happening.  I have 2...,pihole,1650686470.0
2046,comment,5,i5ujn6b,,"If it did go down, no website would resolve so it would be as if no internet… you’ll know it’s down then.",pihole,1650694076.0
2047,comment,3,i5v8lt5,,"Your pc can use Google anytime it wants, still not best practices for ad blocking.",pihole,1650714478.0
2048,comment,1,i6ewfxy,,you're allowing the pc to circumvent the phiole by including google as secondary dns. secondary does not mean backup. either can be used at any time,pihole,1651074351.0
2049,comment,3,i5v884g,,"If you have multiple piholes like I do then all you need to do is double the config, one for each. 
Yes they have slack notifications, I don’t use that though. 

https://github.com/louislam/uptime-kuma",pihole,1650714224.0
2050,comment,1,i5vghbg,,Yeah looks like Uptime Kuma does the job.,pihole,1650719109.0
2051,comment,1,i5xp8t9,,"Oh, it does. Thank you!",pihole,1650756073.0
2052,comment,2,i5uik76,,Nice. I like that. I'm a big fan of the custom sensors. I wrote a Powershell custom sensor that scrapes a webpage for covid cases in my county so I can track it over time.,pihole,1650693261.0
2053,comment,2,i5tky6s,,"How about:

from pi #1

systemctl --host *{pi #2}* status pihole-FTL.service

and vice versa",pihole,1650674767.0
2054,comment,4,i5ub0yz,,"I also had only 1 for the longest time, like 5 years? Recently got a server for homelab and created a VM for a second instance.",pihole,1650688126.0
2055,comment,1,i5vyxps,,"Mine froze for some reason this past week and left me with no DNS. Could not tell at first if the whole internet was down or the router, which is new.

Nope. Just needed to reboot the pihole.

The weirdness of the outage just threw me. But otherwise just a mundane thing.",pihole,1650727921.0
2056,comment,1,i5vdxts,,Can't it technically do that anyways? I am also assigning the DNS server at the router level so the DNS server address the devices are using is the router ip and then it routes the requests to the DNS server.,pihole,1650717745.0
2057,comment,1,i6fvh0u,,I guess so.  on my pc I have pi hole as my primary and the router Ip as secondary and then on the router I have pihole as primary and google as secondary with ISP as tertiary.  I haven't had an instance yet where it got around pihole unless I turned it off but I'm currently rebuilding my network so maybe I'll just make a secondary pihole instance on my unraid server for it to point to incase my RPI drops.,pihole,1651088110.0
2058,comment,3,i5tneox,,"This might be easier and give an answer that is easier to parse.  If the output is ***0.0.0.0***, the Pi-hole at that IP is operational and blocking.  If not, the other Pi-hole is not working properly.

`dig +short flurry.com @IP-of-the-other-Pi-hole`",pihole,1650675934.0
2059,comment,1,i5vezof,,"You are telling it it can use Google. It will only use what you are telling it to.

With caveats,. Like chromecast will try and use Google no matter what you tell it to.",pihole,1650718322.0
2060,comment,0,i5ws273,,"I have pihole as the primary, google as the secondary and my isp as the tertiary.  Basically if something goes down while I'm not at home or while I'm working I don't want my family to be without internet until I fix it. I'm rebuilding my networking and upgrading it right now so I may ad another pihole instance on to it either with another raspberry pi or a vm on my unraid server but my current setup hasn't failed me yet.",pihole,1650740755.0
2061,comment,1,i5wvmrb,,"There is no such thing as secondary, when you list a second dns server the clients / router is just going to allocate requests between them all.",pihole,1650742410.0
2062,comment,1,i5wvx04,,Hmm interesting. I haven't seen that happen personally but maybe I'll try and do some stress tests to see if I can get it to do it.,pihole,1650742542.0
2063,comment,1,i5wwtzc,,I might be wrong but I thought I had seen literature recently stating that the common belief secondary is only used when the first one fails is wrong. But now I can’t find it. I guess if you’re really trying to prevent hitting outside DNS you never want to list a secondary but I could be wrong about the load balancing thing.,pihole,1650742964.0
2064,post,0,u9l7n4,"Adguard Home's ""Stealth Mode"" on Pihole","Hi! I'm looking at using either Adguard Home or Pihole and something about Adguard really stood out to me and that was it's ""Stealth Mode"" which can do many cool things such as modify URLs to strip tracking parameters, send a Do Not Track (DNT) request to the site, and can remove x-client-data headers from HTTP requests. Can Pihole also do these things? Thanks!",pihole,1650651875.0
2065,comment,4,i5si6d3,,"This is not a feature of adguard home, but of their mobile apps, desktop software and browser plugins. AGH is just a ""Network-wide ads & trackers blocking DNS server""",pihole,1650657468.0
2066,comment,3,i5sd5ls,,"As a DNS sinkhole, no. But it doesn't look like Adguard Home can either. Adguard browser plugins maybe!?",pihole,1650655428.0
2067,comment,1,i5s9oqy,,Nope.,pihole,1650654019.0
2068,comment,1,i5vjy99,,I think you would need a web proxy like Dan's Guardian for this. I use it at my home to filter my kids' internet traffic and rewrite URLs to force them to use safesearch on Google.,pihole,1650720932.0
2069,comment,1,i5sebbw,,Seems to he a native feature. Here's the link to the adguard site page for it https://kb.adguard.com/en/general/stealth-mode,pihole,1650655903.0
2070,comment,1,i5sg5dr,,"It doesn't say how. Can't change a HTTP header via DNS but you can with a proxy or OS or browser plugin. So something actually in-line. And PiHole isn't in-line like that, it's just answering DNS queries (or optionally doing DHCP too.)",pihole,1650656654.0
2071,post,0,u9iajj,"For the love of god, how do I remove specific devices from the network table? It keeps coming back.","If I delete a device from the network table by clicking on the trash icon, or just flushing the network table, old devices with 0 queries STILL come back. How do i get these the hell off the network table? These are devices that last connected like 2 weeks ago but wont go away. If it helps, my ftl is set to only keep 24 hours of logs.

For example, this happens with friends cell phone IPs too. Say they come over and connect to wifi. I have the stupid IP stuck in that table when they leave. It takes like a month to finally go away, even if i flush the table and/or click the trash icon (which seems to not work). It just comes right back..",pihole,1650643945.0
2072,comment,2,i5rtd50,,"The Pi-hole network table is populated from the neigh table on the host OS.  When you delete the device from the network table, that doesn't clear the neigh table.  When the neigh data reloads, the device re-appears.

Run the following to see what's in the neigh table:

`ip neigh`",pihole,1650647562.0
2073,comment,-1,i5rm47s,,"I guess deleting means you delete the lease, not blocking the device (which wouldn‘t be a block, just a don‘t give this guy an IP).",pihole,1650644779.0
2074,comment,0,i5wt380,,"First please define  ""neigh"" .  It isn't a common word in US English; unless we're making ""horse sounds"".   That's #1

Then you should segment your SSIDs to have a GUEST profile.  Then they can't get to internal server services in your local network.

There is probably a setting in your router to clear its own ARP and DNS cache.  This is why every 30 days ""the offensive"" items go away.  If dhcp is from your router, check the lease time.  Push it up to 24 hours (it is a reasonable setting) or do the same on your pi-hole.  Settings, DHCP is where you change it there.

It is a problem-solving experience.  That's why I've been a System & Network Engineer for 30 years.  Settings can be coming from multiple places ""it is a network"" You might have the DHCP service running on a Win system, Mac system, or Linux system.

My Win11 machine is waiting for a new CPU fan and a  new battery. I don't think it is supposed to be ""puffy"".  I use Chromebooks, and Pi's 400, 4b-8GB, 4b-4GB, 3A+ (my pihole is one)  3B+ 3B 2B+ 2B (not to be) Piw-2, piw-1.3, I have dozens of pizw's.  I have the B+ and the original release 1st 5000 - B.

I don't have a VAX or an Alpha, Apollo, Solaris, - workstations, even Warp but I've used them extensively.  Yea and batch 3090, TSO on a 3090, IBM AIX workstation.  It's all what you know, and where to go.  I'm not really into God either.",pihole,1650741233.0
2075,comment,1,i60r4pg,,"I had another question. I use my router as the dhcp, however it still shows the individual IPs in pihole, which is great. I thought I read that it only shows individual device IPs if you set pihole to do the dhcp. I was just curious as to why it works fine for me when the router is the one doing the dhcp.",pihole,1650819543.0
2076,comment,0,i5ru713,,"I followed these directions from this thread but those pesky old devices still survive somehow. 

https://www.reddit.com/r/pihole/comments/d534by/how_do_i_clear_the_network_overview_entries/",pihole,1650647885.0
2077,comment,-3,i5rmend,,"I don't need to block it. I just don't understand what the stupid trash icon is for, if it doesn't do shit. This device is an old device that i disconnected from my network. Why the hell does it keep getting stuck in the network table? That's my issue. It's not making any new queries and it's not even online. This happens with friends cell phone IPs too. Say they come over and connect to wifi. I have the stupid IP stuck in that table when they leave. It takes like a month to finally go away.",pihole,1650644888.0
2078,comment,2,i61tuno,,">I thought I read that it only shows individual device IPs if you set pihole to do the dhcp.

Not in all cases.  It depends on the router.

>I was just curious as to why it works fine for me when the router is the one doing the dhcp.

Your router doesn't route the DNS queries through itself.",pihole,1650835681.0
2079,comment,-4,i5rtqnr,,Why do you care? I almost never look into the table of leases.,pihole,1650647708.0
2080,comment,1,i6240e4,,Ok thanks. Makes sense. I'm glad it works for me.,pihole,1650840171.0
2081,comment,1,i5rtz1y,,"I mean you may not care, but I do. i watch all pihole stats closely and I'd just prefer a clean table. What's wrong with that?",pihole,1650647798.0
2082,comment,-3,i5ru7ur,,"You get upset for no reason. You decide if this is wrong or right.

After the fact explanation: OP asks „what‘s wrong with that [watching status info which doesn‘t mean a lot]“. — I answer: „You get upset [by watching these tables]. You decide [if getting upset for no reason] is wrong or right“. — OP gets dirty / post was deleted by mod. — Why does OP lose ground?",pihole,1650647894.0
2083,comment,0,i5rueit,,? What are you talking about? Why are you being mean? Did my question offend you?,pihole,1650647966.0
2084,comment,-4,i5s4q82,,[removed],pihole,1650652008.0
2085,comment,3,i5stv3k,,Removed as a violation of rule 5 - always be civil.  Please review this rule prior to further posting.,pihole,1650662407.0
2086,post,5,u9fkdl,Correct way to add FQDN DNS Records,"Hey!

&#x200B;

I am starting to add some records to my pihole and I am wondering. Is it possible to add one entry per host and resolved for both hostname + FQDN ?  


Adding entry to pihole:

router -> [192.168.1.1](https://192.168.1.1)

\---

nslookup router ==> router

In order to be resolved also as router.home do I need to add additional entry?

router.home -> [192.168.1.1](https://192.168.1.1)

&#x200B;

Thanks",pihole,1650636555.0
2087,comment,3,i5r4pfm,,"You should add the host and domain as an entry in pihole:

[router.mydomain.net](https://router.mydomain.net) \> [192.168.1.1](https://192.168.1.1)

If you don’t already have a domain, then there are some rules as to what you should use internally so it won’t conflict with external. I use an unregistered subdomain of my registered personal domain. You should do a little research for a good choice if you don’t have a registered domain.

You can also add a ”search domain” that should add host names to the domain and resolve an IP. I am fairly sure that is the optional entry at the bottom of DNS settings.",pihole,1650637937.0
2088,comment,2,i5sy6z8,,"My `/etc/hosts` file looks like this:

    127.0.0.1       localhost
    ::1             localhost ip6-localhost ip6-loopback
    ff02::1         ip6-allnodes
    ff02::2         ip6-allrouters
    
    127.0.1.1       HackPi.[xxxxx]Home
    192.168.10.4    RPiNAS.[xxxxx]Home
    192.168.10.20   Hacker3.[xxxxx]Home
    192.168.10.30   Hacker2-10.[xxxxx]Home

There are other hosts that I should add to that list, but this has served me well. Means I can either go to `http://192.168.10.2/admin` *or* `http://hackpi.[xxxxx]home/admin` to access the PiHole admin portal. If I use the LAN IP, I don't get Firefox getting mad at me about insecure connections, but I do if I use the FQDN. *C'est la vie*! 

Also means that I can SSH into HackPi (PiHole) or RPiNAS (my mini NAS/Ubuntu server I play around with) by using the FQDN, which is fun when I'm showing off to people (plus I don't have to remember LAN IPs, which isn't a major advantage, but hey).

Hope you're able to take this and what /u/Chiliadkhilat said and get yourself all situated how you like!",pihole,1650664308.0
2089,post,5,u9ecwd,ASUS AX92U & PiHole,"So after looking through the internet I found a few topics that talk about ASUS routers using PiHole.

I have been having this problem, PiHole (Pi 4 8GB) has one ethernet port so only one IP. ASUS has two spaces for DNS on the LAN side and one space on the WAN side.

The problem is that ASUS codes their firmware to recognize if DNS2 is a duplicate of DNS1 and then ignores it if it is. This presents a problem, the router gateway by default then becomes the second DNS entry for your network devices.

So when you view your PiHole query log a lot of your entries show coming from the router and not the client.

However, I have found two potential options to bring up the success from 60% to 95%.

First, you need to understand that the router itself pings a specific web address on a timer to ensure the router is connected to the internet. If you stop this the whole router goes offline because it thinks it is. This option can be changed through the SSH command line to whichever website you wish. I changed it from [ASUS.com](https://ASUS.com) to dns.opendns.com which is who I use as my upstream DNS.

To do that do the following commands:

**nvram set dns\_probe\_host=""WEB\_ADDRESS""** (This cannot be an IP.)

**nvram commit**

**service restart\_dnsmasq**

So for the two ways to combat the router reporting as the client.

Create a second virtual ethernet port on the PiHole and then you have two distinct addresses for DNS or use CLI through SSH to force the second DNS entry.

I felt the first choice was more work than its worth so I chose the second. Here are the NVRAM commands to adjust your second DNS manually.

&#x200B;

This will show you all variables in NVRAM with DHCP in the name:   **nvram show | grep dhcp**

These are the entries we are concerned with:

**dhcp\_dns1\_x=**[**192.168.**](https://192.168.50.219)**XXX.XXX**

**dhcp\_dns2\_x=**[**192.168.**](https://192.168.50.219)**XXX.XXX**

If you are using just the PiHole IP in your LAN DNS entries and nothing in DNS2 or the same IP in DNS2 you will not have the second NVRAM entry ""dns2.""

Do the following commands in order through SSH CLI to manually force the same DNS IP.

**nvram set dhcp\_dns2\_x=""PiHole\_IP\_HERE""**

**nvram commit**

**service restart\_dnsmasq**

Run the command: **nvram show | grep dhcp** again to check for dns 1 & 2 is the same now.

To test run **ipconfig / realease** on your windows Powershell or CMD interface and then **ipconfig /renew**.

You should now see two DNS server IPs are exactly the same.

As a warning, I would not mess with too much in the SSH CLI unless you know what you are doing. A 1 and an L look EXACTLY the same in SSH.

After doing this you will see FAR fewer router entries in the query log but keep in mind you might have to reboot the router or wait for lease renewal for this to filter down to some devices.'

Some of you might say to use the PiHole as the primary DHCP to combat this but that is not something I want to do for multiple reasons.

Please also refrain from commenting about purchasing different hardware. I have a hard time putting a perfectly working $300USD router in a box and spending money on another one, which would be a pfsense if I had a choice. This post is intended to help those who wish to have a better-configured network with what they already are using.

&#x200B;

**UPDATE 4/23/2022 12:03PM :**

I did not put this information in my original post.

 **ASUS Firmware** **Version 3.0.0.4.386.46061 Release Date:2022/01/2**

After monitoring the logs it seems that this fix has been 99% effective and has reduced the number of repeated requests and overall load on the PiHole. Of 68 devices I have only one still using the router as a DNS server and that's my sprinkler system. I'm assuming once the lease runs out that it too will stop using the router as DNS. Rainbirds software doesn't even list DNS servers as an option to change in their application.

Thank you all for the constructive input and other ideas to mitigate this issue with the PiHole query log! I know it's not a huge issue but there have been posts since late 2018 of this issue with using ASUS stock firmware with PiHole and I wanted to post my solution for others to help them too.

&#x200B;",pihole,1650633121.0
2090,comment,5,i5rge1t,,"So first, this question is probably better addressed in a Asus subreddit, or on snbforums :)

Second, you could simply turn off DHCP on the AX92 and run DHCP on the pihole.

Third, you could just 'cheat' and put a non-existent IP in the 2nd slot, but the problem is that on stock Asus firmware, the router will advertise it's IP as a DNS server and the setting is hidden.  (I don't recall if you can turn it off somewhere via nvram settings as I run Merlin, which of unfortunately the AX92 does not support.)

Good luck!",pihole,1650642571.0
2091,comment,2,i5rpx65,,Problem u also have is devices can bypass your dns settings.  Merlin can prevent this if you are not already using.,pihole,1650646233.0
2092,comment,2,i5ul0y6,,">The problem is that ASUS codes their firmware to recognize if DNS2 is a duplicate of DNS1 and then ignores it if it is.

Why not enter an unused IP from your LAN range in the DNS2 spot?",pihole,1650695125.0
2093,comment,1,i5r81ok,,Is your wan ip your pihole?,pihole,1650639290.0
2094,comment,-6,i5rkdkh,,"None of this was a question and no you cannot disable router advertisement like you can on IPV6.

You didn't read the entire post and made the exact comments that show you don't quite understand this post.",pihole,1650644111.0
2095,comment,0,i5rrtzk,,"I can install Merlin but I would lose my Wifi 6 AX band. I actually created DNS rules on the PiHole and in CLI on the ASUS to prevent any port 53 requests from any device other than the PiHole. Then I researched the IPs and names of the top 20 DNS servers and added them to the do not forward, block, drop lists.

Merlin makes all this easier but nothing to stop you from CLI programming the same rules on ASUS. ASUS CLI is extremely similar to Cisco. If I didn't know better I'd say they built it off Linux and modeled it after Cisco. ASUS has an amazing capability but subpar implementation and interfaces for advanced users.",pihole,1650646968.0
2096,comment,1,i5vjys9,,"That's an interesting suggestion but that would make a mess of the logs and not to mention if a lease expires and takes that IP.

I would also wonder what effect on the network it would have constantly reaching out to something that doesn't exist.",pihole,1650720939.0
2097,comment,0,i5rkg3x,,Yes but that does not change the fact that the router shows as a client in the PiHole query list.,pihole,1650644139.0
2098,comment,1,i5rt59i,,Again just curious.  Lose wifi6?  I have 88u,pihole,1650647478.0
2099,comment,2,i5w4bno,,">	that would make a mess of the logs and not to mention if a lease expires and takes that IP.

How would it make a mess of the logs?  There is no DNS server at DNS2; it's just a place holder. 

Pick an IP outside your DHCP range and a client will never get assigned this IP. 

>	I would also wonder what effect on the network it would have constantly reaching out to something that doesn’t exist.

None. Since there is no DNS server there, DNS 1 will be used exclusively.",pihole,1650730296.0
2100,comment,1,i5rpmxe,,Was just curious.  A few updates ago they changed how the firmware worked.  You use to not be able to have the lan and wan be the same.  I have been hesitant to change anything.  Last time it broke my internet connection.,pihole,1650646126.0
2101,comment,-1,i5rtos8,,"The speeds of AX are impressive over 802.1AC. If you have multiple of these routers that will become the backhaul channel. Since I only need one to cover my home I use the Wifi 6 as a separate 1Gigabit capable wifi network AP.

Speeds of AX are impressive over 802.1AC.",pihole,1650647687.0
2102,comment,1,i5wctgg,,"**How would it make a mess of the logs? There is no DNS server at DNS2; it's just a place holder.**

The client logs are what I'm referring to here. However there still will be mention in the router logs of looking for that IP.

**None. Since there is no DNS server there, DNS 1 will be used exclusively.**

Resources and time if even milliseconds will be allocated to ask and wait for a response. It's overall not a good idea from a coding and networking efficiency standpoint. Traffic will then go from the client through the router, to nothing. TTL will come into play.",pihole,1650734018.0
2103,comment,1,i5rrzpq,,"Yes, they did change the firmware and you now can have both without issue on the latest firmware.

Essentially LAN DNS and WAN DNS I am wanting to be the same because I'm a home network. For an enterprise situation, these will probably be different IPs for at the very least logging purposes.

Most devices log up to two DNS entries. Some IoT devices log none and blast the gateway 24/7. If you don't fill in both entries and don't have a way of turning router advertisement off IPV4 then the router/gateway becomes the second DNS entry.",pihole,1650647029.0
2104,comment,1,i5we9gu,,"

>	Resources and time if even milliseconds will be allocated to ask and wait for a response

This is unnoticeable to any user.

>	TTL will come into play.

No. TTL is the duration for caching that is returned with a DNS reply. No reply, no TTL. 

You seem to have chosen a complicated way to solve a simple problem.",pihole,1650734653.0
2105,post,0,u9ctab,Can't connect to OpenVPN after 2nd day in hospital,"I have set up a Raspberry Pi with Pihole and OpenVPN to block ads and tunnel my traffic while being at a hospital.
Since yesterday I fail to connect via OVPN though, it worked just fine before that.
Is there any way I can reboot my Pi from the hospital to see if it fixes my issue? Haven't opened any other ports except for the one needed for OVPN, also I do have a SSH client handy but I'm not sure if I can establish a SSH connection from here...",pihole,1650628316.0
2106,comment,3,i5ql8r8,,"you're most likely shit out of luck... i'd look at renting a vps by the hour from linode, digitalocean or hetzner and setting up a temp solution, works out to like $0.18/day.",pihole,1650628740.0
2107,comment,-2,i5s8jlu,,"If you can't remotely manage your pihole, just search for ""public pihole"" and use one of these public pihole services... might not as private as your own pihole, but better than nothing.",pihole,1650653559.0
2108,comment,-1,i5ri0pr,,Probably your dynamic ip changed that’s why you can’t connect,pihole,1650643198.0
2109,comment,1,i5rbflo,,Damn that sucks... Thanks for the advice,pihole,1650640649.0
2110,comment,2,i5u3r67,,This is a terrible idea. You never know what data you are giving them when you connect.,pihole,1650684011.0
2111,comment,1,i5slkv5,,"Ah, didn't knew that was a thing. Thanks!",pihole,1650658863.0
2112,comment,-1,i5rosu1,,"Ah, so I should create a new .ovpn file for every new IP change?",pihole,1650645806.0
2113,comment,3,i5rx9dc,,A much better solution would be having dynamic dns and use that instead of your IP address. Can’t you edit your openvpn file and change the ip there?,pihole,1650649074.0
2114,comment,1,i5slhz4,,"I think I could do that in theory, but I wouldn't know the new IP address. Also, wouldn't it be true that if I'd modify the file, it would not get accepted from the server?",pihole,1650658830.0
2115,comment,1,i5sn30y,,"You won’t need to know the ip address. It’s dynamic dns. I signed up at freedns.afraid.org and go the domain [name].mooo.com. Setup my router to use the freedns service and every time my router changes it’s wan ip, it updates [name].mooo.com. So in my opvn profile, instead of putting my current i address, I put [name].mooo.com.

I think if you only modify where it connects to or the username/password, not the certificates you will be good. Just to be sure, you have to create a new one, but this time try to use dynamic dns",pihole,1650659489.0
2116,post,0,u9canj,Does Pihole work with read-only for SD card?,"If I do not want to log anything or keep a database, and my only purpose is to block domains and let pihole act as a DHCP server, can I set my SD card to read only after installation?

An extra addition to this, does anyone know if this also applies to PiVPN (if I've already connected the users that I need).

Thanks.",pihole,1650626441.0
2117,comment,7,i5qj055,,"check out dietpi, it's a minified debian distro that keeps temp & log files in ram to avoid writing to the SD card.
 
https://dietpi.com/",pihole,1650627402.0
2118,comment,1,i5qj11q,,"Blocking and updating of your Blocklists uses the gravity database, so I would think no.",pihole,1650627418.0
2119,comment,1,i5qn2ei,,"PiHole is not a dumb, *""plug & play then forget""* system. You will need to do updates and depending on the OS you use to house PiHole, you will need to do updates on that, too. If you want just a dumb adblocker, there are hundreds of them on the internet that attach to your browser.",pihole,1650629765.0
2120,comment,1,i5qth15,,Do you want to extand the life of your SD card? Use overlay file system for that. Pihole might work but the OS might not.,pihole,1650633024.0
2121,comment,1,i5qws0l,,"Interesting, I’ll check it out!",pihole,1650634547.0
2122,comment,1,i5uax7d,,This.  I'm using it for 2+ years now with zero problems.,pihole,1650688062.0
2123,comment,1,i5qwury,,"That is indeed an issue, thanks.",pihole,1650634581.0
2124,comment,1,i5ssz9w,,You can do RAM disk/tmpfs as mentioned above.,pihole,1650662023.0
2125,comment,1,i5qwobj,,The purpose would be to be safe from power outages. I’m not familiar with overlay file system but I’ve seen that it can be used in raspi-config to make /boot read only (which probably won’t interfere with any programs running?),pihole,1650634501.0
2126,comment,1,i5qxsnk,,"i've been running it on my pi's with a samsung sd card for a few years now, still going strong, only need to run updates once a month or so.",pihole,1650635006.0
2127,post,1,u992fq,Unbound with PiVPN destroyed Unbound,"Hello, 

after installing PiVPN my Unbound stopped working so i uninstalled PiVPN but now it leaves me with that systemctl status for unbound:

&#x200B;

     unbound.service - Unbound DNS server
         Loaded: loaded (/lib/systemd/system/unbound.service; enabled; vendor preset: enabled)
         Active: failed (Result: exit-code) since Fri 2022-04-22 09:35:50 CEST; 5s ago
           Docs: man:unbound(8)
        Process: 20148 ExecStartPre=/usr/lib/unbound/package-helper chroot_setup (code=exited, status=0/SUCCESS)
        Process: 20151 ExecStartPre=/usr/lib/unbound/package-helper root_trust_anchor_update (code=exited, status=0/SUCCESS)
        Process: 20154 ExecStart=/usr/sbin/unbound -d -p $DAEMON_OPTS (code=exited, status=1/FAILURE)
        Process: 20155 ExecStopPost=/usr/lib/unbound/package-helper chroot_teardown (code=exited, status=0/SUCCESS)
       Main PID: 20154 (code=exited, status=1/FAILURE)
            CPU: 72ms
    
    Apr 22 09:35:50 saul systemd[1]: unbound.service: Scheduled restart job, restart counter is at 5.
    Apr 22 09:35:50 saul systemd[1]: Stopped Unbound DNS server.
    Apr 22 09:35:50 saul systemd[1]: unbound.service: Start request repeated too quickly.
    Apr 22 09:35:50 saul systemd[1]: unbound.service: Failed with result 'exit-code'.
    Apr 22 09:35:50 saul systemd[1]: Failed to start Unbound DNS server.",pihole,1650613255.0
2128,comment,2,i5qitlo,,"after sudo apt purge unbound -y + sudo apt update && apt upgrade -y + sudo apt-get -u dist-upgrade + sudo rpi-update + sudo apt-get autoremove -y + sudo apt install unbound -y

it worked somehow. thanks anyways.",pihole,1650627287.0
2129,comment,1,i5q1yqf,,"Stop/start the Unbound service, then have a peek at what `journalctl -xe` tells you in its scrollback about the events. That should be more revealing.",pihole,1650613785.0
2130,comment,1,i5qaiw2,,"i did try uninstalling unbound / reinstalling it 

reset my internet router settings",pihole,1650621219.0
2131,comment,1,i5rwqe3,,"Why do you post a question about PiVPN and unbound in the pihole subreddit? Just asking...
Glad to see you found a solution anyway.",pihole,1650648867.0
2132,comment,1,i5q28eq,,"`Apr 22 09:52:13 saul systemd[1]: Stopping Unbound DNS server via resolvconf...`  
`░░ Subject: A stop job for unit unbound-resolvconf.service has begun execution`  
`░░ Defined-By: systemd`  
`░░ Support: https://www.debian.org/support`  
`░░`  
`░░ A stop job for unit unbound-resolvconf.service has begun execution.`  
`░░`  
`░░ The job identifier is 7029.`  
`Apr 22 09:52:13 saul avahi-daemon[387]: Got SIGHUP, reloading.`  
`Apr 22 09:52:13 saul avahi-daemon[387]: No service file found in /etc/avahi/services.`  
`Apr 22 09:52:13 saul systemd[1]: unbound-resolvconf.service: Succeeded.`  
`░░ Subject: Unit succeeded`  
`░░ Defined-By: systemd`  
`░░ Support: https://www.debian.org/support`  
`░░`  
`░░ The unit unbound-resolvconf.service has successfully entered the 'dead' state.`  
`Apr 22 09:52:13 saul systemd[1]: Stopped Unbound DNS server via resolvconf.`  
`░░ Subject: A stop job for unit unbound-resolvconf.service has finished`  
`░░ Defined-By: systemd`  
`░░ Support: https://www.debian.org/support`  
`░░`  
`░░ A stop job for unit unbound-resolvconf.service has finished.`  
`░░`  
`░░ The job identifier is 7029 and the job result is done.`  
`Apr 22 09:52:13 saul systemd[1]: Stopped Unbound DNS server.`  
`░░ Subject: A stop job for unit unbound.service has finished`  
`░░ Defined-By: systemd`  
`░░ Support: https://www.debian.org/support`  
`░░`  
`░░ A stop job for unit unbound.service has finished.`  
`░░`  
`░░ The job identifier is 6962 and the job result is done.`  
`Apr 22 09:52:13 saul systemd[1]: unbound.service: Start request repeated too quickly.`  
`Apr 22 09:52:13 saul systemd[1]: unbound.service: Failed with result 'exit-code'.`  
`░░ Subject: Unit failed`  
`░░ Defined-By: systemd`  
`░░ Support: https://www.debian.org/support`  
`░░`  
`░░ The unit unbound.service has entered the 'failed' state with result 'exit-code'.`  
`Apr 22 09:52:13 saul systemd[1]: Failed to start Unbound DNS server.`  
`░░ Subject: A start job for unit unbound.service has failed`  
`░░ Defined-By: systemd`  
`░░ Support: https://www.debian.org/support`  
`░░`  
`░░ A start job for unit unbound.service has finished with a failure.`  
`░░`  
`░░ The job identifier is 6962 and the job result is failed.`  
`Apr 22 09:52:13 saul systemd[1]: unbound-resolvconf.service: Start request repeated too quickly.`  
`Apr 22 09:52:13 saul systemd[1]: unbound-resolvconf.service: Failed with result 'start-limit-hit'.`  
`░░ Subject: Unit failed`  
`░░ Defined-By: systemd`  
`░░ Support: https://www.debian.org/support`  
`░░`  
`░░ The unit unbound-resolvconf.service has entered the 'failed' state with result 'start-limit-hit'.`  
`Apr 22 09:52:13 saul systemd[1]: Failed to start Unbound DNS server via resolvconf.`  
`░░ Subject: A start job for unit unbound-resolvconf.service has failed`  
`░░ Defined-By: systemd`  
`░░ Support: https://www.debian.org/support`  
`░░`  
`░░ A start job for unit unbound-resolvconf.service has finished with a failure.`  
`░░`  
`░░ The job identifier is 7029 and the job result is failed.`",pihole,1650614016.0
2133,comment,1,i5q2siw,,"It wasn't necessarily as revealing as I'd hoped but I'm pretty sure it got us our near our answer at least.

The unbound-resolvconf service [shouldn't be running/enabled](https://docs.pi-hole.net/guides/dns/unbound/#disable-resolvconf-for-unbound-optional).",pihole,1650614497.0
2134,comment,1,i5q8hvy,,sadly didnt change anything,pihole,1650619498.0
2135,post,0,u95c5q,Cant Play youtube videos on desktop,"cant play youtube videos at all on my computer.  I am useing ublock but its not the issue.  

nothing is being blocked in my logs but whenever i try and load a video it loads forever

In the logs next to the [googlevideo.com](https://googlevideo.com) domain under reply it says NODATA but idk if thats important

I am useing cloudflare as my upstream and i am allowing [y.youtube.com](https://y.youtube.com) but like i said nothing is being blocked in logs

my phone with youtube vanced does still work",pihole,1650598837.0
2136,comment,1,i5t1uwh,,i am useing kind of a workaround by using split dns for googlevideo.com insteadof the pihole. this seems to work well,pihole,1650665949.0
2137,comment,-1,i5piqtv,,I think i found the issue.  I am also useing tailscale vpn and apparantly whnever that is connected youtube breaks even on my phone.  dont know why this happens will investigate,pihole,1650600229.0
2138,comment,-1,i5pj5fy,,"the requests are not showing up inside of the logs 

newpipe does not work either",pihole,1650600459.0
2139,comment,1,i5pu49h,,also just discovered that some videos load. so i assume has smth to do with loading ads,pihole,1650607455.0
2140,post,9,u94nk3,Network still trying to connect to Kaspersky Labs,"This might not be the subreddit to ask this.  If not, please guide me where.  I have uninstalled my Kasperksy AV for obvious reasons.  However, I still keep seeing my network trying to connect to kaspersky labs in my pihole log.  It is my top blocked domain.  How can I stop my computer from connecting to it?  Thanks.",pihole,1650596563.0
2141,comment,2,i5pkyla,,It's probability deeply embedded into windows. Time for a fresh start?,pihole,1650601514.0
2142,comment,2,i5q03p1,,Just do a fresh install of the OS. Shouldn’t take too long depending on the complexity of your program setup. You have your data on a separate partition right?,pihole,1650612209.0
2143,comment,1,i5rcyxl,,"Some companies (I.E. Symantec, Kapersky, et Al) get their hooks into the Windows registry on your PC. Once they do that, it can be a challenge to get rid of them. We don’t use ANY antiviral software besides Windows Defender and so far it’s served us well.",pihole,1650641251.0
2144,comment,2,i5pniij,,This is what I’m afraid of. Oh well. I’ve been wanting to upgrade my pc as well so this might be the time to pull the trigger.,pihole,1650603022.0
2145,comment,1,i5qte4d,,"My data is not on separate partition.  I was too lazy to do that.  I dual boot windows and linux.  Keep everything default when installing.  Last time I had a fresh install was 2015.  I never had any reason to reinstall it as I didn't have any slowdowns nor any viruses.  Also, I have pihole and pretty strict firewall.  I'll just use this as an excuse to upgrade my rig and start fresh.",pihole,1650632986.0
2146,comment,1,i5rfxwh,,"I uninstalled it using revo uninstaller pro where after uninstalling, it scans the registry the delete related files. I’ll probably go to windows defender route this time since I have a very secure firewall. Thanks for your input",pihole,1650642398.0
2147,comment,1,i5yz7m4,,"Seems like an expensive way of fixing what sounds like a simple problem but fair enough. I get it, we all like an excuse to justify upgrading from time to time.",pihole,1650781171.0
2148,post,2,u92rbv,"pihole -up does not complete successfully, says contact support","When running `pihole -up`, I get the following result:

     Retrieval of supported OS list failed. dig failed with return code 139.
          Unable to determine if the detected OS (Raspbian 11) is supported
          Possible causes for this include:
            - Firewall blocking certain DNS lookups from Pi-hole device
            - ns1.pi-hole.net being blocked (required to obtain TXT record from versions.pi-hole.net containing supported operating systems)
            - Other internet connectivity issues
    
          https://docs.pi-hole.net/main/prerequesites/#supported-operating-systems
    
          If you wish to attempt to continue anyway, you can try one of the following commands to skip this check:
    
          e.g: If you are seeing this message on a fresh install, you can run:
                 curl -sSL https://install.pi-hole.net | sudo PIHOLE_SKIP_OS_CHECK=true bash
    
               If you are seeing this message after having run pihole -up:
                 sudo PIHOLE_SKIP_OS_CHECK=true pihole -r
               (In this case, your previous run of pihole -up will have already updated the local repository)
    
          It is possible that the installation will still fail at this stage due to an unsupported configuration.
          If that is the case, you can feel free to ask the community on Discourse with the Community Help category:
          https://discourse.pi-hole.net/c/bugs-problems-issues/community-help/
    
    
      Unable to complete update, please contact Pi-hole Support
    
I see that it is possible to skip this step, which is fine, but I am wondering why do I see this error? 

I already tried a couple things:

1. Rebooting
2. Changing `nameserver` in `/etc/resolv.conf` to `8.8.8.8`, retrying update.
3. I am pretty confident that I am not blocking `ns1.pi-hole.net`, since I am able to ping it from the pi and from my PC.
4. Checked my internet, it's fine. My router is a Netgear N600 with OpenWRT.


I also have a debug token if that's helpful:  https://tricorder.pi-hole.net/KiUogpjX/",pihole,1650590533.0
2149,comment,2,i5p0vlj,,"From the Pi terminal, what is the output of the following:

>dig +short -t txt versions.pi-hole.net @ns1.pi-hole.net

Edit - your Pi has this IP address:

    *** [ DIAGNOSING ]: Networking
    [✓] IPv4 address(es) bound to the eth0 interface: 192.168.1.3/24

Your Pi-hole (the software, not the device) is configured on a different IP range and IP:

    *** [ DIAGNOSING ]: Setup variables
    PIHOLE_INTERFACE=eth0
    IPV4_ADDRESS=192.168.113.14/24",pihole,1650591447.0
2150,comment,1,i61zqbb,,This happened to me recently.  Had to reflash the ssd with a newer Raspberry Pi operating system.  Sudo apt upgrade would not work.,pihole,1650838269.0
2151,comment,1,i5p4052,,"The output is `Segmentation Fault`, ouch.

Interesting. How can I change the configured IP Address of PiHole?

FWIW I did successfully update it about a week ago, and I have not changed anything about my network for about a month.",pihole,1650592897.0
2152,comment,1,i5p4uyp,,"I changed it in ` sudo nano /etc/pihole/setupVars.conf`, rebooted, and retried the update but still get the same error (and I checked `setupVars.conf`, my change was still there.",pihole,1650593279.0
2153,post,1,u92c44,Can I apply a CNAME to force Google Safe Search network wide?,"From google.

""To force SafeSearch for your network, you’ll need to update your DNS configuration. Set the DNS entry for www.google.com (and any [other Google country domains](https://www.google.com/supported_domains) your users may use) to be a CNAME for [forcesafesearch.google.com](https://forcesafesearch.google.com).""

[https://support.google.com/websearch/answer/186669?hl=en](https://support.google.com/websearch/answer/186669?hl=en)",pihole,1650589223.0
2154,comment,1,i5p2dhc,,"You can't do this with Pi-hole/dnsmasq, because you need to be authoritative for any CNAMEs you assign in Local DNS records.",pihole,1650592139.0
2155,comment,1,i5p2ebq,,"I think I found my answer. 

https://www.munisso.com/2020/03/30/cnames-on-pi-hole/",pihole,1650592149.0
2156,comment,1,i5tus8v,,"I did this at my firewall appliance.  What is your router/firewall appliance?  In general, I think you need to ping [forcesafesearch.google.com](https://forcesafesearch.google.com), it will come out as [216.239.38.120](https://216.239.38.120) at the time of this writing.  Then edit the /etc/hosts on your router and add [www.google.com](https://www.google.com) [216.239.38.120](https://216.239.38.120) so every time you type [google.com](https://google.com) it will automatically go to the ip for safesearch.",pihole,1650679488.0
2157,comment,1,i5p5v5c,,So is what is suggested in that link a no go? Apparently that person claims it works.,pihole,1650593745.0
2158,comment,1,i5u0hxo,,"I got it working with the PiHole. See my reply above that starts out ""So I got pi hole running....""",pihole,1650682311.0
2159,comment,1,i5pelr8,,">	So is what is suggested in that link a no go?

The writer may not know the CNAME limitations of dnsmasq.",pihole,1650597995.0
2160,comment,1,i5u26yu,,"Why didn’t I see that? That’s good info. Also add duckduckgo safesearch. Just to add to that, what I did with mine is block port 53 going out except for your pihole so no user can bypass your dns with their own. I figured this out when my horny nephews were still able to bypass the safesearch",pihole,1650683179.0
2161,comment,1,i5s7jrf,,"So I got pi hole running in a docker container and got everything configured. Then I went into Local DNS>DNS Records and added the record for [forcesafesearch.google.com](https://forcesafesearch.google.com) and the IP for the safe search VIP which is provided by Google. ([216.239.38.120](https://216.239.38.120)). Then I went to CNAME Records and added [www.google.com](https://www.google.com) for the domain and added [forcesafesearch.google.com](https://forcesafesearch.google.com) as the target. Restarted everything and flushed DNS cache.

Now when you go to google in the browser it will say safe search is ON and if you try to change it you can't and it says it is LOCKED. This is exactly what I wanted and this is what I had it doing with DD-WRT.

The only other things I have turned on are conditional forwarding and never forward non-FQDN which I don't think have anything to do with this.

Anyway, this is possible and I hope others find this so they can block ads and force google safe search. Now I need to add the safe searches for the other search engines like [strict.bing.com](https://strict.bing.com) etc.",pihole,1650653156.0
2162,comment,1,i5wb7bf,,"I just noticed that my Asus router must have gotten a firmware update that can do this now without the need for the pi-hole DNS. This is definitely a recent change. Now you can ""Assign"" a DNS service. There is ""Family"" section that has 3 choices. One Adguard and the other two ""Clean browsing"" that says it sets Bing and Google to safe search. OpenDNS could not do this for whatever reason.",pihole,1650733320.0
2163,comment,1,i5wj0rw,,"You can do that, but you will loose pihole filtering.",pihole,1650736736.0
2164,comment,1,i5wki0w,,"Oh I know. I am going to keep pi hole running since I went through all that trouble to get it running in Docker but I am going to use these Clean Browsing servers as my upstream servers. Also, I know that this solution would be much easier for most people. I should add that some of these options on my router also block ads too. I was just pleasantly surprised to see that they had added this to my router's firmware.",pihole,1650737398.0
2165,post,234,u8yx1q,How I was able to completely block ads on Snapchat,"[GitHub Repo](https://github.com/BrodyStone21/Block_Snapchat_Ads)

I was able to completely block Ads within Snapchat. There is one issue I'm still working on getting resolved; the [Stories/Discover page will not check for new content](https://i.imgur.com/Bvhd7h1.png). I'm pretty sure that new stories/shows are loaded from the same server that hosts the ads, but I'm going to do some more digging into this. Workaround for now is just to connect to mobile data or disable Pi-hole, refresh the page, and turn it back on. 

The original body of this was getting a bit long, so I cleaned it out. You can now find all the domains needed linked in the GitHub repo above. You can also take a look at the commit history to see why certain domains have been moved around from the blacklist to the whitelist or vice versa.",pihole,1650578873.0
2166,comment,27,i5qddcb,,">I couldn't see his Bitmoji in chat. 

This sounds like a feature, not a bug.",pihole,1650623511.0
2167,comment,58,i5p921n,,"Omg, Jesus came back and the first thing he did was post on the pihole subreddit and tell everyone how to block Snapchat ads. Sir, you’re amazing",pihole,1650595234.0
2168,comment,18,i5od2js,,"awesome, thanks",pihole,1650580463.0
2169,comment,6,i5orng5,,THIS - since i hate the discovery page so much it won't be a big loss :D,pihole,1650587156.0
2170,comment,3,i5slaa5,,Uninstalling Snapchat worked for me. Easy peezee.,pihole,1650658743.0
2171,comment,12,i5ogg4y,,do youtube and twitch 🥺,pihole,1650582007.0
2172,comment,0,i5r6cjb,,Good work. We’ll need to block Netflix ads soon too. Oi!,pihole,1650638611.0
2173,comment,0,i5ra0ee,,"If you are on Android, there should be an app for that.",pihole,1650640084.0
2174,comment,1,i5rwdl2,,On the repo landing page the list it has you add to gravity via adlists is the whitelist is that intended? On commit history there is a whitelist and a blacklist. I manually whitelisted the contents of whitelist but that also seems to be the same contents being added to gravity.,pihole,1650648728.0
2175,comment,1,i68sugh,,"Thank you so much, it works. However I still get some ads creeping trough.

 It's most likely because this list is for US(?). 

I'm swedish so I'll have to watch the livelog and figure out which domains are ads and which are purely snapchat domains.",pihole,1650964330.0
2176,comment,1,i6ak374,,"Looks like this may be broken as a sidenote. 

Not seeing stories (getting notifications for it though) but am getting ads.

*edit* Going to do some testing.",pihole,1650994863.0
2177,comment,1,i6xlg51,,Do you know the domains that need to be added if we want to block the discover page entirely?,pihole,1651429212.0
2178,comment,0,i5r7flb,,"So you can't see someone's bitmoji when they send one as a message? If so, do you know which needs whitelisted to restore that individual functionality? The girlfriend is all about the bitmoji spam.",pihole,1650639044.0
2179,comment,3,i5rquzj,,Sounds like you've worked on Cisco equipment before :),pihole,1650646596.0
2180,comment,35,i5ohen9,,[deleted],pihole,1650582446.0
2181,comment,5,i5pvphd,,"Tbh just do it the lazy way(for YT) and get YT Premium with an Argentina VPN. Costs 1€ per month. Simple and Easy. VPN only needed for initial setup, nothing else.",pihole,1650608671.0
2182,comment,0,i5rihzt,,r/Newpipe,pihole,1650643385.0
2183,comment,0,i5rh9ji,,Pihole blocks most twitch ads i get on mobile,pihole,1650642905.0
2184,comment,2,i5slfrv,,Uninstalling Nextflix worked for me!,pihole,1650658805.0
2185,comment,1,i5sxyzz,,No you won't. Only new customers who don't want to pay the full price (if even them..),pihole,1650664210.0
2186,comment,3,i5rasv1,,[deleted],pihole,1650640400.0
2187,comment,1,i5rynbi,,[deleted],pihole,1650649617.0
2188,comment,1,i69g9ra,,[deleted],pihole,1650979092.0
2189,comment,1,i6arxkm,,[deleted],pihole,1650997894.0
2190,comment,4,i5re4ec,,[deleted],pihole,1650641697.0
2191,comment,1,i5r9ur4,,[deleted],pihole,1650640022.0
2192,comment,-47,i5ohzkn,,"Machine learning? We can do this! If we know the ad is served before the video and how long and that we can skip it then that's a lot to work with.

Interesting enough tho, ads for free movies on YouTube before the video starts attempt to load on my laptop but then they just get skipped everytime. On the otherhand, they always load on my T.V.",pihole,1650582715.0
2193,comment,2,i5pxzbg,,"thanks, I'll look into that.",pihole,1650610479.0
2194,comment,0,i5rz5vo,,[deleted],pihole,1650649817.0
2195,comment,1,i5sij8s,,"Gotcha, I like to watch Twitch on my t.v.  You think I might be able to regex a solution?",pihole,1650657614.0
2196,comment,1,i5suvhm,,Specific to Snapchat.,pihole,1650662845.0
2197,comment,1,i5sjbfu,,"Perfect, thanks for all your work on this and the quick edit!",pihole,1650657929.0
2198,comment,1,i6awou1,,"Thanks! Will do, I figured it out before I had to do a re-install of the OS, so I should be able to achieve some good results.",pihole,1650999733.0
2199,comment,1,i6asr3k,,"So update - 

Ads look like they were cached so got that sorted. Currently missing the entire Discover section as well as Friends Stories.",pihole,1650998211.0
2200,comment,1,i5rt0v0,,"Awesome, thanks!",pihole,1650647429.0
2201,comment,1,i5rtbdc,,"For those of us that added everything manually but want to switch to the blacklist instead, what would we need to remove to ""undo"" the manual additions? I noticed you changed the main post to go to the repo only.",pihole,1650647542.0
2202,comment,1,i5rsybu,,"Understood, thanks!",pihole,1650647402.0
2203,comment,46,i5oma6z,,"> If we know the ad is served before the video and how long and that we can skip it then that's a lot to work with.

You won't do that with a DNS resolver (i.e. Pi-hole).",pihole,1650584666.0
2204,comment,6,i5qc3o8,,"For the 3936362829th time, we can't block YouTube ads via DNS alone. Hence why you need an add-on or a YT app with adblocking",pihole,1650622514.0
2205,comment,2,i5q140q,,">Interesting enough tho, ads for free movies on YouTube before the video starts attempt to load on my laptop

Why don't you use an actual adbrowser, instead of sending the requests to Pihole? 🤔 Two heads are better than one!",pihole,1650613060.0
2206,comment,2,i5sxgsh,,Bless your heart.,pihole,1650663991.0
2207,comment,3,i5q4fct,,No need to pay full price when you have a VPN :).,pihole,1650615930.0
2208,comment,0,i5sxwkv,,"And I'd recommend not using vanced. Despite their open source marketing, the actual code that gets your Google credentials is closed source and all or nothing. You're giving them all your Google account access just for YT. No thanks.",pihole,1650664182.0
2209,comment,1,i5ssk3a,,Not sure I haven’t used it on tv but maybe it will work?,pihole,1650661838.0
2210,comment,2,i6at0fo,,[deleted],pihole,1650998313.0
2211,comment,1,i5rupyu,,[deleted],pihole,1650648086.0
2212,comment,-19,i5omrx9,,"True, I was just kind of spit balling with the general idea. Thanks for raising that point tho.",pihole,1650584895.0
2213,comment,1,i5qe2n5,,Was talking out of pi holes scope.,pihole,1650624042.0
2214,comment,1,i5q1jz7,,You're talking about an ad blocker for a web browser? I use a few. I was trying to get no ads on the smart T.V.,pihole,1650613438.0
2215,comment,1,i5sxm8x,,Thanks for the kind comment.,pihole,1650664058.0
2216,comment,1,i5ssph5,,It's not working for me. They might use integrated ads like YouTube but I haven't checked the query logs yet.,pihole,1650661904.0
2217,comment,1,i6authj,,"Okay awesome then, working as expected after dumping my cache.",pihole,1650999011.0
2218,comment,1,i5rv2x1,,"Ok, my concern was you fixed the bitmoji and I don't have a way to sort my manual list by recently added and I have accumulated pages of custom entries over the years lol.

Edit - Figured out how to view commit history to compare. 

Thanks!",pihole,1650648226.0
2219,comment,2,i5sdbwv,,[deleted],pihole,1650655499.0
2220,comment,0,i5qh1be,,You could hook a computer to it and open a web browser to go to YouTube.,pihole,1650626137.0
2221,comment,1,i5ssuyk,,I just use roku tvs so no twitch app :(,pihole,1650661970.0
2222,comment,1,i5sic4x,,Thanks. I'm limited to using the LG TV OS but that's a good idea to hook up an android OS for more flexibility.,pihole,1650657534.0
2223,comment,2,i5qn0xo,,That defeats the purpose of a smart tv,pihole,1650629742.0
2224,comment,1,i5shmdy,,"That would be redundant for a smart t.v. and you then you couldn't use your laptop while watching t.v.

Also, the resolution would be all screwy.",pihole,1650657243.0
2225,comment,1,i5sure3,,"Oh, pepehands. Twitch on a T.V. is way better except for the ads.",pihole,1650662796.0
2226,comment,1,i64wm5x,,"Why would the resolution be all screwy? Laptops support the same resolutions that TVs do (most of the time). I also said hook a computer to your TV, I didn't specify a computer you actively use.


If a ""Smart TV"" forces you to watch ads by hard coding DNS, it's not the kind of smarts I want connected to my network.",pihole,1650897926.0
2227,comment,0,i66hmhc,,">I also said hook a computer to your TV, I didn't specify a computer you actively use.

Defeats the purpose of a ""personal"" computer and wastes space. If you're talking about hooking up an Nvidia shield as a computer then yea that's a good idea, but a laptop or a tower? I mean you do you. A major point of using a t.v. is using a remote to control it.",pihole,1650920106.0
2228,comment,1,i694gi7,,"I have a remote sensor on my living room PC and use a Logitech Harmony remote to control everything. You can build cheapo STX computers that are fairly small and still use desktop components.


This way I can access my NAS and don't have to worry about when that smart TV app will finally start throwing errors, not connect to the service anymore, or being forced to watch unblockable ads on a proprietary app.",pihole,1650972970.0
2229,post,35,u8xhg7,Is it normal for my Netgear router to constantly have a DNS query to netgear.com?,"It might not be anything, but it's something I've noticed, and it's my top DNS query. In about 12 hours it has queried 1400 times. This to me looks suspicious, but maybe it's harmless?

&#x200B;

Any insight on what this could be, or if I should block it, would be appreciated. Thanks!",pihole,1650574829.0
2230,comment,19,i5o17bl,,"Its generally harmless and used as a connectivity check. I also have netgear routers and have it blocked. Its a minor annoyance if you intend to use the mobile app, but I dont and having it blocked hasnt resulted in loss of utility for me.",pihole,1650575160.0
2231,comment,8,i5o8yl1,,"Routers do pings to check if the connection is up. Its the official page of the company that made the router so i would just let it through and see if it stops spamming or just leave it blocked, as long as the router works normally",pihole,1650578468.0
2232,comment,7,i5ok85b,,"That's one more reason to look at flashing it with custom firmware, if your model is compatible. 

I'm running Fresh Tomato on my R7000.",pihole,1650583731.0
2233,comment,3,i5o9kdd,,Likely a mixture of checking for updates and a way of checking if it is online (heartbeat) maybe analytics for them too,pihole,1650578743.0
2234,comment,3,i5obia4,,https://www.reddit.com/r/pihole/comments/oi5ow1/why_is_netgearcom_queried_so_often_i_have_a/,pihole,1650579637.0
2235,comment,2,i5oh2q2,,"What can happen with requests that rack up the numbers is they are programmed to retry a request if the response isn’t as expected, sometimes without any waiting time before retrying.  It should be harmless and not impact the device from doing it’s normal activity, it’s more likely to be a sign of lazy error handling by the developer than an indication of suspicious activity.",pihole,1650582289.0
2236,comment,2,i5omoif,,My netgear mesh had a firmware update to fix this and queries much less than it previously did. Can’t remember the numbers but it was significant before and much less after.,pihole,1650584852.0
2237,comment,2,i5owkh4,,Why don't you flash dd-wrt on it so you have better control?  I did that to my nighthawk and it made a huge difference.  Of course I replaced it with a Ubiquiti UDM.,pihole,1650589442.0
2238,comment,1,i5o18n9,,"Did you block it? if you did, the router would likely re-try.",pihole,1650575176.0
2239,comment,1,i5oawb8,,Probably phoning home to validate if it’s online or offline,pihole,1650579357.0
2240,comment,1,i5oinxn,,Almost any manufacture well have this shirt of request,pihole,1650583022.0
2241,comment,1,i5rn8bn,,"That's normal. I don't even have my router itself go through pihole. I just use 1.1.1.1 or something for the WAN. I only care about devices connected to it. Routers send out connectivity pings frequently. It's normal.

Be aware though that if you enable any airprotection or traffic monitoring or whatever in your router, that could enable more dns pings with telemetry data. I prefer to disable all such abilities on my router.",pihole,1650645204.0
2242,comment,1,i5scnvd,,normal.  if you block it the little orange internet light comes on and says you're not connected to the internet.  this can cause problems in the router's web GUI where certain pages and options are unavailable if it's offline.  but generally shouldn't impact connectivity or anything.,pihole,1650655226.0
2243,comment,0,i5ohwtb,,"It is simply checking time.  When I had a RBR50 this thing pinged constantly for time checks.

Blocked it and nothing changed on my network.",pihole,1650582679.0
2244,comment,2,i5o2x8u,,"Awesome, glad to hear that. Thanks for the insight!",pihole,1650575884.0
2245,comment,1,i5om4ob,,How is it? Any reduction in speed? Considering flashing my R6400 so I can redirect DNS.,pihole,1650584597.0
2246,comment,1,i5rhsz2,,"Plus one. But you will enjoy r7800 openwrt more. I was into flashing custom firmware before, but I realized even the best of the best consumer grade router still need occasional restart when internet slows down. I have sophos with web filtering, unifi ap, pihole as dns. It only restart when power is out. 

The slow downs I have is when my pihole runs out of space due logs so I run a scheduled trim",pihole,1650643113.0
2247,comment,1,i5o2uki,,"No I haven't blocked it, I was just wondering if it was ""essential"" or if it was some sort of telemetry by netgear.",pihole,1650575854.0
2248,comment,2,i5p8p11,,"No noticeable difference in speed, but it is significantly more stable.  I don't have to reboot my router as often to maintain my internet connection.",pihole,1650595066.0
2249,comment,1,i5oq8lm,,"Normally custom firmwares increase the speed because they don’t have things like this constant pings. Not that this pings should impact speed, but you get my point.

Worst case scenario, it just stays the same.",pihole,1650586499.0
2250,comment,0,i5o3m91,,"I don't have a netgear router, but I guess the router tries to contact [netgear.com](https://netgear.com) for some reason. I suggest that you just accept the fact the router needs to talk back to its home. If you block it, you'll see even more blocked queris.",pihole,1650576172.0
2251,post,2,u8w992,Pi-hole isn't blocking ads in my OpenVPN Access Server v2.10.2.,I don't know why isn't it working. I even edited config files for Pi-hole's DNS in both client's and set DNS in AS. Also removed IpV6 DNS everywhere. Still it isn't working. The server has 32 interfaces other than ethernet.,pihole,1650571450.0
2252,post,0,u8uxfa,NEED SUPPORT, hey so i just set up my pihole. when i was prompted for the first tie about setting up a static ip address i immediately tabed out and learned how to set my private ip address to be static.I did this by editing the dhcpcd.conf file but i only changed the ipv4 address. can anybody help me so i can make the ipv6 static? can i just disable ipv6? also how do i make other devices use pihole as their dns?,pihole,1650567789.0
2253,comment,2,i5njnhd,,"It depends on your device, but in my experience you can disable ipv6. 

In terms of other devices, you can either change the DNS settings on your router to point to the IP address of the device you have pihole installed on so all devices will therefore go through the pihole or configure the DNS settings on each individual device to point to the IP address of the pihole. How you do this totally depends on the device.

Good luck",pihole,1650568140.0
2254,comment,1,i5nk0kj,,[How to make other devices use PiHole](https://discourse.pi-hole.net/t/how-do-i-configure-my-devices-to-use-pi-hole-as-their-dns-server/245),pihole,1650568286.0
2255,comment,1,i5nlsr5,,"I would recommend to set the static IP in the interface config, not in dhcpd (actually it's IP reservation and not a real static IP,  guess). When you change your DHCP server, this settings gets lost. But not when it's defined at the interface itself.
How to setup static IPs in ` /etc/network/interfaces`:
[https://linuxconfig.org/how-to-setup-a-static-ip-address-on-debian-linux](https://linuxconfig.org/how-to-setup-a-static-ip-address-on-debian-linux)
something like:

`# Ethernet`

`allow-hotplug eth0`

`iface eth0 inet static`

`address 192.168.178.149`

`netmask 255.255.255.0`

`gateway 192.168.178.1`


for IPv6 it's like:

`# IPv6`

`iface eth0 inet6 static`

`pre-up modprobe ipv6`

`address fe80::1`

`netmask 64`",pihole,1650568994.0
2256,comment,1,i5ntk8u,,i ended up just disabling ipv6,pihole,1650572069.0
2257,comment,1,i5o2rd9,,"The simpleste solution, I guess. :)",pihole,1650575816.0
2258,post,1,u8ec8y,Pi-Hole + Unbound + Lenovo Google Hub Doc,"Pi-Hole (setup as a recursive dns server) and multiple google smart devices. Hubs and minis and 1 Lenovo Smart Display. Everything works fine and connects to the internet except this Smart Display by Lenovo.I've whitelisted a bunch of domains - client 2, client 3, client 4, client [5.google.com](https://5.google.com), and [googleapis.l.google.com](https://googleapis.l.google.com) and this device is still not reaching out to the internet. All other smart devices are fine.What am I missing? The query log doesn't show much regarding this device but yet it's connected when I disable pi-hole.",pihole,1650512237.0
2259,comment,3,i5kzc5z,,">The query log doesn't show much regarding this device but yet it's connected when I disable pi-hole.

Then the query log should indeed display the answer. Just not necessarily in any form of obvious looking package.

Try just filtering the long term query database by time, and IP of the device. Reproduce the issue. Refresh the database. Your answer lies somewhere within.

Keep in mind you're not necessarily looking for a blocked domain. An invalid/otherwise valid but unexpected result could also be used to govern this behaviour (though I suspect that's not the case I've seen some truly weird/exotic behaviour from some clients being rather particular about their nameserver).",pihole,1650518980.0
2260,comment,1,i5nrenh,,I have a Lenovo Smart clock and it can be a bit of a twat to get to connect.  I discovered that it was rock solid if I gave my 2.4Ghz and 5Ghz networks different SSIDs.  If the SSIDs were the same it wouldn't connect.,pihole,1650571209.0
2261,post,2,u895az,RegEx help,"Hi, I need to create a regex whitelist for: [gspe64-ssl.ls.apple.com](https://gspe64-ssl.ls.apple.com)

I want all [gspeXX-ssl.ls.apple.com](https://gspeXX-ssl.ls.apple.com) to be whitelisted; these are used for Apple Maps. Goes from 00-100 or more I'm guessing.",pihole,1650496150.0
2262,comment,6,i5joiyj,,"`gspe\d+-ssl.ls.apple.com` should probably do it.

`\d+` should match 1 or more digits",pihole,1650496340.0
2263,comment,1,i5jrugc,,https://regex-generator.olafneumann.org/,pihole,1650497798.0
2264,comment,2,i5k5g96,,">gspe\\d+-ssl.ls.apple.com

That did it, thank you.",pihole,1650503763.0
2265,post,7,u88g3z,Pi-hole stopped working out of nowhere,I had the same setup for 3 years until few days ago I noticed the internet was down but my router indicated I was connected. Since I’m running a headless setup I hooked up a hdmi to my tv from the rpi and saw is was asking for a login and password which I entered but then nothing happens . The li receives an IP address but still doesn’t show up on my list of connected devices. Do I need other commands to run after login in ?,pihole,1650494121.0
2266,comment,7,i5jm31a,,Maybe the SD card conked out?,pihole,1650495268.0
2267,comment,3,i5jju82,,Have you ran regular updates? Have you tried rebooting the pi?,pihole,1650494291.0
2268,comment,2,i5jlbwx,,It may have picked up a new ip address. Try ifconfig. See if it comes back with an ip address,pihole,1650494936.0
2269,comment,1,i5jukiz,,Can you ssh into it?,pihole,1650499009.0
2270,comment,1,i5lsa21,,"Yeah, an SD card is really not good enough for an operating system. My RasPi cards usually operate for 1 to 3 years before failure.

My current Pihole runs on an old cheap Intel NUC with a spinning hard drive. I haven’t yet looked at running a Pi off of a hard drive, but that might be another solution.",pihole,1650541547.0
2271,comment,2,i5jmj92,,True didn't think of that,pihole,1650495466.0
2272,comment,2,i5jndxb,,Shouldn’t it through out errors when booting I had that happen several times before on my other rpi set up,pihole,1650495840.0
2273,comment,2,i5juafj,,"I just had this happen after about three years as well, turns out it was in fact the SD card",pihole,1650498881.0
2274,comment,1,i5jkhtl,,Yea I have rebooted many times everything shows OK then it asks for rpi login and password after I enter those I get rpi@raspberrypi line and that’s it when I try to access the admin webpage it doesn’t find it,pihole,1650494577.0
2275,comment,2,i5jutwz,,For some odd reason came back home ssh into it did an -up cmd it did the fro update and looks like it’s all working fine now. This was very weird in 3 years it never did such thing,pihole,1650499124.0
2276,comment,1,i5lx560,,"Yep I have at least 10 microsd cards that have been corrupted by a rpi and most are Samsung evo and sandisc ultra, goes to show those labels don’t matter much when the rpi decides chomping on them",pihole,1650544247.0
2277,comment,2,i5jvipc,,"Oddly enough, it didn't for me when it happened, the symptoms were the same. I popped the card into my PC and let some tool try and read each sector and it ended up just hanging. Tried it with known-good card and it worked, so I knew it was the card in my case. I moved pihole to a VM after that.",pihole,1650499428.0
2278,comment,1,i5k0lse,,"Not necessarily, no. It depends on exactly how it fails, and where.

Trash the boot partition header for instance, and then you've not got an operating system *to* complain about anything.

Again depending on how and where exactly the card failed, it may well have been quietly singing its death song for weeks or months beforehand. It also could have just abruptly failed without notice.",pihole,1650501671.0
2279,comment,2,i5khc2o,,It’s working for now I’ll monitor and see if this happens again,pihole,1650509018.0
2280,post,318,u83o65,"Pi-hole FTL v5.15, Web v5.12 and Core v5.10 released!",,pihole,1650480969.0
2281,comment,1,i5jocg3,,"As always, please read through the changelog before updating.",pihole,1650496260.0
2282,comment,204,i5iusrk,,">As always, please read through the changelog before updating with pihole -up.

Make me.",pihole,1650484215.0
2283,comment,31,i5iry9v,,"I think there's a typo in the PiHole Web update notes, says ""uptream servers"" at the second bullet point.


And of course, always great to see an update!",pihole,1650483123.0
2284,comment,14,i5iuhq5,,Thank you for your great work :3,pihole,1650484100.0
2285,comment,10,i5l55io,,"> `pihole -up`
>  [✓] Update local cache of available packages
>  [i] Existing PHP installation detected : PHP version 8.0.14
>  [✓] Checking for git
>  [✓] Checking for iproute2
>  [✓] Checking for whiptail
>  [✓] Checking for ca-certificates
>
>  [i] Checking for updates...
>  [i] Pi-hole Core:     update available
>
>  Error: Web Admin repo is missing from system!
>  Please re-run install script from https://pi-hole.net

And the webinterface shows *Web Interface vDev (, )* now.

E:

`pihole -r` exits with 

> [i] Resetting repository within /var/www/html/admin......  Unable to reset /var/www/html/admin, exiting installer

E2:

removing the admin directory from */var/www/html* and running `sudo git clone --depth 20 https://github.com/pi-hole/adminlte /var/www/html/admin` and then `pihole -up` worked.",pihole,1650523219.0
2286,comment,12,i5j2zu1,,"Plan for tomorrow is set👏 thank you devs👍❤️
Backup everything, update, test, create fresh backup👍",pihole,1650487347.0
2287,comment,3,i5ixn0h,,Fantastic! Guess I know what I’ll be doing when I get back home,pihole,1650485307.0
2288,comment,3,i5lwiq6,,Just updated my Pi3 and Pi2 both running Raspberry Pi OS Bullseye Lite with the latest updates and zero issues. Thank you again for this amazing software!,pihole,1650543920.0
2289,comment,2,i5jdth3,,"Damn, good timing for me to shut down my existing pihole on my raspberry pi to move to new hardware",pihole,1650491715.0
2290,comment,2,i5ndxga,,Will there be something similar to Optimistic caching like AdGuardHome has?,pihole,1650565858.0
2291,comment,2,i5qtj9b,,"Pihole -up = smooth and easy, no hiccups.",pihole,1650633054.0
2292,comment,2,i5ip1ny,,Nice :),pihole,1650482004.0
2293,comment,1,i5qulex,,Can't update Ubuntu 22.04 unsupported,pihole,1650633551.0
2294,comment,1,i5ni6ya,,"Anyone else notice a spike in their logs after updating their docker image? Does this possibly have to do with the log flushing change?

[Imgur](https://imgur.com/a/MSvlAgF)",pihole,1650567556.0
2295,comment,1,i5v6xeg,,Another painless update. Thanks team!,pihole,1650713341.0
2296,comment,1,i5z66ec,,"After unticking ""Execute container using high privilege"" my Docker container finally managed to start. Thanks for the update team pihole! 🙌🏼",pihole,1650786595.0
2297,comment,1,i604y8m,,[deleted],pihole,1650810268.0
2298,comment,1,i65fzjd,,Thanks for the splendid new icons on the web iterface 😍,pihole,1650905488.0
2299,comment,1,i6dd825,,Anyone else notice on iOS when tap-sliding on “Client Activity over 24 hours”bar graphs the contextual legend menu that usually shows up on top of the graph whilst click/dragging is hidden behind the actual graph now? The “Total Queries over last 24 hours” bar-graph doesn’t exhibit this behavior…,pihole,1651041432.0
2300,comment,5,i5z8k80,,">Pihole -up

Oh let's look at the changelog",pihole,1650788511.0
2301,comment,74,i5izwre,,https://gifer.com/en/fxjz,pihole,1650486178.0
2302,comment,11,i5ixl0i,,Don't you dare,pihole,1650485287.0
2303,comment,6,i5lavl7,,Oh! Should we wait before trying to update?,pihole,1650527957.0
2304,comment,3,i73ls77,,"I used to had this problem and your comment help me solve it, thank you!

This was the error I was getting:

[Could not update local repository. Contact support.](https://i.imgur.com/puR5wDO.png)

I think my problem caused by this old comment of mine:

[I was trying a make a little touch to LCARS Star Trek Theme](https://www.reddit.com/r/pihole/comments/te9h0t/pihole_lcars_next_generation_theme/i0r9c4l/)",pihole,1651538834.0
2305,comment,8,i5j5lcb,,do you mind sharing how to do a complete backup?  I am running Pihole and Unbound on  Beaglebone Black (debian).  I am a noob here.  Can you do backup and restore like you do with Android TWRP/custom rom?,pihole,1650488349.0
2306,comment,9,i5kabwv,,"Backup everything? 

Rebuilding a pi takes like 20 minutes lol",pihole,1650505866.0
2307,comment,1,i60e4q8,,"Please open a new topic here, or preferably on our discourse page. 

https://discourse.pi-hole.net",pihole,1650814183.0
2308,comment,83,i5ji79i,,"Feature request: let the change notes scroll past the screen along with the upgrade progress. That way, if we see something we don’t like, we can’t do anything about it.",pihole,1650493577.0
2309,comment,3,i5lb3vn,,"nah, i think its an error on my side somewhere.",pihole,1650528154.0
2310,comment,12,i5jacf8,,"Running pihole on rpi3. I make an image of the SD card using my Linux laptop, then using pishrink (google it pls) shrinking the image to a smaller one and strore that on my NAS.
You can make the image by using win32imager on windows and restore it with rpi manager.",pihole,1650490275.0
2311,comment,6,i5l2b0p,,I have more stuff running on the pi 🤷,pihole,1650521058.0
2312,comment,41,i5k04g3,,"Lol


Downloading malware......


Uploading naked photos......


Emailing MLM shite to your contact list.....


Deleting internet.....",pihole,1650501457.0
2313,comment,18,i5l7j4b,,Reticulating splines.,pihole,1650525118.0
2314,comment,4,i5kgj7a,,"How do you make an image, do you use DD? I badly need to backup mine in case my SD card dies. Would win32 also work for making an image?",pihole,1650508645.0
2315,comment,6,i5l7lx4,,Maybe look into dockerized containers?,pihole,1650525182.0
2316,comment,30,i5k0i9x,,"When the Pi-hole is down, the internet might as well be down.",pihole,1650501627.0
2317,comment,3,i5kkk28,,"DD can be used to make an image, yes. Google has plenty of tutorials that explain it better than I can. :)",pihole,1650510509.0
2318,comment,3,i5lq3ly,,And an automation tool like Ansible.,pihole,1650540191.0
2319,comment,1,i5l9ond,,I might by just lazy to spend a day on that 🤣😇🤷,pihole,1650526922.0
2320,post,2,u831sx,Traffic is not being filtered through my PiHole using Google Fiber,"Hi friends, noob here. 

I have an old Latitude 3570 that i'm using to run PiHole on my network. I followed Andrew Denty's blog post https://www.andrewdenty.com/blog/2020/01/25/installing-pi-hole-on-windows-10.html to use a Docker container and run PiHole through it. 

I'm at the final step where I'm configuring my router (192.168.1.1) to forward traffic to the server (192.168.1.100) and i changed the router's DNS server settings to the PiHole DNS server (laptop) but am not receiving any traffic. 

I'm not sure if there are additional settings that I have to configure, given that I have Google Fiber, but wanted to ask the community. 

Any help is appreciated

Edit: I've double checked the DNS and IP names. No issues there. I even switched the laptop from WiFi to ethernet off the router, nothing has changed. 

I'm able to see traffic being blocked on my laptop as it continues to work but when I change the router's ""advanced settings > DNS > custom: 192.168.1.100"" my wifi turns off around the house, except for the laptop.

Edit2: pool is set for 192.168.1.20 through X.X.X.250... I'm thinking it could be the fact I set the address within the pool range

Edit3: Alright, I figured out the issue. I configured PiHole wrong on the docker installation. It did not require me to update or change Google Wifi's DHCP or enable PiHole's... just needed to shut it down and restart with the new IP address I had chosen.

I also used [this link](https://adamtheautomator.com/pi-hole-in-docker/#Pi-hole_Docker_Command_Flags) to reinstall the instance. If anyone comes across this thread in the future, please reach out. I've learned more than I care to admit by testing and retrying everything.",pihole,1650479256.0
2321,comment,1,i5m2h8c,,I'm using google fiber and the traffic is blocked with no problem. Are you using the default router? If you answer is yes you need to go to the google home app and update the dns settings,pihole,1650546870.0
2322,comment,0,i5ilpm2,,"One thing that tripped me up was that I was putting the DNS in the LAN area. Do not do that! Put it in the DHCP server area. That way, when things get an address from DHCP, they will get that DNS address. Maybe that is the problem.",pihole,1650480697.0
2323,comment,1,i5m3dqd,,"The router I'm changing is the modem/router that is connected to the Fiber Jack. 

If I change the DNS to 192.168.1.100 (the Laptop running pihole's IP/DNS), all other devices are kicked off wifi. I've read that I need to turn off DCHP for Fiber (though don't know how to do that) and turn it on for PiHole. 

Did either of these steps happen to you? Can you share your setup on imgur?",pihole,1650547281.0
2324,comment,1,i5irvrg,,"I'm not sure I'm following, but I'll give it a check!",pihole,1650483096.0
2325,comment,0,i5isn03,,"What does ""putting the DNS in the LAN area"" mean ? I am running a pihole and unbound in Docker on a Rpi4, but i do understand the difference  between the LAN and the DHCP area. Could you try to give an example ?

>!edit: english 2nd language!<",pihole,1650483390.0
2326,comment,1,i5m6uvf,,Like I said I'm using the same router that I received from google fiber and I went to the google home app and network setting I added the custom DNS https://prnt.sc/XUFcb8zOgM6K,pihole,1650548821.0
2327,comment,1,i5ispf2,,[Check this link. Maybe it will explain it better than I can.](https://www.reddit.com/r/pihole/comments/b1u01l/setting_pihole_as_dns_in_my_tplink_router/),pihole,1650483416.0
2328,comment,1,i5iv8xq,,"On my TP Link router, I have DNS settings in the Internet area of the menu. That is the DNS servers you get from your internet provider. I also have DNS settings in the DHCP area of the menu. This is what is given out when things connect through DHCP. That is where you need to put the address for PI Hole. Not in the Internet or LAN menu that controls your internet.",pihole,1650484390.0
2329,comment,1,i5m80hi,,Alright. I already did the same. Not sure where it's failing,pihole,1650549314.0
2330,comment,1,i5m9529,,on your pc try to run ipconfig /release then ipconfig /renew then ipconfig /flushdns,pihole,1650549795.0
2331,post,2,u82yzu,Second [backup] Pi-Hole Setup RE: DHCP,"Hello, friends, scholars, fellow Pi-hole-rs!

I have a linux machine running some stuff (Debian Mint Cinnamon) and had the idea to put Pi-Hole there in tandem to my RPI3+ I'm using currently for redundancy's sake. I've seen a handful of pages that give instructions on doing this RE: DNS, but I'm concerned if Pi-Hole A goes down--which is my DHCP server--how will devices be able to get/stay online or connected to my network with the backup Pi-Hole running? I know I can't have two DHCP servers, so this is where I'm at a loss.

Hopefully I've overlooked something and the answer will slap me in the face lol. Thanks!",pihole,1650479033.0
2332,comment,3,i5im7to,,"Option A: Split scope dhcp servers: one DHCP serves 192.168.0.1/24 - [192.168.0.130](https://192.168.0.130)/24 and the other takes care of the rest of the broadcast domain. or 80/20 rule, whatever you feel comfortable with. Make sure to reconfigure your dhcp snooping at layer 2 if turned on.

Option B: could be achieved with failover Master/Slave or Active/Passive cluster if that machine is virtualized. This happens on the hypervisor level though",pihole,1650480899.0
2333,comment,1,i5invei,,"I've got three linux servers i run, 2 in the house and 1 in a data center.  Used them for 5+ years.

Finally decided that rather than trying all fancy methods and add redundancy etc, just making a crontab -e to reboot at 5am.

The systems go offline for maybe 2 minutes and have a nice fresh clear ram space. 

Fixed so many of my issues, including pihole crashing every week or two taking down the whole network.",pihole,1650481542.0
2334,comment,1,i5j5wdl,,"u/smibrandon, you can go the route u/VendingCookie suggested, it's a good one and the 'proper' approach.

Having said that, for a home setup, it's not strictly necessary, as long as you can get a DHCP server back up and running if there is a short outage.

The way that DHCP clients work, is that they renew their lease (i.e. the address they have) way before the lease runs out.  So, for instance, if your lease is set to 1 day, it would try to renew it every 12 hours (client may do this more aggressively, it depends on the config).  

Nothing is stopping you from extending the lease for home systems (I mean, how likely are you to running out of addresses at home due to client turn over).  Say to 7 days.  At that point, a connected client could run fine for multiple days.  Key is of course noticing that there is a problem and fixing it.  As well, for clients that leave and come back (i.e. cell phones, maybe laptops) this may not work out as well.

Again, having 2 DHCP servers with split scopes and duplicated reservations (if you have any) are the way to ensure you're up. 

Good luck with the project!",pihole,1650488471.0
2335,comment,1,i5ir2p6,,"Okay, you're far beyond me. Any recommended readings for option 1? Or should I just Google ""split scope DHCP server"" and take it from there?",pihole,1650482780.0
2336,comment,2,i5j6opm,,"Sooo, I have infinite lease time because I have several IoT switches, devices, etc that are IP-dependent (I go in and manually delete leases as necessary). With that being said, do I even need to worry about the DHCP issue at all? And, tbf, any Pi-hole_1 downtime would likely be due to me over-tinkering, anyways. This downtime would only be while I'm fixing/restoring from my own f*** up",pihole,1650488785.0
2337,comment,2,i5iubsb,,"Settings -> DHCP -> Range of IP addresses to hand out -> ""From"" and ""to"" fields can be manipulated on Pihole\_1 and Pihole\_2. Just make sure the addresses do not overlap.

Pihole\_1 may lease from [192.168.0.](https://192.168.0.1)20  to [192.168.0.120](https://192.168.0.120) and Pihole\_2 may be set from [192.168.0.121](https://192.168.0.121) to [192.168.0.254](https://192.168.0.254)

This is just an example and the addresses mentioned above are just for illustrative purposes. If you happen to have different network id than 192.168.0 you should adjust accordingly.

Having static mappings may interfere with this config, assigning static address on each currently served with DHCP reservation machine can solve this potential problem",pihole,1650484038.0
2338,comment,1,i5ja05q,,"You do for devices that leave your network.

When your phone (say) comes back onto your network, it'll contact a DHCP server to check if it can re-use the previously assigned address (typically).  If no server is available, that device may have issues.  Not worth it IMO.

Having said that, I only have 1 DHCP server on my network, my router.  If it's down, I'll know it as my whole network is down ;)

Edit to add: I have a fully configured, running router standing by (different network completely, but one that is saved on my devices).  If I have a router failure, I move my WAN cable and connect to the other network and I'm back up and running.",pihole,1650490136.0
2339,comment,2,i5ixym0,,Great stuff! I really appreciate it. Got a project for tonight! Thank you so much,pihole,1650485421.0
2340,comment,2,i5jar79,,"Cool, lots of valuable info here. Thank you so much! I know what I gotta do.",pihole,1650490443.0
2341,comment,2,i5jbrsj,,"My fail-over strategy maybe too much (or to expensive) for some.  

To add:  We work from home, in IT jobs.  Being down isn't worth it, 2 hours downtime costs us more than a good router that's standing by.  

You can probably achieve similar failover capabilities if you have a big data plan and can tether off your phone until the situation is resolved.  

Anyway, I'm going on.  Thanks for the positive comments, much appreciated!",pihole,1650490868.0
2342,post,2,u7vqpi,pihole on docer,"C:\\Windows\\system32>docker run -d --name pihole -e ServerIP=[192.168.0.9](https://192.168.0.9) \-e WEBPASSWORD=password -e TZ= [Africa/Johannesburg](https://en.wikipedia.org/wiki/Africa/Johannesburg)  \-e DNS1=[127.17.0.1](https://127.17.0.1) \-e DNS2=[1.1.1.1](https://1.1.1.1) \-e DNS3=[1.0.0.1](https://1.0.0.1) \-p 80:80 -p 53:53/tcp -p 53:53/udp -p 443:443 --restart=unless-stopped pihole/pihole:latest

docker: Error response from daemon: Conflict. The container name ""/pihole"" is already in use by container ""bb82fb71c5f2433d1dc8efba6c2586620cb4901864e927b615c8c7e834f601c5"". You have to remove (or rename) that container to be able to reuse that name.

See 'docker run --help'.

Good day i am trying to run pihole on win10pro and i keep getting this error when trying to run the scripte \[[https://www.andrewdenty.com/blog/2020/01/25/installing-pi-hole-on-windows-10.html](https://www.andrewdenty.com/blog/2020/01/25/installing-pi-hole-on-windows-10.html)\] i worked of this websight",pihole,1650458932.0
2343,comment,3,i5h3ylm,,"> docker: Error response from daemon: Conflict. The container name ""/pihole"" is already in use by container ""bb82fb71c5f2433d1dc8efba6c2586620cb4901864e927b615c8c7e834f601c5"". You have to remove (or rename) that container to be able to reuse that name.

You need to remove the old pihole container before you can start a new one.",pihole,1650459134.0
2344,comment,3,i5h4qzy,,`docker rm -f pihole`,pihole,1650459520.0
2345,comment,1,i5hiqja,,I'd suggest `docker rn -f pihole pihole.backup`,pihole,1650465588.0
2346,post,1,u7voyo,Pihole with Unbound and IPv6 Support in Docker,"I have spent most of the past week trying to write a docker-compose file for my pihole instance that uses unbound and supports IPv6. I have the file pasted below although it does not work. So does anyone use a file with this use-case, I want to keep the containers separate but something about the networking is tricky. Mostly I just want to see some other files to work off of. Thanks

    
    version: ""3""
    
    networks:
      dns_net:
        driver: bridge
        enable_ipv6: true
        ipam:
          config:
          - subnet: 172.20.0.0/16
          - subnet:*taken from my randomly generated subnet in /docker/daemon.json*:1:/64 
    
    # More info at https://github.com/pi-hole/docker-pi-hole/ and https://docs.pi-hole.net/
    services:
      pihole:
        container_name: pihole
        image: pihole/pihole:latest
        networks: 
          - dns_net
        ports:
          - ""53:53/tcp""
          - ""53:53/udp""
          - ""67:67/udp"" # Only required if you are using Pi-hole as your DHCP server
          - ""80:80/tcp""
        environment:      
          TZ: 'America/Denver'
          WEBPASSWORD: '*password*'
          PIHOLE_DNS_: 'unbound'
          CUSTOM_CACHE_SIZE: '0'
          FTLCONF_REPLY_ADDR4: '*host IPv4*'
          FTLCONF_REPLY_ADDR6: '*host IPv6*'
        # Volumes store your data between container upgrades
        volumes:
          - './etc-pihole:/etc/pihole'
          - './etc-dnsmasq.d:/etc/dnsmasq.d'
     
      unbound:
        container_name: unbound
        image: mvance/unbound-rpi:latest
        networks: 
          - dns_net
        ports:
          - ""5053:53/tcp""
          - ""5053:53/udp""
        volumes:
          - './etc-unbound:/etc/unbound'
          - './crontabs:/var/spool/cron/crontabs'
        restart: unless-stopped",pihole,1650458772.0
2347,comment,1,i5h3s5r,,">  although it does not work

You'll need to provide at least *some* details.",pihole,1650459045.0
2348,comment,1,i5heldr,,"Getting an IPv6 connection with firewall rules to the Docker container is a complicated part. You might want head over to r/docker for that.

I don't think that you want this unbound image. It is setup by default as a forwarder to Cloudflare with DNS over TLS.",pihole,1650463888.0
2349,comment,1,i5h3xz5,,"The network fails to start because of an invalid subnet, but I think this is more complicated than it needs to be and someone has a simpler file somewhere",pihole,1650459125.0
2350,comment,1,i5hhvkz,,"I will, is it worth it to get it all working in ipv4 first? And I appreciate it, what image should i use instead?",pihole,1650465237.0
2351,comment,1,i5h490e,,"Remove the ipam and following data, try again. You don't need a massively complicated network anyway.",pihole,1650459276.0
2352,comment,1,i5hrs9w,,"I'm using mvance/unbound-rpi:latest successfully. You can configure in different ways in unbound.conf. I'm only running Ip4 but I do have:

networks:

  dns\_net:

ipv4\_address: [172.30.0.6](https://172.30.0.6)

For PiHole and [172.30.0.7](https://172.30.0.7) for Unbound. I'd imagine you need a network ""subnet"" for ipv6 in dns\_net and settings for pihole and unbound as well. Sorry not sure though.",pihole,1650469165.0
2353,comment,1,i5h69c0,,"I still get this error:

    failed to create network pi-hole_dns_net: Error response from daemon: could not find an available, non-overlapping IPv6 address pool among the defaults to assign to the network",pihole,1650460238.0
2354,post,12,u7towc,Got a new raspberry pi ready for a pihole,"Hi

Got a raspberry 4 and ready to go with a pihole.
However
The other half works from home and I don't want it mucking up her pc. She connects to the works system via a VPN as the use something like Citrix and uses it to access other systems. Am I going to run into problems or can I just assign her lapto to run via the router as normal without the pihole.
Router is an archer vr600 been using cloudflair without any problems as a DNS.

Thanks for any suggestions


Thanks",pihole,1650451817.0
2355,comment,19,i5gtu27,,"You’re probably going to be fine. The work VPN will likely use its own DNS once connected, so pi-hole probably won’t affect the work computer unless you prevent it from connecting to the work VPN in the first place.",pihole,1650453483.0
2356,comment,12,i5gwbh4,,"The most likely scenario is that your other half's work VPN will bypass pi-hole completely.

If it doesn't, you can use the groups feature of pi-hole to put your other half's machine in its own group with no block lists associated with it.",pihole,1650455046.0
2357,comment,8,i5hb908,,I work from home connecting to a VPN and Citrix with no issues. Pihole will just resolve the initial web address for the VPN connection. Everything after that will be tunnelled through the VPN anyway.,pihole,1650462481.0
2358,comment,6,i5gutpo,,"If in doubt, map that device to none of the blocklist. Go to group management > client and add the device, then unselect group ""default """,pihole,1650454122.0
2359,comment,6,i5hvdoc,,"The real question in this thread is: “Where on earth did you find a Raspberry Pi?” No, seriously… I’ve been looking for more than a month to start learning Kubernetes and it’s nothing but scalpers.",pihole,1650470560.0
2360,comment,2,i5grksz,,"same situation here, no problem at all. juts make sure that you don't use any aggressive adblock lists.",pihole,1650451949.0
2361,comment,1,i5ix958,,"I have two raspberry running pihole, so that if one fails, the other will take the turn. And actually the zero2w is running quite unstable with Wi-Fi, while the Pi4/8GB is running smooth on 5GHZ since I turned off Power save.",pihole,1650485163.0
2362,comment,1,i5jbu39,,"I have almost the same setup here. The VPN will almost certainly bypass the local DNS. The other problem is that if it’s a large corporate, the laptop will be very chatty. I took the aggressive approach of blocking everything work-specific (it’s *my* network, right!) but more considerate approaches are available if you’d like to put the laptop on a DHCP reservation and on a separate group, then you can apply specific blocklists and black/whitelists to it.",pihole,1650490895.0
2363,comment,0,i5hbty8,,Thank you,pihole,1650462727.0
2364,comment,1,i5hbugb,,Thank you,pihole,1650462732.0
2365,comment,1,i5hbwit,,Thank you,pihole,1650462757.0
2366,comment,1,i5hbutm,,Thank you,pihole,1650462737.0
2367,comment,3,i5iq7bi,,"Raspberry pi 4 I got it on eBay for £57.89 in box brand new on the auction. I bid  2p more then the other person... It was with new power supply, case and 64 GB as card.

What about the stores listed on the pi website?",pihole,1650482441.0
2368,comment,2,i5ip4z4,,Same problem here.,pihole,1650482037.0
2369,comment,2,i5jdkne,,"If you can't find a pi, you might jump on ebay on find an old Intel NUC..you can get a old one for $100 or so.
It's x86, but it's an option to look at",pihole,1650491614.0
2370,comment,2,i5hbvja,,Will do . Thank you,pihole,1650462745.0
2371,comment,1,i5jdfl5,,You can also set her work laptop in the exclude group so she will not use the pihole block list.,pihole,1650491555.0
2372,comment,1,i5irf6p,,"You got a really good deal then. They sell new from authorized retailers (just the board) for $75 in the US. 

Unfortunately, all the retailers sell out almost instantly whenever they have stock. Those sites that take back orders have over a year wait on their projected fulfillment.",pihole,1650482914.0
2373,comment,1,i5ji680,,"I’ve never used one of those before. What does the power draw on one of those look like? (I haven’t been in the x86 world in some time.) one of the really nice things about Pis is that I can run a couple of them off my PoE switch for less than my WiFi access points draw.

When you’re going to leave something turned on 24/7, power costs can add up pretty quickly.",pihole,1650493564.0
2374,comment,2,i5jv5lz,,"They can varry. Some of them are as low as 6w, it can vary alot based on the model.
So only slightly higher then a Pi.

Also alot of them can go up to 16GB of RAM, and use m.2 storage.",pihole,1650499268.0
2375,post,9,u7tary,Creating an Error message?,"Right now, when a website is being blocked by pihole, the browser just shows its standard ""DNS error"" message. But would it be possible to have the PiHole redirect me to a customized Error html file or something?

Because right now, i have no way of distinguishing between Sites that are blocked and sites that are genuinely unavailable.

Can someone help me out?",pihole,1650450197.0
2376,comment,2,i5grc0h,,"It's possible with http sites to 'inject' locally your own message , but not for https. And the majority today is using https.
No it's not possible.",pihole,1650451775.0
2377,comment,2,i5grdti,,See https://discourse.pi-hole.net/t/step-by-step-custom-block-page/38573,pihole,1650451810.0
2378,comment,1,i5gyefk,,"I see, it's a shame that it can't be done with HTTPS sites. Thanks for the help",pihole,1650456242.0
2379,comment,1,i5gz9i9,,"This is one purpose of HTTPS, it makes sure nobody else can ""inject"" content coming from another domain. Any your error message would be content coming not from the initial domain.",pihole,1650456718.0
2380,comment,1,i5gzrbu,,"That does make sense, yeah. Would it be possible for the PiHole to, instead of injecting code, directly redirect me to a local website?",pihole,1650456986.0
2381,comment,2,i5h0sz6,,"No, same problem here, the content is coming from another domain.  


[https://docs.pi-hole.net/ftldns/blockingmode/](https://docs.pi-hole.net/ftldns/blockingmode/)",pihole,1650457539.0
2382,comment,2,i5h2yba,,"I see, alright, thanks a lot!",pihole,1650458640.0
2383,post,2,u7sa3v,Will PiHole+PiVPN(WireGuard) be able to run on this hardware?," 

Because  it's too hard to find a Raspberry Pi at a reasonable price right now.  I'm going to run PiHole+PiVPN on a laptop that i don't use anymore.  Here's the specs:

* **CPU: Celeron N3350 - 2cores, 1.1GHz**
* **RAM: 2GB**
* **Storage : 16GB (i think)**
* WiFi 802.11 AC (1 x 1) + Bluetooth 4.0  ,1 x USB 3.0 with always-on charging,1 x Type-C USB 3.0,  HDMI, Micro SD card reader

Will  the above laptop be able to run it well? I feel like the CPU is way too  weak for this. What distro should i use? im only running it headless.",pihole,1650445785.0
2384,comment,7,i5gkq0d,,"Why would it be to weak ?
The processor and memory in a RPI is much less.
Put debian without GUI on it, and you'll be fine.",pihole,1650446543.0
2385,comment,5,i5gkv8a,,"That combination would run on the original Revision 1 model B RPi. You could very likely squeeze multiple tunnels into one (especially if they were split tunnel rather than full tunnel).

TL;DR: Yes. It'll be fine. Pi-hole will almost literally run on a potato.",pihole,1650446668.0
2386,comment,4,i5gqp5m,,From my experience Pi-Hole/WireGuard runs on a potato. But it might be slow. For clients I’m mostly using a split tunnel setup. This way not everything has to be encrypted.,pihole,1650451318.0
2387,comment,2,i5gmjdg,,"Ill run whole home automation with honeassistant and pihole and wireguard server with that hardware,


Of course that will run flawlessly for pihole and wireguard only",pihole,1650448084.0
2388,comment,2,i5h3mvv,,"If it's only for a few VPN clients , then yes.",pihole,1650458973.0
2389,comment,1,i5hpe5r,,That setup requires very little processing power. I'm using a Pi4B 8GB to run a similar setup and I have to check its pulse to make sure it's alive.,pihole,1650468238.0
2390,comment,1,i5i9u4z,,"Assuming your VPN usage is relatively low, ie only you and a few family members, then this is fine. Ram is a bit low for heavy VPN usage, but since this set up will support 2 VPN users + pihole on a raspberry pi zero (single core 1ghz and 512mb ram), your set set up should support 5-6 users, maybe even more.",pihole,1650476100.0
2391,comment,1,i5il360,,That's pretty big overkill for those two.,pihole,1650480459.0
2392,comment,1,i5ldrfi,,You may also check out Dietpi which support many different brand of SMB.  Installing Pihole and PiVPN using Dietpi is dead simple.,pihole,1650530473.0
2393,comment,3,i5hfn6i,,r/taterhole,pihole,1650464322.0
2394,post,5,u7r8h3,DHCP Proxy,"I tried to configure the dnsmasq in my pihole to act as dhcp proxy for adding pxe information.

I dont want to use the full DHCP server from pihole. I will keep my FritzBox for this.

So I created a file /etc/dnsmasq.d/02-pxe.conf and added `dhcp-range=`[`192.168.188.0`](https://192.168.188.0)`,proxy` and restart with `pihole restartdns`

After this pihole will not start. What I am doing wrong?",pihole,1650441056.0
2395,comment,2,i5gesw3,,Why don‘t you just turn off DHCP in Pihole?,pihole,1650441394.0
2396,comment,1,i5gk1i1,,The DHCP function is already turned off in the web ui.,pihole,1650445963.0
2397,comment,1,i5gkdgk,,What do you intend with your created file? Where did you get this idea from?,pihole,1650446251.0
2398,comment,1,i5gkrwk,,"I want to add additional dhcp options to boot via pxe. The FritzBox did not support this additional options. The method is called dhcp proxy.

[https://blog.sengotta.net/pxe-server-mit-dnsmasq/](https://blog.sengotta.net/pxe-server-mit-dnsmasq/)",pihole,1650446587.0
2399,comment,1,i5gmv4f,,">Where did you get this idea from?

Pi-hole embeds dnsmasq, and as such, has the fleet of dnsmasq configuration available to it.

Most users just seem to either never figure this out, or never have a reason to. It's significantly more extensible than the comparatively few bells and whistles the web interface provides access to.",pihole,1650448350.0
2400,comment,2,i5gmo78,,"I know DHCP proxy for using a DHCP server in a different network (so the router acts as proxy for the network the client is in but the the server isn‘t).

Not sure if a server and it‘s proxy can be in the same network. The client might see two then, I guess.",pihole,1650448192.0
2401,comment,1,i5gqgce,,"So I guess the idea with the proxy is to use it to inject additional options into the DHCP replies from Fritzbox. 

Again, I am sceptic that both (server and proxy) are serving in the same subnet. At best we get a race condition and randomly the client receives the options or not.

It does not directly explain why Pihole isn‘t working anymore. Probably the copy&paste is incorrect, but I don‘t know.",pihole,1650451140.0
2402,comment,1,i5gqrfj,,"Can the OP explain the exact behavior „Pihole doesn’t start“? Do you mean the Raspberry Pi doesn‘t start? Or the Pihole container? 

Did you watch the messages / view the logs?",pihole,1650451363.0
2403,comment,1,i5gs9ud,,The race conditions are not the problem. The options wil extend only a valid DHCP response and has to be in the same subnet to work.,pihole,1650452437.0
2404,comment,1,i5gsp1s,,I hat already run such a configuration without pihole and only dnsmasq on an other system and everything works.,pihole,1650452725.0
2405,comment,1,i5gsm8e,,Pihole is running in a docker environment. When I watch with `docker-compose logs -f` an got the error `FATAL ERROR in dnsmasq core: cannot open or create lease file /var/lib/misc/dnsmasq.leases: Permission denied.` And the process stops and docker restarts it until I removed the additional line from 02-pxe.conf.,pihole,1650452672.0
2406,comment,2,i5gtdpy,,"Ah, that sounds like a very tangible hint! I guess Google has good answers, if not you could try giving creation rights to everyone in this directory.",pihole,1650453187.0
2407,comment,1,i5ig0wc,,"`sudo mkdir /var/lib/misc`

`sudo touch /var/lib/misc/dnsmasq.leases`

`sudo chown pihole:pihole /var/lib/misc/dnsmasq.leases`


then restart the service.",pihole,1650478481.0
2408,post,3,u7m2p2,Pihole on docker not starting due to s6 overlay," s6-svc: fatal: unable to control /var/run/s6/services/lighttpd-access-log: supervisor not listening  
\[s6-finish\] waiting for services.  
s6-svc: fatal: unable to control /var/run/s6/services/lighttpd-error-log: supervisor not listening 

Research on stackoverflow and places didn't yield any change. Tried multiple different containers besides the official docker one and different tutorials. Nope ain't working. So now I got it working with the pipe to bash because F docker.

And the container never starts up. On both current latest Ubuntu server and current latest LTS release

Brand new installs. Just not working. Hangs on docker, shows healthy and when you eventually stop it it gives the error above. Went to s6 folks and they said ask the container maintainer to upgrade to s6 v3. Hardware is: 

 AMD GX-212JC 1.2GHz  
4gb ram 15gb ssd",pihole,1650421724.0
2409,post,2,u7lmhj,How do identify what's calling out to domain,"Please redirect me if this has been answered elsewhere - my search hasn't yielded results, partially because I'm not exactly sure what to search for.

Some device on my home network has called out to [api2.branch.io](https://api2.branch.io) 12,000 times in 24 hours. It's causing (AFAIK) other devices to lag out (ie, I have to refresh the page for it load). I've seen that domain pop up before, and it appears to be an online tracker for ads and data mining that's fairly prolific.

Anyway, the only IP address on the pihole client list is the router itself, so it looks to me like all the devices attached to the router get dumped in the same bucket as far as the pihole is concerned. Is there a way to identify what app/device is trying to reach that domain so many times?  


It may have started showing up when my wife downloaded TikTok. I'm not sure, tbh.

Thanks in advance.",pihole,1650420298.0
2410,comment,1,i5fjzzg,,"The [pinned FAQ](https://www.reddit.com/r/pihole/comments/frum61/frequently_asked_questions) answers many of your questions.

Edited to add: As an aside, while non-trivial, the stated case of approximately ~8 queries per second shouldn't really be taxing the system terribly hard. Especially if it's not novel requests and it's just repeatedly hitting cache.

In testing I've seen Pi-hole's FTL handle much greater loading of novel traffic.",pihole,1650422164.0
2411,comment,1,i5g9kxb,,"[Funnily this exact thing came up in discussion just recently.](https://www.reddit.com/r/pihole/comments/tolq3g/fyi_it_seems_that_the_reddit_app_is_responsible/)

TL;DR - Reddit app does that, and due to a case of it utilising one of those tracking pixels. Pretty much every device with the Reddit app is contributing to the api2.branch.io spam",pihole,1650437098.0
2412,comment,1,i5grgsq,,"You probably have your router DNS set to your pihole, but your devices are still receiving the DNS address for your router.  If your router DHCP server is handing out IP addresses to your devices, it should also be handing out your pihole IP address for DNS.  If your pihole is now acting as your DHCP server, it needs to be configured to hand out the pihole IP address for DNS.",pihole,1650451870.0
2413,comment,1,i5grm9l,,Thanks! I'll take a look again.,pihole,1650451978.0
2414,comment,3,i5ghfgl,,"Also, I recommend looking that thread, as I had personally found a workaround to reduce the spam (thanks dnsmasq!)  

To answer's OP other question  

> Anyway, the only IP address on the pihole client list is the router itself, so it looks to me like all the devices attached to the router get dumped in the same bucket as far as the pihole is concerned. Is there a way to identify what app/device is trying to reach that domain so many times?

Yes there's the feature you need, it's called ""Conditional forwarding"". I think it is in Settings > DNS but I'm not sure, you should check the common guides  
It should allow to obtain the device names from the router if it is compatible  
Another last-resort solution would be to turn off the router's DHCP and use the one built into Pihole",pihole,1650443685.0
2415,comment,1,i5grnmj,,That link seems to suit this situation accurately. Thanks!,pihole,1650452004.0
2416,comment,1,i5h2bv3,,OP of that post here. Thanks for mentioning.,pihole,1650458330.0
2417,comment,1,i5grq3t,,This sounds accurate. I'll look into this. Thanks!,pihole,1650452053.0
2418,comment,1,i5grp3u,,Ah! This seems like it would provide the device info I'm looking for. Thanks.,pihole,1650452034.0
2419,post,1,u7lak2,Using pihole on IoT OpnSense,"[https://prnt.sc/rpM1b9NizPdz](https://prnt.sc/rpM1b9NizPdz)

i've attached a copy of my firewall rules above. My main lan is [192.168.1.1/24](https://192.168.1.1/24) iot vlan is [192.168.20.1/24](https://192.168.20.1/24)

What would be the correct firewall rule to allow my IoT to access my pihole on main lan. I've tried to set it in the firewall as the rules are processed top to bottom, with the first rule being. Source IoT network; destination: PIholeaddresses port 53 however none of my IOT devices are able to get network. If i change the dns manually to lets say something like [1.1.1.1](https://1.1.1.1) on the IoT the devices are then able to connect to the internet again. Mind you as of right now, I have the dns set to the firewall.",pihole,1650419289.0
2420,comment,1,i5fgdbo,,Destination should be the IP address of the server that has the pihole installed. Leave out the port.  Should not be needed. Also port 53 may not be the port for an internal server.  53 is for external dns traffic.,pihole,1650420537.0
2421,comment,1,i5g53h1,,"What’s the IP address of your PiHole? According to the FW rules it is 193.168.20.1. Is that right? I have had success putting the rules in the floating rules section. I have all my networks that use the PiHole in a FW group and point that source at the PiHole IP and pass DNS port 53. Be sure to include all the interfaces you want the rule for. Then, I lock DNS down with another rule to Block any source to any destination on DNS port 53. I also put the PiHole IP in the DNS on the DHCP services. It’s working for me.",pihole,1650433817.0
2422,comment,1,i5fiqge,,Doesnt pi hope use port 53?,pihole,1650421590.0
2423,post,0,u7gdel,Having difficulty installing on my MacBook Air,"Went to site and tried following instructions, wouldn’t work",pihole,1650404685.0
2424,comment,4,i5efpu9,,The MacBook Air does not run a supported OS.,pihole,1650404972.0
2425,comment,2,i5ek9op,,"pihole runs on Linux, Try making a virtual machine",pihole,1650406836.0
2426,comment,-2,i5ejkbl,,"Really? It’s the newer one, M1 chip",pihole,1650406546.0
2427,comment,-1,i5ekchn,,Virtual machine?,pihole,1650406867.0
2428,comment,3,i5eqp6l,,"The chip has no bearing. MacOS is not a supported OS. You can run Pi-hole in a docker environment or in a VM, but not on the native Mac OS.",pihole,1650409521.0
2429,comment,2,i5el4w2,,https://www.serverwatch.com/guides/virtual-machines/,pihole,1650407194.0
2430,comment,1,i5elil9,,https://setapp.com/how-to/how-to-use-virtual-machine-on-mac,pihole,1650407354.0
2431,post,3,u7fs2d,piVPN Question,Not sure if this can be answered here but anyways - I have successfully installed PiVPN along side my piHole. I used Wireguard and was able to connect with no issues. I am curious about any further security steps. In the setup I used Public IP....wasn't sure if there is a risk there or not? Any suggestions would be appreciated!,pihole,1650403082.0
2432,comment,1,i5emb89,,"Did you already have a public IP address from your ISP and are you using it for any other reasons? 

A static IP makes some things easier, like you don't have to do the required port forwarding in your router that you do for an internal, private IP address. But it also means that your public IP is available for every scammer in the world to port scan all the time. 

Do you have other ports open for other services on that same machine?",pihole,1650407681.0
2433,comment,3,i5fkktj,,">But it also means that your public IP is available for every scammer in the world to port scan all the time. 

Scanning the entire public address space, particularly if you're just looking at low hanging fruit ports, is not particularly computationally intensive, and hasn't been for some time now.

It doesn't really matter if the IP is statically or dynamically assigned. The dynamic lease time will far exceed the time it takes to scan the public address space.",pihole,1650422432.0
2434,comment,1,i5enfws,,I'm a little new at this - during the PiVPN setup it just asked if I wanted to use public IP and that's what I chose. So would someone need my config (tunnel) file in order to hack this?,pihole,1650408150.0
2435,comment,1,i5gi7tn,,"> A static IP makes some things easier, like you don't have to do the required port forwarding in your router that you do for an internal, private IP address.  

I think you merged the ideas of ""static public IP"" and ""public IP specific for the VPN"" : you can have a ""static IP"" for your LAN and still require port forwarding. A non-static IP means that when the ISP changes your IP, the VPN client won't find *your* LAN anymore.  
To be honest, I never heard of a server being directly available to the Internet with it's own public IP, but I guess it can be done.  



My personal setup is :  
0) Setup an account with a dynDNS provider, take a domain    
1) Install the DDNS updater to the piVPN machine  
2) Setup piVPN to use the DDNS and listen to TCP  
3) In Pihole, make a local request so that DDNS resolves to piVPN directly instead of use the worldwide record  
4) Port forward the TCP port... and TCP443  

Results :  
- DDNS allows to circumvent the need for a static IP  
- Thanks to portforward, I can use use the HTTPS port if the standard one is blocked on the host network  
- The local record means I can test the VPN even from my LAN despite the lack of NAT loopback support",pihole,1650444372.0
2436,comment,2,i5fm271,,"Fair enough. Plenty of reasons to have a public IP address. It's worth the exercise to consider when you need one and when you don't.

BTW, your Pihole plug-in on GitHub is awesome!",pihole,1650423118.0
2437,comment,1,i5epvs6,,"I'd watch this video, which is a pretty good walkthrough of the setup and you can see where he talks about public IP addresses and dynamic DNS entries.  


https://www.youtube.com/watch?v=Q4zlrc0F4NU",pihole,1650409178.0
2438,comment,1,i5ghmwh,,"> So would someone need my config (tunnel) file in order to hack this?  

In short : yes.  
VPNs are designed to be used over unsafe networks, so (by default?) you will need a private key to get access, in the same way we use private certs to authentificate websites.  

Of course no tech is 100% reliable, but ""exposing a VPN server"" is probably one of the less-risky moves available if you want to reach your network from the outside.",pihole,1650443870.0
2439,comment,1,i5gntwt,,">BTW, your Pihole plug-in on GitHub is awesome!

Thank you for the kind words. It's moments like this that, while few and far between, validate my decision to push it public and form it into what it is now. It's motivating, and I appreciate it.

Reasonably recently I have gone on a bit of a kick to make it somewhat more functional, flexible, and dynamic.

 - Dynamic/automatic update, as you probably know.

 - The old independent plugins are gone, and have been replaced with a single monolithic plugin that determines its function from the basename of the file or dynamic link.

 - There's now an interactive help function.

 - If the `munin-pihole-plugins` management script is installed locally (the default), if you have `bash-completion` available, the script will make use of it for tab completion of commands.

 - The latest addition I think was the ability to easily switch branches between master and development with an environment variable, but that's not terribly important at the moment with both branches being nearly identical and almost everything being backfilled from development into master.

One thing I haven't yet pushed forward in either branch is I'm working towards adding the ability to set environment variables from a central file/location, somewhat similar to Pi-hole's `setupVars.conf` file if the management script is installed locally - so that users don't need to push/pop env vars manually prior to each run if they're using an exotic configuration I don't cater for easily.

Any bugs, issues, feature requests I'm happy to entertain. Either here or via GitHub.

Thank you again.",pihole,1650449137.0
2440,comment,1,i5esmw9,,Awesome. Thank you!,pihole,1650410356.0
2441,post,1,u7dxfz,Need community opinion (developers too).,"Hi,

I’m still a bit new to Pi-hole and recursive DNSs with Unbound. I have two scenarios I want to run by the community and maybe some of the developers can chime in and see what is the best practice.

For the current scenarios, I'm running Pi-hole and Unbound.

Scenario 1:

Pi-hole DNSSEC and Cache ON (default setting).

Scenario 2:

Pi-hole DNSSEC OFF and Cache = 0.

The reason I'm turned apart is, that I believe I'm introducing latency in scenario 1. In scenario 1 is Pi-hole verifing DNSSEC between itself and Unbound, and then Unbound has to go ahead and do the same with it's respective DNS query. Am I understanding this correctly?

I feel scenario 2, it skips all this steps and lets Unbound handle DNSSEC and cache all together while Pi-hole just works on doing what it does best, blocking junk. My other question for scenario 2 is, are DNS quieres DNSSEC when the client makes a request? I ask, because by turning DNSSEC OFF in this scenario in Pi-hole, does it affect the security of the request?

Thanks in advance and block on 💪",pihole,1650398139.0
2442,comment,4,i5e173u,,">I believe I'm introducing latency in scenario 1

You are not.  More caches is not slower, it's faster.  The first answer a client receives is the fastest.  The following things cache DNS, and the first one a request hits is the fastest:

Browser, OS, Pi-hole, unbound.

>by turning DNSSEC OFF in this scenario in Pi-hole, does it affect the security of the request?

No.  Unbound is doing the DNSSEC function, and enabling DNSSEC in Pi-hole just adds the DNSSEC status in the query log.",pihole,1650399402.0
2443,comment,1,i5dyiv6,,How much latency difference are you seeing between the two?,pihole,1650398404.0
2444,comment,1,i5dz8fw,,I haven’t measured it. I’m just trying to streamline the setup.,pihole,1650398664.0
2445,post,67,u7dhqc,"I mostly understand what A (IPv4) and AAAA (IPv6) queries are, but why is HTTPS a separate category in PiHole?","Isn’t all traffic (at least in terms of website browsing) either IPv4 or IPv6? I also have a very basic understanding of SSL and was under the impression that a majority of websites used HTTPS these days, but I still don’t get how this is a separate request type from A and AAAA queries? I’m sorry if this is the wrong place to ask.",pihole,1650396948.0
2446,comment,63,i5e1hpv,,"HTTPS queries are produced by Apple devices, and are not yet a standard.  In the past, these were lumped into OTHER in Pi-hole, but we have since broken them out to their own category.

https://discourse.pi-hole.net/t/what-is-this-other-category-about/38490",pihole,1650399510.0
2447,comment,20,i5e04nr,,"[This post](https://www.reddit.com/r/pihole/comments/l5ocyi/query_type_https/) has the most likely answer. Basically it's a new kind of DNS record that Apple is using on its more recent devices. EDIT: There is also a [Wikipedia article](https://en.wikipedia.org/wiki/List_of_DNS_record_types) with a list of all the DNS record types, though it doesn't really explain the HTTPS type.",pihole,1650398999.0
2448,comment,-32,i5dxo2z,,"It’s separate because an ipv4 address its different than an ipv6. Www.google.com can be xxx.xxx.xxx.xxx and yyyy:yyyy:yyyy::yyyy.

Those are just types of addresses.

Https is an protocol, where S means secure.

So, ipv4 or v6 are just addresses and http or https are protocols in use.",pihole,1650398089.0
2449,comment,14,i5e2dzp,,"Thanks! Are these queries problematic in anyway? I personally don’t have any issues with it from an adblocking perspective, so I’m just wondering if I can safely ignore it.",pihole,1650399844.0
2450,comment,3,i5e1hsd,,[deleted],pihole,1650399511.0
2451,comment,3,i5ffuir,,Is the internet a series of tubes?,pihole,1650420307.0
2452,comment,1,i5ntluv,,"this is not about the HTTPS protocol, but about the new SVCB/HTTPS DNS record.",pihole,1650572088.0
2453,comment,15,i5fhugl,,"> Are these queries problematic in anyway? 

Au contraire, `HTTPS`/`SVCB` records are helpful for:

1. Discovery of IPv6 and IPv4 endpoints (think of it like `A` and `AAAA` records merged into one).

2. Encrypted Client Hello for TLS v1.3 to prevent deep packet inspection based censorship and snooping.

3. Exposing metadata for services such a proxies (Apple uses it for iCloud Private Relay).

> ...so I’m just wondering if I can safely ignore it.

You can ignore if your DNS based firewall (pi hole in this case) can handle `HTTPS`/`SVCB` records just fine, because just like `CNAME` and `NS` records, these can be used to cloak domains, as well.

That said, DNS based firewall is already a weak security/privacy mechanism anyway.

Disclosure: I co-develop a DNS based firewall",pihole,1650421192.0
2454,comment,11,i5e4j7p,,">	Are these queries problematic in anyway?

No.",pihole,1650400641.0
2455,comment,1,i5ggl1n,,"> My first thought was DoH too  

DOH is a different beast: DOH is the protocol used to reach the resolver, it won't affect what is sent to the resolver. :)",pihole,1650442950.0
2456,post,1,u7bckm,Deeper Connect Mini and Pi-hole placement,"I have a Pi running Pi-hole and I also have a Deeper Connect Mini.

My main computer is hard wired, but other devices are wireless run wireless straight from the router which  is ADSL

I have currently placed the Pi-hole Pi directly in the back of the router, but the wired computer (that is connecting through the deeper connect mini) is not picking up quires on the Pi-hole (showing yellow in network overview)

Should I place the Pi-hole between the Deeper Connect Mini and Computer instead, and if I do this will the wireless devices then not be able to see the Pi-hole?",pihole,1650391332.0
2457,comment,1,i5g2prb,,"My understanding is, the deeper connect is supposed to be between your modem and the router.",pihole,1650432215.0
2458,comment,1,i5jiaqd,,"My Modem is my Router and same unit for WiFi devices. Currently it is:

wired computer -> DPR unit -> ADSL modem/gateway/router/wifi device (TD-W9970) -> internet.

and

Pi Hole -> ADSL modem/gateway/router/wifi device (TD-W9970) -> internet.

This is because the router has 4 ethernet ports coming out, so the DPR unit is connected to one and the Pi-Hole is connected to another.

I can't see how this would allow me to connect it between the modem and router, when the modem is the router.",pihole,1650493620.0
2459,comment,1,i5kck00,,I see what you mean. I remember just seeing that setup on their website. I would have to make more research and see how it works,pihole,1650506838.0
2460,post,11,u77rjz,"""Allow only local requests"" setting does not work","I have installed pihole in a docker container and it works great, but when I set the DNS setting to only allow local requests, pihole doesn't work anymore. Pihole doesn't see local addresses as local.

&#x200B;

https://preview.redd.it/mrmhysys5iu81.png?width=997&format=png&auto=webp&s=fd7c04d4e3e616399474d83c62bd85c5657984c6

[192.168.178.10](https://192.168.178.10) is a device on my local network, I am using a network switch where both the [192.168.178.10](https://192.168.178.10) device and the pihole device are plugged into, maybe that adds an extra hop?

Output of dig (seems to be correct):

    ; <<>> DiG 9.18.1 <<>> google.com
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 40017
    ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1
    
    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 4096
    ;; QUESTION SECTION:
    ;google.com.			IN	A
    
    ;; ANSWER SECTION:
    google.com.		300	IN	A	172.217.168.206
    
    ;; Query time: 30 msec
    ;; SERVER: 192.168.178.38#53(192.168.178.38) (UDP)
    ;; WHEN: Tue Apr 19 17:19:52 CEST 2022
    ;; MSG SIZE  rcvd: 55
    

Output of traceroute to my pihole install:

    traceroute -m 40 -p 53 192.168.178.38
    traceroute to 192.168.178.38 (192.168.178.38), 40 hops max, 60 byte packets
     1  [local domainname that I've set] (192.168.178.38)  0.152 ms * *
     2  * * *
     3  * * *
     4  * * *
     5  * * [local domainname that I've set] (192.168.178.38)  1.007 ms
    

Traceroute seems to indicate that there is more than one hop, I think. How could I solve this? Thanks!",pihole,1650381964.0
2461,comment,3,i5crz8n,,"Have you looked at what ip addresses are actually LOCAL to the pihole network?

`sudo docker network inspect bridge (or whatever network you are using)`",pihole,1650382464.0
2462,comment,2,i5cta36,,"You could try ""Respond only on interface eth0"", if your device sits behind a router and port 53 is not forwarded.",pihole,1650382961.0
2463,comment,1,i5cx0sx,,"Ah, indeed, my home network isn't the same as the local docker network. Is it possible to use this setting, but instead of 1 hop, have a low amount of hops?",pihole,1650384402.0
2464,comment,1,i5cwmfh,,Would that result in a similar level of security?,pihole,1650384244.0
2465,comment,2,i5czh36,,"You could of course change the docker ~~network~~ container to a ""host"" network and assign it an IP address to utilize those settings... but that's not something I have found necessary.",pihole,1650385352.0
2466,comment,2,i5cy9p7,,"Sure, the DNS querries get transmitted on port 53. When you don't forward port 53 on your router, nobody from outside can send DNS requests to your device inside your network.

""These options are dangerous on devices directly connected to the Internet such as cloud instances and are only safe if your Pi-hole is properly firewalled. In a typical at-home setup where your Pi-hole is located within your local network (and you have not forwarded port 53 in your router!) they are safe to use.""  


Your router should be a proper firewall.",pihole,1650384894.0
2467,comment,1,i5cz5pz,,"My pihole instance is set to respond ""only on the interface"". At the edge of my network I have a firewall to handle security.

I am not worried about internal devices, I want them to utilize pihole.",pihole,1650385233.0
2468,post,3,u775m1,"Question about Unbound and (Blocked, external NULL)","Hello all,

because there were problems with a Synology Diskstation 218 (home office) of an employer, I put the Diskstation into a whitelist group.From my RaspberryPi I use DietPi and have set Unbound for DNS. I had now read in the forum that it is due to DNS settings. My FritzBox uses the RaspberryPi as a DNS server.What can I do if I don't have access to the Synology dashboard? I always have to ask an admin when he has to change something in the settings of the Diskstation.

* **Pi-hole** [v5.9.1](https://github.com/pi-hole/pi-hole/releases/v5.9.1)
* **FTL** [v5.14](https://github.com/pi-hole/FTL/releases/v5.14)
* **Web Interface** [v5.11](https://github.com/pi-hole/AdminLTE/releases/v5.11)

Thanks

https://preview.redd.it/59vhw6ac3iu81.png?width=1244&format=png&auto=webp&s=685a29186e0cc06317ed80b6a076fa52c970c212

https://preview.redd.it/qz5wy6we2iu81.png?width=1241&format=png&auto=webp&s=0aee8f44c7adf64717a9918c5f7f21e4df6b0122",pihole,1650380372.0
2469,comment,2,i5ctzqs,,"All I can see is that only the IPv6 requests get blocked, not the IPv4 ones.  
So what about whitelisting this one client at all?",pihole,1650383236.0
2470,comment,1,i5ges2w,,"Thank you, where do I set this exactly?  
I have selected the Diskstation in my devices (groups) and have not added the group ""Whitelist"" to any adlist.   
I don't see anything where I can distinguish between IPv6 and IPv4.  


[https://i.imgur.com/gDLboij.png](https://i.imgur.com/gDLboij.png)  


Greetings",pihole,1650441375.0
2471,comment,1,i5gzlux,,"I'm not quite sure what you want to achieve, but if you want to block it, just click on 'block' in the query log.  
If you want to whitelist it, just add the domain with the AAAA record to the whitelist.",pihole,1650456905.0
2472,comment,1,i5h36d6,,"Ok now I got it.  
The problem is, you are at home and want to connect to a diskstation, which is not inside your LAN?  
As we  can see in the first screenshot, the DNS requests for the domain of the diskstation is not blocked and answered by unbound, but you get a NODATA response. This means there is no record for the request. What kind of domain is this?  
Can you reach this domain when you use another DNS upstream server like Quad9 or something?  


Maybe it's possible to use a DDNS for the network where the diskstation is in?",pihole,1650458750.0
2473,comment,1,i5h4ttl,,"It lets another syn4 address through normally, while syn6 is blocked. I have also entered the complete address as a whitelist. It is still blocked, however.  


https://i.imgur.com/d4QqPLK.png  
https://i.imgur.com/cUCcIfO.png  
https://i.imgur.com/U5n6Knn.png",pihole,1650459558.0
2474,comment,2,i5h81e0,,"So it should be possible to connect via IPv4, these requests are not blocked, but they are answered with NODATA, so there is no A record for this domain. This is not a problem of pihole or unbound, it's a problem of the quickconnect stuff of synology. They have no A record in their nameservers for this domain.

What shows up when you check the domain with a service like [https://dnschecker.org](https://dnschecker.org)

?

The IPv6 request is maybe blocked bc you configured PiHole onyl to use IPv4?",pihole,1650461052.0
2475,comment,1,i5hi04r,,"Thank you for pointing this out, I only had ""127.0.0.1#5335"" under Custom 1, under Custom 3. I have now ""::1#5335"" for IPv6, I also entered it under ""nano /etc/network/interfaces"".

The blocked page is marked with green ticks at https://dnschecker.org/

https://i.imgur.com/RNaaONa.png",pihole,1650465288.0
2476,comment,2,i5hjifl,,"So you can reach it now from inside your network, with the IPv6 fix?",pihole,1650465898.0
2477,comment,1,i5l3yih,,"Will keep an eye on it. The blocked address no longer appears. Diskstation still does not synchronise live. I think the admin simply has to adjust something here. My private DS220 runs here without problems.

Since the entry for IPv6, my requests look very different. Where does that come from? Suddenly URLs appear in the QueryLog that I have never seen before, crazy :D[https://i.imgur.com/nK4zr8t.png](https://i.imgur.com/nK4zr8t.png)

Is the following entry for IPv6 actually necessary?

/etc/network/interfaces*iface eth0 inet6 staticpre-up modprobe ipv6address <IPv6 address>netmask 64*

Thanks for your help  


//Edit: https://i.imgur.com/JhtDvSC.png",pihole,1650522288.0
2478,comment,1,i5m49bz,,"TLDR: ask for a syn4 domain instead of syn6 (Does both sides even use IPv6?)
or try to use a DDNS on diskstation side.


To be honst, I'm not so familiar with IP6, but this entry in `/etc/network/interfaces` is for a static IPv6 adress on your eth0 interface. Since this is on eth0 and it's static, this is probably a link-local adress like fe80::1 ? But I'm only guessing. If it starts with 2 or 3 it's a global unicast address; your unique public adress. But I don't have enoug knowledge about IP6 to know if it's plausible to have a global adress in this place :)

And in the second screenshot is still the problem, no IPv4 record for this domain found and the AAAA (Ipv6) is blocked. But the domain starts with syn6, so I assume this is for the use only with IPv6. (I read a bit about the quick connect stuff of synology).
Can the owner of the diskstation provide a domain starting with syn4 to use IPv4? Or does your unbound config can even handle IPv6 properly? (`do-ip6: yes` in the config)   Or maybe it's even possible to use a DDNS at the Disksation station side, to provide both possibilities?
[https://kb.synology.com/en-us/DSM/tutorial/What_are_the_differences_between_QuickConnect_and_DDNS](https://kb.synology.com/en-us/DSM/tutorial/What_are_the_differences_between_QuickConnect_and_DDNS)

BTW remove the seconds DNS entry in pihole (::1#5335), it's not necessary (AAAA queries can be made over IPv4) and it can cause problems to set the second DNS entry like that.",pihole,1650547674.0
2479,post,13,u76as3,Telegram queries,"Whenever from one of my clients (a smartphone) I start and use Telegram I never see the relative queries in the Pihole. Whatsapp, Signal, Viber all do but I don't see Telegram.

How do I find the queries that it does?",pihole,1650378028.0
2480,comment,5,i5croc6,,"I ran  a quick tcpdump on my wireguard tunnel interface and my messages get sent to [149.154.167.50](https://149.154.167.50) which is a telegram server in the netherlands.So yes, they use IP and not domains to contact their servers.You could use packet sniffers or maybe even some software like GlassWire to see and monitor this network activity, I guess.",pihole,1650382350.0
2481,comment,1,i5cgxj6,,maybe it doesn't if it has static ips. there are no ads in telegram.,pihole,1650378175.0
2482,comment,7,i5d1j4t,,They actually use [DNS over HTTPS](https://github.com/DrKLO/Telegram/blob/master/TMessagesProj/src/main/java/org/telegram/tgnet/ConnectionsManager.java#L1083) to resolve the domains.,pihole,1650386131.0
2483,comment,1,i5chsea,,"the smartphone has dynamic IP, anyway it is on the same phone on which there are WA and Signal (ads neither here). Will Telegram eventually have to contact their servers for updates, contact list, photo downloads etc. or not?",pihole,1650378519.0
2484,comment,1,i5ggrw1,,"Then the nuclear solution is to block TCP 443 requests to their resolvers, redirect DNS 53 to pihole and block port TCP 853.  
That'll make impossible to use DoH or DoT, and make Pihole the only available alternative.",pihole,1650443112.0
2485,comment,4,i5chzup,,yes. but if the telegram servers have static ips there will be no queries. the app just knows where to connect to. or the telegram app has a hardcoded dns and doesn't use your pihole. that's what most smart tvs do and why you can't block their ads.,pihole,1650378600.0
2486,comment,2,i5cqgld,,"If telegram has hardcoded DNS, OP may be able to force redirect all DNS traffic to the pihole using their routers port forwarding or NAT redirecting. This is a good practice to do anyway IMO if you monitor the traffic on your network using the pihole like it seems OP is doing.",pihole,1650381893.0
2487,comment,1,i5czcia,,"I wanted to do the same for Chromecast, but didn't know how.

1. Do you happen to know how to do it on a Openwrt router ?

2. My PiHole (+Wireguard) is on a VPS, is it possible to do it on PiHole?

Sorry if my questions sound basic, I'm not as experienced as many folks here. Trying to self-teach all this.

Thanks in advance.",pihole,1650385304.0
2488,comment,2,i5fg1q3,,">Do you happen to know how to do it on a Openwrt router ?

Assuming you have OpenWRT router, you can run following shell script on the terminal as a root (**Remember to replace 192.168.1.102 with your PiHole ip !**)

It redirects all plain Do53 traffic to PiHole + Blocks known DoH server access to all the devices but PiHole! (This forces devices to use plain Do53 instead of DoH and PiHole can do its job. Also you can use your preferred DoH provider for the PiHole itself)

    # Redirect all Do53 queries to PiHole
    iptables -t nat -A PREROUTING -i br-lan -p udp ! --source 192.168.1.102 ! --destination 192.168.1.102 --dport 53 -j DNAT --to 192.168.1.102
    iptables -t nat -A PREROUTING -i br-lan -p tcp ! --source 192.168.1.102 ! --destination 192.168.1.102 --dport 53 -j DNAT --to 192.168.1.102
    iptables -t nat -A POSTROUTING -j MASQUERADE
    ## Block known DoH server connections
    curl https://raw.githubusercontent.com/jpgpi250/piholemanual/master/DOHipv4.txt > /tmp/DOHipv4.txt
    ipset create blacklist4 hash:ip
    while read line
    do
    ipset add blacklist4 ""$line""
    done < /tmp/DOHipv4.txt
    iptables -A forwarding_lan_rule ! --source 192.168.1.102 -m set --match-set blacklist4 dst -j reject

Note-You might need to install additional packages (i.e. curl, ipset etc) on your OpenWRT router for this script to work

&#x200B;

>My PiHole (+Wireguard) is on a VPS, is it possible to do it on PiHole?

I would suggest to do it on the home router level. Lesser traffic leaving outside your home network, better it is for security and privacy!",pihole,1650420395.0
2489,comment,1,i5d5oha,,"I do not have any real experience with Openwrt. But I'm sure it's possible. Others do this so you may be able to find a how to guide somewhere.

This wouldn't be possible directly on the pihole as you would use a router to stop the requests that are not going to your pihole and force them to go there. This is assuming they are not going through some form of a secure tunnel the rogue device is using.

As for self-teaching... I could only imagine if a had a few good mentors in life where I may have ended up. However that's not the case. Be your own teacher when others can't be. Read the documentation and try to see the cause and reaction by trying things. Even if it means it comes crashing down like a house of cards. Just make sure you learn something from that crash.... Maybe document stuff your self on the findings. This seems to work ok form me.",pihole,1650387727.0
2490,comment,1,i5gffec,,"Hey, thanks a whole bunch for taking the time to write this!

Please let me explain my network topology, maybe it'll help clarify 1 or 2 things.
* a VPS with PiHole + Unbound + Wireguard (WG as a server). PiHole and Unbound are installed following the official tuto on the PiHole website
* all devices (laptop, phones, etc.) as Wireguard clients
* the home router configured both as Wireguard client *and* gateway to the LAN, making all queries leaving the LAN go to through Wireguard and thus PiHole.

This last step was a bit tricky to achieve, IIRC I had to run a few scripts for it. So my OpenWRT router isn't as 'vanilla' as it could be thought initially. I'm afraid the above script (esp. involving iptables) would break a few things, and I don't have much time currently to fiddle with it searching for a fix.

Is it possible to translate these rules into LuCi (OpenWRT web interface) rules so I can enable/disable them easily?

Thanks again.",pihole,1650441932.0
2491,comment,1,i5hnp9j,,">This last step was a bit tricky to achieve, IIRC I had to run a few scripts for it. So my OpenWRT router isn't as 'vanilla' as it could be thought initially. I'm afraid the above script (esp. involving iptables) would break a few things, and I don't have much time currently to fiddle with it searching for a fix.

Well this indeed complicates things at your end. However, I believe if you replace PiHole address with your router IP and port 53 (or your wireguard client IP:PORT), it can solve your problem. It will NAT all the hardcoded DNS queries ([8.8.8.8](https://8.8.8.8) etc) to use your router (or wireguard client) as DNS server.  I can not verify this as I do not have such setup. 

>Is it possible to translate these rules into LuCi (OpenWRT web interface) rules so I can enable/disable them easily?

For OpenWRT v 21.02.2 or later 

1. go to Network > Firewall >Custom Rules and paste above code then click save
2. go to Status > Firewall > Restart Firewall",pihole,1650467577.0
2492,comment,1,i5hsfqy,,"Very kind of you, thank you so much 🙏",pihole,1650469415.0
2493,post,36,u70axo,"Installing on Jammy Jellyfish, Ubuntu 22.04, stuck at installer.","Unsupported OS detected: Ubuntu 22.04

blah blah, 2 days until release of 22.04

curl -sSL [https://install.pi-hole.net](https://install.pi-hole.net) | PIHOLE\_SKIP\_OS\_CHECK=true sudo -E bash

If I run the above, the installer is unresponsive, I can not pass ok.",pihole,1650357287.0
2494,comment,7,i5bqb2t,,"Theres a bug about ubuntu 22.04, the installer menu is broken",pihole,1650364465.0
2495,comment,5,i5bplvq,,"It is known.

https://github.com/pi-hole/pi-hole/issues/4693",pihole,1650363936.0
2496,comment,3,i5bov2u,,"Did you execute it in one line?
You can also try:

`curl -sSL https://install.pi-hole.net | export PIHOLE_SKIP_OS_CHECK=true sudo bash`",pihole,1650363374.0
2497,comment,3,i5phn9l,,"You can get it to work with the following command, seems like the smarter folks are aware and working on it in the meantime:

    sudo PIHOLE_SKIP_OS_CHECK=true bash -c ""$(curl -sSL https://install.pi-hole.net)""",pihole,1650599617.0
2498,comment,1,i5c1egn,,Docker is the way.,pihole,1650371241.0
2499,comment,-1,i5cci8n,,Don't install natively. Deploy via Docker.,pihole,1650376353.0
2500,comment,1,i5dyyrg,,"Is the issue with installation script itself or due to parsing through curl and piping its stdout?
I don't have Ubuntu 22.04 anywhere amongst my machines, but curious.",pihole,1650398566.0
2501,comment,7,i5bznt4,,"As of now, this version of Ubuntu is not supported. We support through 20.",pihole,1650370324.0
2502,comment,1,i5bpips,,">curl -sSL https://install.pi-hole.net | export PIHOLE\_SKIP\_OS\_CHECK=true sudo bash

curl: (23) Failure writing output to destination",pihole,1650363869.0
2503,comment,2,i6mqoav,,">sudo PIHOLE\_SKIP\_OS\_CHECK=true bash -c ""$(curl -sSL https://install.pi-hole.net)""  


Thank you. This helped out!",pihole,1651209313.0
2504,comment,1,i5qtpzs,,Debian Bullseye just works though :),pihole,1650633143.0
2505,comment,4,i5dbk3j,,To hell with docker and it's complicated overhead,pihole,1650389911.0
2506,comment,1,i5cqpes,,Why not Podman?,pihole,1650381982.0
2507,comment,0,i5c2z1a,,At all or just installation?,pihole,1650372042.0
2508,comment,1,i5bq5x5,,"Ok another try

`sudo curl -sSL https://install.pi-hole.net | export PIHOLE_SKIP_OS_CHECK=true sudo bash`",pihole,1650364359.0
2509,comment,2,i5dc199,,If you find docker complicated you’re misunderstanding something.,pihole,1650390085.0
2510,comment,1,i5deza1,,"Same thing, just a different brand. Go ahead.",pihole,1650391174.0
2511,comment,5,i5c9uk7,,"Just installation

I have mine running on 21.10

But if you have problems the pihole team can say, we only support 20.xx",pihole,1650375217.0
2512,comment,18,i5btumf,,"Got it working with:

curl -L https://install.pi-hole.net | PIHOLE\_SKIP\_OS\_CHECK=true sudo -E bash /dev/stdin --unattended  


using [https://discourse.pi-hole.net/t/pi-hole-as-part-of-a-post-installation-script/3523/4](https://discourse.pi-hole.net/t/pi-hole-as-part-of-a-post-installation-script/3523/4) and [https://discourse.pi-hole.net/t/what-is-setupvars-conf-and-how-do-i-use-it/3533](https://discourse.pi-hole.net/t/what-is-setupvars-conf-and-how-do-i-use-it/3533)",pihole,1650366912.0
2513,comment,2,i5eoq0h,,"Too many cryptic commands, If you want to upgrade or install another package you have to start all over and create a new docker or like most people wait for some kind hearted soul to to make a config file for you.

I call it BS, Give me the same environment as a bare metal or virtual machine I can change anything I want when I want",pihole,1650408688.0
2514,comment,7,i5cqoy9,,I just wanna thank u for posting the solution after finding it.,pihole,1650381977.0
2515,comment,3,i6rwn3f,,">curl -L   
>  
>https://install.pi-hole.net  
>  
> | PIHOLE\_SKIP\_OS\_CHECK=true sudo -E bash /dev/stdin --unattended

is comes back to the installer for me",pihole,1651313829.0
2516,comment,1,i6tlf4s,,Have you created a setupvars.conf?,pihole,1651345896.0
2517,comment,2,i7ep0ps,,"ohh  
i see   
thanks for the help  
works now",pihole,1651745472.0
2518,post,7,u6wdhc,Enable IPv6 for Pihole in Docker,"I'm trying to run pihole in a docker container with IPv6 capabilities, but setting the -IPv6 tag to true wasn't enough. When I run `pihole -d` inside the container I simply get a `[✗] No IPv6 address(es) found on the eth0 interface.` How do I fix this?",pihole,1650341795.0
2519,comment,1,i5bd3ii,,"Is ipv6 on your host enabled?

Try:
> ip -6 addr show eth0

If there is no output it's likely that ipv6 is not enabled on your system",pihole,1650353569.0
2520,comment,1,i5bcab2,,"Environment Variables  
IPv6: True  
ServerIPv6:",pihole,1650352898.0
2521,comment,1,i5c3cy2,,Yes it is,pihole,1650372232.0
2522,comment,1,i5c4v3p,,"ServerIP can be set to any random IPv6 right, or do I set it to my host IPv6?

It does not work with my host ip",pihole,1650372959.0
2523,comment,1,i5o83ut,,"I have my ServerIPv6 set to the address of my nas running docker, and it works for me",pihole,1650578094.0
2524,comment,1,i5p0axm,,Any chance you also run unbound?,pihole,1650591181.0
2525,comment,1,i5pbjop,,">unbound

No",pihole,1650596440.0
2526,comment,1,i614hrx,,What do I need to set as my Pi-hole's DNS after enabling those two environmental variables?,pihole,1650824975.0
2527,comment,1,i618z11,,"You have a choice of your upstream DNS providers on the pihole settings page

If you set the environmental variables you should see IPv6 queries from your IPv6 enabled clients that are using Pi-Hole as a DNS server.

https://imgur.com/a/RGQpLIE",pihole,1650826843.0
2528,post,1,u6wax1,Netgear Router Phones Home Every Ten Seconds,,pihole,1650341572.0
2529,comment,1,i5avten,,"Hello Reddit,

Need some help figuring out this abnormal behavior from my new router here. Just bought and deployed a Netgear RAX70 router and in the span of less than a day it visited the iot amazonaws address as shown in the screenshot nearly 10,000 times!

It looks like it is trying to phone home or check updates every ten seconds or so. The domain was not blocked by PiHole so I have no idea why it is being so aggressive. Also confirmed that it is from the router itself by powering off all other devices except the router and PiHole and seeing the same pattern.

Any ideas?",pihole,1650341776.0
2530,post,1,u6u0nh,"Adguard DNS, this is normal or not safe to use in Pihole",,pihole,1650334340.0
2531,post,1,u6rlqc,Kubernetes docker new instance pihole can't update gravity,"Hello, i'm actually trying Kubernetes using Rancher and the first things I was trying is to setup a pihole. And all of this inside of Proxmox. So i'm quite new to this configuration.

&#x200B;

After 6 hours, i'm here asking your help, basicaly I can update the gravity.

When I tried to curl the link I got this : 

curl: (7) Failed to connect to [https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts](https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts) port 443: Connection refused

Inside the pod, I can't do this but outside, in the ubuntu I can. 

&#x200B;

Here the deployement yaml:  [https://pastebin.com/5H5tEahm](https://pastebin.com/5H5tEahm)

Here the pihole debug rapport : [https://pastebin.com/wdC2vP4Q](https://pastebin.com/wdC2vP4Q)",pihole,1650327126.0
2532,post,0,u6piwb,Netgear Nighthawk Port Forwarding,"I just got and set up a nighthawk router. I have tried to set up the port forwarding for pot 51820, but I am not sure if it is working. On the router setup page, it lists all of the ports forwarding rules you have set up, but in that list it does not show what the rule type is. I select TCP/UDP when I make the rule, but if I select the rule and click Edit, TCP is always selected. I can’t seem to get it to save as UDP either. Does anyone know if it just resets to TCP when you try to edit a rule? Is there a way I can check the rule without click edit?",pihole,1650321313.0
2533,comment,3,i59pief,,"TCP/UDP is fine, just makes the port open to both TCP and UDP traffic.

If you want yo verify if your port is open, you can go to most sites to verify if the port is open. I used to use https://www.yougetsignal.com/tools/open-ports/ to check it.

Also, why are you attempting to open a port? If it's to access your pihole while outside your home network, then that's a big no-no, you'd want to set up a VPN instead. I think some nighthawk routers have the ability to set up a VPN, just check your router's documentation on how to do so.",pihole,1650322720.0
2534,comment,2,i59s1vb,,"I am running Wireguard on a server which is why I want the port open. It worked when I just had the AT&T router, but after adding the Nighthawk and setting up the IP passthrough it stopped working.",pihole,1650323861.0
2535,comment,2,i59zzl0,,Port 51820 is for WireGuard VPN,pihole,1650327359.0
2536,comment,4,i59qu5v,,">Also, why are you attempting to open a port? If it's to access your pihole while outside your home network, then that's a big no-no, you'd want to set up a VPN instead

Peep the port number in Google my mans.",pihole,1650323316.0
2537,post,0,u6o1rl,Lots of DNS queries with OK (Cached),"I have an Orbi RBK852 and use pihole. My Orbi is still responsible for the DHCP and I use my pihole as my DNS server (use Google as my upstream DNS server).

I get a lot of duplicate queries. I had a total of almost 7,000 queries in a 10 second period. This happens pretty much daily and very randomly.

The issue is I then lose internet access as my pihole is overwhelmed and gives the following error:

 ""Maximum number of concurrent DNS queries reached (max: 150)"".

Here's an example of the duplicate queries. I got 117 entries of the below in 10 seconds:

    2022-04-18 15:18:22	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	OK, sent to dns.google#53	N/A	
    2022-04-18 15:18:17	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	Retried	N/A	
    2022-04-18 15:18:14	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	OK, sent to dns.google#53	N/A	
    2022-04-18 15:18:06	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	OK, sent to dns.google#53	N/A	
    2022-04-18 15:18:01	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	OK, sent to dns.google#53	N/A	
    2022-04-18 15:17:57	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	Retried	N/A 
    2022-04-18 15:10:25	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	OK (cache)	CNAME (4.6ms)	
    2022-04-18 15:10:20	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	OK, answered by dns.google#53	CNAME (26.9ms)	
    2022-04-18 15:10:15	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	OK (cache)	CNAME (4.9ms)	
    2022-04-18 15:10:10	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	OK, answered by dns.google#53	CNAME (25.1ms)	
    2022-04-18 15:10:05	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	OK, answered by dns.google#53	CNAME (24.0ms)	
    2022-04-18 15:10:00	A	cdn.samsungcloudsolution.com	Fios_Quantum_Gateway.fios-router.home	OK (cache)	CNAME (3.9ms)	

Got 72 entries of this. The first 2 entries were at 15:12:24. The remaining 70 entries looked like the topmost entry and the reply was ""N/A"":

    2022-04-18 15:20:00	A	mtalk.google.com	Fios_Quantum_Gateway.fios-router.home	OK, sent to dns.google#53	N/A
    2022-04-18 15:12:24	A	mtalk.google.com	Fios_Quantum_Gateway.fios-router.home	OK (cache)	CNAME (0.0ms)
    2022-04-18 15:12:24	A	mtalk.google.com	Fios_Quantum_Gateway.fios-router.home	OK, answered by dns.google#53	CNAME (8.5ms)

Anyone have any idea what might be causing these duplicate entries and how to fix this?

Thanks",pihole,1650317336.0
2538,comment,1,i5dq6k0,,[cdn.samsungcloudsolution.com](https://cdn.samsungcloudsolution.com) is your Samsung TV phoning home. You can block that in PiHole as long as you don't use the smart tv stuff and you don't care about updates. I did this last year on my Samsung tv and I have no problems. I get all my programming via Roku so I don't need anything from Samsung.,pihole,1650395395.0
2539,post,1,u6koup,PiHole with AT&T gateway,"Is anyone else having issues running a PiHole while using the AT&T fiber gateway? I am currently using their latest model W320 or something like that, it won't let you change the DNS settings so you have to run your PiHole as a DHCP server as well. 

Lately I've ran into a snafu of sorts after six months or so of it just working on a pi with no issues then out of the blue one day it just died in the middle of the night, the pi was fine powered up I just couldn't ping one switch to AT&T gateway to be DHCP and one OS reinstall later and it was back up and running again however after resetting up PiHole, switching DHCP back to the pi and making a backup of my adlist Incase it happened again it did it again, couldn't access the user interface couldn't ping it nothing. I figured it was odd but okay maybe the pi itself is just stupid, so I made a VM on my server cluster and installed it again uploaded my adlist and set it to be DHCP and back off to the races.......until the middle of the day the next day it died same thing so I switched my gateway DHCP back and accessed the server to find it saying the eth03 adapter didn't have a DHCP configuration based on the error. 


Is anyone else having this issue? Or did something change in the latest release?",pihole,1650308462.0
2540,comment,4,i58zw8s,,"I put the att fiber gate in ip-passthrough mode and use a separate asus wifi6 router. Pi-hole is on an old hp laptop directly hooked up to the router. Has not seen any problem so far.

The att fiber gate works ok as a wifi router but range is kind meh.",pihole,1650311673.0
2541,comment,0,i597eog,,"ATT uses your DNS information to help sell ads, you cannot change what DNS servers it passes out.

My ATT router has my pfSense FW in the DMZ (passthrough, bridge), so pfSense gets a public address and does my parameter security.  pfSense can easily be configure to pass the PiHole addresses.  Any quality firewall or router can do the same.

The ATT router has WiFi and anything else I could turn off, turned off.

&#x200B;

Edit: An ATT employee must have downvoted me...",pihole,1650314717.0
2542,comment,1,i590rwg,,"The gateway range isnt great, I had devices two walls away from it and it couldn't even provide enough bandwidth to a Android TV not 15fedt away. turned it off got a Netgear business class AP to support up to 3.6gigs (more than I'll probably ever need in the next 5 years) and it's a far better AP and gives me more flexibility for setting up different networks and controlling the bandwidth for them.

I've debated building my own pfsense router in a VM on the server and setup IP passthrough for it",pihole,1650312031.0
2543,comment,1,i599p3k,,"This is true, you can not change their DNS information, however you can bypass their DNS by turning on the DHCP of your PiHole and turning it off on the gateway. This allows you to use your PiHole with an AT&T gateway without dealing with doing a passthrough. Worked for about six months now it lasts about 24 hours and my PiHole stops working and my network goes down as there is no DHCP to handout new addresses. Even if I change it to a week for a renewal seeing the system as a whole goes bloop the DNS can't be reached either 

Pfsense has been an option",pihole,1650315638.0
2544,comment,2,i5a079w,,That is an good option.  I chose the other route because I wanted more control.,pihole,1650327452.0
2545,comment,1,i5a0ehq,,"Fair fair, I may be able to turn an old PC into a pfsense router 🤔",pihole,1650327537.0
2546,post,8,u6k2dy,Just received a notification of AdminLTE 5.11 release from GitHub,"but when I check pihole -up it says everything is up to date

and when I look at pihole -v it says latest AdminLTE is 5.10.1 and I have 5.11 installed

(I see in my email that I got a similar notice back on Feb 12 and would have done pihole -up then)",pihole,1650306834.0
2547,comment,2,i5981y9,,"see [here](https://discourse.pi-hole.net/t/adminlte-v5-11-is-installed-latest-however-github-shows-latest-as-v5-10-1-and-padd-gives-error/54945/8)

run 'sudo rm /etc/pihole/GitHubVersions', than run 'pihole -v', as recommended by Dan;",pihole,1650314975.0
2548,comment,1,i5bc76f,,"The release on GitHub is v5.11, but that was released two months ago. I think at that time someone just forgot to create the release on GitHub? Anyway, there doesn’t seem to be a new update right now.",pihole,1650352829.0
2549,post,1,u6jkul,Rate Limit Error on Pi-hole,"I have a beginner's level of knowledge with Pi-hole so please bare with me for any ignorance and/or stupid questions or comments on my part.

Last night, I logged into mt Pi-hole web interface. I was greeted with a yellow exclamation telling me around 3:50 pm on 4/17, telling me I hit a rate limit. I don't have the error message anymore showing up so I can't show exactly what it told me. I had no prior issues until yesterday afternoon.

I had been making some additions to my adlist (mainly blocking facebook trackers via github links) and I noticed my Pi-hole started topping my client activity. Originally, it was my desktop, followed by every other device in the house by a fairly long shot. Once I made those additions, my pi-hole took over the top spot on the client activity. I'm guessing there's traffic that's going back and forth to my pi-hole?

I also noticed on the dashboard, it now shows my Domains on Adlists at 0 and my Percentage Blocked at 0.1%. It wold normally show over a million domains on my adlist and a much higher percentage blocked - usually around 18%-19%. I can still see all 28,753 entries in my adlist, so I'm not sure what went wrong.

I have a log to post but it's almost over 30,000 lines long so I uploaded the debug text to github.

[https://github.com/Zazabar1/Sought](https://github.com/Zazabar1/Sought)

If anyone can help or has any suggestions, I'd appreciate it.

&#x200B;

Edit: Forgot to mention this, but my pi-hole is my DNS server. My router has been configured to point to my pi-hole. I'm not sure if this helps but I figured I'd let you know.",pihole,1650305587.0
2550,comment,1,i5916rz,,"sounds like DNS looping.  When I enabled conditional forward, I got this.  In my setup, my pihole is upstream of my router.",pihole,1650312198.0
2551,comment,1,i5c0by6,,"The vast majority of your adlists are domains, not URLs that lead to lists of domains. About 28,500 entries like that. 

It looks like you pasted the contents of a blocklist into your adlists page in error.",pihole,1650370683.0
2552,comment,1,i5ct2eg,,"That would explain it. I'm just going to rebuild gravity.db and try to use urls where I can. Most of the urls are ones I've cherrypicked.

Thanks for bringing that up.",pihole,1650382879.0
2553,post,7,u6ilhl,Pihole + Unbound makes Pi not resolve DNS,"I have been using Pihole for a while now and after looking around this subreddit, I decided to give Unbound a shot as well. I have a Raspberry Pi 4B running Raspberry Pi OS. Both Pihole and Unbound run directly on the OS, no Docker containers or VMs. I followed the tutorial on the Pihole website to set up Unbound and everything seemed to be working just like before, only through Unbound this time. I did not disable unbound-resolvconf. The Pihole is also configured as my only DHCP server on the local network and its own configuration is static.

However, when I tried to update the apt packages on the Pi, it said it couldn't resolve the upstream for my distribution, even though all other devices on the network could resolve DNS with no issues (except for the blocked domains in the Pihole). What I tried to do was adding all DNS servers Pihole uses as upstreams by default if you don't run a custom DNS resolver to my lo interface in resolvconf. This made the Pi be able to resolve DNS so I could update it, but it has a weird side-effect where all my Android devices on the network are now somehow bypassing the Pihole while my Windows and Linux devices on the network do not bypass Pihole.

I'm sure there must be a way to have my Pi be able to resolve its own DNS queries even when running Pihole + Unbound without affecting the adblocking on the rest of the network. Could you please tell me what that solution is, if you know it, or point me in a direction so that I can tinker my own way to a solution?",pihole,1650303040.0
2554,comment,2,i58tsq8,,Suggest double checking the port number where you set the upstream DNS.  I have made the mistake of typing in 5353 instead of 5335 before.,pihole,1650309214.0
2555,comment,1,i58i9wv,,Look at /etc/resolf.conf and make sure nameserver is set to 127.0.0.1,pihole,1650304595.0
2556,comment,1,i593c0g,,"I had this problem where the Pi itself can't connect to the internet but Pihole is able to do what it needs to do. Any changes you make to resolv.conf are overwritten.

These are the notes I made when I sorted the problem on my Pi:

**To ensure correct DNS server in /etc/resolv.conf:**

apt install dhcpcd5

systemctl restart dhcpcd

If necessary check /etc/dhcpcd.conf",pihole,1650313070.0
2557,comment,1,i5bco6u,,I double checked. The port is indeed set to 5335 for both IPv4 and IPv6.,pihole,1650353217.0
2558,comment,1,i5bcshl,,I double checked `/etc/resolv.conf` and it has only one line (except for the resolvconf comment at the top) containing `nameserver 127.0.0.1`.,pihole,1650353318.0
2559,post,2,u6i344,Terminal Monitoring,Is there a way to monitor my Pihole installation in terminal? I am using MacOS,pihole,1650301664.0
2560,comment,5,i58h87z,,"ssh pi@192.168.x.xxx 

Then enter the Pi password.

Replace the IP with the IP of your Pi. Use Fing (from App store) on your Mac to scan the network and find all device IP addresses. 

pihole -c 

That'll display the Pihole console.

Edit: It is actually 'chronometer' and I found that out by using;

pihole -h",pihole,1650304184.0
2561,comment,2,i58eopy,,https://github.com/pi-hole/PADD,pihole,1650303170.0
2562,comment,2,i5br14z,,"That chronometer is old and will be changed to PADD, you could use the padd.sh version. Also, if you are using pihole as DNS, just type this is ok.

    ssh pi@pi.hole",pihole,1650364993.0
2563,comment,1,i58hmu7,,Perfect! That's it!,pihole,1650304344.0
2564,comment,1,i592zag,,"    pihole -c

I've never tried this before. Neat! Thanks.",pihole,1650312927.0
2565,comment,1,i59l5yj,,"Damn, I also didn't know that. It's enough for a quick check when you don't have the web interface installed. Nice!",pihole,1650320769.0
2566,comment,2,i58g9so,,what is the command to start it in a terminal window?,pihole,1650303804.0
2567,comment,1,i5c2w0c,,I haven't heard of PADD but will get my Google on.,pihole,1650372002.0
2568,comment,2,i58i4fv,,"If you followed  the install instructions, you can run it with

`~/padd.sh`

If you downloaded it to another folder, it's like:  
`/path/to/the/script/padd.sh`",pihole,1650304534.0
2569,comment,1,i5c7klc,,Here you go: https://github.com/pi-hole/PADD,pihole,1650374205.0
2570,post,5,u6hfh2,How do I bring my web interface back?,"im not sure what changed for this to happen but the web interface comes up as only HTML, doesn't give me any options. i completely uninstalled and reinstalled and that did not bring it back. what should my next steps be?",pihole,1650299896.0
2571,comment,4,i58laj1,,You are probably blocking something you should not be blocking.,pihole,1650305799.0
2572,comment,1,i587657,,"Not sure what you mean, bc the web interface is a HTML page.",pihole,1650300150.0
2573,comment,1,i58e8jp,,Have you tried accessing it via a different browser?,pihole,1650302988.0
2574,comment,1,i5892rq,,It's no longer the interface that was. As if all the css and java wasnt displayed,pihole,1650300896.0
2575,comment,1,i5940kd,,"I haven't, only been running through Firefox. What would you try next?",pihole,1650313343.0
2576,comment,2,i58bzbe,,Do you use a reverse proxy?,pihole,1650302089.0
2577,comment,1,i594oe7,,"Any other browser (Edge, Chrome etc.). To make sure it's not some plugin or bug in the particular browser that breaks it.

I had Brave messing up the Pi-Hole homepage with its ""Shields"".",pihole,1650313612.0
2578,comment,1,i58dbuw,,No I'm not,pihole,1650302625.0
2579,comment,4,i58fpaz,,"""Press F12, click on Network tab then refresh the page, look through the list and check if anything there didn't load (marked in red), additionally double click on each \*.js and \*.css file entry there and make sure they are not showing up as empty.

If something came up empty lighttpd might've failed while compressing assets - execute  (on the pi) `sudo rm -fr /var/cache/lighttpd/compress/*` to clean the cache.""

Depends on the browser you use how to open the web inspector. I guess in chrome it's F12, the hotkey may vary in other browsers.",pihole,1650303576.0
2580,post,6,u6h9rw,LXC running out of space due to .git/objects dir,"I have a Proxmox pihole LXC that has been running well enough for over a year. However, in the last month it has run out of space twice related to the /etc/.git/objects directory being over 8gigs. The last time this happened, I had to increase the storage capacity of the LXC just to be able to run git pruning commands without receiving out of space errors for any command. In less than a month, the directory has once again eaten up all the storage available on the system.


The LXC is dedicated to pihole with no other services running, so I can only assuming the update process of pihole is the cause of this unchecked growth. What configuration is causing this directory to grow without limits? Is there a more correct way I should be limiting or cleaning this up?",pihole,1650299469.0
2581,comment,1,i6eckya,,"Same exact problem for me today.  Woke up to the 8G disk full and swap full too.  I bumped the container up to 4G of ram & 8G of swap (up from 512M each) then ran `rm /etc/.git/objects/*/tmp_*` to release some disk space. Then I ran `git config --global pack.windowMemory ""32m""` followed by `git gc --aggressive --prune=now`.  Doing all that took me from 8G used (100% disk usage) down to 1.25G.  After I finished, I restarted the container and put the ram/swap back like it was and all was well.",pihole,1651066221.0
2582,post,8,u6ezpr,Raspberry Pi unable to resolve own DNS requests after fresh install,"This is about an issue I had that I have already solved. I am posting because I haven't had this issue with previous Pi-hole installs and also to possibly help anyone having the same issue in the future.

I have recently installed Pi-hole onto a new RPI 4B (Raspberry Pi OS Lite 64bit) after I had hardware issues with my RPI Zero W. Two days after the install, I went to check for updates and found out that `apt` wasn't able to reach the internet. DNS resolution was working fine for all other devices, and they were definitely all using Pi-hole since they could ping pi.hole and also were showing up in Pi-hole's DHCP (which I use rather than my router's DHCP) and Network.

I `ping`ed around from the RPi and I found out that it could reach both local and external IPs, but it couldn't resolve any DNS names. I tried adding a `nameserver 127.0.0.1` entry to `/etc/network/interfaces` under my static IP config, but had no luck.

The cause ended up being an empty `static domain_name_servers=` entry in `/etc/dhcpcd.conf`. I changed it to `static domain_name_servers=127.0.0.1`, saved, rebooted, and everything seems to work fine now.

My question is, why did this happen in this install and not on my previous installs that were done the exact same way - static IP config in `/etc/network/interfaces` first, then Pi-hole installation with the script piped to Bash, choosing the ""Choose the current IP address as a static address"" option in the installer? Also, what even is the need for DHCPCD on a DHCP server?

The only difference between the installs I can think of is that I was running 32bit RPOS Lite on the Zeroes and I switched to 64bit for the 4B. What I do know is that DNS worked fine on the Zeroes. Unfortunately I can't check whether the `domain_name_servers` entry was present in the Zeroes, but I'd suspect that it would have been generated by the RPi installer if it was necessary.",pihole,1650293546.0
2583,post,28,u6e0b1,"Is zoom.us Google login passthrough blocked by pihole? if so, what should I unblock?","I recently upgraded from an older mac laptop, to a new mac laptop... (this is the only thing that changed...) and all of a sudden Zoom won't login via google signon from the app, to the browser, back to the app.

The expected behavior is...

Open the [zoom.us](https://zoom.us) app.

&#x200B;

https://preview.redd.it/jp8zrrmcnau81.png?width=652&format=png&auto=webp&s=1a0ffeeeb77306662417f71d9942c0c6cf70a7a6

click the button that says ""Sign In""

&#x200B;

https://preview.redd.it/e8k48iyenau81.png?width=430&format=png&auto=webp&s=72bf1a1e28c5301d272bef5a0c97a1a6e662ccec

And click on Google

Which sends me to a google SSO login screen...

&#x200B;

https://preview.redd.it/iluikiljnau81.png?width=546&format=png&auto=webp&s=3ae94fc72884e28a9a66ca9ab772b6fc7c9f4709

(which has the correct information, fwiw).

And when I click that, I get this.

&#x200B;

https://preview.redd.it/qaha4kbmnau81.png?width=508&format=png&auto=webp&s=84d0aac96a3bf182b3c84624f8491215339bf2ea

\----

YET!,   When I go to [https://zoom.us](https://zoom.us), and login, I can login with google and it logs me in to the website just fine, and I can click my links for a scheduled meeting in that interface, which perfectly launches the app...

&#x200B;

[Zoom.US](https://Zoom.US) support is telling me to clear my caches, and disable ad blockers... 

The only thing thats changed in my set up is that I have a new mac, (m1 apple silicon) and there by had to install a new version of zoom (for apple silicon).

Does pihole block anything in the Google SSO process that I might need to adjust?   Especially with a newer version of zoom?

Thank you!",pihole,1650290836.0
2584,comment,18,i57xbdw,,"The easy way to isolate is to disable pihole blocking for 5 minutes, and go try to log in.  If it works then, pihole related, keep investigating the logs.

If it still doesn't work, move on to troubleshoot other things, but at least you know it's not pihole.",pihole,1650296200.0
2585,comment,6,i57py2l,,"That would entirely depends on what blocklists you are using.

Check your Pi-hole query log for any blocked requests relating to Google or zoom, add the domain to the whitelist if you see any and try again. Keep adding domains to the whitelist until you find the one that's causing the issue and you can remove the others from the whitelist when you have found it.",pihole,1650293191.0
2586,comment,2,i595h6e,,Search the logs based on time. Start your computer and try connecting and note the time and go to your logs at the same time while refreshing and whitelist what appears.,pihole,1650313939.0
2587,comment,1,i5bae48,,I've never had issues with Zoom with Pi-hole (Using the default blocklist). If you use a custom blocklist then it might be different. You could also temporarily change your DNS to something else and see if this issue has anything to do with the Pi-hole.,pihole,1650351378.0
2588,comment,-2,i58ecx7,,You dont have to ask stupid questions. Thats what your pihole is for. Close everything except your wanted website. Look up pihole recent logs for blocked entries -> unblock them.,pihole,1650303036.0
2589,comment,3,i5a0414,,"This right here.  Troubleshooting is like science.  You make a hypothesis, and then test it.  Your hypothesis is that PiHole is the problem.  So disable PiHole blocking.  That will either confirm or disprove the hypothesis.",pihole,1650327414.0
2590,comment,0,i57w2b0,,"umm, nothing blocked that relates to ""google"" or ""zoom"".

Thanks, I'll keep searching.",pihole,1650295696.0
2591,comment,6,i57xtfr,,"You can try to disable Pi-hole for a short while under the ""Disable"" menu and see if that helps.

If it doesn't, do you by chance run any adblockers in your browser as well? Some adblockers will block cookies from certain websites, making it difficult to use 3rd party logins on some websites.",pihole,1650296402.0
2592,comment,1,i59f4v5,,"Check for YouTube. Think technically the google authentication/login is via a YouTube domain.

Does this resolve if you disable pihole?",pihole,1650318055.0
2593,post,33,u6deeb,Getting the same posts/recomendationson reddit and YouTube when using PiHole,"So Ive used PiHole for like 2 months now and ever since I got it I've been getting the same YouTube recommendationons even if I already watched the video. It's also like that on Reddit I get the same post again and again. 
So my question is if that is caused by PiHole? And if it is caused by that, how do I fix it?",pihole,1650289145.0
2594,comment,11,i57wbfv,,"You need to whitelist some records to allow both services to track what you have watched/looked at.

https://discourse.pi-hole.net/t/commonly-whitelisted-domains/212

Take a look through this list, and if some things stop working check back there. It's updated often.",pihole,1650295798.0
2595,comment,6,i58dbkv,,"You need to whitelist a few to allow watch history etc.  I use the first one on the list and works very well.  

&#x200B;

https://github.com/anudeepND/whitelist",pihole,1650302622.0
2596,comment,20,i585brq,,You're asking how to break your PiHole and allow yourself to be tracked. Weird.,pihole,1650299413.0
2597,comment,2,i58ggj7,,"I'm still getting ads from years ago on Instagram, it's hilarious really. Really love that they just don't *seem* to know anything about me now",pihole,1650303880.0
2598,comment,2,i59rz31,,"lol you're not being tracked, homie. welcome to the other side.",pihole,1650323827.0
2599,comment,5,i57ymn3,,"I hadn't linked this to pihole! I realised my laptop would always re-recommend videos I'd already watched on my phone and vice-versa, I hope this fixes it!",pihole,1650296731.0
2600,comment,1,i58cbwy,,"You're looking at the right things to analyze the affects of PiHole, but you're analysis is incorrect.

If pi-hole wasn't doing anything after your setup/installation, then you would expect that the recommendations to continue to change/update in a way that reflected on your activities. This is the way that Reddit/YouTube designed it.

That its not changing or hasn't changed, either means that they're going off the last activity they have for you or that they don't have an id for you and are serving you generic recommendations based on other factors like browser, location of your IP, etc. For example if they can't get to [8.8.8.8](https://8.8.8.8) or [1.1.1.1](https://1.1.1.1) from your system, they might perceive you to be a technical user and serve your technical recommendations for Intel/AMD, etc.",pihole,1650302230.0
2601,comment,1,i590rc6,,"Same, I was wondering if something ist just bugging or if it’s the Pi-hole lol",pihole,1650312025.0
2602,comment,1,i592471,,Having this issue with Facebook. It says I'm all caught up in the news feed.,pihole,1650312575.0
2603,comment,1,i5a00h6,,do not have this issue when I am logged into youtube or reddit,pihole,1650327370.0
2604,comment,23,i586yd3,,Lol kinda like my wife wanting me to unblock the google sponsored shopping “links” which I had to explain to her are actually ads,pihole,1650300063.0
2605,comment,4,i58w9x9,,It's sort of what Pihole was intended to do though... it has prevented them from tracking you to the point where it can't figure out what to blast into your face.,pihole,1650310241.0
2606,comment,4,i587urv,,Classic !,pihole,1650300421.0
2607,comment,2,i58fnfm,,I check the wi-fi every now and then when my wife gets home from work to see if she has her phone on the network for this exact reason lol.,pihole,1650303555.0
2608,comment,2,i58knbx,,"While they’re ads, *a lot* of people use those links, myself included, as the link to the shop isn’t usually in the results below.

Heck from a quick search on this sub itself, a lot of people want to whitelist the “*issue*” for themselves.",pihole,1650305539.0
2609,comment,1,i59dya6,,This.,pihole,1650317533.0
2610,comment,1,i59z066,,Haha my wife uses data mostly lol,pihole,1650326931.0
2611,comment,2,i58vw94,,"Life pro tip if you goto the search bar and just type in 

Cheese grater site:Walmart.com

You will be greeted with direct links to the items rather than tracking ads ;)",pihole,1650310084.0
2612,post,23,u64gky,Web UI Log-in Loop,"I just installed Pi-hole via docker but when I try to log in with the password I set it loops me back to the dashboard as if I had just entered the site, I can get in if I select the `remember me` option but when I try to change any setting I get an invalid token error. How can I fix this?",pihole,1650255362.0
2613,comment,2,i566yds,,is it behind a reverse proxy? sounds like some http header / cookie is not being set.,pihole,1650256343.0
2614,comment,1,i577z4k,,"I am also having same problem, just did a new setup on a dietpi, if I'd blank the password it works, otherwise it loops just as you described..",pihole,1650284623.0
2615,comment,2,i5674zu,,"I don’t think so, I used the default config and followed the [extra steps](https://github.com/pi-hole/docker-pi-hole/#installing-on-ubuntu) for Ubuntu closely

Of course it’s possible with that either those extra steps or my misunderstanding of docker but I know cookies work because pinhole works just fine off docker",pihole,1650256456.0
2616,comment,1,i5a4bcu,,"Try deleting the cookies for that specific site, <pi ip>/admin and try again",pihole,1650329211.0
2617,post,6,u5y6gg,Need help with conditional forwarding,"The main issue I was trying to resolve is: displaying hostname instead of Ips in the dashboard. (I didn’t wanted to manually set the names in /etc/hosts).

After reading for a few weeks I found out about “Conditional Forwarding”, and how it could accomplish what I was trying to do, but it was not very clear to me if that is the main reason of this feature. That said, I went ahead and set it up via UI (main Lan), and added my other Vlans via config file in /etc/dnsmask.d/ (using reverse notation).

After doing that, I started seeing hostnames showing up in the dashboard, not all but most of them. The only problem is that I noticed 2 things I didn’t expect.

1- most of my queries started to be allowed (only 3% blocked compared to regular average of 30%)

2- 97% of queries were coming from router only.

Can anyone help me understand:

1- why did it start allowing more?
2- why it didn’t just get the hostname from router, but it seemed to forward the whole (dns) request?

Thanks!",pihole,1650235283.0
2618,post,8,u5sg1g,How to do permanent settings on Pihole?,"Hello everyone,

I’m fairly new to Pihole and Unbound. I have previously created the file 99-edns.conf and added the line edns-packet-max=1232 as recommended to avoid the dnsmasq warning.

On a different post about best practices (pihole + unbound) someone mentioned to change pihole cache to 0 in order to improve performance. I went and did so in 01-pihole.conf. After a few weeks and updated pihole, I noticed the cache was reset to 10000. I believe the settings don’t survive the update unless I have them in a separate .conf file. Is it okay if I add cache-size=0 to 99-edns.conf? Should I create another .conf file that contains this setting? If I add this cache-size=0 to a different .conf file, will it survive an update? which one will take priority, the one in 01-pihole.conf? Or the one I add to a separate .conf file?

Thanks in advance for the clarification.",pihole,1650218338.0
2619,comment,2,i54bwyx,,"To make it permanent follow the docs:[https://docs.pi-hole.net/ftldns/dns-cache/?h=cache+size#dns-cache-size](https://docs.pi-hole.net/ftldns/dns-cache/?h=cache+size#dns-cache-size)

But I doubt you get a noticable performance increase. It hardly depends on your behaviour and the pihole devs recommend to keep both caches enabled to get best performance, especially when you use unbound with DNSSEC it could mess things up. But depdening on the forum where you look everybody says something different.",pihole,1650224896.0
2620,comment,1,i54fe1g,,"Thanks! I’ll take a look after work.

Edit: I forgot to mentioned I have DNSEC disabled on Pihole as this is already handled by Unbound. I read having it enabled just creates latency and problems sometimes as Unbound already does the heavy lifting.",pihole,1650226404.0
2621,post,47,u5s0tv,Starting Unbound in a Docker Container,"I'm trying to run pihole and unbound inside docker, since I couldn't find any unbound images that I felt confident in, I decided to make my own and since getting pihole and unbound to talk through containers was a struggle, I resorted to running both inside their own container. 

I used the official pihole container and entered into it to install unbound, which went fine, but after I created the config file, following [the official guide](https://docs.pi-hole.net/guides/dns/unbound/) it would not start with sudo `service unbound restart` and instead spit out this error:

    s6 service not found for unbound, exiting...

I tried restarting the container but that didn't change anything, how do I fix this?",pihole,1650217112.0
2622,comment,16,i53z54w,,"I've been using MVance's unbound container for a long time.

[https://github.com/MatthewVance/unbound-docker](https://github.com/MatthewVance/unbound-docker)

Clients point to pihole, pihole points to unbound. I bind unbound to port 5335.

No issues.",pihole,1650219403.0
2623,comment,1,i55r6n5,,[deleted],pihole,1650247929.0
2624,comment,1,i56c2nu,,"If your using a pi, you need to use the [pi image](https://github.com/MatthewVance/unbound-docker-rpi).
Also I remember that I created these files before deploying the container:
[config files for unbound](https://github.com/MatthewVance/unbound-docker-rpi/tree/master/1.15.0/data/opt/unbound/etc/unbound)
* a-records.conf
```
# A Record
    #local-data: ""somecomputer.local. A 192.168.1.1""

# PTR Record
    #local-data-ptr: ""192.168.1.1 somecomputer.local.""
```
* forward-records.conf
```
forward-zone:
    # Forward all queries (except those in cache and local zone) to
    # upstream recursive servers
    name: "".""
    # Queries to this forward zone use TLS
    forward-tls-upstream: yes

    # https://dnsprivacy.org/wiki/display/DP/DNS+Privacy+Test+Servers

    ## Cloudflare
    #forward-addr: 1.1.1.1@853#cloudflare-dns.com
    #forward-addr: 1.0.0.1@853#cloudflare-dns.com
    #forward-addr: 2606:4700:4700::1111@853#cloudflare-dns.com
    #forward-addr: 2606:4700:4700::1001@853#cloudflare-dns.com

    ## CleanBrowsing Security Filter
    # forward-addr: 185.228.168.9@853#security-filter-dns.cleanbrowsing.org
    # forward-addr: 185.228.169.9@853#security-filter-dns.cleanbrowsing.org
    # forward-addr: 2a0d:2a00:1::2@853#security-filter-dns.cleanbrowsing.org
    # forward-addr: 2a0d:2a00:2::2@853#security-filter-dns.cleanbrowsing.org

    ## CleanBrowsing Adult Filter
    # forward-addr: 185.228.168.10@853#adult-filter-dns.cleanbrowsing.org
    # forward-addr: 185.228.169.11@853#adult-filter-dns.cleanbrowsing.org
    # forward-addr: 2a0d:2a00:1::1@853#adult-filter-dns.cleanbrowsing.org
    # forward-addr: 2a0d:2a00:2::1@853#adult-filter-dns.cleanbrowsing.org

    ## CleanBrowsing Family Filter
    # forward-addr: 185.228.168.168@853#family-filter-dns.cleanbrowsing.org
    # forward-addr: 185.228.169.168@853#family-filter-dns.cleanbrowsing.org
    # forward-addr: 2a0d:2a00:1::@853#family-filter-dns.cleanbrowsing.org
    # forward-addr: 2a0d:2a00:2::@853#family-filter-dns.cleanbrowsing.org

    ## Quad9
    # forward-addr: 9.9.9.9@853#dns.quad9.net
    # forward-addr: 149.112.112.112@853#dns.quad9.net
    # forward-addr: 2620:fe::fe@853#dns.quad9.net
    # forward-addr: 2620:fe::9@853#dns.quad9.net

    ## getdnsapi.net
    # forward-addr: 185.49.141.37@853#getdnsapi.net
    # forward-addr: 2a04:b900:0:100::37@853#getdnsapi.net

    ## Surfnet
    # forward-addr: 145.100.185.15@853#dnsovertls.sinodun.com
    # forward-addr: 145.100.185.16@853#dnsovertls1.sinodun.com
    # forward-addr: 2001:610:1:40ba:145:100:185:15@853#dnsovertls.sinodun.com
    # forward-addr: 2001:610:1:40ba:145:100:185:16@853#dnsovertls1.sinodun.com
```
* srv-records.conf
```
# SRV records
# _service._proto.name. | TTL | class | SRV | priority | weight | port | target.
```
Right now all insides of the files are just commented out. So they don't really do anything. But unbound fails (or failed it for me) to create the files. So if you create them it should do the trick.

As `unbound.conf` you can use the example provided from pihole.

If you still struggle I can try helping you, or share my compose file (via chat).

Good luck",pihole,1650259795.0
2625,comment,1,i56cxqb,,I use macvlan networking to run them both on the same network. I'll PM you my compose file.,pihole,1650260431.0
2626,comment,1,i56i6ox,,I had problems with pihole/unbound and 32bit. After I installed 64arm OS everything ran perfectly.,pihole,1650264537.0
2627,comment,1,i56khp1,,"Did you enable the unbound service before restarting it?

`systemctl enable unbound`

`systemctl start unbound`",pihole,1650266385.0
2628,comment,1,i5ndpul,,"I use klutchell/unbound container and it works fine. Spin up both containers in the docker compose, point to the second one in the config.",pihole,1650565775.0
2629,comment,1,i543dmi,,"I tried using that, but I couldn’t get pihole to reach unbound, I think there was an ip issue, any chance you’d share your config or compose file?

My method is a little off but I like sticking to official builds so I’ll keep trying",pihole,1650221204.0
2630,comment,1,i6obpex,,Would you be able to help me out with these?,pihole,1651245431.0
2631,comment,1,i57c51t,,My pi doesn’t support 64arm unfortunately,pihole,1650286897.0
2632,comment,1,i57c7l8,,"It’s a container, it should be started already",pihole,1650286935.0
2633,comment,3,i5464ig,,"Not knowing your setup I can only guess that your published ports are a problem.

In this code I've published unbound to port 5335. So assuming this starts healthy, in pihole you can go to the DNS settings and adjust the Settings/DNS/Custom #1 and uncheck the built in DNS entries. Check Custom 1, and enter <ip address of docker host>#5335

See the ""Configure PiHole section here... https://docs.pi-hole.net/guides/dns/unbound/

I use the static address on the LAN interface of my docker host, not the localhost address.

```
docker run \
--name=my-unbound \
--detach=true \
--publish=5335:53/tcp \
--publish=5335:53/udp \
--restart=unless-stopped \
mvance/unbound:latest

```",pihole,1650222392.0
2634,comment,1,i55o1g3,,Put the docker containers on the same docker network.,pihole,1650246405.0
2635,comment,1,i588mnt,,Problem solved meanwhile?,pihole,1650300721.0
2636,comment,1,i5b8zrd,,Sometime you must enable a service before starting it..,pihole,1650350282.0
2637,comment,1,i54f38k,,"I tried to edit the DNS settings like you suggested but got this error in the web interface

    Wrong token! Please re-login on the Pi-hole dashboard.

Not really sure where that's from though, restarting the container didn't fix it",pihole,1650226274.0
2638,comment,1,i5c6hi3,,That’s how ‘service unbound restart’ works,pihole,1650373708.0
2639,comment,3,i550bt1,,"Use dig to test if pihole and unbound are working. Something like this.

```
dig www.comptia.org @<ip address of docker host> -p 53
```
This should get a response to let you know that pihole is working.
Then...
``` 
dig www.comptia.org @<ip address of docker host> -p 5335
```
This would then let you know that unbound is working.


There really are a lot of things that go into a functioning docker system; host OS, nftables, selinux... it is part of the learning process, and is totally worth working at.",pihole,1650235464.0
2640,comment,1,i5ckjmn,,"What is the output of

`systemctl status unbound`",pihole,1650379601.0
2641,comment,0,i551k7q,,"I can’t use the web interface whatsoever, I’m not sure that testing will be useful. I’m locked out of making changes in the web interface because of the token error",pihole,1650236018.0
2642,comment,1,i5cl3bu,,"I switched to trying to get unbound and pihole working in separate containers so I deleted that image.

It’s been a pain",pihole,1650379814.0
2643,comment,3,i552liq,,"The whole idea behind docker is to have easily deployed micro services... simply remve the pihole container and deploy a new one in its place. A new container based on the image will be deployed in under a minute. This is how I do upgrades every couple of weeks. 

Once you get the hang of it, add in mounted volumes to store configuration data b/w upgrades.

Get a working pihole, then get a working unbound, then work on pointing pihole at unbound.

You can get it going my man, this is the fun part.",pihole,1650236488.0
2644,comment,1,i558b5s,,"I rebooted the container and even rebuilt and redownloaded the image, I still get this `Session expired! Please re-login on the Pi-hole dashboard.`

I ran a debug and the problem seem to be that lightpad and ftl aren't running but they should be after the reinstall. I copied the compose file directly from pihole so I don't know why it would be happening.

[Here](https://dpaste.com/9B22S7U4D) is my compose file (with a fake password) incase it's helpful",pihole,1650239111.0
2645,comment,2,i55igbu,,I was able to run your compose file without any configs passed to it and they were able to communicate with each other. I would take a look at what you are passing to unbound and pihole.,pihole,1650243784.0
2646,post,11,u5qje5,paramount plus issues,I cannot get paramount plus to work it gets a error or will not load. I have white listed several addresses. I did have a extended block list to block smart tv/ Roku content so I'm thinking it could be that but other apps work with no issues. Just wondering if I should go to stock lists or if someone has a work-around.,pihole,1650212746.0
2647,comment,8,i53kcnd,,I whitelisted cbsinteractive.hb.omtrdc.net and pubads.g.doubleclick.net to get mine to load,pihole,1650213336.0
2648,comment,5,i53mzi2,,"I have tried so many things to get Paramount+ working and the only thing that ever works is just disabling pihole. Ultimately I just canceled my service and if I ever want it again I will just get it on the Prime Video channel or just torrent what I want to watch. I'm tired of whitelisting a bunch of stuff, getting it to work, and then a week later it stops again. I'm all for paying for content but P+ has caused nothing but problems for me.",pihole,1650214435.0
2649,comment,2,i54ypya,,"I went through and tested a bunch a month or two ago and I found I only needed to whitelisr one on our TCL Roku TV. 

`pubads.g.doubleclick.net`

I set it up so it was only whitelisted for that TV and my wife’s phone, to minimize the “damage.”",pihole,1650234739.0
2650,comment,2,i552xe2,,"I found that whitelisting some of the domains folks suggested would help get videos playing, but then certain commercials wouldn’t load. I would add more domains to the whitelist and eventually get the commercial to load, but then after a period of time it happened again. I’m sure I could keep adding to the whitelist but I decided instead to just not use PiHole for my Apple TV’s and set a manual DNS address. Obviously doesn’t help if you plan on using the Paramount+ app on your mobile devices and/or computers.",pihole,1650236638.0
2651,comment,2,i57904w,,You could add the TV to it's own group in Pihole and allow these hosts just for that device.,pihole,1650285209.0
2652,comment,1,i54ogn6,,"I had to whitelist this to get paramount plus 

secure-dcr.imrworldwide.com",pihole,1650230293.0
2653,comment,1,i5xbvoz,,For me all i had to do was log into paramount plus once with the pihole shut off. Then I turned pihole on and haven't had an issue since. Did you try that?,pihole,1650749851.0
2654,comment,1,i53kffw,,I'll try that,pihole,1650213369.0
2655,comment,2,i53ocjc,,Yeah disabling was my only fix but I'll have to keep tinkering,pihole,1650214998.0
2656,comment,-1,i53peuh,,You only need to whitelist a couple url’s (domains?) and it’ll work fine. No need to deactivate anything.,pihole,1650215440.0
2657,comment,1,i57b1ul,,Yeah I am going to try that,pihole,1650286325.0
2658,comment,1,i5xu0w7,,Yes but it seems to stop after a while of watching,pihole,1650758402.0
2659,comment,2,i54j6q6,,Can confirm.  I have both whitelisted and don't have any issues.  I'm using wildcards for [doubleclick.net](https://doubleclick.net) and disable it when I'm not streaming Paramount+.  Going to try whitelisting [pubads.g.doubleclick.net](https://pubads.g.doubleclick.net) instead.,pihole,1650228023.0
2660,comment,0,i55837k,,"Yeah, I have tried multiple times like I said it will work a few times, and then it will completely stop. I don't know if it is related to my Google TV or other things going on in my network, but I have had nothing but problems with Paramount+ so I let my yearly subscription expire. It was too much of a headache.",pihole,1650239009.0
2661,comment,1,i5xxw7x,,Oh ok. Then ya you'd just have to figure out which domain needs whitelisting.,pihole,1650760328.0
2662,comment,1,i560wep,,"Okay. Tried to help. Oh well. 

Everyone else got it to work. It’s not that hard. If you ever want to fix it, let me know. Otherwise I’ll take the downvotes for helping. :)",pihole,1650252842.0
2663,comment,1,i57j76x,,"What should I be whitelisting in your opinion?

What I currently have in my whitelist for P+  
[s0.2mdn.net](https://s0.2mdn.net)  
[cbsinteractive.hb.omtrdc.net](https://cbsinteractive.hb.omtrdc.net)  
[pubads.g.doubleclick.net](https://pubads.g.doubleclick.net) 

These are what I have been told in various threads that will make it work but as I said, after a while, I start getting error screens about ad blockers. Sometimes this happens right at the beginning of a show, sometimes in mid-show when new commercials hit. 

I think the problem with P+ is that they switch to different ad providers all the time. Whenever the stack changes it breaks something that previously worked for me.  It became too much of a hassle for me to tinker with it anymore to watch very few things that I can usually watch in other places.",pihole,1650290287.0
2664,comment,1,i57m6s5,,"All I can is I’ve had paramount+ for maybe a year. Since the initial setup I haven’t had a single issue. No changes at all. 

Rather than just adding stuff people suggest (if I recall this didn’t work for me either) figure out the IP for your device. Then go to the dashboard and filter the query list by that IP. Open paramount and see what gets blocked. Whitelist one by one until it works. 

This way you’ll whitelist the actual problem instead of just guessing based on what others have tried.",pihole,1650291593.0
2665,post,19,u5qfjg,Pi-Hole and AT&T U-verse problem,"I recently switched to Uverse Fiber and now Pihole doesn't work no matter what I do, I have followed every instruction I could find, the router/modem is the BGW320-505 and I set the DHCP settings as was said, it's off with it pointing to Pi-hole in the IP Passthrough, only a couple of devices are using it and of those devices, they don't block ads.

When I had Spectrum and my own router it worked fine and the ads were blocked on all the devices but I can't find any information on how to use my own router with this modem combo it just flat out refuses to give it internet and I can't see it on the network no matter where I plug in the ethernet cable and following the instructions does the same things.

Is the BGW320-505 just impossible to use for any ad blocking? when I do the ipconfig /all on windows it still points only to the modem and doesn't list the Pi-hole at all",pihole,1650212433.0
2666,comment,17,i53itks,,I have ATT fiber and don’t have any issues. I plug my router in to the ATT supplied one and configure everything in my own equipment. ATT box is set in pass through mode. It mean there is one extra hop to get to the internet and an added 5ms of latency but everything works just fine.,pihole,1650212689.0
2667,comment,3,i576ur4,,"I use the AT&T Fiber router only.  I had to shut off DHCP on the router, change the DNS to the Pihole, then also disable IPv6.  Works a treat now.",pihole,1650283969.0
2668,comment,3,i53ltj2,,I would just rebuild the vm or pihole instance  I also have fiber and don’t have any issues  I use pihole on my phone and laptop,pihole,1650213952.0
2669,comment,1,i547swb,,Experience suggests that some ISPs will not pass Internet into your router unless you use THEIR DNS.,pihole,1650223121.0
2670,comment,0,i53itiw,,https://tricorder.pi-hole.net/JQAbaU2X/,pihole,1650212688.0
2671,comment,5,i55a7qr,,This is the answer,pihole,1650239989.0
2672,comment,0,i53j18u,,I've plugged the router from the Internet to the Out connector and just into the regular ones and it just keeps coming back as No Internet and I can't access the router as it won't let me do anything unless it has internet apparently.,pihole,1650212778.0
2673,comment,1,i586hp5,,ipv6 disabling was key for me,pihole,1650299878.0
2674,comment,2,i53moqf,,"Did that 3 times now and each time it does the same thing, devices connect but no ads are being blocked even after updating the lists and gravity",pihole,1650214311.0
2675,comment,1,i55zwn2,,"Not true for ATT. You just need to Mac clone/forward the public IP from the ATT router to a real router (Unifi Dream Machine, etc.) and then you can set your Pi-hole DNS on the real router. 

The only problem with ATT routers is they still do the NAT table on the router.",pihole,1650252298.0
2676,comment,5,i53jvmp,,You’ll need to take a cable from a LAN port on the ATT box and plug it into the WAN port of your router. You’ll need to log into to ATT box’s management page and shut off all the firewalls and put it into transparent mode. Then log into your router and make sure the ATT box is passing it an IP address. For your network config down stream you’ll need to use the IP address of the ATT box as the gateway and not your router (so your router will know it needs to pass the traffic),pihole,1650213136.0
2677,comment,2,i53o2dh,,How are you assigning your dns address?,pihole,1650214882.0
2678,comment,8,i53mbfh,,"Please do not use the ATT Modem address as your gateway on your FW, it will set itself correctly.

My setup:

ATT Router -> pfSense (FW) -> my switch with Pi-Holes

ATT Router in DMZ mode, this varies depending on the router, may be called passthrough or something similar.

If is a proper passthrough setup (DMZ, bridge, etc) your FW should get a public WAN address and you should not be double NATed.",pihole,1650214158.0
2679,comment,1,i53p8ry,,"With the limited option it gives me, I have the DHCP on, point it to Pi-Hole, Turn off DHCP.

On Pi-Hole I enable DHCP on it, put the range of 1-251 and then enable the IP4 & 6 and then let it handle everything as all the instructions have said to do, I left the defaults for everything in Pi and just checked the OpenDNS stuff.

*some* of the ethernet stuff shows up in pi but nothing is blocked by it like it was before",pihole,1650215370.0
2680,comment,1,i53mxii,,Tried for a long time to get mine set up that way and it didn’t want to play ball. The “passthough” mode on the ATT equipment doesn’t seem to be really transparent. I hate that I can’t just go directly into an ONT (my ATT router is straight fiber) or plug the fiber straight into my one of my router’s SFP+ ports.,pihole,1650214412.0
2681,comment,1,i53nd2e,,"As far as I am aware I am not, I followed all the instructions and when I have to set the IP bypass the DHCP needs to be on and it will let me change it, if it is already off it won't let me do anything with the IP portions.

I turned off everything else so the only thing that says On is IP Passthrough and as far as I am aware it's pointing to the Pinhole but nothing on ethernet is showing up in the device list and all the wireless stuff shows up but nothing is being blocked by Pihole",pihole,1650214591.0
2682,comment,3,i53wx5l,,"OK I dealt with the Shitty AT&T stuff with their bonded DSL service.  If your router does not allow you to turn off DHCP, and edit the DNS servers then limit DHCP on the ATT box to 1 IP address so the range is 192.168.1.253 to 192.168.1.253.  Then turn DHCP on your pihole on and give it the actual range you want to use.  Yes this is the wrong way to do a network but its a stupid trick that works.  ATT runs out of addresses and just sites there and does nothing, while pihole takes over.",pihole,1650218472.0
2683,comment,1,i53s7wz,,I don’t mess with any settings in pihole I let my router manage dhcp  the only thing I edit is dns settings to point to pihole,pihole,1650216572.0
2684,comment,2,i54dn98,,"You can’t disable DHCP on AT&T’s BGW. Keep DHCP enabled but only plug one device (router) in the BGW’s LAN port, then set it to passthrough and select the router’s MAC from the dropdown. Then disable the firewall on the BGW.

What are you using as your router? And what access point(s) are you using for WiFi?",pihole,1650225645.0
2685,comment,0,i53ti94,,That's what I did before but this combo one doesn't allow DNS editing and the instructions I follow only do a few things but if it's Ethernet it doesn't forward to the pi,pihole,1650217094.0
2686,comment,0,i54ei0l,,Linksys Nighthawk,pihole,1650226015.0
2687,comment,3,i54fr9e,,Do you mean Netgear Nighthawk?,pihole,1650226564.0
2688,comment,0,i54hba3,,"Oops that was my old one, it's a Linksys WRT AC3200",pihole,1650227226.0
2689,comment,3,i54i22s,,"Make sure Linksys is only connected to the BGW from Linksys WAN port to BGW LAN port. Set passthrough, disable firewall and other security setting on BGW (Linksys will handle that), and disable WiFi on BGW, then reboot both machines.

The Linksys should pick up a public IP from BGW since it’s in passthrough and devices should connect to the Linksys for wired and WiFi connections. Also, set your DNS server on the Linksys for clients to use Pi-hole.

One last item to verify is the subnet the Linksys and BGW are using. I believe the BGW uses 192.168.1.254. If your Linksys uses 192.168.1.x subnet, you’re going to have a subnet clash. Change the BGW’s subnet to something like 192.168.0.x and you’ll be good to go",pihole,1650227549.0
2690,comment,2,i54qhj9,,">	One last item to verify is the subnet the Linksys and BGW are using. I believe the BGW uses 192.168.1.254. If your Linksys uses 192.168.1.x subnet, you’re going to have a subnet clash. Change the BGW’s subnet to something like 192.168.0.x and you’ll be good to go

That right there. I chatted with 3 AT&T reps before I figured this out. All they know how to do is to walk you through enabling passthrough and rebooting. If that doesn’t work, next step is a $99 on site call. Pretty pathetic.",pihole,1650231166.0
2691,post,28,u5jmfw,Pihole not picking up any requests from wg0 interface,"Hello,
I'm attempting to add pivpn wireguard to my existing pi running pihole for the past few good years, running into this issue:  
The vpn works for anything inside my local network, but none of my dns requests seem to reach pihole.

I've [troubleshooted with the pivpn community](https://github.com/pivpn/pivpn/discussions/1486) and hit a dead end, was hoping anyone here could come up with an idea?

Preemptive Pihole debug log: https://tricorder.pi-hole.net/ROWjS3MM/

TIA",pihole,1650188041.0
2692,comment,7,i538cbv,,"Make sure you change this setting in pihole otherwise pihole will not respond

https://imgur.com/a/PagRcUP",pihole,1650208229.0
2693,comment,3,i52z1xt,,"I would have thought your VPN server's DNS server needs to the the PiHole, not itself.

pivpnDNS1=[10.6.0.1](https://10.6.0.1)  


To be 

pivpnDNS1=[192.168.1.4](https://192.168.1.4)",pihole,1650204033.0
2694,comment,2,i52vgoa,,https://docs.pi-hole.net/guides/vpn/wireguard/faq/#broken-dns-resolution,pihole,1650202257.0
2695,comment,1,i53b1je,,came here to write this. had exactly this problem and changing this settings (the corresponding env when running in docker) fixed it,pihole,1650209385.0
2696,comment,1,i56aheo,,I have it on permit all origins.,pihole,1650258659.0
2697,comment,2,i54b5no,,"If it's running on the same machine, it should be fine. I run the same config with Pihole, unbound and PiVPN on the same device.",pihole,1650224567.0
2698,comment,1,i56ayt9,,"This should be correct, it is running on the same machine.",pihole,1650258998.0
2699,post,1,u5e326,Can I use Xfinity/Comcast's DNS server while I wait for a new modem?,"Hi, I just finished setting up my pi-hole but I foolishly did not check to see if my ISP, Comcast, allowed for DNS changes, so now I'm stuck until I get a new modem, or If I can use comcast's DNS server while I wait for a new modem.

any help appreciated",pihole,1650165225.0
2700,comment,4,i51n9kx,,"In the interim, you can set the individual devices to use your pi-hole.",pihole,1650169887.0
2701,comment,3,i51fl4g,,"afaik you cannot change DNS on Xfinity modems so youll need a new modem that allows you to do that.

You can certainly keep using your normal Comcast DNS until you get a new modem. The pihole just won't work until you do.",pihole,1650165628.0
2702,comment,3,i51j732,,"Other folks answered better than I could. I have my own equipment (saved me $14 a month, paid for itself in about 10 months) and so I would have lead you astray.",pihole,1650167565.0
2703,comment,2,i51og39,,"You can manually set the dns to your pihole ip on your devices. It’s less convenient as it doesn’t happen automatically, but you can use pihole as your dns that way while you wait",pihole,1650170604.0
2704,comment,1,i51it4l,,"Are you using a modem/router combo or do you have a separate modem and router?

If it's the former, opt for getting the latter and set your dns at the router. You could potentially also use their modem/router as a modem and just buy a separate router. That of course only works if the modem/router combo supports bridge mode",pihole,1650167351.0
2705,comment,1,i52us57,,Can you not set the xfinity router to bridge mode?   Then you can just use the public IP handed to your own  firewall and use whatever DNS you want.,pihole,1650201898.0
2706,comment,1,i51gsvl,,thanks.  guess I better start lookin for a new modem lol,pihole,1650166272.0
2707,comment,1,i51oo6o,,"I put a router in. I put my work on the Comcast router, and connect only my work devices to that wifi network. I trust my work to spy on my so I give it isn't own wifi that way if they are sniffing traffic on my work space it's all work. Also Comcast can have all my work data, it is up to work to prevent tracking.

 I connect an ASUS router to the Comcast router for my personal stuff and that has the pinhole.",pihole,1650170741.0
2708,post,6,u5c4wc,"So close, and yet so far.","Hi all,

I feel like I'm SOOO close to getting pihole setup, but I'm looking for a bit of help to just push me over the finish line here.

It seems like the pihole is working on my phone, but it's touch and go on my computer. I've been using Edge browser to test it, and I seem to get a lot of ads still.

When looking at Tail pihole.log it seems like a lot of request are being forwarded to 8.8.8.8.

I have a synology router, and under ""manually configure DNS server"" I've verified that I only have 192.168.1.3 (my pihole address) in the primary DNS address, and the secondary address is blank. In addition, if I click the 'network' tab and go the my DHCP settings, I've verified that the primary DNS is 192.168.1.3 there as well, with no secondary DNS.

Why do I have some traffic still getting forwarded to 8.8.8.8? Any ideas? 

Here's just a small snippet of my log file. Notice the forward to 8.8.8.8. However, you can ALSO notice it is blocking some traffic.

>Apr 17 02:14:06 dnsmasq\[546\]: query\[A\] events3alt.adcolony.com from 192.168.1.19   
>  
>Apr 17 02:14:06 dnsmasq\[546\]: gravity blocked events3alt.adcolony.com is 0.0.0.0   
>  
>Apr 17 02:14:07 dnsmasq\[546\]: query\[A\] presence.teams.microsoft.com from 192.168.1.4   
>  
>Apr 17 02:14:07 dnsmasq\[546\]: cached presence.teams.microsoft.com is <CNAME>   
>  
>Apr 17 02:14:07 dnsmasq\[546\]: forwarded presence.teams.microsoft.com to 8.8.8.8   
>  
>Apr 17 02:14:07 dnsmasq\[546\]: reply presence.teams.microsoft.com is <CNAME>",pihole,1650158509.0
2709,comment,4,i516xut,,I believe you probably set Google DNS (8.8.8.8) as your upstream DNS server. So what you're seeing is the pihole forwarding the request to Google to resolve it. This is how it's supposed to work.,pihole,1650161178.0
2710,comment,1,i514g0j,,"Some applications or devices have hardcoded DNS. My Samsung smartTV is a bloody example.

To sort this out you need firewall, a router with a decent firewall so you can force DNS, DNS-over-HTTPS and DNS-over-TLS to be processed by Pi-Hole, blocking the device request from calling Google DNS.

This is a good start: https://labzilla.io/blog/force-dns-pihole",pihole,1650159925.0
2711,comment,0,i515lx3,,"How do you have PiHole configured?  Is it using 8.8.8.8 for its uplink DNS queries?

I set mine up, and I set up UNBOUND, and I don’t have see these forwarded requests.

If you have not set up UNBOUND, I do recommend doing so.  Step by step details are in the PiHole documentation.  

I also have IPV6 disabled on everything, and block IPV6 traffic at the firewall, as I don’t quite understand it yet.

I am by no means an expert, but learning new things daily (some may not actually be worth learning).",pihole,1650160498.0
2712,comment,2,i51bwk4,,"Where would I have set this?

Looking at the properties of my network adapter, it has ""automatically obtain DNS server"" and where it displays the DNS server, it has 192.168.1.3, which is my pihole address.

All this traffic that I am looking at the log for is coming from my computer rather than my phone, or other devices connected to the network.",pihole,1650163721.0
2713,comment,1,i514r2d,,"How did you set it anyway?? Have you chosen Google under the DNS tab???

I'm running it as recursive DNS with Unbound so I'm not sure. Try swapping to Quad9 under the DNS tab.",pihole,1650160076.0
2714,comment,1,i51be2o,,"Thanks for the link. In this particular case I don't think it's my smart tv. But looking at my log, I see several honeywell requests getting through to google's DNS servers...so it seems my thermostats are ignoring it.

Honestly, I don't know if the pihole is working or not. I go to some sites and it seems to be working fine and dandy. But others seem to still be rife with content that I'm not sure should be blocked or not.

Going to this site: [https://d3ward.github.io/toolz/adblock.html](https://d3ward.github.io/toolz/adblock.html)

I'm getting 77% blocked. But things that are getting through include doubleclick.net and Amazon. (Should Pihole block Analytics, Error Trackers, Social Trackers, Mix and OEM too? Because a lot of those are Red...",pihole,1650163457.0
2715,comment,1,i51cagc,,"I'm SUPER new to Pihole. Honestly, I had it setup a few months ago, but my computer was being absurdly glitchy. (I couldn't open network settings). Anyway, I literally just reinstalled my OS, and decided to go down the pihole rabbit hole again. I logged in and was surprised to see that it pretty much was still how I left it months ago. So, I redirected some DNS servers, and it started (halfway) working. With all that said...I don't remember how it's configured.

Where would I see if I have [8.8.8.8](https://8.8.8.8) set for its uplink DNS queries?",pihole,1650163919.0
2716,comment,1,i51cvuk,,"Ah, I think I found it...

Settings -> DNS -> Both checkboxes under ipv4 are checked next to google.

So, with Pihole running should I have only a 77% score on this site: [https://d3ward.github.io/toolz/adblock.html](https://d3ward.github.io/toolz/adblock.html)

The big two that aren't getting blocked according to that site is doubleclick.net and Amazon.",pihole,1650164225.0
2717,comment,1,i51cky2,,"Oh, I think I found it. And yes, I think that's the issue, which may not be a problem at all then?

Settings -> DNS -> and both checkboxes under IPV4 are checked next to Google.",pihole,1650164069.0
2718,comment,1,i51j2q6,,"You can add those urls to the Blocklist section, then see if they're still getting through; then you may need to do some of the more invasive things other folks are suggesting on here.",pihole,1650167498.0
2719,comment,1,i52zf2g,,"If you have UNBOUND configured, you would uncheck those.  I’m out of town, but I’ll get back with you tomorrow when I can view my configuration.  You need to tell it to use UNBOUND, which may be under custom, then set the IP to 127.0.0.1#5335, or something similar.  I’m going by memory now, and would rather give you confirmed info.",pihole,1650204210.0
2720,post,0,u57vfn,Install issue on Ubuntu 22.04 LTS," When installing Pi-hole the menus are created with whiptail and you should be able to select checkboxes with space and accept your selection with enter. This used to work with stable Debian Bullseye and Ubuntu 21.10 releases on Raspberry Pi 4.

The installation cannot begin in the Welcome screen since the button cannot be selected with enter (or any other key). This happens with Ubuntu 22.04, Debian Bookworm (Testing) and Debian Sid (Unstable). While these operating systems are unsupported, this type of issue will become a problem in a week when Ubuntu 22.04 is released.",pihole,1650145128.0
2721,comment,2,i50gb22,,"[https://docs.pi-hole.net/main/prerequisites/](https://docs.pi-hole.net/main/prerequisites/) 

&#x200B;

22.x is not on the list",pihole,1650148572.0
2722,comment,1,i50rpr4,,https://github.com/pi-hole/pi-hole/issues/4693,pihole,1650153812.0
2723,comment,1,i5riih1,,Thank you,pihole,1650643390.0
2724,comment,1,i5s5auj,,I was able to install it using steps [here](https://www.reddit.com/r/pihole/comments/u70axo/comment/i5btumf/?utm_source=share&utm_medium=web2x&context=3),pihole,1650652242.0
2725,post,44,u56i8i,Is there really no clean way to recover from a pihole uninstall besides reinstalling the entire OS?,"I'm on a RPi4 with Raspberry Pi OS 64-bit Bullseye Release.

I tried the uninstall command from the docs.

I did NOT remove any dependencies since I was planning to reinstall it.

After uninstalling it, my Pi has no Web access even though I can see it on my Unifi router client list.

I tried the following:

1. I tried updating /etc/resolv.conf but my changes get overwritten every time I reboot to try and confirm changes can take effect.
2.  sudo rm -rf /etc/.pihole /etc/pihole /opt/pihole /usr/bin/pihole-FTL /usr/local/bin/pihole /var/www/html/pihole /var/www/html/admin 
3.  sudo mv /etc/resolv.conf /etc/resolv.conf.bak THEN sudo ln -s /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf

Is there really no clean way to recover from a pihole uninstall besides reinstalling the entire OS?

That seems to be the only clean solution in all the posts.

It seems to be a common issue after trying to search.",pihole,1650141037.0
2726,comment,12,i50wme2,,Uncomment *name_servers* and change the loop back address in /etc/resolvconf.conf then reboot. That will set resolv.conf and not allow any override,pihole,1650156113.0
2727,comment,14,i509ruv,,"With enough time and enough skill I'm sure it could be fixed.

For most people, myself included, reinstalling is a lot faster and I'm certain of what I get when it's done.",pihole,1650145659.0
2728,comment,51,i5031k8,,Isn’t this why people put it in a docker container?,pihole,1650142618.0
2729,comment,15,i50253b,,"In my experience yes, especially if your raspberrypi's system conf files for dnsmasq and dhcp are messed up or overwritten, it's pretty much a blow it out and start over.",pihole,1650142218.0
2730,comment,16,i5067cx,,This is a good reason to use Docker.,pihole,1650144051.0
2731,comment,3,i51uuhw,,"Just learn from the initial mistake.

Make a solid, clean pihole install then take that card out, pop it in you're pc, and ghost the image.

Next time the se card corrupts or.dies or.whatever, slap a new sd card in your PC, write the ghost image to the card, insert it into the pihole, boot and it'll be like.nothing happened at all.

Source: sd card died on me and my pihole went tits up and I had to do the whole new config etc and it suuuuuuucked getting everything back to how it was. 

Now I have a ghost image for both my pihole 1 and 2 (I had another pair 4gb lying around) so now if one dies, my other will take over as well as handle extra.load from the pihole1. 

Theyre synced and run great as one just has a different dns than the other and they work in tandem and basically make my pihole redundant and it all works out just fine.",pihole,1650174863.0
2732,comment,7,i512yfn,,"In my opinion, the biggest single issue that 'breaks' your Raspi when it comes to pihole is the 'Assign Static IP' part of the install process. It means that if there are any changes in your network or an issue with the pi, you can really struggle to get it back on the network.

As far as I'm concerned, you should always ignore this part of the install. The best way to get your Raspi to have a static IP is to do this **\*in your router settings\*** before you install pihole.

At the end of the day, the MAC address of your Pi will never change, so if you set your router to assign a static IP to that MAC address e.g. if your subnet is [192.168.188.0/24](https://192.168.188.0/24) and you set the MAC for your pi to [192.168.188.3](https://192.168.188.3) this will always be the case for as long as your router settings exist.

If you reset your router, buy a new router, or you plug your pi into a different network, it will be given a new IP from the subnet - you will be able to find this IP address, either using the router settings pages or a LAN scanner and you can get into your pi again. 

If your pi is set to a static IP on a different subnet, it often feels like the best option is to just wipe the SD card and start again.",pihole,1650159194.0
2733,comment,5,i5192in,,"Install time shift. Create a restore point prior to the install of Pinole, and another after your install of hole. Then you’ll have a clean install of pi before you installed hole. If it ever messed up, just revert to your clean install.",pihole,1650162269.0
2734,comment,-5,i503xm3,,[deleted],pihole,1650143016.0
2735,comment,1,i52cwoy,,"damn, by seeing how much issues uninstalling pihole leaves i kinda regret not running it via docker, just like i do with everything else 😔",pihole,1650189628.0
2736,comment,1,i52nuc6,,"This is precisely why you use it in Docker and not natively. You can just remove the container if something goes sideways.

Installing software directly on a system is so  very 2000s.",pihole,1650197942.0
2737,comment,1,i539l08,,"Put it in a Linux container. It’s easier to manage than a docker container. It’s like a virtual machine without the virtualized hardware.


if docker meets your needs the best, you can run docker inside of a linux container as well.",pihole,1650208760.0
2738,comment,1,i53jh2p,,You could also just install it as a docker container and then you won’t have any issues if you need to reinstall it.,pihole,1650212964.0
2739,comment,3,i519yu8,,Gonna try this. Thanks.,pihole,1650162735.0
2740,comment,4,i51ekt2,,"To be frank, writing the image and reinstalling only takes a few minutes.",pihole,1650165110.0
2741,comment,15,i50aq7o,,"What does the docker container do different to PiHole?   You'd still have to reinstall PiHole in the container if it blew up, right?",pihole,1650146085.0
2742,comment,1,i51w82e,,"I do!

Pihole was the reason why I fucked up a VPS droplet lol, next time used a docker container and called it a day.",pihole,1650175865.0
2743,comment,1,i5399yx,,Or a Linux container(lxc)!,pihole,1650208629.0
2744,comment,0,i52nwdo,,Precisely.,pihole,1650197975.0
2745,comment,7,i50jrbv,,[deleted],pihole,1650150132.0
2746,comment,1,i51exv9,,Trying this too.,pihole,1650165292.0
2747,comment,1,i527vvc,,">The best way to get your Raspi to have a static IP is to do this *in your router settings\* before you install pihole.  

That assumes you are able to redirect the router DHCP's resolver to Pihole. If you can't you have to turn it off so Pihole can't depend on DHCP.  

Also, because I use Pihole in an opt-out way, the box's resolver is a convenient default :)",pihole,1650185305.0
2748,comment,0,i519rzb,,"You the MVP. 

Not sure how the developers overlooked this. 

Still thankful it exists and happy to contribute $5 after every install I deploy in the field.",pihole,1650162638.0
2749,comment,3,i50idf5,,Not a firewall issue.,pihole,1650149502.0
2750,comment,49,i50b2bo,,You can just blow away the whole container and keep the configuration. Then when you want to bring it back you just recreate the container in like a minute. Zero issues with the host os or Config,pihole,1650146234.0
2751,comment,6,i50cq2p,,"Its just a one-liner to rebuild the container.  If you're using portainer, you can keep your installers in there and when something goes wrong with one of them just kill off that container and start over with the docker-compose to get back to a known-good configuration.  It's the work of minutes.

Plus, containers cant (shouldn't really) screw up the rest of the stuff running on the Pi.",pihole,1650146982.0
2752,comment,1,i52o4cj,,"No, you just delete the container and run a new one.",pihole,1650198112.0
2753,comment,9,i50mp5z,,"I'm with you. I keep thinking I ought to be using this docker thing, but every time I look into it I can't find a simple straightforward explanation and how to go about using it.",pihole,1650151473.0
2754,comment,7,i50mep3,,"Not that arcane, would recommend portainer as well, gives you a gui that makes things much easier",pihole,1650151337.0
2755,comment,1,i50xrhh,,Docker-compose is peanuts to both learn and master.,pihole,1650156658.0
2756,comment,1,i52exq7,,"I can’t think of a router I’ve used that didn’t have the option to dish out at least one IP address for the DNS server… although I’m sure there’s some absolute garbage out there - possibly the one the ISP provided, or something made by Huawei. 

I consider that situation the more important to resolve before setting up pihole",pihole,1650191353.0
2757,comment,3,i51ac9o,,"Also. I figured out how to change the default save location for the snapshots. 

[Link to a comment I posted](https://www.reddit.com/r/linuxquestions/comments/m6iewy/timeshift_from_terminal_configuration_and_change/i396z2o/?utm_source=share&utm_medium=ios_app&utm_name=iossmf&context=3)",pihole,1650162922.0
2758,comment,0,i51a1ds,,"Man, I’m just glad I actually have the answer this time!

Time shift has saved my ass while I’m learning nextcloud on Linux.",pihole,1650162771.0
2759,comment,18,i50d6kc,,"No shit?  So it's like an image you can keep handy and it'll rebuilt along with Pihole and everything already installed/ready-to-rock inside of it?

I'll have to look into this more - my Synology might not be able to run it, but for NEXT NAS I get, that sounds like something to keep in mind.",pihole,1650147186.0
2760,comment,3,i52luxb,,I’m using proxmox (you can use PiMox on a pi) and LXC containers. They lay somewhere in the middle of a fully featured OS and a Docker Container. It also allows you to create backups and snapshots. It’s also not easy to get into but once it is setup it’s easy to use.,pihole,1650196639.0
2761,comment,2,i50y6je,,[deleted],pihole,1650156853.0
2762,comment,1,i52hdi2,,"
I once was setting up a pihole at a friends house ... he had a Netgear router that didn't allow you to set an RFC1918 IP address as DNS in the DHCP settings.",pihole,1650193370.0
2763,comment,16,i50dkyj,,"Your synology can/should be able to run it. The overhead is incredibly low. I run like 30 containers that auto update on my synology nas.

And yes that's exactly how it works! Instead of updating with pihole -up or whatnot you'll update the docker image itself. Super easy 👌

Edit: you can also run docker on pi!",pihole,1650147363.0
2764,comment,5,i50ru6d,,"PIHole with Portainer is a nice combo. Take a gander at r/selfhosted. 

Have mine setup that way with WatchTower and it even auto upgrades by itself.",pihole,1650153870.0
2765,comment,9,i510w4g,,"Updating is as simple as two commands:

```
docker-compose pull
docker-compose up -d
```

And voila, all of your containers in that config are updated.

Edit: for the second part of your comment, you generally run things in docker containers that you interact with via some other service, like a web browser. If you need to get shell access, run:

`docker exec -it *container_name* sh`",pihole,1650158179.0
2766,comment,1,i52pr7v,,"Yes. That’s just badly designed firmware. The solution I suppose would be to disable the router DHCP and use the pihole as server - which is a different configuration altogether. 

The simplest solution is that you have to set the DNS server address manually in every device you want to use the pihole. This isn’t a bad thing per se as I often think that there are many devices that don’t really need pihole, but it is extra config",pihole,1650199112.0
2767,comment,2,i522p8r,,"What are you using to auto update containers out of interest please?

I have DIUN running to notify me of new images but don't have anything to actually update automatically.",pihole,1650180952.0
2768,comment,1,i50emuk,,Thanks - my Synology is a SD412+ - it's ooold.    I'll have to read up on Docker now.,pihole,1650147827.0
2769,comment,3,i51gzos,,"Be careful with Watchtower on PiHole, I've had it break more than once from dodgy updates pushed to the master branch and not having DNS is uhhh...less than ideal",pihole,1650166376.0
2770,comment,4,i511fn9,,"Brilliant.  I've just poked around and it looks like Docker is easy AF to install on Synology (just an app). 

PiHole takes a little more, but really no trickier than on the Raspberry Pi.  

Watchtower looks great too.  Simple and automated when setup.   Many thanks for this.  I can geek out on this for a while.",pihole,1650158441.0
2771,comment,-2,i512rdb,,[deleted],pihole,1650159097.0
2772,comment,3,i52mvm7,,Google watchtower for docker. Does what you are asking. (Auto updating containers can be risky business though… I prefer to update manually so I can fix things that go sideways),pihole,1650197322.0
2773,comment,2,i52acoo,,Yep. I use Watchtower for most of my nonessential containers but no longer for Pihole. They've broken stuff too often.,pihole,1650187413.0
2774,comment,6,i518p23,,"If by arcane you mean involving the command line, it is that. It’s sysadmin work essentially. There are GUIs available such as portainer, though. 

But when getting into more advanced stuff such as containerization, command line work just makes things easier and more transparent.",pihole,1650162073.0
2775,comment,2,i52t6vf,,"Nice one, thanks!

Yeah I prefer to manually update most things, but there's a few utilities I wouldn't mind auto-updating!",pihole,1650201054.0
2776,comment,5,i51bse8,,[deleted],pihole,1650163662.0
2777,comment,6,i51s79y,,"It's not under docker help because -it are options of exec not docker.  You've got -i for keep stdin open, and -t for a psuedo tty. 

It's not a shell (you can change the sh using exec btw) so sh wouldn't make sense.

You're also seeing a very limited view of exec - it's purpose isn't just to get into a container and give you the cli, you might be creating an environment variable, or running a specific command.

So if you run a command - say ls just for fun here - you're going to be immediately returned outside of the container. 

Adding -i to keep stdin open keeps you inside the container, and -t is a terminal session.  So let's say you run it without -i, well you'd see that terminal, but your input from the keyboard wouldn't work on it, because you didn't keep stdin open.",pihole,1650173018.0
2778,comment,-1,i523718,,"I get that you're annoyed about it, but this is just fundamentally wrong. The other comment gave an excellent reply, and the answer to your question about -it would also have come up on the 1st result from googling ""docker exec"" by the way. 

CLIs generally aren't designed for the ""random layperson"". Some level of technical knowledge is required, because it's a technical skill, that's just a fact. It won't be for everyone, and that's ok. 

Running and updating using docker compose is just a case of two commands, as mentioned. I don't understand why you're calling it arcane, I've never used a full install and only ever run it in a container, but it seems way easier and lighter this way.",pihole,1650181357.0
2779,comment,0,i522ujv,,"You see a mess, I see a powerful tool that has lots of options to ensure you get exactly what you want. See the other response for what `-it` does, but moving the entire (massively helpful) `docker exec` command to just a one off that can open a shell would cut a huge amount of function for the purpose of making it marginally more user friendly to avoid a couple more documentation searches? I’ll pass. 

All those questions you had? [All the answers are right here, in the docs.](https://docs.docker.com/engine/reference/commandline/exec/)",pihole,1650181075.0
2780,comment,1,i5332d9,,[deleted],pihole,1650205912.0
2781,comment,0,i533o2i,,[deleted],pihole,1650206182.0
2782,comment,1,i537b99,,">You never see any error output, or confirmation that it was successful. What's the point in this?

Often those actions without interactivity (in other words, not you trying to see the cli) are writing to a log file, or changing a parameter which will have a success/failure elsewhere.  Or you can grab that exit code and return it to your session with a shell script.

The point is, you're taking a very specific case, and thinking it was the entire purpose of the command structure.  It's not, which is why it's an option flag and not just the command itself.

>It's worth the 240mb of RAM usage

Is it? That depends on your use case.  A container will use a fraction of that 240mb of ram.

>I just really can't find any merits to docker over VMs at all.

Then don't use them, that's fine.  But docker absolutely has tangible benefits, the problem here isn't docker, it's that you don't understand how to use it, and are acting like it's just a virtual machine.  It's not.",pihole,1650207783.0
2783,comment,1,i53gmjc,,"What third party tool? Compose is part of Docker. Nothing else required. One YAML file that's about 7 lines long, one command. Could not be more simple.",pihole,1650211771.0
2784,comment,1,i53856c,,[deleted],pihole,1650208142.0
2785,comment,1,i53fa4i,,"Shared vs dedicated and the replication of the full hardware in a VM is the major difference.

On one of my systems, I have about 100 containers that spin up and shut down within a minute, all the same image, but with different configs hitting different sources.   I then have a host of others that process the data in groups, depending on the format of the response for each source.  

Not only does this use virtually nothing in terms of system resources in docker but would be a hefty load in VMs (roughly triple the resource usage minimum for what I'm doing), it also means I can change a single config on the shared resource if a response format change occurs.  It means I can separate my services intelligently, and since they shut down after they run (and log their success/failure, reporting to a logd), I only ever need to look in one place to know what's going on.

LXC, Docker, VMs - they all have their place.  Don't make assumptions about the use or intent of the tool though if you don't understand their application, there are a lot of great resources out there which can explain the utility of each in detail.  A 'how to run x in docker' tutorial is not the same as learning about the features and functions.",pihole,1650211203.0
2786,comment,1,i53hrgq,,[deleted],pihole,1650212249.0
2787,comment,1,i53ibpj,,"I understand that you can't.  I can.

Separation of services is a necessity, especially in a managed commercial environment, which is where this is.

You're also misunderstanding the use of the tools - it's substantially less complex in implementation, I can test on any system without any compatibility or specific ahrdware concerns, and load it right up onto a deployed system by simply updating the containers.

I'm going to go out on a limb here that I am more experienced in this than you are, and I can tell you this - you're not doing what I'm describing more simply or effectively by just using VMs, and *especially* not by sticking those services all under a single hood.  That's a recipe for nightmares.",pihole,1650212481.0
2788,comment,1,i53jown,,[deleted],pihole,1650213055.0
2789,comment,1,i53lyyz,,">Thank you for adequately explaining *your* need for separation of services. This isn't the case for most people...remember you're in a hobby forum.

Two things here - that wasn't the question you asked / comment you made, and lots of people run things at home for better understanding when implementing commercially.

>It's kind of like saying a custom-built Salesforce database is super useful for a shopping list. All you're doing is making it harder than it needs to be, unless there's a specific reason you need that enterprise tool. I'll stick to a pen and paper or a text file on my phone.

Great, do that then.  No one is telling you that you need to be using docker.  What you did, however, was make a bunch of comments about how it's confusing or has no purpose when it absolutely does.

Want to know what I like about pihole in docker?

I cluster them.  I don't care if I have to restart a machine, because one of the others is going to take over and will rejoin once it restarts, I don't have to manage syncing of lists, etc. Because I know the tool I'm using, it makes things easy for me, and is much better than using several VMs to accomplish the same thing.

Those docker containers are actually running inside another container (LXC), sitting on my VM servers (proxmox).

That's at home.  Just because your home and my home aren't the same doesn't mean the tools I'm using are overly complex, I just know how they work and how to implement them effectively for my use case.

That's like saying a drill press is useless because it's more complicated than a manual hand drill.  There are times when one is fine, and there are times where the other is drastically superior.  Whether that matters depends on your use case.",pihole,1650214015.0
2790,post,3,u54uaj,Unbound/Pi-hole Docker,I'm trying to build unbound and pi-hole inside docker but it seems to be a struggle to get unbound working inside a container because it doesn't look like there are any official dockerfiles for it. I don't really want to use a third party unbound image so should I build my own (and how)? or forgo unbound all-together?,pihole,1650136175.0
2791,comment,2,i4zrmsa,,There are images that has all that working already. Hard to help work so little info.,pihole,1650137486.0
2792,comment,2,i50m7np,,"I built my own unbound image in the past, it’s very simple :) just about installing the apt and copying config!",pihole,1650151248.0
2793,comment,1,i51woig,,"Why not install a Debian Bullseye image and install pihole unbound etc...?

Simpler and not too many questions to ask about how/if a docker image works.

This is absolutely not resource demanding!",pihole,1650176213.0
2794,comment,1,i4zwceu,,[deleted],pihole,1650139637.0
2795,comment,1,i4zykod,,"Which ones, I can’t seem to find any official unbound images at all",pihole,1650140641.0
2796,comment,1,i50nk3a,,"I gave up and found one that seemed relatively established but making it work with pihole is proving to be a struggle, docker is a pain",pihole,1650151869.0
2797,comment,1,i521wou,,"Just to mentally visualize it, would I just pull that Debian image and go into exec? Wouldn’t I lose it all if the container restarted or my system did?",pihole,1650180300.0
2798,comment,3,i50180y,,https://github.com/chriscrowe/docker-pihole-unbound,pihole,1650141825.0
2799,comment,2,i501bic,,https://hub.docker.com/r/jd10nn3/pihole-unbound,pihole,1650141868.0
2800,comment,1,i52bezh,,"I've been using this one for ages alongside the official pihole & lancache containers, works fine:

https://github.com/klutchell/unbound-docker

Also has a Dockerfile for you to see how it's made if you want to roll your own.",pihole,1650188335.0
2801,comment,2,i50o4ke,,My advice would be tu run pihole and unbound in two separate containers. Then you plug them together through network.,pihole,1650152134.0
2802,comment,1,i522jbm,,"No you loose nothing !

Install a Debian image and then use apt install pi-hole, apt install unbound etc.... 

 configure et voilà

a lot of debian with pihole and unbound tuto exist!",pihole,1650180818.0
2803,comment,1,i51omsz,,"I've been using this one, but several weeks ago I started getting random unable-to-resolve website situations.  Sometimes they'll connect if I wait 30 to 60 seconds; sometimes they won't connect at all.  I'm way too new at this and don't really know what I'm doing.  I've reached out to Chris in the past, but his advice is generally along the lines of ""...it must be something in your configuration""--but I've only ever used whatever configuration was built-in, and didn't change anything. 

When it works, it seems very peppy--but obviously not being able to connect at random times for random durations is just not very useful.

Anyone ever seen this behavior before?",pihole,1650170717.0
2804,comment,4,i505iev,,It is outdated. I prefer the mvance one that has more downloads.,pihole,1650143737.0
2805,comment,1,i50oey1,,"That’s how I’m doing it right now, they’re on the same network though I’m not entirely sure what that means beyond organization. 

I can access the pihole web client but can’t get data through unbound. It’s probably a mistake in my unbound configs or my docker-compose. I’m not really sure",pihole,1650152272.0
2806,comment,1,i525iya,,"I might try this method on top of the already existing pihole image. But I really thought that any changes I make that aren’t saved to a volume get lost when the container restarts

Also after I finish that is there a way to turn it back into an image to move around and such?",pihole,1650183313.0
2807,comment,1,i50p6f9,,Can you share your config? I could have a look,pihole,1650152620.0
2808,comment,2,i528zbi,,"installing debian on a pihole docker image doesn't seem to me to be the right solution, you have to install debian first and then via apt install pi-hole, unbound, checking the root hints and configure pihole (the pihole config)

[https://docs.pi-hole.net/guides/dns/unbound/](https://docs.pi-hole.net/guides/dns/unbound/)

you can also try this directly

[https://github.com/chriscrowe/docker-pihole-unbound](https://github.com/chriscrowe/docker-pihole-unbound)",pihole,1650186238.0
2809,comment,1,i50q22g,,"Here's my [docker-compose](https://dpaste.com/D63657S66) (sorry for the link, reddit doesn't know how to format). Both containers start up just fine, even after following [this](https://docs.pi-hole.net/guides/dns/unbound/#configure-pi-hole) step from pihole, dns queries still aren't resolved. I'm probably missing something, I just tried to learn docker today. But I have had both of these applications running on bare metal before.",pihole,1650153029.0
2810,comment,1,i5279lj,,"The main difference I’m seeing with baremetal is that the Unbound IP is not 127.0.0.1 (localhost) anymore since the two services are running in different containers. You’ll have to get the Unbound IP and configure it through the Pihole UI as described in the guide you linked.
How to get IP of the container: https://stackoverflow.com/questions/17157721/how-to-get-a-docker-containers-ip-address-from-the-host",pihole,1650184785.0
2811,post,1,u53oqf,Domains for internet connection test?,"So before I go down the rabbit hole of trying to figure this out myself I figured might as well ask. My phone, OnePlus 9 pro, will disconnect and reconnect from my home wifi randomly and then when it reconnects it thinks for a solid 10 or so seconds that I actually don't have an internet connection on the wifi. It does this no matter my distance from the router, happens when I'm close and when I'm far away. This only happens at home as at work it works how it should, which leads me to believe that it's a pihole issue. Are there any domains that Android and/or OnePlus phones use as a connection tests? I'm mostly just using the defaults and some from firebog.",pihole,1650132917.0
2812,comment,2,i4zkq08,,Do you have anything else in your network that is running on the same WiFi network that has this problem? Is PiHole your DHCP server or is your home router handling DHCP?,pihole,1650134349.0
2813,comment,1,i4ztefo,,"If you want to reduce the connect time on the device, manually define the IP, gateway, and dns servers in its WiFi configuration for that network. I use this for defining “servers” and also key devices. I use iPhones and  iPads, so I also turn off the randomization of my MAC address for my home WiFi, allowing better presence detection using NMAP.",pihole,1650138296.0
2814,comment,1,i50ey62,,"Try disabling pihole and seeing if the problem persists.

It's possible that your phone is trying to connect to specific domains to see if it has a good connection, after it actually has a good connection.  Check the pihole log to see if something gets blocked every time your phone connects to your network.",pihole,1650147968.0
2815,comment,1,i50x0h4,,"Is your PiHole connecting to your network via Wi-Fi, or is it connected via Ethernet?  If it is on Wi-Fi, it may also need to connect to allow your phone to query it.",pihole,1650156301.0
2816,comment,1,i51dgjn,,"So sometimes phones ping a certain domain to see of if the wifi connection is valid. That domain might also be used as tracking or whatever so some list blocked it. You may have to whitelist that.

https://discourse.pi-hole.net/t/commonly-whitelisted-domains/212",pihole,1650164527.0
2817,comment,1,i51zpu8,,"Look in the log for that device and see if something is blocked. If you want, you can unblock that particular domain.",pihole,1650178556.0
2818,comment,1,i4zo3fj,,"Just my phone for all that I know at least. My pihole is just pihole, I have my router doing the DHCP",pihole,1650135861.0
2819,comment,1,i51phlh,,"I changed the DNS on my phone to go to Google and it still happened, less but still happened. Guess it's not a pihole thing...but that just makes it more confusing. Oh the joys of owning a OnePlus phone these days",pihole,1650171250.0
2820,comment,1,i50zxjv,,It's in a docker on my server connected to the router via Ethernet,pihole,1650157710.0
2821,comment,1,i51ptl0,,"That's what I thought it was at least but then I rerouted my my phone DNS to go to Google and it still happened, less but still, so it's not a pihole issue. This just makes less and less sense as it works totally fine at work but not at home. Just another reason that when the next Pixel comes out I'll be ditching my 9 Pro",pihole,1650171458.0
2822,comment,1,i4zpizw,,"So you are running PiHole in its simplest form, as a DNS server. In this form, PiHole has nothing to do with connectivity. If your phone cannot hold to your router's WiFi signal but other units can, then the problem is with your phone's setup to your WiFi signal.",pihole,1650136522.0
2823,comment,1,i502vhs,,I'll take a look at the wifi settings I got on my phone. I don't remember doing anything special for it. Having my requests forwarded to unbound instead of Google wouldn't have this effect would it?,pihole,1650142541.0
2824,post,0,u4v0yc,making WI-FI Access Point with Pihole,"Hi there, 

as more basic we can, the Pi3 it connected to main router via ethernet and so to Internet.  
I need to make Pi3 as Wifi AP and to obatin more control and stats provided by PiHole: I follow [https://www.raspberrypi.com/documentation/computers/configuration.html#setting-up-a-bridged-wireless-access-point](https://www.raspberrypi.com/documentation/computers/configuration.html#setting-up-a-bridged-wireless-access-point) and after I install PiHole: at reboot the wireless clients can't go to Internet and/or do not get IP from DHCP. 

Where I mistake?",pihole,1650105173.0
2825,comment,3,i4yb1jf,,"I think you are over thinking how this all works.  


Pihole has a few way it operates you dont need to ""split"" your wifi network off. As far as pihole is concerned, there is no difference between cabled clients and wireless clients.  


As far as getting individual stats goes there is 3 ways of doing so  


1) Set pihole as your DHCP advertised DNS server. Not all routers support this, but routers like unifi or Asus let you set an ""internal"" dns server. If you have this as an option your router will hand out a DHCP address and  hand out pihole as the DNS server. This is the way I have mine setup.  


2) Disable DHCP on your router and enable DHCP on pihole. This works the same way as method 1, but instead of your router handing out the DHCP address and Pihole as the DNS, Pihole is the DNS and the DHCP server  


3) Manually configure every client. not ideal as you have to set a custom IP and pray it will let you set custom DNS. not a good option for IOT devices, smart phones, tv's etc  


As you can see there is no special wifi needed for pihole to work, you just need to pick one of those 3 methods and everything will work fine.   


If you need a wifi repeater I would advise something else, the 3B+ seems to top out at around 75mbit one way, so in the real world you could possibly get half that. you dont need the pi to have wifi to get pihole working on wifi devices.",pihole,1650114025.0
2826,comment,1,i4zu3am,,"Yes, your network subnet is treated as a single zone, regardless of connection type;
192.168.1.0/24 covers all IPs (192.168.1.1-192.168.1.254).",pihole,1650138613.0
2827,comment,1,i520pty,,"after reinstalling everything the wireless clients are connecting via new AP then to Internet but no queries are on PiHole! 

How can I do?",pihole,1650179340.0
2828,comment,1,i51v9ug,,yes... pratically witch guide I have to follow in order to get AP Wifi and Pihole working together?,pihole,1650175171.0
2829,comment,1,i5222xm,,"So you have installed pihole, you need to configure your router to point your clients to pihole. Look in your router for DNS",pihole,1650180443.0
2830,comment,1,i5232sa,,"right now my Fritzbox using [1.1.1.1](https://1.1.1.1), do I have to change with [192.168.2.31](https://192.168.2.31) (static IP of Pi3)?",pihole,1650181262.0
2831,comment,1,i524d49,,"That's the quick and dirty way to get all devices using the pihole but you won't get individual stats in pihole all requests will come from your router.

A quick guide I googled

You are want option 2

https://en.avm.de/service/knowledge-base/dok/FRITZ-Box-7590/165_Configuring-different-DNS-servers-in-the-FRITZ-Box/",pihole,1650182338.0
2832,comment,1,i524gdn,,so what I have to do?,pihole,1650182412.0
2833,comment,1,i526wia,,"now Pihole logs just from ""pi.hole"" and ""localhost"", so I retype my old DNS on Fritz (1.1.1.1)",pihole,1650184474.0
2834,comment,1,i527m6a,,"This is what you want to do

https://imgur.com/a/IHox4ZQ

Once done reboot your clients (phone, laptops, TV etc)

Then they will all be using pihole",pihole,1650185077.0
2835,post,1,u4t8ko,Possible to show some details in page title? This is a mockup.,,pihole,1650097126.0
2836,comment,1,i5ixcbp,,https://discourse.pi-hole.net/c/feature-requests/8 :),pihole,1650485197.0
2837,post,15,u4pnly,HBO Max Apple TV,"I've only had PiHole going for about 2 weeks, and up until today everything was working fine. Today I started having issues with HBOMax on my AppleTV. I don't see anything obvious in the logs, and when I disable the PiHole, I'm able to resume for a period of time, but it will again think I don't have internet access within an hour. Any ideas?",pihole,1650082262.0
2838,comment,4,i4x5epv,,I had that happen recently with YouTube and thought it might have been my pihole but it turned out to be YouTube.,pihole,1650082819.0
2839,comment,1,i4xqgve,,I had issues on Thursday where teams wouldn’t work and I couldn’t vpn into work. I had my pihole temporarily disabled. Re-enabled it and everything started working fine again…. Odd!!,pihole,1650098357.0
2840,comment,1,i4z3snv,,My HBO Max won’t even launch. No piHole at the moment.,pihole,1650127034.0
2841,comment,1,i57jdr8,,So I’m still having this issue. Cropped up last night again. Disabling for 30 seconds let it work and then continuing. Looks like I’ll have to dig through the logs and do some experimenting.,pihole,1650290371.0
2842,comment,6,i4x6i7p,,I’m running PiHole on my network with my AppleTV and have used HBO Max on the Apple TV with no issues. I am using the default block lists and nothing custom.,pihole,1650083462.0
2843,comment,1,i5a9atq,,"Tonight I found that [clients3.google.com](https://clients3.google.com) is the culprit. After whitelisting, HBOMax is working as expected.",pihole,1650331365.0
2844,comment,2,i4x6mr5,,"Yep, that was me and YouTube. It might not be HBOMax but I would check and see if they are having issues with their app like YouTube did.",pihole,1650083536.0
2845,comment,1,i50fb60,,+1 to the best of my knowledge with no issues with my TV 4K (2nd Gen) and Pi-hole (Raspberry Pi) on my network.,pihole,1650148129.0
2846,comment,2,i4x6sg8,,Meant to reply to the original post but eh this will do hopefully 😂,pihole,1650083629.0
2847,post,63,u4ok4f,Do you guys have any UPS’ you can recommend?,"Hello,

After multiple instances of having my internet randomly stop working for no reason, I managed to pinpoint the issue to shitty power supplies and old electrical wiring. While the power supply has been upgraded, I can’t do anything about the shitty wiring, so I’ve been looking for a UPS for my pi for when the lights flicker or the grid has a brownout.


 I’d only be running the pi, a hard drive and a clock on it, so it wouldn’t have to have a huge capacity",pihole,1650078384.0
2848,comment,47,i4x456d,,"If you are after something cheap for a pi, you could just get a USB battery bank, just make sure it can passthrough charge (aka the USB powerbank can be charged at the same time it can charge a phone)  


lets say a pi draws 5v 1amp constant (just pulling a reasonable draw usage case here, pi is probably pulling less power). That is 5 watt hours, so call it 5watts.  


a 5000mah battery bank based on pure math will give you 5hrs of run time. but due to inefficacies etc, expect more like 3-4hrs.  


You can get those battery banks pretty cheap on amazon",pihole,1650082080.0
2849,comment,13,i4x0nyp,,I use the battery backed up USB port on my APC450.  I run two pi zero Ws via a Y splitter both running pihole2.,pihole,1650080135.0
2850,comment,12,i4wzhqd,,Cyberpower,pihole,1650079499.0
2851,comment,4,i4x1m28,,I have my main pihole and the modem/router plugged into the battery backup side of my APC BR1500MS2. If I lose power it’ll run those devices for over 3 hours. More if I remember to completely turn my monitor off.,pihole,1650080662.0
2852,comment,3,i4ygntf,,"I've been running an APC UPS Back-UPS Pro 1500 since 2014 with all my core gear plugged into it - Servers, Synology NAS devices, router, modem, 3 pi's, gig switch etc... been great. Have had to replace the batteries a couple of times tho - seems every 3 years that's needed. Still going strong.

https://www.apc.com/shop/ca/en/products/APC-Power-Saving-Back-UPS-Pro-1500-1500VA-120V-LCD-10-NEMA-outlets-5-surge-/P-BR1500G",pihole,1650116972.0
2853,comment,2,i4xyo4o,,"I have a pretty decent UPS for my set up and I used to have both my router and modem plugged into it…but whenever I had a power outage my Internet would still go out. I have cable Internet, so I assume it was something to do with the line itself losing power somewhere outside of my house and nothing I could do would save that.",pihole,1650105471.0
2854,comment,2,i4yegf8,,"If you have electrical issues at home, you should probably be protecting more than just your pi.  I usually recommend to most people to centralize as much of their network equipment in one place as they can.


I have my pi, modem, and router all next to each other and plugged in to an APC 425.  That's enough to keep my network up for several hours when there is a power failure.  I worked in IT for 15 or so years up until 2 years ago.  Two of those places had issues with short power outages and brown outs.  We used a mix of small APC and CyberPower UPSs.  I would highly recommend either of those manufacturers.  

One issue you might run into with network equipment is getting all of the power bricks to fit.  For that you can buy 1ft. Extension cords, that are sometimes called outlet savers.",pihole,1650115846.0
2855,comment,1,i4x1xo3,,I have a CyberPower OR500LCDRM1U that runs everything in my rack including a Pi3 w/pihole. It gives me about 1 hour of runtime. No issues for about 2 years. It's cycled several times in that time frame.,pihole,1650080839.0
2856,comment,1,i4x3hgx,,"Last time I was looking as UPS’s, CyberPower cp1500pfclcd came to the top of my list. It provides a very true Sine wave when on battery power, and was like 30%-50% less then the equivalent APC model. Overkill for just your pi though, I use them for my desktop gaming rig, my server, and then an older APC that handles all other gear (monitors, rasp-pi, switch, etc.)

Given the stability issues and shitty wiring you seem to be experiencing, finding a model that outputs a proper sine wave and provides voltage regulation will be the key features. What you done want is a large-stepped wine wave, nor one that will only kicks in with a complete power loss. You want one that’ll start up when it detects that the supplied AC signal is going out of standard.",pihole,1650081707.0
2857,comment,1,i4x6a6f,,"For a Pi anything that power conditions. Check the specs it will say. 

Honestly, you might look-into just a cell phone charger. I use one for my pi zero w. Granted mine is only running pi-hole so the power draw is minimal. But the cell phone battery is only $20.",pihole,1650083334.0
2858,comment,1,i4x8jtp,,"If you are on a budget, a random power bank should be fine.

Lets say your powerbank has 5000 mAH, which is 5000x3.7=18.5 WH. Assume the efficiency is 80% (quite low actually, you could assume 90%), so only 14.8 WH could be used. A pi4 at full power consumes 6.4W according to [jeff](http://www.pidramble.com/wiki/benchmarks/power-consumption). So you are left with about 2.3 Hours of power. Normal powerbanks have sufficient protection and are quite cheap these days

If you assume 85% efficiency, 15.725 WH usable, pi4 idles at 2.7W, lets say 3W because of pihole is running, then you have 5.24H of runtime.

For reference, a 20000mah power bank has 4x the runtime of a 5000mah one. I found one of those 20000mah under 22USD.",pihole,1650084701.0
2859,comment,1,i4y4zq6,,"I got the Cyberpower CP425SLG for less than $100. It’s got enough of a battery to keep the pi running for a while, it also has a usb connection to a Linux or windows machine so it can trigger a graceful shutdown when the UPS charge drops below 35% using power panel.

You don’t need much for a pi. If you were plugging in your PC and a few other devices go 1500+",pihole,1650110298.0
2860,comment,-8,i4x07np,,I'm only familiar with www.ups.com,pihole,1650079890.0
2861,comment,-3,i4wz7kx,,You could always build one with super capacitors,pihole,1650079349.0
2862,comment,1,i4x0kj2,,"Not sure if this exactly meets your requirements, but I’ve been considering something like [this](https://a.aliexpress.com/_mNjAFGQ) for my Pi-holes running on Pi Zeros.",pihole,1650080083.0
2863,comment,1,i4x6dr6,,Home?  I use the APC BackUPS 1500.   Awesome units.  (I have 6 of them in my office),pihole,1650083390.0
2864,comment,2,i4x9n6y,,"I got one of these last summer, and have my cable modem, router, AND Pi all plugged into it.  Only one wall wart now, and should last quite a while (I haven't tested how long.)

https://www.amazon.com/gp/product/B07WLD32RP/

Basically an on-line DC UPS.  Everything is plugged into the batteries directly.",pihole,1650085364.0
2865,comment,1,i4xmn41,,"I've been using a couple of these around the house. If you do some configuration it will auto shutdown the pi when the battery is almost dead. 

MakerFocus Raspberry Pi 4 Battery... https://www.amazon.com/dp/B01LAEX7J0",pihole,1650095065.0
2866,comment,1,i4xo8mq,,"I'm using a pi2 for my pihole and it's being powered from the usb port on my router. So in my case, any UPS can be used on the router. I'm not sure if it's ""sufficient"" but it's given me no problems in 3-4 years. I'm not sure if a newer pi can be powered that way.",pihole,1650096417.0
2867,comment,1,i4y45o6,,"Try this maybe?

https://sequentmicrosystems.com/products/raspberry-pi-battery-backup",pihole,1650109724.0
2868,comment,1,i4yc5b7,,Michael Klemins did a video on how you can build on yourself which was specifically designed for RPi‘s. That might help,pihole,1650114629.0
2869,comment,1,i4ypsic,,I would recommend the x728. I have a bunch running on my Pis and they work great.,pihole,1650121216.0
2870,comment,1,i4z611r,,"A UPS for a Pi sounds like killing a mosquito with a sledgehammer.

At the bargain/dollar stores you can find inexpensive USB emergency battery chargers.  Some will allow you to plug them into a charger, while they are simultaneously powering a device.

Bam.  That *is* a UPS.  $5 and done.",pihole,1650127981.0
2871,comment,1,i4zcgj3,,"Got two Eaton Ellipse ECO 650 USB DIN. One powers my synology diskstation ds218 + and my WiFi switch. The other powers my gaming pc with two monitors, sit-stand desk and so on.",pihole,1650130728.0
2872,comment,1,i4zs8ra,,"CyberPower CP1000AVRLCD Intelligent LCD UPS System, 1000VA/600W, 9 Outlets, AVR, Mini-Tower       [https://smile.amazon.com/gp/product/B000QZ3UG0](https://smile.amazon.com/gp/product/B000QZ3UG0)

Been using one for years on Linux. Even comes with a systemd service to cleanly shutdown machines.",pihole,1650137765.0
2873,comment,1,i4zv5jo,,I run my Pis off PoE from the switch. My network stack just runs off cheapo Best Buy brand (Geek Squad and RocketFish) 1025VA UPSs. Its enough to get through brownouts and sub 30 minute outages.,pihole,1650139100.0
2874,comment,1,i4zxdh8,,Get a cyberpower UPS so u can run your whole network on it.,pihole,1650140108.0
2875,comment,1,i4zz15l,,"I'm using a couple of APC units. Unfortunately probably old enough that they're no longer on sale.

A regular UPS may seem like overkill if you're just running a few things.  But you left your router and modem off the list - there's not much point in running your Pi Hole if the internet isn't working. Might I mention, too - the battery in a full UPS is often user replaceable when the time comes. I've done this a couple times - just pop the battery out, make note of how the wires are wired, take the old batteries to a Batteries Plus and they'll give you a discount on the new batteries (they recycle the old ones, and can make some money once they've removed the precious metals). You can even swap to a battery that has longer run time, as long as it's outputting the same voltage and such.",pihole,1650140848.0
2876,comment,1,i52um9o,,"Angler make usb battery packs with pass through power, meaning can run device and keep device charge until power loss!",pihole,1650201812.0
2877,comment,0,i4xaani,,"I have a few different ones for a variety of gear. If you need one that can go for a while, But suggest you check to see if you can disable the beeping. My two smaller ones don’t, and it gets old quick for a lengthy outage.",pihole,1650085772.0
2878,comment,47,i4x8vt4,,"Jeff did a [research](http://www.pidramble.com/wiki/benchmarks/power-consumption) on power consumption, pi4 at full load consumes 6.4W. A 5000mAh power bank has 18.5 Wh, assume 85% effieiency then 15.725Wh is usable. 15.725/6.4 gives you about 2.45 hours of runtime. A idle pi consumes 2.7W, lets say 3W as pihole is running. Thats 5.24h of runtime.",pihole,1650084907.0
2879,comment,3,i4z65zo,,"Are these battery banks safe? Exploding battery banks are on the news all the time. 

Do they have enough safety features that you can rely to leave them on 24/7?",pihole,1650128040.0
2880,comment,3,i4y43bt,,"Unfortunately most power banks don’t have a controller that is smart or fast enough to keep the pi running when the power cuts off or fluctuates. It will either just restart or stays off.

They can also be damaged in this way and could cause a fire.",pihole,1650109679.0
2881,comment,1,i4zruls,,Over time this is a fire hazard and you run the risk of the battery bank puffing up and or bursting into flames from over charging.,pihole,1650137584.0
2882,comment,1,i508f3o,,I looked into this but ultimately decided against it in favor of a true UPS to keep the whole network up in a power failure,pihole,1650145053.0
2883,comment,1,i53npsa,,"Is it actually OK to run a battery bank like this? I did it for a while, but eventually the battery bank died. My assumption is that the constant charging wore out the battery. I also used an old phone as a security camera and the battery bloated, so running a battery bank like this would make me nervous.",pihole,1650214737.0
2884,comment,2,i4wzrzy,,Any specific models?,pihole,1650079651.0
2885,comment,1,i4zq4i0,,Cyberpowers are easy to work on and switch out batteries. Reminder every 3 years switch your batteries. You can get UPSs at your local thrift store that just need a battery swap.,pihole,1650136794.0
2886,comment,2,i4yk5qx,,I'm lucky enough that my company buys APC Back-UPS Pro models for employee and lab desktops and tosses them when the battery dies. I can pick ones in great condition out if recycling and just buy batteries.,pihole,1650118679.0
2887,comment,2,i4ybq8s,,The cyberpower sine wave upses are great. I've had two for a decade or so. Replaced the batteries in the last few years. Still work great.,pihole,1650114400.0
2888,comment,0,i4ycfa7,,Oh cmon guys this was kinda funny,pihole,1650114782.0
2889,comment,3,i4y4zik,,"There's a package called apcupsd available in apt if you wanted to dig the USB cable out of your UPS box and connect it to your Pi.  You can do things like check runtime, set battery change date, adjust sensitivity for switching to batt., and configure actions for power events -- e.g. run this shutdown script when x mins. remain on battery, etc.",pihole,1650110293.0
2890,comment,2,i4y9qmt,,I have that one too. Highly recommended!,pihole,1650113272.0
2891,comment,27,i4xer00,,">	Jeff done a research on power consumption

Wow, thanks Jeff!",pihole,1650088842.0
2892,comment,10,i4xgs4d,,"Yeah. Basically more in depth at the point I was making. You don't need a UPS, just a small battery bank would do the trick.

Even one of those tiny lipstick sized ones at 1000mah would do the trick for a decent amount of time of a mostly idle pihole.",pihole,1650090363.0
2893,comment,1,i515zcc,,"sorry cant comment directly on this, I have just heard people using something like this. My power is very stable I only purchased a 1500 KVA UPS because of a potential issue that could lead to brown outs like 7 years ago.",pihole,1650160687.0
2894,comment,4,i4y9xug,,A quick google search you can get a hat with a 1200mah battery.,pihole,1650113388.0
2895,comment,1,i516nsy,,fair enough.,pihole,1650161033.0
2896,comment,1,i53rey8,,"My guess it would have to be wired in such away that to allow just pass through. I'm not sure.

Personally I have stable enough electricity to not worry about a UPS. I have contiplated selling mine since it doesn't work on my server.

I have only had 1 outage in over 2 years. My house was first in an area to be built and they had to take the power offline I assume to run new cables to a new area, since then rock solid stable, clean and green 233v.",pihole,1650216251.0
2897,comment,7,i4x2tl9,,"Even the smallest ones will be enough for a raspberry. I have 2 Cyberpower CP1500AVRLCDs and a monster PR1500LCD.

If all you want is the raspberry covered and your router/modem I'd get a cheap cyberpower Ec450g 450va ups. Good for 260 watts of draw.",pihole,1650081332.0
2898,comment,3,i4x1n2l,,It is just how big the battery will be,pihole,1650080678.0
2899,comment,3,i4y84gi,,I have two pi-holes and my AIO computer running off a APC UPS for the last couple years with no problems. I used to use Cyberpower UPS but the batteries and electronics went bad in them so I switch to this APC UPS. [https://www.microcenter.com/product/647002/apc-apc-ups-battery-backup-and-surge-protector](https://www.microcenter.com/product/647002/apc-apc-ups-battery-backup-and-surge-protector),pihole,1650112301.0
2900,comment,1,i4yletz,,Nice!,pihole,1650119274.0
2901,comment,1,i4ziehl,,"That's kind of overkill for a device that draws 5-6w. I'm not even sure if it would realize that it had a device drawing power.  I've actually got a Pi3 and Pi4 on mine, but I've also got 2 desktop (well, deskside) boxes, my cable modem, router,  and a bunch of other stuff.",pihole,1650133321.0
2902,comment,8,i4xh9rv,,"Yeah, you must notice if the power was down, then your router would stop working. If yout network was down, pihole wont work anyway. You just need the few minutes to shutdown your pi property.",pihole,1650090742.0
2903,comment,1,i4z70xq,,It’s a great idea. It’s just too bad there are so many quality inconsistencies with these types of things.,pihole,1650128403.0
2904,comment,2,i4ylwuv,,"Can't speak to the electronics but batteries always go bad.

My cyberpower is 10 years old and still kicking.",pihole,1650119508.0
2905,comment,4,i4xi6ew,,"My server hates my UPS. never figured out why, they claim over/under voltage. My old dell's never had that issue (I have a HPE DL360 G9)

So my UPS powers everything else and my NTD had its own 8hr battery.

I think I have 1hr runtime and the server will hard power off.

Good thing I have only had 1 power outage (planned) in 2.5yrs and my power is very clean at decent voltage (233v when I last checked).",pihole,1650091441.0
2906,comment,4,i4ynbex,,Batteries in UPS's should be swapped out every 3-5 years.,pihole,1650120136.0
2907,comment,2,i4z7861,,"I recently swapped from an all APC house, like I easily have a dozen, to Eaton because over the years and different models of APC, they always fail when you need them and most of the time, it isn’t the battery but the capacitors in the unit itself.",pihole,1650128486.0
2908,comment,1,i4z8xdw,,I bet that’s Active PFC messing with you.,pihole,1650129213.0
2909,comment,-2,i4xiizo,,In the past 15 years I havent seen a single power outage. So none of my devices have UPS.,pihole,1650091714.0
2910,comment,1,i516do1,,">Active PFC 

I have no idea what this is, first time I'm hearing of it.   


The Servers dual power supplies would work for a time, but within 24hours in what ever configuration it was set up in, a PSU plugged into the UPS would disable itself. If both were plugged into the UPS the server would hard shutdown",pihole,1650160889.0
2911,comment,2,i4xkfs0,,I suspect the reason I had one was it's a new subdivision and they probably had to do something with the underground lines. It was only an hour I think? I'm not sure I was at work when the power dropped.,pihole,1650093249.0
2912,post,2,u4kg76,not giving name pineh64-b to the DHCP lease of [it's own ipv6] because the name exists in /etc/hosts with address ::1,"I have this weird problem, with a dnsmasq warning. (Happening every \~5 mins, so a lot over time)

The warning is:

>""not giving name pineh64-b to the DHCP lease of \[4 block of ipv6\]::118 because the name exists in /etc/hosts with address ::1""

pineh64-b is the hostname of the host of the pihole container.

The address is from the eth0 adapter:

    inet6 [4 block of ipv6]::118/128 scope global dynamic noprefixroute
    valid_lft 2818sec preferred_lft 2818sec

I'm running pihole from the following docker-compose file:

    version: ""3""
    
    services:
      pihole:
        container_name: pihole
        image: pihole/pihole:latest
        network_mode: host
        environment:
          TZ: '[MY/TZ]'
          FTLCONF_REPLY_ADDR4: 192.168.0.9
          FTLCONF_REPLY_ADDR6: [4 block of ipv6]::118
          DNSMASQ_USER: root
        volumes:
          - './etc-pihole/:/etc/pihole/'
          - './etc-dnsmasq.d/:/etc/dnsmasq.d/'
        cap_add:
          - NET_ADMIN
        restart: unless-stopped

I've read [https://docs.pi-hole.net/ftldns/dnsmasq\_warn/](https://docs.pi-hole.net/ftldns/dnsmasq_warn/) but It doesn't really point me in a direction how to solve this - since it's a different address of the same adapter.

The eth0 adapter has the following addresses as well:

        inet6 [4 block of ipv6]::118/128 scope global dynamic noprefixroute
           valid_lft 2818sec preferred_lft 2818sec
        inet6 [4 block of ipv6]:1916:f44c:65e:acf1/64 scope global dynamic noprefixroute
           valid_lft 400384sec preferred_lft 400384sec
        inet6 [different 4 block of ipv6]:acfd:2bfc/64 scope link noprefixroute
           valid_lft forever preferred_lft forever

When looked up externally, both on pi.hole or pineh64-b nslookup shows the `[4 block of ipv6]:1916:f44c:65e:acf1` address

This is not a functional problem but it makes reading the pihole diagnosis a real hassle.

If anyone could send me in a direction to solve this properly, I'd appreciate it.Thanks,",pihole,1650064574.0
2913,comment,1,i512fta,,"I do not use docker but it seems like you gave each container or whatever its called the same hosts name change one.

call one a and one b Like I said I don't use docker so it's off to google for you on how to change the hosts name on docker  -- Good luck",pihole,1650158939.0
2914,post,1,u4etdi,Unbound not resolving nip.io links,"This  is kind of a niche problem, but I'm in the middle of setting up a  server cluster and trying to use prometheus for monitoring.  The internal network link for monitoring can only be resolved if I set the DNS to an external DNS,  not Unbound.  Is there any way I can fix this?  No networking  wizard so this may be a simple fix but having trouble with this.   Thanks!",pihole,1650048231.0
2915,comment,1,i4v5gxx,,">The internal network link for monitoring can only be resolved if I set the DNS to an external DNS, not Unbound.

Map the domain to the local IP in Local DNS records in the web admin GUI.",pihole,1650048542.0
2916,comment,1,i4v5mqc,,I'm able to resolve [nip.io](https://nip.io) on both of my unbound installations. Is it actually unbound that's unable to resolve or is it PiHole that's blocking the domain?,pihole,1650048609.0
2917,comment,1,i4v68it,,Yeah that fixed it. Super easy. Do the local DNS entries support a wildcard in the domain? I have multiple monitoring links that should all resolve to the same IP. Thanks!,pihole,1650048865.0
2918,comment,1,i4v5sxi,,"From what I can tell it’s an inbound issue, because when I change my DNS to google for example, the link is resolved, but using Unbound on the localhost prevents it.",pihole,1650048681.0
2919,comment,1,i4vb6z0,,">Do the local DNS entries support a wildcard in the domain?

No.

This command in dnsmasq may do what you want:

**-S, --local, --server=\[/\[<domain>\]/\[domain/\]\]\[<ipaddr>\[#<port>\]\]\[@<interface>\]\[@<source-ip>\[#<port>\]\]**

https://thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html",pihole,1650050957.0
2920,post,0,u4dvba,Pihole and kids...,"Ok, so my kid got to the age where I need to monitor what the hell is she googling.  
I know kids need to explore and stuff, and I dont wanna deny her that, but internet now and when I was a kid are 2 very different things...  
So I got a Pihole installed on Rasp Pi3 model B, and its doing its job, and i'm happy with it.  
But what can I do to see what is she googling, as far as I understood Pihole can't help me there.  
Was googling a bit, and saw few people were using Squid as a proxy server...  
So is this a viable option, to put 2 services on Pi3 B model, could it handle it, or does it depend on the SD card size, I tried to find out what is Squids usage but no such luck.

Or if som1 has any other solution I'm all ears...  


Thx",pihole,1650045638.0
2921,comment,1,i4v5mu7,,As I comment on all similar topic posts - please don't provide unsolicited parenting advice.  Such comments will be removed.,pihole,1650048611.0
2922,comment,7,i4v2lrd,,"Don't block what is being googled. Block what you don't want to be shown.

For kids, basically the whole ""Other Lists"" from here https://firebog.net/",pihole,1650047354.0
2923,comment,4,i4vamab,,"A possible ""quick-n-easy"" fix would be to setup something like OpenDNS family shield as upstream DNS on the Pi, [https://www.opendns.com/home-internet-security/](https://www.opendns.com/home-internet-security/) .

With that said and no intent of getting you more worried than you already are, filtering web searches at home is one thing. Smartphones and chat apps with photo/video sharing is a whole other barrel of worms.",pihole,1650050709.0
2924,comment,3,i4vbpgd,,Managing all of their web traffic might be an endless amount of work. Have you considered using something like blocking lists on the Pi-hole for unwanted sites and then pointing the Pi-Hole to something like OpenDNS's FamilyShield name servers? It's free and you can let someone else be at the wheel. They're [208.67.222.123](https://208.67.222.123) & [208.67.220.123](https://208.67.220.123).,pihole,1650051181.0
2925,comment,12,i4uzd11,,[removed],pihole,1650046023.0
2926,comment,2,i4v05jk,,"The “best” solution is to use a devise manager on the endpoint to log and filter. The downside of doing that is cost and when your kid finds out they will tell their friends and hate you. Other options include setting up a reverse proxy and look at logs there. Broadly speaking, as soon as the kid finds out your doing this they are going to get around it. There are a million ways to jump over and through security tools and they will start using them.",pihole,1650046353.0
2927,comment,1,i4vdean,,"I agree with the upstream OpenDNS option. What is your current game pan should you discover that your child has searched for something that you find objectionable? Does your child have a mobile device? Does your child have a laptop they are allowed to take out of the house? You will never be able to cover every situation with a technical solution. The best solution is consistent conversation in which you set family moral boundaries. But I assure you, you will drive yourself nuts if you are constantly checking search history and logs etc. I trust my children to be children, little humans. I understand they are going to be curious about things that they are exposed to. Not every conversation they have or person they befriend will be acceptable to me. As a parent I need to have consistent conversations with them about their lives in general.

On the flip side, you can always modify the host file of their computer by adding the addresses that your PiHole is blocking. Or taking a previous suggestion to leverage, https://firebog.net/ 's listings, you can create a larger, master hostfile which could be place on the computer. That would ensure that even when the computer was out of the house or when the PiHole went down, there would be a fall back. But if you really want to know what your child is curious about, just ask them, on the regular and don't make it weird.",pihole,1650051924.0
2928,comment,1,i4vdmr3,,"It’s possible to route the Google-search to googlesafesearch etc. In cname/dns records under „local dns“. Maybe that’s a first step. You can run 2 piholes in docker. 1 for adults, 1 for kids with that cname/DNS-rules ( and other blocklist). Local- dns don’t support client/groups.",pihole,1650052025.0
2929,comment,1,i4vzkh8,,"It is not what she is searching that is important.  It is the sites that she visits.  She could search for “White House” and then get anything from the US capital, to the color of houses, to a porn site, or a racist community.  PiHole should be able help.  But, you’ve also got to lock your network down to not allow her to bypass your PiHole.  And, if she wants to, she can still get around your security by using a vpn, unless you really lock the network down.  But, she can just use her cellular service on her cell phone, and never connect to your network.

So, although your intentions to protect her are good, there are many ways to circumvent your monitoring her.",pihole,1650061858.0
2930,comment,1,i4wv0pm,,Just use the app qustodio for parental control,pihole,1650077134.0
2931,comment,1,i4wv2wv,,"if this is a must. try something like 'break and inspect' 

googling the quoted words above will lead you down a path of various devices which can perform this.",pihole,1650077166.0
2932,comment,1,i4wz708,,"Squid would do what you want, but it's not the ideal solution, and takes a bit of skill to set up, and time to monitor. If you just wanted to produce a list of URLs fetched or visited, it wouldn't be too difficult. You can use Squid and another tool called SARG for various reports.

If you decide to use squid, DON'T use it as a caching server, it'll ruin your SD card with too many writes.",pihole,1650079340.0
2933,comment,1,i4y1r6q,,"Well alot of good ideas, some of which I will explore more.  
I do agree with u/winston198451 that consistent conversation with kids is way more important than spying on them. And I do that alot, but my idea is that if I find something that I consider undesirable for her, at least I know the topic, and I can ""steer"" the conversation in that direction and eventualy explain why I think its not good for her.

As a friend of mine pointed a few days ago - ""dude, we had rotten..."" - and my response was ""yes, but you showed it to me, who else of our inner and wider circle of friends knew about it? Just a few of us. And why? Bkz we didnt know how to use interwebz properly. They are teaching them how to use f\*\*\*\*\*g incognito mode in school""  


So yeah, little humans will be little curious f\*\*\*\*\*s, and I got no problem with that, I mean we mostly learn from trial and error...

But there are things that I belive would be a great fault on my side if I ignored it all together.",pihole,1650107958.0
2934,comment,1,i4yc33t,,"Okies, me think i have a partial solution to my conundrum, so i googled some more and...  
\-> put static IP's to you kids devices (but not on the device itself, on the router/Pihole...) and   
remember that you get different MAC for LAN and WLAN connections  
\-> go to ""Group Management"" and create a group eg. Kids  
\-> then go to ""Clients"" and add those static IP's from the kids devices as new clients, and   assign them under ""Group assignment"" to eg. Kids group  
\-> go to ""Adlists"" and add block sites and just add them to the eg. Kids group  


They cant go to sites you dont want them to go, but you \*cough cough\* can :D",pihole,1650114596.0
2935,comment,-1,i4z5xmf,,Anyone else hear the helicopter?,pihole,1650127942.0
2936,comment,1,i4vjvmg,,"This, and/or if your router has SafeSearch capability - enable it for the kids devices.",pihole,1650054709.0
2937,comment,1,i4xdy7m,,Is there an EU equivalent of openDNS?,pihole,1650088257.0
2938,comment,1,i4y2r9w,,"Sure. I'll say this topic of parenting is difficult. Faith and morality will play heavily into how we parent, the conversations, we have and the strategies we develop. The ""world view"" will always be anything goes vs. a faith based view and when we become parents, for most of us it becomes war. I hope some of the technical solutions presented here are helpful stop gaps to bridge the larger effort you are making with your kid.",pihole,1650108714.0
2939,comment,1,i4xyq1y,,"No idea, OpenDNS just popped into my mind as they are listed in the Pi-Hole settings.

I know some ISPs offer safety/family packages but what they actually do or if they are any good I can't tell. Check with your ISP or if you pay for AV they might offer something similar.",pihole,1650105515.0
2940,post,25,u4djie,2 Pi-hole setups but DNS resolution doesn't occur if the primary Pi-hole goes down,"***UPDATE 4/16/2022 - I have managed to resolve this thanks to this community. I will leave my current configuration of the 2 Pi-holes at the end of this post. I want to say thank you to everyone in the comments who helped figure this out.***

Here is my situation: Using a Pi-Hole + unbound on a raspberry pi zero ([192.168.55.2](https://192.168.55.2)). This Pi-Hole also acts as a DHCP server for my house instead of my router ([192.168.55.1](https://192.168.55.1)). I then setup another Pi-Hole + unbound instance on a Raspberry Pi 1 model B ([192.168.55.3](https://192.168.55.3)). I haven't enabled DHCP server on this second instance because it may create a conflict with the primary DHCP server. The router DHCP server is also disabled and I have listed [192.168.55.2](https://192.168.55.2) and [192.168.55.3](https://192.168.55.3) as DNS servers in the router.

What I want to happen - If either of [192.168.55.2](https://192.168.55.2) or [192.168.55.3](https://192.168.55.3) go down for some reason, then the network in the entire home would be unaffected.

What actually happens - If [192.168.55.3](https://192.168.55.3) goes down, its not a problem. However, if [192.168.55.2](https://192.168.55.2) goes down, then all of the devices on the network seem to be loosing it.

Is this happening because the [192.168.55.2](https://192.168.55.2) is acting as the DHCP server? How can I go about achieving the scenario that I described earlier where I keep my network up and running if one of the two devices running Pi-Hole goes down? Thanks!

# Solution:

***What I wanted to achieve - Use 2 Pi-hole instances so that my network doesn't go down if one of the two Pi-hole instances stops working (likely a reboot or something). I wanted to use Pi-hole as my DHCP server instead of my router and use unbound for recursive DNS on both Pi-hole instances***

**STEP 1: Have two different instances of Pi-hole on your preferred devices.**

In my case, it is a raspberry pi zero (static IP [192.168.55.2](https://192.168.55.2)) and a raspberry pi 1 model B (static IP [192.168.55.3](https://192.168.55.3)). The official Pi-hole covers how to set the static IPs so I won't go over that here.

**STEP 2: Disable DHCP server on your router.**

At this stage, if your router lease time was set long enough, your devices might continue to have a valid IP and connect to the Pis over SSH. In my case, I set one of my computers to use a static IP and used to it for all steps that I am about to describe next.

**STEP 3: Install unbound and configure Pi-hole to use unbound on both instances of Pi-hole.**

The how-to for this is well described in the official documentation - [https://docs.pi-hole.net/guides/dns/unbound/](https://docs.pi-hole.net/guides/dns/unbound/)

**STEP 4: Enable DHCP server on Pi-hole-1 (This is how I will refer to** [**192.168.55.2**](https://192.168.55.2) **going forward)**

In my case, I set the range of IPs for the DHCP server to hand out from [192.168.55.101](https://192.168.55.101) to [192.168.55.150](https://192.168.55.150). I also took the time to set IP reservations for all of my devices (These are starting at [192.168.55.10](https://192.168.55.10) onwards).

**STEP 5: Enable DHCP server on Pi-hole-2 (This is how I will refer to** [**192.168.55.3**](https://192.168.55.3) **going forward)**

I set the range of IPs to hand out from [192.168.55.151](https://192.168.55.151) to [192.168.55.200](https://192.168.55.200). I also transferred the same static IP reservations from Pi-hole-1 to this instance. (These reservations are stored in a file: `/etc/dnsmasq.d/04-pihole-static-dhcp.conf`)

**STEP 6: Modify dsnmasq configuration on both Pi-hole instances**

*UPDATE 4/17/2022 - See comment from* u/tryharder123456789 *below. Instead of changing the 02-pihole-dhcp.conf file (which gets overwritten), you can create a separate file and provide the dhcp-option 6 there.*

Each Pi-hole instance uses only one custom upstream DNS server [127.0.0.1#5335](https://127.0.0.1#5335) (as explained in the unbound documentation linked in STEP 3 above)

The next step was to modify dnsmasq config on both Pi-hole-1 and Pi-hole-2 so that it hands out IP for both Pi-hole instances as DNS servers to all DHCP clients.

This was achieved by modifying `/etc/dnsmasq.d/02-pihole-dhcp.conf` file and adding the line below on both Pi-hole installations.

`dhcp-option=6,`[`192.168.55.2`](https://192.168.55.2)`,`[`192.168.55.3`](https://192.168.55.3)

This was followed by restarting the pihole-FTL service.

>sudo service pihole-FTL restart

At this point, lease for each client needs renewing before the changes will take place. By default this will happen at the lease duration that you have chosen in Pi-hole settings.

More discussion about this can be found here - [https://discourse.pi-hole.net/t/secondary-dns-server-for-dhcp/1874/4](https://discourse.pi-hole.net/t/secondary-dns-server-for-dhcp/1874/4)

**STEP 7: Testing out if it works**

In my case, I decided to force renew the lease for my machine by following:

>sudo dhclient -r  
>  
>sudo dhclient

I was able to look up the dns servers assigned by the DHCP server using following command (eplace (interface) with your network interface), which indeed showed me two DNS servers corresponding to Pi-hole instances.

>nmcli device show (interface)

Then, I was able to test all of this by stopping the pihole-FTL service on one Pi-hole at a time without loosing DNS resolution on clients.

**Success!!! Maybe?**

Still a couple of things I am not sure about:

1. It appears that the `02-pihole-dhcp.conf` file gets overwritten. To be fair, it says so when I open the file for editing. I am not sure how to get past this. Maybe u/jfb-pihole can point me in the right direction?
2. I see now that each of my devices (currently with a static IP reservation) get a lease from both Pi-hole DHCP servers. Is that normal? Since, I now have two DHCP servers running on my network with different IP ranges, what happens if a new device connects to my network? Will it get IP from both DHCP servers? Or whichever server sees the client first will give an IP and the other server will just stay quiet? or will it be chaos??

&#x200B;

&#x200B;",pihole,1650044723.0
2941,comment,14,i4v7hwi,,"Edit /etc/dnsmasq.d/02-pihole-dhcp.conf

and edit/insert a line saying

dhcp-option=6,192.168.55.2,192.168.55.3

Then restart pihole and refresh the dhcp lease on your clients, or just wait.",pihole,1650049393.0
2942,comment,8,i4vbfsg,,"Your DHCP server (the Pi at IP 2) needs to pass out its own IP as well as the IP of the other Pi-hole during the DHCP transaction.

https://discourse.pi-hole.net/t/secondary-dns-server-for-dhcp/1874/4",pihole,1650051065.0
2943,comment,2,i4ywdff,,"I’m not where I can look at my configuration right now.  However, what you have stated does not sound correct to me.  

You have DHCP turned off in the router, and turned on in two PiHoles.  But you say you have DNS configured in your router.  Your DNS settings should be handed out by your DHCP server when it is handing out IP addresses.  Check your DHCP settings in your PiHoles, and verify that both DNS servers are listed there.",pihole,1650123957.0
2944,comment,2,i517h43,,">It appears that the 02-pihole-dhcp.conf file gets overwritten. To be fair, it says so when I open the file for editing. I am not sure how to get past this. Maybe u/jfb-pihole can point me in the right direction?

You need to create a new file you can call it what you want.

I used this name for the file name on both of my pihole's.Create a blank document (yes this name is different than the default pihole install and will not be over written from reboots or reconfigure and upgrades)

    sudo nano 06-pihole-dhcp-DNS.conf

then add this to both piholes

    dhcp-option=6,192.168.55.2,192.168.55.3

then ctrl+x and then ctrl+y to save it. then reboot everything even the router and all your devices (unless you want to run some commands that I don't feel like looking up right now)",pihole,1650161452.0
2945,comment,2,i4w5uis,,"u/3216 and u/jfb-pihole \- Thank you for your explanation and guiding me towards relevant commands and links. Since both of you pointed me towards the solution, I wanted to share the progress in a single comment and also report further roadblocks. I will try to explain what I did in steps. Also, I explain this for a single clent which is a linux desktop. But I also see similar behavior in both

**STEP1: Add the DHCP option**

I added following line to /etc/dnsmasq.d/02-pihole-dhcp.conf of my [192.168.55.2](https://192.168.55.2) Pi-hole instance (that acts as dhcp server)

`dhcp-option=6,`[`192.168.55.2`](https://192.168.55.2)`,`[`192.168.55.3`](https://192.168.55.3)

 and then restarted the pihole-FTL service

**STEP2: Renew the lease**

I renewed the lease of my computer with

>sudo dhclient -r  
>  
>sudo dhclient

**STEP3: Test how network behaves if** [**192.168.55.2**](https://192.168.55.2) **goes down**

Stop Pi-hole FTL service on 192.168.55.2

>sudo service pihole-FTL stop

And then I try to browse the web on the client with renewed lease. I can't get to any new websites. At this stage, I can see that [192.168.55.3](https://192.168.55.3) starts to log queries, however, every single response is NXDOMAIN

An example of how the pihole -t output looks like - 

>00:15:28: query\[PTR\] 19.56.168.192.in-addr.arpa from 192.168.55.1  
00:15:28: config 192.168.56.19 is NXDOMAIN  


When both Pi-holes are running, the requests going through [192.168.55.3](https://192.168.55.3) are handled appropriately. 

Can you think of what's going wrong here? Thanks!",pihole,1650064815.0
2946,comment,1,i4uxozs,,[deleted],pihole,1650045350.0
2947,comment,2,i4x56yy,,Have you checked what your IP address settings are when the issue occurs? What are the DNS addresses assigned?,pihole,1650082698.0
2948,comment,1,i4xl5go,,Could you check if your secondary pi’s upstream dns is pointing to 127.0.0.1#5335 and also run a “dig google.com” and report back what you get?,pihole,1650093828.0
2949,comment,-2,i4v5873,,Well obviously it's because your DHCP is down.,pihole,1650048441.0
2950,comment,2,i4vbpau,,Can you explain a little bit about what this will do? Thanks!,pihole,1650051179.0
2951,comment,0,i4w62bk,,Thank you for your help. I decided to consolidate my experience after trying this out in a different comment as another user also replied with similar information in this thread. I would appreciate if you can take a look at that comment.,pihole,1650064916.0
2952,comment,1,i4zeihe,,"Thank you. It appears this was part of the problem. Originally, somehow the Pi-hole was handing out only one DNS server (itself) to clients. I was able to edit the `/etc/dnsmasq.d/02-pihole-dhcp.conf` file to add an option 6 (i edited my original post above to explain what I did in detail) and added both DNS servers. It does appear that the changes to this file get overwritten by the web-interface but I am still figuring that out :)",pihole,1650131612.0
2953,comment,1,i51sdfg,,Thank you! This definitely works!,pihole,1650173134.0
2954,comment,1,i4yuisk,,"Your network is 192.168.55.x .  Your pi-hole output is looking up 192.168.56.19.  Are you using VLANs or is your network larger than /24?  This IP address is out of your local network.

Do you have your DHCP Servers handing out IP addresses for different networks?",pihole,1650123192.0
2955,comment,1,i4v1stj,,No. [192.168.55.3](https://192.168.55.3) also has unbound installed so it can do its own recursive DNS resolution,pihole,1650047025.0
2956,comment,2,i50veku,,"Yes, the problem was with DNS servers handed out to clients (only one Pi-hole IP was being handed out). I was able to fix that by changing the DHCP config.",pihole,1650155541.0
2957,comment,1,i4zevqj,,"Yes, it is correctly pointed to that address. Here is the output for dig on google.com

    pi@raspberrypi:~ $ dig google.com
    ; <<>> DiG 9.11.5-P4-5.1+deb10u7-Raspbian <<>> google.com ;; global options: +cmd ;; Got answer: ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 6944 ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1
    ;; OPT PSEUDOSECTION: ; EDNS: version: 0, flags:; udp: 512 ;; QUESTION SECTION: ;google.com.			IN	A
    ;; ANSWER SECTION: google.com.		65	IN	A	172.217.5.14
    ;; Query time: 232 msec ;; SERVER: 127.0.0.1#53(127.0.0.1) ;; WHEN: Sat Apr 16 18:54:06 BST 2022 ;; MSG SIZE  rcvd: 55",pihole,1650131772.0
2958,comment,0,i4v7mo0,,Not if your dhcp lease time is long enough.,pihole,1650049447.0
2959,comment,10,i4vc0ob,,It’ll configure your dhcp server to issue 2 dns server addresses to the clients. By default it only issues one dns server which is it’s own ip address.,pihole,1650051316.0
2960,comment,1,i50oq2g,,"Be sure that your DHCP server is handing out both DNS servers, not just its own.  It is possible that DNS could fail, but not DHCP.  This would keep your systems going.",pihole,1650152414.0
2961,comment,1,i4yzmye,,"I do not use any VLANs. I apologize about that mix-up. As I was writing this post, I accidentally started typing 192.168.55.xx everywhere only to realize my typo afterward. At that point, I decided to continue with the typo since that shouldn't affect anything (but forgot to edit that in Pi-hole tail output).",pihole,1650125295.0
2962,comment,0,i4v2lzm,,[deleted],pihole,1650047357.0
2963,comment,1,i4vbkzx,,"Yes, lease time is long enough that I don't believe lease time should be an issue.",pihole,1650051127.0
2964,comment,1,i4w60f5,,Thank you for your help. I decided to consolidate my experience after trying this out in a different comment as another user also replied with similar information in this thread. I would appreciate if you can take a look at that comment,pihole,1650064891.0
2965,comment,1,i4ze1nm,,"So, it appears that the changes to that file get overwritten when the device restarts or when the services are restarted. Anything I can do to make those permenant?",pihole,1650131409.0
2966,comment,1,i50v70b,,"Thanks. Yes, adding Step 6 (above) definitely seems to have helped with this. Now I am seeing both DNS servers being handed to the clients (at least the ones I can check on)",pihole,1650155443.0
2967,comment,1,i4vbehz,,"`Is your firewall allowing DNS traffic out from both devices?` 

If you wouldn't mind sharing with me how I can check this, I would appreciate it",pihole,1650051049.0
2968,comment,-1,i4vjh3l,,Set your router back as dhcp and check if that works if one of your pi's go down.,pihole,1650054534.0
2969,comment,2,i52lzu9,,"Having actually looked at my server, I've got that entry in a file called

/etc/dnsmasq.d/99-multipledns.conf

That won't get overwritted in an upgrade.",pihole,1650196731.0
2970,comment,1,i50vvpx,,"I’m glad you were successful.  I have redundant Raspberry Pi’s that run piHole with UNBOUND, but I only use them for DNS.  DHCP is handled by my Dream Machine Pro, as I have multiple VLANs, and firewall rules for security.",pihole,1650155763.0
2971,comment,1,i4yvn0p,,"Have you configured firewall rules on either of your servers, or on a device acting as your network firewall?  If not, this probably isn’t an issue.  

On your Linux boxes, you can configure firewalls on them specifically.  Or you can have another device, such as a Dream Machine Pro, providing your firewall solution.",pihole,1650123649.0
2972,comment,0,i4w6dbd,,"Thanks. I think that will work as in that case, you are pretty much losing one of the DNS servers specified in the router, and it will fall back on the second DNS which is the other Pi-hole. 

So, what I will be testing by doing this is if my [192.168.56.3](https://192.168.56.3) is set up appropriately to resolve? I think it is as I see requests going through it when both Pi-hole instances are running.",pihole,1650065061.0
2973,comment,1,i55tme9,,Thanks!,pihole,1650249109.0
2974,comment,1,i4yzvyf,,">Have you configured firewall rules on either of your servers, or on a device acting as your network firewall?  If not, this probably isn’t an issue

No. So, I don't think that's an issue. Thank you for confirming.",pihole,1650125399.0
2975,comment,2,i4xag01,,"It seems there is some confusion on the fundamentals here. 


The issue isn't related to which device is running the DHCP server, but what the configuration that the DHCP server is pushing out when it's requested (lease renewal). DHCP (dynamic host configuration protocol) just simplifies network configuration by giving you a central point to configure each device (host) on your network. 


Your router's DNS settings are internal, not routing network traffic unless it is acting as a DNS relay aka, ""the DNS server"". To ""simplify"" configuration it may use its internal (host) settings when set as the DHCP server, but the (host) configuration of the router and the (host) configuration it dynamically distributes are not necessarily the same.",pihole,1650085869.0
2976,comment,2,i50vm0g,,I think your comment was perfect gold! I needed help in sorting that out. But seems like everything is working now.,pihole,1650155637.0
2977,post,0,u4cc17,Can you open terminal from pihole admin page?,"Hi,

I am trying to make some changes to my pihole, mainly updating it and trying to fix some issues where pages need to be manually reloaded on my wife's Iphone. For some reason she constantly has issues opening emails from her phone and manually has to reload pages. I can't for the life of me figure out how to get into the console. I have tried to ssh via putty into the pi but it says my password is wrong. I have no clue how to change that. I did a lot of googling and nothing states that the terminal can be ran from the admin page.


Can someone direct me as to how I can open a terminal to run commands on my pi? If the only way is to ssh into it, how can I reset my password?

Thanks!",pihole,1650041426.0
2978,comment,4,i4v4nwq,,"A lot of new users forgot the username when ssh. The proper way is:

    ssh pi@pi.hole

Or

    ssh pi@192.168.1.107

The first one is only suitable when you are using pihole as DNS and it would reply its IP, given only 1 pihole is present.

The second one is directly addressing it by its IP. In this case the IP of the pi is 192.168.1.107

Both assumes the user is the default pi

If you just do this:

    ssh 192.168.1.107

There are two possible cases:

1. You would try to login as root, but thats not allowed by default settings.
2. you would try to login as the user your system is using. For example, I am using termux on my phone to ssh. Its user is `u0_a568`, generated by my android phone. That obviously dont exist on the pi. So the login would fail, even tho it seems that it take about 2 seconds to ""compute"" that is just a anti-spam measure to intentionally delay you for 2 seconds.

For your reference, this happens after I typed the last command:

    u0_a568@192.168.1.107: Permission denied (publickey).

As you can see it tried to login using u0_a568 but failed because I forced pubkey auth, so no PW request at all. If I allowed PW login then it would ask for a PW, but it wont be correct as theres no such user.",pihole,1650048209.0
2979,comment,1,i4uodpa,,"When you ssh to the pi, are you using the pi login? Don't use the pi-hole login",pihole,1650041614.0
2980,comment,1,i4uzebs,,It's not difficult to reset a password using single-user mode on boot. Raspian and most Rpi distros are based on Debian. Just google how to reset password on debian.,pihole,1650046038.0
2981,comment,1,i4wnoaj,,"Are you sure it’s an issue with Pihole? 

I read that Apple doesn’t download all of the email attachments by default. I think this is a new feature to prevent the old trick of adding html tracking images.",pihole,1650073455.0
2982,comment,1,i4yc2po,,"Your ssh creds are different from your pihole creds  


SSH requires a username, if you dont specify it will guess based on your name you have set yourself on the computer.  


If you are running Raspberry pi OS, the default user is 

    pi

and the default password is 

    raspberry

so try logging in as this

    ssh pi@pi.hole

then try the default password  


NOTE!!! Pihole's password has nothing to do with SSH. its like trying to logon to your computer using your email password, assuming they are not the same, you can't login to your computer with you email password.",pihole,1650114589.0
2983,comment,1,i4upol1,,I just use the Pihole ip address then it brings up the command line asking for password,pihole,1650042134.0
2984,comment,1,i4yckch,,I think so. I changed the dns from automatic to the google/cloudfare one and that fixed it for her. I guess it's better to switch her phone off it than to remove the pi.hole all together,pihole,1650114859.0
2985,comment,2,i4utvi9,,"If you haven’t specified a user name, then it’s using the user name of the machine your initiating ssh session from.",pihole,1650043814.0
2986,comment,1,i4uuhdv,,"Yes, that's the host of pihole (your rPi). You need to use the login credentials you set when you configured your pi. If you don't remember those, you'll need to reinstall raspian",pihole,1650044055.0
2987,comment,1,i4uyqpk,,"Also Webmin, but if your credidentials aren't working while SSH-ing, they wont there either.",pihole,1650045771.0
2988,comment,0,i4uyl7v,,I have no problems with SSH-ing.,pihole,1650045709.0
2989,post,39,u45nz5,pihole and pivpn (DHCP question),will this combo only work when DHCP is enabled via the pihole? or can that be dealt with by my router?,pihole,1650021065.0
2990,comment,5,i4u1jt2,,"MY ISP ARE DEFINATELY THE ISSUE. EITHER THAT OR THE GIGACUBE

thanks for all the replies. will keep this in mind for when i get a fixed line BB",pihole,1650032175.0
2991,comment,6,i4to9py,,"These two things are 100% independent from one another. They don't rely on each other at all.

DHCP is just pihole assining IPs to local network devices.

PiVPN doesn't even run on the same subnet. (10.0.0.X vs 192.169.1.X)",pihole,1650025614.0
2992,comment,3,i4tj2ki,,"Yes, it is working in my setup, but I am using Docker to do this.

Pihole with DOH/DOT and DHCP (with DHCP helper running on host network mode) running on my Docker. I am running PiVPN directly running on host. Everything is working as expected.",pihole,1650022435.0
2993,comment,1,i4ttjfj,,"If you use something like for example DietPi on your Pi, installing PiVPN and PiHole will prompt you during the PiVPN install if you would like to use your PiHole DNS on the VPN, the whole installation is automated with some prompts. 

Great for beginners and ease of mind!",pihole,1650028388.0
2994,comment,1,i4ugezh,,"works on my pi zero. 

no issues what so ever.",pihole,1650038410.0
2995,comment,2,i4tornw,,"ok thank you, that gives me clarity.  
I still cant get this to work after countless tries :(",pihole,1650025894.0
2996,comment,1,i4txpjz,,"im using buster cli and get the promt when i install pivpn :)

I need to figure out why the port is being blocked even though I've set up the forwarding rules. could be my isp maybe",pihole,1650030432.0
2997,comment,3,i4tpexf,,What can't you get working? You haven't exactly explained your issue. What is your network layout? Is the pihole not handing out IP addresses to your network devices? Did you disable DHCP on your router? Did you enable DHCP on pihole? Did you reboot any devices after changing DHCP settings?,pihole,1650026247.0
2998,comment,1,i4u37ur,,"You say it connects but doesn't work? If it connects for real then your port is open. Are you seeing ""Sending keepalive"" and then ""Receiving keepalive"" in the Log on the client side? (I've seen my iPhone say it's connected but the Log shows timeouts and not receiving keepalives.)

You can double check if it's your ISP/Router with nmap. Just apt install nmap on your Pi and then:

sudo nmap -sU -p51820 \[IP address of Pi\] # to confirm it's there on LAN

sudo nmap -sU -p51820 \[external IP address\] # see if it's listening on the outside

Both should show STATE Open. 

What are your VPN clients OSs? Suggest a next step if the VPN is working is get a 'ping' app and see if you can get to your internal network. Ping the Pi in other words. This step is a connectivity test without DNS. Then the final step will be to get DNS/PiHole working.",pihole,1650032897.0
2999,comment,1,i4udtml,,Can always change the port or change only the external via your router/whatever your setup is,pihole,1650037346.0
3000,comment,2,i4tr3tx,,"Sorry , I've been through this so many times now and still cant work out why the vpn connection does work.  


PiHole with unbound works just fine on the primary and secondary PiHoles.  
PiVPN is where it goes wrong and does not work.

I set up pivpn after pihole is up and running. it detects the install and completes.

I've forwarded port 51820 UDP to port 51820 on the pivpn ip

I generate wiregaurd user, scan QR code and then connect via mobile connection.... connection is dead and pivpn -c cant see any connections made.

setup as below  


&#x200B;

|5G router (in brigde mode -->|Edge Router X-->|Managed Switch|PiHole A|
|:-|:-|:-|:-|
||||**PiHole B**|
||||**Android TV**|
||||**Mini PC**|
||||**Mac Mini**|
|||Managed Switch|Mini PC|
||||Work Laptop|
||||Docking station|
||||Pi400|
|||**AX3000**|**General WiFi**|
|||DWR-953|Bridge to TV stand|
|||||",pihole,1650027146.0
3001,comment,1,i4tsxpz,,"Connection is dead meaning the wireguard app on your phone doesn't connect and gives you an error or it connects but no internet works?

DHCP on pihole and DHCP on pivpn aren't the same DHCP server. I don't run DHCP on my pihole, I run it on my router, but the same pihole is where I installed pivpn and pivpn hands out IP addresses to my mobile/remote devices.

pivpn -c shows when the user last connected (I believe) I didn't think it showed live/active users, but if you aren't seeing a timestamp in that output then obviously, as you stated, there isn't a connection happening.

I had to run 'pivpn -d' after my pivpn install to get it working, it asked me a question after the debug ran and I clicked y for yes, but on my three pivpn installs, I only had to do that on one of them. To be clear, I run the 'pivpn -d' command on every install, but only on one of the installs did it prompt me with a question where I typed y for yes.

The other thing to check is the DNS setting on the pihole running pivpn, I've noticed that on piholes running pivpn the option switches back to ""Allow only local requests"" you can find this under Settings, DNS tab, Interface settings section, confirm it is set to ""Allow only local requests""

However, I still don't 100% know what type of issue/error you are having. Is the VPN not connecting or is DHCP not working on pivpn? You stated two problems from what I can tell, DHCP and no users are able to connect.

Are you sure the port is forwarded properly? If you go here, https://canyouseeme.org/, and type the pivpn wireguard port, does it confirm the port is open?

Edit- I did not know that the port won't appear as open from a quick scan. /u/greybyte has informed me of that.

> Very interesting, I did not know this /u/greybyte thank you for pointing that out. /u/Soogs I was wrong regarding the port, I never knew this about wireguard. My apologies for sending you down this path.",pihole,1650028086.0
3002,comment,0,i4twpao,,Use openvpn. I can never get wireguard to work and you might too.,pihole,1650029952.0
3003,comment,1,i4tucr9,,"thanks for taking the time with this/me

on my phone, pivpn ""connects"" and doesnt give any error.

after the ""connection"" has been made my data connection stops working.

yeah you're right about the -c command being a timestamp. the out put i get when i -c is that the user has never connected ( not yet ).

Respond only on interface eth0""  


Allow only local requests""

I have tried all the settings within pihole but admittedly i did not reboot after saving each option.

I have previously run the -d and cant remember if it promted me.

will do a fresh install and try it now as I have already removed it.",pihole,1650028798.0
3004,comment,1,i4tv73q,,"Also ive run the test and the port it not open which is probable my issue.  
need to reboot the router to be sure but will have to wait till the mrs is done workng",pihole,1650029221.0
3005,comment,2,i4tvd68,,">Respond only on interface eth0""

Well piVPN is not eth0 it's probably TUN0 or whatever. 

If Pihole isn't listening to tun0 your phone won't get DNS and no DNS means no internet.",pihole,1650029303.0
3006,comment,1,i4twihr,,"I just recently installed pivpn, I've done all my installs within the last 30-45 days or so. All installs have been on a physical rpi running pihole or a virtual machine running pihole. All my installs prompted me to reboot after installing pivpn and I had the same issue that it seems you are having and running 'pivpn -d' and clicking yes (on the single install that did have a prompt) did the trick for me.",pihole,1650029860.0
3007,comment,1,i4tx5il,,"Step 1, that port needs to show up as open. Everything else can be correct with pivpn but if the port is not open, the outside traffic will never hit the pihole/pivpn box, which obviously means you won't have a connection.",pihole,1650030166.0
3008,comment,1,i4tvs8s,,"Permit all origins"" and give it another try soon as i can reboot the router.

Bind only to interface eth0"" will do.

Thanks again for the help",pihole,1650029508.0
3009,comment,3,i4w6670,,Wireguard ports won't show as open. Wireguard will only respond If it can properly decrypt and authenticate the incoming connection.,pihole,1650064966.0
3010,comment,2,i4yt0tv,,"Very interesting, I did not know this /u/greybyte thank you for pointing that out. /u/Soogs I was wrong regarding the port, I never knew this about wireguard. My apologies for sending you down this path.",pihole,1650122570.0
3011,post,5,u44ciy,Does anyone know what those queries are?,"My Pihole is calling ubuntu.fritz.box while ""ubuntu"" is the name of my RPi and ""fritz.box"" is the ""domain"" of my router. But I also get normal queries from other devices. I don't know why it is calling it self so often. Did I misconfigured my Server/PiHole/Router?

On my router I set my RPi as DNS server.

I have Unbound, PiVPN and docker with Ngnix PM and Portainer installed.

https://preview.redd.it/szzyelz5xnt81.png?width=1240&format=png&auto=webp&s=510b6eddc73cf5ee8188418d35ca4d987e9c0f27",pihole,1650015494.0
3012,comment,3,i4tawrk,,"Client `pi.hole` is pihole itself and not another application on the host itself.

My guess is that pihole tries to look up its ip addresses by the hostname (A and AAAA requests).

Did you configure conditional forwarding and how are you using pihole in the fritzbox settings. https://docs.pi-hole.net/routers/fritzbox/

Maybe you accidentally setup a dns loop but there is not the fritzbox ip in the visible part of the log.",pihole,1650016285.0
3013,comment,1,i4tbqax,,"I've setup the DNS in fritzbox setting like this: [https://docs.pi-hole.net/images/fritzbox-dhcp.png](https://docs.pi-hole.net/images/fritzbox-dhcp.png)

Do I need to do this as well? [https://docs.pi-hole.net/images/fritzbox-wan-dns.png](https://docs.pi-hole.net/images/fritzbox-wan-dns.png)",pihole,1650016970.0
3014,comment,1,i4tfl9d,,"I've made some changes, but it's still the same",pihole,1650020004.0
3015,comment,1,i4tiuc4,,"The first should be sufficient unless you have IPv6 enabled in your home network.

The second settings can create dns loops if you enable conditional forwarding https://docs.pi-hole.net/routers/fritzbox/#hostnames-instead-of-ip-addresses-in-pi-holes-web-interface-conditional-forwarding

Conditional forwarding allows the Pihole to reesolve hostnames like `ubuntu.fritz.box`. That does not work in your setup because the answer is NXDOMAIN.",pihole,1650022282.0
3016,comment,1,i4tjpft,,"I tried both, but when i enable conditional forwarding it switches from NXDOMAIN to IP or NODATA",pihole,1650022853.0
3017,comment,1,i4udw3w,,Strange behavior that you get NODATA. Seems like some packets are lost.,pihole,1650037373.0
3018,post,4,u42xyp,Reverse lookups for private IP ranges are being forwarded,"Never forward reverse lookups for private IP ranges is enabled

PiHole is my DHCP server

I do not have conditional forwarding enabled

Looking in my logs I see a lot of this (800+);

    db._dns-sd._udp.0.1.1.10.in-addr.arpa  OK, answered by resolver1.opendns.com#53 NXDOMAIN
    b._dns-sd._udp.0.1.1.10.in-addr.arpa OK, answered by one.one.one.one#53 NXDOMAIN

Few questions;

Why could this be happening? (If my understanding is correct, with my settings this shouldn't happen)

Is [10.1.1.0](https://10.1.1.0) valid? (my DHCP range is [10.1.1.10](https://10.1.1.10) to [10.1.1.100](https://10.1.1.100))

If I ping 10.1.1.0 , [10.1.1.2](https://10.1.1.2) responds which is an AirPort Extreme, is this indicative of another issue?",pihole,1650009184.0
3019,comment,1,i4uea2g,,"These are DNS Discovery Service requests, not typical reverse IP lookups.

[http://www.dns-sd.org](http://www.dns-sd.org)

https://en.wikipedia.org/wiki/Zero-configuration\_networking#DNS-SD",pihole,1650037531.0
3020,post,20,u3ui0u,Unbound with PiHole Installation updates,"Im posting this in hopes that it helps someone else with their installation of Pihole & Unbound on Ubuntu 20.04.4

I spent probably 3 hours trying to get Unbound installed but it kept failing on a fresh install no matter what I tried including manually installing the root.hints and ensuring the config file was uncommented  


The errors I got were like this...  


    socalryan@pihole3:~$ apt list --upgradable
    Listing... Done
    socalryan@pihole3:~$ sudo apt upgrade
    Reading package lists... Done
    Building dependency tree
    Reading state information... Done
    Calculating upgrade... Done
    0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
    socalryan@pihole3:~$ sudo apt install unbound
    Reading package lists... Done
    Building dependency tree
    Reading state information... Done
    The following additional packages will be installed:
      libfstrm0 libprotobuf-c1 libunbound8 unbound-anchor
    The following NEW packages will be installed:
      libfstrm0 libprotobuf-c1 libunbound8 unbound unbound-anchor
    0 upgraded, 5 newly installed, 0 to remove and 0 not upgraded.
    Need to get 1,104 kB of archives.
    After this operation, 5,433 kB of additional disk space will be used.
    Do you want to continue? [Y/n] Y
    Get:1 http://us.archive.ubuntu.com/ubuntu focal/universe amd64 libfstrm0 amd64 0.6.0-1 [19.8 kB]
    Get:2 http://us.archive.ubuntu.com/ubuntu focal/universe amd64 libprotobuf-c1 amd64 1.3.3-1 [18.9 kB]
    Get:3 http://us.archive.ubuntu.com/ubuntu focal-updates/main amd64 libunbound8 amd64 1.9.4-2ubuntu1.2 [350 kB]
    Get:4 http://us.archive.ubuntu.com/ubuntu focal-updates/universe amd64 unbound-anchor amd64 1.9.4-2ubuntu1.2 [28.3 kB]
    Get:5 http://us.archive.ubuntu.com/ubuntu focal-updates/universe amd64 unbound amd64 1.9.4-2ubuntu1.2 [687 kB]
    Fetched 1,104 kB in 1s (1,378 kB/s)
    Selecting previously unselected package libfstrm0:amd64.
    (Reading database ... 72382 files and directories currently installed.)
    Preparing to unpack .../libfstrm0_0.6.0-1_amd64.deb ...
    Unpacking libfstrm0:amd64 (0.6.0-1) ...
    Selecting previously unselected package libprotobuf-c1:amd64.
    Preparing to unpack .../libprotobuf-c1_1.3.3-1_amd64.deb ...
    Unpacking libprotobuf-c1:amd64 (1.3.3-1) ...
    Selecting previously unselected package libunbound8:amd64.
    Preparing to unpack .../libunbound8_1.9.4-2ubuntu1.2_amd64.deb ...
    Unpacking libunbound8:amd64 (1.9.4-2ubuntu1.2) ...
    Selecting previously unselected package unbound-anchor.
    Preparing to unpack .../unbound-anchor_1.9.4-2ubuntu1.2_amd64.deb ...
    Unpacking unbound-anchor (1.9.4-2ubuntu1.2) ...
    Selecting previously unselected package unbound.
    Preparing to unpack .../unbound_1.9.4-2ubuntu1.2_amd64.deb ...
    Unpacking unbound (1.9.4-2ubuntu1.2) ...
    Setting up libfstrm0:amd64 (0.6.0-1) ...
    Setting up libprotobuf-c1:amd64 (1.3.3-1) ...
    Setting up libunbound8:amd64 (1.9.4-2ubuntu1.2) ...
    Setting up unbound-anchor (1.9.4-2ubuntu1.2) ...
    Setting up unbound (1.9.4-2ubuntu1.2) ...
    Job for unbound.service failed because the control process exited with error code.
    See ""systemctl status unbound.service"" and ""journalctl -xe"" for details.
    Job for unbound.service failed because the control process exited with error code.
    See ""systemctl status unbound.service"" and ""journalctl -xe"" for details.
    invoke-rc.d: initscript unbound, action ""restart"" failed.
    ● unbound.service - Unbound DNS server
         Loaded: loaded (/lib/systemd/system/unbound.service; enabled; vendor preset: enabled)
         Active: activating (auto-restart) (Result: exit-code) since Thu 2022-04-14 22:49:58 UTC; 20ms ago
           Docs: man:unbound(8)
        Process: 1837 ExecStartPre=/usr/lib/unbound/package-helper chroot_setup (code=exited, status=1/FAILURE)
        Process: 1855 ExecStartPre=/usr/lib/unbound/package-helper root_trust_anchor_update (code=exited, status=1/FAILURE)
        Process: 1858 ExecStart=/usr/sbin/unbound -d $DAEMON_OPTS (code=exited, status=1/FAILURE)
       Main PID: 1858 (code=exited, status=1/FAILURE)
    
    Apr 14 22:49:58 pihole3 systemd[1]: unbound.service: Main process exited, code=exited, status=1/FAILURE
    Apr 14 22:49:58 pihole3 systemd[1]: unbound.service: Failed with result 'exit-code'.
    Apr 14 22:49:58 pihole3 systemd[1]: Failed to start Unbound DNS server.
    Processing triggers for systemd (245.4-4ubuntu3.16) ...
    Processing triggers for man-db (2.9.1-1) ...
    Processing triggers for libc-bin (2.31-0ubuntu9.7) ...

And after trying over and over again to install, remove, install, remove I just couldnt seem to get it started.  I read on another post to run sudo journalctl -u unbound.service -b and look at the end of the log and finally it hit me, the official instructions say to put the configuration file in /etc/unbound/unbound.conf.d/pi-hole.conf however the correct location for the configuration file is actually /etc/unbound/unbound.conf.  Once I moved the config file to that location and restarted the service, everything started working perfectly!  


Such a simple little change but for a newbie such as myself whom spend 2+ hours trying to figure this out, wanted to share in hopes it helps someone else.",pihole,1649979335.0
3021,comment,8,i4sdmvq,,">the official instructions say to put the configuration file in /etc/unbound/unbound.conf.d/pi-hole.conf however the correct location for the configuration file is actually /etc/unbound/unbound.conf.

The correct location for the custom configuration file is as we specified.  The problem in your case is that your distro did not create the usual unbound config file, which is basically a file that includes every file in the configuration directory.  As an example, in file ***/etc/unbound/unbound.conf*** in Raspbian the following line appears:

    include-toplevel: ""/etc/unbound/unbound.conf.d/*.conf""

In Armbian, the same file has the following:

   include: ""/etc/unbound/unbound.conf.d/*.conf""",pihole,1649992278.0
3022,comment,2,i4sih03,,That's weird. I installed pihole + unbound on ubuntu server 20.04 just a few weeks ago and the official guide worked just fine for me.,pihole,1649994840.0
3023,comment,1,i4rq52v,,"unbound.conf is the main config file for unound, but in unbound.conf.d you can place additional configs, like pihole. I have my config in there and it works.   


What did the journal showed you why it failed to start?",pihole,1649981080.0
3024,comment,1,i6qx4bb,,I have been having this same issue. I still cannot get it to work. does user privileges matter like changing to “sudo su”? I have tried all sorts of things. The only way I could currently get it to work was to use a docker on unRaid made by kutzilla. Ive watched the video on youtube from craft computing too and he was able to fill in some of the gaps. Last I have done was to copy the unbound.conf from that container to /etc/unbound/ but still nothing. it just keeps with the “did not start exit error code”,pihole,1651287082.0
3025,comment,1,i4rqc62,,It basically could not even find the config file.   Thats when the light bulb clicked in my head and I moved the file to that location and everything started working but the instructions tell you to place the file in another location which maybe is outdated?,pihole,1649981172.0
3026,comment,1,i4rsto2,,"No it's not outdated, it's like I said earlier: The main unbound.conf is in /etc/unbound (or depending on the distro at /usr/local/etc/unbound or just in /etc) and additional config files can be placed in /etc/unbound/unbound.conf.d. like it's mentioned here:[https://docs.pi-hole.net/guides/dns/unbound/#setting-up-pi-hole-as-a-recursive-dns-server-solution](https://docs.pi-hole.net/guides/dns/unbound/#setting-up-pi-hole-as-a-recursive-dns-server-solution) And I can confirm, it's working like that (I'm not on ubuntu, but on Debian).

So your main config file was missing, but this should be created by the installation process by itself, what is very odd. The question is now, why did it fail to place the config file there in the setup.

So my unbound.conf has just this content:  
`# Unbound configuration file for Debian.`  
`#`  
`# See the unbound.conf(5) man page.`  
`#`  
`# See /usr/share/doc/unbound/examples/unbound.conf for a commented`  
`# reference config file.`  
`#`  
`# The following line includes additional configuration files from the`  
`# /etc/unbound/unbound.conf.d directory.`  
`include-toplevel: ""/etc/unbound/unbound.conf.d/*.conf""`",pihole,1649982335.0
3027,post,6,u3t5si,PI Heavy Load Help,"I put my PI-Hole on a PI Zero W - first gen - and on occasion it will go read like below, and it produces an alert, saying the pi has endured a load exceeding 1.0 for +/- 15 minutes.

Is there something I can do with it? I've put a goodly amount of adlists and a few personal whitelist entries on it, so that I can have the smoothest experience on with with the minimum ads and tracking, plus protections against malicious sites and so on. At last count the pi has almost 5 million domains on it.

https://preview.redd.it/lr3myc1nlkt81.png?width=321&format=png&auto=webp&s=dfe0feb24717eeefb734792c32c8bdc20d2fbd7e",pihole,1649975355.0
3028,comment,8,i4rqs3p,,"If you have other services running on your Pi you can check with `htop` which task is responsible for the load.   
But 5 millions domains, wtf. I run with the standard list and barely see ads.",pihole,1649981382.0
3029,comment,3,i4rlzsn,,"I kinda went crazy at first with all of my blocklists too and it really caused more trouble than good.

Right now i have blocklists than run up to about 950k blocked sites and i think where I'm at right now is a sweet spot.

Naturally i can add more later if it comes to that, but in my setup i get zero adds from the sites and stuff i use so I'm happy with how it performs.

Id start by maybe culling your lists a bit, and that might help. Also, do a log and see what its doing when your load spike n terms of what devices is using and causing that load spike and what sites are as well.

Troubleshooting sucks but that's just part of the game. Look at what its doing during the spike, and remember its just a pi zero so it doesn't have the power that say a pi 3 or pi 4 ( i run dual redundant pi 4 4gb models for my piholes - overkill i know but i initially had one and figured id do some other stuff with it like VPN and so on but never did. I bought another awhile back to use for a camera for my prusa 3d printer for octoprint so it could actively monitor the print and do some other things for me, but I've since took it offline and it was sitting around and last week i said screw it and made another pihole when i upgraded my home internet and home network mesh system. Not that i needed it but i was just looking for something to tinker with.

Ill remove it i bet,,, or ill just add octoprint to it again once my Prusa XL gets here ( if ever... shipping dates are supposedly this spring/summer but who knows ) and I'm sure ill want to pimp that bad boy out especially since it runs around 3k ( without an addons on top of the addons ve already purchased at reserve time as they've stated the will announce some additional goodies right before launch/ship so I'm assuming like another 500-1k worth of stuff like a fold up/fold down enclosure, led lighting, etc )

So yeah its a pi zero so don't bag on it too much. I used a pi zero and it faired well but it doesn't compete at all with a pi3 or a pi4 4gb model which just blazes along. 

Right now my pis are like this:
Pihole 1
ACTIVE
 LOAD:  0  0.01  0
 MEMORY USAGE:  5.2 %
 TEMP: 31.6 °C

Pihole 2
 ACTIVE
 LOAD:  0  0  0
 MEMORY USAGE:  3.4 %
 TEMP: 35.0 °C

The one that's a bit hotter doesn't have an active cooling fan like the pihole 1 ( a small ass fan you'd think wouldn't do much but it does, and they both have heatsink mods as well ).

Best of luck.",pihole,1649979184.0
3030,comment,1,i4uf9kx,,My first thought is you need a bigger pi. My second thought is you need to thin out your ad list and only use the ones you actually need.,pihole,1650037933.0
3031,comment,1,i4unwh4,,"I use PiHole with UNBOUND on a Pi4.  It may be overkill, but it is what I had on hand.  It is only me on the network, but several devices.  I don’t have an issue, and I have over 2,000,000 domains on the blocklist.  

Questions:  Is trimming the blocklist actually going to reduce the load?  Sure, the larger list may slow down the initial request for a couple of seconds.  After that the results are cached, correct?  Therefore, future requests are going to be almost instantaneous.  Most people go to the same sites, or use the same apps repeatedly.  Therefore, unless you are providing DNS services for a large number of people/devices, does trimming the list actually reduce the load, or even increase average response times?  I’ve only had my DNS server online for about 6 months, but this is my understanding of how it is working.  Am I not understanding the processes?

Please don’t respond with rude or mean answers.  This is new to me, and I’m trying to learn and understand the processes correctly.",pihole,1650041422.0
3032,comment,1,i4vgleg,,"It might be unrelated but I've found that running Pi-hole on my Pi1 requires a  SD-card with speedy writes, with slower cards the load goes up.",pihole,1650053295.0
3033,comment,1,i4sycga,,"I have an assortment of 11 lists and some regex, only 246200 domains.",pihole,1650005685.0
3034,comment,1,i4wbj9t,,"I'm running the lists curated on Firebog, which has lists that also focus on telemetry and malicious sites as well as ads.",pihole,1650067536.0
3035,post,1,u3q9bu,Can't find domains to block when using MLB app on Android phone only,"MLB app on Android 12 phone crashes constantly whenever a video tries to play. If I disable PiHole it plays fine. I've ssh'd into it and watched the real-time log while loading the game, I see the domains that are being blocked, but I've tried whitelisting every one and I just cannot get it to work. 

Anyone out there know how to resolve this?",pihole,1649967189.0
3036,comment,1,i4r9miz,,Search this forum - there was a similar post within the past two weeks.,pihole,1649973752.0
3037,comment,2,i4rcpha,,"Ugh! Thanks. Believe it or not I did search both here and google before posting, but my search term was ""mlb app"" rather than just ""mlb"", which led me to [my answer](https://www.reddit.com/r/pihole/comments/tyielr/mlbtv_whitelist_addition/i3zqxfx/).",pihole,1649975087.0
3038,post,0,u3p0cn,Pihole update problem (ftl 5.0 tto 5.14),"I haven't touched my pihole in a \*little\* while and decided to update now.

the issue is that it doesn't seem to work since the filename doesn't specify the arm version (which should be arm7)

❯ pihole -vPi-hole version is v5.0 (Latest: v5.9.1)AdminLTE version is v5.11 (Latest: v5.11)FTL version is v5.0 (Latest: v5.14)

\[✓\] Detected ARM-hf architecture (armv7+)\[i\] Checking for existing FTL binary...\[i\] Downloading and Installing FTL...curl: (22) The requested URL returned error: 404\`\`\`\`\[✗\] Downloading and Installing FTLError: URL [https://github.com/pi-hole/ftl/releases/latest/download/pihole-FTL-arm-linux-gnueabihf](https://github.com/pi-hole/ftl/releases/latest/download/pihole-FTL-arm-linux-gnueabihf) not found\[✗\] FTL Engine not installedUnable to complete update, please contact Pi-hole Support

&#x200B;

If I take a look at the latest release there is a file named :  [**pihole-FTL-armv7-linux-gnueabihf**](https://github.com/pi-hole/FTL/releases/download/v5.14/pihole-FTL-armv7-linux-gnueabihf) which should be the one required for the update

&#x200B;

is there any way to update version by version to fix this issue, or update by specifying a downloaded file?",pihole,1649963710.0
3039,comment,1,i4selem,,Did you update your OS first?,pihole,1649992773.0
3040,comment,1,i4t06li,,"I updated the packages but forgot to do apt dist-upgrade.
I'll try and see if it changes anything
Thanks

edit: I tried and it still didn't work due to the filename targeted by the update",pihole,1650007166.0
3041,comment,2,i4tvfix,,Might be easier to do a fresh install. You should be able to back up your Pi-Hole config on an USB or something.,pihole,1650029335.0
3042,comment,1,i4v8ma8,,"Yeah I'm going to try installing it on docker after backing up.
Discovered docker way after I installed pihole and I guess it would be a better solution when managing my services.
Thanks for your time.",pihole,1650049868.0
3043,post,0,u3ot53,Can't Direct Traffic to Cloud Pi-Hole,"I know, I know. We're not supposed to put Pi-Hole in the cloud. But this is what I have done:

I have a GCP instance running Debian 10 and installed nftables, am using [this script](https://github.com/ahmetozer/iptables-ddns) to whitelist ports 22 and 53 (TCP) and 53 (UDP) for my home network only (using ddns because my home network's public IP is not static), and installed Pi-Hole. For upstream DNS server, I added my home network's IP address (I know this will randomly change). On my router (Advanced Tomato), I have OpenDNS as my DNS server, and in dnsmasq, I have added the line: `dhcp-option=6,11.222.33.44` (11.222.33.44 being the static, public IP of my GCP instance). Also, I enabled (publicly) port 53 (both UDP and TCP) in the Google Console firewall itself so that the ports were open, but controlled by nftables to only allow my home network.  I am not getting any activity/queries.

Before I attempted this, I had set up Pi-Hole on my Odroid HC2 (OMV) using docker (Portainer), and used [method 2](https://discourse.pi-hole.net/t/how-do-i-configure-my-devices-to-use-pi-hole-as-their-dns-server/245) to set things up. Meaning, I added 192.138.1.38 (which is the Pi-Hole machine on my local network) in dnsmasq, like `dhcp-option=6,192.168.1.38`, and in upstream DNS I added my router's IP addres (192.168.1.1). Everything worked great and it was able to get all queries from all the devices on my network, differentiating between clients. I stopped the docker container with Pi-Hole for now while I experimented with the GCP instance.

Naturally, I would think that I need to set things up (method 2) the same way, but with public addresses instead. I'm sure my configuration is wrong, but I'm not sure what to do to correct it.

I want method 2 because I want to be able to see which devices do what on my network and it not just say ""localhost"".

Edit: Well that was easy. All I needed to do was reboot my router, and voila, now I see queries showing up. But the problem now is that my ""clients"" are  ""cbl-11-2-333-4.yhz.frontiernetworks.ca"" (11-2-333-4 is my home network's public IP) and ""localhost."" Is there any way for Pi-Hole in the cloud to see either the hostname or the internal IP address of the device/client?  
",pihole,1649963150.0
3044,comment,3,i4qswnr,,"I would have setup a VPN server on the cloud instance, and a VPN client on the local router. Then redirect the DNS lookups out the VPN tunnel.",pihole,1649966884.0
3045,comment,-1,i4qt2rn,,Won't that make my network significantly slower?,pihole,1649966953.0
3046,comment,1,i4qv0mf,,"Depends how you go about it. If you are only doing DNS lookup over the VPN then only your DNS lookups would be slow. Your local network traffic and internet traffic wouldn't route over the VPN. If you Route all traffic out your router over the VPN then yes your internet traffic would likely suffer.

Edit: Slow is subjective. It would be slower than having the DNS server local to you.",pihole,1649967726.0
3047,comment,1,i4qxayh,,"What if I create a VPN server on my router, and have my server running Pi-Hole as the client? Wouldn't that then make Pi-Hole think it is on the same local network? I didn't think of it until you mentioned VPN and then I started reading about it.",pihole,1649968619.0
3048,comment,1,i4qzxeq,,"Again, this depends on how you set it up. Generally you would have your VPN clients in a different network than your LAN clients (for example 192.168.1.0 for your LAN and 10.10.10.0 for your VPN clients). You also have to think about overhead and what effects that will have on your latency. If your router isn't very powerful and you use that as the VPN server you may have less throughput/more latency on the VPN as opposed to your cloud server being the VPN server. This also works the other way around if your cloud server doesn't have enough resources to be the VPN server.",pihole,1649969665.0
3049,post,2,u3mh15,Anyone here using a firewalla device on their home network along w a pihole? ...,"I've been interested in them, don't necessarily need one, but have been curious. 

I've seen positive reviews, and I've seen some people say they're bad news because they rely on ARP poisoning, which I only partly understand.

If you have one, what does it buy you? Any related thoughts? Thanks in advance!",pihole,1649956603.0
3050,comment,5,i4q71y0,,"I closed my DynDNS account as the FWG provides it in settings.

Native VPN support with WireGuard or OpenVPN.

I have the FWG use the Pi-Holes for DNS and also have Unbound deployed.

I have found only one down side. I would love to be able to assign a static DNS to certain devices when reserving IPs.

I love the iPhone App, I have two small business owners running the FWG for 6-8 user local offices. They love it too.

The feature pipeline, regularity of releases, beta testing approach, and community are all top notch.",pihole,1649958220.0
3051,comment,2,i4qjoza,,"I use sophos XG as a firewall and a pihole with unbound for DNS. Slightly annoying that pihole cannot 'see' the devices, so the FW is the only devices listet.",pihole,1649963232.0
3052,comment,2,i4qozeb,,"Opnsense, which is trash.",pihole,1649965324.0
3053,comment,2,i52jly3,,I'm running pfSense alongside mine. The two work together quite pleasantly.,pihole,1650195077.0
3054,comment,1,i4r2icy,,"- ISP Router in Bridge Mode
- PC Engines APU 1d4 with IPFire
  - DHCP Server with reserved IPs
  - OpenVPN Server
  - WLAN AP 802.11n
  - local NTP Server
- RPi 3b with PiHole and Unbound
  - custom local DNS entries",pihole,1649970707.0
3055,post,7,u3k4mp,Pihole and 64-bit raspberry pi OS,"TL;DR: People who are on 64-bit raspberry pi OS and running pihole, whats your experience?

So I am considering to do a fresh install of raspberry pi OS since my pi supports it and the performance seems to be better, at least in chromium. I have also messed aroind too much and wanted a chance to start fresh. So I am wondering:

1. Would it break pihole? 
2. Are there any little bugs here and there? 
3. Any setup problems? 
4. Any points you want to make for people wanting to transition to 64-bit?

To jfb: do you have a pi on 64-bit running pihole? Whats your experience?

P.S. only one working pi4 model b with 2GB of ram, OC to at most 1.8GHz, sufficient PSU, heatsink with optional fans and a 240GB ssd.",pihole,1649950199.0
3056,comment,5,i4pp3bh,,">Would it break pihole?

No.

>Are there any little bugs here and there?

None known by Pi-hole team.

>To jfb: do you have a pi on 64-bit running pihole? Whats your experience?

No.  All my devices run 32 bit OS.",pihole,1649951210.0
3057,comment,3,i4po7ro,,"Went from Buster 32-bit to Bullseye 64-bit on a similar setup (Pi 4B 2GB, with good cooling), and everything has been running just fine.  It looks like you might be planning on running the full desktop on your system, in addition to running Pi-hole though?  My setup is using Raspberry Pi OS Lite, and it runs headless.  I do have a DIFFERENT 4B which I am running 64-bit Bullseye w/ a GUI no problem though.  Both of the 64-bit builds were fresh installs.",pihole,1649950874.0
3058,comment,3,i4poihw,,"I'm running pi-hole in 64bit DietPi on a zero 2 w.  Pi-hole is using 2% of cpu, and about 50mb of memory.",pihole,1649950990.0
3059,comment,1,i4psg6g,,No issues running Pi-hole on Raspberry Pi OS 64-bit. The only thing that I noticed is when I went from buster to bullseye is that unbound didn't work properly with Pi-hole. I just followed the steps here and then it worked as expected: https://discourse.pi-hole.net/t/running-pi-hole-on-bullseye-with-unbound-resolvconf-file-appears-after-reboot/52814/2,pihole,1649952502.0
3060,comment,1,i4qi73t,,same as non 64 and been on 64 since day1,pihole,1649962638.0
3061,comment,1,i4rgy3d,,"Pihole runs fine on my 64 bit x86 pc.. lol.

64 bit is not new.

But with only 2gb of ram, doesn’t require a change. 

32 bit can’t properly address larger ram pi’s??",pihole,1649976938.0
3062,comment,1,i4rrl9n,,Been running Pi-hole on 64-bit Buster and now Bullseye for 2 years now and it’s great. PiOS Bullseye 64-bit is no longer in beta,pihole,1649981761.0
3063,comment,1,i4sxi5q,,Only issue I’ve run into is the status through the web panel shows unknown all the time. I use nginx though so it’s “unsupported” despite it working with the same nginx and php setting as on my Ubuntu server.,pihole,1650005031.0
3064,comment,1,i4tf5jm,,"I'm running the newest 64bit Version of Raspberry Pi OS Lite on my Pi 4 2GB Model since beginning of this year with Pi-hole, PiVPN and Webmin installed and have had not a single problem with it so far.
Can definitely recommend it!",pihole,1650019679.0
3065,comment,1,i4ti8w7,,"I am running PiOS 64 on Pi 4B 4GB. Using docker to setup PiHole with DOH/DOT and DHCP server by using a DHCP-Helper. I am having 22+ active clients which includes 2 laptop, 1 PC, 1 Tablet, 8 smartphones, 4 cameras, 3 android tvs and some other IOTs. Everything running smoothly without any issue and without any ads. (I have the working stack, let me know if you need it).

Also running NGINX reverse proxy and Portainer to manage the setup. Everything is working as expected, so, I would suggest to go for it. :)",pihole,1650021880.0
3066,comment,1,i4ttwog,,Everything‘s fine. 2xpihole + unbound. No problems.,pihole,1650028571.0
3067,comment,2,i4ppt0c,,Thanks. Just confirm again that the 64 bit OS is supported right? And are you planning on going to 64 bit on your pi?,pihole,1649951484.0
3068,comment,1,i4ppljv,,Thanks! In the current setup my pi has <1% load in idle. Whats the specs of the one with GUI?,pihole,1649951403.0
3069,comment,1,i4ppvpm,,Headless?,pihole,1649951513.0
3070,comment,1,i4rvgtt,,same here,pihole,1649983562.0
3071,comment,3,i4prqkp,,64 bit is supported.  I'm not going to 64 bit on my older Pi's.,pihole,1649952231.0
3072,comment,1,i4q1w8h,,GUI one is a 4B w/ 4GB.  The load indicator on htop shows 0.91 1.13 1.16 at the moment.,pihole,1649956214.0
3073,comment,1,i4vlmg4,,Yes.,pihole,1650055474.0
3074,comment,2,i4q4ech,,"Humm, is your pi idle? Mine is only 0.14 0.22 0.21",pihole,1649957187.0
3075,post,36,u3j6dv,Services that are getting past Pi-hole,"Just read this: [https://winstonprivacy.com/blogs/articles/how-advertisers-and-tracking-services-are-bypassing-pi-hole](https://winstonprivacy.com/blogs/articles/how-advertisers-and-tracking-services-are-bypassing-pi-hole)

Was curious to see what y'all think and what options we may have?",pihole,1649947549.0
3076,comment,21,i4phvee,,"Doesn't say anything new, to be honest. Some devices hard-code DNS servers rather than respecting the server provided by DHCP. Others use DoH.

The first problem can be dealt with by blocking port 53 outbound for devices you don't trust (or indeed for anything except pi-hole).

The second problem is harder. I've not found a good list of known DoH servers yet to use as the basis of a blocklist on the firewall. If anyone knows of one, I'm all ears.",pihole,1649948382.0
3077,comment,14,i4pllqw,,[This](https://dnscrypt.info/public-servers/) has been my go to list of DoH and DoT servers. It seems like it’s being maintained as well.,pihole,1649949851.0
3078,comment,2,i4szuir,,Point 1 can be solved with e.g. opnsense. Just use a rewrite rule which redirects all packets on port 53 to your own dns (pihole),pihole,1650006892.0
3079,comment,1,i6c3m9n,,Have you ever seen a firewall tool that watches for outbound traffic to addresses that weren't preceded by a DNS query & response? I'm sure someone has thought of that... or a much better mechanism.,pihole,1651017903.0
3080,comment,2,i4por4y,,Thank you kindly!,pihole,1649951081.0
3081,comment,1,i4ticdc,,"For DoT, blocking port 853 should be enough for most cases",pihole,1650021945.0
3082,comment,0,i4r7tbg,,"Nice to have, but I'm a skeptical of its utility.  If the app designer goes through the trouble of DOH or DOT to avoid Pihole, why wouldn't they use a private DNS server?  This might block some, but my guess is if we implemented this strategy widely, it would cease to be effective because it is easily bypassed.",pihole,1649972936.0
3083,comment,0,i4ro3lv,,How do I use this list in pihole?,pihole,1649980131.0
3084,comment,2,i4t8hbg,,Block port 853 while you're at it.,pihole,1650014199.0
3085,comment,3,i4pp1rg,,"That list is quite helpful if you’re trying to add the IPs in your firewall. Otherwise, adding regex rules for the bootstrap URLs is quite effective. I think there’s even some blocklists with bootstrap URLs floating around out there",pihole,1649951193.0
3086,comment,2,i4roeo8,,"I disagree. Running your own public facing DNS server and keeping it secure is not easy and can be a full time job itself. I highly doubt app devs would go through the trouble. There’s a reason why so many apps just fallback on Google, Cloudflare, or some of the other well known DNS providers.",pihole,1649980271.0
3087,comment,1,i4svboq,,"Hairpin NAT solves this problem pretty well, though",pihole,1650003345.0
3088,comment,1,i4roojn,,"You could either create regex rules that apply to many of the URLs like blocking all that start with “doh”, or you could add each URL individually to your blacklist. I think there’s some blocklists out there that already list these and perhaps other URLs.",pihole,1649980395.0
3089,comment,2,i4t9mzw,,"Ah ok. I'll keep that in mind for the first ""intelligent"" piece of hardware. So far I only have Linux and Windows machines here, and the do what they should do.",pihole,1650015207.0
3090,comment,1,i4tm4ke,,"Wouldn't you run into certificate problems, because the internal DNS server doesn't present the correct certificate for DOT or DOH?",pihole,1650024372.0
3091,comment,1,i4t8fmc,,    ^(doh|dns|rdns)[-.],pihole,1650014158.0
3092,comment,1,i4tj78g,,The issue with a manual blacklist is that it won't get auto-updated...,pihole,1650022521.0
3093,comment,0,i4sjakq,,"If you find it, please share!",pihole,1649995297.0
3094,comment,1,i4tiilv,,"How do you know that, if you don't create the rules? ;)",pihole,1650022062.0
3095,comment,2,i4u1h35,,"If the domain never resolves because you're blocking it you never get to the TLS handshake step. But even if it does resolve, if you've set your pihole up for DoT/DoH your upstream DNS server handles that for you",pihole,1650032141.0
3096,comment,2,i4tjgfy,,Have a look at [this](https://www.reddit.com/r/pihole/comments/u0myv8/has_anyone_actually_100_confirmed_that_a_device/i47a6gw/?utm_source=share&utm_medium=ios_app&utm_name=iossmf&context=3) comment from a different post,pihole,1650022692.0
3097,comment,1,i4tji6c,,Try [this](https://www.reddit.com/r/pihole/comments/u0myv8/has_anyone_actually_100_confirmed_that_a_device/i47a6gw/?utm_source=share&utm_medium=ios_app&utm_name=iossmf&context=3),pihole,1650022724.0
3098,comment,1,i4uk6ul,,"I know it because I monitored the ports and data flow. And i added the rewrite rule on my fw, just to be sure.",pihole,1650039935.0
3099,comment,1,i4uwyll,,"Wait, they are for Pihole's format? I thought both lists were for router.",pihole,1650045048.0
3100,post,60,u3hlrl,*solution* OneDrive signin being blocked,"Hello folks, I recently noticed that One Drive was being blocked by my pihole from logging into the service. The sync feature was working when I tested it to figure out what was blocking it but the sign in feature was not working. I had to add the domain storage.live.com to the whitelist for the signin portion to work. Just an FYI for others that might be having the same issue. If there is a more refined domain or other solution that doesn't involve whitelisting the storage.live.com domain, please let me know. Thanks!",pihole,1649943030.0
3101,comment,23,i4poqdw,,"There aren't many lists that include that domain.  You found the list that does include it:

https://blocklist-tools.developerdan.com/entries/search?q=storage.live.com",pihole,1649951073.0
3102,comment,6,i4pdi1r,,"Are you using the built in list or did you add a bunch of additional lists?

I used to do the latter but it gave me headaches so now I do the former and I’m happy as a clam.",pihole,1649946637.0
3103,comment,2,i4sgx6k,,"Will try this, thanks",pihole,1649994006.0
3104,comment,9,i4ppim9,,It’s fun to click on an issue like this with the intent to look up the list and then see you already linked to it. I think you and I are probably the only ones using this site 😆 but still cool to see it’s useful to someone besides myself,pihole,1649951372.0
3105,comment,3,i4qprvb,,The list says it was added in 2017 but it just stopped working a few days ago so I don't know if it's really that list. Let me pull my lists and see where it was and what lists I'm using.,pihole,1649965630.0
3106,comment,2,i4qr9bf,,"Here's the actual URL being blocked and it's found on a list that I do have but must not have impacted it since it has been blocking it since it was added to the OISD list.

bl3302.storage.live.com

I also have the 2 other lists. Apparently I'm using 38 lists :P not sure if that's good or not.",pihole,1649966217.0
3107,comment,1,i4qpnum,,I added several lists that were recommended on a post or blog somewhere. Can't remember but it just recently stopped working so figured it was a recent addition accidentally maybe?,pihole,1649965587.0
3108,comment,3,i4r6lwd,,">Here's the actual URL being blocked

Domain, not URL.  Minor but important distinction.

>bl3302.storage.live.com

Even the adlist you cite no longer has the domain you listed.

https://blocklist-tools.developerdan.com/entries/search?q=bl3302.storage.live.com",pihole,1649972430.0
3109,post,18,u3g7sy,what's the advantage of doing it on an actual raspberry pi?,I might eventually have one as a gift. What's the advantage of installing pihole on a literal pi vs on my much more powerful laptop?,pihole,1649938681.0
3110,comment,90,i4oz3zs,,"Because the pi uses next to no power, it's silent, it's tiny, and if you set it up correctly it will just sit there happily doing its job for years to come.",pihole,1649940141.0
3111,comment,14,i4oxppb,,"I run pi-hole on two Pi Zero 2 W’s, that have 512MB of ram and they run like a champ. Never had an issue. Plenty of horse power 😁",pihole,1649939425.0
3112,comment,64,i4ox3nt,,Why do you need a Ferrari to pull an ox cart?,pihole,1649939098.0
3113,comment,38,i4owy5x,,Miniscule power draw. Millions of resources due to standardized hardware and software.,pihole,1649939015.0
3114,comment,10,i4oyaon,,"I had mine in a container for a bit, but it was overkill and I’m constantly doing something to the server so I moved it to an RPi.",pihole,1649939725.0
3115,comment,5,i4p3o9h,,"1. Easy install
2. Better support with community having the same setup
3. Build out  with unbound and wireguard
4. Run in docker then it won't even matter. Add dhcphelper to use PiHole as DHCP in docker",pihole,1649942355.0
3116,comment,4,i4p5mr3,,Power consumption,pihole,1649943241.0
3117,comment,4,i4p65se,,Low/no impact on Electric bill.,pihole,1649943481.0
3118,comment,4,i4p6dc9,,"Low power, I run docker with pihole, unifi controller, and librenms, omada controller. The storage is offloaded to my nas but I don't have a ton of devices running any of them",pihole,1649943577.0
3119,comment,5,i4p788p,,"Because DNS being out for anything longer than 5 seconds gets me ""Daaaaaaad!!!! The internet's broken!!!!"". So two Pis running PiHole keeps it quiet in here, dammit.",pihole,1649943953.0
3120,comment,10,i4owypq,,24/7 AdBlock with ultra low power consumption.,pihole,1649939023.0
3121,comment,3,i4ozifc,,I put mine on a hyper v. then used my pi3 for retro pi,pihole,1649940341.0
3122,comment,3,i4p8c2n,,"I use a Pi so that my entire household of 30 devices can share the service and so it's always available, even when my laptop is on the road.",pihole,1649944432.0
3123,comment,3,i4pdo06,,Because a laptop probably has negligible effects on performance for PiHole which itself isn’t resource intensive. And you need a lot more power to keep a laptop running 24/7 than you do for a Pi.,pihole,1649946705.0
3124,comment,3,i4pj911,,"If you have a laptop you can dedicate for DNS, fine.  Any useable hardware you have is good.  I wouldn’t put pihole on a laptop that I’m using for other purposes.",pihole,1649948930.0
3125,comment,3,i4qjlt1,,"Right now, there isn't a benefit as you can't buy one off the shelf unless you're wiling to pay scalper prices 

Or in your case, getting one for free ;)   
^(Lucky)

Local benefits are low power, great performance, tiny footprint, but if you have a /r/homelab, PiHole runs in a VM very well. 

You could also get similar performance for free in Oracle's Always Free tier cloud, it's a bit of a pain to navigate, but you can have up to 6 VM's running",pihole,1649963197.0
3126,comment,3,i4r2mjn,,"My isp named Freebox offers in the internet box with an armv8 the possibility to install VMs in it. So an Arm64 Debian VM with docker and pihole in a container… As the box is always on, no need of anything else 😎
In another container a proxmox backup server which backups all the VMs from my Proxmox Server",pihole,1649970756.0
3127,comment,2,i4p3f01,,Extra little blinkies,pihole,1649942238.0
3128,comment,2,i4p5h77,,Pi-Hole is a thing you can run in a container on an actual server but can just be ran on a rPi with exact same performances.,pihole,1649943170.0
3129,comment,2,i4p7cnk,,very low power draw and community support. If you are fine without both you can always use other hardware like I do,pihole,1649944006.0
3130,comment,2,i4pcyxh,,"I set mine up in my esxi lab. Figured if that is going to be on all the time for other things, samba shares, torrent box; monero node,  figured I’d just use it because I’m not saving power anyway.",pihole,1649946418.0
3131,comment,2,i4pfhaz,,"WHen you reboot your laptop, the whole house loses DNS. :)",pihole,1649947435.0
3132,comment,2,i4pjacv,,Power draw. A cheaper more powerful mini PC can't beat RP at it. I run my Pi 24X7 without worrying about bills.,pihole,1649948944.0
3133,comment,2,i4pq9x1,,"I‘ve used PiHole on a dedicated VM on my Proxmox Server. It ran well, but then I realized, that I had an old Pi1 laying around and installed it on this old computer. And since then it’s serving my network ;)",pihole,1649951667.0
3134,comment,2,i4prx4w,,"I ran it in a VM for a long time but eventually put it on a physical pi.  Why?  Because whenever I needed to do maintenance on the server it would mean my network would lose DNS and then the family would all come to me ""it's not working!"".   It's easier just to have something like this plugged in and forgotten about.",pihole,1649952300.0
3135,comment,2,i4pwynj,,"I didn't start using pihole until I put it on a mini-itx system.  I had tried Raspberry Pis, but I have run into too many times the system crashed, either due to memory OOM conditions, or the SDHC got corrupted. Luckily, I got a free mini-itx system from a job that was throwing them away, put in an SSD, and have run the pihole off that with no problem for several years. It's way overkill: 4 proc 1.8ghz with 16mb RAM. But stable. 

As a ""daily driver"" I find pi's to be a little rough around the edges. I have a fleet of them (along with other SBCs) and have all kinds of corruption issues, usually due to overheating or SDHC card issues. This may also be because I am running BOINC on them, which is CPU-intense, but even the smaller guys just sitting out there running an internal nginx with 0.00 load averages will, after 4-6 months, require a new or reformatted SDHC card.  Plus all those wall warts, lol.",pihole,1649954238.0
3136,comment,2,i4q27tt,,"Tiny, cheap, don't have to worry about laptop rebooting or crashing from something else, and very low power usage.",pihole,1649956340.0
3137,comment,2,i4q7f5m,,"It depends on what purpose the laptop has. It's not unheard of for people to use old laptops as server machines that they run on their home network. In that instance, there wouldn't be much of a difference since it would be serving the same function as the raspberry pi, though you could get some power savings depending on what else is being done on the laptop.

However, if the laptop is being used as a ""normal"" laptop, being shut down when you're not using it, being plugged and unplugged from your network as you take it with you to other places, etc., then that would be causing pi-hole to constantly be brought online/offline on your network, and all the other devices that you may have also using it would lose their DNS connectivity. In that case, the raspberry pi could be the always on device available on your network for everything else to use.

That said, there could be a use case for having pi-hole installed on your local laptop that you're bringing with you to places so that you always have pi-hole and DNS filtering with you. But that would be for filtering on just that one machine, rather then your whole network.",pihole,1649958364.0
3138,comment,2,i4qd4va,,It doesn't go down when I need to reboot my PC.,pihole,1649960632.0
3139,comment,2,i4qpxr0,,"DNS is pretty critical. If your Pi goes down, your family will basically think the internet is down. 

One thing I like about using Pi is that it can run on off a PoE adapter. I keep my router and PoE switch connected to a UPS battery. If power blips, the whole network doesn't need to restart.",pihole,1649965693.0
3140,comment,2,i4ruv2r,,"> What's the advantage of installing pihole on a literal pi vs on my much more powerful laptop?

energy consumption and space",pihole,1649983270.0
3141,comment,2,i4sg27k,,do you ever take your laptop with you?  or put it to sleep?  or have trouble with it?  then your network will hate you  :),pihole,1649993549.0
3142,comment,2,i4tqth6,,"In my case: lack of moving parts, lower chance of something letting out the magic smoke, and also there's virtually nothing around me that consumes less power than a Pi, which is important if something is up 24/7.",pihole,1650026994.0
3143,comment,2,i4tuyxs,,"The same as running anything on an rpi, really. It’s a low-cost , low power, dedicated device for tinkerers. if that meets your needs and preferences, you should get one.

Downsides are they they are not upgradable and generally don’t have a lot of resources. You have to replace the entire device if you want to upgrade CPU/Mem! 

I run dns/dhcp in linux containers now, but I’ve run pihole on rpi’s before. Right now those are sitting on shelf collecting dust, but I do have one running the “quorum” application than keeps my proxmox hypervisor cluster online when I take one offline.",pihole,1650029108.0
3144,comment,1,i4pc8uo,,Because I want everyone and everything on my network to be able to use it even when I'm rebooting my laptop.,pihole,1649946118.0
3145,comment,1,i4oyldc,,[deleted],pihole,1649939880.0
3146,comment,1,i4peiiq,,[deleted],pihole,1649947047.0
3147,comment,1,i4pvaqf,,"I just run it on an old Android phone. Low power draw, touch screen for real time diagnostics and UPS all in one.",pihole,1649953602.0
3148,comment,1,i4q5jbi,,"Mines all virtual, wouldn't go back period",pihole,1649957629.0
3149,comment,1,i4rm6jf,,Use a decent quality SD card otherwise you’ll be repairing it every few months,pihole,1649979269.0
3150,comment,1,i4t1655,,"It's cheap and its relatively low power.

Only thing I miss is a form of storage other than SD card. I know that with a proper setup, minimal logging, ramdisk's etc (like the excellent [DietPi](https://dietpi.com/docs/) does) the issue is vitually gone but still I like something with an eMMC or SSD in it.

Since I also have PiVPN running for incomming Wireguard connections, Unbound, a Samba share, a DLNA server and a power monitor for my electricity and solar panels I decided to go for a fanless minipc with a Celeron N4200. That has 8GB of RAM and a 64GB eMMC drive and costs around €150. A fanless PC with a Arom Z8350 that is still faster than a Pi4 goes for around €100. You can install DietPi on it or any other OS and run the same programs but a bit more stable and idle doing <5W in total.",pihole,1650007982.0
3151,comment,1,i4tdjpc,,"If it is that you're only running it on your laptop and you only use that laptop, then it's actually better because you take your pihole with you.  


If it's for your home network, the biggest advantage of a pi is still power consumption.  
I live in Berlin and man, you watch out for how much power things draw when you pay almost 40ct/kWh.  
Also, if one wants to dig a little deeper, you can do all sorts of server-shit for a pi.  
I run pihole, plex, a website, a valheim-server, a VPN-privoxy, ejabberd, nextcloud and a teamspeak-server. The pi handles all of them just well with so little power-consumption.  
Huge fan! Everybody should have a pi.",pihole,1650018437.0
3152,comment,21,i4qb4vj,,Not to mention the advantages of having a dedicated piece of hardware for it.,pihole,1649959833.0
3153,comment,14,i4p276x,,thank you!,pihole,1649941664.0
3154,comment,3,i4pjxnz,,"And it’s made for the raspberry pi. Aka, the easiest to setup and maintain for any novice. 

I’ve tried to setup on my Synology and unraid servers and stuck with using it on a dedicated pi.",pihole,1649949199.0
3155,comment,3,i4pf027,,What do you use as ethernet adapter? Or are you running WiFi only?,pihole,1649947243.0
3156,comment,2,i4p2jr8,,awesome! but why did you need two?,pihole,1649941826.0
3157,comment,6,i4oz0r7,,I like this comparison,pihole,1649940095.0
3158,comment,6,i4p296t,,good analogy!,pihole,1649941690.0
3159,comment,5,i4oz3u7,,To get to market a whole lot quicker.,pihole,1649940138.0
3160,comment,2,i4qe8sa,,What? A swallow carrying a coconut?,pihole,1649961079.0
3161,comment,1,i4ry85b,,More like a Little Red Wagon.,pihole,1649984867.0
3162,comment,1,i4sql77,,"“Look, grandpa, I’m not a bulldozer. I’m a racecar!” —Lightning McQueen",pihole,1649999897.0
3163,comment,3,i4ozsay,,That’s the big one. If you do server & laptop/desktop setup you may find yourself shutting down pihole more than you realize for the server stuff - leaving you to reconfigure your client during time out to reach the internet during that period.,pihole,1649940483.0
3164,comment,3,i4pfsbo,,"I have my secondary on a VM right now, which is WAY overkill but gives me a backup.  I found a second RPI in a box of stuff the other night, I'll probably set it up tonight.",pihole,1649947557.0
3165,comment,1,i4pm9xp,,And a third to test new versions of PiHole that no one normally uses,pihole,1649950114.0
3166,comment,2,i4p2aj2,,thank you!,pihole,1649941707.0
3167,comment,1,i4ozh3n,,what?,pihole,1649940323.0
3168,comment,2,i4pf4da,,I mean I'm the one having / receiving it.,pihole,1649947291.0
3169,comment,10,i4qneb2,,"Yes, although that's a double-edged sword because it does create a single point of failure.

The way I run is that my main pi-hole is a pi 4 with log2ram installed to reduce wear on the SD card, and I then have a docker container running on my NAS as a backup, kept in sync with the master using gravity-sync.",pihole,1649964698.0
3170,comment,5,i4pkt64,,"I use a normal Ethernet to micro-usb adapter I got off Amazon. Don't know what brand it is.

The advantage is if you can get Putty installed and working, and you have access to your router to get the IP address - and MAC Address too for later on in the Pi Hole process - you don't need to fool with the hassle of getting a monitor and keyboard onto it.

I have done this both ways, and Putty ssh-ing into the Pi is so much easier.",pihole,1649949543.0
3171,comment,3,i4psotv,,Both humming along wirelessly,pihole,1649952595.0
3172,comment,9,i4p41zd,,"I run them as primary and secondary, in case one fails. Also, I can patch and reboot one, while the other takes over. It’s not a true cluster/failover solution, simply when queries time out to the first it will go to the secondary or vice versa.",pihole,1649942525.0
3173,comment,5,i4p4sb5,,"If one needs to be taken offline (or goes down for some reason), you still have DNS services running on the network. I don't use Pi-Hole DHCP, so I have the two Pi-Hole servers configured in my firewall as primary and secondary. Devices that are configured for static IP addressing will have the two Pi-Hole servers as primary and secondary.

Cheers!",pihole,1649942854.0
3174,comment,13,i4pbrdh,,This becomes painfully apparent the first time one fails and you’re not there and your family is offline.  :). Going with 2 is definitely worth the investment.,pihole,1649945919.0
3175,comment,2,i4tr12n,,To have DNS while you're rebooting one of them for kernel upgrade for example.,pihole,1650027105.0
3176,comment,2,i4udotz,,"If you want to manage it remotely then if you take one offline the whole network will temporarily lose connection. If you're just doing a restart, np, wait a few minutes. But if you're trying to troubleshoot something and something goes wrong then now you'll need to connect physically to that Rpi and meanwhile the network will be down until you've fixed it or connected to your router to reassign the DNS server temporarily to something else that's not the broken Rpi",pihole,1650037291.0
3177,comment,6,i4oz9kj,,Doesn't apply here. Won't be any faster running on the laptop,pihole,1649940218.0
3178,comment,1,i4qipld,,It grips the husk with it's talons...,pihole,1649962842.0
3179,comment,2,i4p57ff,,"That's why I have two containers on two separate servers. pfSense VM's on each, also, and those run in high availability mode. Pi-Hole can be set up that way, but it's rather messy. I just maintain them separately.",pihole,1649943043.0
3180,comment,9,i4pis8o,,You could sell the RPi and buy a car.,pihole,1649948745.0
3181,comment,1,i4p0uyw,,"Woops, didn't pay attention to which subreddit this is.",pihole,1649941021.0
3182,comment,21,i4r74tb,,">although that's a double-edged sword because it does create a single point of failure.

You have only one modem and likely one router, also single points of failure.",pihole,1649972651.0
3183,comment,2,i4tqybg,,"Same, running one on a Pi1b+ and another in docker on a 3b. Both IPs are used for configuring DHCP clients.",pihole,1650027066.0
3184,comment,2,i4tv8kb,,Then run 2! or more if you have the ports. I was running 3 at ok point. just 2 now.,pihole,1650029241.0
3185,comment,7,i4pzkev,,"I just use the WiFi on my RPi0W, since the required bandwidth is so tiny. No noticeable latency.",pihole,1649955293.0
3186,comment,-5,i4r2lac,,"Or set your isp or google as the secondary DNS server, ad blocking is a (very) nice to have...not a requirement",pihole,1649970741.0
3187,comment,1,i4tri96,,How often does a raspi need a kernel upgrade?,pihole,1650027356.0
3188,comment,1,i4r2ili,,DNS queries are orders of magnitude faster running on wired versus wireless.,pihole,1649970710.0
3189,comment,2,i4qjirg,,Is that the African one? I never know,pihole,1649963164.0
3190,comment,2,i4p2rvi,,Now I’m curious what you commented,pihole,1649941933.0
3191,comment,2,i4sh8pw,,"True*, but I don't think that's a reason for not eliminating others, if I can.

(*Sort of, I have a mobile data failover and a cold spare router because I work from home)",pihole,1649994176.0
3192,comment,2,i4ufrlg,,"Yes, that's what I do.",pihole,1650038133.0
3193,comment,2,i4semsc,,"Secondary DNS isn't used as a backup, it's essentially load balancing. You're going to have lots of queries going to your secondary even while the pi is working fine.",pihole,1649992795.0
3194,comment,2,i4u6iec,,"It's not that it's a raspi or not. I use standard debian, which rolls out updated kernels relatively frequently. I usually apply updates regularly and if there's a new kernel, I make sure it's loaded (e.g. I reboot).",pihole,1650034298.0
3195,comment,3,i4r5n06,,"Still, there are raspberry pis with Ethernet connections.",pihole,1649972021.0
3196,comment,1,i4r6r0j,,">DNS queries are orders of magnitude faster running on wired versus wireless.

Absolutely not, unless you have the world's worst wireless connection.  Typical differences are on the order of a few to a few tens of milliseconds.

This will never be noticed in actual use by a human.  A blink of a human eye, for comparison, is about 100 msecs.",pihole,1649972490.0
3197,comment,1,i4r2pal,,My pihole running in a docker container on my NAS (wired) doesn't answer queries faster than my pi z w.,pihole,1649970788.0
3198,comment,2,i4qmhfy,,Are you suggesting that coconuts migrate?,pihole,1649964337.0
3199,comment,1,i4p4nz2,,"Nothing weird, just about completely unrelated software that also runs on a Pi.",pihole,1649942799.0
3200,comment,2,i4tlzjl,,"For Windows clients, this is incorrect.  I've been running for 18+ months with a pihole as my primary and [8.8.8.8](https://8.8.8.8) as my secondary.  I don't see ads half the time.

*The Windows DNS client is a stub resolver, which means that when it needs to resolve a DNS name, it issues a single recursive query to the primary DNS server that is configured on its network interface.*

*As long as that DNS server responds, no other DNS queries are issued.*

[https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn593685(v=ws.11)#dns-client-resolver-behavior](https://docs.microsoft.com/en-us/previous-versions/windows/it-pro/windows-server-2012-r2-and-2012/dn593685(v=ws.11)#dns-client-resolver-behavior)

For Linux hosts, it's more of a round robin.  For the 4 of you who surf the interwebs on Linux my solution may not work.

https://discourse.pi-hole.net/t/primary-vs-secondary-dns/1536/6",pihole,1650024290.0
3201,comment,1,i4sz2ir,,"Ethernet or wifi make no difference for pihole.

I've tested this to exhaustion...",pihole,1650006262.0
3202,comment,1,i4r7zr6,,"Typical ping times for a healthy wireless network are 2-3 milliseconds. Typical ping times for a healthy wired network is 20-100 microseconds.

The difference in timing for a single DNS query will not be noticed by a human. There are lots of operations that do many DNS queries (such as loading a web page).

All of this assumes a good signal, low network congestion, and no signal interference (e.g. other clients, other wireless networks overlapping in frequencies, microwave ovens, etc).",pihole,1649973016.0
3203,comment,1,i4r3nua,,"Maybe not but you can fix it so that it does. Also, I'd be interested in seeing the timings and methodology you used to determine this since you went through all of the trouble to measure it.",pihole,1649971184.0
3204,comment,2,i4ri5ba,,"It’s not a matter of migration, it’s a matter of airspeed velocity!",pihole,1649977470.0
3205,comment,2,i4tpw0p,,This has not been my experience with Windows. My single Windows client appears on both of the Pi-holes it uses as DNS servers.,pihole,1650026503.0
3206,comment,0,i4rzqrd,,"In my experience, running both wired and wireless Pi-holes, there is zero observable difference in DNS performance between the two. Nothing appears slower in any way.",pihole,1649985583.0
3207,comment,1,i4r3uue,,"https://imgur.com/a/C2KjNJW. 

That's my pi zero w. If you still need to compare,.you must be a really fast browser.


Edit: I will setup a smokeping instance in my pc and have this tested. But the fact that my openwrt router is sending more queries to the pi zero makes me believe there isnt a huge difference.",pihole,1649971262.0
3208,comment,1,i4rilu2,,How can a 6oz bird carry a 1lb coconut?,pihole,1649977676.0
3209,comment,2,i4trxl5,,"As long as the first DNS server responds within one second it should never query any subsequent server.  You can log the time it takes to get a response.  Maybe your first is periodically overloaded (probably unlikely but maybe) or otherwise unresponsive?

https://docs.microsoft.com/en-us/troubleshoot/windows-server/networking/dns-client-resolution-timeouts",pihole,1650027577.0
3210,comment,1,i4s26w6,,"That's great that it works well for you and that you don't notice any difference.

In addition to the above problems that some people have, wired has other benefits. I can reboot my wireless router (e.g. when updating firmware or changing settings that require it) and DNS never misses a beat. I can grab my PiHole and bring it with me and plug it in to another network (e.g. to show friends how it works on their network) without having to bootstrap the network. Setup of the device (especially headless) is easier and requires fewer steps. et cetera",pihole,1649986714.0
3211,comment,1,i4r5bof,,That doesn't tell me whether or not you're using wireless or how it is measured. Ethernet latency is measured in microseconds. There is no way to get around the increased latency of WiFi compared to ethernet.,pihole,1649971887.0
3212,comment,1,i4tyjsz,,"I've had the same experience with Windows. The primary DNS definitely gets the majority of queries, but my secondary pi has seen every one of my Windows clients recently.

I've seen similar issues in my work environment as well. We've made adjustments to internal DNS servers based on the assumption that things worked as documented, but ended up having issues.

I don't have documented evidence on what causes Windows to operate like this, but I can confidently say that something about what you linked is incomplete. The secondary will definitely be occasionally used even if the primary is in perfect working order.

If I had to put a number on it, I'd say it's probably 85/15-90/10ish between primary and secondary. So in your configuration you won't see ads half the time, but if you remove the secondary I believe you'll see less. That's assuming you don't have a secondary blocker somewhere like ublock though.",pihole,1650030823.0
3213,comment,1,i4uei14,,"Both servers are equally available, respond quickly and are not overloaded.

I don't care which of the available DNS servers this client uses, but unlike your experience, the client does not stick to the first one listed.",pihole,1650037621.0
3214,comment,1,i4sb965,,">	I can grab my PiHole and bring it with me and plug it in to another network (e.g. to show friends how it works on their network) without having to bootstrap the network

Only if their IP range is the same as yours.  Otherwise you have to change the IP on the Pi and reconfigure Pi-hole for their network. 

>	great that it works well for you and that you don’t notice any difference.

You very likely wouldn't notice any difference either.",pihole,1649991061.0
3215,comment,1,i4sda9a,,"My Pi-hole is set up to be the DHCP server also. So I just turn that off on their network and it works fine. You have to turn off DNS on the other network anyway. My point is that with a RPi you have to either lug around a keyboard and display or you have to muck around with files on the SD card to get it connected to another network. There are other ways but it's just 100x easier when you can simply plug it in.

I can see no fewer than 50 different WiFi networks from my place. I tried using wireless PiHole for a while, tried the least clutter channels, moving the PiHole around. When I switched to wired, the difference was obvious. And the fact that it connects to the network instantly without regard to WiFi and all of the other benefits were all big plusses.

You seem convinced that wired can't possibly be better for anyone but I assure you it is.",pihole,1649992097.0
3216,post,0,u3fj2g,ubuntu 22.03,"Hi all! Pihole does not work at 22.03 ubuntu release, would pihole support new version ubuntu? 

Any live news or dates?",pihole,1649936451.0
3217,comment,2,i4ovr3b,,"I bet no on that one. You could always export the skip OS check, given previous versions of ubuntu are supported you should be fine.",pihole,1649938368.0
3218,comment,2,i4p04w6,,https://github.com/pi-hole/pi-hole/issues/4693,pihole,1649940660.0
3219,comment,2,i4ruxjh,,Just use docker? :),pihole,1649983303.0
3220,comment,1,i4p4vht,,Yeah my VM is on 18.06 still so I figured it was time to spin up a new one with 22.04 LTS,pihole,1649942893.0
3221,comment,1,i4ox2ne,,"i know i can skip os check, but it does not work anyway)",pihole,1649939083.0
3222,comment,-1,i4p41rl,,"yeah, got the same problem with whiptail.. i was trying to find a relevant solution but i didn't got it",pihole,1649942522.0
3223,comment,1,i4t5shw,,"I see the latency increased when use docker instead of barebone, even with modern hardware (i5-8400, 8gb ram, nvme ssd)

Docker have to be used for non gaming setups, non demanding people, maybe older people .. (not insult lol), who do not see the latency..",pihole,1650011871.0
3224,comment,1,i4p5c13,,"Some things i faced while moving from 20.04

Unbound does not work at all.

Netplan (if you using it) was changed hardly my configs does not work.

You will be forced to play with whiptail settings due to broken pihole installer..

i bet moving from 18.06 would cause **PAIN)))**",pihole,1649943102.0
3225,comment,2,i4pgr1t,,Follow that thread discussion - a solution may appear there.,pihole,1649947938.0
3226,comment,2,i4t60wt,,I see similar latencies between my Pi 4B (running Pihole bare metal) and my x86-64 VM (running Pihole in Docker). I think the network setup is more important for latency but if you've found differently then fair enough.,pihole,1650012068.0
3227,comment,1,i4p94sj,,"Guess I'll be waiting then. I tried to do a regular OS upgrade to 20.04 a while back, real glad I took a snapshot because it borked everything, so I know a clean install is the only option.",pihole,1649944774.0
3228,comment,1,i4tabkx,,"i'm sorry! from you answer not really clear, pi 4b or VM have latency issues? i thought pi 4b is a beast for pihole setup..",pihole,1650015791.0
3229,comment,1,i4u7j4o,,"Neither. Same latency (looking by eye, nothing scientific).",pihole,1650034723.0
3230,post,6,u3cyud,PiHole Alpine on BT3ProII w/ Proxmox and ramdisk is OK!!,"Added default list + OISD list.

Added regex for the whole Internet and hours after hours adding whitelist domains to make everything work as expected.

Raises block ratio% from 8% to 80 now is 20%, quite good for some hours of tuning.

Mounted on Intel ATOM 4GB ram, mounted the whole Alpine LXC into 768MB /mnt/ramdisk of Proxmox, then installed PiHole Alpine version with 256MB ram setup and 1 core.

Is working far better than expected.. then I'll plan to avoid swappiness..and some more tunings (another node on another cheap hw box, unbound and sysctl stuff) to let them serve DNS requests till theirs end :)",pihole,1649926964.0
3231,post,2,u380oy,Can Pi-hole display a logo or somehow let a client know when a url has been blocked?,"I read a comment somewhere from another user that implied this was possible but I may have misinterpreted it.

This would be a useful feature as I never quite know if a page isnt loading due to Pi-hole or if its a bad link, etc.",pihole,1649906839.0
3232,comment,9,i4nonhe,,"We do have a block page option (soon to be deprecated), but this only works on http pages, so it is of limited use. 

https://docs.pi-hole.net/ftldns/blockingmode/",pihole,1649907492.0
3233,comment,5,i4nyu9a,,"Apart from the deprecated block page, the error code from the browser is useful. Pihole blocks would result in ERR_CONNECTION_REFUSED or DNS_PROBE_FINISHED_NXDOMAIN or ERR_NAME_NOT_RESOLVED",pihole,1649913557.0
3234,comment,1,i4npsub,,Thanks for the clarification! This might have been behind the comment I read elsewhere,pihole,1649908106.0
3235,comment,1,i4nrze3,,"You could do this with a browser based solution, but then obviously it wouldn't be network wide.

Bonuses of browser/renderer level blocking as opposed to domain nameserver based blocking is that the DNS based blocking is binary, and at the domain level. Whereas the browser based blocking can block at URL/URI level and/or individual assets within a page.

Pi-hole never sees any of the URL/URI information, or any of the data stream/page source. It can only block or allow at the domain level.

A decent example I guess is Pi-hole can block
```
reddit.com
```
but not
```
reddit.com/r/pihole
```
it's either all or nothing. You can go much further if you have control at the client processing/rendering level.",pihole,1649909291.0
3236,post,15,u35g95,Amazon Alexa Show domains,"Every 2 minutes my Amazon Alexa Show tries to reach fireoscaptiveportal.com, mmechocaptiveportal.com, and device-metrics-us-2.amazon.com. Pihole is blocking all three and I think it causes the device to periodically malfunction.",pihole,1649898570.0
3237,comment,3,i4n87v8,,"Ok, so what would you like to do about it? In my setup, I have my smart devices (Amazon Echos, streaming devices) in their own client group on the Pihole, then whitelist a domain that I believe is causing that device issues along with a comment on why I'm whitelisting it, but only whitelist it for that group and not others. If the whitelist works, then great, I keep it on there. If it doesn't, I either disable that domain I whitelisted or delete it so my pihole isn't clogged with domains I'm not whitelisting for specific reasons.",pihole,1649899711.0
3238,comment,1,i4opdoq,,"The metrics you can keep blocking.

The captive portal domains are for the device to check if you are running via a proxy that requires authentication.  They are annoying, but can be enabled if you wanted too.

Another alternative to them is if you have a local web service running, you could redirect those domains to your local one and set up a reply - There should be people that have already done this, I didn't it for my Kindle when I had one.   The advantage of this is the device still thinks it's OK, but you are not sending any data to Amazon.",pihole,1649934496.0
3239,comment,1,i4necuc,,That’s a good idea. Thanks,pihole,1649902428.0
3240,post,1,u319wx,Is it impossible to whitelist whatsapp web?,"Hi, i tried adding it via regex, manually adding  it and via putty. but it doesnt seem to work. any tips?

    web.whatsapp.com",pihole,1649886317.0
3241,comment,3,i4mku4x,,Did you maybe set up groups and assigned this entry to the wrong group?,pihole,1649889454.0
3242,comment,2,i4n0ga8,,"What is the output of the following from the Pi terminal:

`pihole -q web.whatsapp.com`",pihole,1649896319.0
3243,comment,2,i4n18ye,,"just go into query log in the web panel, find the blocked query and hit add to whitelist.",pihole,1649896668.0
3244,comment,1,i4pjrtf,,"use this   


[NoAds.it](https://pihole.noads.it/)",pihole,1649949135.0
3245,comment,1,i4mli5x,,dont think so my main pc is open to every group i created,pihole,1649889743.0
3246,comment,1,i4nzmdq,,"pihole -q web.whatsapp.com Match found in exact whitelist   

web.whatsapp.com 

Match found in regex whitelist   

(\\.|\^)web\\.whatsapp\\.com$ 

Match found in https://www.github.developerdan.com/hosts/lists/facebook-extended.txt:   dev-web.whatsapp.com   test-web.whatsapp.com   web.whatsapp.com",pihole,1649914087.0
3247,comment,1,i4mm8cq,,>how does the regex entry look?,pihole,1649890060.0
3248,comment,3,i4o458s,,That Facebook-extended blocklist contains 900+ WhatsApp URL’s. I think you’re going to have a hard hard time whitelisting the relevant ones to get WhatsApp web working.,pihole,1649917403.0
3249,comment,2,i4pgmd8,,This ouput indicates that Pi-hole is correctly whitelisting this domain.,pihole,1649947886.0
3250,comment,0,i4o4hmb,,"so whats the alternative, not using fb-extended at all?",pihole,1649917672.0
3251,comment,1,i4pjc2e,,"Well, then i will try to make ""my own"" facebook-extended.txt blacklist without all the whatsapp urls. that should do the trick right?",pihole,1649948963.0
3252,comment,4,i4o4sl1,,"That’s for you to decide. Eg. Find a different list that doesn’t target WhatsApp, create your own blocklist from that list, go through each URL or check the domains blocked when using WhatsApp to then whitelist, don’t target your main machine with that blocklist with groups, etc. 

I’m sure others will have better suggestions than me.

Edit: Typo",pihole,1649917909.0
3253,comment,1,i4oba9f,,"hm yea, I guess I could create my own blacklist by copying every line except the 900+ whatsapp lines. and use that list instead",pihole,1649923204.0
3254,post,14,u2z2pv,Runaway queries crippling internet until blacklisted,"So I have a reoccurring problem that I haven't been able to figure out.  Something in my network will send a query out to some random address, and then either the Pihole or router freaks out and will continue sending this query out until I blacklist it or restart the Pi.  When this happens, I only really find out because the internet slows to a few KB/s, I eventually get frustrated, check the Pihole admin and it's blasting out about 700 queries per second.

[Can you tell when something went bonkers?](https://preview.redd.it/t3gw47g8oct81.jpg?width=1403&format=pjpg&auto=webp&s=2930ddd0ba90a9532e18455e5aaf9b47bd939740)

&#x200B;

[Just after blacklisting the address, about 50 queries for it still tried to get through.](https://preview.redd.it/ovxrqn4jpct81.jpg?width=1150&format=pjpg&auto=webp&s=f8a768c8d4d9f1be661de0fab5260a4accf18351)

This has followed me on the same hardware, but different OS running PiHole... originally it was some version of Raspbian, and now it's on DietPi, both on the same Raspberry Pi 4.  The router is a [Gl-inet Slate](https://www.gl-inet.com/products/gl-ar750s/) if that matters, with a VPN.

Once this runaway starts, only restarting the Pi or blacklisting the offending address stops it.  It's been hard to pinpoint if a particular device is always the offender as I can't see where the individual queries are originating... but, I also only have about 5 other devices on the network.  I've been able to turn all the devices off individually (except for the router and Pi) during a runaway event and it doesn't affect the deluge of queries.",pihole,1649880422.0
3255,comment,3,i4m8fpd,,DNS-loop?,pihole,1649884383.0
3256,comment,2,i4lzxdf,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1649881064.0
3257,comment,2,i4n3h5b,,Do you have phone with AT&T that has WiFi calling enabled? I'm guessing this \*might\* be the source of the initial query.,pihole,1649897625.0
3258,comment,1,i4n9fca,,I suspect your router might be comprised. Try updating to latest firmware?,pihole,1649900238.0
3259,comment,1,i4ma59n,,"Yeah, I dunno what you'd call it.  But being able to disconnect all the devices and still have it endlessly querrying(?) does sound loopy.",pihole,1649885060.0
3260,comment,2,i4m1lok,,"[https://tricorder.pi-hole.net/xpuzrdMS/](https://tricorder.pi-hole.net/xpuzrdMS/)

Unfortunately, this probably only includes the most recent activity as I did full reinstall a week-r-so ago after bricking the last pihole install trying to figure this out.",pihole,1649881724.0
3261,comment,1,i4okdny,,"Well, no.  We're from the USA, but currently living in Sweden.  Our phones are from the US, one older iPhone (I believe it was on Verizon back in the US) and one Android (believe it was on t-mobile).

I wish I still had the blacklist from before, I had about twenty something different queries that caused this problem.  Most were garbledwebsite.gibberish.com and some were more memorable like somethingsomething.att.net or somethingsomething.apple.com.

\*edit\* Forgot my wife also has a work phone, which is also a newer iPhone with a USA number.  I don't believe it has wifi enabled calling, and it is very, very, rarely used.",pihole,1649930837.0
3262,comment,1,i4oihtd,,Unfortunately I've had this problem before and after a router firmware update.,pihole,1649929324.0
3263,comment,5,i4mbsjk,,Check if the router‘s DNS-list includes  Pihole and Pihole’s upstream DNS includes the router‘s IP.,pihole,1649885723.0
3264,comment,1,i4o98hx,,I receive „forbidden“ when trying to open.,pihole,1649921475.0
3265,comment,1,i4pib3w,,Ah. I took a shot. The specific FQDN in your picture ([sentitlement2.mobile.att.net](https://sentitlement2.mobile.att.net)) is one used by AT&T for Wi-Fi calling according to their documentation at [https://www.att.com/support/smallbusiness/article/smb-wireless/KM1305083/](https://www.att.com/support/smallbusiness/article/smb-wireless/KM1305083/). Maybe your wife's work phone is through AT&T? That would explain both the [att.net](https://att.net) and the [apple.com](https://apple.com) queries at least.,pihole,1649948557.0
3266,comment,2,i4mdjt8,,"There are no upstream DNS servers listed for PiHole except google on IPv4.

The router has the PiHole listed as the primary DNS server, with google as backup.

\*edit\* also, thanks for helping",pihole,1649886429.0
3267,comment,1,i4okys2,,"I dunno.  I just did as instructed, presume it was the right thing. Perhaps it's for PiHole team viewing only?",pihole,1649931303.0
3268,comment,3,i4me1vg,,"Multiple DNS are not primary and backup, they might be used both, so your Pihole will be bypassed sometimes. Which is lucky because these might be the only queries coming through 😂",pihole,1649886631.0
3269,comment,1,i4mekuy,,"You‘d better point your clients to pihole (including the router‘s own DNS), then you can see in the log, where a query comes from. This would be the recommended setup.",pihole,1649886844.0
3270,comment,1,i4od9iz,,"gl.inet routers have an option called ""overwrite dns for all clients"" under more settings/custom dns server, which does what is says and also reroutes queries from pihole back to it (if the pihole is in the network of the gl.inet)",pihole,1649924865.0
3271,comment,1,i4ok6nw,,"The router has the PiHole as the primary DNS?  Where is the PiHole sending its queries (including conditional forwarding).  If any of those are from pi-hole to the router, there's your problem.",pihole,1649930682.0
3272,comment,1,i4os6lz,,"„Logs are deleted 48 hours after upload“

But I can not even access my own fresh  log through this mechanism. But I did access these earlier.",pihole,1649936291.0
3273,comment,1,i4mfk94,,"Well, you can't tell from the screenshot above, but most traffic seems to show up in the pihole log, so it's at least doing something.  If you get a magnifying glass out, you can see some little blips to the left of the flood.",pihole,1649887240.0
3274,comment,1,i4omtsj,,"I do have that enabled.

I'll disable that for now and see what, if anything, changes.",pihole,1649932701.0
3275,comment,1,i4onivy,,"Yes, router is set to use PiHole as primary DNS... in fact, lemme change both primary and secondary to the PiHole.  The PiHole has it's Upstream DNS Server as ""Google"" in the DNS Settings tab, there are no conditional forwarding entries.

Most days, this works fine and I'll get a few thousand queries for the whole day from all the network activity.  It's only every so often that a rogue query will go crazy.

I would think if it were set up to loop, it would always loop, right?",pihole,1649933203.0
3276,comment,1,i7ecqye,,"u/2l3r4 Well, it's a few weeks later and I don't think I've had any more runaway events.  I don't think I made any other changes, so this might have been the culprit.  Time will tell.

One of the domains that I had blacklisted because it caused a runaway event [ended up being for google icons](https://www.reddit.com/r/pihole/comments/ud5db7/the_icons_disappear/), so these probably weren't malicious queries.",pihole,1651734695.0
3277,comment,1,i4oo9si,,"Yep, you're right.  I'd get WireShark set up on a client ready to run a quick trace next time you get a flood.  Output from that should give you the origin of the requests (if they're on your network).

Edit - typo.",pihole,1649933730.0
3278,post,4,u2vazs,Pihole local-link ipv6 address for my router IPV6 DNS?,"I am new to linux world and pihole, but I did search this board but found not much information.  

I currently have IPV6 turned on.   My Pihole (on Beaglebone) has a IPV6 adddress that I uses it as my router's Ipv6 DNS server address.  All is good. 

However, after I reboot Pihole device, I sometimes get the same Ipv6 address or a different one.  It is interesting that it is always one of these two Ipv6 addresses after each reboot.  

I read on this board somewhere that I can use the local-link ipv6 address for this purpose.  Do you simply $ip addr to find the local-link Ipv6 and then directly type it in the router ipv6 DNS address?",pihole,1649870117.0
3279,comment,3,i4l8hlf,,"Yes, you can have the router advertise the Pi's link local address for DNS. `ip -6 addr` will tell you all the IPv6 addresses of the Pi, the link-local address is the one that starts with `fe80::`",pihole,1649870276.0
3280,comment,2,i4lrllj,,"IPv6 is a bit more complicated because every device has multiple addresses.

For dns you want to use a unique local unicast address (ULA). You can fix the prefix and identifier to get a static address.

Furthermore you need to select the stable management address and not any random temporary generated by the privacy extensions. 

Global unicast addresses should be avoided because ISPs usually don't assign static prefixes. Link local addresses are to be avoided because they are not routable and are bound to a link.

The command `ip a` lists all addresses. You need to pick the management ULA (fd00::/8 range) and put that into your router.",pihole,1649877633.0
3281,comment,1,i4lv3q6,,"Mine works fine with v6 enabled, I get a rough 50/50 split of A and AAAA records provided

https://linksharing.samsungcloud.com/sRRyLuxqtvDC

Try to disable temporary ipv6 addresses in the os pihole is running on.",pihole,1649879046.0
3282,comment,1,i4lyth0,,"u/BierOrk It appears my router does not support ULA.  I did IP -a and did not see anything fd00::/ .  It is a netgear AX4300 running default firmware.   


u/t0m5k1 My Ipv6  works fine.  it is just every time my pihole device reboots, it will be 50:50 chance to have the same or the other Ipv6 address.  I need to go back in router to manually change it.",pihole,1649880613.0
3283,comment,1,i4levdo,,"It did not work. I got the error message:

""The Primary DNS Server is not valid; it has to be a global unicast address""

How do I make my pihole device get the same Ipv6 address after each reboot?",pihole,1649872690.0
3284,comment,1,i4m8vy7,,"Check the docs, wiki or forum for your distro to see how you disable temporary ipv6 addresses.",pihole,1649884562.0
3285,comment,2,i4qn2kq,,"That’s unfortunate, my router does accept link-local addresses as custom DNS.

Most Linux distros assign themselves static global IPv6 addresses, take the address that does not have “temporary” behind it if you do *ip -6 addr*",pihole,1649964568.0
3286,post,1,u2u6yj,Why is my router sending requests from my work laptop?,"So I have a pihole setup, and DNS filtering turned on. 

I notice my router is like the third most frequent requester in the PiHole dashboard. All these requests are just to either google, cloudflare, or time.google.com.

Although I do see a request that is clearly from the laptop as I recognize my works domain. Why is this? Why isn't the request coming from the laptop?

Is this because a hardwired DNS? DoH?",pihole,1649867137.0
3287,comment,2,i4l2ksq,,"What DNS is your DHCP server passing out to clients?  What is the complete output of the following?

`pihole-FTL dhcp-discover`

If the device were using hardwired DNS or DoH, you wouldn't see any DNS queries from that client.",pihole,1649868034.0
3288,comment,1,i4l3h8q,,"Are you sure because I have DNS filtering turned on in my router which should intercept DoH no?

    Received 319 bytes from eth0:192.168.1.1
      Offered IP address: 192.168.1.2
      Server IP address: 192.168.1.1
      Relay-agent IP address: N/A
      BOOTP server: (empty)
      BOOTP file: (empty)
      DHCP options:
       Message type: DHCPOFFER (2)
       server-identifier: 192.168.1.1
       lease-time: 86400 ( 1d )
       renewal-time: 43200 ( 12h )
       rebinding-time: 75600 ( 21h )
       netmask: 255.255.255.0
       broadcast: 192.168.1.255
       wpad-server: ""\n""
       netbios-ns: 192.168.1.1
       domain-name: ""Network""
       dns-server: 192.168.1.2
       dns-server: 192.168.1.3
       router: 192.168.1.1



My work computer is the only one I notice from the router, which is weird because my work laptop has its own entry as wello",pihole,1649868369.0
3289,post,119,u2u5ki,Chrome on Android is now getting around pi-hole.,"I've noticed sometime in the last few weeks more and more ads popping up in Chrome on Android. I see several DNS related settings in Chrome. 
Do any of these force Chrome to use the DHCP assigned DNS (my pi-hole) or is the only fix to block all but my pi-hole's DNS traffic at my firewall?",pihole,1649867028.0
3290,comment,71,i4l2bjd,,Go into the settings and make sure Secure DNS is disabled.,pihole,1649867937.0
3291,comment,42,i4ljyku,,[deleted],pihole,1649874631.0
3292,comment,21,i4lmwm0,,I just added a firewall rule ro my router to block any port 53 from my client range. While placing my pihole outside that range,pihole,1649875755.0
3293,comment,13,i4lggp6,,I've got pfsense set up to redirect any DNS traffic to the pihole.,pihole,1649873294.0
3294,comment,3,i4nkpq3,,"If you want to force all the devices to use PiHole only, you will need a router which supports either OpenWRT, DD-WRT, Tomato or any linux based distro having ssh access.

This guide will help you to:

1. Redirect all Do53 queries to PiHole
2. Block known DoH servers  access to (doing so will kinda force apps/devices to use standard Do53) all the devices except PiHole (You may want to use DoH for upstream name server)

Assuming you have OpenWRT router, you can run following shell script on the terminal as a root (**Remember to replace** [**192.168.1.102**](https://192.168.1.102) **with your PiHole ip !**)

&#x200B;

`#Redirect all Do53 queries to PiHole`

`iptables -t nat -A PREROUTING -i br-lan -p udp ! --source 192.168.1.102 ! --destination 192.168.1.102 --dport 53 -j DNAT --to 192.168.1.102`  
`iptables -t nat -A PREROUTING -i br-lan -p tcp ! --source 192.168.1.102 ! --destination 192.168.1.102 --dport 53 -j DNAT --to` [`192.168.1.102`](https://192.168.1.102)

`iptables -t nat -A POSTROUTING -j MASQUERADE`  
`#`  
`# Block known DoH server connections`  
`curl https://raw.githubusercontent.com/jpgpi250/piholemanual/master/DOHipv4.txt > /tmp/DOHipv4.txt`  
`ipset create blacklist4 hash:ip`  
`while read line`  
`do`  
`ipset add blacklist4 ""$line""`  
`done < /tmp/DOHipv4.txt`  
`iptables -A forwarding_lan_rule  ! --source 192.168.1.102 -m set --match-set blacklist4 dst -j reject`

Note-

You might need to install additional packages (i.e. curl, ipset etc) on your OpenWRT router for this script to work",pihole,1649905454.0
3295,comment,3,i4nnp04,,"I wanted a fix without changing anything on the android side and this fixed it for me:

https://docs.pi-hole.net/guides/dns/cloudflared/",pihole,1649906989.0
3296,comment,3,i4o4rh6,,"While you are all playing with chrome settings. Don't forget to check your sync settings and then off history and tabs, otherwise you are sending all your web visits to Google's sync servers no matter what DNS you are using.",pihole,1649917886.0
3297,comment,11,i4msxbr,,Don't use Chrome.,pihole,1649892997.0
3298,comment,2,i4p63mi,,Yes it's very annoying. Both windows and Android Chrome require fiddling to work properly,pihole,1649943454.0
3299,comment,1,i4lss1l,,[Use this](https://play.google.com/store/apps/details?id=org.mozilla.firefox&hl=en_US&gl=US_),pihole,1649878126.0
3300,comment,1,i4n5kpn,,stop using chrome. its fucking garbage,pihole,1649898557.0
3301,comment,0,i4mdqnt,,"I've added AdAway to my device via F-Droid. I remove the apps I need it to not use that get trapped in it like local Sherriff push app for traffic and why are there sirens, my local camera, Home assistant, Smarthings, works really well. Haven't encounreted a web page that it mucks up. seems to do much better than pihole alone. I don't know how secure it it, but meh I can read the news again.",pihole,1649886506.0
3302,comment,-7,i4mfhuy,,Not a solution but why not use brave,pihole,1649887213.0
3303,comment,24,i4mnsfz,,"on Samsung Android

Settings -> Connections -> More Connection Settings ->

Turn OFF  Private DNS",pihole,1649890726.0
3304,comment,4,i4n4ckp,,"This is your regularly scheduled reminder that Secure DNS is opportunistic, and has been the default for quite some time now (like, literally years in the dev branch).

There is no need to disable this.

As it quite clearly states in the setting description, it will be used *if* there is a secure path available in the current provider. This is almost certainly never going to be true in a home environment.

[Here](https://imgur.com/a/M3lZp6j) you can see Secure DNS well and truly enabled, and my debice still able to query pi.hole, which pretty obviously only exists in my network and isn't a publicly resolvable domain.

Translation? No bypass.",pihole,1649898003.0
3305,comment,14,i4lvzyg,,Instead? I do both.,pihole,1649879391.0
3306,comment,1,i4m8z78,,"Firefox now also has DoH enabled by default (at least on desktop). So unless you disable it, it too goes around pihole. I know ublock origin fills the void but you may have custom filters in pihole it won't adhere to",pihole,1649884597.0
3307,comment,15,i4lnhl0,,"which is good, but DoH works over https, so not only can you not see inside those requests to even know they’re DNS, you can’t block them easily without blocking legit https too.

for now its easy to outright block all access to known DoH resolvers, but it will eventually become too onerous.",pihole,1649875977.0
3308,comment,5,i4ljbfd,,DoH also?,pihole,1649874390.0
3309,comment,1,i4ofoo4,,"I've not implemented this so I don't know exactly what's being done, but in theory,... in Tomato & DDWRT, ... you could select 'Intercept DNS Port' and 'Use internal DNS' and then specify your pi-hole as your internal DNS server of your router. No?",pihole,1649926957.0
3310,comment,2,i4qmj3x,,"I'll give it a try...   this looks like the answer with the **best intentions**: Maintain DoH and site block with pihole while maintaining ""default"" android connection settings.

\[Edit, a week later\]

I did the **cloudflared** installation and encountered this **legacy service** install [problem](https://discourse.pi-hole.net/t/cloudflared-legacy-service-install-fails/54160), No worries, I configured **run on startup** the [manual way](https://docs.pi-hole.net/guides/dns/cloudflared/#manual-way), instead of the [automatic way](https://docs.pi-hole.net/guides/dns/cloudflared/#automatic-way).

I confirmed proper operation with the dig command:

&#x200B;

`pi@raspberrypi:~ $ dig u/127.0.0.1 -p 5053 google.com`

`; <<>> DiG 9.11.5-P4-5.1+deb10u6-Raspbian <<>> @127.0.0.1 -p 5053 google.com`

`; (1 server found)`

`;; global options: +cmd`

`;; Got answer:`

`;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 19459`

`;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1`

`;; OPT PSEUDOSECTION:`

`; EDNS: version: 0, flags:; udp: 4096`

`; COOKIE: dcbba9e8f175590f (echoed)`

`;; QUESTION SECTION:`

`;google.com. IN A`

`;; ANSWER SECTION:`

`google.com. 300 IN A 142.251.32.110`

`;; Query time: 20 msec`

`;; SERVER: 127.0.0.1#5053(127.0.0.1)`

`;; WHEN: Thu Apr 21 12:25:56 EDT 2022`

`;; MSG SIZE rcvd: 77`

I configured the upstream DNS as shown [here](https://docs.pi-hole.net/guides/dns/cloudflared/#configuring-pi-hole).

I can see that sites on my custom blacklist continue to be blocked, but  on android when browsing with either Chrome or Firefox, I must [turn off Private DNS](https://www.reddit.com/r/pihole/comments/u2u5ki/comment/i4mnsfz/?utm_source=share&utm_medium=web2x&context=3) so that PiHole ad-blocking works.",pihole,1649964355.0
3311,comment,-5,i4myrsh,,"Trouble is it is useful.  Working in the real world I need Google's services integrated on to my desktop PC.

I have the same experience on my Phone, Linux PC, Chromebook and my Windows Laptop (TBH the Windows laptop is just so my wife can play the Sims 4, I am generally of the belief that Windows sucks).  This is all because of Chrome.

The vast majority of browsers these days are based on Chromium.  I do use Firefox for some things, but out of all the browsers I have used, nothing comes close to Chrome.",pihole,1649895586.0
3312,comment,5,i4mlgl1,,I use brave as well but I'm sketch on them after their forced notifications. I disabled them. But it's a trust thing,pihole,1649889724.0
3313,comment,8,i4mtybm,,Chrome also has it under Privacy & Security.,pihole,1649893453.0
3314,comment,-1,i4mqr68,,private dns causes the bypass of Pihole?,pihole,1649892049.0
3315,comment,1,i4p58w6,,Same here. Since when do we advise to have only one layer of safety?,pihole,1649943061.0
3316,comment,24,i4mcaly,,"Firefox has had DoH enabled by default for a while now, since 2019 in the US at least. [Pi-Hole has implemented the Firefox canary domain for DoH.](https://github.com/pi-hole/pi-hole/pull/2915) It will let Firefox know that it should not use DoH and use your local network DNS instead.

You do not need to manually disable DoH for Firefox to use Pi-Hole.",pihole,1649885924.0
3317,comment,1,i4ltotz,,DNS filtering blocks DoH I belive.,pihole,1649878494.0
3318,comment,7,i4lk117,,"I don't think so... he probably means to filter out DNS queries on port 53, I doubt he can do much about DoH, or other encrypted DNS queries.",pihole,1649874656.0
3319,comment,3,i4o5nss,,"You can always import your Chrome stuff into Firefox and sync it on all devices, this way you'd have a seamless transition and you would get access to uBlock Origin on your phone",pihole,1649918581.0
3320,comment,2,i4om7z4,,"I de-Googled myself, was eaiser than I thought and I'm glad I did it.

The only Google product that there isn't an equal or better resource, is Google maps.

And yes, I also work in the real world. You definitely do not need it to do work.",pihole,1649932254.0
3321,comment,5,i4mv3dg,,[deleted],pihole,1649893962.0
3322,comment,3,i4mtf4w,,as best as I can tell.  forces 8.8.8.8 or other google DNS,pihole,1649893218.0
3323,comment,1,i4mru64,,"Mine is in auto, it doesn't seem to be the case for me",pihole,1649892521.0
3324,comment,1,i4n4hdn,,Not inherently.,pihole,1649898063.0
3325,comment,10,i4lv5no,,"Yes and No. 

DNS filtering will block those that rely on what's known as ""Bootstrapping"", aka using normal DNS to resolve DoH IPs. (NOTE: Some will try to use external DNS resolvers for this, but if you're redirecting DNS requests, you'll be able to catch them)

However, it WILL NOT block servers that use a direct IP.",pihole,1649879066.0
3326,comment,2,i4luqph,,nope.,pihole,1649878906.0
3327,comment,1,i4nop5j,,"The pfBlockerNG package for pfSense does have a solution for DOH. 

This reddit post gives some of the details in the comments.  
[Confusion about DoH/DoT Blocking List](https://www.reddit.com/r/pfBlockerNG/comments/lwt8or/confusion_about_dohdot_blocking_list/)",pihole,1649907517.0
3328,comment,0,i4n4ja3,,[No](https://www.reddit.com/r/pihole/comments/u2u5ki/chrome_on_android_is_now_getting_around_pihole/i4n4ckp).,pihole,1649898086.0
3329,comment,4,i4n50f6,,"It doesn't force *any* specific endpoint, Google or otherwise (in automatic/default operation, if you point it at a specific endpoint it'll obviously use that but that's just a feature working as intended at that point).

It uses a secure endpoint *if* one is available via the current provider at that time.",pihole,1649898305.0
3330,comment,3,i4ows6l,,Best thing is set a nat rule in your routers addresses to say 8.8.8.8 and 8.8.4.4 go to x.x.x.x (pihole).  If your router can do that.,pihole,1649938925.0
3331,comment,1,i4n4occ,,"Yeah, because it's totally not the case, and the verbiage of the setting even makes this quite clear, but people are very reactionary.",pihole,1649898152.0
3332,comment,2,i4p5f69,,"(For those interested, DoH is port 443, but the point is that it's hidden as HTTPS so you will need a list of known endpoints.)",pihole,1649943144.0
3333,comment,4,i4p51qi,,"The point of DoT/DoH is that you can't impersonate a resolver, so redirecting to Pihole won't help much.   
So redirect *port 53* (DNS) to Pihole, block port 853 (DoT), and block known endpoints (port 443) like the ones you cited and cloudflare.",pihole,1649942971.0
3334,comment,1,i4p5o7b,,This is a great point.,pihole,1649943258.0
3335,post,25,u2ostv,pi hole with display on zero V1.1,Is it possible to build a pi-hole with a display (ink type preferably) on a pi zero V1.1 all the builds I see online are on V2 boards.  As I want to make one with a V1 I found and add an ink screen and case. Thanks.,pihole,1649851582.0
3336,comment,3,i4k5zm5,,"No reason why not, would love to see what you come up with. I had a little OLED on my Pi 2 pihole for a long time but was tucked away so didn't make sense.",pihole,1649854803.0
3337,comment,2,i4k9fab,,"I have been tinkering with an adafruit mini TFT screen and have got a python script that will create and display an image.  I hope to document what I did for future reference. Will post it here when I do
https://i.imgur.com/ATF9gJh.jpg

I don’t see why the same approach couldn’t be used for an e-ink display",pihole,1649856395.0
3338,comment,2,i4knn90,,"https://github.com/numbermonkey/pihole-dashboard-inky
I did a pi zero 1.3 setup with an Inky screen.",pihole,1649862282.0
3339,comment,1,i4pjmo9,,"I had a tiny panel on my Pi 2 back when it was my PiHole box, had it displaying statistics.  Shouldn't be too hard to do the same with a Pi Zero.",pihole,1649949079.0
3340,comment,1,i4kdjgd,,That's cool. That's the kinda thing I want I just like the ink displays.,pihole,1649858212.0
3341,comment,3,i4ko6hj,,It was my first ever coding project. Definitely not a programmer but an enthusiastic tinkerer :),pihole,1649862494.0
3342,post,30,u2elvv,Are iOS apps figuring out a way to force pihole off? I can't get Wordle to let me play the daily challenges or click on anything that says AD today?,"It was working fine yesterday - I've made no changes to my piholes, my gravity lists, etc.  But today - my Wordle app will not let me click on the daily challenge unless I disable pihole or switch to LTE (which my kids cannot do with ipads, etc.)... this is the second or maybe third app that is doing this now - all within the last week.  Anyone else experience this or know how to get my pihole functional to block ads but still have the apps work?",pihole,1649813018.0
3343,comment,20,i4ioefw,,I had a similar problem with YouTube. One or more of your ad lists is having false positives. Toggle your ad lists off one at a time until the problem goes away.,pihole,1649819004.0
3344,comment,13,i4j7bek,,Which wordle app ? I have no issue using NYT.com to play,pihole,1649829839.0
3345,comment,20,i4ihq97,,"Use these tools to determine why your desired content does not load. 

https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522",pihole,1649815993.0
3346,comment,2,i4jg1ep,,"Additional infos:

Yes, I know it was not asked but this is also an option for other apps

Some apps/devices use a hardcoded DNS resolver. Your only option is it to force all DNS requests to your pihole. This can be configured in some routers with settings like this:

Nat->Port Forward->New rule:
Interface: LAN; Protocol: TCP/UDP; Port destination: 53; IP Destination: !{PiHoleIP}; IP Source: !{PiHoleIP}; Redirect Target: {PiHoleIP}

I’m using OPNsense as a router. But this is enterprise level software. Typically those stupid ISP-Routers do not have this option.

Edit: fixed mistake in port number for dns",pihole,1649836806.0
3347,comment,0,i4ixq9q,,"false positive as in it is blocking legit clicks so the app cannot continue?  If that's the case - why would it suddenly change?  I've been playing wordle on and off with my wife and kids for weeks or a month even... but today - now any button that has ""ad"" on it no longer works when clicked unless we bypass the pihole.  

The pihole log shows it blocks five sites when I click on the play button and doesn't work.  If I whitelist all five of those sites and click it - it still does not work, but now it calls around 12-14 sites of more blocked domains.  If I toggle off entire lists I can get it to allow me to play the game, but it's WITH ads.  I can't seem to find how to block the ads but keep the game functional.",pihole,1649823777.0
3348,comment,-9,i4j7d2n,,"https://apps.apple.com/us/app/wordle/id1095569891

Edit why downvote a link that was asked for?  This sub is harsh lol",pihole,1649829871.0
3349,comment,-2,i4ixe3d,,The problem isn't really the ads - they are blocked properly  - but the apps no longer continue onwards as if the ad was skipped or unreachable.  I tried playing offline and it knew I was offline and the button is grayed out even.  It seems some apps like wordle are somehow knowing if you are actually watching the ads or not.  Drives me crazy.,pihole,1649823591.0
3350,comment,6,i4jl2rx,,"I think you meant port 53? 

25 is SMTP.",pihole,1649841133.0
3351,comment,6,i4jq0ig,,"> Your only option is it to force all DNS requests to your pihole.  

It's not OP's issue. OP's issue is that the app updated and refuse to work when apps are not loaded.  

OP is looking for a way to prevent ads from loading, while at the same time trick the app into thinking it did load, because in their pov ""Pihole broke the app"" when the app added a self-destruct option.",pihole,1649845241.0
3352,comment,2,i4k1heo,,"Some apps do have hardcoded DNS resolvers, but that's no OP's problem, as his PiHole is blocking them already.  Also it's port 53, not 25.",pihole,1649852541.0
3353,comment,14,i4jcvp5,,Sounds like the game’s designer figured out how to break the app if you block the ads.,pihole,1649834138.0
3354,comment,18,i4iyyzb,,Working as design. Ad blocker kind off block ads.,pihole,1649824456.0
3355,comment,6,i4jpei0,,">   If that's the case - why would it suddenly change?  

Because apps often auto-updates in the mobile world, and Pihole update adlists on sundays to play catch up?    

> now any button that has ""ad"" on it no longer works when clicked unless we bypass the pihole  

Yeah, and?  
You're saying that ""ad"" buttons stops working when ads are blocked. What do you expect from the app developer, that he would let you skip ads?  

> If I toggle off entire lists I can get it to allow me to play the game, but it's WITH ads. I can't seem to find how to block the ads but keep the game functional.  

Yeah... that's why the app blocks you.",pihole,1649844767.0
3356,comment,20,i4j7gb7,,"That app seems to have a bunch of tracking, so they probably block you from playing if they can’t track you.",pihole,1649829935.0
3357,comment,13,i4k1ccg,,That's not the official Wordle game... Use the New York Times site.  No ads and works fine.,pihole,1649852467.0
3358,comment,2,i4lkyrz,,"You got downvotes because your thread is about the Wordle app, but you WEREN'T using the wordle app. Despite the fact that a downvote means ""irrelevant"" according to the Redditquette.  

That's like asking what legal rights you have after unfair confiscation by a cop, and after hours of brainstorming you suddently remember it was not a cop but a regular robber.",pihole,1649875010.0
3359,comment,7,i4jptky,,"> but the apps no longer continue onwards as if the ad was skipped or unreachable

With Pihole, the ad is literally unreachable. Your issue is that the app doesn't consider ""unreachable"" as a skip anymore, so you should report the issue to Wordle.  
But the problem is that, of course, there's 99% chances that it's done on purpose, and they don't mind losing you if that means all users have ads.",pihole,1649845098.0
3360,comment,3,i4k3qcq,,Yes and some other apps as well sadly.  That was really the point of my post.  Only valid solution I’ve received here is to find a different app.,pihole,1649853702.0
3361,comment,3,i4jxm2c,,"It’s a feature, not a bug!",pihole,1649850380.0
3362,comment,-18,i4j0t7n,,"uhm how do you consider this design?  It is blocking the games as well since it is blocking the ads... previously clicking on the same buttons would flash black (play and skip the ad) and then the game would resume.  The current problem is the buttons do nothing, the game nor ad continues.  That is exactly opposite of what the pihole is designed for... :/

Edit: Sorry guys - I see all the down votes and get it - I was hoping that pihole, being an ad blocking product, would have a more helpful forum in solving the issue - and took bluntness as unkindness which is my own fault.  I realize this is a very specific case involving an invasive app which collects far too much data to be healthy.  I will remove the app and play one that doesn't penalize the user for owning a pihole that blocks porn too.  :)

Sorry if I rubbed anyone the wrong way - I work in IT and hate it when people ask for the impossible  - so I get it.  I guess I just hoped that the community was already aware of apps doing this and have a way to trick apps into still working but that's outside the scope of pihole and can honestly be anything depending on the end of ad video response, etc.",pihole,1649825506.0
3363,comment,-7,i4j7mae,,It was one that was easy to reproduce and my whole family had the same issue… there are a few of my younger kids’ games that do it too… such a shame.,pihole,1649830057.0
3364,comment,-3,i4k39o6,,Thanks.  Moving on now.,pihole,1649853467.0
3365,comment,2,i4lm94w,,Is there an official iOS app store app?  I thought the official one was a website and bought by NYTimes... I apologize for being misleading - that's not my intent - the app is named Wordle - I did not name it.  It is the top result in the app store search.  ¯\\\\\_(ツ)\_/¯ sorry...,pihole,1649875504.0
3366,comment,1,i4kcfrr,,"Just start one starring the app and see if they don't care eventually, it's free.",pihole,1649857742.0
3367,comment,1,i4kj8ol,,Yep. That’s about all you can really do.,pihole,1649860548.0
3368,comment,31,i4j5njg,,"This isn't a pihole problem. The developers probably made this change so that you cannot skip the ads. I mean, they want to get paid one way or the other.",pihole,1649828669.0
3369,comment,16,i4jpi8d,,"> uhm how do you consider this design?  It is blocking the games as well since it is blocking the ads  

Pihole doesn't block the game. The game blocks itself if you block ads, which I would expect from an app with an adblocker-blocker.  

> That is exactly opposite of what the pihole is designed for... :/  

Pihole is designed to block ads. Providing an ad-free experience is the burden of the website/app developer, and they clearly tells you that they won't tolerate your adfree tricks anymore.  
If you MUST load ads to start the game, obviously Pihole will block ads anyway. You told it to block ads and it's blocking ads.  

If, as the user, you decide the ads are necessary, then it's your choice to accept those ads. The issue is between you as the user and Worldle as the developer.",pihole,1649844850.0
3370,comment,7,i4joyy8,,It’s design to block ads and it’s doing so. Most likely some tracking is playing chicken with you data. You don’t get to play unless they get your data.  Own you have a deadlock.,pihole,1649844418.0
3371,comment,5,i4jysun,,"> The current problem is the buttons do nothing, the game nor ad continues. That is exactly opposite of what the pihole is designed for... :/

It's relatively trivial for an app designer to include some programming logic that basically says ""If the ad doesn't display properly, then don't load the game."" It's done to discourage people from using ad-blocking.",pihole,1649851073.0
3372,comment,2,i4k18qc,,"I have PiHole setup and there are no ads, but Wordle works just fine.  You might just have some overly-aggressive block lists.",pihole,1649852415.0
3373,comment,5,i4jcmmt,,"I have a fresh install with default repo; game is working for me on iPhone. No ads are showing

Check to see what’s being blocked from your device or disable other repos.",pihole,1649833931.0
3374,comment,1,i4p5su8,,"> Is there an official iOS app store app?  

Correct. As a result, people [decided to call ""Wordle App"" the shortcut to Wordle](https://www.macworld.com/article/589410/how-to-wordle-app-iphone-ipad.html), so it'll end full circle like how people no longer know what is intended when a random person says ""VPN"".  

> I thought the official one was a website and bought by NYTimes...  

Which kinda prove that isn't limited to iOS apps : websites too can stop working when ads are disabled.  
The downvoters assumed you were talking about the Wordle Webapp",pihole,1649943317.0
3375,comment,1,i4k21gw,,Kindly share your lists?,pihole,1649852835.0
3376,comment,2,i4k44zd,,"Strange - I only added a few porn repos - I guess there may be some shared communality between porn and ad sites.

Edit: Thanks for this information - gives me a direction to look into",pihole,1649853903.0
3377,comment,4,i4kgiop,,"Turns out it's because you're using some sketchy third party Wordle app, not the official New York Times website like most people.",pihole,1649859456.0
3378,comment,0,i4kqniy,,"I have the website I play too - but my kids searched for on the app store and we liked the ability to play endlessly since one puzzle wasn't enough per day I guess.  I guess if you search ""wordle"" it is the top result and also advertised on the app store... looking at the data collection - yeah that's sad, but pretty typical for free apps that make it higher in the app store.  It does have 294 thousand reviews and still above a 4 star review, etc...   


I have now found wordi which has a decent interface and the option of sharing a specific puzzle with your friends.  So that's cool.",pihole,1649863464.0
3379,post,4,u247kx,How do sites that block usage if you are using ad blocker in browser respond to pi hole?,"I'm very interested in network wide ad blocking and privacy which led me to pi hole. That said, am I going to end up having to white list sites that don't allow browsing with an ad blocker enabled or is pi hole a miracle cure? 

Sorry if this has been answered, I couldn't figure out how to ask google for the answer.",pihole,1649783727.0
3380,comment,8,i4gdgdx,,"Taking a slightly different approach to the answer:

Very likely, you will want to keep a browser based ad-blocker in addition to pihole.  Reason:  many sites (ex. youtube) serve ads in a way that are very difficult or impossible to block via a DNS based blocker.  In that case, something like uBlock is the path to block.",pihole,1649784737.0
3381,comment,3,i4ggqsr,,"I don't get a lot of the ""disable ad blocker"" warnings that can't be bypassed so I decide just how bad I want to look at the blocked site. - Usually not bad enough.

You can quickly disable pi-hole to get to a blocking site but that lets other ads through too. 

You can whitelist the problem site and the required ad sites either network wide or just for specific clients using the group features in pi-hole. Probably the best route.",pihole,1649785956.0
3382,comment,2,i4h4gds,,"In my experience, most ""no ad blockers allowed"" sites dont know about PiHole.",pihole,1649794896.0
3383,comment,2,i4gbbqi,,Pihole stops the initial DNS request therefore if the website in question is blocked by DNS the website can't complain about it being blocked.,pihole,1649783956.0
3384,comment,1,i4ievpy,,"You can often block ""disable adblockers"" notice using adblockers",pihole,1649814769.0
3385,comment,1,i4jmtpx,,"> sites that don't allow browsing with an ad blocker enabled or is pi hole a miracle cure?  

Impossible to predict as it's site-specific, but no it won't act as a miracle.  
Pihole prevents ad providers from being located on the internet, and as a result ads don't load.  
If the main content contains a script triggered to run if the adprovider is down, Pihole won't be able to do anything against it.  

> That said, am I going to end up having to white list  

Contrast with a client adblocker that has control over the browser and can block whatever they can *including the blocking check*  
Use Pihole to optimize loading and provide a first layer of defense, and install ""real"" adblockers on clients who can. Then, whitelist clients who can't install adblockers.",pihole,1649842663.0
3386,comment,2,i4gfz2t,,Do you also use Scripsafe and Privacy Badger?,pihole,1649785673.0
3387,comment,1,i4gpxvg,,How can I allow one host/IP address to use PiHole but avoid all the and blocking and black lists?,pihole,1649789416.0
3388,comment,1,i4jn2lq,,"In my experience, that means they assume it's under your control, even if you're not the network admin.  

A few websites that my wife needed instructed to turn off the adblocker completely, which is obviously not acceptable to her. And OF COURSE no official list of domains to whitelist...",pihole,1649842870.0
3389,comment,1,i4hhk9m,,"Not true. I've had numerous sites complain that I'm not allowing adds. 

It's the site that's not blocked that's attempting to load the ads on a site that's blocked that complains.",pihole,1649799866.0
3390,comment,1,i4jojin,,"> Pihole stops the initial DNS request therefore if the website in question is blocked by DNS the website can't complain about it being blocked.  

That's totally disreguarding how modern websites works, and the entire reason why Pihole works nowadays : websites give ads loaded from a third party.  
If the website wasn't loaded at all, you wouldn't visit it, true.  

But what the website can do is annoy you because the ""ad provider is down"".",pihole,1649844077.0
3391,comment,2,i4h3ojp,,"Privacy badger, Disconnect, Facebook Container, DuckDuckGo Privacy Essentials, ClearURLS 

  :)",pihole,1649794611.0
3392,comment,1,i4gwqd6,,"This is the answer. The website loads a script that detects your ad-blocker. If detected, it pops up a window complaining about ad-blocking.

If the script is served from a site that Pi-hole allows to pass (like the main website), then Pi-hole won't stop this. Scriptsafe allows you to allow or block individual scripts from running. If the site can't run the ad-blocker-detector script, then you're good.",pihole,1649792016.0
3393,comment,2,i4hgfz2,,"Click Group Management

Click Groups - add a Group

Click Clients - add your client to a group

Click Domains - add any whitelist entries that group of clients needs

or

Click Ad Lists - and customize the lists that client group will use

&#x200B;

The pi-hole instructions have a lot more detail on all of this.",pihole,1649799432.0
3394,comment,1,i4j5ca9,,Do you have examples websites of that? I'd like to investigate further on that as the only time I've had that happen is when I'm running an ad blocker extension in my browser.,pihole,1649828452.0
3395,comment,1,i4jrpbl,,"dayuuummm

Brother be doin' all sorts of clicks when he goes to a new website!",pihole,1649846509.0
3396,comment,1,i4jarny,,"So if I add the ip address and then under group assignment selct none then it should work :D  
will try it now",pihole,1649832450.0
3397,comment,1,i4jbdvb,,"Works :D  
thanks again!",pihole,1649832936.0
3398,comment,1,i4jop4w,,"Not really a website, but Aternos (free Minecraft hosting) admin interface had that back in 2020 and making an artificial wait to ask for disabling the adblocker. I was never able to determine the domains they use, so I gave up and hosted elsewhere.",pihole,1649844201.0
3399,comment,1,i4jy83e,,"On hand? Nope. As I find them, I'll put them in here.",pihole,1649850740.0
3400,comment,1,i4kldnr,,"Actually, not at all.  NoScript is the one that tends to require you to allow individual resources :)",pihole,1649861387.0
3401,comment,1,i4kotrs,,"Well, privacy badger requires me to click to disable, too.
You think I can do those other ones and have the type of protection safescript provides?",pihole,1649862755.0
3402,comment,2,i4m42en,,"Once you set the blocked cookies on privacy badger once, to set them to ""yellow"" from ""red"" the site will typically load fine after (and ongoing).

Turning off scripts altogether is definitely safer, but way more invasive and at some point I found it overbearing to constantly spend time enabling things to make sites work.",pihole,1649882704.0
3403,comment,1,i4onvf6,,"Ok yea, it is kind of a pain.",pihole,1649933449.0
3404,post,2,u23uzx,PiHole long term query log doesn't show resolved names.,"Hi,

I've asked this before, with no reply but I'm hoping someone may know the answer.  My pihole hasn't shown resolved names in the long term query log for several months.  I believe it happened post an update but hard to remember now.  The live query log does show the resolved names and I can't see any issues anywhere else.

Would anyone have any thoughts please?

thanks",pihole,1649782835.0
3405,comment,2,i4hcr7j,,"if the data was captured before with IP adresses instead of host names, it will remain in the long term data log as such.  
So enabling conditional forwarding to resolv hostnames do not convert previously logged data.",pihole,1649797999.0
3406,comment,1,i4m22yh,,"Thank you.  It’s any and all data in there, even if I clear it unfortunately.",pihole,1649881915.0
3407,comment,2,i4mkekp,,"I checked my long term data and to my amazement there are only IPs too. So I remembered wrong.  
I searched a little bit and found this thread  


[https://discourse.pi-hole.net/t/top-list-showing-ip-vs-hostname/9616](https://discourse.pi-hole.net/t/top-list-showing-ip-vs-hostname/9616)  


And this makes totaly sense to me:

>We only store IP addresses in the database. We don't map hostnames to IP  
 addresses as it is not clear if the device seen 3/4 year ago ending in   
.5 is the same host that it is now",pihole,1649889265.0
3408,comment,2,i4n8sym,,"Wow, thank you.  I’m still so so sure I used to see hostnames in there, but clearly I’m wrong.  I really appreciate you helping.  Thanks",pihole,1649899969.0
3409,post,3,u235iy,question about PiHole and work/Cisco VPNs,"When I connect to a work VPN it should overide DNS and just work as intended by workplace policy right?

I sometimes get issues when DNS is set to PiHole... But also when set to cloudflare or Google. The work laptop is in its own vlan and I can manually set the DNS for that vlan. 

If I bypass the router the PiHole is on and connect directly to the main router I don't seem to have that issue (so far as I can tell). 

My issue is that WSL with Ubuntu give me connectivity errors when connected to the router that has the pi attached to it wether it uses the PiHole or not",pihole,1649781015.0
3410,comment,1,i4gd5bv,,"It depends (like so many IT things).

If the VPN allows split tunneling, then no, some apps may be directed through the VPN.  This could be useful for conferencing apps for instance.  

Otherwise, if the VPN does NOT allow split tunneling, you're correct.

Just one quick reference on split tunneling in case you're interested

https://www.fortinet.com/resources/cyberglossary/vpn-split-tunneling",pihole,1649784623.0
3411,comment,1,i4h4rva,,Probably split tunneling. If this is a dedicated workstation then it might be best to disable blocking for this machine all together to avoid any possible issues,pihole,1649795011.0
3412,comment,1,i4gh5ah,,I completely forgot about split tunneling. though i know for WSL it neets to route using the VPN so that might not be the issue but still related. Thanks :),pihole,1649786105.0
3413,comment,1,i4jsl3i,,"Personally, I gave specific DHCP settings to the work computer to direct DNS queries to Pihole directly, to avoid getting meaningless stats (and avoiding potential troubles about ""unauthorized logs"")",pihole,1649847135.0
3414,comment,1,i4j84g0,,WSL is an abomination that shouldn't be.,pihole,1649830432.0
3415,comment,1,i4jafnc,,I haven't used it enough to comment but it's necesary for the job so i can't complaint about it lol,pihole,1649832192.0
3416,post,2,u22stf,dnsmasq issue after upgrading pihole,"I updated my pihole yesterday and now I am getting a dnsmasq warning that ""no address range available for DHCP request vial wlan0.   I am using the pihole as the DHCP server.  And nothing has changed  other than the update.  How can I fix this?",pihole,1649780081.0
3417,comment,1,i4g4ipe,,Did you read the documentation link below the warning in the diagnosis log?,pihole,1649781432.0
3418,comment,1,i4gae99,,I guess not.,pihole,1649783612.0
3419,comment,1,i4gpexu,,What’s the fix?  URL please.,pihole,1649789215.0
3420,comment,1,i4gqjgr,,https://docs.pi-hole.net/ftldns/dnsmasq_warn/,pihole,1649789644.0
3421,comment,1,i4hoany,,Thanks. pi-hole's dnsmasq errors are better than then Kelley's dnsmasq site!!,pihole,1649803330.0
3422,comment,1,i4jnajq,,I like how the page briefly describes the issue behind each error. Is there a detailed page that goes into how to go about changing settings (or things to look at) to fix the error?,pihole,1649843053.0
3423,post,6,u22m0a,Diagnosis Alerts - Delete all,"Is there a way, or can this be added, to delete all alerts in Pi-Hole. If the internet goes down the dnsmasq warnings go through the roof. I now have 548 alerts to clear, one at a time it seems?",pihole,1649779587.0
3424,comment,4,i4g4dzy,,"`pihole restartdns`

This will clear all the alerts.",pihole,1649781383.0
3425,comment,1,i4gr0zs,,"Nice one, thanks!",pihole,1649789828.0
3426,post,4,u22e9q,Ignoring query from non-local network 169.254.47.201 (logged only once),"I am sure my pi is behind my router and port 53 is not accessable. After some googling, it seems thata
 169.254.x.x is related to windows devices that dont have a IP. My pi is the DHCP. So should I worry about it? Why doesnt it have a IP? And how should I make it never happen again? Well obviously setting a static IP for the device would ""solve"" it but that isnt what I want. Other than that I dont even know which device is the culprit so thats not possible.

Edit: I dug through the logs. It seems to me that a windows PC just started and dont have a IP. First I saw the warning, then followed by a DHCP 4-clause handshake. I believe its that windows PC who is using that address as it was so desperate to phone home, to the point that it forgot that it has not asked DHCP for an IP.",pihole,1649779046.0
3427,comment,8,i4gad23,,169.254.. is an APIPA address.   This is the result of the client not being able to contact a DHCP server to obtain a network IP.,pihole,1649783599.0
3428,comment,1,i4g34h0,,"I would just ignore it.

One of two things will happen. First, you could find a device which can't access the internet because it's not receiving DHCP, in which case you have more information. Or, maybe it was a temporary DHCP failure, and it won't happen again.

Either way is fine.",pihole,1649780922.0
3429,comment,1,i4g0xbk,,Does ifconfig -a give any insight?,pihole,1649780108.0
3430,comment,1,i4gba2p,,https://packetlife.net/blog/2008/sep/24/169-254-0-0-addresses-explained/,pihole,1649783940.0
3431,comment,1,i4gckvg,,"On the pi, try using the arp command:

    arp -a <address>

It may no longer remain in the arp cache, but if it is, the MAC address will be returned, allowing you to further track the device.

https://wiki.wireshark.org/APIPA",pihole,1649784417.0
3432,comment,0,i4g2kqp,,Maybe try using a network scanner like FING to narrow down what the device could be? Fing will let you know what has an ipaddress so you could work it by process of elimination,pihole,1649780719.0
3433,comment,2,i4jazk7,,"This is the correct answer (apart from the typo in ""254"").",pihole,1649832621.0
3434,comment,1,i4gagae,,"Its the third one. The PC was so desperate to connect, to the point that it forgot it havent asked DHCP for an IP.",pihole,1649783633.0
3435,comment,1,i4ga7zv,,Nope. See my latest edit.,pihole,1649783547.0
3436,comment,1,i4gabwu,,"I dont think that would work, as I havent recieved any more packets from that IP since.",pihole,1649783588.0
3437,comment,1,i4js8cm,,Thanks for the catch - corrected.,pihole,1649846888.0
3438,post,46,u21s8f,"What's your load, volume and Pi?","Trying to get a feel for how volume affects load.

With my setup:

* load: 0.08
* 49k requests / 24h
* Pi 3B+

What about you?",pihole,1649777409.0
3439,comment,14,i4fzb41,,"Pi-Hole is absolutely not resource intensive. 

Unfortunately I’ve rebooted few hours ago anyway:

https://i.imgur.com/lUMqPlV.jpg",pihole,1649779501.0
3440,comment,58,i4fw700,,"DNS traffic volume has virtually no effect on CPU load. CPU load is typically driven by resource intensive processes such as updating gravity, system updates or other processes running on the Pi.",pihole,1649778327.0
3441,comment,6,i4hfu4r,,"With a zillion different HW configs and environments out there, it makes little sense to compare mine with yours. You're better off monitoring your own install over time and getting a feel for the ebb and flow of the metrics.",pihole,1649799203.0
3442,comment,5,i4g3me0,,"My DNS blocks went from 15% to about 70% once a couple of roku devices were added. 

    Top Clients (blocked only)

    RokuUltra	24546	
    RokuUltra2	15327",pihole,1649781103.0
3443,comment,8,i4fvtqn,,"Load: 0.18

Requests: 65.7k

Pi 0W",pihole,1649778187.0
3444,comment,3,i4fuzk4,,"load: 0.05  

requests: between 60k and 100k/24 hours  

pi: an old HP ProBook from like 2012 or 2013 running ubuntu",pihole,1649777870.0
3445,comment,3,i4fwj7l,,"https://imgur.com/a/aiLd6lf

Raspberry Pi 4B",pihole,1649778455.0
3446,comment,3,i4gx27m,,"load 0

20k

Pi 02w running barebones ubuntu",pihole,1649792142.0
3447,comment,2,i4gmb3d,,"* load 0.01 0.03 0.05
* memory usage 16%
* 30k queries

Pi 0 W",pihole,1649788042.0
3448,comment,1,i4fvn7l,,"* load 0.22 0.07 0.02
* 120k requests (32 clients)
*  Pi 4 (1gig)",pihole,1649778119.0
3449,comment,0,i4g3khv,,"Load:  1.93  1.87

564 Requests / 24 h

4B

&#x200B;

Edit: It shuld have nothing to do with ity it's like how if Brazzers uploads 2 pornos a week, it shouldn't affect how much xou watch, unless thery are some special ones, and even that would only affect it while happening.",pihole,1649781084.0
3450,comment,1,i4fwyz9,,"* Load:  0.23  0.23  0.25
* Memory usage:  27.6 %
* Temp: 40.9 °C
* 25k to 35k request per 24h on 14 devices
* Pi 4B 2GB

I also connect it to my TV as a browser. I think its time to go 64-bit",pihole,1649778616.0
3451,comment,1,i4g09eq,,"Load: 0.03 0.03 0

Memory Usage: 5.1%

Temp: 30.7C",pihole,1649779859.0
3452,comment,1,i4g40po,,"*  Load:  0.22  0.21  0.19
* 44k requests / 24h
* Pi 1 (256 MB RAM, 40-50% memory usage)",pihole,1649781250.0
3453,comment,1,i4g54y7,,"primary

pi4b

0.08

27,338

secondary

pi4b

0.1

7,309",pihole,1649781663.0
3454,comment,1,i4g5563,,"Load:  0.19  0.17  0.26

Requests: 100,130

Pi 0W",pihole,1649781665.0
3455,comment,1,i4g6wzs,,"Load: about 5%

Requests: 60k/24h

Pi 4

[Pi-hole Remote](https://apps.apple.com/nl/app/pi-hole-remote/id1515445551) on iOS: https://imgur.com/a/GDbKRJi/",pihole,1649782314.0
3456,comment,1,i4g7hzq,,"* RPi2
* Load: ~0.20
* Memory: ~20%
* ~20 Devices
* ~40-50K requests / 24 hr
* ~1.5M Domains on Adlists
* ~40% Queries Blocked",pihole,1649782530.0
3457,comment,1,i4g9b7i,,"Interesting, my busier RPi has a lower avg load.

\#Primary

\- load: 0.18

\- 116K / 24hr

\- RPi4b+

\#Secondary

\- load: 0.35

\- 11.3K queries / 24hr

\- RPi4b+",pihole,1649783204.0
3458,comment,1,i4gchv7,,"Load: 0.01
47k / 24h
HP EliteDesk mini, with a 6th gen i5 in it",pihole,1649784386.0
3459,comment,1,i4gcvqq,,"-	Load: 0.08
-	2.1 M requests / 24h
-	1 core of an AMD RX-427BB

Not a RPi but a fairly low power CPU from a thin client, hopefully that gives some idea Pi-hole is really not resource intensive :)",pihole,1649784526.0
3460,comment,1,i4gd068,,"* load: 0.12
* 110K requests / 24h
* Pi 3B+

The Pi also has the 'official' 7"" touchscreen display attached and the OS has the full desktop installed/booted.   I typically run it with the European Space Agency's live ISS tracking displayed, as it makes for a ""useful/interesting"" desk clock.",pihole,1649784571.0
3461,comment,1,i4gkx9o,,"Pi zero W

Load 0.27 0.32 0.31

Memory Usage: 17.3%

Total Queries: 42,827 (55 clients)",pihole,1649787526.0
3462,comment,1,i4gt79b,,"Here is mine 

[https://i.imgur.com/zu7rMht.jpeg](https://i.imgur.com/zu7rMht.jpeg)

Note: RPi 2 B+ running along with Pi-hole, I've running crowdsec and docker based wiregaurd , fail2ban, traefik and others",pihole,1649790675.0
3463,comment,1,i4gu3ju,,"35k req, pi model B (the original v1 pi B) .11 load 31C temp",pihole,1649791014.0
3464,comment,1,i4gumbg,,"  
 Load:  0.15  0.3  0.33  
 Memory usage:  22.7 %

at the moment 13clients

pi zero w",pihole,1649791210.0
3465,comment,1,i4h26z8,,"Load: ~5%*
Requests: ~80k / 24h
RAM: ~80MB

Running a LXC container with 1 Core @ 1.5GHz and max of 256MB Ram.

Telegraf and php are using most of the system resources. Pihole-FTL is using around 0.05%.",pihole,1649794055.0
3466,comment,1,i4hrzfv,,"23  0.18  0.12 
 Mem 40.5 % 
 Temp: 43.3 °C

OG pi",pihole,1649804952.0
3467,comment,1,i4hwfct,,"4B 2GB

Here's my dashboard: https://i.imgur.com/0nC3Kuv.png

Using mostly just this list: https://dbl.oisd.nl/

I have a 2^nd 4B 2GB as a secondary, but that sees about 40% of the traffic as the primary and only blocks about 0.5% using the same lists.",pihole,1649806866.0
3468,comment,1,i4i1j2a,,"Pi 2

105k requests.   

55 clients.

39k blocked.

1 million blocked domains.

0.13% cpu


Diet Pi",pihole,1649809072.0
3469,comment,1,i4i3g6g,,"Load: 0.1  0.1  0.09  
  
Requests: 80,000+

  
Blocked: 38,000+

&#x200B;

Blacklist: 238,000+

  
Pi 0W

&#x200B;

Device only for Pihole, worth every penny spent.",pihole,1649809899.0
3470,comment,1,i4i8q0n,,"Status  Active
Load:  0.32  0.11  0.03
Memory usage:  35.2 %
Temp: 46.2 °C

34k+ requests, 9k+ blocked, 20 clients.

Pi3B that's running other stuff too",pihole,1649812168.0
3471,comment,1,i4im4ko,,"63%
41,140 total
25, 920 blocked
Only blocking 4 devices of 20 currently as I play with prefs",pihole,1649817953.0
3472,comment,1,i4j25pj,,"Well i just made 2 piholes since i have a 2nd pi4 4gb sitting around and figured why not just have 2 pi4 4gb setups running a dual DNS sync.

 So my first Pihole stats are:
 ACTIVE
 LOAD:  0.04  0.01  0
 MEMORY USAGE:  5.2 %
 TEMP: 29.7 °C

 My 2nd Pi hole Stats are:
 ACTIVE
 LOAD:  0  0  0
 MEMORY USAGE:  3.4 %
 TEMP: 31.6 °C

The first pihole has a bit more activity as a device, in terms of total queries, queries blocked, percentage blocked. 

but not by much. Id say its about 1% moe blocked about about 2,000 or so queries blocked.

Aside from that, there's no difference at all imho. Their both synched and running the same list and are more or less an exact copy of each other and i just wanted a backup for the original pihole just for shits and giggles and having an extra pi4 4gb simply laying around doing nothing at all i might as well put it to some sort of use intead of it being a paperweight.",pihole,1649826336.0
3473,comment,1,i4jq4yj,,Pi0W with a VPN and a DDNS updater : load of 0.11 for 15k requests (half blocked),pihole,1649845337.0
3474,comment,1,i4kauo3,,"Pi 4b, 2G

Load:  0.52  0.26  0.14  
Memory usage:  47.6 %  
Temp: 53.1 °C

21 Clients, 3.210.469 Domains on Adlists

Nope, nothing wrong, just some docker container additional to Pihole.

    cr.hotio.dev/hotio/cloudflareddns 
    selfhostedpro/yacht
    oznu/homebridge
    deconzcommunity/deconz
    lscr.io/linuxserver/heimdall
    ghcr.io/linuxserver/swag
    portainer/portainer-ce

&#x200B;

Bottleneck is the Micro SD",pihole,1649857044.0
3475,comment,1,i4umnrv,,"Load: 0,2.

Memory: \~20%.

Requests: \~9K.

RPi B, yes thats a single 700MHz core with 256MB RAM.

For my RPi the speed of the SD-card affects the load, not sure if that is the case for newer boards.",pihole,1650040926.0
3476,comment,0,i4gssoq,,"Load: 1.5%

60K requests /24 

Pi 3B+ (pihole and unbound on Raspbian)",pihole,1649790516.0
3477,comment,3,i4gad2o,,Cool display!,pihole,1649783599.0
3478,comment,1,i4hbr0g,,How did you get that display working?,pihole,1649797611.0
3479,comment,1,i4jom14,,[deleted],pihole,1649844133.0
3480,comment,1,i4u94ca,,what's the stand you used for the display?,pihole,1650035397.0
3481,comment,-2,i4ij8rt,,"jokes on you, I had a DNS loop and made my shit freeze.",pihole,1649816660.0
3482,comment,2,i4hwiy8,,This. I run pihole in a docker container. The hardware underneath could literally be anything. It's also highly dependent on the usage profile. A couple of rokus can drastically change the profile.,pihole,1649806910.0
3483,comment,1,i4i3psw,,"Between amazon trackers, wyze cams, and social media trackers I maxxed at 65% blocked. I hear you. Been working to get that down (now 45% by replacing wyze with an nvr setup etc)",pihole,1649810013.0
3484,comment,1,i4fzbzb,,"I've got my pi hole running on first gen raspberry pi on diet pi os. Runs without issue, barely uses any power.",pihole,1649779509.0
3485,comment,1,i4fzmmy,,Thanks. I noticed your adlist is larger than the default one. What did you add?,pihole,1649779620.0
3486,comment,1,i4i3s5n,,"overkill, lol. (pi4)",pihole,1649810041.0
3487,comment,1,i4g9oxd,,[deleted],pihole,1649783349.0
3488,comment,2,i4gs6xa,,"Wait.. Is that 2.1 *million* requests?  
I thought anything above 100k was a lot.

How!?",pihole,1649790280.0
3489,comment,0,i4i4k5n,,"Load of 1.5 and 1.5% are not synonymous btw. 1=100% utilization of a core. if you have dual core 2.0 is max, quad is 4.0 etc.  


so a quadcore pi3b at load of 1.5 is actually 37.5% utilization",pihole,1649810382.0
3490,comment,5,i4hddav,,What do you mean?! I attached it and used the script from Pimoroni (although I had a lot of trouble with Raspbian 11… here’s more info: http://giuliomagnifico.blog/tutorial/2022/04/10/fix-Pimoroni-hyperpixel-RaspberryPI-11-bullseye.html,pihole,1649798236.0
3491,comment,1,i4jr7uo,,I’m waiting still a bit of time to activate it. Or maybe is the right time?,pihole,1649846152.0
3492,comment,3,i4fzeho,,why's this as a reply to me lmao?,pihole,1649779535.0
3493,comment,3,i4g4nvc,,"https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
https://s3.amazonaws.com/lists.disconnect.me/simple_tracking.txt
https://s3.amazonaws.com/lists.disconnect.me/simple_ad.txt",pihole,1649781485.0
3494,comment,2,i4ihw5g,,Faster LAN port and first to USB boot (I don’t use an SD card).,pihole,1649816066.0
3495,comment,2,i4g9zt8,,5% load 😄 you can convert the numbers to percentages haha so for load number it would be something like 0.2,pihole,1649783462.0
3496,comment,-1,i4i6air,,"I am aware, I am a Sr Linux Admin/Team Lead with around 2K systems.

1.5% is what it is. I use percents because everyone understands percents.",pihole,1649811129.0
3497,comment,2,i4hi9dm,,"Is that an ""always on"" screen, or is there a way to turn it off? E.g. at night to reduce light.",pihole,1649800140.0
3498,comment,2,i4ljrnw,,[deleted],pihole,1649874559.0
3499,comment,1,i4g758f,,Because by running on pihole on an old laptop you're using too much electricity.,pihole,1649782399.0
3500,comment,1,i4gde6m,,"You just had to be different, didntya? ;)",pihole,1649784714.0
3501,comment,1,i4ihr2f,,"And I am the queen of England governing 56M population, what I said isn't any less valid.",pihole,1649816003.0
3502,comment,4,i4hvz2n,,No I have a script in cron and SSH shortcut (in iOS ) that turn on and off it http://giuliomagnifico.blog/networking/2020/01/02/nerdy-things-made-nicer.html,pihole,1649806671.0
3503,comment,1,i4hnmzk,,I guess you can set the backlight intensity in `/sys/class/backlight/rpi_backlight/brightness`,pihole,1649803031.0
3504,comment,1,i4nrjb7,,"Ok thanks, I’ll search more info.",pihole,1649909045.0
3505,comment,4,i4ga48j,,yeah well I'm broke and don't pay the electricity bill but yes fair enough,pihole,1649783508.0
3506,comment,-2,i4iijw1,,Except the part where you tried to correct me. Don’t get pissy because you were wrong in your assumption of my knowledge.,pihole,1649816353.0
3507,comment,1,i4jr4nq,,With the old driver you can’t. I haven’t tried on Bullseye and Alpha driver.,pihole,1649846088.0
3508,comment,3,i4im1k9,,Let's not let this degenerate into further squabbling.,pihole,1649817916.0
3509,comment,1,i4lbeb0,,"Are you sure? Unfortunately I can not test this, but I found tutorials several years old explaining it that way.",pihole,1649871381.0
3510,post,1,u1znua,Pulling Pihole.log query into Wireshark,"On macOS, I am not able to setup properly to pull searchable data. Obviously, I am not familar with wireshark command arg here.

Do any of you know the correct arg/command?

I know I can pull live data via mac terminal with `pihole -t` successfully.

&#x200B;

https://preview.redd.it/fjrv0tvds3t81.png?width=1224&format=png&auto=webp&s=6ef86bcccb11a7b2cd6c285d3745efcfd4ce307d",pihole,1649771637.0
3511,comment,2,i4fjxw9,,"`pihole -t` only shows you the last lines of pihole.log but it's not the command for capture any packets.

On the Pi you run `tpcdump` to capture packets. This is the default value for the remote capture command in wireshark, so you can leave the field empty. But you have to define an interface, most likely eth0, if your Pi is connected via ethernet.

see also: [https://blog-helmutkarger-de.translate.goog/raspberry-pi-vpn-teil-10-datenanalyse-mit-wireshark/?\_x\_tr\_sl=de&\_x\_tr\_tl=en&\_x\_tr\_hl=de&\_x\_tr\_pto=wapp](https://blog-helmutkarger-de.translate.goog/raspberry-pi-vpn-teil-10-datenanalyse-mit-wireshark/?_x_tr_sl=de&_x_tr_tl=en&_x_tr_hl=de&_x_tr_pto=wapp)",pihole,1649773561.0
3512,comment,3,i4fscl5,,"At the very least, you would want to exclude SSH traffic from the capture.

So, to get everything but SSH traffic, the command would be:

    tcpdump not port 22

If you get an error, it may need to be told which interface to use. You will need to include the interface switch. Something like:

    tcpdump -i eth0 not port 22",pihole,1649776874.0
3513,post,4,u1ubsx,local private web server with dynamic name,"I hope i formulated the title correct.

I use two rpi0 2w as primary and secoundary ad blockers with them pointed as DNS on my routers.
Dhcp is handeld by the router with only 2 avaiable address (everything has static addresses).

On the local network i have one local lab pi that i use primarly for hosting a local webbserver for learning how to build webpages (wan is blocked on router).
Insted of always having to use the static ip address in the web browser, would it be possible to configure it with a dynamic www.example.com address on the piholes instead?",pihole,1649752980.0
3514,comment,2,i4em8wl,,"Yes ofc. You mean you want to, let's say, type pi.lab on a device on your local network and it lands on a page hosted on the lab pi right? Just go to admin pages of your piholes and go to local DNS tab, then fill in the infomation.

But if the lab pi is also running pihole you have to edit the lighttpd conf too.

Source: am running a local (lan) weather station on my pi with pihole.",pihole,1649754606.0
3515,comment,1,i4emmnr,,"Exactly this, i also want to host a local weather station webpage that is only accessible via the lan.
Big thanks!",pihole,1649754923.0
3516,comment,2,i4emyue,,"No problem! You could also setup multiple pages. For example, I have pi.weather points to the weather page and pi.mirror mirroring sites that I want to arvhive. This is done by configs in lighttpd to change the web root if the URL is starting with X.",pihole,1649755198.0
3517,comment,1,i4jsrrl,,"Note that if you want standard domains, there's no tld reserved for home networks, but there's ""home.arpa""",pihole,1649847266.0
3518,post,33,u1ocjt,Ads still loading after pihole troubleshooting,"Having some issues with pi-hole & Tp-link router. I believe I have pihole set up correctly as it blocking some ads according to the logs, however a lot are still showing up. I have a tp link router and through the DCHP server settings the pihole is set as the only DNS, but like I mentioned, ads are still visible. Any suggestions?",pihole,1649730270.0
3519,comment,17,i4dn66i,,Did you mark the pihole primary *and* secondary DNS in the DHCP settings?,pihole,1649731271.0
3520,comment,8,i4do2km,,"Try [https://oisd.nl](https://oisd.nl)

However, please note you can't block YouTube ads with DNS filtering. You still need to use browser extension/addon.",pihole,1649731686.0
3521,comment,4,i4dpttl,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1649732505.0
3522,comment,2,i4g3tk4,,Did you check to see if Private DNS is enabled?,pihole,1649781177.0
3523,comment,1,i4dlteu,,Try this https://firebog.net/,pihole,1649730654.0
3524,comment,1,i4ezvds,,Are you sure you set the pi hole as the DNS server? I also have a tp link router and it will not allow me to specify a DNS server that is on the same subnet as itself. The solution is to have the pi hole run DHCP and turn it off at the router.,pihole,1649764229.0
3525,comment,1,i4ds6nv,,Could you try tcpdump -ni eth0 port 53 on pi hole server to make sure your client make dns request to pi hole. Some Os and browser configure itself with other public dns service to avoid blocking.,pihole,1649733660.0
3526,comment,1,i4e7iwi,,"Check if the devices which getting ads have an IPv6 address, if so you will need to add the IPv6 dns entry to your DHCP server as well",pihole,1649743134.0
3527,comment,1,i4frhyf,,Make sure your router has the pihole as both its IPv4 and IPv6 DNS. Make sure you have a v4 and v6 upstream set. Check that your adlists have the ad server you’re seeing in them… Beyond that some ads just can’t really be blocked.,pihole,1649776548.0
3528,comment,1,i4gchm0,,"Could be that your browser is getting its DNS from outside your network (bypassing pihole) I know Chrome on Android does this (IDK about iOS Chrome), as do Safari and Brave on iOS.",pihole,1649784383.0
3529,comment,7,i4f17g1,,"So I thought I read somewhere that the secondary DNS could be left blank, but this has actually solved the issue after implementing and rebooting the router. Thank you",pihole,1649764971.0
3530,comment,2,i4fyfui,,"With this in the adlist, my iPhone states there is no internet",pihole,1649779172.0
3531,comment,1,i4dr0rv,,I'm not sure I can check where it's coming from on my iPhone where I seem to be having the most issues. The % blocked is also extremely low even if I add a lot of lists which makes me feel like the configuration is wrong somewhere but I'm not certain,pihole,1649733083.0
3532,comment,1,i4f3ndh,,This is the current list I am using (all ad URLs),pihole,1649766262.0
3533,comment,2,i4f3tpo,,Yes under advanced>network>DHCP server I have set primary and secondary DNS server to the pihole,pihole,1649766350.0
3534,comment,1,i4f8cgv,,"I'll give it a shot - but currently I am receiving command not found when I try to enter ""tcpdump -ni eth0 port 53"". Even w/ Sudo or just entering ""tcpdump"", I get command not found. Do you have any additional details?",pihole,1649768545.0
3535,comment,1,i4f3pcf,,IPv6 is turned off at the router level,pihole,1649766289.0
3536,comment,1,i4gcqvv,,How would you recommend checking and forcing pihole to be the DNS?,pihole,1649784477.0
3537,comment,3,i4f39fz,,"Ah actually, it worked for a few minutes, but it looks like I'm back to square 1 here",pihole,1649766065.0
3538,comment,1,i4josy8,,"> So I thought I read somewhere that the secondary DNS could be left blank  

It's client specific.  
DHCP-provided DNS are a *recommendation*, and some clients will happily replace an empty resolver by their own hardcoded one.",pihole,1649844284.0
3539,comment,2,i4el6o7,,"Verify if the phone use ipv6 and/or try to enter the pihole as dns on the phone as well. 

I had problems in the begining with another brand of router where on pc ad was block, but not for Android. Had to block a specific port on the router that forced the gadgets to use my pihole instead.",pihole,1649753713.0
3540,comment,1,i4fe4s1,,"If this is happening on your phone, try turning off your cellular data as a test. If the problem goes away, your phone is trying to ""be smart"" by using the cellular data as a fallback for dns lookup failures. 

This used to be an issue for me on an Android. The solution was to put a blocker on the device, as well.",pihole,1649771122.0
3541,comment,0,i4f4o7h,,"And it lets you specify an IP that's on the same subnet? Doesn't give you an error? Weird, I must have a newer router than you. I've bought 2v different models of tp link in the past 3 years and they both give me that error. Maybe try running DHCP on your pi hole anyways?",pihole,1649766783.0
3542,comment,1,i4f8pc0,,">I'll give it a shot - but currently I am receiving command not found when I try to enter ""tcpdump -ni eth0 port 53"". Even w/ Sudo or just entering ""tcpdump"", I get command not found. Do you have any additional details?

I'm quite not sure which OS you install pihole. If debian then you can install tcpdump with ""apt get install tcpdump""",pihole,1649768713.0
3543,comment,1,i4gduy2,,"It might be the case that you can change your browser's internal DNS config, but it's very much dependent on your setup. What browser are you using and what platform are you on?",pihole,1649784888.0
3544,comment,1,i4hwtju,,"https://www.reddit.com/r/pihole/comments/blpl3k has a way. Basically, you tell the router to redirect port 53 requests to your pihole. It may border on intermediate/advanced networking, so proceed at your own risk",pihole,1649807039.0
3545,comment,2,i4f941a,,"I would recommend checking the setting on your devices, to see what DNS they say they are using.  It sounds like they are using your PiHole plus another DNS server.  

Also, if you change the DHCP setting on your router, it will have no effect on the clients until they renew their DHCP lease.  The easiest way to do that if you have a lot of devices is to reboot the router.

So if you added the PiHole IP in the secondary DNS box, the clients will not know that until they renew their DHCP lease.",pihole,1649768904.0
3546,comment,1,i4jowqt,,"> it worked for a few minutes

Clients can use resolver1 and resolver2 in the order of their choice.  
What probably happened is that your client asked to Pihole, got a 2s refusal, reasked in a loop until by chance it asked resolver2 instead and answered the real location with a longer TTL that ended in it's cache.  

Your client is 99% probably using Pihole + another resolver.",pihole,1649844367.0
3547,comment,1,i4f3li5,,"Confirmed that ipv6 is turned off on the router, and even when manually setting the phones DNS server to the pihole ads are still coming through",pihole,1649766235.0
3548,comment,1,i4fknm7,,"Turned off data, ads still loading",pihole,1649773849.0
3549,comment,2,i4f5wcf,,I've seen that error before for sure - but after looking into it I discovered I was setting the DNS in the wrong location. My router is an AX3000.,pihole,1649767384.0
3550,comment,2,i4f6tlz,,[deleted],pihole,1649767827.0
3551,comment,2,i4fhpg7,,I have rebooted the router and forced the phone to use the pihole dns via manual entry and I am still getting ads (in app),pihole,1649772651.0
3552,comment,1,i4f4a9p,,"Well does the pihole work for your computer?

You can try make a rule that block tcp/udp on port 53 for your phone on the router (if its possible) that would force it to use an alternative DNS where your router would point to the pihole.",pihole,1649766588.0
3553,comment,2,i4f7m87,,Ahhh you're probably right 👍,pihole,1649768201.0
3554,comment,2,i4fky0w,,"You can try the site below, to see what DNS servers you are using, on the device you access the page on.  If you are all setup properly, you should only see the DNS server/s that you have configured as your upstream in PiHole.  

If you see other servers, then something is misconfigured on the network side or the client.  A likely culprit could be some sort of ""DNS Privacy"" setting on the client.  I know I've had issues with that with the Android OS and with chrome itself having settings that cause them to ignore what DNS is pushed out via DHCP.

If you only see the expected DNS providers, then it's possible that you have an app using a hard coded DNS server.  If that is the case then you might need to setup something on your router to ensure all DNS traffic is directed to the PiHole.  Be aware though that DoH is nearly impossible to properly redirect.

https://www.dnsleaktest.com/results.html",pihole,1649773964.0
3555,comment,1,i4g7lzh,,"Ads in app?

Pihole can't blocks ads inside apps if they come from the same domain as the content, which they almost always do",pihole,1649782571.0
3556,comment,1,i4f7wou,,"I think it works on my computer, I have extensions for adblock on my machines as well but after pausing them and going to speedtest.net I don't get any ads.",pihole,1649768337.0
3557,post,14,u1jmef,Changing network IP range,"I use DHCP on my pihole. I've set my current IP range is `192.168.1.x` - `192.168.1.xx` as this is the default ip range based on my router's IP. I want to change it to a range to start with 10.x.x.x, can I just change the `From` and `To` ranges, under DHCP, to start with `10.x.x.x` and reboot my devices?

How will I know my routers gateway if I do this, as this is needes for the DHCP settings? Do I nees to change the routers IP first to a `10.x.x.x` IP and then change range, then restart all my devices?

If there is infomation or articles on how to do this, can you please link, or instruct me on how to do it (I know every router and network is slightly different, but bullets points will be fine)

Thank you",pihole,1649716363.0
3558,comment,4,i4ddn11,,"This’ll be a bit complicated to do as you can lock yourself out of stuff. 

You’ll want to change your routers IP last. Change the IP of all static devices like the pihole first. Anything on DHCP won’t be an issue. Then change the router. Then restart all the devices. When rebooting, all DHCP devices should pick up the new configuration.",pihole,1649727070.0
3559,comment,2,i4geb9l,,"**My experience -**

It did not start off well, I changed the the IP address range to start with `10.x.x.x` and then changed the IP of tbe pi and rebooted, loosing network access to the pi.

I then went and changed tbe IP of my router, but it didn't support a range starting with `10.x.x.x`!! I did a quick search to find out what ranges it did support and had to use `172.16.x.x`, which is probably more obscure and secure, but I still dont have access to my pi!

As I had no way to get a video output to change the IP locally on the pi, I had to reflash the SD card and re-install pihole. I also don't have a backup of my settings (so silly of me), so I had to add all my blocklists again. The pi now has an IP starting with `172.16.x.x`, making it alot easier to set a range for the DHCP settings.

**What I would do differently -**
1. Disable DHCP on the pi and reable it on the router
2. Change the pi to use DHCP to get an IP from the router
3. Change the IP of the router and reboot
4. Reboot the pi so it gets a new IP
5. Login to the web panel and setup the DHCP service on the pi
6. Reboot the router again to get all the devices to be assigned an IP from the pi

TL;DR - change the IP of the router first, then use the pi's new IP to setup DHCP with a new range.",pihole,1649785055.0
3560,comment,4,i4cxjl2,,"Yes. Your AP has to be on the same subnet.
Just wondering why are you doing it? What’s wrong with 192.168….?",pihole,1649719933.0
3561,comment,2,i4cr2im,,Unless you use your pi as an AP all ip’s on the same must be the subnet.,pihole,1649717141.0
3562,comment,1,i4ebe8w,,"What if, my Pi is the DHCP server?",pihole,1649745800.0
3563,comment,3,i4dihqt,,Not OP but 10.0.0.x is easier to type,pihole,1649729173.0
3564,comment,1,i4ebowj,,"Then you remove a step. You’ll still need to change the IP of all static devices to the desired IP range, doing the router last. You should be able to connect to the pi just fine without the router, if you are using the switch on the router or a stand alone switch. Changing the pihole IP should update the DHCP range automatically so that’s not really a concern. 

Just put some thought into what order you need to do it in so you can still access everything.",pihole,1649746026.0
3565,comment,1,i4ery0p,,"Yeah, ease of typing and changing for security/networking experience",pihole,1649759143.0
3566,comment,1,i4jp8fe,,"I really hope OP will never need to use a VPN, because corporate networks use 10.x.x.x or 172.16-31.x.x with the obvious assumption that VPN from home networks already use 192.168.x.x",pihole,1649844633.0
3567,comment,2,i4f4vhu,,Security through obscurity your a genius,pihole,1649766883.0
3568,comment,1,i4j4f6a,,ironic word choice,pihole,1649827830.0
3569,post,1,u1ic06,Pihole + Docker = my containers cannot resolve DNS?,"Hi Team,

I’ve found that when I point my DNS to Pihole (running in a docker container on Raspberry Pi) it breaks my other pi’s containers DNS resolution.

I found a solution here: [https://unix.stackexchange.com/questions/647996/docker-container-dns-not-working-with-pihole](https://unix.stackexchange.com/questions/647996/docker-container-dns-not-working-with-pihole) and tried to apply it however it doesn’t seem to work. I’ll be the first to admit I don’t really get how that solution fixes it either.

Have any of you found a workaround?

Cheers!

Edit / Update:

So I think I might have solved this. I noticed [here](https://docs.docker.com/network/bridge/) that docker lists that the default bridge network does not allow your containers to connect to each other by design. They strongly suggest creating your own network. 

So I created my bridged network (you can literally just go: docker network create my-net) and as per [here](https://docs.docker.com/compose/networking/) I then just chucked this in the bottom of my docker compose files - including my pihole -  at the same leveling as services (so all the way on the left). 

`networks:`   
`default:`   
`external:`  
`name: my-net` 

Bingo! Even though my DNS server is still [127.0.0.11](https://127.0.0.11) (dockers DNS) docker now correctly allows it to resolve DNS from my pihole. ",pihole,1649712991.0
3570,comment,2,i4cuts1,,"I spent my Saturday doing just this. I have hoobs running on a Pi4 and have pihole running in docker on the same pi. I decided to setup pihole as my DNS as my Google WiFi doesn’t propagate connected clients to pihole and only the WiFi router shows up on pihole. Hence I wanted to make pihole my DNS and let the Google WiFi just act as a proxy. 

Due to the way docker networking works, the pihole dns server cannot assign ips to connect clients. You need to enable host networking in docker. I did just that and yet for some reason, I wasn’t able to get dns to work. Gave up. I know this isn’t the answer you were looking for. But I couldn’t justify spending more time figuring out this thing.  

I’ll setup pihole as my primary on the pi and run hoobs and other stuff in docker. I felt that running my sole DNS resolver in a fragile container wasn’t worth it. Can’t have a flaky network.",pihole,1649718749.0
3571,comment,2,i4e7ctd,,Have you tried setting the dns of the other containers manually? I had issues too with dns resolution and I set the dns of the other containers to the subnet? of the bridge network. Something along the lines of 172.x.x.1. You can assign dns to a container in the compose file. I do however use my pihole as DHCP so it is running in host mode.,pihole,1649743008.0
3572,comment,1,i4cziln,,"https://docs.pi-hole.net/docker/dhcp/

Personally I have other issues (pinhole behind an extender) but the document seems solid and should work, essentially assigning local lan IP address to your pinhole container",pihole,1649720816.0
3573,comment,1,i4cxecm,,"At least I know someone else is going through it!   


I'm sure putting network\_mode = host would work for containers (As they'd pickup DNS resolution just like the Pi itself does) but it would kind of remove the value of containers and seperate networks!",pihole,1649719870.0
3574,comment,1,i4ex93a,,So I think I’ve sorted this! See op!,pihole,1649762710.0
3575,comment,2,i4ex9od,,So I think I’ve sorted this! See op!,pihole,1649762720.0
3576,comment,1,i4ew64p,,Yes not had much luck here as I think it gets overwritten.,pihole,1649762035.0
3577,comment,1,i4d12k9,,"Thanks - that looks like for DHCP?   


But basically the simplest option is to run Pihole in host mode? The trade off is port conflicts?",pihole,1649721520.0
3578,comment,1,i4exa2p,,So I think I’ve sorted this! See op!,pihole,1649762726.0
3579,comment,1,i4d1qms,,"Network mode = host did work, kind of. The problem I ran into was that hoobs ui runs on port 80 and so does pihole. I hate it when products use port 80. Pihole doesn’t have a good way to change the port. Had to go change it in lightpd config. That worked but then I ran into issue where the ui showed up but nothing worked. It kept going into a disabled state when I clicked anything on the UI.",pihole,1649721821.0
3580,comment,1,i4f20i5,,"I see, interesting. I may have to update my docker network config. Then again I was debating on setting up an macvlan network for all my containers. Nice that you figured it out though!",pihole,1649765409.0
3581,comment,1,i4d9ist,,"Oh, I was reading too fast! Sorry,
You don’t even need all of this (honestly not a fan of host network)
Both other options (bridged and macvlan) can solve your issue,
The easier one will be macvlan as it assign an ip to your pihole container which can be routeable via the local docker network",pihole,1649725285.0
3582,comment,1,i4nozdi,,"Beautiful, glad to hear it worked,
I assumed you wanted everyone (containers and other devices) to use the same dns ip as it’s received from a dhcp server (which in hindsight silly as you’ll need the dhcp to live in the docker as well)
Your solution works and that’s awesome!
Make sure to set a static ip for the internal pihole in your compose file so it won’t be changed next time device/service reboots",pihole,1649907668.0
3583,comment,1,i4d2hiz,,">	Had to go change it in lightpd config

Don't do that, per the prominent warning at the head of the file. 

https://discourse.pi-hole.net/t/lighttpd-daemon-wont-start/44985/10",pihole,1649722152.0
3584,comment,1,i4dmc2v,,"You could just map it in your compose file or on launch like this?

>You can map other ports to Pi-hole port 80 using docker's port forwarding like this -p 8080:80 if you are using the default blocking mode. If you are using the legacy IP blocking mode, you should not remap this port.

edit: Oh this won't work in host mode. Duh.",pihole,1649730890.0
3585,comment,1,i4d2vwd,,"I get it. I’d have added the port in a separate config file if I managed to get the thing to work. But you are right, best way is to leave the default config file alone and put overrides in a separate file.",pihole,1649722333.0
3586,comment,1,i4dp5j3,,That’s how I’m running it right now. But mapping ports is not sufficient if you want to have pihole by your DNS.,pihole,1649732189.0
3587,post,1,u1gq9d,Can't resolve local hostname when Internet is down,"I have a handful of records setup as local DNS for my LAN devices. It works great most of the time. Problem is, when my Internet drops, I can no longer query these local DNS records, it simply times out and states it cannot find the domain I am after although I expect it to query the local pihole for it. 

I have the latest version setup on the pihole.
My router is a linksys wrt1900acs and runs the latest version of openwrt.
The only thing I configured related to DNS on the router is DNS forwarding to the pihole and declaring the custom DNS server.

Also this happens even on static connections where I explicitly tell my system to use a DNS server, not just with DHCP.

How can go about fixing this?",pihole,1649708932.0
3588,comment,2,i4ceehy,,A part of that is how the client is attempting to look for local resources. You usually have some kind of local DNS (domain.local or whatever you named yours to be) and then a shorthand access (nas goes to nas.domain.local). Your clients need to be configured to append these DNS suffixes to look at your local domain in the right order. How does your searches work if you tried looking up the fully qualified domain name when you don't have internet?,pihole,1649712003.0
3589,comment,1,i4i926m,,"Thank you for the lead. I've been trying to make sure the past day that my devices have the suffixes configured and the hostnames are in order.

If I try to access my NAS for example while my internet is down, this would happen:
        
    # nslookup nas.lan

    Server:		192.168.1.2
    Address:	192.168.1.2#53
    
    ** server can't find nas.lan: NXDOMAIN

Also, to note, it starts to fail resolving a DNS query only after my internet fails by a couple of hours. I always waived it off as the records still being in my router or PCs cache. But I took the time to try it out and made sure to flush cache on both my PC and the router (by restarting the dnsmasq service) and it still works for a couple of hours after but it does immediely get MUCH slower when resolving DNS queries. I'm starting to be more lost in truth.",pihole,1649812313.0
3590,post,1,u19xle,Running pi -hole,"I was wondering what raspberry pi I would need to run this, I’ve never used or owned a raspberry pi before

Would the Zero 2 W from raspberry pi’s website be fine?",pihole,1649689760.0
3591,comment,10,i4bdd3c,,Any Pi ever made will run Pi-hole.  The Zero 2 W is a popular choice.,pihole,1649696413.0
3592,comment,4,i4ax5cp,,"Zero 2W should be fine, as would an old computer you have lying around collecting dust",pihole,1649690022.0
3593,comment,4,i4ax5mw,,"It will work great. No different than the pi 3. I have both running pi-hole and a couple other things. You can either do it via the regular install (basically one command and then a few other easy settings), or via Docker.  

It's all here> https://pi-hole.net/",pihole,1649690025.0
3594,comment,2,i4bg0m3,,Pretty much anything that will boot any distro of Linux will do. The hardware requirements are almost non-existent.,pihole,1649697410.0
3595,comment,2,i4brero,,"There are two things in a pihole

The device running it

The software being run

&#x200B;

Pretty much *any* device can run the software required to run a pihole - raspberry pi's are a popular thing because of several reasons, which is why it's called *pi*hole. 

&#x200B;

You can run a pihole as a VM or on a spare computer first to see if it suits your needs, before you have to purchase anything - obviously moving to a smaller / cheaper-to-run device once you're happy you know what you're doing.",pihole,1649701691.0
3596,comment,2,i4bt70x,,Running mine on a standard none wifi pi zero.  Using a usb adaptor on it. Running 24/7 with no issues at all,pihole,1649703586.0
3597,comment,2,i4ckq4j,,"I run it on a pi Zero W and it runs fine, a pi Zero 2 W should be more than enough.",pihole,1649714521.0
3598,comment,1,i4ayxqo,,Raspberry Pi Model B - works fine for me,pihole,1649690736.0
3599,comment,1,i4ax7y9,,I use it and it works fine.,pihole,1649690051.0
3600,comment,1,i4bkmnp,,Running pi-hole on Pi-4 2GB ram with other apps and it works fine,pihole,1649699136.0
3601,comment,1,i4d8tcu,,https://docs.pi-hole.net/,pihole,1649724968.0
3602,comment,1,i4elp9k,,"I'm running it on a vmware virtual machine on debian for several years already, so no pi",pihole,1649754152.0
3603,comment,1,i4eqbv9,,Aren't Pis of any kind super expensive now? I'd wait or run it in some unused hardware you have in a drawer.,pihole,1649757918.0
3604,comment,5,i4b0jub,,"I'm running pi-hole on a zero 2 w, working very well.",pihole,1649691375.0
3605,comment,2,i4ay1zb,,here's a pi zero w (1) running it without breaking a sweat. 2 users in the household. https://imgur.com/AFxOYiL,pihole,1649690385.0
3606,comment,1,i4c3s1l,,"Thank you for confirming, this is what I want to use it on.",pihole,1649707943.0
3607,comment,1,i4cpah9,,"I have to give a shot to mine on this...   
In practice do you find yourself need to access the webgui often to unblock some stuff that cant load or any similar issue OR is setup and go?  
Cheers",pihole,1649716398.0
3608,comment,1,i4bg6k9,,I had issues with this setup using it also as a dhcp server. pi zero 2 solved the issue.,pihole,1649697473.0
3609,comment,2,i4cqqvr,,Normally just SSH to the pi to update it.   It just works,pihole,1649717005.0
3610,post,17,u1832m,Where on my network should I actually place/plug in my pihole?,Is it fine to just plug in to a port on my router or should I go between the router and modem? Do I have to worry about any speed or overhead by constantly sending a signal back and forth through my router?,pihole,1649684606.0
3611,comment,15,i4al0gt,,"just plug it into your router, speed shouldnt be an issue because dns pakets arent that bandwith hungry",pihole,1649685001.0
3612,comment,12,i4ar3dv,,"The device on which you install Pi-hole should be on the network like all the other network clients. On the LAN side of the router, not between the router and the modem.",pihole,1649687560.0
3613,comment,4,i4am6xm,,"The modem will still go directly into the WAN side of your router.  Your PH goes on the client/LAN side of the router, and you'll need to point your router's DNS to the Pi-hole's IP address.  RE: performance, I would wager that your network's performance will go UP overall after everything is using the Pi-hole, since perhaps 40% or more of your DNS requests won't be leaving your local network anymore.  Some will be dropped/sinkholed by the PH, and some will be answered from the cache on the PH.",pihole,1649685519.0
3614,comment,3,i4b4a5j,,"common question, it doesn't matter.  Unlike the modem > router situation the Pihole can be anywhere.  Ideal to be hard-wired but could even be wireless.  Could be two switches in to the network.  Still behaves the same.",pihole,1649692950.0
3615,comment,2,i4bw56h,,Finally got my Dad and FIL on the pi-hole bandwagon.  Let the Gravity begin!,pihole,1649704886.0
3616,comment,2,i4dil4e,,"My Pi zero w runs off my APC right next to my router, works great.",pihole,1649729215.0
3617,comment,2,i4dqezb,,"Anywhere on the inside of your network is fine, connections don’t go through the Pi-hole, it’s only used to translate a DNS name into an IP address. Connection go out your router quite normally.",pihole,1649732783.0
3618,comment,2,i4egxcl,,"Anywhere.  If you actually check the latency over even a 100MB network, and the bandwidth of the interface.

The Pi iself will actually cause more slowness than the network latency.",pihole,1649750156.0
3619,comment,2,i4fsdyk,,">Is it fine to just plug in to a port on my router or should I go between the router and modem? 

Directly to the router. 


>Do I have to worry about any speed or overhead by constantly sending a signal back and forth through my router?

Only if you have one of the crappiest routers on earth.",pihole,1649776888.0
3620,comment,1,i4g5tto,,"I recently added an 8-port unmanaged switch after my router, since I was out of hardwired ports coming off my router.  I assume that a PH device could just plug into one of those switch ports.",pihole,1649781916.0
3621,comment,2,i4dp04v,,"To add to this, if your router has the option to set the DCHP provided DNS servers, set it there instead of the router’s DNS setting. That way your Pi-hole will properly log the source of each DNS request.",pihole,1649732118.0
3622,post,6,u15xs4,Not sure whether this is an issue with Pihole or the host (OMV5 with Pihole docker) but I can't ping anything outside my network by domain on the host,"Hi there,

the problem I have is as described in the title.

Pinging a service or website outside of my network doesn't work with the host unless I go by its IP.
That's of course a problem with Docker updates and even more important probably, system updates.

/run/systemd/resolve/resolv.conf lists my router as DNS which itself uses my Pihole docker as DNS.
Every other devices on my network works fine also this way, so I don't know exactly what the issue here is.

Enabling systemd-resolved.service will curse Pihole to stop functioning as intended and changes to the mentioned resolv.conf have been reversed by the system after a test restart.

Can someone help? 👀",pihole,1649677911.0
3623,comment,2,i4a85u1,,"make sure to use the whole IP when mapping 53. Example piholeIP:53:53/udp piholeIP:53:53/tcp

docker-compose example:

ports:

\- ""pihole\_docker\_host\_ip:53:53/tcp""

\- ""pihole\_docker\_host\_ip:53:53/udp""",pihole,1649678726.0
3624,comment,1,i4komot,,"So all the traffic on port 53 gets redirected, right?

What if another service is already listen on the host's port 53?",pihole,1649862678.0
3625,comment,2,i4kr86a,,then pihole container will fail to bind on 53 and it will notify you,pihole,1649863688.0
3626,post,3,u14stw,DHCP Issue?,"Hi guys

Pi-Hole newbie here, although I've had a few Pi's in my time however.

&#x200B;

I've just set up Pi-Hole on my device and it's on and working, can get to the dashboard etc. But there seems to be an issue with the DHCP from my Sky Q (Which I know is a problem anyway) I've been looking at the below, in which i've turned off the IPv6 as instructed.

[https://discourse.pi-hole.net/t/pi-hole-with-sky-q-router-and-android-devices-tldr-turn-off-ipv6/16294](https://discourse.pi-hole.net/t/pi-hole-with-sky-q-router-and-android-devices-tldr-turn-off-ipv6/16294)

When I turn off the DHCP from my Sky Q router and reboot there is no connectivity either via WiFi or Ethernet. 

Is it simply a case of turning on the DHCP server setting the Pi-Hole dashboard or do I need to enter the IP range into the SKY Q panel?",pihole,1649673800.0
3627,comment,3,i4a8akc,,"You need a DHCP server to autoconfigure your network. So yes, you need to turn ON in Pihole settings.  
Assuming the other one is OFF, you don't need an ip range in the disabled one (obviously)  

If you have several DHCPs, they must have non-overlapping range... and Pihole's netmask need to include the router, as it is the gateway (default route towards Internet, for unknown adresses)",pihole,1649678799.0
3628,post,15,u13amg,Wierd behavior PiHole + Unbound responce,"I am running PiHole + Unbound in recursive resolver mode. Everything is fine, but i've noticed strange behaviour of dns requests and responce. Some requests are doubled and first request is N/A immediatly followed with the same request, but with an answer. Is it ok?  This is the problem of 1-5/100 requests, not each request has such a problem. Any help to understand whether it is a problem or not.

https://preview.redd.it/prwaqs1o6vs81.png?width=1222&format=png&auto=webp&s=642100ae0df932b7df9fed344020903f77145e3d

https://preview.redd.it/cidg1mlo6vs81.png?width=1233&format=png&auto=webp&s=06b2cdf81ba6208cc88cb32be1c6b35e41639286

https://preview.redd.it/nn3dk26n6vs81.png?width=1226&format=png&auto=webp&s=3ac0fbc3b6d68ad85d46da0f5218d3bdfd565e12",pihole,1649667635.0
3629,comment,2,i49zhs3,,"I had this [problem](https://www.reddit.com/r/pihole/comments/txd73x/pihole_appearing_among_top_block_clients_for/?utm_source=share&utm_medium=web2x&context=3) too. For me it was an initial setup of a backup PiHole DNS server.

Completely, randomly queries made by network clients were being repeated in the logs. Sometimes twice or more. I ended up calling them an echo. In my case the echoes were showing as coming (sourced) from the PiHole DNS server itself rather than the correct, original network client. It resulted in the PiHole being the top client in all categories in the WebUI's Dashboard.

I went through the setup process a few times more and couldn't figure it out. In the end what worked for me involved *resolvconf*. When I initially ran `resolvconf -l`, output was generated for each network interface (eth0, wlan0 & lo) and the configured DNS nameservers for each.

Even though I'm sure I did this before, I stopped and disabled resolvconf service (and confirmed it was disabled after a reboot). After that when I ran `resolvconf -l,` it generated no output at all. It simply returned me to the command prompt. No error or output at all. It was at this point that PiHole was working the way I expected it to.

However, when I tried to add AdLists to PiHole or run `pihole -g` or `apt-get update`, both would fail with name resolution errors. This happened even when I tried to ping servers on the internet by name. When I checked the file /etc/resolv.conf, it had a single line which was an entry for 'nameserver 8.8.8.8' which I had blocked at my router. So this probably wouldn't happen to anyone else but PiHole and Unbound was working cuz Unbound has the IP Addresses of all the root DNS Servers and doesn't need to resolve them. So I replaced the contents of /etc/resolv.conf with 'nameserver 127.0.01'  (since PiHole is working) and I also added '*domain example.net*' & '*search example.net*'. Now adding lists to PiHole, `pihole -g` and `apt-get update` were successful. So you may not need to do this last part (or even care) since it appears to only affect the PiHole device's name resolution locally.

Now everything works right and there are no more echoes.",pihole,1649673182.0
3630,comment,1,i4a1syh,,"Thank you very much for your reply, i ve checked everything that you've mentioned, I have [8.8.8.8](https://8.8.8.8) and [9.9.9.9](https://9.9.9.9) in my resolv.conf but the service is definetely not running and i don't have any block for any of dns addresses. Seems like we have different problems. But i'll try to change from 8888 9999 to [127.0.0.1](https://127.0.0.1) in my resolve.conf. Maybe it gonna help.",pihole,1649674823.0
3631,comment,1,i4a6jvn,,"What do you get when you run `resolvconf -l` (that's a L)

...and I am sure that it wasn't running on all my attempts either, but what I thought was key, was the output of `resolvconf -l`. It went from printing interface specific nameservers to printing nothing at all.",pihole,1649677805.0
3632,comment,1,i4a8bzf,,">resolvconf -l

The msg tells it is not installed:

`Command 'resolvconf' not found, but can be installed with:`

`sudo apt install openresolv # version 3.10.0-1, or`

`sudo apt install resolvconf # version 1.82`",pihole,1649678822.0
3633,comment,1,i4a9ejb,,"Thats interesting. It was installed automatically when I installed Unbound.

I guess you may be having a different issue, but still makes me wonder how you went about installing Unbound. Also are you doing this in a docker container, on a raspberry pi, or some other device? What operating system are we talking about?

To be clear, you don't need resolvconf, we want to disable it anyway... but if it wasn't installed automatically for you when it was for me (and I assume others) then what else might not have been installed automatically?",pihole,1649679411.0
3634,comment,1,i4a9pc4,,"I have VPS with Ubuntu 20.04. Installed Unbound + PiHole + PiVpn(Wireguard). No Docker. Configured according to the official guides from PiHole. Actually  I don't really have enough knowledge to configure everything manually, so I just followed the scripts and then just did some minor configurations from guides to make it work.",pihole,1649679573.0
3635,comment,1,i4ac1qb,,"ok, I was using Raspberry Pi with RaspiOS. In my head there shouldn't be any major differences from the perspective of the guide, but because you're not seeing the same thing that I ran into (I followed the guides too when I ran into trouble) then I will say just disregard everything I said so far.

If you're not against starting over I would start with installing Unbound first. Make sure that its working according to the guide. Perform a `dig @127.0.0.1 -p 5335` [`www.nfl.com`](https://www.nfl.com) and make sure that you get a valid IP address back ... Then when you're comfortable that unbound is working, that's when you install pihole.

See if that approach works better for you.",pihole,1649680791.0
3636,comment,2,i4acq4x,,"Anyway, thank you for help) Maybe I'll try to start over a bit later. 

Frankly speaking my order of installing was Unbound -> PiHole -> PiVpn. Looks like I've chosen the correct one.",pihole,1649681130.0
3637,comment,1,i4agw9r,,"Yep, sounds like it to me. Sorry you're having problems, but its good that you're trying... keep at it.",pihole,1649683145.0
3638,post,0,u12ino,Help in setting up a custom router via debian + pi-hole,"So I've been following this guide:

https://www.reddit.com/r/pihole/comments/febfav/guide_to_homebrew_linux_router_using_debian/

However, when it comes to the part about installing pi-hole, it for some reason keeps selecting my WAN interface even though I select the LAN interface during installation. 

I have 3 interfaces when I type ""ip a"", the first one is the loopback, the second one is ""eno1"", I chose this one as my WAN, the third one is ""enx00e04d6df920"", this I chose to be my LAN. I configured the files in /etc/network/interfaces correctly I believe, I've checked them over several times, but for some reason, during pi-hole installation, it keeps selecting my WAN interface instead, I know this because at the last screen when it gives me the ip address to connect to the web interface, it gives me the WAN ip (192.168.0.37) address instead of the LAN one (10.152.187.1).

Any ideas? The LAN interface is a ethernet to usb adapter, could this be causing some sort of issue? It seems to work fine though and during testing I was able to use it to connect to the internet.

I've also tried to select the WAN interface during pi-hole installation, but it gives the same result, I thought maybe it mixed the 2 up on the installation interface, but not sure what's going on.",pihole,1649664181.0
3639,comment,1,i4ijwyf,,Why are you using a USB to Ethernet adapter instead of the Ethernet on the Pi?,pihole,1649816961.0
3640,comment,1,i4ilv7k,,[deleted],pihole,1649817836.0
3641,comment,1,i4jbo4i,,I only have 1 native ethernet port on that machine. So I'm extending it with an adapter.,pihole,1649833164.0
3642,comment,1,i4imapl,,I understand that. OP never said what Pi. Hence why I asked.,pihole,1649818031.0
3643,post,1,u11ivy,Can't load pihole frontend,"The pihole seems to still actually be running and working but when trying to load the pihole portal it just fails: https://i.imgur.com/oZIilca.png

And checking the terminal I can see it's spamming this: https://i.imgur.com/ImaTpID.png

Really frustrating considering pihole broke only about a week ago now due to a bad docker update and I had to completely rebuild it from scratch. 

Anyone know what's going on here?

I have it running on my Synology NAS in docker.

EDIT: I can't be bothered fucking around with it any more. I've just rebuilt it... yet again... working again, I suppose.",pihole,1649659822.0
3644,comment,1,i49qebw,,"By reading those logs, it seems you have something else using port 80. 

Have you installed something else on it recently?


Run this and see what is using it: sudo netstat -tlnpu",pihole,1649665868.0
3645,comment,1,i49qnkv,,I've not. I also just did a clean rebuild of it and it's working now. So who knows what fucked it up. Can't be bothered troubleshooting pihole again within a week of last time it got broken by a bad docker update.,pihole,1649666083.0
3646,comment,1,i49s3tl,,"No probs.

I've held off doing the update just yet as I've seen quite a few people posting about issues since updating and I don't personally use docker so I'll just wait and see what the next update brings.",pihole,1649667307.0
3647,comment,2,i49t8wg,,"Yeah completely fair. I'm rather lazy and use a docker app called watchguard that checks and completes updates automatically on all my docker apps.

Typically have never had an issue so never had pause to stop updates but... lately...",pihole,1649668247.0
3648,post,0,u1186g,Can’t connect to my pihole admin page,"Hi

I recently installed pihole, in a docker container, on my raspberry pi 4b, which is already running as a NAS, but when I try to access the pihole admin page using http://ipaddress/admin/ it takes me to the Open Media Vault login page. I even tried adding the pihole ports after the ipaddress, same behaviour.

http://pi.hole/admin/ returns this site can’t be reached

Any ideas on what I can do to resolve this?",pihole,1649658553.0
3649,comment,1,i4dqe8k,,"Are you sure your DNS is pointing to the pi hole? Also, be sure the docker networking is using the host ports.",pihole,1649732773.0
3650,post,0,u0xrwi,Local DNS entry for local host?,"I've set the local DNS entry so a [something.site](https://something.site) becomes [192.168.1.1](https://192.168.1.1) or something. But what happens is it tried to look for [192.168.1.1](https://192.168.1.1) OUTSIDE the home network. 

Is there a way to point a common website, like [google.com](https://google.com) to a local server? I'm trying to setup so a duckdns linke when inside the home network points straight to the local IP and it doesn't have to go outside the network to look for it",pihole,1649645735.0
3651,comment,1,i48wpx7,,">	Is there a way to point a common website, like google.com to a local server?

How are you going to manage the SSL certificate?",pihole,1649645845.0
3652,comment,0,i48x5ju,,"No need really. It's just a simple http site but from outside I access it via duckdns + vpn.

Internally I'd like the traffic to flow just within the network",pihole,1649646070.0
3653,comment,1,i48xti2,,"HTTPS sites would not be possible without installing certs on every client.

DuckDNS+VPN setup can serve you internal sites. I have a weather monitor station that I self-host on the same pi, using PiVPN I can access it on cellular network.",pihole,1649646410.0
3654,comment,0,i48y13u,,">DuckDNS+VPN setup can serve you internal sites. 

say again? how?  


When I'm outside I access a site called [something.duckdns.net](https://something.duckdns.net):someport, that's a VPN that port forwards to a local machine that is connected to that vpn  


Locally thought, I'd like to use [something.duckdns.net](https://something.duckdns.net) as well. You see what I'm trying to do?",pihole,1649646521.0
3655,comment,1,i48ykl0,,"You dont need and dont want to use the port forward method. What you are saying is port forward which is a) not secure and b) not how you use a VPN. With a VPN, when a client connects to it, it will seems like their traffic is comming from the VPN host. If the VPN host is in your local network, it would seem like the request is comming from your local network. Therefore, you juat have to host a VPN on a server, then connect the VPN, access the site when you are outside.

When you are inside, just set a local DNS to resolve that domain to local IP.

With my setup, I have a site called pi.weather on the same pi with my pihole and PiVPN. I set a local DNS entry to map pi.weather to my pi's IP, then I can use pi.weather to access the site. I also have a DDNS for PiVPN to connect to. This way, except for the port PiVPN needs, no extra ports are opened. When you use port scanners, no ports would be open, and PiVPN port would be reported as closed.",pihole,1649646804.0
3656,comment,1,i48zvp9,,">When you are inside, just set a local DNS to resolve that domain to local IP.

already did this. I get the right local IP but tracert shows it's searching for that IP outside the network

Even when I set my own VPN, I'd have to port forward my router to that VPN port. Which leads me to by root problem, which is that my IP keeps changing and is a shared IP, which makes port forwarding impossible.

I'm currently bypassing this roadblock by using OpenVPN with a onvg file from my VPN provider, then using duckdns so I know what my IP is.",pihole,1649647484.0
3657,comment,1,i4933wt,,"But at least he must forward the port of the VPN service, otherwise it can't connect to the VPN server which runs in his LAN ;)",pihole,1649649246.0
3658,comment,2,i490g6g,,"> tracert searching IP outside network

You sure the device is connected to pihole? Check your pihole logs to see if it got that request. Look at tail log and see what pihole's reply is.

> my IP keeps changing

I assume you mean public IP. Mine is always changing too. I dont see why thats impossible. Just put the duckdns domain in your VPN config to connect to.

I have difficulities understanding the last part.",pihole,1649647787.0
3659,comment,1,i492xiq,,"It doesn't matter for the port forward that your WAN IP changes. It only means it routes every query on a specific port to an internal IP and port, regardless what your WAN IP is.
So you have a DDNS which points to your current IP. You use this DDNS domain to connect via VPN to your LAN. And now you just define a local DNS record for your DDNS domain and violá, you can access it from outside via VPN and when you are inside your LAN it never leaves because of the local DNS record.",pihole,1649649147.0
3660,comment,1,i493x2e,,"In theory, he could use NAT traversal and don't do port forward. You don't need to port forward to browse the internet, do you? Browsing the internet also has upload and download, so theoretically someone could repack VPN packages to normal traffic and don't need port forwarding at all. AFAIK hosting a tor relay doesn't need port forwarding too, so the same technology could be used.",pihole,1649649701.0
3661,post,206,u0vkqm,WTF Paramount+ ?,"&#x200B;

[Still works on my Amazon Fire Stick and app via iPhone. But they have it blocked via laptop web browser?](https://preview.redd.it/fd5zpnuosss81.jpg?width=1657&format=pjpg&auto=webp&s=e97ff6c1124c1630a4501cce866f78e0b1133892)",pihole,1649638579.0
3662,comment,246,i48wthz,,"""what radicalized you?"" 

I was watching Hulu with ads and my show wasn't loading, but every time I reloaded the page, the ads loaded just fine. After the third or fourth ad with no content...the pirate bay.",pihole,1649645898.0
3663,comment,128,i49o5ot,,You’re paying for something that wants to force ads down your throat? Time to reconsider.,pihole,1649664013.0
3664,comment,74,i49orrc,,"If you didn't unsuscribe yet, you're doing it wrong.",pihole,1649664515.0
3665,comment,23,i49wk4z,,"Messages like this don't get the response I think they're looking for, I'm guessing--not from this crowd, anyway. I would drop that sub like a hot rock if I was paying for it.",pihole,1649670929.0
3666,comment,42,i491j6l,,"I guess your Amazon Fire Stick and iPhone app have hardcoded DNS servers that simply bypass your pihole. Your web browser's requests however are correctly blocked, and the server refuses to give you access to the video because of it.",pihole,1649648378.0
3667,comment,22,i48upvx,,"Yeah, I have the commercial free Paramount+ subscription, however I still have to fight with it every now and then because they use a lot of domains on my blacklists that I've had to bypass for my streaming devices in order to get it to work.",pihole,1649644849.0
3668,comment,7,i49n5s1,,"If I try to use paramount+ with Chromecast on my Vizio tv, it will not load unless I disable the pihole.  I've tried whitelisting a few domains that it was blocking, but it didn't matter.  I undid all of it.   

Every other TV I own will not have a problem using Chromecast.   Also, for whatever reason if I watch on my PC, I get zero ads.  

Paramount+ is the only streaming service I know of that has any kind of hiccup with a stock pihole install.",pihole,1649663194.0
3669,comment,4,i491jxe,,Had same issue with sbs Australia today. I disabled for 30 seconds as I saw nothing in the query log,pihole,1649648390.0
3670,comment,9,i4aewxe,,"I'm sorry, an AD on a subscription service? Yeah, thats a no from me. It's the reason i cancelled amazon prime. It's either free and ad supported, or, take my money and shut up.",pihole,1649682200.0
3671,comment,20,i48hynj,,"""Major Media Company Feels Some Ways About Loss Of Revenue Stream, More News At 11""",pihole,1649638809.0
3672,comment,8,i48i6vn,,Does it on my iPhone too,pihole,1649638915.0
3673,comment,3,i49if3j,,Huh. Happened on my Shield. I didn’t even think it was the Pi-hole at first. The other 5 streaming apps I sub to all work. (So much cheaper than cable. Super /s),pihole,1649659387.0
3674,comment,3,i4bdlsx,,Time to join the dark side,pihole,1649696503.0
3675,comment,3,i4be235,,"Paramount+ is the most frustrating service to whitelist that I've ever seen.

After about 30 minutes total over 3 sessions trying to whitelist everything that seemed relevant and everything I could find online, I gave up.  I got a free year trial from T-Mobile for it and there's nothing on there I can't get elsewhere so I wasn't willing to fight with it.

And then randomly last week it started working even after I removed all the whitelisted URL that I added weeks before.",pihole,1649696671.0
3676,comment,3,i4c2ghd,,"If you want to say no to these companies check out r/piracy and r/FREEMEDIAHECKYEAH

if you want to simply stream a show, check out the free streaming sites in those subs. One example that i love: fmovies (dot) to",pihole,1649707432.0
3677,comment,3,i4cfhqb,,"I got paramount+ no ads half off for a year and didn’t even use it because even though I had the no ads service, they still required me to turn off ad block for various different shows and movies. It was an annoyance.",pihole,1649712428.0
3678,comment,3,i4cz0bo,,"Yeah, unfortunately the brief ad at the beginning will get you, even on the higher-paid limited ad tier. I had to add the following to my Pi Hole to get it to work consistently across devices:

* [cbsinteractive.hb.omtrdc.net](https://cbsinteractive.hb.omtrdc.net)
* [pubads.g.doubleclick.net](https://pubads.g.doubleclick.net)
* [s0.2mdn.net](https://s0.2mdn.net)

Not too fond of having to add Doubleclick, but it seemed to do the job. I had trouble watching The Ready Room and some other extras on my Roku until I added that to the list. (Most full episodes/movies worked fine without it.) If you use an ad-blocking extension, you may have to let them through on that too, at least for the [paramountplus.com](https://paramountplus.com) site.

Note that I've also experience a bug where if I watch something on my laptop it doesn't remember my place (or that I've watched the episode at all). I haven't done much laptop testing since I last changed my configuration, but what little I've done hasn't been encouraging, so may still need to add another site or two to get it running 100%.

**EDIT:** After trying to figure that bug out for like two years, as soon as I post the comment I get it figured out, or at least I think I did anyway.

* [production-cmp.isgprivacy.cbsi.com](https://production-cmp.isgprivacy.cbsi.com)
* [tags.tiqcdn.com](https://tags.tiqcdn.com)
* [saa.paramountplus.com](https://saa.paramountplus.com)

Seems like unblocking those three fixes the issue of the service forgetting your progress in the web browser. [saa.paramountplus.com](https://saa.paramountplus.com) handles the actual position tracking; it's loaded by the script at [tags.tiqcdn.com](https://tags.tiqcdn.com), but I think the initial page script waits to load that one until [https://production-cmp.isgprivacy.cbsi.com/dist/optanon-v1.1.0.js](https://production-cmp.isgprivacy.cbsi.com/dist/optanon-v1.1.0.js) has loaded. Possible I'm overlooking something I have cached that's still needed though.

Just have to add: I'm not sure if this is more or fewer than other services, but the amount of sites Paramount+ phones home to is *ridiculous*.",pihole,1649720588.0
3679,comment,3,i4d04ix,,Aarrrggghhh matey!,pihole,1649721089.0
3680,comment,6,i4ajcs1,,"Here is what I have tagged as CBS/Paramount Plus... There may be more, works on Roku, apple tv, and xbox.. However sometimes still requires disabling pihole for viewing in the browser.

* cbsi.com.ssl.sc.omtrdc.net
* cbsi.demdex.net
* cbsinteractive.hb.omtrdc.net
* om.cbsi.com
* saa.cbsi.com
* saa.paramountplus.com

Along with regex to wildcard cbsaavideo.com domains.... 

On Another note... The Paramount Plus app is horrid... Truly truly horrid... Difficult to use, often forgets your place.. etc etc..

EDIT: I also have a paramount plus, add free subscription.",pihole,1649684268.0
3681,comment,2,i4ajbdx,,"If you're paying for the ad-free version they are trying to show you a trailer for another show.  Really annoying that they use the same method to serve it. 

But this message is an improvement. It used to just spin and spin with no indication of the problem.",pihole,1649684250.0
3682,comment,1,i4bukss,,"I get a similar message with Hulu when blocking with NextDNS, but the show resumes after the ""commercial"" break, which is actually just a black screen.",pihole,1649704241.0
3683,comment,1,i4bulpl,,"Paramount+ with Pihole is rough sledding, whitelisted everything conceivable, works fine on some devices, some devices won't remember watch history, some devices load the show preview, some won't load at all.",pihole,1649704252.0
3684,comment,1,i4cnih4,,I had to whitelist some Paramount+ domains to get it working.,pihole,1649715663.0
3685,comment,1,i4cpwnl,,"I can use lots of paramount+ without it, but plenty of content requires me to enable these domains in the whitelist. I disable when not using it. Really annoying. I don’t have ads except some ads for *other* paramount+ shows…but anything that would load an ad will not work without the whitelist. Very annoying. 

cbsinteractive.hb.omtrdc.net

pubads.g.doubleclick.net

ads.play.chai.video",pihole,1649716654.0
3686,comment,1,i4cw8cj,,"I usually end up having to bring up the Pi-Hole web GUI on my phone to pause blocking right before I click play on my TV (I just use the pre-defined 5 minutes option), as otherwise it tends to not want to playback. 

Unfortunately, I've noticed that sometimes if you do this, and you pause the show - when you come back to resume, it checks to see if ads are blocked (no clue why it does this in the middle of a show... or well, at all to being with but here we are) and will fail kick you back out if you don't pause blocking again right before hitting resume.",pihole,1649719358.0
3687,comment,1,i4da6cr,,"That is weird, I tried Paramount+ yesterday without issues but this is the catch.

I have Amazon Prime and wanted so badly to watch Halo, hell yeah, so I got the 7 days free access within Prime App. I have a 2018 65"" Samsung QLED TV, I haven't installed its actual app if there is any.

Via PC browser as well, it plays whatever I click.

I wonder if the Prime partnership removes any sponsor BS.",pihole,1649725572.0
3688,comment,1,i4ipgjd,,"Add ``pubads.g.doubleclick.net`` to your whitelist to fix that error.

Yes it sucks, but if you want to use P+, that's what you gotta do.",pihole,1649819514.0
3689,comment,72,i49xjv1,,When did Reddit buy out Hulu?,pihole,1649671714.0
3690,comment,30,i4bgmlb,,"I hate advertisements. I will go as far as I need to, to avoid them. I think slamming ads in my face for something I paid for is far more immoral than acquiring the content in 'not so nice' ways.",pihole,1649697637.0
3691,comment,9,i4bo8jj,,"i must have added 2 dozen sites to my whitelist before i gave up, unsubbed from paramount+, and hit the high seas. arrr matey.",pihole,1649700490.0
3692,comment,15,i4amo4t,,I definitely agree with that. That's why I only did the trial for paramount+,pihole,1649685723.0
3693,comment,4,i4bby2s,,That's where Stremio comes in!,pihole,1649695886.0
3694,comment,3,i4dfhkn,,"No joke, I immediately unsubscribed to Paramount+ after my free trial was up because not only does it force me to watch the ""promotional"" ads but I have to see that stupid CBS intro between episodes. I was in the middle of rewatching Star Trek TNG for the first time in many years when it left Netflix for Paramount+ so I tried P+ so I could keep watching. I know Netflix isn't perfect but god damn if it doesn't make you realize how much better it is than the other ""I wanna have a streaming platform too"" streaming services. From intuitive video controls like fast forwarding/rewinding with minimal buffering to the ""no bullshit - just watch your show/movie"" approach. 


I know I sound like a shill but I swear even when Netflix has limited interesting content it's still a better experience than most of these other platforms.",pihole,1649727868.0
3695,comment,-25,i4a9o61,,Cable TV has had ads and you've paid for it for decades,pihole,1649679555.0
3696,comment,-5,i4asw74,,"May be on the ad supported plan, and simultaneously trying to block ads.",pihole,1649688295.0
3697,comment,17,i4a9s1w,,"It does this even if you pay for the ad free tier. I could get my Chromecast with Google TV to work with it, but never for the browser implementation to work. 

Once my $50 for a year of ad free promo was up u wanted to go monthly to at least watch Picard season 2. I couldn't just switch to it without cancelling my annual, waiting for it to expire, then signing back up for monthly, so said screw it. I'll sub for a month or two after Strange New Worlds or Lower Decks finishes their upcoming seasons.",pihole,1649679612.0
3698,comment,17,i4a4sg4,,"Hard coded dns maybe but I bet the browser goes through a different domain than the app based versions. Probably have different protocols to check on ad compliance, the browser being more aggressive.",pihole,1649676748.0
3699,comment,5,i4aoanb,,Best to forcefully redirect all port 53 and DoT traffic to your pihole. I do this on my EdgeRouter-X. Doesn't help with DoH though.,pihole,1649686407.0
3700,comment,2,i4bzq30,,I can confirm this. My fire stick attempts to use opendns if it can't load ads.,pihole,1649706298.0
3701,comment,3,i4adfs4,,"same, had to add a new whitelist a few weeks ago just to get shows to load
paramount changes their servers more than any other streaming service i have.",pihole,1649681481.0
3702,comment,4,i4b11j8,,"Just FYI, I access paramount+ through prime video and it works fine with stock pihole so that is an option. 

I had to add paramount+ for Yellowstone at the wife's demand and doing so through Prime had a greater wife acceptance factor.",pihole,1649691568.0
3703,comment,3,i4cgehq,,Sbs Australia are using some interesting Tech to inject ads. They even put an article up about it. I highly suspect Paramount odds using that same Tech.,pihole,1649712786.0
3704,comment,-1,i4atfgn,,There’s an ad supported tier and an ad free tier. It’s not clear which OP is on. I don’t have any sympathy if someone willingly opted into the cheaper tier and is simultaneously trying to block ads.,pihole,1649688518.0
3705,comment,5,i48iex4,,"I’ve managed to target blacklist some addresses a few months back so it works on Amazon and the app. First time doing it via laptop browser though. 

Looks like I’m watching via iPhone app tonight while the wife watches Outlander on the main TV…",pihole,1649639019.0
3706,comment,3,i4bscq0,,"Not to mention dolby vision doesn't work right on Paramount+ on Chromecast with Google TV. Replaced unit, still bad.",pihole,1649702270.0
3707,comment,2,i4dm03q,,"Try adding these two and see if it stops forgetting your place. My browser consistently forgot what I had seen until I added these (and the [saa.paramountplus.com](https://saa.paramountplus.com) from your list):

* [production-cmp.isgprivacy.cbsi.com](https://production-cmp.isgprivacy.cbsi.com)
* [tags.tiqcdn.com](https://tags.tiqcdn.com)",pihole,1649730739.0
3708,comment,9,i4b2l00,,[deleted],pihole,1649692246.0
3709,comment,2,i4d94iu,,"on my phone I use Bacon Reader and on my computer's browser I use RES.  The only time I see an ad on Reddit is if it is an ad posing as a legit post like ""Hey guys just got this super cool shirt from <shirt website>.com""",pihole,1649725108.0
3710,comment,13,i4bigy9,,I also dislike when I click on an Amazon show and they show a commercial for another show.,pihole,1649698330.0
3711,comment,21,i4afaj8,,Originally the premium ad free channels were the basic cable package. Then they slowly started adding more useless channels full of ads and made the ad free content extra premium.,pihole,1649682379.0
3712,comment,10,i4asfy4,,Doesn't mean that we should have to put up with them everywhere else.,pihole,1649688110.0
3713,comment,28,i4aa3i0,,Maybe you have… no way I’m paying for a service with advertisements,pihole,1649679781.0
3714,comment,5,i4amlt1,,Not this guy.,pihole,1649685694.0
3715,comment,4,i4ahaoq,,"Nope, we never had cable TV or Sky in my house, just terrestrial.",pihole,1649683328.0
3716,comment,1,i4c4n0e,,"Yeah it's nothing new, and was close to unavoidable if you wanted to watch cable. Here it was unavoidable unless you were fine with a total of 4-5 channels, and even then you'd still be paying a license fee if you wanted to legally watch them, and they contained ads.",pihole,1649708275.0
3717,comment,13,i4b0cr5,,"Paramount+ has ads no matter what tier iirc, it’s pretty bad.",pihole,1649691298.0
3718,comment,5,i4cvw77,,Arrrrrr matey,pihole,1649719211.0
3719,comment,4,i4as10b,,"You can't really do that with DoT. All a client needs to do is check the TLS certificate from the DoT server to see that it is not the one it requested.

You can however block DoT.",pihole,1649687942.0
3720,comment,3,i4avvhb,,How do you redirect DoT traffic?,pihole,1649689507.0
3721,comment,5,i4ahspo,,"My whitelist for cbs/paramount:
""om.cbsi.com
vidtech.cbsinteractive.com
cbsinteractive.hb.omtrdc.net
saa.cbsi.com
pubads.g.doubleclick.net""

I'm still working on getting the group management function to allow me to toggle the group all at once, but I have successfully managed to only whitelist them on the roku.",pihole,1649683557.0
3722,comment,2,i4bs9xz,,"If you're already paying for paramount+, can you add it to Prime Video easily, or do I need to re sub?",pihole,1649702161.0
3723,comment,1,i4dmeac,,Got a link to the article?,pihole,1649730918.0
3724,comment,2,i4c91fg,,No ad tier,pihole,1649709944.0
3725,comment,2,i4aid2w,,"My whitelist for cbs/paramount:
""om.cbsi.com
vidtech.cbsinteractive.com
cbsinteractive.hb.omtrdc.net
saa.cbsi.com
pubads.g.doubleclick.net""

I was able to watch masters coverage on the Roku app with these. Pretty sure it's the same list that worked last year as well.",pihole,1649683815.0
3726,comment,2,i4f8ok9,,Will give this a try.. Thanks!,pihole,1649768703.0
3727,comment,3,i4biqr8,,100. I already chose the show I want to watch.,pihole,1649698431.0
3728,comment,1,i4c4j02,,"That's ok, imo. As there's no timer to be able to skip those ads.",pihole,1649708232.0
3729,comment,1,i4c45gn,,"So you initially had cable packages wtih no ads, and always at least had the option to pay to remove them?

How does it work with live sports?",pihole,1649708087.0
3730,comment,-4,i4bahow,,"No I don’t, I’m saying people that pay for cable get ads",pihole,1649695339.0
3731,comment,-26,i4afeyp,,You get internet for free?,pihole,1649682439.0
3732,comment,-8,i4atx3i,,"Not who?  I'm talking about people who pay for cable TV, they have ads in the programming.",pihole,1649688715.0
3733,comment,-11,i4ai50h,,"Than what I said doesn't apply to you, I'm talking about people who pay for cable TV.  They have ads.",pihole,1649683712.0
3734,comment,3,i4c9k3w,,"For the sake of transparency I looked it up; and the ads on the higher tier plan are [only on a few specific seasons of only 4 of the shows in their catalog,](https://help.paramountplus.com/s/article/Why-am-I-still-seeing-ads-when-streaming-video-on-demand-with-the-Commercial-Free-plan) they presumably couldn't get the full rights to. I think it's important to be specific because sometimes people try and hide behind ambiguous statements like ""every tier has ads"" to make the advertising seem worse than it actually is.

You're still welcome to think that's pretty bad (I think I do too) but I also think we should have all the information when evaluating.",pihole,1649710142.0
3735,comment,1,i4b5ecd,,"Incorrect. They have a 4.99 ad supported and a 9.99 ad free..

All but these, which I don't watch, are ad free. 

>Premium subscribers enjoy on-demand content free from advertisements. However, on occasion, you may see brief promotional interruptions during a few select shows.\*  
>  
>\*Season 1 of: Limitless and Blood and Treasure; prior seasons of Madam Secretary and NCIS",pihole,1649693390.0
3736,comment,4,i4awpwy,,"Port 853 but as schklom said it probably doesn't actually work. Has the same effect as blocking it most likely, which may make the client revert to standard DNS.",pihole,1649689849.0
3737,comment,4,i4bs7j7,,"> pubads.g.doubleclick.net

That's how you defeated your own pihole right there 😆",pihole,1649702078.0
3738,comment,1,i4c7reu,,"I think resub unfortunately, but hopefully someone will prove me wrong here.",pihole,1649709456.0
3739,comment,1,i4fu012,,"It's quite old
https://www.bandt.com.au/sbs-fights-ad-blockers-switch-medias-adease/?utm_source=%2A%7CLIST%3ALIST_LIST_LIST_LIST_LIST_LIST_LIST_LIST_LIST_NAME%7C%2A&utm_campaign=3bc2383949-Newsletter_April_12_04_16&utm_medium=email",pihole,1649777495.0
3740,comment,-2,i4cgg97,,">Premium subscribers enjoy on-demand content free from advertisements. However, on occasion, you may see brief promotional interruptions during a few select shows.\*  
>  
>\*Season 1 of: Limitless and Blood and Treasure; prior seasons of Madam Secretary and NCIS

That's literally the only programs with ads. You sign up for this going in. So yeah, this is signing up for something, then trying to block what you agreed to. I have no sympathy.",pihole,1649712806.0
3741,comment,1,i4d1swj,,Yeah same with HBO. It’s just a trailer and the skip button is right there. Obviously I prefer they just play the show but it’s better than what Paramount are doing.,pihole,1649721848.0
3742,comment,1,i4c931z,,I’m not sure if have to find an article about. Back in the day most live sports were not part of the cable package. I do remember as a child temporarily having access to espn for Monday Night Football via ABC. It was big ad for cable. But Ad free cable predates my existence.,pihole,1649709961.0
3743,comment,20,i4al2po,,"The Internet connection itself doesn't come with a predefined list of websites you can access, you're free to do whatever on it.",pihole,1649685027.0
3744,comment,4,i4arl0t,,"Nope, but I only pay Spectrum for internet service.  Fiber is supposed to be rolling out this year in my area and then spectrum won't get anything from me.",pihole,1649687762.0
3745,comment,2,i4cklzn,,"I kind of understand that aspect of it, yeah, but on the other hand, take a look at their pause screen.",pihole,1649714474.0
3746,comment,11,i4bcemm,,"""limited"" ads.  Like Peacock.  The Ad-free versions are more of a ""with limited advertising""

I actually went back to buying stuff on Bluray recently, been much happier for it.  Buy it, rip it, put it in storage.",pihole,1649696056.0
3747,comment,1,i4bsiv0,,"Agreed. Though on my Mikrotik, seeing the number of attempts feels nice. Lol",pihole,1649702555.0
3748,comment,1,i4buebp,,"Well considering it's only whitelisted to use a specific service, on one specific device...
Plus all the ads fit into the standard commercial breaks of whatever live sport that CBS is currently holding hostage.

Are there any whitelisted domains that wouldn't be classified as ""defeating"" your pihole to use a specific service?",pihole,1649704164.0
3749,comment,1,i4hs9ll,,Yeah still seems some access initially to gather probably timezones to work out local ads etc.,pihole,1649805076.0
3750,comment,2,i4cvxar,,I was trying to watch Picard. So yeah ¯\_(ツ)_/¯,pihole,1649719224.0
3751,comment,10,i4aqatp,,"Right, exactly. Fiber internet here with no bundled services…",pihole,1649687234.0
3752,comment,-17,i4arod1,,Just like you can tune into any channel on your cable TV.,pihole,1649687799.0
3753,comment,1,i4cpggg,,"I don’t subscribe to them, can you provide a screenshot?",pihole,1649716467.0
3754,comment,9,i4bfkau,,"I'm about to start pirating stuff again because of how fragmented the streaming landscape is right now, I would need to spend $100/month on services as it is to legally be able to watch what shows I want. That's worse than my cable bill I dropped 5 years ago.",pihole,1649697239.0
3755,comment,1,i4bymf2,,"I've been doing the same, hitting ebay for second hand and ripping them.",pihole,1649705866.0
3756,comment,1,i4c8ppp,,"The ""with limited advertising"" ads are [only on specific seasons of only 4 of the shows in their catalog,](https://help.paramountplus.com/s/article/Why-am-I-still-seeing-ads-when-streaming-video-on-demand-with-the-Commercial-Free-plan) they presumably couldn't get the full rights to. I think it's important to be specific because sometimes people try and hide behind ambiguity to make the advertising seem worse than it actually is.",pihole,1649709819.0
3757,comment,1,i4cfnnz,,"I've got P+ higher tier and the only ads I've seen have been pushing their own programs. I can tolerate that.

Not to mention the 'limited ads' is only 4 programs. So yeah, it's almost entirely ad free.

&#x200B;

>Premium subscribers enjoy on-demand content free from advertisements. However, on occasion, you may see brief promotional interruptions during a few select shows.\*  
>  
>\*Season 1 of: Limitless and Blood and Treasure; prior seasons of Madam Secretary and NCIS",pihole,1649712494.0
3758,comment,1,i4cgp8u,,"If you can limit the white-list to just your streaming device it might be fine I supposed. But doubleclick is a google ad service used across the whole web, probably the single service that spawned the idea for pi-hole. If you white-list it on the pi-hole at a global level, most ads will come back on all devices.

I think whitelisting cbs/paramounts domains specifically is fine if you have to. Paramount+ is terrible and you gotta do what you gotta do.",pihole,1649712905.0
3759,comment,1,i4cxe0q,,"That’s what I signed up for, couple movies, Picard, discovery, 1883 and maybe Halo then I’ll unsub when I run out of stuff for a bit. I don’t get any ads. At most I get a promo for another paramount show, but no blatant ads.",pihole,1649719865.0
3760,comment,1,i4cqwld,,"I cannot, I saw through someone else, the paused video took up about 10% of the area when it was paused and the rest was trying to get you to view some other show or something, I didn’t look too closely at what it was since I didn’t care. I’m not sure if this also happens in the ad-free version.",pihole,1649717072.0
3761,comment,3,i4bjvbh,,Yeah streaming was supposed to make piracy unnecessary but they just made the situation worse,pihole,1649698855.0
3762,comment,1,i4ci8w8,,"Interesting, I didn't know that.  the only thing I subscribe to peacock for is Rugby, and that's ad-free even on the low-budget plan.",pihole,1649713523.0
3763,comment,1,i4cxmfi,,"I also get Paramount ads on my iPhone app and Amazon. Just the straight up blocking on computer browser caught me by surprise. 

I do want to start Halo though after I finish a few other shows.",pihole,1649719967.0
3764,comment,1,i4cs0a4,,"Oh it’s just showing other recommended shows on the platform? I’d assume their homepage has a grid of recommended shows to watch, does that count as advertising?",pihole,1649717540.0
3765,comment,1,i4dc9dr,,"I think so? It’s not going towards my point on advertising, just not great ux",pihole,1649726478.0
3766,post,2,u0qyh6,Audit log accident,"I made to to look online before asking, but i cant reset my audit log with raspberry pi 3B+ the sqlite isnt  recognized in my pi sadly . any solution?",pihole,1649624510.0
3767,comment,1,i480ze3,,"what do you mean, it is not recognized?

`sudo apt install sqlite3`

`sudo sqlite3 /etc/pihole/gravity.db ""DELETE FROM domain_audit;""`",pihole,1649630917.0
3768,comment,-1,i481esx,,"Too late, I just reinstall pi from scratch and reinstall pihole...",pihole,1649631106.0
3769,post,3,u0qipa,Question: best way to block/ignore a specific URL?,"In the last 30 days, out of a total of 259,239 queries from my main PC, 224,744 were to *events.gfe.nvidia.com* which were blocked. Is it most effective/efficient to let the PiHole continue to block all these, or is there a better way I can blacklist that domain to take some pressure off my PiHole? Thanks!",pihole,1649623263.0
3770,comment,2,i47lqhy,,"> or is there a better way I can blacklist that domain to take some pressure off my PiHole?

Local hosts file on the PC.",pihole,1649624282.0
3771,comment,1,i489bo1,,">best way to block/ignore a specific URL?  
>  
>events.gfe.nvidia.com

Minor terminology correction - that is a domain, not a URL.",pihole,1649634739.0
3772,comment,1,i48qh0k,,">or is there a better way

You could stop/disable the nvidia software from automajically starting every time you boot your computer.

If you actually use the software just keep doing it the way you are now",pihole,1649642792.0
3773,comment,1,i47rykw,,"Yeah, pretty much what I was thinking. Thanks.",pihole,1649626955.0
3774,comment,2,i4cevsy,,Fair enough.,pihole,1649712188.0
3775,comment,1,i4ceh7n,,Good idea! I'll look into that too. I think the only running nvidia software/service I use on my PC is doing auto driver update checks. This seems to have just started recently tho.,pihole,1649712032.0
3776,comment,1,i4a94k7,,"That's 312 requests per hour or 5 per minute? Hmmm, Pihole's default TTL block is 2 seconds, maybe [increasing the TTL](https://www.reddit.com/r/pihole/comments/tolq3g/fyi_it_seems_that_the_reddit_app_is_responsible/i26yeqs) could help?",pihole,1649679261.0
3777,comment,1,i4ce693,,Hrm. That's a good point. I feel like I had to increase the timeout at some point in the past for something. I'll look into that. Appreciate the thought!,pihole,1649711914.0
3778,post,5,u0o3w2,Docker container takes over hosts DNS?,"Hello!

I have a really strange issue I can’t explain, I hope someone had a good explanation or I’m just going mad!

I have a Ubuntu server and a few weeks ago I installed Pihole specific for another VLAN on my network to use for DNS blocking.

When I stopped the docker container to do some maintenance and all DNS stopped working on this server but I never set this servers DNS to use Pihole it should still be using my normal networks DNS? 

Is there anything in the Docker install that would take over or change the local servers DNS?

Apologies I’m not that familiar with the project and finding it hard to figure this out for myself 😢.

Cheers

D",pihole,1649616423.0
3779,comment,2,i47rrbe,,"Does the Ubuntu server transitively depend on pihole DNS? E.g you might have the Ubuntu server set to use your router for DNS, and have your router set to use pihole for DNS.",pihole,1649626870.0
3780,comment,1,i53ph8h,,Just wanted to update to say it was because it was using port 53 locally which overlaps with systemd dns service which wasn’t working as I had Pihole running. The system dns uses the local port 53 for resolution.,pihole,1650215467.0
3781,comment,2,i49fzte,,"Hi there thanks for replying, it’s picking up an address via DHCP but that address is not my Pihole it’s my Unifi USG DNS so I’m stumped!",pihole,1649657564.0
3782,post,132,u0myv8,"Has anyone actually 100% confirmed that a device on their network (TV/PC/Mobile (including specific apps) have actually bypassed their pihole by using hard coded DoH (DNS over HTTPS)? If so, which device/app?","So I've come across articles like this (https://winstonprivacy.com/blogs/articles/how-advertisers-and-tracking-services-are-bypassing-pi-hole) many times, so I was curious. I've heard reports of certain mobile apps like TikTok having hard coded DNS, and I've also heard that certain Android devices also use hard coded DoH. The thing is though, I've never actually come across a situation where my pihole fails to block something. I was wondering if anyone had any actual proof of which devices/apps truly use forced DoH, and if so, what were they?",pihole,1649613263.0
3783,comment,38,i46wk4r,,"Haven't encountered whole embedded systems that bypass DHCP scope options personally, however, plenty of applications do not respect the dns servers set in their respective OS. For example, instant messaging (messenger), instagram etc.",pihole,1649613831.0
3784,comment,25,i47447u,,TikTok tries to do this if you block any of their domains. It'll attempt DoH via Google DNS.,pihole,1649616933.0
3785,comment,11,i476yfa,,"App are probably bypassing via IPv6. I setup Unbound with IPv6 turned on.

IPv4 DNS **127.0.0.1#5335**

IPv6 DNS **::1#5335**

After switching on IPv6 on my **Unbound**, I managed to block Instagram and Facebook completely. Instragram and Facebook was actually bypassing blocked DNS on IPv4 by using IPv6 address. Now, nothing loads.

I will give TikTok a test shortly.",pihole,1649618112.0
3786,comment,6,i487c5p,,Echos and kindle fires,pihole,1649633816.0
3787,comment,4,i4869tu,,My Kindle Fire HD 10 hard codes Google's DNS 8.8.8.8. No matter what I put in. I've manually put in my router (which points to both my piholes as well as both my piholes) and the Kindle will add a fourth DNS (8.8.8.8). So damn frustrating. [Kindle DNS Screenshot](https://i.imgur.com/gN5UD47.jpg),pihole,1649633326.0
3788,comment,3,i47slxp,,Evernote seemed to consistently bypass the wirguard pihole I had set.,pihole,1649627232.0
3789,comment,4,i494thn,,"Again I'll post this: Set a static route in your router to 0.0.0.0 for 8.8.8.8 and 8.8.4.4. That'll fix it.

IP 8.8.4.4
Netmask 255.255.255.255
Gateway 0.0.0.0

IP 8.8.8.8
Netmask 255.255.255.255
Gateway 0.0.0.0",pihole,1649650222.0
3790,comment,2,i47foz3,,I have an monitor for my electric box and it bypasses everything. ASUS Merlin with dnsfilter showed that.,pihole,1649621760.0
3791,comment,2,i48ptv3,,Yes and I have noticed by blocking all external DNS servers and blocking port 53. Mainly Chromecast and a Smart Tuya plug.,pihole,1649642492.0
3792,comment,2,i49llvs,,"I simply do a destination NAT on my firewall to route back DNS requests towards Google DNS to my Pihole.
I get a lot of syslogs for that.",pihole,1649661913.0
3793,comment,2,i49sfwn,,"Not even DoH, my old work laptop just forced a locally set DNS server that allowed the company to monitor traffic. Not only did it mean adverts ahoy, but also a bunch of stuff I needed to connect to for clients just didn't work.",pihole,1649667587.0
3794,comment,2,i49wm7b,,"If my wife is connected to 5g and wifi at the same time, it uses the DNS of the 5g band. Pisses me off",pihole,1649670976.0
3795,comment,2,i49z76l,,"Yes...  

All traffic to popular dns servers (cloudflare, google, ms, spectrum, quad9, etc) that doesnt originate from my pi-hole is blocked & logged. I have an alias of probably 30 dns servers. This rule applies only to my vlans, as it breaks my partner's phone apps, and windows programs.",pihole,1649672967.0
3796,comment,2,i4beqew,,i swear my Google Chromecast with TV does it but i have not really done a deep dive into the logs to verify it.,pihole,1649696925.0
3797,comment,2,i4cb8ug,,Amazon fire tablets and I imagine fire sticks as well are hard coded to bypass pihole.,pihole,1649710785.0
3798,comment,2,i4czwlj,,"YouTube bypass it, 100%,
Tried to block all outgoing port 53 but from pihole server to force everyone on the network to use it… guess who’s not working if 8.8.8.8 port 53 doesn’t work?
(Time to learn how to masquerade I know I’m just slightly lazy)",pihole,1649720990.0
3799,comment,2,i4zty0k,,"I had to manually enter DNS of pihole on an Android device to block ads regardless of router settings and ISP router pointing to pihole, now ads are blocked but manually having to set..",pihole,1650138546.0
3800,comment,1,i4jk635,,"Random tip: To see what your pihole is and is NOT blocking, in terminal, just use PiHole -T

This will show you what it's letting by and all that. It'll help you a lot with regular troubleshooting, but NOT with nuisance devices that are going around it. PiHole wont see those. 

But like...98% of my ""is my pihole blocking it?"" problems are solved with ""pihole -t"" in terminal.",pihole,1649840359.0
3801,comment,-4,i49agxz,,Apple devices.,pihole,1649653710.0
3802,comment,24,i46wsj9,,This is the reason to block outgoing port 53 for everything but your pihole.,pihole,1649613925.0
3803,comment,14,i477e76,,"Yea, not respecting the DNS choice is fine because you can just re-direct it in your router firmware settings. I have DNSFiltering so it solves that. My question is in regards to DoH though.",pihole,1649618299.0
3804,comment,19,i475dik,,Yes can confirm I saw TikTok on iOS trying to bypass.,pihole,1649617454.0
3805,comment,2,i47lhsr,,"So I just tested it, and I was able to completely block the tiktok app from working simply by doing it via normal pihole port 53 blocking....perhaps it works differently on different devices or something?",pihole,1649624181.0
3806,comment,9,i47acoh,,"I managed to block TikTok with Pi-Hole+Unbound. That error popup for finding network because TikTok cannot connect.

[https://pasteboard.co/63dj8Fr2OY98.png](https://pasteboard.co/63dj8Fr2OY98.png)

Tons of CDN domains TikTok is sneaking around the corners.

\^tiktok$

(\\.|\^)byteoversea\\.net$

(\\.|\^)cdn77\\.org$

(\\.|\^)tiktokcdn\\.com$

(\\.|\^)worldfcdn\\.com$

(\\.|\^)bytetcdn\\.com$

(\\.|\^)tiktokv\\.com$

(\\.|\^)wsdvs\\.com$

(\\.|\^)ovscdns\\.net$

(\\.|\^)atomile\\.com$

(\\.|\^)worldfcdn2\\.com$

&#x200B;

This one will end up blocking Reddit/Imgur... etc

(\\.|\^)fastly\\.net$",pihole,1649619531.0
3807,comment,7,i48azia,,">IPv4 DNS 127.0.0.1#5335  
>  
>IPv6 DNS ::1#5335

Both of these IP's and ports lead to the exact same kernel.  Either one will do - using both has no change in the behavior of unbound.

Note that these are the loopback IP's that Pi-hole uses to communicate with unbound, and individual clients don't use this path.  They go to Pi-hole first, which then goes to unbound.",pihole,1649635520.0
3808,comment,2,i48lcw2,,"> App are probably bypassing via IPv6.

Will this even be possible if your network doesn't support IPv6?",pihole,1649640403.0
3809,comment,1,i4778pt,,Can this be avoided by simply turning off IPV6 capabilities in the router?,pihole,1649618233.0
3810,comment,2,i48fa29,,Do they use DoH or do they just hard code normal port 53 dns equests to google dns?,pihole,1649637537.0
3811,comment,2,i48gnwz,,I run my pihole on 8.8.8.8 and 8.8.4.4 for this reason.,pihole,1649638195.0
3812,comment,1,i4aevk9,,Would that block google.com too or just their DoH dns?,pihole,1649682183.0
3813,comment,2,i4a1tx9,,">merlin

I run AsusMerlin (as DHCP server and DG) and Pihole (as DNS server). I wanted to enable DNSFilter to block non-pihole DNS, but everything broke when I did so and I turned DNSFilter off to get things working again. I need to revisit that at some point!",pihole,1649674842.0
3814,comment,1,i47gbzq,,"What does the monitor for the electric box do? Never heard of this lol. Also, how did you get asus merlin to show you that it was using doh?",pihole,1649622024.0
3815,comment,1,i4dfpek,,Interesting. Any more details on this,pihole,1649727963.0
3816,comment,1,i4afi23,,She'd have to use something like adguard if she wants dns filtering on the cell network.,pihole,1649682480.0
3817,comment,1,i4d0sx8,,Like the youtube app on a phone? Or youtube.com on a PC? I'll test it.,pihole,1649721397.0
3818,comment,2,i5035eq,,Makes sense cause the phone by default probably had google as its dns.,pihole,1650142668.0
3819,comment,10,i49ao9e,,I have a house full of Apple devices and none of them use DoH.,pihole,1649653843.0
3820,comment,32,i46yxxz,,"That's a useful measure, but it doesn't help for DoH.",pihole,1649614811.0
3821,comment,9,i470pvp,,"Those apps do not use 53, they use DoH, DoQ, or DoT for this very reason. It's DoH most of the time as DoT and DoQ can still be redirected. DoH can be stopped with on-path replay but the risk isn't worth it",pihole,1649615541.0
3822,comment,3,i48yyut,,"I can't get that to work on Unifi for some reason.  Tried it both as a WAN out rule and a LAN in.  First rule allows my PiHole to talk on port 53 to anywhere, second then blocks all DNS traffic from anywhere on port 53 to anywhere on port 53.  I have PiHole forwarding to Unbound running on the same Pi, and when those rules are active Unbound is unable to resolve anything.
    
So I've resorted to firewall rules blocking specific devices that I know are circumventing PiHole but that is cumbersome.",pihole,1649647010.0
3823,comment,2,i48joae,,Have you been able to configure this for a dual Pi-hole setup? I attempted with my routers firewall rules (tomato router) but want able to get it working.,pihole,1649639618.0
3824,comment,2,i4c4a0u,,"So, there a plenty of instances where I still get ads even running pihole. Specifically, the YouTube app on my tv. Blocking 53 like you mentioned might solve that?",pihole,1649708135.0
3825,comment,16,i47ra72,,I don't think Firmware means what you think it means.,pihole,1649626664.0
3826,comment,8,i475prc,,Have seen it on Android as well. I have DoH blocked on the firewall though so it failed.,pihole,1649617592.0
3827,comment,3,i477plk,,How did you know it was trying to bypass over DoH?,pihole,1649618431.0
3828,comment,1,i47li5s,,"So I just tested it, and I was able to completely block the tiktok app from working simply by doing it via normal pihole port 53 blocking....perhaps it works differently on different devices or something?",pihole,1649624185.0
3829,comment,3,i47q7tq,,"Possibility, unless the latest version removed the DoH workaround. (Maybe Apple/Google demanded it, idk)",pihole,1649626211.0
3830,comment,2,i47lm2n,,Yea I'm able to block tik tok completely with the above types of normal port 53 blocking on pihole. Are we sure that it uses DoH?,pihole,1649624230.0
3831,comment,1,i4l8vu0,,">     (\.|^)cdn77\.org$

Blocking this one will also stop some of those randomly-generated ad popup domains as well. 

For the others, I usually let my firewall handle that as they seem to stick to the same IP ranges.",pihole,1649870426.0
3832,comment,3,i48scbt,,"It doesn't particularly matter at all if Unbound is listening on its V6 loopback. A client is capable of getting a V6 record over a V4 connection. The reverse is also true, a client can obtain a V4 record over a V6 connection.

You can test this quite easily:
```
dig aaaa google.com @8.8.8.8
```

Which should provide something altogether similar to:
```
;; ANSWER SECTION:
google.com.             47      IN      AAAA    2404:6800:4006:812::200e

;; Query time: 44 msec
;; SERVER: 8.8.8.8#53(8.8.8.8)
```

As you see, we just got a V6 record from a V4 nameserver. It is unrelated, the OC appears to be confused or mistaken.

If your network doesn't have external V6 connectivity, it doesn't matter how it's getting a record, be it via an IPV4 or IPV6 local nameserver.",pihole,1649643693.0
3833,comment,2,i47a92m,,You can give a try I am not sure of your setup.,pihole,1649619489.0
3834,comment,3,i48h7x5,,Ah I see the distinction in your question now. I believe it’s just hard coded. I’ll have to get ntopng running again and double check.,pihole,1649638457.0
3835,comment,2,i4la1z3,,Just DNS. Those IPs are only used for DNS.,pihole,1649870874.0
3836,comment,5,i4aboiw,,You have to put your piholes as no filtering in dnsfilter. If you don’t your creating a loop,pihole,1649680600.0
3837,comment,3,i481f1m,,"It monitors my electrical usage that I can view in an app. 

I could see the queries coming through once I turned in dns filter.",pihole,1649631109.0
3838,comment,1,i4e5arp,,"It's not the best solution as it only helps to mitigate 8.8.8.8, but that's what my smart TV has hardcoded as a DNS server.
So what I do is a dst NAT:
Whenever something tries to reach the above IP on port 53 (no DoT yet), I forward that request to my self hosted Piholes IP.",pihole,1649741506.0
3839,comment,1,i4d9waq,,"Tested on website, iphone app and Samsung tv app",pihole,1649725449.0
3840,comment,1,i4aez05,,So far I have yet to see any proof posted that a device is actually using DoH behind the scenes lol. Many devices hard code dns (normal port 53) but none that i have found yet have built in doh.,pihole,1649682228.0
3841,comment,1,i4dr1rk,,"They have the ability to use Apple Private Relay, which fortunately Pi-hole blocks by default",pihole,1649733096.0
3842,comment,8,i4a6ti4,,"In practice, blocking known endpoints on the HTTPS port helps with most cases. DoH endpoint can't really host a regular webserver so no risk of false positives.",pihole,1649677961.0
3843,comment,2,i4ankio,,"I block port 443 outbound to those servers.  I don't catch them all, but I have a list of common providers (about 30 total) that are blocked.",pihole,1649686102.0
3844,comment,4,i475gg9,,DoQ? I imagine that’s over Quic? I’ll need to look into that…,pihole,1649617487.0
3845,comment,2,i4a6e0o,,"You can't REDIRECT DoT, that's the point of TLS.  
But yes, you can block specific ports",pihole,1649677710.0
3846,comment,5,i49i21v,,"The ""for some reason"" is perhaps not obvious, but expected behaviour.

If you create a rule that blocks port 53 as a blanket rule, either inbound or outbound, then yes, Unbound will fail as it requires bidirectional traffic on port 53.

What you need to do is create a rule similar to ""if $device != $pihole/unbound_host && $outgoing_port == 53; block it"", or alternatively and perhaps preferably ""if $device != $pihole/unbound_host && outgoing_port == 53; forward to $pihole/unbound_host"".

I hope my pseudo-code is clear enough there.",pihole,1649659108.0
3847,comment,2,i49xpty,,"This is my setup - I have two PiHoles, 192.168.42.7 and 8.  Notice the ! in the Src Address box

https://imgur.com/Z39dQJx",pihole,1649671846.0
3848,comment,3,i48pkwl,,"IDK about dual.

 I just created the outbound rule to only allow the IP range the pihole is on out UDP 53 and then limit the DHCP IP range to use IPS not allowed to use UDP 53.",pihole,1649642378.0
3849,comment,2,i4cbkma,,">	Specifically, the YouTube app on my tv.

You won't be able to block YT ads with a domain blocker like Pi-hole. The ads come from the same domains as the content.",pihole,1649710910.0
3850,comment,1,i4c88vh,,"Maybe, as the other posters point out there are ways around it. The good news it should really reduce spam ads.",pihole,1649709641.0
3851,comment,1,i4jjw83,,"The bad news...whenever you use a Google app, like your smart tv, or the youtube app in an AppleTV, or on iOS, or android, or a chrome cast, etc...you're gonna have a bad time. Stop using their apps. 

The good news...YouTube ads are EASILY blocked with Brave browser, and the uBlock Origins extension. 

Here's my set up: I stopped using Youtube apps everywhere, on phone, on apple tv, smart tv, and lappy. It's just too much of a pain to fight,  they send out an update, and shit breaks, they have thousands of ad servers that are the same servers as the content, so it's a losing battle. So I took them out of the equation. 

I use Brave browser on my devices. If I'm watching on my phone, Brave browser alone with the shields up - magically takes out youtube ads. 

When I want to watch on my lappy...same thing. I use Brave browser with shields up - but also with uBlock Origins extension.

When I want to watch on TV? I have an AppleTv, but i stopped using the YouTube app - so I just airplay it from my iphone or ipad. 

So, to summarize. I use a pihole to get rid of all the trash ads from my network. Then I use brave browser to take down the youtube ads. Easy peasy. 

(the uBlock origins extension on brave on my laptop snags a few straggler ads. )

BONUS AD KILLER? Also in brave for laptop/desktop is the Sponsor Block extension (it's a red square icon with a magic wand and like...sparkles coming off it. I'm describing the icon because there's a couple copy cats that are called sponsor block) This extension takes user submissions to block IN-VIDEO sponsor ads from Youtubers videos. Like, the damn Raid Shadowlegends, and Diskplate wall art, and whatever RoyCon earbuds...the extension automatically skips those entire segments. 

\-To summarize my summary lol sorry:

1. Put a piHole on your network. 

2. Use brave browser for youtube everywhere (on laptop/desktop use the uBlock origins, and Sponsor Block extensions with it) If you don't like brave, it's fine. Just use it for youtube ad blocking, and use whatever browser you like, for everything else you do.  

3. To watch on tv: depending on your setup, you can airplay it to an appletv from ios/mac devices, or connect your lappy/pc with an HDMI cable. I've never used chromecast, so i don't know if that'll work. But you can try. 

The ONLY pain point in this? Because I religiously clear cookies from my browsers, I constantly have to sign in to youtube. But i mentally tell myself, it's the same as sending a text. It just takes a moment. Also, ad-riddled sites like, anime sites sometimes get broken by brave, so I have to disable it sometimes. 

Enjoy! (sorry im long winded and crap at explaining things! :)",pihole,1649840122.0
3852,comment,8,i497cnp,,"Personally I'd call a hardware-specific Linux install running on the built-in flash of a purpose-built router to be firmware rather than software. It's a commonly used term in the embedded world, and I don't think the usage is incorrect here.

Calling it software isn't necessarily incorrect either, there is overlap.",pihole,1649651744.0
3853,comment,3,i47t3ww,,? Stock router firmware usually won't let you set a dnsfilter....so you need different firmware...,pihole,1649627447.0
3854,comment,4,i475w31,,Yeah same. I’m blocking DoH and DoT so all bypass attempts fail. I also log the events in syslog so I can review.,pihole,1649617666.0
3855,comment,2,i4779wq,,Can you tell me how to do this?,pihole,1649618247.0
3856,comment,5,i47hc85,,"I have specific firewall rules to block such behavior and if the rules are triggered then a syslog entry gets written to my syslog server which I can review after the fact. I’ve seen many entries in syslog about the rule getting hit, and it started when my partner started using tiktok",pihole,1649622439.0
3857,comment,2,i48phsj,,I don’t have any special DoH rules or anything. TikTok doesn’t work on my pihole network with simple port 53 blocking.,pihole,1649642337.0
3858,comment,3,i47t95h,,It seems tik tok uses a ton of different domains to connect. Not just tiktok.com. another user in this thread posted the list for tik tok if you're interested.,pihole,1649627510.0
3859,comment,0,i49f4fh,,Are you blocking TikTok ads or the entirety of the app/service? Why not just not use it?,pihole,1649656925.0
3860,comment,1,i4amw4o,,What if you disable ipv6 in your router completely?,pihole,1649685817.0
3861,comment,1,i47aebr,,"I can turn off ipv6 in my router, so all ipv6 requests fail. I can test this with ipv6 tests online. It doesn't resolve an IP. I figured that could work. So you're saying that you had devices getting around pihole cause it was using ipv6 instead of ipv4? Or are they using DoH too?",pihole,1649619550.0
3862,comment,1,i4lbv1q,,Thx,pihole,1649871559.0
3863,comment,2,i4adotl,,"Thanks, but I actually did and it still didn't work. I'll try again this weekend. I probably just didn't do it right.",pihole,1649681604.0
3864,comment,2,i48496q,,Oh so it wasn't using DoH. It was just using hard coded port 53 dns. That's different.,pihole,1649632410.0
3865,comment,2,i4dje6r,,I think the issue is that the yourube app uses a fuck ton of different domains. Blocking youtube.com isn't enough.,pihole,1649729575.0
3866,comment,1,i4dk974,,Ok i successfully blocked the youtube app from playing videos on an iphone using normal pihole wildcard domain blocking. The issue is that google uses like 10 domains for youtube so you have to get them all.,pihole,1649729956.0
3867,comment,1,i4dzb04,,Private Relay only affects Safari browsing at this point.  Not apps or other browsers.,pihole,1649737545.0
3868,comment,2,i4adeco,,"Out of interest, how do you manage the maintaining of those known endpoints? I've never managed to find a reliable list.",pihole,1649681461.0
3869,comment,17,i47sapl,,">DoQ? 

DNS over Dairy Queen ice cream cakes?",pihole,1649627098.0
3870,comment,4,i48q5ke,,"I have somewhat documented the process of putting up a Do(H|T|Q)/DNScrypt proxy as a standalone service [here](https://github.com/saint-lascivious/dnsproxy-config).

The repository was kind of hastily thrown up a while ago, and I haven't updated the binaries in quite some time (AdGuard's release schedule used to be quite sporadic), but the guts of it are all there. I just need to go through it and fix up a couple of bits where I didn't expect GitHub to strip the executable bit from files, and mark in the documentation what needs to be set as executable, but if you're even mildly competent with this sort of stuff it shouldn't be difficult to chase down if you get to it before I end up fixing up my documentation.

It's not a huge priority of mine, I've been distracted with another project I'm working on, but it's on the to-do list and I'll get round to it eventually.

The documentation assumes you already have a signed/certified FQDN. You could technically do with with a dynamic DNS hostname, but domains are absurdly inexpensive and I recommend spending a couple of bucks and buying your own domain name. I recommend Namecheap personally. Inexpensive, a large degree of control of the domain's advanced DNS config, and high uptime. I'm not associated with them at all, just my personal recommendation.

If your domain registrar provides certificate generation, or you supply your own certificate (using CertBot), if you're going to be wanting to use this with Android Private DNS at any point (significantly lighter than a VPN for remote access), you'll need to ensure the certificate is generated using the following flag:

```
--preferred-chain ""ISRG Root X1""
```

Additional note: The DoQUIC draft specification has danced around quite a bit with regard to the default port (and many other aspects). My documentation/config file in the linked repository may no longer represent best practice. At the time of my writing this comment, the draft recommends using `853` (it was 8853 previously, and 8053 before that).

I'll address that if/when I update that respository. It's fairly fresh on my mind now so I'll see if I have time to get it done today.",pihole,1649642643.0
3871,comment,2,i48yo8v,,Yeah that’s what I did too initially. Went to a dual setup a little later and then that rule pretty much completely blocked the second Pi-hole from receiving any traffic. Definitely something I’m missing from ip-tables,pihole,1649646857.0
3872,comment,1,i4ag1mc,,"In my case, I literally flashed new firmware on the router to get dns filtering capabilities so idk why that guy is giving me shit.",pihole,1649682739.0
3873,comment,9,i47ur4t,,"Or a different OS on your router? Depends what “stock” is for your router.

MikroTik, pfSense, many others allow full control of all sorts of layer3 stuff",pihole,1649628165.0
3874,comment,13,i477qjt,,"It's a lot of work and testing, involves blocking IP addresses and other things. 

One regex that will help catch a good amount of DoH bootstrap addresses can help get you started: 

    ^(doh|dns|rdns)[-.]",pihole,1649618441.0
3875,comment,3,i4779sa,,Can you tell me how to do this?,pihole,1649618246.0
3876,comment,4,i477rr2,,"It's a lot of work and testing, involves blocking IP addresses and other things. 

One regex that will help catch a good amount of DoH bootstrap addresses can help get you started: 

    ^(doh|dns|rdns)[-.]",pihole,1649618455.0
3877,comment,1,i47ifpy,,I'm going to test this since my wife uses TikTok on her phone lol.,pihole,1649622901.0
3878,comment,3,i47tk3n,,"Biggest thing is blocking their ad arm, which doesn't use the tiktok domains, but rather their others (bytedance, ibytedtos, isnssdk, etc)",pihole,1649627641.0
3879,comment,1,i4af341,,"I don't use it. I don't give a shit about tiktok. I'm asking purely for a proof of concept.

I was able to completely block the app from working by using those domains above. No doh seems to be in play here",pihole,1649682282.0
3880,comment,2,i47b3fi,,"IPtable firewall restricted the port 53.

However, just keep in mind - I'm no expert on DoH in the app. I just managed to prevent app skipping my PiHole.

[https://www.reddit.com/r/Ubiquiti/comments/kpb5ld/redirecting\_all\_dns\_traffic\_through\_pihole\_on/](https://www.reddit.com/r/Ubiquiti/comments/kpb5ld/redirecting_all_dns_traffic_through_pihole_on/)",pihole,1649619841.0
3881,comment,3,i4an2bj,,"Set the global mode or whatever to ""router.""",pihole,1649685890.0
3882,comment,7,i48cxx5,,"Actually, it's Dairy over Queen. It's very rare to see it in use in the wild, as only the most elite aristocrats are able to authenticate with Buckingham.",pihole,1649636436.0
3883,comment,1,i4a6lf4,,What's the benefit of hosting a DoT resolver rather than setting up a VPN server and using its resolver?   (Assuming we don't redirect everything by default),pihole,1649677829.0
3884,comment,2,i4atsuv,,He's saying that what you flashed into your router was an OS and/or software rather than firmware. It's pretty pedantic but not necessarily wrong. There is overlap between what is firmware and what is something else.,pihole,1649688667.0
3885,comment,4,i47yhax,,Yea true.,pihole,1649629799.0
3886,comment,6,i47i68a,,"Take a look at the comment from u/hemingray about regex entries to add to PiHole. In addition to that, [this](https://github.com/DNSCrypt/dnscrypt-resolvers) is a resource I’ve looked at before to build a list of well known DoH server IPs and I block those at my firewall. Finally, adding a rule to block outbound traffic to port 853 will block DoT.",pihole,1649622787.0
3887,comment,1,i479hjf,,Can you explain what this does? I just add this to pihole as a regex filter?,pihole,1649619176.0
3888,comment,3,i47in9w,,"I’m not sure if TikTok stopped this behavior or if my wife just doesn’t use it anymore, but I haven’t seen the bypass attempts in a long time",pihole,1649622990.0
3889,comment,1,i47uemd,,Yea exactly,pihole,1649628014.0
3890,comment,1,i47b7ho,,"Can you explain this more? How did you force DoH to go to your pihole? DoH uses port 443 which is encrypted, so it would bypass pihole.",pihole,1649619888.0
3891,comment,1,i47btz0,,Maybe you misunderstood. I was asking about apps that use DNS over HTTPS from the APP so it will bypass your pihole regardless of whether you have a port 53 dns filter set up.,pihole,1649620147.0
3892,comment,1,i4any0v,,Thx!,pihole,1649686261.0
3893,comment,1,i4d2wx8,,"Depending on the exact use case, very few or none, outside of near zero computational overhead in the mentioned Android Private DNS case.

The meat and potatoes of the comment was in regard to the OC wanting to piss about with a DoQUIC endpoint.",pihole,1649722345.0
3894,comment,2,i4b218t,,"But asus merlin for example literally says it is firmware. It says so on the website even.

""Third party firmware""


https://www.asuswrt-merlin.net/",pihole,1649692005.0
3895,comment,7,i47iar0,,"What about using lists like this with pihole?

https://raw.githubusercontent.com/Sekhan/TheGreatWall/master/TheGreatWall.txt

https://raw.githubusercontent.com/oneoffdallas/dohservers/master/iplist.txt",pihole,1649622842.0
3896,comment,2,i479tj7,,">Can you explain what this does?

This will block anything starting with doh, dns or rdns. (example: doh.xfinity.com would be blocked because it starts with doh.) A fair number of DoH resolvers will use similar hostnames as a bootstrap address. 

> I just add this to pihole as a regex filter?

 Yes",pihole,1649619313.0
3897,comment,3,i47iwtp,,"Yea I need to test this first hand. I remember reading that people were freaking out that it was using DoH, but it turned out that it was just resolving over ipv6 or something, or there were multiple tiktok domains other than tiktok.com that needed to be blocked. I thought it was confirmed that it wasn't using DoH, but I'll need to confirm this.",pihole,1649623101.0
3898,comment,2,i47dssm,,"Have you try blocking DoH/DoT? 

&#x200B;

I took some read here: https://labzilla.io/blog/force-dns-pihole",pihole,1649620966.0
3899,comment,2,i4b6458,,"The manufacturer saying something doesn't necessarily make it correct.

It's Linux, which is an OS. It runs a whole bunch of apps and services, which are software.

On the other hand it is built for a very specific piece of hardware and won't run on other hardware. It runs on flash inside that hardware. In the minds of many, that makes it firmware.

Traditionally firmware has been something far simpler than an entire OS with a full stack of services running on it. Things change though, and that's why I say there is overlap between firmware and OS/software today. Not everyone is open to definitions changing and that leads to more than a little pedantry.",pihole,1649693667.0
3900,comment,3,i47ijwh,,"Oh those lists look great! Honestly I did all my blocking while DoH wasn’t that widespread and haven’t really looked at much since, so I probably should add those lists in addition to the regex rules I have",pihole,1649622949.0
3901,comment,1,i47a6gw,,"Would I also be able to use the below 2 blocklists? Would they help? The 2nd list has IP addresses, so idk if pihole can even use this one.

https://raw.githubusercontent.com/Sekhan/TheGreatWall/master/TheGreatWall.txt

https://raw.githubusercontent.com/oneoffdallas/dohservers/master/iplist.txt",pihole,1649619459.0
3902,comment,1,i47e215,,You can block DoT easily. Blocking devices from using DoH is an entire other ordeal.,pihole,1649621072.0
3903,comment,1,i4b8bcr,,Fair enough. I regret nothing,pihole,1649694511.0
3904,comment,1,i47iq3x,,"Honestly I still am figuring out if any devices or apps actually use hard coded DNS over HTTPS. So far, I'm only being told that TikTok does this. I will need to test this later since I've never used TikTok in my life. My main concern is that Smart TVs/Streaming devices will hard code DoH, which would really suck. I haven't ever come across this yet though, have you?",pihole,1649623023.0
3905,comment,2,i47cd10,,If you have a firewall that can parse IP lists for it's rules. (pfSense can),pihole,1649620367.0
3906,comment,2,i47ieht,,"For DoH, I don't think there is a way around it. It's like VPN, it just skip over the network filtering entirely that it won't even hit PiHole at all.

I did this quick test on my Firefox setting has DoH setting in the Network button.

It just bypass my blocklist entirely. So DoH is privacy but sucks for parental control.",pihole,1649622887.0
3907,comment,2,i4babld,,"Nothing to regret. ASUS isn't wrong. People calling it an OS aren't wrong. It's both and neither, depending on opinion. And you probably know what people say about opinions...",pihole,1649695275.0
3908,comment,3,i47j4fj,,"I haven’t come across IoT devices doing DoH, but I only have a smart thermostat, a couple Echo speakers, a smart garage door opener, and a couple Roku players. They DEFINITELY have hardcoded DNS servers and my DNAT redirect rules deal with that.",pihole,1649623190.0
3909,comment,3,i4825b2,,"I haven't noticed that any of my devices or any of my apps ever managed to bypass my DNS server.

My Samsung SmartTV regularly tries to directly use IP addresses to establish connections though, which gets denied by my router.",pihole,1649631442.0
3910,comment,1,i47cimu,,"Have you come across any apps or devices that use hard coded DoH, or fall back to DoH when regular port53 traffic is blocked? Do you have any examples? I'm trying to figure out if any devices or apps on my network are bypassing pihole. So far everything seems to work as it should but I'm just curious anyway.",pihole,1649620433.0
3911,comment,1,i47iihu,,Yep exactly :-( I think all you can do is block well known DoH DNS addresses in pihole or your router.,pihole,1649622933.0
3912,comment,1,i4bg9i9,,;-),pihole,1649697503.0
3913,comment,1,i47jgm1,,Yea hard coded port 53 dns is easily fixable with dns filtering or something.,pihole,1649623330.0
3914,comment,1,i484boe,,"Yea. My Roku TV uses google dns as a fallback, but not DoH.",pihole,1649632441.0
3915,comment,2,i47csnw,,Only one I know of so far is TikTok.,pihole,1649620549.0
3916,comment,1,i47cyod,,"So you're saying that even if you block TikTok normally with pihole, it will still connect via DoH and the app still functions? If so, I will test this shortly.",pihole,1649620620.0
3917,comment,2,i47ekvu,,"On my end, it attempts to. Shortly after it got denied by pihole, I began seeing attempts to 8.8.8.8/8.8.4.4 on the firewall logs.",pihole,1649621293.0
3918,comment,1,i47exr5,,"Hmm. Are you sure that it isn't just using a hard coded normal Google DNS port 53 request? Do you see it over port 443? 

Also, I posted 2 pihole adlists above. Would those help me at all? I'm not sure about the 2nd one since they are IP addresses, but what about the top one?",pihole,1649621443.0
3919,comment,2,i47ft2u,,It is indeed over 443. Normal DNS is redirected to Pi-Hole by the firewall.,pihole,1649621809.0
3920,comment,1,i47gf5e,,Ok got it. I will test it out. Sorry to keep asking but did you look at the pihole lists i posted? Would those help?,pihole,1649622060.0
3921,comment,2,i47h9pp,,Those are IP lists. They won't work on Pihole but will work with a suitable firewall.,pihole,1649622409.0
3922,comment,1,i47htfs,,"What about just this list? It seems to be formatted correctly for pihole since it has the URLs too. In the below Reddit thread, it was posted after a pihole dev said that the original wasn't formatted correctly.

https://www.reddit.com/r/pihole/comments/qdg99i/blocklist_for_dns_over_https/

https://raw.githubusercontent.com/Sekhan/TheGreatWall/master/TheGreatWall.txt",pihole,1649622638.0
3923,comment,3,i47hzdr,,"Those ones would work. 

PS: for DoT domains, if you have a suitable firewall, blocking port 853 will stop DoT requests.",pihole,1649622706.0
3924,comment,1,i47i41v,,"Yea, for DoT I just blocked TCP port 853 in the firewall settings. I tested it why using ""Secure DNS"" on my google pixel, and it would not resolve, so I knew it was working.",pihole,1649622762.0
3925,post,5,u0ljki,List of,"The domains on ad lists is showing as negative 2 on the admin page. I've tried to uninstall and reinstall pihole many times, but that's not fixing the issue. 

When I run pihole -g I get the following right at the end which I think looks a bit suspicious. I'm also getting an sql error somewhere, but I can't seem to reproduce that at the moment.

      [✗] List download failed: using previously cached list
      [i] Analyzed 110298 domains
    
      [✓] Creating new gravity databases
      [✓] Storing downloaded domains in new gravity database
      [✓] Building tree
      [✓] Swapping databases
      [✓] The old database remains available.
      [i] Number of gravity domains: COUNT(*)
    --------
    110298   (COUNT(DISTINCT domain)
    ----------------------
    110298                 unique domains)
      [i] Number of exact blacklisted domains: COUNT(*)
    --------
    0       
      [i] Number of regex blacklist filters: COUNT(*)
    --------
    0       
      [i] Number of exact whitelisted domains: COUNT(*)
    --------
    0       
      [i] Number of regex whitelist filters: COUNT(*)
    --------
    0       
      [✓] Cleaning up stray matter        

I have an existing Apache2 server on the Pi which I am using for the admin pages and not lighttpd.

Debug log is here: https://tricorder.pi-hole.net/pNKV98P5/",pihole,1649609241.0
3926,comment,1,i46oe62,,"""List download failed""
So the link to the list is not valid anymore?!",pihole,1649610568.0
3927,comment,1,i46q8ig,,"This is the list that is recommended when installing Pihole.

https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts",pihole,1649611307.0
3928,comment,1,i46qzik,,So it's not failing on some lists you added by yourself?,pihole,1649611604.0
3929,comment,1,i46v2yw,,"No, this is a fresh install using all the default options with the exception of changing the web server to Apache.",pihole,1649613233.0
3930,comment,1,i48b6rc,,"What nameserver is the Pi using?  If it can't connect to the adlist, it can't download any of the domains on that adlist.

`cat /etc/resolv.conf`",pihole,1649635614.0
3931,comment,1,i49gl2d,,"    > cat /etc/resolv.conf
    
    nameserver 192.168.1.1
    nameserver 127.0.0.1

First IP is the address of my networks router. I think it can resolve as when I try:
    
    > dig @192.168.1.1 reddit.com A    
    ...
    ;; QUESTION SECTION:
    ;reddit.com.			IN	A
        
    ;; ANSWER SECTION:
    reddit.com.		251	IN	A	151.101.1.140
    reddit.com.		251	IN	A	151.101.129.140
    reddit.com.		251	IN	A	151.101.65.140
    reddit.com.		251	IN	A	151.101.193.140
    ...
The top sections of the output from pihole -g also suggests it's resolving:
    
    ...
    # Start StevenBlack
    
    #=====================================
    # Title: Hosts contributed by Steven Black
    # http://stevenblack.com
    
    0.0.0.0 wizhumpgyros.com
    0.0.0.0 coccyxwickimp.com
    0.0.0.0 webmail-who-int.000webhostapp.com
    0.0.0.0 010sec.com
    0.0.0.0 01mspmd5yalky8.com
    0.0.0.0 0byv9mgbn0.com
    0.0.0.0 ns6.0pendns.org
    0.0.0.0 dns.0pengl.com
    0.0.0.0 12724.xyz
    0.0.0.0 21736.xyz
    ...",pihole,1649658002.0
3932,post,3,u0li06,Adlist total numbers dropped drastically.,"Probably a stupid question but I have about 15 lists running and up until a month ago it was saying about 750,000 adlist domains were being blocked. I ran the Gravity Updater and it dropped to about 150,000, it had since worked its way up to about 180,000. So what gives? All the lists just flushed a bunch of dead ad link domains? Is it another way of blocking? Just curious.",pihole,1649609114.0
3933,comment,2,i46q1m7,,Take a look at the output of `pihole -g` and see which lists are not loading.,pihole,1649611229.0
3934,comment,1,i46q413,,Thanks for the tip!,pihole,1649611257.0
3935,comment,1,i4ay2od,,"So I ran pihole -g all lists are loading, one list had 2 invalid domains. I deleted all 19 lists and readded from firebog including some I didn't have previously. Only have 208,000ish. I guess they just pruned the lists.",pihole,1649690393.0
3936,comment,2,i4b6sow,,"What is the output of the following?  I'll load all your lists and see what the count is at my end.

`sqlite3 /etc/pihole/gravity.db ""SELECT address FROM adlist where enabled=1""`",pihole,1649693933.0
3937,post,3,u0khnv,Updated from 5.8 to 5.9 - ALL of my custom blacklist/groups/etc ARE GONE!!!!!!,"Not cool! Why did this happen and how do I fix it? I updated from 5.8 to 5.9, and now ALL of my custom adlists, group settings, EVERYTHING is GONE!!!! How do I get this back? It's as if I had completely removed and reinstalled pihole!",pihole,1649606182.0
3938,comment,6,i46fonf,,You have a backup of the config files?,pihole,1649607114.0
3939,comment,2,i46fykj,,"Use transporter in piho,e to backup, before upgrades and often",pihole,1649607225.0
3940,comment,2,i46g9h6,,How did you update? Are you running pi-hole natively or in docker?,pihole,1649607347.0
3941,comment,2,i46h4jn,,Always backup before updates or upgrades.,pihole,1649607685.0
3942,comment,2,i46mj5t,,"Stalked your profile and saw you post in homelab so I'm assuming you have a homelab. 

Why aren't you taking image backups of your lab? If you're using proxmox you can automate a snapshot schedule. I take snapshots every week and save them on an external NAS.  

If an update breaks something I just roll back to a weekly snapshot and in order to mitigate potential damage even further, I try to plan all my updates 1-2 days after the backups are complete so I don't lose up to 6 days worth of data.",pihole,1649609835.0
3943,comment,0,i473s9l,,"If only you connected the dots between your own comments....    
     
>I trusted this not to lose things since it never did before. What's so different in 5.9 that this even happened?   
    
Bugs happen.     

>   Maybe some sort of bug happened?    
     
Ah, I think you may be on to something there...      
     
>This morning, the backup went down due to a failed SSD.    
     
And yet you come here acting like you've never seen computers ""lose things, since it never did before.""",pihole,1649616797.0
3944,comment,1,i46g04d,,"How did you update?  


You can restore backups with teleporter, in case you made some

`/admin/settings.php?tab=teleporter`",pihole,1649607242.0
3945,comment,1,i486nmp,,Can you schedule tranporter backups?,pihole,1649633503.0
3946,comment,1,i46g2an,,"I had an old one so not much lost, but since when did upgrades start wiping things out?",pihole,1649607267.0
3947,comment,1,i46gpz6,,"Natively. Never use docker. Every past upgrade went will, this one......well.....basically acted like I had just installed Pihole.",pihole,1649607530.0
3948,comment,2,i46noiu,,"I had been backing it up as I have two piholes, but then switched to using Gravity sync. This morning, the backup went down due to a failed SSD. I think at this point I will start imaging these things. I just find it weird what even happened, but I had a backup that wasn't too terribly far off, just out a few months.",pihole,1649610284.0
3949,comment,1,i473zj3,,Yeah but this is unrelated to what even happened.,pihole,1649616879.0
3950,comment,1,i4882xe,,That would be neat to have.,pihole,1649634159.0
3951,comment,1,i48ucjl,,"Indirectly, sure. If the thing you want to do has a command line access path, the ""can I automate this?"" question is almost always going to be answered with ""yes"". It's just not necessarily going to be clicking a button on a graphic interface.

Create a small shell script that changes to your preferred working directory (the teleporter command backups up to the current working directory from the command line), and runs `pihole -a -t`.

Then create a cron entry for it, to run at your desired frequency.",pihole,1649644666.0
3952,comment,7,i46hb6x,,Always make a backup before upgrading essential software.,pihole,1649607758.0
3953,comment,1,i46qa6o,,">	since when did upgrades start wiping things out?

They are not programmed to change any of your existing lists.",pihole,1649611326.0
3954,comment,1,i48un5s,,See the reply I made to the above comment [here](https://www.reddit.com/r/pihole/comments/u0khnv/updated_from_58_to_59_all_of_my_custom/i48ucjl). Gimme a bell if you get stuck/can't figure it out.,pihole,1649644811.0
3955,comment,2,i46hsgb,,"Yeah, know that now. I trusted this not to lose things since it never did before. What's so different in 5.9 that this even happened?",pihole,1649607948.0
3956,comment,1,i46txze,,Which is extremely weird. Maybe some sort of bug happened?,pihole,1649612778.0
3957,post,4,u0k5la,Brave Browser and Pi Hole,"I am fairly new to Pi Hole and love what it is blocking on my network but I am having some issues with the Brave Browser.  I've been trying to sign into my Google Account since Pi Hole was put up.  I researched it and found to whitelist gstatic.com.  Now, if I use Chrome, Edge, IE, basically anything else that is NOT Brave, I can log into my Google Account.  But when I use Brave, it will not log me in.  Then if I try to click on any thing dealing with Google: Sign in, Gmail, Sheets, etc., anything that would verify my account, I would get a 400 error.  

I am going through my query logs and am not seeing anything being blocked.  I do not know if there is a delay with the logs or not but I am at a lost in trying to troubleshoot my issue.  If anyone knows the fix, or can send me down a path to remedy this I would appreciate it. Thanks in advance.",pihole,1649605179.0
3958,comment,2,i46cchg,,"Its not Pihole but Brave thats having issues. You probably have shields with aggressive stance and it blocks most of the things, thats why it works on Chrome/Edge and not on Brave.  


Try to change the shields to medium.",pihole,1649605775.0
3959,comment,1,i46crqq,,"Sounds like a problem of brave an not of pihole. 

[https://www.reddit.com/r/brave\_browser/](https://www.reddit.com/r/brave_browser/)",pihole,1649605948.0
3960,comment,1,i47nrtl,,"Turn off pihole for 5 minutes, then try logging in with Brave while pihole is not blocking.  See if it works.

&#x200B;

Having said that, if other browsers work, then it sure doesn't look like DNS blocking and it instead points to Brave settings.",pihole,1649625156.0
3961,comment,1,i497wcj,,"You should know, that Brave is not a privacy browser. It is not a browser I'd suggest anyone use. 

It was founded on the idea of collecting telemetry about you and your browsing habits. Including getting websites to sign up with their information sharing agreements. 

Brave should not be used.",pihole,1649652082.0
3962,comment,1,i46tjdm,,"I will check it out. Only reason why I blamed pihole because prior to me adding it to my network, I was able to log in to my Google account.",pihole,1649612615.0
3963,comment,1,i46ural,,"Ok maybe than idk, why would the other browsers work. Has brave browser some custom dns settings?",pihole,1649613104.0
3964,post,1,u0j2ib,Cellphone bypassing WiFi DNS settings,"I've tried looking around assuming this is a common issue but can't find a fix. My cell phone (Samsung Z fold 3) looks to be falling back to the cellular network DNS if it doesn't get a resolution through WiFi?

I was not getting intended results on my wifi with the proper settings. I tried turning off the cellular connection so that I was sure all traffic was going through WiFi and then it worked. Is there some setting that is allowing it to use the cellular DNS settings as an additional tertiary option?",pihole,1649601955.0
3965,comment,2,i465itw,,"I also have a Z Fold 3 however I'm not hitting the same experience you are as I normally don't see ads come though, although not sure if it's anything to do with me having 2 Piholes for redundancy so both DNS options for my device's network info (IP/Subnet/Gateway/DNS1/DNS2) is taken by both my piholes.",pihole,1649602920.0
3966,comment,1,i4656wb,,"I'm not sure of any setting like that, but what works for me is setting up Wireguard and making a split tunnel vpn back to my home network.  That way I guarantee that I get my ad-blocking even when I'm out and about, and as a bonus I can access the rest of my network too if I ever need it.",pihole,1649602778.0
3967,comment,1,i467iz8,,"Try going to the wifi settings of your phone, change IP allocation method from DHCP to static. It *should* fill in all the blanks for you, which is the config DHCP server gave you in the first place. Then edit the DNS settings to make sure it is pihole's IP.",pihole,1649603769.0
3968,comment,1,i46a7mu,,"I have the same phone, I can't say I've ever seen this type of activity. But I also have a Bixby routine setup to turn off mobile data when connected to WiFi. Which would stop it being able to fall back to anything.",pihole,1649604906.0
3969,comment,1,i47su7n,,"For my phone (LG Velvet), I had to go into advanced wi-fi settings and turn off ""switch to mobile data."" If your phone has any ""smart wi-fi,"" ""switch to mobile data when internet unavailable via wi-fi,"" or any other similar settings, maybe try turning those off if you haven't yet?",pihole,1649627331.0
3970,comment,1,i4aoh1n,,"Check the network settings on your device, make sure Private DNS is disabled. 

On Android, if DHCP only offers one DNS server, it will automatically set the secondary to 8.8.8.8. The best fix for this is to have DHCP hand out the pihole IP for both.",pihole,1649686482.0
3971,comment,1,i46693c,,I set both options to same ip for the pihole. So I think it should do the same. Thank you.,pihole,1649603228.0
3972,comment,1,i467ub1,,Yeah I've done that. Both the primary and secondary DNS are manually set to the pihole.,pihole,1649603903.0
3973,comment,2,i46b5yl,,Yeah turning off the mobile data fixes it.,pihole,1649605298.0
3974,comment,1,i47wpk7,,I ended up just setting a routine to turn off mobile data on my home wifi and turning it back on when I disconnect. It works for now.,pihole,1649629021.0
3975,comment,1,i468dwg,,"Try setting the second one to be 0.0.0.0 if it allow you to do so.

What are you using to verify adblock isnt working?

In chrome theres a secure DNS option you might have to disable

https://blockads.fivefilters.org/ can tell if your adblock is running.",pihole,1649604136.0
3976,comment,1,i46cpmm,,"Check out Bixby routine, it comes installed on the phone. You just need to setup a routine, when WiFi is connected to the internet, disable mobile data. When WiFi is not connected to internet, enable mobile data. It actually helped improve battery slightly too.",pihole,1649605925.0
3977,comment,1,i46llt8,,"I was just noticing ads in chrome.

I verified the cellular network fallback using the link you provided.

I click on it and it says no ad blocking. I turned on airplane mode and turned back on only the WiFi and refreshed the page and it now says ads are blocked.",pihole,1649609469.0
3978,comment,1,i46lray,,"Humm... Strange. Maybe have the habit to turn off cellular, it would save you some battery too!",pihole,1649609529.0
3979,comment,1,i4aovqm,,"If it's only in Chrome, go into it's settings and turn off DoH.",pihole,1649686652.0
3980,comment,1,i46m3b5,,I use Bixby routines for other things and another person said they use it to turn off cellular while on WiFi so I may just do that. Just thought it was weird that I hadn't seen any other posts with the same issue as it seems like a default behavior of my phone.,pihole,1649609658.0
3981,post,1,u0iy2q,Different workflows and their pros/cons,"Hi, I was wondering how to setup my network when it comes to DNS. From a hypothetical standpoint, let's say that I have a pfSense router and a piHole, both physical devices. For the sake of this post, I'll be using Cloudflare for name resolutions that aren't cached. Here are the options I feel like I have to choose from:

1) Client > PiHole > Router > Cloudflare

dhcp lease - pihole as the DNS

pihole upstream - custom (router)

router DNS - cloudflare 

2) Client > Router > PiHole > Cloudflare

dhcp lease - router as the DNS 

router DNS - pihole

pihole upstream - cloudflare

&#x200B;

I am no expert when it comes to networking, just a little hobby I picked up recently. Thanks for any replies in advance and have a great day!",pihole,1649601583.0
3982,comment,2,i464ssa,,"The ideal option would be

client -> Pihole -> cloudflare",pihole,1649602608.0
3983,comment,1,i46hgq4,,"Client, pi-hole, pfSense, pfSense's Unbound.

I use pfSense for DHCP, DHCP6 and Router Advertisements also.",pihole,1649607820.0
3984,comment,1,i464ykw,,"of course you could also set the DNS upstream IP inside PiHole to point to your router and then in your router to cloudflare, but this makes also no sense :)

Just define a upsteam DNS inside PiHole.",pihole,1649602678.0
3985,comment,1,i466tds,,Okay that makes sense. What about the possibility of the pihole being unreachable for some reason. If I setup the router's primary DNS as pihole and secondary as cloudflare that could be a good redundant solution right?,pihole,1649603465.0
3986,comment,2,i467kf2,,"No, bc secondary don't mean in this case it's 2nd choice. Your clients pick one or the other randomly.  
There are a lot discussion about that topic like here: [https://discourse.pi-hole.net/t/primary-vs-secondary-dns/1536](https://discourse.pi-hole.net/t/primary-vs-secondary-dns/1536)

So your only backup would be to run another Pihole.",pihole,1649603786.0
3987,comment,2,i467rh8,,"Oh, thats my bad. Thanks for the explanation!",pihole,1649603870.0
3988,post,36,u0g8wf,Pihole will sporadically stop working for some pages,"Hi,

I’m having some weird issues with my Pi.Hole and I’m curious if there is any fix without having to start from the ground up.

I’m running a Tenda router with the IP of the Pi.Hole as the main DNS.  So everything on the network routes through it.

It’ll work find for some time, then some things will simply not load when on WiFi.  iMessage, Reddit, Whatsapp, Netflix and anything else on the Firestick streaming will work just fine but fast.com doesn’t as well as many other websites in Safari on mobile.

When typing in pi.hole in to my laptop the page cannot be displayed, typing in the IP/admin brings up the page but with NaN as all the queries with the refresh spinner spinning constantly, I can authenticate fine too.

I’ve found that logging in to ssh and typing ‘pihole restartdns’ will fix the issue, but I can’t be doing that every time theres an issue.

Screenshots of my blocklists here:
https://imgur.com/a/82xHIy4 

Many thanks,",pihole,1649592403.0
3989,comment,6,i45xmkk,,"Please generate a debug log, upload the log when prompted and post the token URL here.",pihole,1649599416.0
3990,comment,3,i46ar6f,,"I'm having this same issue and blamed on faulty hardware, changed and still same issue, also my local dns registres have issues too",pihole,1649605128.0
3991,comment,2,i49l420,,"Had to do this again last night before bed, we were sat watching Netflix for quite a few hours and i picked up my phone to check out what else an actor had been in and i had no internet, restarting the DNS from SSH got it to work immediately.

Did my log show anything /u/jfb-pihole ? This only seems to be happening the last week or two, i've had PiHole for months and months with no issue.",pihole,1649661511.0
3992,comment,2,i45zroe,,"Edited: Sorry, it does take a while...

https://tricorder.pi-hole.net/wG9Y6S75/ there we go",pihole,1649600405.0
3993,post,0,u0f13b,Pihole utilizing one core 100% all the time,"Hi guys,

as title describes..Running pihole for several years now, never had a problem.

A few days ago i upadted the system (system updates, new pihole version, ...).Since then the command ""/usr/bin/cron -f"" is using 1 core 100% continuously..As i stop pihole container, the process disapprears.

[htop screenshot](https://preview.redd.it/oow3ax6vjos81.png?width=1216&format=png&auto=webp&s=1899df038bbc1e54f981073b3aa1a34c631cd860)

I first thought it might be the gravity update and left it over night.. but even after about 12h uptime it was still there..

Any ideas what could cause that?I'm running on a RPi3 if that matters

EDIT: Running as docker-container.EDIT2: It's no cron-job defined on the host as it's starting/stopping with the pihole-container. Inside the container I didn't change any crons.

&#x200B;

**SOLUTION**: I still don't know what the problem is, already tried a totaly fresh container, fresh config from scratch on my other Raspberry Pi and got the same problem. When tinkering around i noticed, that it doesn't happen with an older verison of the pihole-image (pihole/pihole:2022.02.1).Maybe there's something wrong with the image? Idk. My solution for now is to use the ""older"" image and call it a day. Will have an eye on it when i try to update next time.

Anywasys, if somebody has another idea how I could possibly solve this with the latest image im still interested!!

EDIT: Problem known! [https://www.reddit.com/r/pihole/comments/tu54a8/latest\_docker\_image\_broke\_pihole/](https://www.reddit.com/r/pihole/comments/tu54a8/latest_docker_image_broke_pihole/)

Thanks to anyone, who tried to help :-)",pihole,1649587180.0
3994,comment,2,i45h8bv,,"There is a cron job running, as you can see in the screenshot. Check your cron jobs for further investigation.",pihole,1649589973.0
3995,comment,1,i466o6f,,The docker version is a bit funky these days. If able use the non-docker version,pihole,1649603404.0
3996,comment,1,i46e6u9,,"UPDATE:I've re-created the container and found the following message in the logs after bootup.

[https://ibb.co/BK69w6K](https://ibb.co/BK69w6K)

They keep showing up endless.  


EDIT: They only show up, when reloading the Web-UI. Endless just when Browser views the Dashboard.",pihole,1649606521.0
3997,comment,1,i4b6keg,,"How can I see how much cpu mines using?

I only have a pi 2 and in running piVPN and pihole

I feel like I might be maxing out the pi",pihole,1649693843.0
3998,comment,1,i45mwtv,,"Thanks for your reply.
I've already checked the cron jobs on my system, there is nothing to find.
If I stop the pihole container the cron task disappears.
Inside the container i didn't change anything within cron.
That's why I thought maybe someone knows this issue :/",pihole,1649593731.0
3999,comment,1,i45u0q3,,"Even inside the container the process is simply called ""cron""..

How can I find out what command it's running?",pihole,1649597649.0
4000,comment,1,i46cgqw,,"Thanks but I'd like to keep it running with docker if possible.  
If i can't find i solution i need to run it non-docker.. already exported settings for that :/",pihole,1649605823.0
4001,comment,1,i4c4c3e,,"You can run for example htop.  
That's what i made the screenshot from. It's like TaskManager but in console :)  
Usually it should be fine. I had Pihole and PiVPN running on a Pi2 before too",pihole,1649708157.0
4002,comment,1,i45z5aa,,"Do you just checked crontab for root or also the subfolders for daily, hourly, monthly etc?",pihole,1649600121.0
4003,comment,1,i45zuc8,,"Pihole updates once a week gravity via cron, I guess",pihole,1649600437.0
4004,comment,1,i465g9e,,grep CRON /var/log/syslog,pihole,1649602889.0
4005,comment,2,i4640ep,,Nah did also check the folders..,pihole,1649602266.0
4006,comment,1,i463cio,,"Don't know the intervall, but yes it does auto updates of gravity.  
But the update of the blocklists shouldn't last more than a day ofer 100% cpu, since it doesn't if do so if I start it manually too.",pihole,1649601980.0
4007,comment,1,i465rg0,,"That's what I'd have tried but syslog is not present inside the container :S  
`grep: /var/log/syslog: No such file or directory`",pihole,1649603020.0
4008,comment,2,i467thz,,Ok I'm not familiar with docker. Maybe you find something in the docker logs?,pihole,1649603894.0
4009,post,7,u0e4zn,Cloudflare DOH and DOT not working?,"I have configured PiHole with DOH and DOT ( [oijkn/pihole-doh-dot: Official Pi-hole docker with both DoH (DNS over HTTPS) and DoT (DNS over TLS) clients. (github.com)](https://github.com/oijkn/pihole-doh-dot) ), and in last couple of days, it noticed that DOH and DOT for Cloudflare not working any more. If I open [https://1.1.1.1/help](https://1.1.1.1/help), it is showing DOH and DOT as No, which is very strange.

I also have one Adguard Home configure in Azure for my mobile, it is using cloudflare DOH and DOT as upstream server, but strangely if I use [https://1.1.1.1/help](https://1.1.1.1/help) on my mobile, it is showing same. I amusing following DOH and DOT.

    https://1.1.1.1/dns-query
    tls://1dot1dot1dot1.cloudflare-dns.com
    https://1.0.0.1/dns-query
    tls://one.one.one.one

Is there anything wrong with cloudflare DOH and DOT service? Is it only me or everyone else having same result?

This docker image using Cloudflared for DOH and Stubby for DOT.

I can see the connectivity to DOH and DOT from the pihole console, this is very strange behavior.

&#x200B;

https://preview.redd.it/v586qq9ocqs81.png?width=1569&format=png&auto=webp&s=2a426dde4b3360975d95c0699a5d5b47a555bef3",pihole,1649582889.0
4010,comment,1,i45j9dl,,"I'm not experiencing any issues with cloudflare DOT today, but I don't use that particular docker image. I run pihole and stubby natively on my server.",pihole,1649591405.0
4011,comment,1,i45xcfh,,Toggle your DNSSEC setting in Pi-hole and see if the website reports differently.,pihole,1649599283.0
4012,comment,1,i49tvkm,,"1.1.1.1 stopped working for me since a few days ago. Cannot ping and DNS failure. I suspected this was an ISP issue, as always. Didn't bother to confirm. 1.0.0.1 wroks but latency is north of 70ms. I've switched to Google until it's fixed",pihole,1649668759.0
4013,comment,1,i4axep8,,"I have tried almost everything, but no clue yet. PiHole able to connect to DOH and DOT, all the DNS are getting resolved from DOH and DOT. 

I would love to fix this, but no idea how. :(",pihole,1649690126.0
4014,comment,1,i4fuvjx,,"The [1.1.1.1/help](https://1.1.1.1/help) works for me, but I get a lot of **dnsmasq\[580253\]: reply error is REFUSED** which is really a problem.  It's not the FTL rate limiter as far as I can tell, since I have that set to 0/0 (unlimited) in the FTL.conf.",pihole,1649777827.0
4015,comment,1,i4g1xjp,,"Update : Fixed.

I was blocking all the DOH and DOT in my local network other than known once, and I was searching for all the query to block each one of them, and I eventually blocked [every1dns.net](https://every1dns.net), which is actually causing this issue. [https://1.1.1.1/help](https://1.1.1.1/help) using [every1dns.net](https://every1dns.net) to verify DOH and DOT, as soon as I disabled this rule, my Pihole detected a DOH or DOT and my Adguard Home detected both DOH and DOT .

So, if anyone else having same issue, can check your block list.",pihole,1649780482.0
4016,comment,1,i46i5ot,,"No changes, it is same on [https://1.1.1.1/help](https://1.1.1.1/help)

Sometimes I am also getting the following error in pihole container logs.

    2022-04-10T15:18:44Z ERR failed to connect to an HTTPS backend ""https://cloudflare-dns.com/dns-query"" error=""failed to perform an HTTPS request: Post \""https://cloudflare-dns.com/dns-query\"": read tcp 172.33.0.100:59446->: read: connection reset by peer""
    2022-04-10T15:18:44Z ERR failed to connect to an HTTPS backend ""https://cloudflare-dns.com/dns-query"" error=""failed to perform an HTTPS request: Post ""https://cloudflare-dns.com/dns-query"": EOF""

This docker image using Cloudflared for DOH and Stubby for DOT.

I can see the connectivity to DOH and DOT from the pihole console, this is very strange behavior.",pihole,1649608094.0
4017,comment,1,i48vp4y,,"I wonder how they can tell it is using DoT, because it looks just like normal https traffic? This is the purpose of DoT, to look like general HTTPS traffic.",pihole,1649645334.0
4018,comment,1,i48wuo3,,">	This is the purpose of DoT, to look like general HTTPS traffic.

DoT is on port 853, while DoH is on port 443 with the https traffic.",pihole,1649645915.0
4019,comment,1,i48z8o1,,"Ok, than how can the test tell I'm using DoH? :)",pihole,1649647153.0
4020,comment,2,i49gpi0,,"Maybe query a very spectific randomized domain, if you are using DoH it would end up in their DoH part. If you are using DoT it would be in the DoT part. If you dont use cloudflare at all they wouldnt recieve that.

Edit: Confirmed. A spectific subdomain of help.every1dns.net is queried",pihole,1649658091.0
4021,comment,1,i49ak3n,,They can identify the port the DNS traffic is on. Port 443 is DoH.,pihole,1649653767.0
4022,post,0,u0bxyg,How can I make a backup of pihole without backing up the whole af card?,I installed it via a tutorial that also used docker and a gui for docker. Portainer I believe. But now I can’t update with $pihole -U even with the normal prefixes before the command. So I want a clean install. But still want to keep my current configurations,pihole,1649572782.0
4023,comment,13,i452gfr,,How about the teleporter page in the setting menu,pihole,1649577998.0
4024,comment,4,i44wgia,,"You can update with portainer, go to the container, press recreate and pull latest image 

If you are still looking for a clean install.

The configuration can be backed up in pihole.

Go to settings > Teleporter > backup.

Please note that this will back up the configuration, not the history.",pihole,1649573514.0
4025,comment,1,i44wb9t,,Shouldn't it auto update?,pihole,1649573412.0
4026,comment,1,i45i4t0,,"In the web panel, go to settings -> teleporter",pihole,1649590619.0
4027,comment,1,i45irco,,"If you have the container configged w interactive terminal access you can use the regular upgrade command. 

Otherwise just use the teleporter feature. Thirdly you can also use something like watchtower to keep an eye out for any container image updates. It then automatically upgrades your docker containers",pihole,1649591061.0
4028,comment,1,i45x6pr,,"Are you running Pi-hole in Docker, or on bare metal.  If in Docker, the `pihole -up` command is inappropriate.

In either case, you can export your Pi-hole settings using the teleporter function (web Admin GUI > Settings > Teleporter).",pihole,1649599210.0
4029,comment,5,i453enr,,Came here to say this.,pihole,1649578757.0
4030,comment,2,i44wo0b,,Thank you. History isn’t important to me. It will rewrite itself.,pihole,1649573659.0
4031,comment,3,i4538ed,,The blocklists update weekly on Sunday but the pihole doesn’t update on its own,pihole,1649578617.0
4032,comment,1,i44wfne,,It doesn’t.,pihole,1649573497.0
4033,comment,1,i453bgo,,"Oh, too bad it's not in it, like the system updates part. And thank you :) .",pihole,1649578688.0
4034,post,0,u0b5au,Pi-hole reconfigure,"Hi, i need to reconfigure my pi-hole from wireless to ethernet cable.

My current setup is with unbound installed. When come to the step for choosing the upstream DNS provider, do i just choose any desired upstream DNS provider from the list or i choose the custom and key in 127.0.0.1#5335? Or i can just choose any DNS provider first and edit it later on the pi-hole admin settings page?

Sorry for the noob question as i do not wish to mess things up after reconfigure.
Thank you.",pihole,1649569417.0
4035,comment,2,i44spto,,"https://docs.pi-hole.net/guides/dns/unbound/

https://m.youtube.com/watch?v=FnFtWsZ8IP0",pihole,1649571027.0
4036,comment,2,i45wfj5,,">do i just choose any desired upstream DNS provider from the list or i choose the custom and key in 127.0.0.1#5335?

Use the custom DNS option offered in the reconfiguration screen, and enter the DNS server as you show here.

>Or i can just choose any DNS provider first and edit it later on the pi-hole admin settings page?

This is also an option, but it's quicker and easier to use the custom DNS option described above.",pihole,1649598844.0
4037,comment,1,i4bci3g,,"Thank you. It worked!

By the way, I’ve installed a Pivpn and downloaded a wireguard app on my iPhone. Under Interface > DNS servers, why it show 10.6.0.1 instead of my Pi-hole IP address? I tried to edit it to my Pi-hole address and it works too. So just curious what’s the differences?",pihole,1649696093.0
4038,comment,1,i4bgiuk,,">why it show 10.6.0.1 instead of my Pi-hole IP address?

That is likely the tunnel port for the Pi.",pihole,1649697599.0
4039,post,1,u07bhl,DNS service not running,"I uninstalled Adguard Home and installed Pi-hole on a raspberry pi 1 model B. However, after installation, I get an error saying ""FTL failed to start due to failed to create listening socket for port 53: Address already in use"". Can someone tell me why this is occurring?",pihole,1649554812.0
4040,comment,2,i440psj,,">	Can someone tell me why this is occurring?

There is another process bound to port 53, and this is preventing pihole-FTL from binding to that port.",pihole,1649555929.0
4041,comment,2,i444ag3,,"Thank you! I didn't realize that in the hurry of getting everything set up, I had installed unbound and never changed the port for unbound to use. So, it was using port 53.",pihole,1649557677.0
4042,post,35,u056ci,SD card keeps getting corrupted after power outages,"Like the title says, power failures seem to be killing my SD cards. I'm running a 4B. Is it the board itself, the power cable? Or is this normal?",pihole,1649547302.0
4043,comment,36,i43trn7,,"All my computers and home servers are hooked up to a UPS. Really recommended today for everyone, it is affordable protection against, power blips and imagine power blips half way flashing firmware/bios etc. = guarrantee bricking devices.",pihole,1649552511.0
4044,comment,29,i43wby7,,Hint: Use log2ram: https://github.com/azlux/log2ram,pihole,1649553770.0
4045,comment,20,i440w0r,,You may have an inadequate power supply that is damaging the card. Add a power failure to that and you can get card corruption.,pihole,1649556014.0
4046,comment,6,i44d9uj,,"I have moved everything to a spare USB HDD and boot off of it, since then there have been no corruptions due to power outages.",pihole,1649562254.0
4047,comment,12,i43jx9b,,"Question, what brand of SD card are you using?  How old (or new) is it?  Not all SD cards are built the same.  It may be time to replace it if it's got some age to it.  Just some initial thoughts.

Just had another thought, what OS are you running and are you only running pi-hole on that OS? Wondering if the overall system OS is causing the corruption.",pihole,1649547743.0
4048,comment,2,i43mtys,,Corrupted file system or really the card gets physical damage?,pihole,1649549123.0
4049,comment,2,i459vq6,,I stopped using sd cards and switched to ssd. Not a problem ever again,pihole,1649584062.0
4050,comment,1,i43tuuj,,I always have an recent image on an alternate SD card ready to slam in. That’s how often this has happened to me.,pihole,1649552555.0
4051,comment,1,i44awev,,SanDisk. I have had one SD card go bad. I'll try to reformat. Best to keep an image of the card so you can burn a new copy if one goes bad.,pihole,1649561017.0
4052,comment,1,i44qjeh,,You can use a flash drive that's what I do. my pi-hole has been running off the same drive for 4 years it's been through 6 multi day power outages and never had a problem.,pihole,1649569641.0
4053,comment,1,i45gejb,,"Many years ago I switched all my RPis to run from a USB pen drive. I found a certain model of tiny SanDisk drives to be really reliable: I haven't ruined a single one of them.
If you're interested I can give you more details.",pihole,1649589360.0
4054,comment,1,i461imv,,"Aside from having a proper power supply, you should also have a good quality SD card. You get what you pay for with SD cards and reliability. I only go with Samsung or Kingston.",pihole,1649601181.0
4055,comment,10,i440yh8,,"I use one on all my TVs and cable modem/router, plus home security system. Ensures my wi-fi remains up and alarm stays active during an outage.",pihole,1649556047.0
4056,comment,5,i44rcjl,,"Very interesting, thank you !",pihole,1649570160.0
4057,comment,2,i45mu6n,,how often did you get power outages?,pihole,1649593686.0
4058,comment,4,i43mr4w,,"2 different brands, I think the first was a Kingston, then a SanDisk then a Lexar maybe...

Was running Buster Lite for the first 2 and updated to Bullseye for the last one.",pihole,1649549085.0
4059,comment,1,i44klil,,"SanDisk Ultras. Raspbian, pihole & unbound. Running two in parallel since 2020, ran single since the early days of Pi-Hole. Can’t really give you an exact age, but one of them is a good 5+ years. They are PoE with the switch on an UPS which gets me past any outage under 20 minutes.

I’ve only lost one card on an RPi.",pihole,1649566192.0
4060,comment,2,i45qomq,,"Every 8 to 10 hours, there's a cut for about 10 mins or so. Sometimes it's fine for days, but at least on Thursdays each week, it's pretty terrible.",pihole,1649595898.0
4061,comment,8,i44kexy,,"I was having the same problem with various SD cards. All of them would last for a month or two at most. Some would even fail after only a few days.

After lots of research, I tried running Samsung Pro Endurance and SanDisk Extreme Pro cards, and they have been fabulous. These cards are designed for intensive read/write applications, such as dashcams and security cams.

I've been running at least 6 of them for more than 2 years now on various devices including Raspberry Pi Zero, Zero W, 3 and 4, as well as some OpenWRT routers and other single board computers.

During this time, not a single one has failed. Pi-Hole's default settings are very hard on writable media. Some of the damage can be mitigated by reducing the size of the database and the interval at which the stats are updated.

I've even seen some configurations where the OS loads from a read-only file system, and all reads and writes are performed on an in-memory RAM disk. If the more durable memory cards hadn't worked for me, I'd have used this configuration.

---

**EDIT 1:**

I also stopped purchasing any SD cards from Amazon. I've read some places that the number of counterfeit memory cards sold by Amazon is at least 3%, but probably closer to 25%.

Now, I only purchase directly from the manufacturer. With this option, the costs are usually about the same as Amazon, if you're lucky enough to catch a discount on older models the mnfr is trying to liquidate, but the shipping often takes 2 weeks or longer.",pihole,1649566096.0
4062,comment,2,i44xliq,,"I recently had a power outage and thought my SD card was fried.

Turned out SD card was fine, but the power supply was fried from the surge.

Running it on Diet Pi on a Pi 3B+ with a high quality/speed class 10 SanDisk microSD card.",pihole,1649574312.0
4063,post,0,u044ia,Whitelist website to show ads?,"Hi!

I don't know if it's possible, but could I whitelist a website so PiHole doesn't filter anything?

&#x200B;

I know 2 websites that are ""trustable"" with the cookies and tracking that area doing (or the lack of it), and I want to ""support"" them not blocking their ads, that are also not-intrusive

&#x200B;

The problem is that I don't know if it's possible: I can't whitelist Google Ads because I would start to see ads in all the internet, but it seems I can't tell pihole ""show me the ads (not filter) if I'm in this website""",pihole,1649543928.0
4064,comment,2,i43gxdy,,"> it seems I can't tell pihole ""show me the ads (not filter) if I'm in this website""

That is correct.  Pi-hole is not contextually aware.  It does not see anything other than a stream of DNS queries from clients, and does not know which website is being visited, which app is running, or any other details.  It just answers DNS queries.",pihole,1649546368.0
4065,comment,1,i43dk8i,,Try whitelisting the site and see if that works for you?,pihole,1649544816.0
4066,comment,1,i43hc0e,,"Sounds to me like you're saying, you want Google Ads to show on a particular website? In that case, no, Pi Hole is only in control over DNS, so the rules are based on domain name.

Otherwise, you can whitelist or blacklist any domain you want.",pihole,1649546551.0
4067,comment,2,i43jjwq,,"Thank you for confirming me this! I didn't know, so it helps to know how PiHole works

&#x200B;

Thank you!",pihole,1649547572.0
4068,comment,2,i43jlxz,,"Understood, thank you for the knowledge!",pihole,1649547599.0
4069,post,1,tzzr4o,PiHole DHCP inside Proxmox LXC not working,"I have PiHole running fine inside an LXC as the main DNS for my network, but I'd like to use the DHCP function and it doesn't seem to work at all. There's nothing in the Pihole logs about responding to requests.

My suspicion is that the LXC doesn't respond because the IGMP requests are not getting through. Has anyone had this working? Is it something to do with multicast snooping?",pihole,1649530616.0
4070,comment,1,i45jh0q,,"Pls more info about your network setup.
You set up a bridge network to communicate with the devices outside the LXC or what did you do,?",pihole,1649591550.0
4071,comment,1,i4688x5,,"Proxmox is running on a server with a Melanox CX3 10G card, to a DGS-1510-20 network switch and an OVS Bridge on vmbr0.

The PiHole is running in an LXC container with a virtual network interface connecting to vmbr0, no firewall enabled on Proxmox and unprivileged mode is disabled, so it has full access to ports.

None of the containers have any issue getting a DHCP. I have noticed that tvheadend wouldn't work with Multicast discovery when in an LXC, so I had to move it elsewhere, so that's why I am suspicious.

Whenever I search for DHCP advice on LXC or Proxmox I often just get stuck with results about containers and clients not getting addresses. But in this case the server isn't getting any requests.",pihole,1649604077.0
4072,post,2,tzvs6b,What is apm_cc,apm\_cc keeps showing up in my Pihole logs. Does anyone know what apm\_cc is?,pihole,1649518855.0
4073,comment,1,i41oy91,,As a client or as a domain queried? Whats the type,pihole,1649519210.0
4074,comment,1,i41pjec,,"Examples of this query, forward and reply from your dnsmasq log at ***/var/log/pihole.log*** please.",pihole,1649519441.0
4075,comment,1,i46zizs,,"my phone also spams ""apm\_cc"" to pihole every 1-6 seconds, I'm using custom rom called ""Pixel Experience"" maybe it's because of this",pihole,1649615049.0
4076,comment,1,i46zzt0,,">/var/log/pihole.log

Apr 11 01:10:20 dnsmasq\[1073\]: query\[A\] apm\_cc.pihole from 192.168.0.3  
Apr 1101:10:20 dnsmasq\[1073\]: config apm\_cc.pihole is NXDOMAIN  
Apr 11 01:10:21dnsmasq\[1073\]: query\[A\] apm\_cc from 192.168.0.3  
Apr 11 01:10:21 dnsmasq\[1073\]:config apm\_cc is NXDOMAIN",pihole,1649615241.0
4077,post,129,tzr22q,The pi user default is leaving raspbian,The [pi user is going away](https://www.raspberrypi.com/news/raspberry-pi-bullseye-update-april-2022/). Are there any plans for Pi-hole to accommodate this change?,pihole,1649502695.0
4078,comment,1,i411ylr,,">	Are there any plans for Pi-hole to accommodate this change?

None needed. Other operating systems we support don't use user ***Pi***, and it isn't a factor in our install script.",pihole,1649508955.0
4079,comment,12,i43484z,,"Completely irrelevant to pihole. That said, everyone going on about what a bad idea the pi user was are missing the original goal of Raspberry Pi’s - to make an affordable and accessible coding platform for kids.

Removing pi user really doesn’t move the needle that much.",pihole,1649540644.0
4080,comment,85,i40ufqo,,"It's about time. Default user credentials are a massive security hole, one that I've been able to exploit to one degree or another while doing pen tests for years. Raspberry Pis specifically make it \*so\* easy not to change the default pi/raspberry combo (or, alternatively, so difficult to actually change them, for the average user).

I would love to see the Raspberry Pi OS team add a hardening section to raspi-config that allowed the user to take some easy but meaningful steps to consolidate and reduce the attack surface on a Pi (things like disabling password authentication via SSH (enforcing key authentication), renaming the default user (For legacy installs now), disabling auto-login (which already exists but is buried in a different menu), etc.",pihole,1649504458.0
4081,comment,5,i4339az,,"Great, no more containers that demand the pi user exists. This was always bad practice.",pihole,1649540225.0
4082,comment,3,i43w5f0,,"Pihole doesn’t need pi user. I run Pihole on a regular x86 Debian pc, and it never had a pi user.",pihole,1649553681.0
4083,comment,3,i42c6bk,,I don't see how this is even remotely an issue.,pihole,1649528574.0
4084,comment,3,i40s6uo,,"well that is good in a way but bad coding that need the pi user will have problems XD. you needed anyway to make a new user and disable the pi user for security purpose before this update

pi-hole don't need the pi user from what i know",pihole,1649502883.0
4085,comment,1,i41wp6x,,I don't think I have pihole running on the default pi account anywhere,pihole,1649522324.0
4086,comment,1,i41xrx6,,"I'm a newbie by a long shot, but my question is would disabling the default user be a viable option in order to increase or harden security of the device?",pihole,1649522761.0
4087,comment,1,i420nf4,,They should have done this when they released the first version of RaspBian!,pihole,1649523923.0
4088,comment,-31,i41blth,,Can you support a different username chosen by me at install time?,pihole,1649513670.0
4089,comment,6,i412y75,,Having the default user pi is not bad at all if you have a good password or key only ssh access.,pihole,1649509473.0
4090,comment,0,i42ffu1,,Why not change pi username to another username rather than creating a new user and disabling pi?,pihole,1649529921.0
4091,comment,2,i42fkbh,,"Just change the default username, you don’t need to disable it",pihole,1649529973.0
4092,comment,42,i41i4wt,,"

>	Can you support a different username chosen by me at install time?

We are indifferent to your user name.",pihole,1649516440.0
4093,comment,11,i41bxe5,,Do you mean like if you have a different user name already when you begin the install?  I have installed pi hole without the pi username and there is no difference.,pihole,1649513814.0
4094,comment,9,i42aeq4,,"As long as you give root permission for running the script, your username does not matter",pihole,1649527846.0
4095,comment,42,i413akn,,"On the contrary, knowing that there's definitely a user named 'pi' on the system means the brute-force attack space has already been reduced. It's far better to not have any known user IDs on the system. Sure, a good password or disabling password login is probably good enough, but why give an attacker any advantage at all for no reason?",pihole,1649509653.0
4096,comment,1,i42g9y4,,did you even read what i was saying?,pihole,1649530268.0
4097,comment,11,i417v83,,Are you saying we need to remove the root user too? It’s an even more privileged and more well-known account.,pihole,1649511934.0
4098,comment,5,i41axb5,,"At the risk of cueing up an Apple HateStorm, I'll say that I really like [Apple's Hide My Email](https://support.apple.com/guide/icloud/set-up-hide-my-email-mm9d9012c9e8/icloud) for this reason. Every login I create in Safari has a different, unpredictable email address tied to it.",pihole,1649513361.0
4099,comment,4,i41c2x8,,"> On the contrary, knowing that there's definitely a user named 'pi' on the system means the brute-force attack space has already been reduced.

You can increase the attack space more by adding random characters to the existing password rather than changing the pi username.

> Sure, a good password or disabling password login is probably good enough, but why give an attacker any advantage at all for no reason?

It's a negligible benefit, even more so if you are using ssh keys.",pihole,1649513881.0
4100,comment,3,i41cetj,,"Changing the default username is not that smart of an idea.

Changing the username is merely [Security through Obscurity](https://www.bcs.org/articles-opinion-and-research/security-through-obscurity/) which is not proper security.

The correct course of action is to enable SSH with keys, only allow certain IPs, and never directly expose it to the internet.

Do you suggest we change the username of ""root"" next?",pihole,1649514024.0
4101,comment,3,i42gw6q,,"> you needed anyway to make a new user and
> disable the pi user for security purpose before
> this update

Yes?",pihole,1649530530.0
4102,comment,21,i4187o1,,"If your root user can log in anywhere except the console, you have bigger problems. 

And yes, strictly speaking, having a user with a known name is bad security practice. It's not a major vulnerability, but it's still not optimal.",pihole,1649512100.0
4103,comment,-10,i41kcg2,,"And then if you ever have to contact a company about not being able to access your account, you have no idea what your on-file email address might be 🤪

I’ve been really appreciating the feature, but there are some potential issues, especially if you use it to sign up for a paid account somewhere 🤦🏻‍♂️

Edit: Loving the downvotes! 

I signed up on my MacBook at work with HideMyEmail and then was trying to log in with windows at home, didn’t have easy access to my Mac at the time, and because it used iCloud it saved to apple keychain and not LastPass which I use across all of my devices. It wasn’t a big deal and I figured it out, but it was a thing, and if it had just been on my phone and I lost my phone (or replaced it as I just did recently) and have to re-log in, let’s say I keep my stuff in LastPass, some apps (not websites) allow keychain passwords to auto fill but don’t have direct support for LastPass 🤷🏻‍♂️",pihole,1649517347.0
4104,comment,11,i41lfac,,People often assume since *relying* on security through obscurity is bad that obscurity itself is bad. That's wrong. Obscurity is a tool like any other. Anything that makes the attackers' job harder is a point for the good guys.,pihole,1649517785.0
4105,comment,0,i41king,,Maybe suggest to disable ssh for “root” but it depends on the application and environment.,pihole,1649517418.0
4106,comment,1,i42h3bw,,and were is the first part? i explain there why you might need the pi user,pihole,1649530615.0
4107,comment,-19,i4232lw,,"Yep and the avahi user, the www-data user,  the sshd user, and all the other well-known user accounts on a modern linux distro? They should be removed as well?",pihole,1649524886.0
4108,comment,22,i41lsfm,,">	if you ever have to contact a company about not being able to access your account, you have no idea what your on-file email address might be

Not quite accurate. The Apple OS keeps track of which email you used with a particular login.

But, unrelated to Pi-hole.",pihole,1649517936.0
4109,comment,6,i41oh3t,,"In addition to iCloud keeping track of the email addresses, this is where a password manager really helps as well.",pihole,1649519018.0
4110,comment,2,i446cub,,"That why you write your logins down in a password manager or whatever. Do you remember ever randomly generated password you ever used ? I dont and thats why it wouldnt matter what email adress I used, the logins are in my password manager.",pihole,1649558705.0
4111,comment,11,i41lm8q,,This is a great discussion for the Raspbian forums.,pihole,1649517864.0
4112,comment,2,i46bir6,,I see your STO and raise you a fail2ban,pihole,1649605441.0
4113,comment,3,i42f8in,,It’s already disabled by default.,pihole,1649529836.0
4114,comment,1,i42hviy,,"I’m not sure what scenario you were referring to in the first part or if it was hypothetical. Regardless, if a new user is needed, it’s most likely better to change the username than disable it and make a new one.",pihole,1649530946.0
4115,comment,19,i4239uh,,"No, they don't have shell, at least by default.",pihole,1649524966.0
4116,comment,1,i45pg40,,"Doesn’t fully work in every iOS app — some don’t offer to use, some don’t remember via keychain",pihole,1649595212.0
4117,comment,1,i470sqy,,"I use LastPass but this was for an “app” not a “site” and iCloud didn’t know which one it was, and the issue was a forgotten username, where the app prompted for email on file to re-send my account name. Needed help from my credit card company to figure it out.

All good, still a huge fan",pihole,1649615575.0
4118,comment,4,i42j087,,"some peoples don't know how to code and they add the PI user as a must enless you want to edit a ""project"" then you will need it. ""apt install"" is different from using github

by making a new one and disable the PI user will make that software to install and work since is asking just to have a user call PI. if the user is disable any brute force PI account is useless",pihole,1649531424.0
4119,comment,-21,i423exo,,"So it’s not a security problem to have a well-known account name, got it.",pihole,1649525025.0
4120,comment,1,i45wt3i,,"Your iCloud account (in the Hide my email section) will show which generated email addresses match which site, per the notes you enter when you created the address.  But, not related to Pi-hole.",pihole,1649599027.0
4121,comment,1,i42lubp,,"I can see that scenario happening, it makes sense. But, that code would only work on PiOS and would fail on other Linux distros. I wonder if the code would work if *pi* exists but is disabled?",pihole,1649532624.0
4122,comment,13,i42eytc,,"What are you going on about? Those users along with root either don’t have shells (expect for root) and can’t be logged into via SSH by default.

You seem to want to make a point that just knowing a username is not a threat, which in isolation is not a threat, but that’s not what u/imoftendisgruntled said nor implied.",pihole,1649529725.0
4123,comment,13,i43dz59,,">So it’s not a security problem to have a well-known account name, got it.

That's not what anyone is saying.

**A predictable username with shell access is a security vulnerability** is what we're actually telling you. Please open your ears.",pihole,1649545011.0
4124,comment,2,i432zth,,Omg just stop you are so far wrong.,pihole,1649540109.0
4125,comment,1,i455q9o,,"""pi"" user is designed to be able to log on remotely; while service accounts like the ones you mentioned, aren't.",pihole,1649580647.0
4126,comment,1,i470kfw,,"Correct. Unrelated. Didn’t mean to go off topic. I was replying directly to OP and sharing an experience where I found some downside to an unpredictable/obscured identification for an account.

If I set up a pi and then leave it for 4 years and need to adjust something, I know the username. If I set up Ubuntu, I know there’s `root`. If I set my own username and follow the practice of different username per system (in a non-LDAP environment), I could potentially forget the username — or if this is corporate, I could leave and someone could inherit a system that they don’t even know the primary username. Of course there are back doors in unix/Linux in those environments for just such occasions, but it still remains that if I write down my home lab accounts and then forget them, it’s a pain if I didn’t set up a break-glass/back-door and before you say that the same goes for losing the password, yes that’s true but that’s two things to lose/forget instead of one. 

I’m not saying pi@host is a necessity or even a good idea. I’m just saying that there are considerations both ways. 

The issue with HideMyEmail was I forgot a username and the app said enter the email used and it will send username. iCloud did not have record of what email was for that site because it was an app and not a site. I had to ask my credit card for some info that helped me find it. True story. Not related to pi.

Thanks for your feedback.",pihole,1649615479.0
4127,comment,2,i42n568,,"it works even if it is disable they just need it to by there. not sure if it will work on other OS since some projects are made specific for raspberry pi

for pi-hole and adguard home it works with any OS but the specific projects made for RPI only will give problems if the PI user is a must, is annoying for someone to put the PI user as a must but well this is the life",pihole,1649533182.0
4128,comment,9,i4345og,,This is not a Pi-hole topic. Please continue the discussion in the Raspbian forums.,pihole,1649540614.0
4129,comment,1,i4bkhal,,It’s almost like we’re agreeing that having a well known account name isn’t a problem.,pihole,1649699082.0
4130,comment,3,i42z77l,,Please continue this discussion in the Raspbian forums.,pihole,1649538459.0
4131,post,1,tzqv6j,Run Pihole + VPN with 2 Routers (OpenWRT + D-Link),"I don't know if this is the right place to ask or if anyone is running such a setup and can help, but I am a noob in terms of networking and need some advice.

I have two routers in my house, one runs OpenWRT and the other one is a D-Link. My OpenWRT router has only 2 LAN ports and terrible WiFi signal, so I am using the D-Link I had from my previous home. DHCP is disabled on D-Link.  A pihole with Unbound recursive DNS is connected to it through cable and I configure all the devices manually to use the PiHole as DNS and set manually IP addresses.  

Everytime I try to switch the DNS on my D-Link Router to my Pihole, it cloaks the system with requests to d-link websites causing SERVFAIL messages. I don't know why that's happening...But, in any case, I am considering adding the OpenWRT one as my main router, disable WiFi and DHCP and connecting it to Mullvad VPN, then plugging my current D-Link router into the OpenWRT one.

Could this work? Will it help with my privacy?

I don't want to expose my Pihole to the internet, plus I have a few more Raspberry Pi's on my networking running Docker contains with Bitwarden, Bookstack etc. at the same time I also want to use a VPN for my connection to the internet.",pihole,1649501921.0
4132,comment,1,i417f1r,,"Your setup is a bit confusing, but this is how I would configure it:
Configure in your gateway (the WRT device?) the local DNS Server to point to the Pihole. 
Config in any other devices the DNS server to point to the gateway.
And sure, configure one device to act as the DHCP server.

The servfail message means that unbound was unable to resolve this domain.

Look in this guide to see how you can test unhound is working: (note that you maybe set another port for unbound, so change this in your commands for testing)
[https://docs.pi-hole.net/guides/dns/unbound/](https://docs.pi-hole.net/guides/dns/unbound/)",pihole,1649511716.0
4133,comment,1,i431th6,,You could just set it on the clients.,pihole,1649539600.0
4134,comment,1,i41k4bl,,">Configure in your gateaway (the WRT device?) the local DNS Server to point to the Pihole.

Just to be clear, do you mean to go into Luci Interface and go Network --->  Interfaces ---> LAN and change the ""Use custom DNS servers"" to the Pihole Address?

&#x200B;

>The servfail message means that unbound was unable to resolve this domain.

I know what SERVFAIL is. What I meant is, I don't know why my D-Link router ""feels the need"" to call home like crazy. Maybe it has to do with my IPV6 being turned off? Maybe not...but I found no information online to understand what's going on, so I left it as is for the moment. But it's also a problem, because I can't set up my Pihole as a custom DNS on the router and have to manually set it on different devices.",pihole,1649517255.0
4135,comment,1,i435fuy,,"That's no problem to me, my question was, if I would gain anything or if it's possible to have a stable setup by running a two routers configuration with one having all the devices attached to it and the other one being a sort of ""external"" router which connects all the traffic coming from the other one to a VPN.",pihole,1649541177.0
4136,comment,1,i41mik1,,"IDK how this is managed in a WRT device. On my fritzbox I have possibility to change the primary and secondary DNS servers in the WAN settings and I can define a local DNS server (My PiHole) in the LAN settings.

\> I don't know why my D-Link router ""feels the need"" to call home like crazy

Here are some possible answers: [https://www.reddit.com/r/pihole/comments/5nzy4n/dlink\_dir890l\_calling\_home\_a\_lot\_why/](https://www.reddit.com/r/pihole/comments/5nzy4n/dlink_dir890l_calling_home_a_lot_why/)

&#x200B;

Which D-Link model do you use?",pihole,1649518228.0
4137,comment,1,i43audh,,"It should be stable, if you do it right.",pihole,1649543586.0
4138,comment,1,i41p5ko,,"I use DIR-885L which as far as I know, is able to run OpenWRT. At least I seen it done before. Although, I haven't had the chance to try yet, as busy with other projects. 

Thanks for the awesome link, but whitelisting some of those won't do me any good if they SERVFAIL or will it?

&#x200B;

>primary and secondary DNS servers in the WAN settings and I can define a local DNS server (My PiHole) in the LAN settings.

I set my WAN DNS to quad9 and my lan DNS to my PiHole...I see request from my OpenWRT device to use pihole now. But I haven't connected to a VPN. I will test over the next few days.",pihole,1649519292.0
4139,comment,1,i41tg4a,,">Thanks for the awesome link, but whitelisting some of those won't do me any good if they SERVFAIL or will it?

No, this is just the cause of the massive requests to the d-link domains. The servfail is still a problem of your DNS resolver.  
It can be a problem of the authoritative name servers, which unbound contacts. Or a difference in the system time of the unbound device and the contacted name servers, if you use DNSSEC.
Maybe your root.hints are out of date.

If you use DNSSEC, you can test the config like it mentioned here:
https://docs.pi-hole.net/guides/dns/unbound/#test-validation

You can also increase the verbosity level for logging in the unbound config and have a look into the unbound logs to figure out what is happening.",pihole,1649521010.0
4140,comment,1,i42igl3,,"I used to use NTP to keep my devices clock time synced to my country's pool, but it is problematic on the Pi....maybe that's the problem I have been facing and not a problem with my unbound configuration, would you suggest I use another service or leave everything as is on a fresh install in regards to system time and just change the localization using raspi-config?",pihole,1649531191.0
4141,comment,1,i42kynl,,"My advice is still to raise the verbose level for the unbound log and have a look there :)

If you want to start from scratch I can recommend DietPi, which comes with some handy improvements, like a timesync service. But I'm not familiar how plain raspberry pi os handles time sync.
I run Dietpi on my Pi 3b+ with pihole, unbound and PiVPN (wireguard), also with two routers in my LAN (one fritzbox as gateway / dhcp server and a TP-Link with OpenWRT for extra wifi) and another Pi 4 with some web services, NFS, torrent etc. And it works, without problems.
But keep in mind some stuff works in DietPi differently than on raspberry pi os, which needs some training period for the user again.",pihole,1649532251.0
4142,comment,1,i42nevw,,"I am familiar with DietPi. I will give it a try, if things don't work out. Thank you so much for the help man, really appreciate it!",pihole,1649533297.0
4143,post,16,tzki3m,"Pinole still being rate limited, despite setting to unlimited?","Hey guys, having a bit of trouble with my pihole rate limiting, despite having set the limit to 0/0.

I run pihole to my router and let my router handle DCHP since eero seems better at this pihole is. The problem being is that my pihole now keeps trying to rate limit my router.

It happens multiple times a day, the network gets blocked, goes down and comes back up a few minutes later.

I tried setting the FTP config file to 0/0 as advised elsewhere, restarting, checking the file is definitely there (it is) but still I get rate limited.

Any advice anyone can share please?",pihole,1649474885.0
4144,comment,6,i3zzxv9,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1649481395.0
4145,comment,5,i3zqkit,,"Not familiar with Eero router but you should be able to set the dns in DHCP so it hands off that IP to your devices so they reach out to Pi-hole directly instead of the router.

This way Eero router still handles DHCP but DNS is handle by pihole and each client/device talks to pihole directly for DNS.",pihole,1649475831.0
4146,comment,1,i3zqvdh,,"Did you restart PiHole after editing pihole-FTl.conf?  
And this solution is only a workaround, you should find out which device is sending so many requests and why.",pihole,1649475994.0
4147,comment,1,i41v2pn,,"As someone who used to live in Pinole, this was quite a treat to see on my home feed!",pihole,1649521669.0
4148,comment,3,i409gi2,,"I’m getting a 403 error trying to upload to tricorder, so I’ll paste it here if thats ok? (https://github.com/cameronwood1/pi-hole-error/blob/main/README.md) 

It looks like the rate limit I set isn’t showing up in the debug, but I can see it when I ssh in (https://imgur.com/ZghygeV)",pihole,1649488077.0
4149,comment,2,i3zr0us,,"I explained it badly, but this is what the pihole is doing. I just wanted the eero to manage local IP addresses rather than the eero sorting out who gets to be 192.168.x.x etc.

But this still means that my pihole only sees one device, my eero and therefore rate limits the hell out of it",pihole,1649476078.0
4150,comment,1,i3zrfpb,,"Yup, restarted via ssh and restarted the ftl directly in ssh. Pihole recognises the rate limit when I open up the file again to check it’s there.

I could find out, but I have a tonne of IoT devices, which I’m not sure I want to go through and find which servers and bad/good for. I’m kind of ok with the setup. I’ve been using pihole for years and this only become an issue in the last few months after updating",pihole,1649476299.0
4151,comment,1,i41w01u,,Omg I didn’t even notice. Serves me right for writing this post at 4am…,pihole,1649522044.0
4152,comment,2,i40yphx,,I think I see the problem - it’s meant to be FTL not FTP in the filename.,pihole,1649507125.0
4153,comment,1,i411lbh,,"You don't have a rate limit set in the Pi-hole configuration file. 

    -rw-rw-r-- 1 pihole root 15 Feb 19 21:26 /etc/pihole/pihole-FTL.conf
    PRIVACYLEVEL=0

You are editing a file with a different name and Pi-hole can't read that file.",pihole,1649508756.0
4154,comment,3,i3zuwff,,"So, your devices have the Pi-hole IP address for the DNS server? 

Based on your description, It sounds like your devices are talking to Eero, then Eero talks to the pihole. Although this works for the most part, it’s better to make sure each devices talks to pihole directly and your router should not get rate limited. 

Hopefully this helps; Based on another forum regarding Eero:

“Inside Eero App that controls the configuration of the Eero system I had a setting called Local DNS Caching Activated. By turning that off and clearing my logs. I now see all clients individually instead of the gateway showing all the traffic.”

https://discourse.pi-hole.net/t/majority-of-traffic-through-one-client-eero-settings/12536/11",pihole,1649478246.0
4155,comment,1,i417qdk,,">	Pihole recognises the rate limit when I open up the file again to check it’s there.

Pi-hole does not see the rate limit you have entered, because it's in a file Pi-hole doesn't read.",pihole,1649511867.0
4156,comment,1,i41wdr1,,Thanks! I saw the same mistake in a previous thread and fell for the wrong one…,pihole,1649522195.0
4157,comment,1,i41w4vh,,"Wait, do I edit FTL or FTP?",pihole,1649522097.0
4158,comment,1,i3zvvy2,,"No, my eero router has the DNS set to pihole address.

I don’t want to manually add the eero dns to all devices, nor do I want pihole to handle the DCHP server, eero is better at this stuff and lets me set profiles etc.

Sadly that feature in eero is already turned off, and has never displayed individual devices in pihole. It’s been fine like that for years until recent months, whenever I upgraded pihole and rate limiting was added.",pihole,1649478833.0
4159,comment,1,i41wd4c,,">	It’s the pihole-FTP.conf I need to edit right?

No. Edit ***/etc/pihole/pihole-FTL.conf***",pihole,1649522187.0
4160,comment,1,i40o24d,,"It’s not the router’s DNS setting. What DNS setting is your DHCP server sending to clients for DNS 1 and maybe DNS 2?  There is something off there, because it it were properly set to the pihole address, the only DNS traffic you would see from the router is the router itself. It would help if you screenshot your DHCP server config. 

The behavior you describe means that DNS traffic is going to to router and then the router is sending it on to the pihole.",pihole,1649499700.0
4161,comment,1,i40qf2x,,"On your eero do you have a) HomeKit integration on b) Local DNS caching or c) Eero secure? 

Any of these cause the Eero to tel your devices to connect to it first then it forwards DNS queries onto your Pihole. 

Turn these off and your devices will individually connect to Pihole which works much better. 

I had nothing but problems using Eero and Pihole until I turned those 3 off.",pihole,1649501558.0
4162,comment,1,i41wlkz,,"Thanks! I saw a previous thread with the same mistake, and I must have copied that and made it too.",pihole,1649522283.0
4163,comment,1,i40ptor,,"Yeah, its as you described in the last sentence. This has been fine for 3-4 years, but not with rate limiting. Lots of other users do this too, and prefer to have their router doing DCHP management rather than pihole.

You can see my DNS and DCHP settings in this link if that helps?: https://imgur.com/a/MPDGILj

As you can probably tell, I’m far from an expert in DNS/DCHP and anything networking! Thanks!",pihole,1649501105.0
4164,comment,1,i40rfft,,"Only homekit integration. Doesn’t really add anything and all my smart home devices are trusted vendors. I’ll turn it off, thanks for the recommendation!",pihole,1649502319.0
4165,comment,2,i40rnxr,,"What I had to do also! I think for the “secure router” to work it has to do DNS filtering so sends everything it’s way. 

You’ll find it much better with it off",pihole,1649502496.0
4166,post,20,tzg687,High long term load?,"Hello, I've been running pi-hole installed on a Raspberry Pi 4, running Pop! OS 22.10 64-bit. It's been running great, with almost no problems.

The one issue I just noticed is an alert the pi-hole is throwing at me about a high load. Here's what it looks like:

&#x200B;

[Hi Load?](https://preview.redd.it/h5p1au652es81.png?width=686&format=png&auto=webp&s=1ab4f33a83123153f94b835f7e231b17144d147c)

Here's the view from the Pi-Hole dashboard, which shows this load, and indeed it looks a lot higher than I remember seeing it (when load is something like 0.3):  


&#x200B;

[Dashboard showing load](https://preview.redd.it/nm4465ra2es81.png?width=226&format=png&auto=webp&s=23353e1275c2be220b3de91923ece800011824c3)

But I am confused, because I don't see what could be causing this load. I'm running nothing else on my RPi4. And htop doesn't show any particularly heavy load.

&#x200B;

[htop on rpi4](https://preview.redd.it/0tymfs2j2es81.png?width=826&format=png&auto=webp&s=c0baee1c7d2889a272d21603d66204b4bc5fd5a5)

So what could be going on? Thanks!",pihole,1649460266.0
4167,comment,5,i406buo,,Try diet.pi,pihole,1649485754.0
4168,comment,4,i3zh8b7,,Maybe you should use Raspberry Pi OS instead of Pop OS.,pihole,1649471062.0
4169,comment,5,i3zap9l,,"IO wait will drive up your load, and you can’t see that on htop.",pihole,1649467932.0
4170,comment,5,i40mf48,,"PopOS is tuned as a desktop distro, there is no need to be running a GUI on your DNS server (the role that PiHole is filling). Just go headless with Raspbian Lite. I really don’t recommend running a critical network service on a daily driver (if that is why you have PopOS installed).

Why not run a desktop? In the server world (and especially the Linux one) you only install and run what you need as every process consumes resources and introduces additional possible vulnerability points, not to mention more packages generally mean longer patch times. Think of it as min-maxing your time and effort.",pihole,1649498384.0
4171,comment,2,i3yw4z0,,Pop OS isn't the easiest OS for a Pi to run. The GUI program isn't really optimized for low power devices. With Raspberry Pi OS I rarely see more than 5% load on the Pihole admin panel.,pihole,1649461084.0
4172,comment,1,i3ywylv,,"There are many discussions of that alert in this sub.

tl;dr don't worry about it. 

If it bothers you to see it, the change to the configuration to mitigate this alert is in most of the prior discussions.",pihole,1649461454.0
4173,comment,1,i403hb0,,"I'm running on Homebridge OS + PiHole. Same 4GB Pi4. Like other said, it is probably the OS.

Load:  0.06  0.08  0.07 

Memory usage:  7.5 %",pihole,1649483788.0
4174,comment,-3,i3zhlrl,,Maybe but I'm using it as a server.,pihole,1649471245.0
4175,comment,2,i3zhj8u,,"Interesting. But if I'm using it as a server, it should be irrelevant, right?",pihole,1649471210.0
4176,comment,3,i3ztax1,,"But as others say, if there is a GUI it is still being loaded into RAM and processed, regardless if you are using VNC/RDP. I would recommend a lighter OS, in your case Raspberry Pi OS (without GUI)",pihole,1649477320.0
4177,comment,3,i407e5d,,"Don’t run a desktop on a server it’s a waste of resources. Either stick to using the shell or find a good web UI.

You could install Openmediavault on Raspberry Pi OS Lite and then install Pi-hole in docker.

This would be much better than what you’re doing now.",pihole,1649486518.0
4178,comment,2,i40bvd2,,A server should NOT have a GUI. They should be managed remotely and without a local desktop.,pihole,1649489891.0
4179,comment,7,i3zn2n7,,"The computer is still processing a GUI, even if you don't have a monitor or remote desktop running. There are ""headless"" OS versions to cut those processes out entirely, but not for Pop as it is designed as a graphical daily driver OS.",pihole,1649473987.0
4180,post,13,tzfjt8,Some blacklisted domains not being blocked.,"Hi!

I have a blacklist with some domains added (normally and with a regex filter) that keep getting through (according to http-tracker addon on Firefox). I keep getting banner ads and transparent overlays and chat windows on a particular site.

Thank you for your time!",pihole,1649458401.0
4181,comment,3,i3yrh8u,,Are you sure the Pihole receives these queries? Did you watch the query log and recognize your queries?,pihole,1649459022.0
4182,comment,3,i3zasgz,,"Please generate a debug log, upload it when prompted and post the token URL here.

And, what are the domain(s) of interest?",pihole,1649467974.0
4183,comment,1,i43pg4z,,Did you set a secondary DNS besides pihole?,pihole,1649550387.0
4184,comment,2,i3z66mc,,"Yes, the requests show up in grey when tailing the log.",pihole,1649465786.0
4185,comment,1,i3zr8lc,,"These are the domains that keep escaping:

[trustedcpmrevenue.com](https://trustedcpmrevenue.com)

[7296ee4584.com](https://7296ee4584.com)

[bfhxivpij.com](https://bfhxivpij.com)

[furstraitsbrowse.com](https://furstraitsbrowse.com)

[barscreative1.com](https://barscreative1.com)

&#x200B;

https://tricorder.pi-hole.net/su95yTci/",pihole,1649476193.0
4186,comment,1,i4412zu,,"I can’t, my router does not allow to change their DNS, only local DNS can be set. So I followed the advice and setup the router to only serve one address DHCP (the raspberry’s) and then turn on the DHCP server on the raspberry.",pihole,1649556109.0
4187,comment,2,i4081mj,,When I open query log in the GUI I see a column „status“ which says „blocked by“ or „Ok“ (plus an action „whitelist“/‚„blacklist“ behind it),pihole,1649487002.0
4188,comment,0,i41umkj,,If you execute `pihole -t` you get colored output indicating which requests are being blocked and which ones go through.,pihole,1649521487.0
4189,comment,1,i421guf,,"Thank you for explaining. Do you now know, how Pihole treats these queries and why? And if these show up but are marked as „ok“ I would argue that these are neither in the gravity nor as a fitting rule on blacklist. The GUI offers to create a rule which I would have tried.",pihole,1649524249.0
4190,comment,0,i4332vy,,"The console output indicates why a blocked request is blocked. Since running pihole via console is not interactive, you have to take a note or copy the url and then add it by executing pihole: `pihole -b`  
Or access the admin console via web and add it to the blocklist through the query log or the blacklisted interface.",pihole,1649540146.0
4191,comment,1,i435o11,,Idiot. Obviously you are not able to add a matching rule.,pihole,1649541277.0
4192,comment,1,i440sy3,,"I have, both by domain and regex. Requests are being answered and I’m getting ads.",pihole,1649555972.0
4193,comment,1,i44vagt,,"Still unclear to me: did you track down a particular ad (what is the source > does Pihole receive this query > how does it respond to it)?

As you can imagine: for a particular resource (which is not described as an IP already) there must be a DNS request. If it is resolved it either bypassed Pihole (reason tbd) or Pihole does answer it although not supposed to (reason tbd).

Still unclear to me at what point in problemsolving you are.",pihole,1649572725.0
4194,comment,1,i4674lu,,"Yes, I used an add-on that records http requests and took note of them and compared to the blacklisted URLs I individually tracked through Firefox’s inspector.",pihole,1649603597.0
4195,comment,1,i46d0er,,"Ok, you have your list of unwanted domains. You compared them to what you added to your blacklist. But how are the full URLs finally treated by Pihole filter? 

Your observation in the browser: still there?

The query log says what? Ok or blocked? Or not seen? I think you haven‘t answered this clearly - at least I didn‘t recognize it.",pihole,1649606047.0
4196,comment,1,i46dosv,,"The query log says ok but not all domains show up in it. Tailing the log does show most domains as red and this blocked, but some that are in the blocklist go through and are treated like if they aren’t in the blocklist.",pihole,1649606321.0
4197,comment,1,i46en85,,"So if you think you have it in your blacklist and it is „ok“ (seen, but not blocked) you might have set a wrong filter (regex not matching or other issue). Or it is whitelisted.

If queries are not seen at all by Pihole: What is your flow? Client asks Pihole directly (recommended)? If so, check the client‘s DNS: either a secondary v4 address or IPv6 addresses point to another DNS. v6 is often forgotten! Or an app uses own DNS, like seen on Android with hardcoded 8.8.8.8.",pihole,1649606705.0
4198,comment,1,i473vw7,,"I don't think; I looked and the blacklist, the http requests being recorded by the addon and confirmed the blacklisted urls are being answered.

Client (ethernet) connects to switch, then to raspberry pi (pihole) then to ISP modem/router.

Network Manager is configured to use my raspberry pi's address as the DNS server, twice.",pihole,1649616838.0
4199,post,1,tzev0i,PiVPN/Pihole dns issue,"When i’m using pivpn it works fine and uses pihole as dns and adblocking works but for some reason the dns resolver doesn’t work(sometimes*). i have a few local websites running and i can access them through my vpn but only if i put the ip in. not from the domain name though. kinda odd

* the sometimes part is weird. like my samba share i can access from my vpn and the address i’m using for it is samba.share and not the IP. and that is addressed in pihole",pihole,1649456351.0
4200,post,2,tzemnx,Pihole behind reverse proxy?,"I use a Caddy reverse proxy for all my selfhosted services, to provide HTTPS and to filter which VLANs can access which services.

I recently got fed up with pfblockerng, so I switched to pihole. Everything is working great, but I'd like to be able to access the web interface through my reverse proxy. When I go to `pihole.mydomain.io`, I instead get a `Website Blocked` page.

Is there any way to set pihole's domain?",pihole,1649455660.0
4201,comment,3,i3ykpdj,,Did you try using the full URL?,pihole,1649456105.0
4202,comment,3,i3ytqub,,"Usually, if you access PiHole by the local domain, you get forwarded to /admin.  
Maybe this doesn't work bc of your proxy.  


Did you try [`pihole.mydomain.io/admin`](https://pihole.mydomain.io/admin) ?",pihole,1649460023.0
4203,comment,2,i42d20w,,"I'm using Pi-hole with Caddy as a reverse proxy. Here's what's in my Caddy config file if it can help you:

    pihole.your_url.com {
    log {
    output file /var/log/caddy/pihole.log {
    roll_size 64mb
    roll_keep 2
    roll_keep_for 168h
    }
    }
    tls /etc/ssl/cert.pem /etc/ssl/key-nopass.pem
    encode gzip
    route {
    rewrite * /admin{uri} reverse_proxy * 192.168.2.90:1080
    }
    }

That way I can access the Pi-hole GUI without entering ""/admin"". All I need is ""pihole.mydomain.com""",pihole,1649528934.0
4204,comment,1,i3yu9g9,,"Also check this:  
[https://docs.pi-hole.net/guides/webserver/caddy/](https://docs.pi-hole.net/guides/webserver/caddy/)",pihole,1649460248.0
4205,comment,3,i3yu391,,"Yup, /admin works.

Guess I need to rewrite the URL too in the reverse proxy, thanks!",pihole,1649460173.0
4206,comment,1,i3zr6ty,,"Yeah this \^\^

Would recommend changing the /etc/lighttpd/lighttpd.conf Port from 80 to something else (and also on your reverse proxy URL), I've had lots of issues with other services using /admin:80 interfering with it.",pihole,1649476166.0
4207,comment,1,i400d2o,,">	Would recommend changing the /etc/lighttpd/lighttpd.conf Port from 80 to something else

Don't modify this file. As noted in the prominent warning at the top of that file, changes will be overwritten by a Pi-hole update or repair. Instead, change the external config file per this link:

 https://discourse.pi-hole.net/t/lighttpd-daemon-wont-start/44985/10",pihole,1649481668.0
4208,comment,1,i400lld,,"My bad haha, that's what I meant, thanks for the correction",pihole,1649481823.0
4209,post,1,tzcnv9,VLAN HELP: ignoring query from non-local network 192.168.20.10 (logged only once),"can pihole serve nodes on a different vlan?

DHCP served by router [192.168.1.1](https://192.168.1.1) 

primary pihole [192.168.1.4](https://192.168.1.4)

secondary pihole [192.168.1.5](https://192.168.1.5) 

would like to get VLAN 10 and 20 working via pihole too.

how can i get pihole not to ignore the requests?

Cheers!",pihole,1649450013.0
4210,comment,3,i3y6e3h,,"Have you read the documetation on this warning?

https://docs.pi-hole.net/ftldns/dnsmasq\_warn/",pihole,1649450262.0
4211,comment,1,i53lxdq,,"u/Soogs two ways to do what you are asking:

\#1 -> install multiple physical network interfaces on your rasberry pi - you can use a USB NIC such as this one ([https://www.amazon.com/StarTech-com-USB-Gigabit-Ethernet-Adapter/dp/B0095EFXMC](https://www.amazon.com/StarTech-com-USB-Gigabit-Ethernet-Adapter/dp/B0095EFXMC))

\#2 -> The more elegant solution (but more difficult) would be to create several virtual interfaces on the PI using only the single physical interface. This takes some doing and some know how but I'll describe the basic steps here

A. Configure the switch port that the Pi is connected to as a ""Trunk"" port - allowing tagged traffic from all VLANS on the port

B. Install the VLAN package from your repo on the pi ""sudo apt-get install vlan""

C. Configure one virtual interface on your pi for each VLAN

For step C there is a pretty good guide here:

[https://mroach.com/2019/11/using-pi-hole-on-multiple-vlans/](https://mroach.com/2019/11/using-pi-hole-on-multiple-vlans/)

Notes:

* With either method - Be sure to configure pi-hole to ""Listen on all interfaces""
* One word of caution regarding method #2 - **DO NOT USE DHCP** \- once a single MAC address has multiple IP addresses most consumer routers will freak out an prevent the pi from joining the network - you'll want to use STATIC as outlined in the Michael Roach tutorial.
* If you choose #2 and you've done it correctly the Pi will **receive** DNS requests on all the virtual interfaces, but it will use the physical interface to **relay** the requests to your chosen upstream DNS provider(s). This is important if you prefer to use firewall rules on your network to enforce use of your pihole and prevent devices from using their own preferred DNS (which you should do btw). Outbound requests from setup #2 will come from the IP address of the physical interface. Hopefully that makes sense :P

Good luck!",pihole,1650213996.0
4212,comment,1,i5b6rwf,,"Thanks for the reply.
I solved the issue by moving from local queries to anything on eth0.
My router forwards the requests and all is working fine with the vlan",pihole,1650348622.0
4213,comment,2,i3y90sl,,"no but thanks for making me aware of it :)  


I checked (and should have done before posting) and found that I had only selected local connections to be allowed.  


I've allowed all requests on eth0 and its now working.

I dont have port forwarding on either of those pihole address so should be good.",pihole,1649451308.0
4214,post,1,tz826s,"Unifi and Pi-hole, I lost my method for directing to the Pi-hole from Unifi!","I set up my Pi-hole and it's working fine with my Unifi system.  However, when I went to remove the Pi-hole from the system, I can't!  I can pause the Pi-hole from the Pi-hole Dashboard and I get ads, start it up, no ads.  But I can't find where in my Unifi system it stores the IP address for my Pi-hole.  I cannot change it or go back to the default DHCP.
    
It's been a while, and I think I used the ""named server"" function to send the DHCP requests to the Pi-hole.  But now I can't find ""named server"", and I can't take the Pi-hole out of the system.  
    
Suggestions please?
    
I'm using USG-3P and Unifi-CloudKey-Gen2-Plus (UniFi OS UCK G2 Plus 2.3.15) and UniFi Network Application 7.0.25",pihole,1649437115.0
4215,comment,4,i3xc8sb,,"DNS  
Old interface: Networks-DHCP Name Server  
New interface: Networks-DHCP-DHCP Service Management-DHCP DNS Server",pihole,1649438541.0
4216,comment,1,i3xcryu,,\^ This,pihole,1649438739.0
4217,comment,1,i3xmxxg,,"Thank you.  Found the locations.  But they are set to automatic, without any reference to the Pi-Hole location.  It must have been something else that I set, or it is not updating from the application interface.",pihole,1649442594.0
4218,comment,1,i3xn2cy,,"Thank you. Found the locations. But they are set to automatic, without any reference to the Pi-Hole location. It must have been something else that I set, or it is not updating from the application interface.",pihole,1649442641.0
4219,comment,1,i3yzwnv,,"Just enter the ip address of the client with pihole on it. As you can reach the webui, it should be in the address bar. If it says pi.hole instead, try opening a terminal and pinging it. If it is something like a debian/ubuntu install on an actual rpi, you should probably know how to access it in order update, configure etc.",pihole,1649462805.0
4220,post,2,tz7hcf,Websites on blacklist not being blocked,"When I put a website (eg. [example.example.com](google.com)) on the blacklist on the Pi-hole admin panel, it does not do anything. I can still go to the website I blocked. I blocked it as an exact blacklist, and it is enabled. I am up-to-date on Pi-hole, so what am I missing? (The site I blocked is a subdomain, and I don't want it to block every subdomain of the initial site).",pihole,1649435486.0
4221,comment,3,i3xmvve,,Have you tried flushing DNS on your PC?,pihole,1649442571.0
4222,comment,2,i3y1bw0,,">When I put a website (eg. https://example.example.com) 

That is a URL, not a domain.  You can't enter URL's into the blacklist; you can only enter domains.  In that URL. the domain part of the URL is 

    example.example.com",pihole,1649448255.0
4223,comment,1,i3x4d21,,Are you sure the system you are using is pointed at the PiHole? can you see the requests in the log?,pihole,1649435588.0
4224,comment,1,i3x7hvh,,"This may be a silly question, but did you update gravity after adding to the blacklist? In the UI it’s under Tools->Update Gravity. 

I’ve forgotten to do this from time to time!",pihole,1649436764.0
4225,comment,1,i3xjxyk,,"If you are *not* using PiHole for DHCP, you have to point your router to the PiHole with no other DNS resolvers. You have to make sure that all of your clients point to the router or PiHole and that they also do not have any extra DNS resolvers.",pihole,1649441446.0
4226,comment,1,i3xqap0,,"I get around it by setting one of the DNS entries to my Pi-Hole DNS and the other to my router, which points directly at my Pi-Hole. 

Pi-Hole with an extra step.",pihole,1649443892.0
4227,comment,1,i3xyyxg,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1649447321.0
4228,comment,1,i3zqdjt,,Look at the pihole query log. Did you find that in the log?,pihole,1649475727.0
4229,comment,1,i3yzu4a,,I didn't actually have the HTTPS:// part,pihole,1649462773.0
4230,comment,1,i3x4xtw,,"Yes, I set the primary DNS as the Pi-hole, and the secondary DNS points to CloudFlare's DNS.",pihole,1649435805.0
4231,comment,1,i3xanea,,"I tried that, it is still not blocking it.",pihole,1649437948.0
4232,comment,2,i3x59b8,,"I’d remove the second, or add your PiHole twice. Just because that’s what you set it to doesn’t mean that’s what the application uses, you need to confirm/deny in your PiHole logs that the system is using it for all traffic.",pihole,1649435926.0
4233,comment,1,i3xeble,,"Most clients don’t treat “secondary” as an actual secondary DNS. They use both alternately or sometimes just pick one for a while. 

You might try deleting the Cloudflare entry and then either restarting your client or forcing it to renew the DHCP lease.",pihole,1649439320.0
4234,comment,1,i3x5u67,,I don't see a point in setting it twice.,pihole,1649436142.0
4235,comment,1,i3x5yma,,"This is going to sound strange, but in the log, I see every request I make (I ran a Pi-hole tester and saw all of the ad links in the log when I ran it), but when I try going to the blocked URL, it does not appear in the log. And I can still go to it.",pihole,1649436189.0
4236,comment,1,i3xfzob,,"I got rid of Cloudflare, but the same issue persists. (In Windows 10's control panel I cant add the same DNS twise).",pihole,1649439949.0
4237,comment,1,i3x6b6w,,Some network system user interfaces force two entries. In those cases I just add it twice.,pihole,1649436320.0
4238,comment,1,i3x7hdq,,Haven't had problems with one.,pihole,1649436759.0
4239,comment,0,i3x6nwb,,Windows Control Panel does not allow me to set it twise,pihole,1649436453.0
4240,comment,1,i44itle,,Just leave the secondary empty,pihole,1649565184.0
4241,post,2,tz3ysw,Search in advertising block lists,"Hello,

I'm sure that there is an online project that allows me to search for a domain within the blocklists (AdGuard, EasyList, Steve Black, Phishing Army, etc).  


But I don't remember the site 😅, can you help me?

  
Thanks

Andrea",pihole,1649425762.0
4242,comment,5,i3wg0i6,,https://blocklist-tools.developerdan.com/entries/search,pihole,1649426185.0
4243,comment,2,i3whqay,,Thanks!!!!!!,pihole,1649426883.0
4244,post,71,tz1hf3,PiHole thinks it's 1970,"Since a few days, piHole logs are recorded with a 1970 date.

I am running PiHole in Docker on a RaspberryPi. Date and time are correct on the Pi. 

Logs show an error: "" time.c:132: Operation not permitted timer.c:619: fatal error: RUNTIME\_CHECK(isc\_time\_now((&now)) == 0) failed Aborted (core dumped) "".

Any idea?",pihole,1649417642.0
4245,comment,73,i3w0uhb,,"This is related to multiple issues caused by the jump from a buster-based to a bullseye-based docker image, for users of buster-based host OSs.

You need to update libseccomp2:

    sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 04EE7237B7D453EC 648ACFD622F3D138
    echo ""deb http://deb.debian.org/debian buster-backports main"" | sudo tee -a /etc/apt/sources.list.d/buster-backports.list
    sudo apt update
    sudo apt install -t buster-backports libseccomp2",pihole,1649419139.0
4246,comment,5,i3yd5ub,,"So does my wardrobe, but bell-bottoms will come back in style someday. Groovy!",pihole,1649452970.0
4247,comment,12,i3wjbhe,,"[https://en.wikipedia.org/wiki/Unix\_time](https://en.wikipedia.org/wiki/Unix_time)

&#x200B;

Because Unix time starts  on 1 January 1970",pihole,1649427520.0
4248,comment,1,i3xs6eg,,Why in docker if on a Raspberry Pi?,pihole,1649444633.0
4249,comment,-3,i3x5h9j,,[removed],pihole,1649436009.0
4250,comment,1,i3yjt1n,,When you have to check the date to make sure stuck in the past.,pihole,1649455720.0
4251,comment,1,i3yww5u,,just go with it maybe time will get confused and we’ll all just go back to 1970,pihole,1649461423.0
4252,comment,1,i3z2qfy,,Plot twist we live in 1970,pihole,1649464123.0
4253,comment,1,i3z6uzf,,Epoch fail,pihole,1649466111.0
4254,comment,-2,i3ze84f,,Why do people bother running inside a docker on a raspberry pi. Pretty pointless,pihole,1649469604.0
4255,comment,14,i3wjmy3,,This seems to have solved the problem. Thanks,pihole,1649427644.0
4256,comment,8,i3wtp0b,,"How do we know it's not just an homage to [Disco Stu](https://simpsons.fandom.com/wiki/Stu_Discoth%C3%A8que#:~:text=Stuart%20Discoth%C3%A8que%2C%20usually%20known%20as,Steve%20and%20Public%20Domain%20Debbie.)?",pihole,1649431525.0
4257,comment,2,i3z6920,,"the amount of times this comes up in the commercial world is astounding. Glad I am not the only one who knows it is usually related to this.

I once had a supervisor ask if the unix time on some logs were in UTC........",pihole,1649465819.0
4258,comment,1,i3y73m1,,That’s where all time start. All what happened before is just created by Konrad Zuse for us to discover by using computers.,pihole,1649450545.0
4259,comment,1,i3yvpnr,,"Can anyone ELI5 that for me? Even reading the wiki doesn't make sense to me. Why that date and what is it's significance to Unix? Why does it randomly appear in Linux? I've had files that say they were created on that day, why?",pihole,1649460893.0
4260,comment,9,i3xsvxw,,"Docker is mostly about portability, reproducibility, and isolation. I use docker for Pihole on my Pi because (a) it's running other services, (b) it's easier to ensure it's running identically to my other Pihole instance (in a VM), (c) if I ever have to reinstall the OS it'll be very easy to get an identical instance up and running again.",pihole,1649444915.0
4261,comment,2,i3zkvma,,Because it’s super easy to downgrade if something goes wrong. Like this issue. You can downgrade to 2022.02.1 and then research the fixes more.,pihole,1649472876.0
4262,comment,6,i3x8bqa,,"Did you know ad blocking was up 400% the year ending 1976? If these trends continue, ayyyy!",pihole,1649437078.0
4263,comment,2,i3zdwtb,,"https://en.wikipedia.org/wiki/Unix_time

Date value of 0 = Jan 1 1970",pihole,1649469452.0
4264,comment,0,i3zmti6,,It takes 5 minutes to setup pihole on the pi as it is. Complete wipe as card. Restore settings if needed. Done.,pihole,1649473853.0
4265,comment,1,i40bf9d,,What happens with all the other stuff that is running on my Pi if I wipe the card?,pihole,1649489558.0
4266,comment,2,i40f1yn,,Yeah that's fair enough. I just run pihole by itself on a single device.,pihole,1649492394.0
4267,post,6,tyzhya,Setup and DNS issues,"I recently started having lots of devices not being able to connect to the internet due to DNS issues. This was because their DNS address wasn’t set to my pi-holes IP address.  I work from home and my work computer doesn’t have enough permissions for me to change the DNS info.  

Why did this suddenly become a problem? I’ve been running this set up for almost a year with no issues.  

Is there a way to have a pihole on a network but also allow other computers the opportunity not to use the DNS?

(I’m new at all this, please be gentle)",pihole,1649409481.0
4268,comment,2,i3vsifi,,"Did the IP change?

You need to set the pihole as the DNS server on your router. Then every device that connects to your network will get it.

&#x200B;

To bypass pihole you can create a Group. Put the devices you want to enable bypass for into it and then assign it no blocklists.",pihole,1649413931.0
4269,comment,2,i3wlza8,,"Ooooh, it's my time to shine. I also have a work computer with locked settings.
I assume it is a Windows 10, and that you don't have documentation from your work for the setup.  
To give you an idea, my instructions were basically ""plug the wifi cable, it will work."" nothing about ports to allow in firewall, nothing about IP ranges, etc.  

Even as a regular user, you probably should be able to check the network information, but can't modify it. The weird thing is that... they are obviously set by DHCP, so you can set those anyway, simply in the most complicated way possible.  
^(And yes, if Pihole is the DHCP server, you can set device-specific settings. Its kinda advanced but its a lifesaver if you want Pihole to not receive telework requests)  

Search for ""cmd"", type ""ipconfig /all""  
*If at that point, you don't have enough perms, contact your job. If your IT team doesn't provide enough access, it's impossible to check the network and basically make impossible to have a secure network.*  

Basically, you should have one LAN interface and a VPN interface, with adresses of the gateway/netmask/DHCP/DNS  

1) Check the VPN and your LAN uses different ranges, ips conflicts can be an issue  
2) Compare the LAN setting with what the DHCP should provide, if it doesn't you have a deeper issue  
3) Are the DHCP and DNS on different adresses? Maybe your work IT assumed that your DHCP server also provides DNS, as that's the case with basic home networks?

For example, my telework computer will block nslookup requests... except those aimed at the DHCP-designated server. If DHCP-Pihole points to Pihole, I can't use my router for lookups, and the same in reverse.",pihole,1649428558.0
4270,comment,1,i3votnz,,Gonna need a lot more information on your setup.,pihole,1649411118.0
4271,comment,1,i3vq8yu,,"Not a great deal of info here. Your work laptop in no way will affect other devices. If you're running on a raspi with a SD card, it might be time to replace it.",pihole,1649412239.0
4272,comment,1,i3wrkv0,,"Note that's bypassing the blocking, not bypassing Pihole itself. Pihole will still log the requests, which may or may not be an issue for a device owned by your employer and may or may not wreck your stats.  

A workaround is to use Pihole as DHCP,  then create a dnsmasq config file that overwrite some DHCP options for specific MAC adresses. Because the device receives from DHCP a different DNS resolver, their requests won't hit Pihole without requiring a client-side config.  

For devices owned and maintained by your employer, I would even recommend using your ISP's DNS as a resolver. If there's any issue about telemetry sniffing, that's your work's problem, and they have little to complain if you gave them ressources from the ISP.",pihole,1649430717.0
4273,comment,1,i3wr4at,,Interesting let me give this a try! Thank you!,pihole,1649430543.0
4274,comment,1,i3w8gwj,,"ISP->Router->pi/devices

Router has dhcp enabled and a fixed address for pihole.  

Raspberry Pi is up to date, it’s a Pi4, made sure all lists were up to date as well.

Anything else you’d need?",pihole,1649422929.0
4275,comment,1,i3w8mau,,It’s more that my work laptop won’t connect when I have my pihole running.,pihole,1649422996.0
4276,post,3,tyy2sa,All Replies are N/A,"I am trying to setup pihole on my asustor NAS with docker-compose, all installs OK but when I try and use the pihole's IP in my device's DNS server location box the web page does not render.

The query log status shows `OK, sent to` [`8.8.4.4#53`](https://8.8.4.4#53) but the reply shows `N/A.`

This is my docker-compose file any advice would be really helpful.

`version: '2'`

`services:`

`pihole:`

`container_name: pihole2`

`image: pihole/pihole:latest`

`hostname: pihole`

`# domainname:` [`example.com`](https://example.com)`<-- Update`

`# mac_address: d0:ca:ab:cd:ef:01`

`cap_add:`

`- NET_ADMIN`

`networks:`

`pihole_network:`

`ipv4_address:` [`192.168.1.253`](https://192.168.1.253)   `# <-- Update`

`dns:`

`-` [`1.1.1.1`](https://1.1.1.1)

`-` [`8.8.8.8`](https://8.8.8.8)

`ports:`

`- 443/tcp`

`- 53/tcp`

`- 53/udp`

`- 67/udp`

`- 80/tcp`

`environment:`

`ServerIP:` [`192.168.1.253`](https://192.168.1.253)`# <-- Update (match ipv4_address)`

`VIRTUAL_HOST: pi.hole`

`WEBPASSWORD: """" # <-- Add password (if required)`

`restart: unless-stopped`

&#x200B;

`networks:`

`pihole_network:`

`driver: macvlan`

`driver_opts:`

`parent: eth0`

`ipam:`

`config:`

`- subnet:` [`192.168.1.0/24`](https://192.168.1.0/24)`# <-- Update`

`gateway:` [`192.168.1.254`](https://192.168.1.254)`# <-- Update`

`ip_range:` [`192.168.1.60/28`](https://192.168.1.60/28)`# <-- Update`",pihole,1649403066.0
4277,comment,1,i3vgyi4,,I wonser why is it sent to 8.8.4.4. when you set the upstream DNS to 8.8.8.8 and 1.1.1.1?,pihole,1649404862.0
4278,comment,1,i3vjr65,,What DNS upstream servers do you see in the web panel?,pihole,1649407069.0
4279,comment,1,i3vj19h,,"Yes, I thought that was weird too. No idea why.

EDIT: I did go in and tick the second Google IP4 option so maybe that is it?",pihole,1649406497.0
4280,comment,1,i3vkxkd,,"I have just reverted to the one google dns now.

I have also tried all the interface settings

[Screengrab](https://capture.dropbox.com/rNpwzmaNplWyud94)

EDIT: OpenDNS is also not working",pihole,1649408000.0
4281,comment,1,i3xoywm,,"yes, this is the recommended secondary DNS IP from google DNS.I read a bit about docker and Pihole and that the network is different because of docker brigde network or something like that. I have no idea, because I do not use docker, sry.

[https://docs.pi-hole.net/docker/DHCP/](https://docs.pi-hole.net/docker/DHCP/)

If I were you, I would watch some tutorial for how to intsall PiHole in a docker environment and start over. I'm not sure if executing `pihole reconfigure` could help here somehow. You could give it a try.",pihole,1649443375.0
4282,comment,2,i415mi1,,"I reinstalled using this great tutorial. All works perfectly now!

[pihole on docker with DHCP](https://github.com/piwi3910/techtalk)",pihole,1649510835.0
4283,post,5,tyy19q,Unable to blacklist/whitelist domains - read-only database error,"Environment: Raspbian 9 on Raspberry Pi 3b

Pi-hole Version: 5.9.1

FTL Version: 5.14 

Whenever I try to whitelist or blacklist a domain, I get an error that I'm attempting to write to a read-only database, and the operation fails. I thought it was a permissions issue at first, but all ownership and perms appear to be correct. Tried some other fixes, tried pihole -r, updated gravity and all other lists, but nothing seems to work. Here's the stat result:


    root:root      644  /etc/pihole/adlists.list
    root:root      644  /etc/pihole/adlists.list.old
    root:root      644  /etc/pihole/black.list
    root:root      644  /etc/pihole/custom.list
    pihole:pihole  644  /etc/pihole/dhcp.leases
    root:root      644  /etc/pihole/dns-servers.conf
    root:root      644  /etc/pihole/GitHubVersions
    pihole:pihole  664  /etc/pihole/gravity.db
    root:root      644  /etc/pihole/gravity.list
    pihole:pihole  664  /etc/pihole/gravity_old.db
    root:root      644  /etc/pihole/install.log
    root:root      644  /etc/pihole/list.10.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.10.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.11.v.firebog.net.domains
    root:root      644  /etc/pihole/list.11.v.firebog.net.domains.sha1
    root:root      644  /etc/pihole/list.12.v.firebog.net.domains
    root:root      644  /etc/pihole/list.12.v.firebog.net.domains.sha1
    root:root      644  /etc/pihole/list.14.www.dshield.org.domains
    root:root      644  /etc/pihole/list.14.www.dshield.org.domains.sha1
    root:root      644  /etc/pihole/list.15.www.dshield.org.domains
    root:root      644  /etc/pihole/list.15.www.dshield.org.domains.sha1
    root:root      644  /etc/pihole/list.16.www.dshield.org.domains
    root:root      644  /etc/pihole/list.16.www.dshield.org.domains.sha1
    root:root      644  /etc/pihole/list.17.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.17.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.18.hostsfile.org.domains
    root:root      644  /etc/pihole/list.18.hostsfile.org.domains.sha1
    root:root      644  /etc/pihole/list.19.someonewhocares.org.domains
    root:root      644  /etc/pihole/list.19.someonewhocares.org.domains.sha1
    root:root      644  /etc/pihole/list.1.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.1.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.20.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.20.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.21.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.21.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.22.winhelp2002.mvps.org.domains
    root:root      644  /etc/pihole/list.22.winhelp2002.mvps.org.domains.sha1
    root:root      644  /etc/pihole/list.24.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.24.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.25.ssl.bblck.me.domains
    root:root      644  /etc/pihole/list.25.ssl.bblck.me.domains.sha1
    root:root      644  /etc/pihole/list.26.hostsfile.mine.nu.domains
    root:root      644  /etc/pihole/list.26.hostsfile.mine.nu.domains.sha1
    root:root      644  /etc/pihole/list.27.www.joewein.net.domains
    root:root      644  /etc/pihole/list.27.www.joewein.net.domains.sha1
    root:root      644  /etc/pihole/list.28.v.firebog.net.domains
    root:root      644  /etc/pihole/list.28.v.firebog.net.domains.sha1
    root:root      644  /etc/pihole/list.29.adblock.mahakala.is.domains
    root:root      644  /etc/pihole/list.29.adblock.mahakala.is.domains.sha1
    root:root      644  /etc/pihole/list.30.adaway.org.domains
    root:root      644  /etc/pihole/list.30.adaway.org.domains.sha1
    root:root      644  /etc/pihole/list.31.v.firebog.net.domains
    root:root      644  /etc/pihole/list.31.v.firebog.net.domains.sha1
    root:root      644  /etc/pihole/list.32.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.32.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.33.v.firebog.net.domains
    root:root      644  /etc/pihole/list.33.v.firebog.net.domains.sha1
    root:root      644  /etc/pihole/list.34.pgl.yoyo.org.domains
    root:root      644  /etc/pihole/list.34.pgl.yoyo.org.domains.sha1
    root:root      644  /etc/pihole/list.35.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.35.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.36.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.36.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.37.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.37.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.38.v.firebog.net.domains
    root:root      644  /etc/pihole/list.38.v.firebog.net.domains.sha1
    root:root      644  /etc/pihole/list.39.v.firebog.net.domains
    root:root      644  /etc/pihole/list.39.v.firebog.net.domains.sha1
    root:root      644  /etc/pihole/list.3.sysctl.org.domains
    root:root      644  /etc/pihole/list.3.sysctl.org.domains.sha1
    root:root      644  /etc/pihole/list.40.gitlab.com.domains
    root:root      644  /etc/pihole/list.40.gitlab.com.domains.sha1
    root:root      644  /etc/pihole/list.41.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.41.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.42.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.42.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.43.www.github.developerdan.com.domains
    root:root      644  /etc/pihole/list.43.www.github.developerdan.com.domains.sha1
    root:root      644  /etc/pihole/list.44.hostfiles.frogeye.fr.domains
    root:root      644  /etc/pihole/list.44.hostfiles.frogeye.fr.domains.sha1
    root:root      644  /etc/pihole/list.45.hostfiles.frogeye.fr.domains
    root:root      644  /etc/pihole/list.45.hostfiles.frogeye.fr.domains.sha1
    root:root      644  /etc/pihole/list.46.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.46.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.47.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.47.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.48.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.48.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.50.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.50.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.51.osint.digitalside.it.domains
    root:root      644  /etc/pihole/list.51.osint.digitalside.it.domains.sha1
    root:root      644  /etc/pihole/list.52.s3.amazonaws.com.domains
    root:root      644  /etc/pihole/list.52.s3.amazonaws.com.domains.sha1
    root:root      644  /etc/pihole/list.53.v.firebog.net.domains
    root:root      644  /etc/pihole/list.53.v.firebog.net.domains.sha1
    root:root      644  /etc/pihole/list.58.www.malwaredomainlist.com.domains
    root:root      644  /etc/pihole/list.58.www.malwaredomainlist.com.domains.sha1
    root:root      644  /etc/pihole/list.59.bitbucket.org.domains
    root:root      644  /etc/pihole/list.59.bitbucket.org.domains.sha1
    root:root      644  /etc/pihole/list.5.s3.amazonaws.com.domains
    root:root      644  /etc/pihole/list.5.s3.amazonaws.com.domains.sha1
    root:root      644  /etc/pihole/list.60.phishing.army.domains
    root:root      644  /etc/pihole/list.60.phishing.army.domains.sha1
    root:root      644  /etc/pihole/list.61.gitlab.com.domains
    root:root      644  /etc/pihole/list.61.gitlab.com.domains.sha1
    root:root      644  /etc/pihole/list.62.v.firebog.net.domains
    root:root      644  /etc/pihole/list.62.v.firebog.net.domains.sha1
    root:root      644  /etc/pihole/list.63.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.63.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.64.urlhaus.abuse.ch.domains
    root:root      644  /etc/pihole/list.64.urlhaus.abuse.ch.domains.sha1
    root:root      644  /etc/pihole/list.65.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.65.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/list.6.s3.amazonaws.com.domains
    root:root      644  /etc/pihole/list.6.s3.amazonaws.com.domains.sha1
    root:root      644  /etc/pihole/list.9.raw.githubusercontent.com.domains
    root:root      644  /etc/pihole/list.9.raw.githubusercontent.com.domains.sha1
    root:root      644  /etc/pihole/localbranches
    root:root      644  /etc/pihole/local.list
    root:root      644  /etc/pihole/localversions
    root:root      644  /etc/pihole/logrotate
    pihole:pihole  644  /etc/pihole/macvendor.db
    root:root      755  /etc/pihole/migration_backup
    pihole:root    664  /etc/pihole/pihole-FTL.conf
    pihole:pihole  664  /etc/pihole/pihole-FTL.db
    root:root      644  /etc/pihole/setupVars.conf
    root:root      644  /etc/pihole/setupVars.conf.update.bak

Tricorder link here: https://tricorder.pi-hole.net/6OjuXzH6/

edit: I should add that I did search for some similar threads and didn't come up with much of anything that would help. Found a thread where someone was running Pi-Hole on Arch under nginx. Godspeed to that dude.",pihole,1649402878.0
4284,comment,1,i3vfnpa,,"Sounds like the web server user has not the right permissions.

https://discourse.pi-hole.net/t/solved-while-executing-attempt-to-write-a-readonly-database-error/33003/2",pihole,1649403852.0
4285,comment,1,i3vj5y5,,"I should have mentioned that I did give that a go before coming here, but no joy :(",pihole,1649406598.0
4286,post,8,tyxeug,Several thousand requests to routerlogin.com on different ports during the night,"Last night my pihole shows a lot of requests to [routerlogin.com](https://routerlogin.com) on different ports. Can anyone tell me if I need to be worried about this? Was someone trying to break in to my router? It would look to me like it was a portscan, but why would you portscan [routerlogin.com](https://routerlogin.com)? And when it goes through my pihole, does that mean that it came from a device on my network?",pihole,1649400210.0
4287,comment,7,i3vc1f3,,"Have a NETGEAR router?  If so that’s probably all it is. 

That’s their URL for the router.   If you’re using the router for DNS it normally hijacks it and brings you to the control gui.  

So, honestly, since you’re running to the PiHole dns it’s likely related to non response or something.",pihole,1649401111.0
4288,comment,2,i3vd7dd,,Alright. Thank you. Glad there's nothing to worry about.,pihole,1649401967.0
4289,comment,2,i3vzexj,,Try mapping that to your router's IP in local DNS?,pihole,1649418346.0
4290,comment,1,i3wsq73,,"This. If a device expects a specific domain to point to itself, do yourself a favor and ask Pihole to perform the same mapping. This way you won't be surprised the day the user manual asks you to login to routerlogin.com  

^(If the answer is not the device itself, you can also create a dnsmasq config file to use the device as routerlogin.com 's resolver instead of an hardcoded answer)",pihole,1649431158.0
4291,comment,1,i3wya4e,,"Oh interesting, how should one write such file?",pihole,1649433272.0
4292,comment,1,i3x6iu8,,"For starters, the files are located in /etc/dnsmasq.d/ (and loaded each time Pihole dns is restarted)  
So we can create a new file with any name (like 90-custom.conf) as long it follows [dnsmasq's documentation](https://thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html)  

So this case it would take one line :  
server=/routerlogin.com/192.168.1.1

Replace the IP by the one from the router, and Pihole will forward the *.routerlogin.com requests to the router, assuming the domain is not blocked, in cache, etc.  
Not really efficient if the router answers it's own IP, of course",pihole,1649436402.0
4293,post,5,tyvb0v,"New to Pi Hole, want to know if it's right for me","Like the title said I'm very very new to pi hole and generally any type of computer network systems. Basically I want to know if Pi Hole is a project I want to try doing on my actual router or something I can point my laptop or phone at when I feel it's necessary.

I don't really care about cybersecurity at the moment or activity tracking and that kind of thing. I use NordVPN simply because I live in Canada and I like to set my location to the US so I can use HBO Max or back to Canada to use Crave. I like the fact that Pi Hole has super good ad blocking capabilities so I'd like to try it out for that reason, but I don't want to connect it straight to the router if I can't keep doing the location switching I've been doing without it being difficult. Does anyone have insight on this situation?",pihole,1649391966.0
4294,comment,4,i3uz0jt,,"I use pi hole purely for ad blocking. It's not hard to setup and once you get to the web interface it's intuitive and easier.

Your add blocking is only as good as the lists you're using and how hardcore you want to go with it. 

Pie hole will need a static i.p address that's not on your routers dhcp pool and will need to be connected to the router. 

Pending your network configuration you'll need to make adjustments in your router for the dns pointing to the pi. 

I personally have my own virtual private server running open vpn. Don't have any issues with pi hole interfering with my vpn. So you should be fine.

Kinda hard to say if it's right for you, it's one of those try it out and see how it goes type things.  Worst case scenario you're down a hundred bucks on a raspberry pi that you can use as a emulation box or linux testing platform as a repo job.

P.s: if you can be assed piss off streaming services and checkout plex.",pihole,1649392564.0
4295,comment,2,i3v9m4y,,"It's not going to get in the way of what you are currently doing. 

Everyone should be using PiHole.",pihole,1649399356.0
4296,comment,2,i3xnar1,,[deleted],pihole,1649442732.0
4297,comment,1,i3uz560,,"I'm not sure what nord does in the way of handling DNS when VPN is active, but there is no reason why having pihole as your DNS sever will interfere. 

Most likely on your network now your gateway (router) is your DNS server (you can see this by typing ipconfig /all on windows). If you set pihole as your the DNS server your router hands out it really wouldn't change how nord interacted with your computer.

It would allow for all devices on your network to bennefit from ad blocking.


Edit: clarification and typos",pihole,1649392639.0
4298,comment,1,i3ye1le,,"You did mentioned you use a VPN to watch US streaming devices. While pi-hole works on your local network, once you use a VPN you’re bypassing all it’s benefits, since you’ll be using the DNS servers provided by your VPN service provider. Just something you should keep in mind. That being said anytime you’re NOT using a VPN from home, you get to rip the benefits of Pi-hole.",pihole,1649453330.0
4299,comment,1,i40jpyw,,"If it is just ad-blocking on your Laptop/Phone you are looking for then you can always use browser extensions and/or a browser like Brave, mind you this will not block TV and in-app ads on mobile.   
To block ads across devices and applications you can use pi-hole but again if you are using VPN on router level, pi-hole is not really a best option here as VPNs use their own DNS servers.   
In any case, you can always give pihole a try, it is not that much difficult to setup with tons of documentation and community support around and experience the difference yourself.",pihole,1649496165.0
4300,comment,4,i3uzdcv,,Plex is love. Plex is life.,pihole,1649392773.0
4301,comment,0,i3x5m33,,Actually if you’re just trying it out I would suggest setting it up in the cloud for free.,pihole,1649436058.0
4302,comment,1,i3yjrzj,,"There really is times, that it actually saves you time! Even if its only a few seconds, its well worth it! One use case I have, when I'm out, I have this food coupon app, don't ask lol, without pihole, have to wait for a bloody ad to load and click a microscopic x before I can continue......connected to pihole when out, boom right in, a few precious seconds I'm happy to save every damn time",pihole,1649455708.0
4303,comment,0,i3uzl2g,,"You get me!

Looking at building a new plex and big box p.c in a fractal design define 7 xl case. 🤔 all that delicious storage.",pihole,1649392893.0
4304,post,0,tyt0m7,DNS Loop?,"I run PiHole in docker on a Mac, I also run the Channels DVR video server on that same Mac. So the IP of the Mac and the IP of the Pihole are the same thing.  Am I setting up a potential loop situation that  when the DVR does a DNS request that it is coming back to the same IP address that the server is running on?  Was thinking that I should point the Mac itself directly to an upstream DNS and not have it do its own lookups to itself, if you follow me?",pihole,1649384256.0
4305,comment,1,i3ulhl6,,"It's fine, set the DNS IP to localhost 127.0.0.1 and not to the LAN IP of the device",pihole,1649385694.0
4306,comment,1,i3ulzj0,,"A loop in this context would be along the lines of:

Machine A gets its DNS from Machine B,
Machine B gets its DNS from Machine A.

I've read your statement a few times over and I don't see the potential for this happening.",pihole,1649385926.0
4307,comment,1,i3ulykz,,So put the localhost in the Mac network settings for DNS?  OK,pihole,1649385913.0
4308,comment,1,i3um7jp,,"I think by using the localhost I avoid the requests from the server going out to my router, only to be turned around and sent right back to the Mac. Avoids a hop.",pihole,1649386029.0
4309,comment,1,i3umlpg,,"Ideally clients shouldn't be querying the router anyway, and would be sending their requests directly to your nameserver (local or otherwise).

If the router is advertising its own address for DNS through DHCP instead of passing out DNS endpoint(s) directly, that's a separate issue.",pihole,1649386210.0
4310,comment,1,i3un3ig,,"Router gives out the IP of the Pihole for DNS. Local advertising of the routers IP for DNS is turned off.  So all my machines are getting DNS from the Pihole.  New issue is I see in the logs for the video server that pihole is blocking some vital connections that allow media streams from TV networks.  I may have to whitelist around all these, or since this machine does no web browsing I could point the Mac exclusively to an upstream DNS so it runs unfiltered for itself.",pihole,1649386442.0
4311,post,1,tyrmso,"Device won't connect, need help","Ive tried searching for what's going on, but I guess I'm not using the right words in Google.

I have a pihole setup, all devices connect to the local network and internet. I just setup a Raspberry Pi 4 running Raspberry OS and it connects to the local network, and I can even ssh into it. But I cannot for the life of me figure out why it won't connect to the internet. 

My dashboard isn't showing any connection attempt from the Pi 4s IP in the query, so that's what has me thinking that's where the issue is.

Any suggestions would be appreciated",pihole,1649379793.0
4312,comment,1,i3u8swi,,What’s the output of *ip route show*? Can you ping the default route?,pihole,1649380106.0
4313,comment,1,i3uaqqg,,Have you set your router’s DNS to the pi hole’s IP?,pihole,1649380946.0
4314,comment,1,i3ud5ob,,">My dashboard isn't showing any connection attempt from the Pi 4s IP in the query

The Pi likely has a static nameserver set.  From the Pi terminal, what is the output of the following:

`cat /etc/resolv.conf`

`nslookup pi.hole`",pihole,1649381987.0
4315,comment,1,i3ukxsa,,"What's the output of

Dig google.com

?",pihole,1649385437.0
4316,comment,0,i3u9yz1,,"Your modem/router(public side) should still point to a public dns. Your pihole should be the DNS for your LAN side DHCP scope. 

Example:
LAN side
192.168.0.1 = gateway
255.255.255.0
192.168.0.x = DNS/pihole

No secondary DNS

You might need to do an ""ipconfig /release"" then ""
ipconfig /renew"" to get the new DHCP scope",pihole,1649380615.0
4317,comment,1,i3uaf41,,ELI5?,pihole,1649380809.0
4318,comment,1,i3uav2h,,The pihole works with every other device except the Pi4,pihole,1649380998.0
4319,comment,1,i3ujjn0,,"# Generated by resolvconf
domain lan
nameserver 192.168.1.62

That IP is the address of my pihole",pihole,1649384802.0
4320,comment,1,i3uafoo,,ELI5?,pihole,1649380816.0
4321,comment,1,i3ucyq7,,"Run the following command from the Pi terminal and post the output:

`ip route`",pihole,1649381901.0
4322,comment,1,i3uc26k,,So your IP changed when you switched to the new pi,pihole,1649381516.0
4323,comment,1,i3ukdlb,,And the second command?,pihole,1649385181.0
4324,comment,1,i3uj53s,,default via 192.168.1.1 dev wlan0 proto DHCP src 192.168.1.142 metric 303 192.168.1.0/24 dev wlan0 proto DHCP scope link src 192.168.1.142 metric 303,pihole,1649384618.0
4325,comment,1,i3ucg22,,The Pi4 is a separate device from the pihole,pihole,1649381680.0
4326,comment,1,i3ukfg6,,It's not returning anything for me,pihole,1649385205.0
4327,comment,1,i3uvulq,,Ah I see where I misunderstood. Did you set your router’s IPv6 DNS to the IP of the pihole? And remove any other option for both v4 and 6? I ask because I just recently realized my IPv6 data wasn’t going through my pihole.,pihole,1649390805.0
4328,comment,1,i3ukofc,,"That's odd.  Try the following:

`dig pi.hole`

`dig pi.hole @192.168.1.62`",pihole,1649385319.0
4329,comment,1,i3wjc37,,"Yes, it's set for the pihole. I ended up restarting everything again and having my ISP send a refresh to my modem and now it just works",pihole,1649427526.0
4330,comment,1,i3uktt8,,"I went back and restarted my entire network again, and had my ISP send a refresh to my modem. 

It just works now 

May have just been a weird bug that messed with it for a bit",pihole,1649385387.0
4331,comment,1,i3ulek9,,/piN6pGVS,pihole,1649385655.0
4332,post,5,tyrb17,Blocking Vizio (Updates) Help; PiHole Disabled And Still Blocking,"Have a Vizio. News broke a few days ago about them doing ""jump ads"" on your cable viewing and could go to other recognized programming.

Anyway, so I want to block updates. If I block a bit more than that, okay.

I refreshed my pihole. Because it didn't work last time I used it, I went for the approach of making the Vizio's primary DNS address be my pihole's on the local network. And the secondary DNS all 0s.

I thought I had it working where I blocked some vizio, smartcast, and a couple other domains (connect.tv or something) to experiment, and I could still get into the smartcast. That's where apps like Disney Plus are.

But now today, I can't get the ""Home"" button to load. It should be loading SmartCast. I get the error screen ""No Network Detected"". I can hit the physical Netflix button on the remote and it works perfectly fine. I can stream stream stream. But SmartCast won't load.

So I am looking for anything in the query logs on pihole records to end up whitelisting. Nothing. Everything in the logs is being allowed (which is always netflix stuff and google stuff.) So either my TV doesn't want to send vizio queries to that DNS (pihole), or the pihole isn't showing the logs. There is no filter as far as I can tell.

Last ditch effort of troubleshooting: I use the pihole GUI to disable the pihole for 5 minutes and try rebooting the Vizio. No luck. Just says ""No Network Detected"". Even though pihole is disabled. So I guess disable doesn't mean what I think it means.

I've tried changing the upstream DNSes allowed from OpenDNS or whatever it is to also include Google just in case that makes a difference. No dice there.

I've tried disabling the items listed on the blacklist. I've tried disabling the items on the whitelist. None of these are changing the end result.

What are any suggestions you would have for troubleshooting this?

And yes, if I turn off manual connection settings on the Vizio, it loads smartcast no problem. But risks an update being downloaded.",pihole,1649378757.0
4333,comment,2,i3u7ot2,,">Last ditch effort of troubleshooting: I use the pihole GUI to disable the pihole for 5 minutes and try rebooting the Vizio. No luck. Just says ""No Network Detected"". Even though pihole is disabled. So I guess disable doesn't mean what I think it means.

It does in fact mean what you think it means. Did you ensure that the client(s) weren't retaining any cache? In the offchance this record's TTL exceeds five minutes you may not see the effects of disabling client side until such time as it's expired. One of the easiest ways to flush the cache on mobile devices is to toggle airplane mode, though a boot cycle is foolproof.

If it's still not working at that point the issue isn't Pi-hole (at least directly) and it would start to point to either Pi-hole's upstream or the service itself being out of whack.",pihole,1649379623.0
4334,comment,1,i3un7q9,,"> And the secondary DNS all 0s

That is not what you appear to think it is. Leave the second DNS address blank.",pihole,1649386495.0
4335,comment,1,i3uc0xy,,"I boot cycled the Vizio. Not using power off on remote, but as instructed in the error message, to naviagate to Menu > Admin & Privacy > Reboot TV.

Turns out that somewhere along the lines I fiddled with the manual settings where DHCP is off, the DNS addresses got put back to their defaults of 75.75.75.75 and 75.75.76.76. I only discovered that after pondering why my logs were out of date by 30 minutes. Also was the time I tried disabling pihole on the GUI, so I retested that with the DNS pointing to pihole and pihole disabled (though every blacklist, whitelist, and adlist is disabled in the GUI). No luck either.

The fact I can still use Netflix tells me this must be some Vizio thing where a manual DNS it does not like for its core OS. Anyone might know how to trick that?",pihole,1649381501.0
4336,comment,1,i3w4pwk,,"Eh, I tried playing with that and left it to also point to the pihole. I can try blank next.",pihole,1649421144.0
4337,comment,1,i3ud196,,"One would generally create an outgoing packet rule that looks something to the effect of ""redirect any outgoing packet on port 53 that's not from the Pi-hole host, to the Pi-hole host"".

Some home/ISP routers, many in my experience, just straight up don't have ability to do this.",pihole,1649381932.0
4338,comment,1,i3ughqk,,"I found a little bit about this in searching https://labzilla.io/blog/force-dns-pihole

But I'm not sure how that may be related to the Vizio not loading content it is trying to. I have no logs of anything being blocked.",pihole,1649383431.0
4339,post,2,typhve,Pi-hole DHCP settings,"Hi all,

   So I managed to get Pi-Hole up and working on my Windows 10 PC using  [u/andrewdenty](https://www.reddit.com/user/andrewdenty/)'s very helpful guide. Unfortunately, I have a BT (UK) router which doesn't allow me to change my router's DNS settings. I attempted to work around this by disabling DHCP on my router and instead using Pi-Hole's own. For some reason when I do this none of the apps on my TV will work, all saying they can't find a connection etc. Can someone give me some help regarding which settings to use for Pi-Hole's DHCP, in terms of IP range etc? Do I need to be restarting the router after changing these settings? Sorry if this all sounds dumb I'm a complete noob at this.

Thanks all.",pihole,1649373151.0
4340,comment,2,i3u3rik,,"Enable DHCP on the pihole, make sure the range is the same as in the router for ease of use for networking noobs. 

Disable the routers DHCP. 

Restart all the router

Restart the pihole. (Not necessary but doesn’t hurt)

Restart all devices on the network. Every phone, TV, computer, etc.",pihole,1649377878.0
4341,comment,2,i3vgmij,,Thanks bro will give this a go when I can,pihole,1649404606.0
4342,comment,1,i3yka48,,"Exactly this! And if you ever get the chance, grab a router to unlock yourself from your ISP locked down modem/router",pihole,1649455924.0
4343,post,1,tyn51n,Block lists,"Hey all

Just wondering if you can help

I have just updated some on my apps on my phone and ads are back.

Do you have any good updated block lists to block mobile game ads",pihole,1649366375.0
4344,comment,2,i3tewec,,Check the query log and see if you spot anything that looks like an ad request. Then do a Google search with that url and pihole. If it’s already on a list it’ll probably come up in the search. If not you can add it to your block list manually.,pihole,1649367337.0
4345,comment,2,i3u4jvj,,">	ads are back.

https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522",pihole,1649378224.0
4346,comment,2,i3xxwf7,,"Kindly use
Firebog.net 

There is all list of

Ads
Trackers
Malware",pihole,1649446897.0
4347,comment,1,i3tt1p4,,https://oisd.nl/  his full list: https://dbl.oisd.nl/,pihole,1649373241.0
4348,comment,1,i3u3ey3,,Some phones encrypt their DNS traffic like my Google Pixel 6. As a result nothing gets filtered at least on Chrome.,pihole,1649377726.0
4349,post,2,tymiu2,Imgur blocked without saying it's blocked?,"Has anyone seen this issue? It's popped up for me in the last day or so. If I browse to Imgur, the site itself loads but none of the actual images do. Looking at the query log, nothing is being shown as blocked at all. But if I bypass the pihole as the DNS server, everything works fine.",pihole,1649364697.0
4350,comment,1,i3t8suz,,"If Pi-hole is blocking any domains, it will show in your query log.  It is not the main imgur domain, but perhaps a related domain that serves the images:

    js.media-lab.ai",pihole,1649364841.0
4351,comment,2,i3ti1lx,,"Thanks! 

js.media-lab.ai was also being let through, but your comment made me really comb through pihole.log. I noticed any request to imgur was repeating (successfully) about 20 times, which is kinda odd.

I had the upstream DNS servers set to the CIRA Canadian Shield Protected service, which seems like it's actively filtering something out behind the scenes. Changing that to a 'non-protected' service resolved the issue.",pihole,1649368643.0
4352,comment,1,i3tl7xy,,">I had the upstream DNS servers set to the CIRA Canadian Shield Protected service, which seems like it's actively filtering something out behind the scenes.

If an upstream DNS server is blocking domains, you should see **blocked (external)** in the Pi-hole query log status column.",pihole,1649369964.0
4353,comment,1,i3xm9ar,,"The source CIRA uses to detect scam sites has a false positive for i.imgur.com and is directing traffic at this domain to it's AWS blockpage.

As per the CIRA Canadian Shield site they use ""Scam Advisor"" for a list of scam domains and ScamAdvisor has given i.imgur.com a rating of 1/100 where higher is better. ""Investors-Protect.com has marked this website as ""High Yield Investment Program"" with associated risk""

I've contacted both the CIRA false positives support contact and the ScamAdvisor false positive review contact at 9am EST today, but i have yet to hear a response from either. ScamAdvisor says a 2 day SLA, I've contacted CIRA about false positives before and they have been good about it generally but i think because this source is ScamAdvisor they won't do much.


more info here:
https://www.cira.ca/cybersecurity-services/canadian-shield/faq-public


Edit: scam advisor contacted me this morning April 9th to inform me that they agree this is a false positive and have corrected it",pihole,1649442331.0
4354,post,3,tykiay,Pihole DHCP static,"Hi, is there a way for the pihole DHCP to assign IPs on only the devices that are in the static section? For exemple, if a device not in the static DHCP list, that device would not get an IP unless I ""whitelist"" that device.

Thank you",pihole,1649359093.0
4355,comment,1,i3sywbp,,"You are looking for DHCP MAC adress filtering:[https://discourse.pi-hole.net/t/dhcp-server-mac-address-filtering/19310](https://discourse.pi-hole.net/t/dhcp-server-mac-address-filtering/19310)

[https://thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html](https://thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html)",pihole,1649361012.0
4356,post,1,tyk01l,Downloading Log data,Is there a way to download the piHole log data for analysis? I'd like to get a full dump for a single device to see what it connected to while watching Paramount+,pihole,1649357715.0
4357,comment,1,i3sx20l,,"Aa far as I know not from the web panel, but the logs can be found at /var/log/
You can just copy it from there.
The longterm data is stored in a database at /etc/pihole/pihole-FTL.db",pihole,1649360309.0
4358,comment,1,i3sx59d,,"This SQL command will do it.  Substitute the correct IP for your client to replace the IP shown in this example:

`sqlite3 /etc/pihole/pihole-FTL.db ""SELECT domain FROM queries WHERE client='192.168.0.140'"" | sort | uniq -c | sort -n -r`",pihole,1649360344.0
4359,post,0,tyilsh,Outlook Client now erroring out when getting Gmail (IMAP) when piHole is enabled.,"Hi,

I updated piHole a couple days ago and not outlook is failing to fetch my Gmail (IMAP) when piHole is enabled. I have checked the query log when this is happening and nothing is being blocked. any ideas?

Thanks!

    pi@retropie:~ $ pihole -q accounts.google.com
      [i] No results found for accounts.google.com within the block lists
    pi@retropie:~ $ pihole -q mail.google.com
      [i] No results found for mail.google.com within the block lists
    pi@retropie:~ $  pihole -q google.com
     Match found in exact whitelist
       0.client-channel.google.com
       android.clients.google.com
       appsbackup-pa.clients6.google.com
       clients1.google.com
       clients2.google.com
       clients3.google.com
       clients4.google.com
       clients5.google.com
       clients6.google.com
       cse.google.com
       appspot-preview.l.google.com
       video-stats.l.google.com
       mail.google.com
       accounts.google.com
     Match found in exact blacklist
       adservice.google.com
     Match found in https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts:
       adservice.google.com.vn
       fgoogle.com
       www.fgoogle.com
       marketingplatform.google.com
       smartlock.google.com
       ads.google.com
       adservice.google.com
       s0-2mdn-net.l.google.com
       pagead-googlehosted.l.google.com
       www.doubleclickbygoogle.com
       video-stats.video.google.com
       adservice.google.com.au
       ssl-google-analytics.l.google.com
       drive.google.com.it-barcelona.com
       adservice.google.com.mt
       analytics.google.com
       mail-ads.google.com
       pagead.l.google.com
       partnerad.l.google.com
       www-google-analytics.l.google.com
     Match found in https://adaway.org/hosts.txt:
       ads.google.com
       adservice.google.com
       s0-2mdn-net.l.google.com
     Match found in https://v.firebog.net/hosts/AdguardDNS.txt:
       doubleclickbygoogle.com
       ssl-google-analytics.l.google.com
       www-google-analytics.l.google.com
       fcmatch.google.com
       partnerad.l.google.com
       s1.dugoogle.com",pihole,1649353952.0
4360,comment,2,i3sh3vb,,"Use these tools to determine the exact domains being requested and if any of them are being blocked:

https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522",pihole,1649354342.0
4361,comment,2,i3snlpv,,"Open the Tail pihole.log section in the admin panel, try to fetch emails, look in the live log what gets blocked.",pihole,1649356743.0
4362,comment,2,i3sntft,,"And it could also be that some Microsoft / live domains get blocked, bc outlook is a ms software?;",pihole,1649356825.0
4363,comment,1,i3sjajc,,This is outlook fat client and the pihole log doesn't show anything being blocked. I can access gmail fine via firefox.,pihole,1649355163.0
4364,comment,1,i3sof24,,"Not seeing anything in the log that is being blocked, that's what's confusing and it's only gmail.My outlook and iCloud account fetch fine.

As soon as I disable pihole it synchs right up",pihole,1649357049.0
4365,comment,2,i3squuh,,Do you disable it temporary in the settings or do you switch your DNS settings completely?,pihole,1649357955.0
4366,comment,1,i3sr195,,And what is the exact error message in outlook?,pihole,1649358021.0
4367,comment,1,i3srt6p,,In the GUI. Waiting on the timeout error now from outlook,pihole,1649358313.0
4368,comment,2,i3sryz5,,What happens when you whitelist imap.gmail.com?,pihole,1649358373.0
4369,comment,2,i3t2gt3,,"I added (\\.|\^)gmail\\.com$ and that did the trick. Thanks.

What I don't get is why isn't this displaying in the log if it was being blocked? That's seems to be an issue.",pihole,1649362355.0
4370,comment,1,i3t33di,,"If the log didn't show a domain as blocked, Pi-hole did not block it.",pihole,1649362595.0
4371,comment,0,i3thmot,,"It wouldn't make sense for that soulution to work then, would it.",pihole,1649368472.0
4372,comment,1,i3tix41,,"Please post lines from the dnsmasq log that show replies for this domain:

`grep gmail.com /var/log/pihole.log* | grep reply`",pihole,1649369007.0
4373,post,87,tyielr,MLB-TV Whitelist Addition,"In honor of opening day I found the url that was causing issues with my MLB-TV, hope it helps someone.

search-api-mlbtv.mlb.com",pihole,1649353396.0
4374,comment,11,i3tk6iy,,"Saving this, thanks. I'm about to redeem my free mlbtv subscription from T-Mobile now lol.",pihole,1649369529.0
4375,comment,5,i3zqxfx,,"I went through a bunch of calls on Android and narrowed it down to a single API pull needing to take place to: [imasdk.googleapis.com](https://imasdk.googleapis.com)  


I threw it on my whitelist and was able to have [MLB.TV](https://MLB.TV) work on my S22U (coincidently, I did not run into this issue on my SamsungTV)  


mlb.demdex and the other regular demdex pulls didn't change my ability to get [MLB.TV](https://MLB.TV)  


This is also a bummer because this is a video ad service from google so there must be some type of check on this before launching [MLB.TV](https://MLB.TV)  


Coincidentally, if it makes the initial API call successfully, then it does not continue to make the call if you then take it off the whitelist.  


Can others confirm this work around?",pihole,1649476026.0
4376,comment,4,i3spo6n,,Much appreciated.,pihole,1649357510.0
4377,comment,3,i3sqnly,,"on mobile devices?my android devices close the app almost immediately. It's working fine on my Surface (windoze laptop)  
Edit: this doesn't fix the issue I'm having. if I disable pihole the android app works just fine. I'll have to keep looking through the logs",pihole,1649357880.0
4378,comment,2,i3uegb9,,Just using whatever the basic block list is and I didn't have any issue today activating the t-mobile mlb offer.  Watching it now on my Android TV (Hisense U8G 55).  If it helps only hit I see allowed with mlb in it is mlb.sc.omtrdc.net.,pihole,1649382546.0
4379,comment,2,i3us96o,,"I could not login from PS5 into the MLB app. I put in my email and password and it was stuck at the login screen with the rotating baseball. I got around it by whitelisting the below domain. 

    dpm.demdex.net

Tried again after whitelisting it and it logged in just fine. This is the only domain I needed to whitelist (I didn't whitelist OP's domain).  

I believe demdex is a tracking domain, but it also seems to be the domain that passes the login to MLB. ***If you remove the whitelist after logging in, it will log you out, so you are stuck having to keep it whitelisted.*** Just FYI.",pihole,1649388939.0
4380,comment,2,i3z4djj,,"There's definitely something I need to whitelist but the suggestions here haven't been helpful yet. As soon as I switched my wireless network away from the PiHole, everything started working fine.",pihole,1649464916.0
4381,comment,2,i4cibgc,,"I'm having a similar problem here with my Hisense TV. The [MLB.TV](https://MLB.TV) app will load up a live game and then crash in about 2 seconds.

Adding the TV itself to my exclusion group fixes it. I would love if there was a solution you guys find that doesn't involve whitelisting some google ad service across my whole network.",pihole,1649713552.0
4382,comment,1,i3ubqbz,,I don't have it but the roommate does. I really appreciate you doing this. I was curious if my DNS was maybe causing hiccups.,pihole,1649381375.0
4383,comment,0,i3vdoaw,,"Did you get it early, I thought it was this coming Tuesday.",pihole,1649402321.0
4384,comment,2,i46v185,,Can confirm this works. Many thanks.,pihole,1649613213.0
4385,comment,1,i4lfbvy,,This is the only thing I had to Whitelist and it works without crashing on Android now (T-Mobile S21).,pihole,1649872861.0
4386,comment,1,i4rcv8t,,"Stopped the crashing on my Pixel 6 Pro as well, thank you!",pihole,1649975157.0
4387,comment,1,i4wkha2,,I wish this worked for me... ¯\\\_(ツ)\_/¯,pihole,1650071894.0
4388,comment,3,i4ctbvi,,"Try whitelisting: imasdk.googleapis.com  
This worked for me.",pihole,1649718099.0
4389,comment,2,i3syqe3,,This was iOS specific at least. Don’t have an android to investigate on,pihole,1649360950.0
4390,comment,2,i3ua4uc,,I'm having the same issue on my Galaxy Tab and S21. The app crashes seconds after starting a stream. Let me know if you find anything. I'm going to continue to search the logs.,pihole,1649380686.0
4391,comment,1,i3tx9su,,"I run MLB.tv on my Nvidia Shield and had a hell of a time keeping the app running. I was doing onesy twosy unblocks and finally gave up.

Ultimately just added the shield to my exclusion group and that worked. Sucks but has to be done every once in a while.",pihole,1649375041.0
4392,comment,1,i3umu4u,,"I have (probably) way too many lists.  I've disabled all but the following lists and it works;

[https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts](https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts)

[http://sysctl.org/cameleon/hosts](http://sysctl.org/cameleon/hosts)

[https://s3.amazonaws.com/lists.disconnect.me/simple\_tracking.txt](https://s3.amazonaws.com/lists.disconnect.me/simple_tracking.txt)

[https://s3.amazonaws.com/lists.disconnect.me/simple\_ad.txt](https://s3.amazonaws.com/lists.disconnect.me/simple_ad.txt)

[https://raw.githubusercontent.com/PolishFiltersTeam/KADhosts/master/KADhosts.txt](https://raw.githubusercontent.com/PolishFiltersTeam/KADhosts/master/KADhosts.txt)

[https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.Spam/hosts](https://raw.githubusercontent.com/FadeMind/hosts.extras/master/add.Spam/hosts)

\--I'm going through the rest of my lists, enabling 1 at a time, running pihole -g, closing the app and trying again.  Might take me the rest of the evening but I'll plug away at it until I find the first list which break it and paste that in here.  


These lists break it, when used in conjunction with the above lists;  
 (I'll try to update as I test them)  
https://adaway.org/hosts.txt",pihole,1649386319.0
4393,comment,1,i4wkbux,,Did you ever figure out what pihole was blocking to get MLB.tv to work on your wireless network? I can't figure it out for the life of me...,pihole,1650071820.0
4394,comment,1,i4cml2n,,"I’m looking into Samsung TV right now, will investigate and lyk. Hopefully it’s the same scenario",pihole,1649715283.0
4395,comment,1,i4ctfpv,,"Try whitelisting: imasdk.googleapis.com  
This worked for me on my Android phone. This might be the work around.",pihole,1649718146.0
4396,comment,1,i3ve5mb,,Heya... maybe? I just logged into the T-Mobile Tuesday app and it was the first thing I saw. I was able to redeem it right away.,pihole,1649402686.0
4397,comment,0,i3szjvi,,"i have a lot of lists, which means a lot of items in the block list... it reaches out to [datadoghq.eu](https://datadoghq.eu) for some reason. There's also [assets.adobetm.com](https://assets.adobetm.com) and loads of others.  It's not worth me trying to find them all so I'll stick with my laptop :)",pihole,1649361256.0
4398,comment,3,i4ct9h4,,"Try whitelisting: [imasdk.googleapis.com](https://imasdk.googleapis.com)  


This worked for me.",pihole,1649718071.0
4399,comment,2,i3u4kld,,"I was in the same situation. I'm able to run mlbtv with the Kodi tv add on, but not through the official app.",pihole,1649378233.0
4400,comment,1,i3uh5rc,,"On my Roku(s) and laptops, it works just fine. it's only on the mobile devices.  I'm guessing the mobiles reach out to different servers that are blocked from the Roku or other devices. If I disable Pihole, it works on the mobile.  
The following appear on a lot of tracker lists;  
 an.mlb.com  
  ans.mlb.com  
  bpe.mlb.com  
  [bpeml.mlb.com](https://bpeml.mlb.com)  
 However, adding those to the allow list didn't help.  
Looking at all of the sites blocked from my phone I could whitelist them all, but there's a lot....",pihole,1649383723.0
4401,comment,1,i3um21g,,I have the same situation with the shield. How do I add it to my exclusion list,pihole,1649385959.0
4402,comment,2,i3w6ou4,,"Yeah - I used to have more lists, but I did some basic tests and just didn't see enough of a difference to keep up with them.",pihole,1649422099.0
4403,comment,1,i3vp9v6,,"Wouldn't it be more efficient to just check the query log for what domain is getting blocked while running the app and then [-q](https://docs.pi-hole.net/core/pihole-command/#query) the blocked domains to see the blocklist they belong to, then just whitelist the domains one by one instead to see which one breaks it?",pihole,1649411469.0
4404,comment,1,i4ydhhd,,"I ended up doing what TwistedCrickets did and it worked. Got rid of all my lists except the ones they mentioned:

https://www.reddit.com/r/pihole/comments/tyielr/comment/i3umu4u/?utm\_source=reddit&utm\_medium=web2x&context=3",pihole,1650115339.0
4405,comment,2,i4cn2nf,,You're a champion. I'll keep investigating too but I'm very fuckin stupid so who knows.,pihole,1649715484.0
4406,comment,1,i4dqk3y,," `imasdk.googleapis.com`

> The IMA SDK is a Google Ads SDK that allows developers and publishers to show interactive and video ads on their websites and mobile apps. If you're advertising your site somewhere, it's likely that you're seeing traffic from ads being shown on pages using the IMA SDK.

I appreciate your research, but I think it'd still be better for me to just use the exclusion group for TVs on this rather than opening this up to my whole network.",pihole,1649732854.0
4407,comment,1,i4d9u4g,,This worked for me as well. Thank you!,pihole,1649725424.0
4408,comment,3,i3vxa9b,,https://docs.pi-hole.net/database/gravity/example/,pihole,1649417091.0
4409,comment,1,i3wjorp,,"Perhaps, but others have commented that allowing one, or two domains, worked for them. It didn't for me.",pihole,1649427664.0
4410,comment,2,i4dutah,,"It'd be interesting to know if this is the tracking call or the push for OTT content. I haven't noticed an increase in typically blocked traffic or served ads that make me pause from content, though I am seeing the occasional geo-targeted ad on OTT vs generic or placeholder content.

The most likely better route (instead of letting the TVs talk back to neilsons etc etc for all watched content, how long for, app usage, etc) would be to turn the pi-hole off, make the initial call to MLB, then turn the pi-hole back on (or the whitelist on quickly and then off).  


To each their own as I'd rather not share my actual viewing habits for the trade off of receiving targeted OTT ads.",pihole,1649735006.0
4411,comment,1,i4dz8z1,,"That's a solid point. Man, I wonder if I can make a phone widget that's a button to disable pihole for 30 seconds.",pihole,1649737510.0
4412,comment,1,i4rgi2h,,I have pi-hole plugged into HomeAssistant for this (it'd be nice for per device and or enabling a particular white list per device!),pihole,1649976744.0
4413,post,1,tyg0jh,Needing to restart DNS resolver every day - troubleshoot or start over?,"(posting this time with the debug token) Starting a couple of weeks ago, literally every morning (probably nothing to do with the time of day, but rather the accumulation of whatever is causing this), my browsing slows to a crawl. I've found that restarting the DNS resolver fixes the issue, but have no idea where/how to begin troubleshooting this. Any tips on what to look at would be appreciated -- or is it time to just start over? (Pi-hole v5.9 FTL v5.14 Web Interface v5.11 on a Raspberry Pi 3b+)

https://tricorder.pi-hole.net/F5od5cXi/",pihole,1649346611.0
4414,comment,2,i3trgo8,,"I'm no authority on the subject, but I would start over since it's a pretty quick and easy process.  Troubleshooting sound like a lot more time and effort from the viewpoint of someone that doesn't know enough to efficiently troubleshoot it.",pihole,1649372566.0
4415,comment,1,i3s9w9g,,"First I would check if really the DNS response time is the issue, with a command like `dig`.

Then you could check the status of the Pis ressources with `htop`. (Or look in the PiHole admin panel, top left corner ""load"", ""memory usage"".)",pihole,1649351505.0
4416,post,17,tyf4sx,dnsmasq LOUD warnings with Pi-hole/OpenVPN droplet on DigitalOcean,"I set up a droplet on DigitalOcean using the following marketplace app: https://marketplace.digitalocean.com/apps/openvpn-pihole

I felt really smart being able to follow the simple instructions to get Pi-hole up and running. Then I encountered two LOUD WARNINGS in the Pi-hole admin panel and didn't feel so smart any longer..:

Warning in dnsmasq core:

    LOUD WARNING: listening on [my.digitalocean.ip.address] may accept requests via interfaces other than eth0    

and

Warning in dnsmasq core:

    LOUD WARNING: use --bind-dynamic rather than --bind-interfaces to avoid DNS amplification attacks via these interface(s)

I feel inclined to do something about the above, but I have frankly no idea what I'm doing. Any ideas? Big picture-wise, what I'm trying to do is to run a VPN + Pi-hole VPN to route all my iOS devices through when I'm on the go for privacy and adblocking purposes.

Thanks!

------

Bonus question: the installation instructions say *""NOTE: Certs are only valid for 90 days, so you will need to delete your droplet and create a new one at least once every 3 months. This helps ensure you're running the latest software.""* How would I go about to do that in a convenient way that won't mean that I must re-enter all my blacklisted domains and RegEx filters?",pihole,1649344116.0
4417,comment,2,i3s30y8,,"[https://docs.pi-hole.net/ftldns/dnsmasq\_warn/](https://docs.pi-hole.net/ftldns/dnsmasq_warn/)

>When using bind-interfaces, the only access control is the addresses dnsmasq is listening on. There's nothing to avoid a query to the address of an internal interface arriving via an external interface where we don't want to accept queries, except that in the usual case the addresses of internal interfaces are RFC1918. When bind-interfaces in use, and we listen on an address that looks like it's probably globally routeable, this warning is printed.",pihole,1649348818.0
4418,comment,1,i3snkku,,[deleted],pihole,1649356731.0
4419,comment,1,i3wlp8l,,"Thanks for the answer. I did see that explanation when I was searching for my issue, but to be honest, it made me (and still makes me) none the wiser. It sure sounds like something I want to look into, but none of the instructions for this pre-configured droplet mentioned this issue nor did any of the guides I found online. What, if anything, should I reconfigure to ensure that I'm safe?",pihole,1649428449.0
4420,comment,1,i3wn1i5,,"The IP address indicated by the error message is the droplet's public IP address, presumably shared by a bunch of people, so I would assume that means trouble in that case..?",pihole,1649428967.0
4421,comment,1,i3wr1g7,,[deleted],pihole,1649430512.0
4422,comment,1,i3wtd4r,,"Thanks for the insights! I'll turn off my droplet with Pi-hole running on it until I've figured this one out then. Better safe than sorry! Good luck on becoming an expert on networking! Sure wish I was one right now, hah.",pihole,1649431399.0
4423,post,0,tyb2t3,How to access the Pi-Hole interface ?,"I would like to use the **Pi-Hole** interface on my primary **PC** but it was not working because of my **ProtonVPN**

And other PC was working very well because it does not have a **VPN**

I don't know how to access but I would really like to use for my primary **PC**

I use a satellite (known as wifi mesh) on my primary PC and a router that connects to my ISP",pihole,1649331335.0
4424,comment,2,i3r5qo3,,You need a spilt-tunnel VPN. Dont know if proton support that.,pihole,1649334284.0
4425,comment,1,i3r2798,,"I don’t think the pi-hole DNS works while using VPN.
You should be able to access the pi-hole sever using its local IP address (http://pi.hole/ won’t work). Also, request filtering won’t work in VPN.",pihole,1649332337.0
4426,comment,1,i3rdn7z,,"Proton supports split-tunnel under all OSes like Android, iOS, Windows and MacOS except GNU/Linux",pihole,1649338039.0
4427,comment,1,i3rutgu,,"Is there a reason for **you** to have VPN on **at all times** in **your** house for **your** primary PC?

You may want to watch this video by tom scott: [link](https://youtu.be/WVDQEoe6ZWY)",pihole,1649345525.0
4428,post,16,ty8drl,DNSSEC value 4 is invalid on stdout,"When starting pihole (and unbound) images on docker, I'm getting the following output on console:

```
pihole   | [2022-04-07 10:25:55.158 501M] DB warn: DNSSEC value 4 is invalid, 1649235364
pihole   | [2022-04-07 10:25:55.158 501M] DB warn: DNSSEC value 4 is invalid, 1649235364
pihole   | [2022-04-07 10:25:55.162 501M] Resizing ""FTL-domains"" from 12288 to (1024 * 24) == 24576 (/dev/shm: 729.1KB used, 67.1MB total, FTL uses 717.1KB)
pihole   | [2022-04-07 10:25:55.171 501M] DB warn: DNSSEC value 4 is invalid, 1649243229
pihole   | [2022-04-07 10:25:55.171 501M] DB warn: DNSSEC value 4 is invalid, 1649243229
pihole   | [2022-04-07 10:25:55.171 501M] DB warn: DNSSEC value 4 is invalid, 1649243229
pihole   | [2022-04-07 10:25:55.171 501M] DB warn: DNSSEC value 4 is invalid, 1649243229
pihole   | [2022-04-07 10:25:55.171 501M] DB warn: DNSSEC value 4 is invalid, 1649243230
pihole   | [2022-04-07 10:25:55.172 501M] Resizing ""FTL-queries"" from 229376 to (8192 * 56) == 458752 (/dev/shm: 741.4KB used, 67.1MB total, FTL uses 729.4KB)
```

What could be cause of the problem? The pihole works ok.",pihole,1649319868.0
4429,comment,2,i4fd2cz,,"Im getting the same error, would be interesting to know the cause.",pihole,1649770661.0
4430,post,12,ty5t4s,Pihole broke over night,"Hi, I suddenly have a problem with my pihole which worked without any trouble for the last weeks (didn‘t change or update anything last week)

Over night my internet stopped working completely. In pihole I noticed querys multiplied  at arround 3 in the morning. 
The pi itself also has no Internet connection.
I already tried rebooting and restarting the routers?
Did this happen to anyone else before?",pihole,1649308998.0
4431,comment,12,i3qaad9,,">	The pi itself also has no Internet connection.

This would indicate a problem at the OS or hardware level.",pihole,1649311143.0
4432,comment,7,i3q7jks,,Yeah. Happened twice... In 6 years. Had to completely reinstall PiHole.,pihole,1649309245.0
4433,comment,4,i3qaqyp,,"Yeah I’ve had it happen twice a few years ago. For me, the fix was using a good power supply behind an UPS and using an NVMe drive instead of an SD card (you don’t need an SD card to run modern Pi’s)",pihole,1649311471.0
4434,comment,3,i3qg9h5,,"Life would be so much easier, if „the Internet does not work“ could be differentiated into Internet and domain resolution. Members of this sub should have this feeling. „ping 8.8.8.8“ takes seconds and eliminates half of the possible causes.",pihole,1649315689.0
4435,comment,1,i3r6b8k,,"1. WiFi or ethernet to your pi?

2. Can you ssh to the pi when that happened?

3. On the pi's terminal, try to `ping 1.1.1.1`, then try `ping example.com`",pihole,1649334579.0
4436,comment,4,i3qcswk,,"Ok now I don‘t know why, but it works again: I went to the settings and restarted the DNS Server (only that and nothing else).
Shouldn‘t that also restart when the whole pi did? And as you mentioned the pi itself doesn‘t use pi hole so it‘s internet shoud have worked anyway?",pihole,1649312980.0
4437,comment,4,i3r2w2c,,Why not just backup once a few months. Its copy paste...,pihole,1649332733.0
4438,comment,2,i3qhptd,,I do wish there were high quality sd cards that could handle thousands of read writes like a nvme drive. No reason other than raspberry pi’s honestly lol,pihole,1649316866.0
4439,comment,1,i3rvck5,,I was using pihole with tailscale's magic dns and the whole thing went Kablooey.  is that a term? ;p,pihole,1649345742.0
4440,comment,3,i3r6x2c,,"I noticed I have to delay pihole startup to wait for network, else it would find the wrong network interface and fail to respond. I tried two method: adding delay startup to config file, or adding a line in crontab:

Edit the crontab by:

    crontab -e

Then add these lines at the bottom:

    @reboot sleep 15 && /usr/local/bin/pihole restartdns

The `15` after `sleep` is the delay. If you use wifi to connect increase that delay to maybe 60.",pihole,1649334887.0
4441,comment,2,i3r74wu,,Both ways are possible...,pihole,1649334998.0
4442,comment,1,i3qhvrs,,Agree. But now that you can boot a Pi from USB and there are really good USB3 NVMe M.2 enclosures there’s no reason not to have a stable system now.,pihole,1649317000.0
4443,comment,2,i3ra0aa,,Ok thanks,pihole,1649336386.0
4444,comment,3,i3qooh4,,"Funnily enough, the only Pi to give me problems (I have two running Pi-hole) was the one with the good quality SSD instead of a uSD card. It failed several times over two years, needing hardware reset, and twice needing reinstalling. (I also swapped over the SSD to the other Pi at one point, convinced that the Pi itself was faulty, and that Pi then became the dodgy one and the first Pi worked fine).

Last time it failed I just put it on a decent uSD and it's been chugging away completely happily ever since - about 18 months now. The one with the uSD from the start has worked flawlessly all the time.

Both are Pi 3B+.",pihole,1649322742.0
4445,post,10,ty3kmq,I am trying to install pihole on Ubuntu using portainer and get this error: Failure No such image: pihole/pihole:latest,"Broken systemd dns config, having trouble reverting it, Ubuntu dns is not working properly",pihole,1649301084.0
4446,comment,1,i3pwccb,,"Can you pull niginx image? If not, there might be issues with your registry or Firewall",pihole,1649302546.0
4447,comment,1,i3py6zp,,"I think I broke my dns service on port 53. It told me to uncoment a line and then set the value to no. Do you know where that file is? None of my outbound Nepal is working, even my web browser.",pihole,1649303551.0
4448,comment,1,i3q16ls,,"I tried and it says: Failure
No such image: nginx:latest",pihole,1649305243.0
4449,comment,1,i3q190f,,Also tried nginx:stable-alpine-perl,pihole,1649305280.0
4450,comment,0,i3pyqwg,,"I looked up [this](https://codepre.com/ubuntu-how-to-release-port-53-used-by-systemd-resolved.html) guide on my phone to try to undo it, but when I try to run: sudo rm /etc/resolve.conf, it says no file or directory. It has to exist though because it just let me edit it.",pihole,1649303858.0
4451,comment,1,i3q1cum,,I fixed my dns,pihole,1649305343.0
4452,post,0,txzfbw,Pi-hole is blocking my domain,"I have my pihole.domainname.com every time I try to access the pihole admin page I got this splash page o blocking message.

Website Blocked

Access to the following website has been denied:
pihole.domainname.com

This is primarily due to being flagged as:

Not found on any Blacklist

If you have an ongoing use for this website, please ask the administrator of the Pi-hole on this network to have it whitelisted.",pihole,1649288131.0
4453,comment,6,i3p5uhr,,Try adding /admin and see what you get,pihole,1649290144.0
4454,comment,1,i3rfbeq,,If you google that error message you’ll see a lot of posts explaining how to fix it.,pihole,1649338772.0
4455,comment,0,i3p5w8n,,I kinda low-key love that that super confusing and contradictory message has existed for years.,pihole,1649290166.0
4456,comment,-4,i3pmpjy,,Yeah that works but is kinda strange because at the beginning if I use my subdomain url the server just redirects me to the subdomain.domainname.com/admin and now just gets that crazy message,pihole,1649297777.0
4457,comment,2,i3qkx16,,Then take a look at your Webserver? Your error described is the default behaviour.,pihole,1649319547.0
4458,post,47,txy63b,Using pihole with split tunnel vpn with openvpn on asus router,"I vpn into my home network to access my home nas that stores all the data for my classes and other files i need. 

I configured openvpn on my asus rt-ac66u home router and configured for a split tunnel connection so i can access my network but not route all my traffic through it. the vpn works fine and i can access everything but pihole. i cant get to the admin webpage, ping it or connect in putty. i can access my router admin webpage when off the network and vpnd in and see the two piholes i have are up. 

i have the vpn configured to respond to dns and advertise to dns clients

i have been doing some googling into it but everything ive seen has different answers and before i keep messing and break something i came here. i looked at the pihole documentation for vpn but it looks like its more about running a vpn along with pihole",pihole,1649284430.0
4459,comment,3,i3qu55l,,"Are you trying to access the machines running pihole by local IP or by local domain? If by local domain, are any other local domains accessible when the pihole machines are not?",pihole,1649327115.0
4460,comment,3,i3qykhy,,"If you haven't already, make sure that the address you receive when connecting through the VPN is on the same subnet as the pihole.",pihole,1649330129.0
4461,comment,3,i3rnmig,,"Are you splitting the tunnel from the client end? Or on the router? I ask because WireGuard can split the tunnel from the client end. It’s done on the Allowed IPs setting. You can select specific IP(s) or subnets that would make you phone for example route back to your network. Or you can create a full tunnel and it sends all the data through your VPN. If you’re splitting the tunnel at the router level, I’m not quite sure what’s going on. But maybe is a matter of fact that you might need to either add the subnet the Pi-hole is at or their specific IPs.",pihole,1649342425.0
4462,comment,1,i3rmqjx,,And don't forget to check the Pihole firewall to ensure you've not locked it down too much.,pihole,1649342041.0
4463,comment,2,i3rzi49,,"im pretty sure im accessing by local ip, im not using anything to manage a domain in my lan. when i connect via vpn to my home network i can access my other pis running different services. i can ping other hosts on the network but cant ping or connect to the two pis running pihole",pihole,1649347391.0
4464,comment,2,i3s07ax,,"it looks like they are on different subnets, my home network runs on a 192.168.50.x subnet and the vpn is on a 10.8.x.x subnet so i guess that is my problem. thanks for suggesting that.",pihole,1649347699.0
4465,comment,1,i3s0ekb,,"being that the router is running the vpn server im gonna assume its splitting the tunnel there. i see what your saying, i think its because the vpn is assigning addresses on a different subnet.",pihole,1649347783.0
4466,comment,1,i3s2lrc,,"Pihole itself has functionality for managing local domains. Moreover, ""pi.hole"" is a local domain address.

If your VPN is set up properly, access by IP should never fail, as that is the direct identifier of the machine you are trying to connect to. Accessing the Pihole web interface or similar services may fail due to improper port configuration, but a ping should always succeed (excluding firewall rules). A secondary reason for which IP requests should never fail on a setup like this is that Pihole only handles the DNS requests issued from your network, unless you configure Pihole to also provide a DHCP server, which ties into IP.

Just for clarification, what do you type in the browser's address bar to connect to your router's web interface and what do you type to try to connect to one of your Pihole's web interface?

Are your two Pihole machines firewalled in any way?",pihole,1649348657.0
4467,comment,1,i3s3ha4,,No problem! Hope you get it figured out.,pihole,1649348990.0
4468,comment,1,i3s35il,,This is a good guide I followed I while back. Hope it helps. [https://www.wundertech.net/setup-wireguard-on-a-raspberry-pi-vpn-setup-tutorial](https://www.wundertech.net/setup-wireguard-on-a-raspberry-pi-vpn-setup-tutorial),pihole,1649348866.0
4469,comment,2,i3s8p82,,"very good to know thank you for the information.

i have tried accessing both pis via ip address or the pi.hole methods and both do not work when connected to the vpn

i have not configured any firewall options in pihole, i have not changed my routers firewall for them either",pihole,1649351018.0
4470,comment,1,i3sb6j7,,"I am not sure how Pihole works in case you have 2 running on the same subnet with regards to the pi.hole domain, but it might result in pi.hole resolving incorrectly or not resolving at all. Best to stick to IP if possible or use a different local domain for each of the two machines. 

With your setup, each device on your local network will probably have 2 IPs, but at the very least you need the 2 Pihole machines to have each this pair of IPs. One IP of the pair will be 192.168.x.x and the other one will be 10.8.x.x. The 192.168.x.x IP is your ""real"" IP on your local subnet while connected directly to your router. All IPs starting with 192.168 will not be accessible when you're connecting via VPN, only when you're directly connected to your home router. The 10.8.x.x subnet is your VPN subnet and to connect to your Pihole you should input something like ""http://10.8.x.x:port"" where you replace the x's and the ""port"" with the real end of your machine's VPN IP and the port the Pihole web interface is listening on respectively.

Can you reach any IP on the 10.8.x.x subnet other than 10.8.x.1 (which should be your router)?",pihole,1649352014.0
4471,comment,2,i3scxp8,,"i dont have both of them connected to the network. one was having issues so i setup another one as a backup and have it set as the dns server for my lan. the other is just alive but not serving anything.

i was just looking at the network overview of pi hole and can see the ip for my machine vpnd in is showing but is not using pihole 

i see what your saying about the subnets not being the same so they cant work how i want. i will change them so hopefully it will",pihole,1649352691.0
4472,comment,1,i3sf251,,"As far as I am aware, there is no way of merging a local subnet with a VPN subnet, if this what you meant by changing the subnets.

Going off of everything you've said so far, I would guess that you need to properly configure the router/VPN/Pihole machine to expose it on the VPN subnet.

Hope you get it working!",pihole,1649353530.0
4473,post,2,txwc8d,Adding VPN to Pihole but only for specific clients,"I was curious if it was possible to add my VPN to the Pihole. But because my VPN is blocked by Netflix and Disney+ I would like to know if I could apply it only for specific clients. 
So that I can watch Netflix as usual on my smart tv",pihole,1649279332.0
4474,comment,2,i3ojs6q,,"Please be more specific. Seems to be more related to VPN than Pihole.

What is your VPN setup?",pihole,1649280579.0
4475,comment,2,i3osbo4,,You could run two Piholes and point devices to either of them as you need.,pihole,1649284054.0
4476,comment,1,i3qlgz0,,I use Mullvad VPN and would connect it with OpenVPN to my Pihole I guess,pihole,1649320020.0
4477,comment,2,i3qledq,,Yeah I guess.,pihole,1649319961.0
4478,comment,1,i3qlosx,,What for? To access your home from the outside (to use resources like files or filtering DNS service) or to route your home network through VPN provider (to obfuscate your origin). Or sth else?,pihole,1649320206.0
4479,post,33,txul0u,pihole docker container on synology keeps restarting,"Hi All, the other day I came home and had no internet. When troubleshooting I noticed that the pihole docker container kept restarting and the web interface was not reachable. Actually, I think that the pihole crashes and keeps restarting when trying to access the web interface.

Anyway, does someone know what it could be? I think the issue happened with the last version of pihole, but I am not entirely sure as I have Watchtower automatically updating all my docker containers.

Thank you in advance for any help you could give me!",pihole,1649274667.0
4480,comment,4,i3odx5e,,Try this: https://reddit.com/r/pihole/comments/tu54a8/latest_docker_image_broke_pihole/,pihole,1649278335.0
4481,comment,2,i3q1vmb,,I had the same problem a few days ago.  I tried updating and all of the things that were mentioned in the other thread and none of them seemed to work for me.  I just rolled back to the previous version and it's working fine again.  Hoping whatever issue I'm having is resolved in the next one.,pihole,1649305647.0
4482,comment,1,i3p0xc6,,there's a variable as the user = pihole.  change it to user=root and it solved the issue for me.,pihole,1649287878.0
4483,comment,1,i40wmzk,,"Hello folks, thank you for your help so far.

I have downloaded a version that seems to work but I am not able to access it. I think I messed up with the settings. Please have a  look to this screenshot: [https://imgur.com/a/gJNFxe4](https://imgur.com/a/gJNFxe4)

What am I doing wrong? Thanks!",pihole,1649505873.0
4484,comment,1,i3w73oi,,"Not for me. This fixed the issue last time, now the config is correct, but it is still restarting…",pihole,1649422295.0
4485,post,0,txso7t,Internet down after pihole goes offline.,My pi-hole lost power and caused my whole internet to stop working. I tried rebooting the pi and my router nothing worked. I couldn't ssh into the pi and I couldn't get back into my router settings to change the dns because the internet was down. In the future is there a way to get internet back without having to factory reset my router? Also is it possible to have it so when the pi is down it just routes traffic through the normal dns?,pihole,1649269434.0
4486,comment,18,i3nqita,,"When Pi-hole is your only DNS server (as it should be), and it goes offline, you will lose DNS resolution.

You should address the problem of (1) the power loss, and (2) why the Pi did not restart normally after the power loss.

For the first, did the device get unplugged or did the local circuit powering that device lose power?  Or did you entire location lose power (router, Pi, all together)?  If it's a circuit loss or the Pi was unplugged, address that problem.

For the second, look in /var/log/syslog for any errors when the Pi was rebooted after the power loss.",pihole,1649269719.0
4487,comment,3,i3nxjuo,,"My set up. 2 DNS, 1 raspberry pi with pihole and a pihole docker in Unraid. One fails or goes down my internet still works.",pihole,1649272323.0
4488,comment,12,i3nrocl,,"When this happens to me, I set my Computers DNS IP from automatic to [8.8.8.8](https://8.8.8.8). just so I have access while I am fixing my setup. You should not have to factory reset anything when it comes to accessing your router. Unless you cant access it via an IP address in the browser or some other tool you are using.(SSH)",pihole,1649270143.0
4489,comment,2,i3nslbs,,I just grabbed two 3A’s I had in a drawer and setup two Pi’s.   So if one crashes the system will secondary over to the other PiHole.,pihole,1649270486.0
4490,comment,0,i3nvpys,,Run a 2nd pihole!,pihole,1649271643.0
4491,comment,-4,i3nqcl0,,"Set router DNS 1 to raspberry pi ip address, and DNS 2 to whatever dns you want to use like Google or cloudflare dns",pihole,1649269656.0
4492,comment,1,i3nvh3n,,"I have 7 different cities where my family and extended family stays. I have put them in a wan like network using a raspberry at each location. 2 of them also are run pihole. So every router has these two ips. If one goes down the other is always there.
And the two piholes are synced using gravity sync.",pihole,1649271551.0
4493,comment,1,i3nx19p,,[deleted],pihole,1649272133.0
4494,comment,1,i3o1dvf,,"Seems like many people have issues like this when power goes out. For router, pi's, switches, AP's and other small devices, very small UPS system would probably keep power to the devices for a long time.",pihole,1649273728.0
4495,comment,1,i3o23r0,,"This is why one should have two internal DNS servers when running internal DNS (be it pihole, adguard, windows dns server, linux dns servers, whatever).

I run two and keep settings in sync.

\--edit-- 

to be clear i am saying have two pihioles, ideally each on different hardware.",pihole,1649274000.0
4496,comment,1,i3o3ivl,,"What do you mean whole internet stopped working - it should have been just name resolution that stopped working - traffic should have been flowing (for example pinging a well known IP like [8.8.8.8](https://8.8.8.8)).

If you are saying you couldn't shh into the router or pi using IP addressand could ping outside IP then your issue wasn't a DNS address issue  - are you using pihole to issue DHCP leases too?

If you are my recommendation is NEVER use DHCP reservations to assign IP addresses to critical infrastructure things (like a pihole, docker server host, APs if you have multiple etc) - manually address them on the device.

Else a DHCP server failure can totally eff you up.... been there myself....",pihole,1649274515.0
4497,comment,1,i3o69qo,,"Does your Pi-hole act as your DHCP server by chance? It sounds like it might be since you weren’t able to connect to your network. If there’s ever a next time you can try manually setting your ip on your computer. As far as the Pihole boot goes, you can go into raspi-config and set the pi to wait for network at boot. This has helped me with issues where Pi-hole wasn’t binding correctly to network interfaces since the Pi booted so fast. The last issue I can think of probably is not what was causing your problem but could possibly have contributed or be an issue in the future. DNS resolution can fail if the system clock is thrown off by something(e.g., a power outage) and you have dnssec enabled. This is because dnssec requires an accurate system time in order to validate.",pihole,1649275501.0
4498,comment,1,i3o8b3e,,"Many have mentioned a 2nd pi-hole and I agree that's a great solution.  

My setup is pi-hole 1 (raspberry pi), servers (2nd pi-hole via VM) and networking equipment are on a battery backup.  

Originally I did not have the raspberry pi on battery which caused some issues when the power goes out.  Now it's all hooked together and I can turn off the servers to save battery runtime without causing issues since the primary pi-hole is on battery.",pihole,1649276260.0
4499,comment,1,i3o8jg1,,"This is why they recommend to have at least to Pi-holes on your network. If one goes down, the other one is running as back up.",pihole,1649276345.0
4500,comment,1,i3oa3ug,,I use Google WiFI so if my Pi-hole goes down I just login to the Google WiFi app and change the DNS. Then I can troubleshoot the Pi-hole issue and the internet will be functional albeit with ads. I have considered the solutions for redundancy and high availability but honestly it doesn't happen very often.,pihole,1649276919.0
4501,comment,1,i3ocx2l,,I always used a physical Pi and also one running in a VM for redundancy.,pihole,1649277961.0
4502,comment,1,i3omrds,,Having 2 Pihole is a good solution but if they are powered from the same power line is useless having 2. I have a OPNSense box for router. If the power is loss I have not internet after the router is back and running. I need reboot the Pihole again for have internet back again,pihole,1649281759.0
4503,comment,1,i3ovnoe,,Working as intended.,pihole,1649285498.0
4504,comment,9,i3nv4w9,,"A good way to combat this issue is with redundant piholes too. 

On that note, do you know if there's any plans to integrate something like gravity sync directly into pihole? Seems logical..",pihole,1649271426.0
4505,comment,2,i3nxhh9,,[deleted],pihole,1649272299.0
4506,comment,7,i3nxnym,,">	if one crashes the system will secondary over to the other PiHole.

That's typically not how it works.  With parallel Pi-holes, clients are free to use either at any time, with no regard to the order they are listed. It's only when one fails that clients are forced to use the remaining Pi-hole exclusively.",pihole,1649272364.0
4507,comment,2,i3nwrbi,,">	or setup secondary dns as your router or 1.1.1.1

This will allow clients to bypass Pi-hole at any time. 

https://discourse.pi-hole.net/t/why-should-pi-hole-be-my-only-dns-server/3376",pihole,1649272029.0
4508,comment,9,i3nt5te,,"Doing this will mean you lose adblocking functionality on some queries. Most routers use DNS 2 to load balance and distribute queries but will send everything to one of the two DNS servers if the other is down. To get redundancy and adblocking, you need to run two pihole instances and set one as DNS 1 the other as DNS 2.",pihole,1649270699.0
4509,comment,0,i3nt5n5,,[deleted],pihole,1649270697.0
4510,comment,1,i3ntq02,,Might have issues with this setup: [https://discourse.pi-hole.net/t/secondary-dns-server-for-dhcp/1874](https://discourse.pi-hole.net/t/secondary-dns-server-for-dhcp/1874) but at least the internet won't be down (so to speak).,pihole,1649270904.0
4511,comment,1,i3ntuwz,,"Depending on the router, this may cycle through them instead of using the secondary as 'backup'

Test it! :)",pihole,1649270955.0
4512,comment,1,i3nwvle,,https://discourse.pi-hole.net/t/why-should-pi-hole-be-my-only-dns-server/3376,pihole,1649272074.0
4513,comment,1,i3owdgg,,You do this and people are on here complaining that Pi-Hole is shit and doesn't work.,pihole,1649285820.0
4514,comment,1,i3o0qro,,Thanks a bunch! I will try this next time.,pihole,1649273490.0
4515,comment,3,i3nxb6x,,I think I saw someone wrote a python script to do that somewhere. Didn't bother grabbing it at that time. I change settings on pihole so little that when I do I just manually copy them between my two,pihole,1649272235.0
4516,comment,3,i3nvmc5,,">do you know if there's any plans to integrate something like gravity sync directly into pihole?

There are no current plans to do so.",pihole,1649271606.0
4517,comment,3,i3oalta,,In the settings theres a wait for internet network before boot. Do `sudo raspi-config` and under System Options is Network at Boot,pihole,1649277103.0
4518,comment,1,i3oisfz,,A light bulb just turned on over my head! I've never had to use the Pihole setting to wait for the network to start because my Piholes (two) are plugged into a different switch than the router.,pihole,1649280190.0
4519,comment,1,i3o30vr,,"Correct me if I'm wrong here; this doesn't happen instantly and depending on many factors it can take several minutes. Only a [high availability solution](https://davidshomelab.com/pi-hole-failover-with-keepalived/) (which there is one) would make so that there would not be any noticeable downtime. Using Gravity Sync, which I use, allows easier maintenance of the block lists and client groups.",pihole,1649274331.0
4520,comment,0,i3ny97g,,"I give them unique IPs and utilize DNS to point to the primary device. 

My primary will sit at 80-90K blocks and secondary sits unused unless I remove the primary or it crashes (which did happen on one build for some reason).",pihole,1649272582.0
4521,comment,2,i3nwz5y,,you're correct - edited to fix. thanks.,pihole,1649272111.0
4522,comment,-1,i3ntj8g,,Idk I think only if you track IPs using dns 2 instead of DNS 1,pihole,1649270836.0
4523,comment,4,i3nx5v7,,">	always have a secondary setup

Doing this allows clients to bypass DNS at any time, unless the second DNS is also a Pi-hole.",pihole,1649272180.0
4524,comment,0,i3nz6ly,,"No, doing this will cause adblocking to be hit or miss as devices can choose to use the secondary DNS first.  It's not only if the primary is unreachable.",pihole,1649272926.0
4525,comment,1,i3p26ok,,That's why I use both dns as pihole ip and I fuck with internet when nobody is awake,pihole,1649288458.0
4526,comment,1,i3o0zdd,,[deleted],pihole,1649273582.0
4527,comment,3,i3nxku4,,"Yeah, the project that aims to do this is called ""gravity sync""",pihole,1649272333.0
4528,comment,2,i3oav1g,,">	this doesn’t happen instantly and depending on many factors it can take several minutes.

In my experience it is immediate. One goes down, the other picks up the load with no delay.",pihole,1649277197.0
4529,comment,1,i3o7lf8,,So only one pihole is used at a time?,pihole,1649275992.0
4530,comment,1,i3o0agt,,"why risk getting ads, set up another pihole in a vm/container/extra pi to have as a secondary dns",pihole,1649273324.0
4531,comment,1,i3o14dx,,"Nope, I am using a pi zero",pihole,1649273632.0
4532,comment,1,i3ogleg,,"I must be doing something wrong then. Whenever I take one offline, typically the client I'm on will not be able to resolve any addresses at least until that pi comes back up.  Would like to hear from others as to what their experiences are.

Any ideas as to what I should look at to pinpoint why our experiences are different?",pihole,1649279339.0
4533,comment,2,i3ocxlj,,"Maybe. Clients are free to use either at any time. Some clients tend to stick pretty firmly to the first one listed, but others will move between them more frequently.",pihole,1649277967.0
4534,comment,0,i3o7yvz,,"Yeah, its just like primary/secondary DNS in your router.

I point DNS1 to PIHOLE1 and then DNS2 to PIHOLE2 and that's that.  If the primary Phiole stops responding (dietpi crapped out a few times a long time ago) the secondary DNS is in play just like any run of the mill provider.  Like Cloudflare says use [1.1.1.1](https://1.1.1.1) and [1.0.0.1](https://1.0.0.1), and and all that jazz.",pihole,1649276133.0
4535,comment,0,i3oqlwe,,I would but I only have a pi zero,pihole,1649283331.0
4536,comment,1,i3ot8jz,,What router are you using? Mine wouldn't connect to the internet without dns working and pi-hole also doesn't connect to the internet since the router is not offering. And when pi-hole doesn't connect to the internet it doesn't server dns. Quite the catch 22.,pihole,1649284447.0
4537,comment,1,i3ppkix,,"The clients have to have both DNS servers identified to them. If the DHCP isn't passing both IP'S to clients, they won't know to use both. 

As a test, shutdown the first Pi and then see what DNS server the client is using.",pihole,1649299124.0
4538,comment,1,i3p81v1,,">>So only one pihole is used at a time?

>Yeah

Possibly.

>its just like primary/secondary DNS in your router.

Again, possibly. There's no standard of behaviour here. Don't think of them as primary and secondary. Think of it as one, and another. Realistically any can be used at any time, and there may be wildly differing metrics on how it arrives at that decision.

Typical dnsmasq-ish behaviour is to periodically query all endpoints, and then stick with the fastest responder until the next bulk query. Typically every 10 minutes or so, but again there's no standards of behaviour here.",pihole,1649291137.0
4539,comment,-1,i3o9cxt,,So could I just set my secondary to like [8.8.8.8](https://8.8.8.8) or something and it will use that as a backup. (I don't mind ads getting through while pihole is down) I thought the router use primary and secondary dns at the same time.,pihole,1649276647.0
4540,comment,1,i3ox5da,,"no old pc you can run proxmox on? i dont even run pihole on a pi anymore, just tiny VMs",pihole,1649286168.0
4541,comment,1,i3p03u2,,I think it's like a G3100,pihole,1649287502.0
4542,comment,1,i3qtc4b,,The clients are getting both DNS servers. I will test to see how long it takes the client to switch over if it ever does. The DNS servers reside in two different subnets and I can resolve using either one from either subnet,pihole,1649326506.0
4543,comment,1,i3rpiy2,,I tested and the Windows 10 client that I am on never switches over to the secondary DNS server after waiting eight minutes. I also tested on a Linux client with the same results. I am also running Unbound if that makes any difference. On the Windows client I also flush DNS still with the same results.,pihole,1649343240.0
4544,comment,5,i3ocpdz,,">	could I just set my secondary to like 8.8.8.8 or something and it will use that as a backup.

It won't be a backup. Given multiple DNS servers, clients are free to use any of them at any time. 

Some traffic can bypass Pi-hole with that setup.",pihole,1649277880.0
4545,comment,1,i3pak7q,,No I'm gonna get a couple more PIs,pihole,1649292268.0
4546,post,10,txq491,Why do I lose all of my historical query data every time I update,"I am running Pihole on a Docker container in a Portainer environment. Every time I run pihole -up, I lose all of my historical query data and my graphs start back at blank like it were a new install. I do not love my blacklist or whitelist or any other settings, just the query data. This did not happen when I was running on a Raspberry Pi. Any ideas?",pihole,1649262557.0
4547,comment,8,i3n7lfn,,">	Every time I run pihole -up, I lose all of my historical query data and my graphs start back at blank like it were a new install.

Why are you running this command for a Docker container?  That is not how you update a Docker install.

Also, are your Pi-hole directories set to be persistent?

https://github.com/pi-hole/docker-pi-hole#quick-start",pihole,1649262684.0
4548,comment,5,i3np33p,,You need to keep persistent data outside of the container.,pihole,1649269185.0
4549,comment,4,i3n7ylc,,I just installed it straight from Portainer. This is probably it. Thank you!,pihole,1649262822.0
4550,comment,1,i3nufg6,,"But a pihole -up isn't rebooting the container, right? Or am I mistaken?",pihole,1649271165.0
4551,comment,7,i3n8a5n,,"Why are you running pihole -up in a Docker container?

    Do not attempt to upgrade (pihole -up) or reconfigure (pihole -r). New images will be released for upgrades, upgrading by replacing your old container with a fresh upgraded image is the 'docker way'.",pihole,1649262942.0
4552,comment,1,i3ogjgc,,What is the uptime before and after you update? Maybe it's different behavior in the container.,pihole,1649279317.0
4553,comment,9,i3nep56,,I am new to Docker. Still learning.,pihole,1649265336.0
4554,comment,1,i3orl8h,,"I checked that, the uptime after update was 72 days",pihole,1649283741.0
4555,post,12,txpunq,"Does the ""flush logs"" option in settings clear 24 hours of queries from the the pihole/var log? Or the pihole ftl log?","Just wondering where the 24 hour dashboard comes from. Either var log or ftl.

Edit: i know flush logs broke and will be fixed with the next release. My question is about the normal behavior :-)",pihole,1649261775.0
4556,comment,3,i3o2qnn,,[deleted],pihole,1649274228.0
4557,comment,1,i3nyivp,,It never clicked in my brain that the clear logs button is called “flush logs”.  Ew.,pihole,1649272683.0
4558,comment,2,i3o3765,,Where is the daily log stored? I thought it stores the last 24 hours of logs from FTL.,pihole,1649274395.0
4559,comment,2,i3o6u4m,,"usually flushing a file means write to disk what was buffered in memory.  

Does that really clear the logs on pihole?",pihole,1649275709.0
4560,comment,3,i3o3s5r,,[deleted],pihole,1649274607.0
4561,comment,2,i3o50uz,,"I disabled query logging in settings, which i thought disables the var log. Or does that only disable tailing?",pihole,1649275053.0
4562,comment,1,i3r224r,,Fyi see reply below from the pihole dev. The dashboard is populated by ftl  not var log.,pihole,1649332255.0
4563,comment,3,i3o8aie,,[deleted],pihole,1649276254.0
4564,comment,1,i3o953w,,"Right, i think i saw somewhere that disabling query logging doesn't completely disable the var log. It just disables pihole tailing.",pihole,1649276566.0
4565,comment,2,i3ob30q,,">	i think i saw somewhere that disabling query logging doesn’t completely disable the var log

It does disable that log. This is the log the serves the tail information, so when the log is not being populated there is nothing to tail.",pihole,1649277279.0
4566,comment,2,i3oebis,,So what populates the web gui dashboard with the prior 24 hours of data? FTL?,pihole,1649278485.0
4567,comment,2,i3ppbgv,,"The query log and dashboard in the web GUI are populated from the query database (/etc/pihole/pihole-FTL.db). 

On Pi-hole restart, the most recent 24 hours (the default max value) from the database are read to populate the screen. As new queries accumulate, they are written to the query database.",pihole,1649299000.0
4568,comment,1,i3r1wvz,,Thanks!,pihole,1649332173.0
4569,comment,1,i3stf6a,,What does the var log contain that the FTL database doesn't? Sorry if this is obvious.,pihole,1649358926.0
4570,comment,2,i3sxhyx,,"The dnsmasq log is a record of queries, replies and forwards in text form.

The query log includes more details of the queries and is stored as an SQL database.

https://docs.pi-hole.net/database/ftl/#query-table",pihole,1649360475.0
4571,comment,1,i3ttq7f,,"So the FTL log contains more information than the var log? I'm just wondering since I saw this from a while ago in regards to 3rd parties asking to see people's var logs.


https://pi-hole.net/blog/2017/10/04/a-security-note-about-your-pi-hole-logs/",pihole,1649373531.0
4572,comment,2,i3u5qfr,,"Let's clarify the terminology. Queries are stored in two places, depending on your settings. 

1.	 The web admin query log is stored in the query database at /etc/pihole/pihole-FTL.db. Data is stored for 365 days by default. This is the file that provides the long term query history as well.
2.	 The dnsmasq log at /var/log/pihole.log.  This file is rotated nightly and 5 previous days are retained. This is the file that shows the log tail (pihole -t). 

The thread you referenced is 4.5 years old. I'm not aware that anybody is requesting Pi-hole logs these days. 

Note that our team may request a debug log. This is quite different. You upload your log, post a token URL and a few members of our team (and nobody else) have access to your log for 48 hours.",pihole,1649378755.0
4573,comment,1,i3uiub6,,Ah ok thx. So then what is pihole.log? It's in var/log i think.,pihole,1649384483.0
4574,comment,1,i4juca2,,Do you know when pihole 9.10 is forecasted to be released? I realized that I also cannot flush the Network Table. I assume it pulls from the same place as the dashboard 24 hour GUI?,pihole,1649848336.0
4575,comment,2,i3ukaem,,The dnsmasq log is at /var/log/pihole.log.,pihole,1649385141.0
4576,comment,2,i4jushl,,">	Do you know when pihole 9.10 is forecasted to be released?

No. We don't have firm release dates, as the developers are volunteers who do this in addition to their real jobs.",pihole,1649848637.0
4577,comment,2,i3wk70p,,Got it. Sorry i definitely mixed up a few terms. Thanks for your help man.,pihole,1649427860.0
4578,comment,1,i4jvpvz,,Ok. Is the network overview not clearing due to the same issue as the 24 hour dashboard not clearing?,pihole,1649849220.0
4579,post,61,txd73x,PiHole appearing among top block clients for mostly Microsoft related domains.,"Router: Netgear R7000, FreshTomato, DHCP Server (DNSMasq), Not upstream DNS

DNSONE: Raspberry Pi 3B+, Raspbian OS v10 (buster), Pi-hole v5.9.1, FTL v5.14, Unbound v1.9 (upstream)

DNSTWO: Raspberry Pi 3B+, Raspbian OS v10 (buster), Pi-hole v5.9.1, FTL v5.14, Unbound v1.9 (upstream)

&#x200B;

Problem:

DNSTWO is appearing on its own dashboard as Top Blocked Client. Top blocked domain (if clicked) is being attributed to DNSTWO. Top blocked domain is Microsoft's '[Live.com](https://Live.com)' I think it is more likely that the requests for [live.com](https://live.com) (and \*.microsoft.com) are coming from one of four other windows clients. A Windows 7 laptop, a Windows 11 VM and two work related Windows 10 laptops that connect to my workplace via VPN.

As best as I can tell, both DNSONE & DNSTWO are setup the same. The files /etc/pihole/setupVARs.conf and /etc/pihole/pihole-FTL.conf are identical between both DNSONE and DNSTWO. The DNS Settings in the WEBUI is identical on both systems. Both point to Unbound service running locally as upstream server with conditional forwarding disabled. The other settings are default. Local DNS list, Ad list, black list & white lists were copied and pasted from DNSONE to DNSTWO

DNSONE is not reporting itself as a client at all. Either for permitted or blocked domains. Or for either permitted or blocked clients. Only DNSTWO exhibits this behavior. Additional confusion surrounds the fact that DNSTWO is the secondary DNS server, so clients should be checking DNSONE first. They should be getting [0.0.0.0](https://0.0.0.0) for blocked domains and should not be checking the secondary DNS server, but it does and when doing so DNSTWO is logging it in the dashboard as the query coming from DNSTWO.

Help? What's going on here? Why is only DNSTWO behaving this way?

PS - I have logging currently disabled and disabled/deleted/enabled pihole-FTL's db to completely clear the logs. Behavior can still be observed in the dashboard although not being logged.",pihole,1649216971.0
4580,comment,1,i3llgtv,,Can I ask which device is set as your DHCP server?,pihole,1649231329.0
4581,comment,1,i3lxayx,,What happens when you disable the DNSONE device?,pihole,1649241209.0
4582,comment,1,i3mhvj2,,Do you have DNSONE listed as a dns server for DNSTWO? Or do you potentially have the WAN DNS set as the the Piholes?,pihole,1649252513.0
4583,comment,1,i3n2yfb,,"Here's something interesting

`resolvconf -l` returns this

DNSONE (eth0 & wlan0 both enabled and connected)

    pi@dnsone:~ # resolvconf -l
    ; resolv.conf from lo.unbound
    nameserver 127.0.0.1
    
    ; resolv.conf from eth0.dhcp
    ; Generated by dhcpcd from eth0.dhcp
    nameserver 10.0.1.1                    <-- Router nameserver 10.0.1.1
    
    ; resolv.conf from wlan0.dhcp
    ; Generated by dhcpcd from wlan0.dhcp
    domain example.net 
    search example.net 
    nameserver 10.0.1.2                    <--- dnsone 
    nameserver 10.0.1.3                    <--- dnstwo

DNSTWO (only wlan0 enabled and connected)

    pi@dnstwo:~ # resolvconf -l
    ; resolv.conf from lo.unbound
    nameserver 127.0.0.1
    
    ; resolv.conf from wlan0.dhcp
    ; Generated by dhcpcd from wlan0.dhcp
    domain example.net 
    search example.net 
    nameserver 10.0.1.2                    <--- dnsone 
    nameserver 10.0.1.3                    <--- dnstwo

IP Addresses are assigned by the router/DHCP via MAC address reservation.

DNSONE is behaving like I expect it to. but it looks like DNSONE may be forwarding queries to the router on eth0 in some situation. If it can't resolve an address it should (and is) forwarding to Unbound and correctly resolving addresses. So I don't know when a query would get to the router.  DNSONE doesn't show up in the Routers logs or in its own logs or in the logs of DNSTWO either.

So maybe this is unhelpful.",pihole,1649260893.0
4584,comment,1,i3ovi2a,,"More info: There is a note on the [PiHole Dashboard](https://ibb.co/fSjz6TX) that explicitly says, *Queries for pi.hole and the hostname are never logged.*

So PiHole is clearly doing something its not supposed to do. The image in the link is showing queries from at least 4 different network clients but shows them as coming from the PiHole device and not those network clients

Something else is been lingering in my mind about the difference in how I built DNSONE -v- how I built DNSTWO. In both cases, I used the Raspberry Pi Imager to burn an image of Raspbian OS to the SDCard. However with DNSTWO the latest version of Raspberry Pi Imager  has options for you to set, locale, pi account password, the wireless LAN to connect to and its password, SSH Authentication method,...and Hostname. I set all of these on DNSTWO and didn't use it for DNSONE. I wonder if this triggered something somewhere that's causing this.",pihole,1649285430.0
4585,comment,1,i44k2x0,,"I think I resolved this. The solution involves resolvconf, somehow. I am still seeing some queries from localhost but just the ones you would expect; when you perform a gravity db update or apt-get update, etc. Those queries actually do originate from the pihole dns server.

but I am no longer seeing queries from the hostname of the pihole dns server, DNSTWO for queries that I am sure originate from other network clients. An additional thing I noticed was that the other network clients were actually sending the queries but then pihole was repeating the queries like an echo. But not all queries it was very random and sometimes there was two or more echos

Steps to resolve:

\- Imaged SDCard with RaspiOS Desktop (4.4.2022) and booted Raspberry Pi (didn't use PiImager)

\- Hardened RaspiOS (setup firewall, disabled ipv6, installed smb, ssh pub keys, userids, etc)

\- Installed Unbound (stopped and disabled resolvconf \[I'm 100% sure I did this before\])

\- Ran resolvconf and only got the DNS settings handed out by DHCP server (router). It reflected what was in /etc/resolv.conf and did not have interface specific DNS servers like my other post in this thread where each interface had different dns server settings. (weird)

\- Double and tripled checked everything up to this point and did so again after reboots.

\- Installed pi-hole choosing a public DNS server as upstream (in my case I chose to use [4.2.2.4](https://4.2.2.4)). After completion I switched the upstream server to [127.0.0.1#5335](https://127.0.0.1#5335) (it wasn't clear if I could put #5335 in the pihole setup screens so I chose to do so after setup).

\- Ran resolvconf again and it returned nothing. Absolutily nothing. Just returned me to a command prompt. When I checked /etc/resolv.conf, it was now pointing to [8.8.8.8](https://8.8.8.8). This persisted after a reboot. I changed it to [127.0.0.1](https://127.0.0.1) and rebooted and this too persisted. I found this odd because in my router I have traffic blocked to [8.8.8.8](https://8.8.8.8) and abouut 2 dozen other DNS servers. So with [8.8.8.8](https://8.8.8.8), apt-get update, pihole -g, and reverse lookups were failing. Changing it to [127.0.0.1](https://127.0.0.1) now that PiHole was up and running fixed everything.

\- At this point everything is functioning as I expect. Only DNS queries that should come from the PiHole DNS server are showing up. Reverse lookups of network clients, pihole gravity updates, apt-get updates, etc. There are no query echos.

Anyway, I am pretty sure that i did something different with resolvconf. I know I disabled it before though and here is the kicker... its still enabled and showing interface specific DNS servers on DNSONE, but DNSONE is working normal also with no query echoes.

{shruggs}

EDIT: Now, even *localhost* is gone from the logs as all clients and ad lists have been updated and no new queries from the Pihole DNS server are being initiated. So localhost was pushed out of the logs.",pihole,1649565904.0
4586,comment,3,i3lmy1j,,"The router, which is pointing to the two PiHole devices as its DNS servers. These are the DNS servers that are handed out to the network clients also. And again, the Pihole devices are each pointing to unbound running locally for upstream resolution.",pihole,1649232579.0
4587,comment,1,i3mcw9f,,"From the network clients perspective, everything is normal when DNSONE is disabled. All queries get resolved as expected. So that's normal. I just can't see who is sending queries from DNSTWO's dashboard because a subset of queries are showing as coming from DNSTWO.",pihole,1649250288.0
4588,comment,1,i3n0n54,,"No, to the former. Yes, to the latter.

The two pihole's are only using their local instances of Unbound as their DNS servers. (127.0.0.1#5335)

The WAN DNS of the router is pointing to the two LAN side DNS servers.",pihole,1649260020.0
4589,comment,1,i3n3g0w,,"I believe that setting the WAN DNS to the piholes may be causing your issue. If you set the DHCP DNS to the piholes but leave WAN DNS to something else (quad9, cloudflare, etc) it may fix the issue. I'm not sure about your router's capabilities but NAT firewall rules could force your clients to redirect DNS if you're concerned about them bypassing the piholes. Test changing the WAN DNS to see if it works.",pihole,1649261081.0
4590,comment,1,i3n50kv,,"I will try this in a minute but why would it show up on one Pihole and not the other? Especially on the Pihole that's designated 'secondary' dns.

&#x200B;

EDIT: Nope! No, change. I changed the WAN DNS Servers to external public DNS servers and then cleared DNSTWO's Pihole logs  and rebooted. Its still showing up in its own logs as the source of queries that I know it didn't initiate.",pihole,1649261679.0
4591,comment,1,i3n5ggm,,Can't say for certain without looking at the configuration of your router and the piholes. I'm just guessing based on the information provided.,pihole,1649261846.0
4592,comment,1,i3n7ssm,,"I don't think you want to go down that rabbit hole. There are some static routes being passed to network clients, split-tunnel vpns (not for the Piholes), and ... some other stuff.

I think the key here is that DNSONE is behaving as expected. DNSTWO is not. If the problem is something external to the two Piholes, then wouldn't the symptoms show up on both?

By focusing on the two PiHoles we should be able to get them both either working incorrectly or correctly if they're configured the same (and to the best I can tell they are). The latter being preferrable.",pihole,1649262763.0
4593,post,8,txaw23,Pihole on Beaglebone Black - the up-to-date working steps to install,"===============================================================================

https://preview.redd.it/6vvw2m0nbtr81.png?width=501&format=png&auto=webp&s=f6d303783096b25ca8de0d0ae3a7044aeddba152

== Steps to install Pi-Hole on Beaglebone Black (up to date March 2022) ==

Hello, when I was trying to install Pi-hole on a Beaglebone Black, I hit some many bumps.  Many notes, guides, discussions are online,  but they are quite old (e.g. 2016 -2020).  Unfortunately there have been lots of changes in beaglebone Debian OS, as well as Pi-Hole.  Some of the instructions online just did not work.  I was finally able to get Pihole running on Beaglebone Black.  Importantly, I can shutdown and reboot without any issue.  To help anyone who might be thinking about using BeagleboneBlack to host Pi-hole (given Pi shortage), here are the step-by-step instructions.  

Credits go to a few guides/tutorials I read: 

Written in 2017:  [https://appliedcaffeine.org/pi-hole-on-beagleboard.html](https://appliedcaffeine.org/pi-hole-on-beagleboard.html)

Published in 2020: [https://frdmtoplay.com/running-pi-hole-on-the-beagle-bone-black/](https://frdmtoplay.com/running-pi-hole-on-the-beagle-bone-black/)

Written in 2018 (?): [http://joris.van-looveren.net/other/pihole-on-bb/](http://joris.van-looveren.net/other/pihole-on-bb/)

======= Disclaimer: I am not responsible for any assiociated with your installation and setup. These steps are for references only. =====    

&#x200B;

&#x200B;

1. Downloaded the Debian Flasher IoT image from here: [https://beagleboard.org/latest-images](https://beagleboard.org/latest-images).  Make sure that you download the flasher file.  

   Mine is bone-eMMC-flasher-debian-10.3-iot-armhf-2020-04-06-4gb.img.xz

2. Download and install balenaEtcher ([https://www.balena.io/etcher/](https://www.balena.io/etcher/))

3. Write the image to your SD card

4. Insert SD card into your (powered-down) Beaglebone Black board, hold down the USER/BOOT button and apply power, either by the USB cable or 5V adapter. After 4 LEDs start to flashing, release the USER/boot button.  The four LEDs will display 1-2-3-4-3-2-1 cycling patten.  When the flashing is complete, all 4 USRx LEDs will be steady on or off. Power-down your board, remove the SD card and apply power again to finish.

5. From your Router, get the IP address of your beaglebone black.  Use PuTTY to connect and login. 

&#x200B;

6. IMPORTANT!  Set a static IP to Beaglebone Black board using Connman:

	$connmanctl services

\--> A0 Wired XXX

	$connmanctl config XXX --ipv4 manual <ip address> <netmask> <gateway>

	$connmanctl config XXX --nameservers <dns-address>  //for example: [1.1.1.1](https://1.1.1.1)

	restart the board 

&#x200B;

	\*\* this may be the time to reserve the Beaglebone Black IP address in your router setting.  

&#x200B;

7. Remove these apps in sequence (to rid of conflict with PORT 80):

	(1) sudo apt remove --purge c9-core-installer

	(2) sudo apt remove --purge bonescript

	(3) sudo apt remove --purge nodejs

8. Install Pi-hole using this:

	curl -sSL [https://install.pi-hole.net](https://install.pi-hole.net) | sudo bash

9. Install network manager to remove connman to free up port53.

	sudo apt-get install network-manager

10. After installation of Pi-Hole, here are a few things need to be modified.

	\[1\] Comment out two lines in /opt/scripts/boot/am335x\_evm.sh

		echo ""cache-size=2048"" >> ${wfile}  ==> just add # in front: #echo ""cache-size=2048"" >> ${wfile})

		echo ""dhcp-leasefile=/var/run/dnsmasq.leases"" >> ${wfile} ==> #echo dhcp-leasefile=/var/run/dnsmasq.leases""

	\[2\] in /etc/default/bb-wl18xx, change USE\_GENERATED\_DNSMASQ=yes to USE\_GENERATED\_DNSMASQ=no

&#x200B;

11. Modify nginx to run on a new port by modifying /etc/nginx/sites-enabled/default and changing all instances of 80 to a new port, say 8080.

12. Change apache2's port by editing /etc/apache2/ports.conf to Listen 8080. (may not exist)

  Note: I got stuck here since there is a conflict in SoftAp0 file and I could not figure out how to get rid of it.  

The file can be deleted but always comes back after reboot. Finally figured this out (see below). 

&#x200B;

13. sudo rm /etc/dnsmasq.d/SoftAp0  // removes the conflict file.

14. commenting out the line wfile=""/etc/dnsmasq.d/SoftAp0"" in /opt/scripts/boot/am335x\_evm.sh  (suggested by a few previous posts, it did not work).  

15. It turns out that in new  version of Debian for Beaglebone black, one needs to edit  /usr/bin/bb\_dnsmasq\_config.sh

&#x200B;

	commenting out: wfile=""/etc/dnsmasq.d/SoftAp0"" 

	commenting out: echo ""dhcp-leasefile=/var/run/dnsmasq.leases"" >> ${wfile}

&#x200B;

16.  After step 15 and reboot, now there is an error showing port 53 is being used by something else.  IT was  dnsmasq listening on port 53,  which is not needed (Pi Hole has its built-in).  

&#x200B;

	sudo apt-get remove dnsmasq 

&#x200B;

17. >> Pihole restartdns

&#x200B;

18.  System should be running and re-boot of the system will still work without error.",pihole,1649209531.0
4594,comment,1,i4l8eqs,,Update: It turns out that step #15 is not needed if you perform step #16.,pihole,1649870245.0
4595,post,0,tx9ld2,Why is Netflix requesting so much?,"I started blocking Netflix around 3pm today, been almost 6 hours and see how many requests... That is an insane amount of chatter. My best guess is the Nvidia Shield Pro built in Netflix - I don't use Netflix at all.

Crazy to see. Every 3 seconds.

&#x200B;

https://preview.redd.it/hx4r26nr0tr81.png?width=972&format=png&auto=webp&s=ca6e9d5c99c50665b9d91889caae6ebbb336478d",pihole,1649205470.0
4596,comment,4,i3kcmyx,,"Are you actually blocking Netflix?  You are blocking a few of the domains used by the software. 

If is common for such software to repeatedly request domains that is is unable to reach (the domain is blocked).",pihole,1649205893.0
4597,comment,3,i3ke0xs,,It's requesting so often because the software likely sees an active internet connection but it cannot elicit a response.  I suggest you uninstall the software if possible.,pihole,1649206517.0
4598,comment,3,i3lm4ws,,Why are people still so surprised that connected devices retry when they don’t get expected responses. That these things mean it’s working.,pihole,1649231895.0
4599,comment,1,i3nn170,,Those two species domains that you have blocked-are those still required for Netflix to operate or you just blocking any and all Netflix requests?,pihole,1649268418.0
4600,comment,1,i3kpvm1,,"True, I agree that it is constantly retrying to connect. Overnight before the block it was sending requests every 60 seconds.",pihole,1649211761.0
4601,comment,1,i3m71jq,,"I get it. Internet goes out, they want the service back on the moment the internet is restored. So a constant retry it is. But they could do good by trying 3 times and pause a minute or two. Persistent buggers. :)",pihole,1649247364.0
4602,comment,1,i3ohv08,,"Yeah, I'm blocking everything.",pihole,1649279831.0
4603,post,1,tx8jkl,Pi-hole name resolution on local net,"I sort of doubt this is solely a Pi-hole issue, but I can't figure out the interactions that are causing the problem.

I have set up two pi-holes on my local net, both wired to the ethernet.  One of them is solely a backup, and is not actively being used for blocking.  It's there so that I can keep them both up to date and switch my DNS to the second one quickly in case there is a hardware or software problem with the primary one.

So my first pi-hole shows up as pi.hole in nslookup.  The second one does not resolve to a name.  I have checked both Pi systems and can't find where ""pi.hole"" exists in the system files.  /etc/hosts in fact refers to them as ""pi-hole"" and ""pi-hole-2"" by their reserved IPs (which are correct; I checked).  I have set up /etc/hosts the same way on my main desktop machine (a Mac) and restarted the DNS resolver.  The boxes are referred to as ""pi-hole"" and ""pi-hole-2"" in my AirPort router.  Still, ""pi.hole"" resolves; ""pi-hole"" does not.  ""pi.hole"" shows up in netstat on both the Pi systems and my local Macs; ""pi-hole"" does not, nor do any of the other names.

What incredibly obvious thing am I overlooking?  I want to give the second machine a name like ""pi.hole2"" or ""pi-hole-2"" but nothing I've tried has worked.  I thought I understood the basics of LAN networking, but this has me temporarily stumped.",pihole,1649202279.0
4604,comment,2,i3ka3zy,,"Can't you just configure it in Local DNS > DNS Records? Set the name you want to resolve and its IP address.

Also as an aside - it's def worth installing Gravity Sync to connect your Pis and including your backup Pihole in your network's DNS servers. This means it will auto fail over if there is issues with your primary and you don't need to manually configure anything.",pihole,1649204762.0
4605,comment,1,i3kfv5e,,https://docs.pi-hole.net/ftldns/configfile/#pihole_ptr,pihole,1649207337.0
4606,comment,3,i3kbvie,,">	This means it will auto fail over if there is issues with your primary

Not quite. With multiple DNS servers (in this case multiple Pi-Holes), clients are free to use any at any time. Rarely is there a strict order enforced.",pihole,1649205556.0
4607,comment,1,i3koek4,,I tried changing the pihole-FTL.conf files on both Pi systems and restarted them but it made no difference.  Adding the IP and name in the pi-hole DNS records entry of the web interface fixed it immediately.  As long as it works!,pihole,1649211087.0
4608,comment,1,i3kc26i,,"Well perhaps, but what's the downside if they're both used? If they're in sync it shouldn't matter.",pihole,1649205638.0
4609,comment,4,i3kccq9,,"It doesn't matter and there is no downside. I was simply pointing out that both can/will be used at any time, as opposed to one being used only if the other is not available.",pihole,1649205767.0
4610,comment,1,i3kdqyg,,"Right thanks. 

In my experience the first listed DNS server on my network (my 'primary' Pihole) does indeed serve the most traffic (like 95%-99%). I actually just changed the order in which my DNS servers are listed on my Proxmox host cos it was leaning heavily on my secondary Pihole which I had accidentally listed first.",pihole,1649206391.0
4611,post,1,tx6yiz,Netgear Orbi VPN and Pi-hole can't access admin page.,"Hello all, I tried yesterday for a few hours to figure out why I can't access my admin page while using the VPN that is included with Netgear Orbis. 

I could access the Pi-hole by inputting it's IP address but when I would click the blue link to take me to the admin page nothing would happen. The page would just try to load for infinity with no error being displayed. 

I am able to access the admin page while on the local network and not using the routers VPN. 

Additionally and maybe unrelated, I am using the Pi-hole for my DHCP server, I have DHCP disabled in the Orbi, however it appears the Orbi still assigned my device an IP as opposed to the Pi-hole when my device connected via VPN.

Any help would be greatly appreciated.",pihole,1649197700.0
4612,comment,1,i3l5juf,,This problem was fixed by installing pivpn on the pi and using wireguard.,pihole,1649219898.0
4613,post,7,tx6bwv,Best Pihole videos for new users? (For intro + setup),"I have been using a pihole for many years and have set up a few installations for friends who live nearby. Had lunch today with two friends are much further away and who expressed interest in blocking ads, and who had never heard of pihole. I told them there were a good few videos on YouTube and that setup was quite easy (""a one line command and a quick router setting change"").

Had a quick look later and found that the videos I looked it were long, jumped into installation without explaining the basics of DNS filtering, didn't get users to confirm that their router's DNS and or DHCP settings were editable (I discovered the hard way that some aren't), referring to things that would likely be gibberish to the uninitiated and without explanation etc.

Anyone got a view on and links to the best or even a good video (or series) which sets out the why and then the how in a way that a non technical user can follow and get things working right first time?",pihole,1649195921.0
4614,comment,1,i3jyj4j,,"Maybe at first it is better to show them how to change their current DNS settings to a DNS service which offers adblocking / no logging etc before ""overwhelming"" them with the installation of pi-hole?",pihole,1649199624.0
4615,comment,1,i3nbag5,,"I think thats a good one: 

https://youtu.be/YUHXPOqhBuo",pihole,1649264066.0
4616,comment,1,i3np3m3,,\*follows post as someone who only just found out Pihole exists.\*,pihole,1649269190.0
4617,comment,1,i3lqa25,,Great suggestion. Thanks. I'll do that as a first step. Will confirm that they can edit DNS settings.,pihole,1649235445.0
4618,comment,1,i3ne5kd,,That one is a bit out of date. Some of the current installer screens no longer match what is shown in the video.,pihole,1649265135.0
4619,post,3,tx1o06,"DNS Over TLS ""working"" but android doesn't connect.","I've been trying to set up DNS over TLS so I can use android's built in private DNS feature to connect to my pihole and I thought I finally got it working but on android all I see is 'Couldn't connect'.

I used stunnel ([followed instructions from here](https://github.com/clayauld/Secure-Adblocking-DNS)).

Using [dnslookup](https://github.com/ameshkov/dnslookup/) I ran 'dnslookup [example.org](https://example.org) tls://*mydomain*' and it returned a response.

Any ideas? (I would post my stunnel config but it's literally the one on the site with [example.domain.com](https://example.domain.com) replaced with my domain).",pihole,1649183619.0
4620,comment,1,i3j4b6q,,"I would ask the author of the guide you are following:

https://github.com/clayauld/Secure-Adblocking-DNS/issues",pihole,1649187652.0
4621,comment,1,i3k47kc,,"I propose a simpler way. Setup up tailscale on your pi and your handset.

It literally takes seconds and you can easily set any device then to have it's DNS routed via pihole",pihole,1649202129.0
4622,comment,1,i3l7eqc,,"If you use certbot to generate certificates add this line --preferred-chain=""ISRG Root X1""
I know this is reddit pi hole however guard home as dot doh doq resolver will be better.",pihole,1649221010.0
4623,comment,1,i3jd1oh,,"Alright, ill see if they have a suggestion. I've also tried multiple different tutorials and none of them have worked.",pihole,1649190889.0
4624,comment,1,i3khxan,,I already have a wireguard VPN set up & that's how I normally use it but I have to tether my laptop to my phone at work and android tethering doesn't work with always on VPNs active... I was hoping to set it up and use it so when I disconnect from the VPN it's still filtered by pihole.,pihole,1649208250.0
4625,post,1,tx1dum,"lots of dnsmasq warnings, what does it mean?","hi! i've been running a pihole on my network for almost 2 years now without issues. recently when i went to check on something i noticed a ton of warnings that said ""DNSMASQ\_WARN  Maximum number of concurrent DNS queries reached (max: 150)"". what does this mean, what causes it and how can i fix it? the pihole is on my secondary network which doesn't see tons of traffic",pihole,1649182881.0
4626,comment,1,i3isju4,,"Looks like it’s not cleaning up old queries.   Did you try rebooting?  When you do, check for updates too.   It might be something that’s been fixed.",pihole,1649183098.0
4627,comment,1,i3j3p3z,,"https://docs.pi-hole.net/ftldns/dnsmasq_warn/

    The configured maximum number of concurrent DNS queries for a given server is reached. The system is either very busy at the moment or not receiving queries from the configured upstream. Check your connectivity or the upstream DNS server status.

    The warning can also be printed when being spammed with an excessive amount of duplicates or when the upstream server never replies for specific domains. Check your logs and try to identify similarities between the query directly preceding this warning and earlier queries in /var/log/pihole.log. Try to find out if your upstream does maybe never reply to specific domains and fix this.

    This warning is printed at most once every five seconds (per upstream server) to help mitigate unlimited log file growth.",pihole,1649187420.0
4628,comment,1,i3it7t4,,"currently updating it, last time it rebooted was 8 days ago during a brief power outage. before that the uptime was around 65 days",pihole,1649183362.0
4629,comment,1,i3j47lc,,if that's the case that must have happened when the secondary WAN went down.,pihole,1649187614.0
4630,post,0,twygua,Ads on BaconReader,"I use BaconReader for Reddit browsing and I still get ads coming through.  I clicked one of the ads and caught a glimpse of adclick.g.doubleclick, but there are other ads making their way through.  

Anyone having this issue with BaconReader and PiHole?",pihole,1649174930.0
4631,comment,2,i3j753p,,Check DNS settings on your device. Most likely it's evading your pi-hole.,pihole,1649188706.0
4632,comment,1,i3idrr8,,Did you try to add more lists?,pihole,1649177252.0
4633,comment,1,i3ju0vr,,I paid and no more ads,pihole,1649197663.0
4634,comment,1,i3ik37p,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1649179674.0
4635,comment,1,i3nzukt,,"Resolved - in Android, there is a Private DNS setting that was turned on by default.",pihole,1649273161.0
4636,comment,1,i3nzox1,,"that was it!  On Android, there is a Private DNS setting and it was turned on by default.",pihole,1649273105.0
4637,comment,2,i3m6lzf,,🥓 reader quickly hit my threshold for paying for an app. Been well worth it for like the past ten years (or however long),pihole,1649247124.0
4638,comment,2,i3o1tq8,,Glad you were able to find and resolve it!,pihole,1649273894.0
4639,comment,2,i3me2wq,,Please explain?  It is very well improved over the last few years.,pihole,1649250836.0
4640,comment,2,i3mhkra,,I might have worded it poorly. but It quickly hit the threshold where I'm willing to pay for an app. I use it and thus pay for it. Sorry if I typed it badly,pihole,1649252382.0
4641,post,18,twxhla,I hope this is a stupid question. Can we do redirects with pihole?,"I loath with every fiber of my being the new reddit layout...  

Can I redirect [reddit.com](https://reddit.com) to [old.reddit.com](https://old.reddit.com) in the piholes settings?",pihole,1649172276.0
4642,comment,6,i3j4awc,,I am with you.  I even use Bacon Reader because it just looks better to me.,pihole,1649187648.0
4643,comment,7,i3i5nko,,"~~No.~~  
Maybe you can with the CNAME settings in PiHole. I wil ltest this real quick",pihole,1649174005.0
4644,comment,3,i3i6xxd,,[https://www.reddit.com/r/Enhancement/comments/8hg5bv/is\_there\_a\_way\_to\_force\_old\_reddit/](https://www.reddit.com/r/Enhancement/comments/8hg5bv/is_there_a_way_to_force_old_reddit/),pihole,1649174505.0
4645,comment,3,i3j6cfo,,"you can use the old reddit redirect extension for firefox. probably for other browsers too. just google ""old reddit redirect"". don't know if it works on mobile though.",pihole,1649188408.0
4646,comment,2,i3jz2t7,,"There are browser extensions for that purpose.

  * [Old Reddit Redirect for Chrome](https://chrome.google.com/webstore/detail/old-reddit-redirect/dneaehbmnbhcippjikoajpoabadpodje)

  * [Old Reddit Redirect for Firefox](https://addons.mozilla.org/en-US/firefox/addon/old-reddit-redirect/)",pihole,1649199863.0
4647,comment,0,i3izgno,,TBH I prefer new Reddit.,pihole,1649185794.0
4648,comment,1,i3jzc1h,,DNS and CName Records? -  But the various caches could prevent the redirection. Maybe flush the one from pihole.,pihole,1649199976.0
4649,comment,6,i3i7c73,,"Don't think that's going to work.  also, anything https is going to complain as the requesting domain will have changed.

I think your original answer of ""No"" is correct here.",pihole,1649174661.0
4650,comment,4,i3i6til,,It didn't work for me.,pihole,1649174458.0
4651,comment,2,i3i9yk6,,Yea I've done that... they just keep forcing it on people... Almost easier to not use reddit at this point.,pihole,1649175670.0
4652,comment,2,i3jza2f,,[Yup.](https://old.reddit.com/r/pihole/comments/twxhla/i_hope_this_is_a_stupid_question_can_we_do/i3jz2t7/),pihole,1649199952.0
4653,comment,3,i3jjnci,,r/The10thDentist,pihole,1649193370.0
4654,comment,2,i3k9svx,,"I didn't even know there was an old reddit. 

Just looked and busted my eyeballs. Holy shit that is white and glary!!",pihole,1649204623.0
4655,comment,0,i3lspr0,,"Yeah, I am with you. Much nicer to browse, and dark mode is legit.",pihole,1649237545.0
4656,comment,3,i3jzeqw,,You could try the [browser extension](https://old.reddit.com/r/pihole/comments/twxhla/i_hope_this_is_a_stupid_question_can_we_do/i3jz2t7/).,pihole,1649200009.0
4657,post,86,twstr8,Pi Hole or Adguard?,"Hi may be a silly question but im new to Pi Hole. If im after adblockimg across apps on my phone and browsing would pihole be a good choice?

Currently using Adguard.",pihole,1649158378.0
4658,comment,53,i3hbswb,,"two commenters now have mentioned ""pinhole"". did they both make the same spelling error or am I out of the loop on something",pihole,1649161195.0
4659,comment,29,i3hl13p,,"I've been using pi-hole for a few years now. I took a look at Adguard Home a few weeks back because a number of people said it was superior. I found it did the core job equally well, but I didn't like the way it handles clients; I much prefer pi-hole's groups-based approach. So, I'm sticking with pi-hole.",pihole,1649165676.0
4660,comment,22,i3hcf6c,,Given both a try and see which one you like better,pihole,1649161519.0
4661,comment,5,i3hvld0,,"Why not both ?   
One for primary and the other one for secondary.",pihole,1649170018.0
4662,comment,6,i3izzvy,,"Now that AdGuardHome has ""Optimistic caching"" I choose it.",pihole,1649186002.0
4663,comment,12,i3hn4mr,,"I started off using Adguard home after reading a few similar topics a few years ago and people seemed to like it more. But after swapping back and forth between the two I personally prefer Pihole. I'm sure they both function practically the same in the grand scheme of things. I just like the community and Dev team more, always seems willing to go out of their way to help people.",pihole,1649166590.0
4664,comment,9,i3igrh7,,"I switched to ad guard, because of integrated TLS (encrypted) DNS options",pihole,1649178397.0
4665,comment,12,i3hppag,,"I like AdGuard home better.

I think the UI is easier to set up. The upstream DNS configuration is more powerful. I can choose DNS over HTTPS TLS DNSCrypt, all kinds of shit, and choose stuff like ""for all these domains always use this DNS server"". 

But what really pushed me over the edge was that AdGuard sync was trivial to setup (even as a docker container), and I never got Gravity sync to work.",pihole,1649167662.0
4666,comment,6,i3ih0sz,,I used to use pihole for years. Switched to Adguard home and haven’t looked back. Pihole lacks a “need” feature for me which is wildcard dns rewrites. I can do *.local.domain.tld and be done. Where pihole would need me to manually enter each subdomain. This is problematic for the plex relay server as it needs a wildcard rewrite to not have issues.,pihole,1649178499.0
4667,comment,3,i3hulsd,,Por que no los dos?,pihole,1649169628.0
4668,comment,3,i3iz5i8,,"why try them out both?

pihole got me started in this selfhosting thing and spend most of my time learning first and being familiar qith, but also checking out Adguard and its still on my other vps along with wireguard while pihole is at my home.",pihole,1649185674.0
4669,comment,3,i3j02xy,,"I had dns resolver on pihole regularly stop resolving queries and needing to be restarted.  Never figured it out so stopped using it.  Roll on 12mo later I have implemented adguard home and love it - less false positives,  using adguard sync to sync settings between two instances.  TBH vastly less hassle than pi-hole.

(note many answers in this thread don't seem to manage to differentiate which adguard service you are talking about - many seem to think you are asking about adguard VPN or adguard cloud DNS, i assumed you were asking about adguard home?)",pihole,1649186034.0
4670,comment,3,i3kye9i,,AdGuard home all the way. I have both and AdGuard Home is such a polished experience Platforms,pihole,1649215922.0
4671,comment,4,i3ho7d3,,"I used pi-hole on raspberry pis for a long time. Then I used it as a docker imag ein my NAS. Then I moved to AdGuard due to integration with Home Assistant. Now I am back to pi-hole in raspberry pis, but in docker containers. Just try each for a week. It's not like you have to buy a subscription...",pihole,1649167044.0
4672,comment,12,i3hecdc,,I switched to AdGuard after running pihole since it first came out. Never going back. Just my two cents.,pihole,1649162521.0
4673,comment,2,i3jyjfh,,"I've always preferred pihole myself but am slowly leaning towards adguard home.  They have a better documented parental control section, and with my 10 year old...  I know its possible to enforce safesearch per client, per web browser, and block adult sites.  But adguard just makes it simple to figure out rather than digging through year old posts of people speaking beyond my skill level and trying to decipher how to accomplish what adguard does in a few clicks",pihole,1649199627.0
4674,comment,2,i3kj86f,,AdGuard because of the syntax it supports compared to Pi-Hole.,pihole,1649208820.0
4675,comment,2,i3pi8gp,,"I'm using both at the same time, adguard on port 54, pihole is faster but it doesn't have doh dot so it asks adguard upstream dns server#54",pihole,1649295742.0
4676,comment,6,i3hcrz4,,"I prefer Pi-hole because you control what is blocked. If there is a site that’s not an ad, you can block it with Pi-hole, and you can unblock things you don’t want blocked.",pihole,1649161708.0
4677,comment,4,i3hi1u9,,"I prefer Adguard home, I ran pihole for about three years an made the switch,",pihole,1649164311.0
4678,comment,2,i3j7tua,,I prefer AdGuard home by a mile,pihole,1649188962.0
4679,comment,0,i3h7xw7,,Pinhole. Running flawlessly for 2 years now. And now with Tailscale its even better!,pihole,1649159004.0
4680,comment,1,i3hohde,,I've used ADGuard Home for a while and now have switched to Pi-Hole.  ADGuard has a polished simple interface to just get the job done.  Pi-Hole has a nice interface and seems to just give more customization for reports and various other operations.  My biggest reason for switching was the performance of trying to view the log data in ADGuard Home as it was extremely slow if I tried to keep more than 24 hours of data.  I do run a lot of lists because I hate ads so legitimate sites would break and it was a pain to determine what got blocked that shouldn't have.  Functionalities wise they both seem almost equal.,pihole,1649167158.0
4681,comment,-1,i3iamem,,"pi-hole comes as a default software without a lot of things even updating the blocklist you need to relay on a cronjob to do it and adguard has way more futures, on adguard github you will find the difference for my the most annoying thing about pi-hole is that you need to do it manual or make a cronjob to update the block list and adguard has it automatic. i use adguard and plan to install it again but to lazy since the backup for my ras-pi had everything setup for pihole and i am to lazy to do everything myself again.",pihole,1649175902.0
4682,comment,0,i3iivrl,,AdGuard has always seemed shady to me and uses a ton of npm modules,pihole,1649179212.0
4683,comment,-1,i3h7508,,Pinhole or Adguard home,pihole,1649158516.0
4684,comment,1,i3hnwj0,,Both are great,pihole,1649166919.0
4685,comment,1,i3hzqdb,,Recently got an asur router that supports merlin firmware. Was able to instal adguard via ssh and i have been liking it,pihole,1649171636.0
4686,comment,1,i3idwmz,,I use both lol,pihole,1649177305.0
4687,comment,1,i3iw1ie,,"Both are fine.

This is also great:  https://www.geoghegan.ca/unbound-adblock.html

Running it on a DragonflyBSD VM on Proxmox right now and it works great.",pihole,1649184471.0
4688,comment,1,i3k2m6d,,Love pihole but now I’m getting an error saying can’t connect port 53 already in use and I have no idea how to resolve it.,pihole,1649201420.0
4689,comment,1,i3kbd2g,,"I actually just tried setting up AdGuardHome today after running PiHole for years. The fact that you can assign specific upstream DNS resolvers per client is really cool, but as another person said, I also find the way PiHole handles clients superior. 

I run about a half dozen containers behind a reverse proxy (caddy) on my pi, and I could not for the life of me figure out how to configure AdGuard to resolve local hostnames. I think I just need to tinker around some more, but for now I’m sticking with PiHole. 

Fwiw, I tried running AdGuardHome using docker using a macvlan",pihole,1649205325.0
4690,comment,1,i3kl579,,"I've used both for a while and settled for Adguard Home in the end. The installation is super easy, the optimistic caching is wonderful and the fact that you can update to a new version from the web interface is really convenient.",pihole,1649209653.0
4691,comment,1,i3kpu9t,,"Adguard will work when you leave home.

Pihole blocks ads on everything at home, not just your phone.",pihole,1649211743.0
4692,comment,1,i3l9l1d,,Adguard,pihole,1649222385.0
4693,comment,1,i3lzhfi,,"Depends on your use case. I use Adguard for my kid's network since the content filter is surprisingly effective, and it pushes down safe search for a number of browsers

I then use pihole for my other lans since it's a little easier to use.",pihole,1649242767.0
4694,comment,1,i3vn7ps,,"If adguard runs stable, then I will switch. Not because I dislike Pihole but because in my environment adguard home is easier to be implemented.

I run a firewall with opnsene and have two local networks (one for the family and one for guests) installed. Currently pihole runs on a linux machin in my home network, acts as only dns server handed out by the dhcp server on the opnsene fw. pihole uses ubound on the fw as next lvl dns server which is required so I can inject and resolve local computer names and ip addresses.

I am sure there is a method to route dns requests of the guest network to the pihole dns server and back again, but it is much easier to install adguard on the fw and grant access to both subnets to that service.

And a slight bonus for adguard: it is easy to use condidional dns forwarding. So now I only send local domain requests to ubound while anything else directly is forwarded to nextdns instead of taking an extra hop through ubound.",pihole,1649409846.0
4695,comment,-5,i3imsnj,,"Pihole is a little bit tricky to set up and you have to buy a Raspberry Pi, AdGuard as NextDNS are more user friendly and you basically just have to install an app. But Pihole is a lot more customizable and then can block better ads and trackers. But Pihole only works locally on your network if you don't set up a VPN to connect to by mobile. I personally have both a Pihole at home and NextDNS on my mobile devices, since I haven't set yet a VPN",pihole,1649180711.0
4696,comment,-2,i3jkm3y,,NextDNS,pihole,1649193747.0
4697,comment,0,i3koio7,,I use Pi-hole as my dhcp server and network blocker and AdGuard on my iPhone and iPad. Works very well and blocks ads in apps even when I’m away from my wifi.,pihole,1649211139.0
4698,comment,36,i3hccn3,,Auto-correct.,pihole,1649161482.0
4699,comment,11,i3jho7c,,I asked that question once and the community was acting as if i was a complete dumb ass and acted like I was trolling.  Even the devs though I was trolling for asking a very honest question.,pihole,1649192608.0
4700,comment,2,i3ieeag,,I bet pinhole is an error,pihole,1649177494.0
4701,comment,6,i3im8jy,,"~~I have tried both. I use pihole for home devices and Adguard for my phone so I can use it on the go ([saves me so much data](https://i.imgur.com/osrsgvg.png)) Can pihole be used on the go now? Last I remember it didn't support that (or maybe it just wasn't that straightforward to make work).~~



Edit: my bad. I didn't realize we were discussing AdGuard Home. I'll practice my reading comprehension skills.",pihole,1649180499.0
4702,comment,2,i3lxtgo,,"Tried this. I use adguard on a VPS outside my network and pi-hole on a SBC local.

I am amazed about the easy doh and dot features with TLS. And I slowly used pi-hole just for their good DNS mapping features. But I switched to the ngnix manager for routing and pi-hole got obsolete.

I know there are ways to use dot and doh with pi-hole to build the same usecase like adguard home. But after reading the manuals, it looks too complicated.

If pihole comes with a built-in feature for TLS support I am the first who put this on my VPS.",pihole,1649241590.0
4703,comment,0,i3iwitt,,"This is the answer.

I use Pi-hole for the entire network, and AdGuard on devices.",pihole,1649184657.0
4704,comment,1,i3jhnnh,,">	pihole would need me to manually enter each subdomain

Enter local.domain.tld as a wildcard in the Pi-hole blacklist and that domain and all subdomains are blocked.",pihole,1649192602.0
4705,comment,6,i3jhz7g,,">	less false positives

This is solely dependent on your selection of block lists and is equally applicable to either software package.",pihole,1649192725.0
4706,comment,21,i3ib539,,"~~AdGuard is not open source.~~ [Edit: Corrected below. I should have read further.]

AdGuard is a Russian company (sure, they moved it to Cyprus for tax reasons but it's still a Russian company, really.)

There have been allegations that AdGuard communicates with servers in Russia. AdGuard has denied this but what else would they say?

AdGuard is a for-profit company that will always be wanting to upsell you to something else. What are they *actually* doing with your DNS query data? Do you know? Really? ~~It's closed source software so ultimately no, you do not know.~~ [Edit: I feel somewhat better knowing it's open source but for some strange reason I have a difficult time trusting any form of security software connected to Russia these days. Can't imagine why...]

#Pi-hole has none of the above problems. I see no benefit to running AdGuard and many reasons to avoid it.",pihole,1649176116.0
4707,comment,2,i3hfm6v,,Any specific reasons why? I'm new to pihole myself,pihole,1649163149.0
4708,comment,2,i3i63qc,,"Same, love it how easy it is to step up DoH, DoT, QUIC

Also you can set it up as Private DNS on your phone and use it outside of your home network.",pihole,1649174182.0
4709,comment,-1,i3j5xyw,,Why,pihole,1649188259.0
4710,comment,1,i4nbmb0,,"wow I didn't think of running it like that to get DoT with Pi-Hole, thank you!",pihole,1649901195.0
4711,comment,15,i3hp8nt,,You can do all of that with AdGuard as well.,pihole,1649167470.0
4712,comment,1,i3hmxx9,,"What are the advantages, in your opinion?",pihole,1649166513.0
4713,comment,1,i3kyp42,,Me too,pihole,1649216078.0
4714,comment,1,i3kyw12,,No performance issues and I keep my log files as well,pihole,1649216178.0
4715,comment,3,i3igxx6,,"> you need to do it manual or make a cronjob to update the block list

Not true; pihole already updates automatically once a week:

[Blocklist Auto-Update](https://www.reddit.com/r/pihole/comments/a6wf52/blocklist_autoupdate/)",pihole,1649178468.0
4716,comment,3,i3jh5m2,,">	the most annoying thing about pi-hole is that you need to do it manual or make a cronjob to update the block list...

Quite incorrect. Pi-hole installs a cron script that automatically updates gravity every Sunday morning. No user action required.",pihole,1649192411.0
4717,comment,-1,i3ige44,,Understanding completely,pihole,1649178255.0
4718,comment,3,i3lcaj3,,They might seem shady but they're fully open source. NPM modules just help with the overall UI/UX. So no need to be afraid of them.,pihole,1649224201.0
4719,comment,3,i3k8a9v,,"something else on your system is taking port 53 before pihole starts it is most likely network manager or some such software installed by your OS

run the following command 
`netstat -tulpn | grep 53` from the command line and it will show you what is using it then use google and search out how to prevent it",pihole,1649203944.0
4720,comment,1,i3l4tyj,,"If you can/could, use a opnsense firewall and the ubound service as upstream dns server of pihole. Ubound has the options to add host resolving for dynamic and static local hosts.

This is how I do it with pihole, however I might try adguard instead because I can run it on my FW. Then I can shut down my pi over night and save some energy",pihole,1649219471.0
4721,comment,1,i3kqepi,,Pi-hole also works when you leave home if you install a small VPN client on the Pi.,pihole,1649212007.0
4722,comment,4,i3iqt4o,,"You seem to be confused between the adguard home software and their standalone apps. 

Adguard home also needs a setup like pihole either in a vps or a raspberry Pi. It works similarly to pihole but has a bigger feature set.",pihole,1649182407.0
4723,comment,1,i3kifl5,,This. I don't need to maintain servers and can access from anywhere without VPN stuff,pihole,1649208474.0
4724,comment,0,i3ldpei,,I used it for a week or so but it really cant handle CDNs,pihole,1649225210.0
4725,comment,17,i3hejr9,,Yea my phone always autocorrects pihole to pinhole lol,pihole,1649162626.0
4726,comment,7,i3jkgkt,,"I genuinely had no idea lol, didn't know if it was some weird off-shoot of pihole or something",pihole,1649193686.0
4727,comment,10,i3iqy4s,,"I was talking about Adguard Home, which is a dedicated Linux server rather like Pi-hole.  I haven't tried the Adguard phone app, but I just have a split tunnel Wireguard VPN back to my home network which activates whenever my phone isn't on my home wifi, so I can pi-hole wherever I am.",pihole,1649182464.0
4728,comment,2,i3ir73d,,"Not what you want the hear but you can vpn on your phone into your home network which is Piholed, works well! Not sure about Pihole on the go otherwise",pihole,1649182563.0
4729,comment,3,i3k7c94,,"i think they are referring to local dns records, not block lists.",pihole,1649203520.0
4730,comment,0,i3jx9cg,,"just stating how it came out of the box in the recommend config - with pihole i was forever creating allow list for basic obvious stuff, get some want that stringent blocking, bigger issue was the dns resolver would keel over for me, i note on github others had issues too with no one ever getting to bottom of it, probably docker in my case, dunno.",pihole,1649199061.0
4731,comment,9,i3igbq7,,They seem to be open source: [https://github.com/AdguardTeam/AdguardHome](https://github.com/AdguardTeam/AdguardHome),pihole,1649178230.0
4732,comment,8,i3kyms8,,Stop the fear mongering. AdGuard home is open source platform,pihole,1649216044.0
4733,comment,-5,i3jrra7,,"Yeah, for profit and russian based company is main reason I use pi-hole over adguard home. I don't care about nice interface since the difference is not that big (also do you really have to look for that interface everyday?), and DNS over TLS or HTTPS support is not a problem for me since I can just run custom upstream dns server in the same computer as pi-hole which act as DoH or DoT solution.  


Also to be clear the problem with ""X country based company"" is not that inherently all person from that X country are having bad intention or cannot be trusted, but the fact that having some connection with that X country make it a liability if the goverment have free reign over it's citizen and company without any transparency. a more authoritarian goverment can just threaten the company or citizen to comply to its authoritarian agenda without any transparency or balance from it's judicial system. (imagine if you already move the company to other country but the gov still have your family hostage).  
Which is sad since I believe there's still many individual from russia or other authoritarian country who really have good intention or do something goods, but the prospect that govt control over its individual can force them in the present or future.",pihole,1649196689.0
4734,comment,3,i3hteuy,,https://www.smarthomebeginner.com/pi-hole-vs-adguard-home/,pihole,1649169156.0
4735,comment,1,i3hgx9j,,"I like the user interface better. I like being able to set multiple DNS servers that can be queried simultaneously. For example, I was using Cloudfare at one point on Pihole and they had an outage. I wasn't home but my wife called me complaining the Internet wasn't working. It was b/c of the Cloudfare outage. With Adguard, I can have it using Google, Cloudfare, OpenDNS, etc all at once. One goes down, no big deal.",pihole,1649163783.0
4736,comment,0,i3i5bfr,,"Which method is that?  I've only seen people use AdGuard for their DNS forwarders, or use their VPN app.",pihole,1649173872.0
4737,comment,3,i3hr0vb,,"i like the interface, and to snoop on the kids to see where they go with the ability to see the entire log and not run out of ram without them knowing i am. it also has many more built in list that you can turn on",pihole,1649168204.0
4738,comment,1,i3mdbja,,"I am running mine in Docker on my small NAS.  But it is running from an NVME volume, so disk IO was not the slow point.  After 24 hours of log existed it would take 30 - 60 seconds every time I tried to access the log details which was very annoying.  I'm running Pi Hole on the same docker/NAS setup and have no issues with it.

I may not have mentioned it but blocking why I believe they both performed the same.",pihole,1649250486.0
4739,comment,1,i3ka882,,Thank you very much,pihole,1649204816.0
4740,comment,1,i3m2b24,,"I do like unbound, that’s a good idea. 
Ive heard of opnsense but never really looked into it. What hardware do you run it on, and how does it compare to pfsense?",pihole,1649244621.0
4741,comment,-1,i3kqq4u,,"Read ops comment.

New to pihole.",pihole,1649212156.0
4742,comment,-1,i3iw7kl,,"I was talking about their standalone app, since the post was referred to a smartphone solution",pihole,1649184536.0
4743,comment,8,i3jxx09,,Thankfully it doesnt correct to peehole or something,pihole,1649199353.0
4744,comment,2,i3ld9ae,,That’s what I thought it was.  Thought I was missing something.,pihole,1649224885.0
4745,comment,1,i3j470i,,"Ah crap I didn't even catch that. 



I'll have to try the VPN into my home network like you described because ultimately I'd rather not have my data passed through a service I don't own (where I can help it). Thanks for the info!",pihole,1649187608.0
4746,comment,1,i3j5rbk,,I need to set this up but it's not a ten minute job you know :(,pihole,1649188191.0
4747,comment,1,i3j48vn,,I'm definitely going to try this. Not sure why I didn't think of that to begin with.,pihole,1649187627.0
4748,comment,2,i3k7qa8,,I'm not seeing how that would work. A domain and all subdomains of that domain are mapped to the same IP?,pihole,1649203695.0
4749,comment,3,i3k7bq0,,">	pihole i was forever creating allow list for basic obvious stuff

I would be very surprised if the stock adlist caused this. It is a very mild list.",pihole,1649203513.0
4750,comment,-6,i3ii0l3,,"Ok, but any one of those issues is reason enough to never even consider them.",pihole,1649178883.0
4751,comment,-7,i3inldc,,"Thanks for the correction, I've crossed out some sections of my comment. It was a piece of their Windows software that wasn't open source, I should have read more carefully.

Still, Russian security software in today's world? I'll pass.",pihole,1649181001.0
4752,comment,2,i3kzhsn,,"Why are you replying that way to an already corrected comment?

They're still a for-profit company run by Russians. Hard pass. Pi-hole is a much better choice.",pihole,1649216498.0
4753,comment,18,i3hiqtd,,">	With Adguard, I can have it using Google, Cloudfare, OpenDNS, etc all at once.

Pi-hole can have multiple upstream DNS servers as well.

https://docs.pi-hole.net/ftldns/dns-resolver/#improve-detection-algorithm-for-determining-the-best-forward-destination",pihole,1649164637.0
4754,comment,5,i3hh7ft,,"You could also technically do the multiple dns with pihole

just tick all of them in the ui and it'll randomly pick em to use",pihole,1649163915.0
4755,comment,2,i3icl6l,,"You can import block/white lists just like Pi Hole (at least I think Pi Hole has whitelists). You can also add custom blocks/allows in the ""custom filtering"" section, it uses all the same syntax as UBlock Origin.

See [here](https://kb.adguard.com/en/general/how-to-create-your-own-ad-filters) for more info.",pihole,1649176776.0
4756,comment,1,i3kyhhd,,AdGuard home is a diff product that runs like pihole,pihole,1649215969.0
4757,comment,2,i3kyq42,,Web based updates is another one. One click and done,pihole,1649216093.0
4758,comment,1,i3m6ldx,,"I haven't tried pfsense yet, but when I decided to install a firewall and had to choose between the to, I decided to use opnsense because it seemed more modern and advanced. I run it on a J1306 protectli clone from aliexpress with 4 ports. I don't use any fancy IDS stuff and it filters 20 MB/sec symmetric without issues. Runs stable and offers everything I need, including ubound and the dhcp server for IPv4 and IPv6.

Next are some tests with open vpn and adguard.",pihole,1649247115.0
4759,comment,1,i3kqxa4,,That doesn't change the fact that you can install a VPN alongside Pi-hole.,pihole,1649212249.0
4760,comment,3,i3jtu4u,,"pi-vpn, makes it super simple",pihole,1649197582.0
4761,comment,1,i3obd99,,Like MowMdown said use Pivpn for easy VPN setup. I'd recommend wireguard and make it auto activate on any connection that isn't your home network.,pihole,1649277383.0
4762,comment,2,i3j77po,,Took about 15-20 mins to set up.,pihole,1649188733.0
4763,comment,2,i3jku0p,,Pihole with wireguard and a macro to activate the VPN when I'm off my home wifi: 👍🏻👍🏻👍🏻👍🏻,pihole,1649193835.0
4764,comment,2,i3k9718,,"sure, i have a server that i run a reverse proxy on, and i have about 8 or so subdomains pointed to it. i don't want my domain resolving to my public ip address, so i add entries in my pihole that all point to my local server.",pihole,1649204349.0
4765,comment,15,i3ii7ws,,I wasn't advocating for or against considering them. Just clearing up that they do seem to be open source.,pihole,1649178960.0
4766,comment,5,i3hnd4v,,It was suggested to me that using unbound with my pihole is the way to go for DNS-resolving. Or am i mixing up different things here?,pihole,1649166690.0
4767,comment,19,i3hiuhd,,">	it’ll randomly pick em to use

It is not a random choice. It is performance based.",pihole,1649164685.0
4768,comment,0,i3if5im,,"Can it block ""Tony Love"".......😄",pihole,1649177781.0
4769,comment,1,i3m9l9j,,"Nice, thanks I’ll check it out",pihole,1649248686.0
4770,comment,3,i3kbi9i,,"Got it. This can also be done in dnsmasq, which underlies pihole-FTL. 

You can assign a specific DNS server to an individual domain or range of domains.

https://thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html",pihole,1649205388.0
4771,comment,0,i3kkej1,,Create a 99-custom.conf file in `/etc/dnsmasq.d` with syntax `server=/example.com/192.168.x.x`,pihole,1649209331.0
4772,comment,10,i3hrmc4,,"I would say configuring unbound is the superior, but more complicated solution. With unbound, you are the upstream DNS.",pihole,1649168446.0
4773,comment,0,i3kk94w,,Exactly this. Create a 99-custom.conf file in `/etc/dnsmasq.d` with syntax `server=/example.com/192.168.x.x`,pihole,1649209266.0
4774,comment,2,i412j8p,,"thanks for the tip! tried to set that up. wasn't working with `server=...`

but `address=/example.com/192.168.x.x` did the trick.",pihole,1649509259.0
4775,comment,1,i3mey03,,"If you are using pi-hole, I wouldn't say it is any more complicated to get unbound working with it than just pi-hole alone. Its worth mentioning too that if you are using containers you can have unbound running separately and point any DNS to it so Adguard Home can use unbound as well.",pihole,1649251223.0
4776,post,13,twhl41,Open Table reservations from Google Maps blocked,"When accessing the Android Google Maps app, I am unable to make a reservation using the ""Reserve"" button for a restaurant. If you are not familiar, this is a feature built directly into Google Maps on the restaurant's ""page"" in Maps. It sometimes appears as ""Reserve a table"". This utilizes Open Table to make a dinner reservation.

The query log doesn't seem to list the request. I confirmed this is PiHole by disabling for 10 seconds and then immediately trying the ""Reserve"" button - it works. I tried setting a whitelist for (\.|\^)opentable\.com$ but that didn't seem to work. I searched the subreddit, github, google, etc but couldn't find anything relating to this.

Does anyone know how to identify the domain from the request for the button in Google Maps so I can whitelist?

Thank you!",pihole,1649117536.0
4777,comment,1,i3fbrn4,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1649117627.0
4778,comment,1,i3h9td6,,"When something like this happens I use the query log in the web UI and filter only to the client having the problem and look for a line highlighted in red which will quickly show everything blocked in the last few minutes. 

You can experiment with whitelisting domains that were blocked 1 by 1 until what you are testing works.",pihole,1649160095.0
4779,comment,1,i3fcz72,,"Thank you for this - I tried running ""pihole -t"" and the only thing that *might* show up is google-analytics.com. But I can't be sure because it doesn't always show up. It's not anymore specific than that. adam:ONE doesn't appear to have an android app.",pihole,1649118118.0
4780,comment,1,i6s642g,,"Did you ever track this down any farther? I just ran into this and I had to whitelist both of these in order to get the ""Reserve"" button to work.

* www.google-analytics.com	
* ssl.google-analytics.com

It wouldn't work for me unless they were both allowed.",pihole,1651321068.0
4781,comment,1,i6sbmjw,,"That is what I discovered, which is real shitty because it's opening my network up to a lot of Google bs.",pihole,1651324378.0
4782,post,0,twcfhq,Does exist any global blocklist for news/media sites? And timewasting editorialized articles of any x subject?,"About the editorialized articles:

Like you do google x general subject, and then the first results are Always time wasting articles which do say nothing or almost nothing, or before saying anything here's a long annectode, they often too devide the content in more pages, and make it more long as possible so they can add more ads

The same goes with videos, first results are always 1h long, and no content",pihole,1649104796.0
4783,comment,2,i3ei4fq,,I mean your best bet would just be to add news websites that are garbage as you come across them,pihole,1649105873.0
4784,comment,2,i3hudji,,"Steven Black has a list to block fake news. Take a look, see if it works for you:

https://github.com/StevenBlack/hosts",pihole,1649169538.0
4785,comment,3,i3eo3m4,,"Or just... Don't click that link. Having them on a Blocklist won't prevent them from appearing on a search, after all",pihole,1649108199.0
4786,comment,-1,i3etw4x,,"Then I guess that I'm in the wrong sub

I was looking for something that does remove all of that junk

It's pretty timewasting looking for something that can't be found Because firstly there's ton of shit",pihole,1649110542.0
4787,comment,1,i3epikr,,Well yeah that too. But you might forget or just click the link without looking at the website. At least a blocklist would have a list for you,pihole,1649108760.0
4788,post,2,twas64,Still error during updating to pihole 5.9.1,"Hey, it's me again, with the same problem. After using all of the commands i got from [this](https://www.reddit.com/r/pihole/comments/tvat5x/comment/i38e94b/?utm_source=reddit&utm_medium=web2x&context=3) comment, i still get the same error code after running 

sudo pihole -up

really the only difference in commands that i used was

    sudo rm -rf /var/www/html/admin

instead of 

    sudo rm /var/www/html/admin

since I'm using raspberry pi 3 with raspbian, and i needed it to remove directory and files within it.

But back to the error message, it says (copied):

    [i] Checking for updates...
    error: inflate: data stream error (invalid code lengths set)
    fatal: packed object ec3a5c29897642fa28ab15ca14c2e4c37ee00865 (stored in .git/objects/pack/pack-fc992ac564947708799b7f4aea7198142a1de8ce.pack) is corrupt
    fatal: the remote end hung up unexpectedly
    error: inflate: data stream error (invalid code lengths set)
    fatal: packed object ec3a5c29897642fa28ab15ca14c2e4c37ee00865 (stored in .git/objects/pack/pack-fc992ac564947708799b7f4aea7198142a1de8ce.pack) is corrupt
    
      Error: Remote revision could not be obtained, please contact Pi-hole Support
      Additional debugging output:
    On branch master
    Your branch is behind 'origin/master' by 1 commit, and can be fast-forwarded.
      (use ""git pull"" to update your local branch)

Maybe I'm just dumb, but i don't know what to do. Please help, much appreciated.",pihole,1649100775.0
4789,comment,1,i3ec7x2,,Did you do what the error message recommended?,pihole,1649103656.0
4790,comment,1,i3ecp9m,,"The error message said to contact pihole support, and if you are talking about git pull, yeah I don’t know how to use it.",pihole,1649103834.0
4791,comment,1,i3ecxhr,,"Open a terminal, type in: git pull

Maybe you have to do it with root permissions, try first wirhout",pihole,1649103920.0
4792,comment,1,i3eddip,,"Ok, I’ll try it tomorrow, thanks for help :)",pihole,1649104087.0
4793,comment,1,i3ef0pi,,"Maybe this can help:  
[https://discourse.pi-hole.net/t/new-kind-of-error-updating-to-v4/11506](https://discourse.pi-hole.net/t/new-kind-of-error-updating-to-v4/11506)",pihole,1649104705.0
4794,post,5,tw7s2i,Is there a way to safely access my Pi-hole from outside my LAN without a VPN?,"I don’t want to use Pi VPN because I’m having trouble getting it to work.

I read that forwarding port 53 is dangerous because attackers can take advantage of it, but is there a way to only allow connections from a certain IP address and block everything else? If so, would that be safe?

Or is there a Pi-hole alternative that I can access from anywhere?",pihole,1649093415.0
4795,comment,11,i3dmfvd,,VPN is the only secure/safe way. There is a good guide here for the setup: https://blog.crankshafttech.com/2021/03/how-to-setup-pihole-pivpn-unbound.html,pihole,1649093849.0
4796,comment,7,i3eqhwh,,I use Tailscale to access mine. I wrote a bit about it here. https://pilab.dev/pi-hole-upgrades,pihole,1649109149.0
4797,comment,5,i3erxmj,,"Tailacale makes it a breeze. All you need is to configure is a subnet route which is a single line command. 

It's really the easiest way.",pihole,1649109730.0
4798,comment,2,i3dmt1e,,"I use a router with built in vpn support so I can remotely log into my network. Then can view and configure the pihole. But I have a strange bug where I can’t browse the rest of the internet using the pihole for ad blocking remotely. 

It can be done, but it isn’t worth the effort to me. 

Port forwarding a specific IP maybe safer but won’t help if your remote IP changes ever.",pihole,1649093991.0
4799,comment,1,i3dqnjt,,"What is your internal network addresses? Looking at the phone.conf file you have the dns as an address in the wireguard network....when I check my setup I have this as pointing to my pihole using its internal address. 

Only port forward used is the UDP for wireguard.",pihole,1649095440.0
4800,comment,1,i3dskvo,,"I can see logging into servers, Unifi controllers, cameras, and thermostats, but for the life of me, why would anyone want to access PiHole from the outside? Why would you put your DNS server in a potentially dangerous path (port forward)?

Is it a ""monitoring"" thing? Is it a parent thing? Is it playing with a new toy thing? Or is it a ""I have nothing to do with my life thing""?",pihole,1649096186.0
4801,comment,1,i3dvq5w,,VNC viewer/server,pihole,1649097392.0
4802,comment,1,i3dybze,,You can always setup a ssh connection right? that should be safe enough.,pihole,1649098391.0
4803,comment,1,i3dyngp,,A problem is that when you (your phone) is outside your LAN you have no idea what your IP address may be. You can restrict 53/udp to an IP or a range on your home router/firewall usually but the possibilities are practically endless which means no real security.,pihole,1649098516.0
4804,comment,1,i3e3qwn,,"There’s a few options.

- one is for the client to have a permanent VPN connection into your home, and set your DNS server to the private IPv4 or ULA IPv6 address of the pi-hole

- or don’t host the VPN server yourself and both client and DNS server connect to the same cloud VPN service, same concept

- another way is to set up your own DoH server (listening on TCP 443, either IPv4, IPv6 or both) and use a special secret url to access it: reverse proxy that url —> local DNS server

- third way is to not use your pihole and use an ad-blocking DNS server like AdGuard/etc",pihole,1649100473.0
4805,comment,1,i3fso4r,,[Zerotier](https://www.zerotier.com),pihole,1649124963.0
4806,comment,1,i3fu5na,,"I think theres a way to use ssh connection to port forward. But you would have a hard time getting that to work on phones.

I also read a post about pihole as a private dns. That might be helpful",pihole,1649125620.0
4807,comment,1,i3fudcx,,PiVPN is the easiest method. What are you having trouble with? Did you have a DDNS set up? Openvpn or wireguard?,pihole,1649125716.0
4808,comment,1,i3fvzne,,"How about using DNS over TLS on Android, or DNS over HTTPS for iPhone, Windows, and others? Not the simplest to setup, but worth it IMO. I use the former on my Samsung phone via private browsing and can't live without it.",pihole,1649126453.0
4809,comment,1,i3gr448,,No,pihole,1649146143.0
4810,comment,1,i3gtt4a,,"i have mine exposed via Traefik.

I run multiple services which are accessible via the internet. All services run in containers behind traefik.

Traefik uses port 443 for it's communication from outside while my containers have their ports exposed to traefik ( so no need to open ports on your router except for port 443 or 80 if your prefer ).

For example i've exposed port 53 from pihole to traefik so i can use DNS inside my network.

On traefik i've made a port 853 which routes all traffic destined for pihole to the right container. so it goes from: outside (port 443) -> traefik (port 443 to 853) -> pihole (port 853 to 53) and with that i can route traefik from outside to the inside without exposing internal ports to the outside (all my ports are exposed to traefik so when traefik picks up a request it get's routed to the right container via a router -> service -> loadbalancer port. and the loadbalancer port from traefik is effectively the port of your container which you want to expose.

&#x200B;

i can get to my pihole via the admin portal, or use private DNS (android) on my phone so i can check all my dns queries within pihole. Everyone can effectively now use my pihole from outside (as a DNS over TLS server) but it can't be used as a open resolver because it's only accessible via three urls. DNS over TLS url, DNS over HTTPS url and the admin portal",pihole,1649148448.0
4811,comment,-2,i3dmwe0,,"I tried following a similar guide, but nobody knows the solutions to the problems I’m having :/",pihole,1649094026.0
4812,comment,1,i3dozzm,,"I’d be fine having to update the whitelisted IP if it changes. I just wanna be able to connect to my Pi-hole lol.

Do you know how I would set it up to only forward certain IP addresses? Is there something I can install on my Raspberry Pi? Because afaik my router doesn’t have that feature",pihole,1649094807.0
4813,comment,1,i3dqmp9,,The issue of no internet when connected to the VPN is not a bug. You need to make an entry in the configs to all internet traffic. Sadly I’m not an expert to assist you.,pihole,1649095430.0
4814,comment,1,i3drr1t,,"Not sure if this is what you’re asking, but my network uses 10.0.0.x . Idk why my DNS server is set to 10.6.0.1. It just did that automatically",pihole,1649095866.0
4815,comment,1,i3dtaui,,"Kind of a mix of the last 2 lmao. It would also be nice to not see ads even outside my house. 

But I’m not going open up the port unless I’m sure I can do it safely. That’s why I’m asking here",pihole,1649096460.0
4816,comment,1,i3e0f2o,,"That's a front end for the desktop, but is not a port 53 path.",pihole,1649099202.0
4817,comment,1,i3e0x1s,,Can’t I just use a website like whatismyipaddress.com to find my IP and forward that? Also do you know how I would restrict it to a certain IP(s)? I’m using an xFi gateway and I don’t see anything in the settings app. Is there a way I can restrict it on the Pi?,pihole,1649099401.0
4818,comment,2,i3dnlgd,,What problems are you having?,pihole,1649094285.0
4819,comment,1,i3dpj8e,,"I think you would want to do this on the router level. Otherwise your still sending all traffic to the pihole. So I doubt it would be much safer. 

I can tell you that a Luxul epic 3 won’t work for what you want to do.",pihole,1649095011.0
4820,comment,1,i3e7cpy,,"10.6.0.1 is localhost, which is your Pi with pihole on it.this is fine. It may have a local IP like 10.0.0.x too.",pihole,1649101825.0
4821,comment,1,i3eooof,,"All they need is access without vpn, VNC will give it to them",pihole,1649108429.0
4822,comment,2,i3e7l8a,,"You can confit iptables for this. There was a thread about this yesterday with somebody who uses a VPS.
But I'm sure we can get the VPN going to work, I also wrote in your other thread.",pihole,1649101912.0
4823,comment,1,i3eryfp,,"So say you are your local coffee place, or just cellular and you visit [whatismyipaddress.com/](https://whatismyipaddress.com/) .  Yes that will tell you your current IP address. With that you've have to ""go back"" to your home network and filter to allow \*that\* address and remove others. Not practical at all. How would you get back? SSH from your phone - so another port open to the 'net?

Sorry no information on xFi gateway, but you could restrict on the Pi with iptables directly or with ufw. I'm 100% with u/Repulsive_sherbert83 \-- let's get your VPN working.",pihole,1649109738.0
4824,comment,-1,i3do8nc,,"https://www.reddit.com/r/WireGuard/comments/t87y21/unable_to_complete_handshake_when_connecting/

https://www.reddit.com/r/chromeos/comments/tk4sqk/does_this_menu_work_for_connecting_to_a_wireguard/

I’d rather not use a VPN just because of the issues I had with it",pihole,1649094526.0
4825,comment,1,i3dquxr,,"But if the Pi doesn’t respond to any other IP address, the port would still appear as closed right? I think WireGuard does something similar if you don’t provide the right keys",pihole,1649095518.0
4826,comment,3,i3erfcw,,Does VNC port DNS traffic?  I don't think it does - all VNC will provide is access to the Pi itself. Am I missing something?,pihole,1649109528.0
4827,comment,1,i3exwbt,,"this one:  
[https://www.reddit.com/r/pihole/comments/tv60js/comment/i3a0osy/?utm\_source=share&utm\_medium=web2x&context=3](https://www.reddit.com/r/pihole/comments/tv60js/comment/i3a0osy/?utm_source=share&utm_medium=web2x&context=3)",pihole,1649112226.0
4828,comment,5,i3dq7mj,,"When you can't connect to internal stuff, are you trying by IP or by DNS name?

Do you have any firewalls runni g that would block traffic?",pihole,1649095268.0
4829,comment,1,i43q14c,,"No, but they could then access their pi hole through the pi itself",pihole,1649550670.0
4830,comment,0,i3ds6qa,,"I think it’s by IP. Like I try connecting to Pi-hole at 10.0.0.246 or my router at 10.0.0.1 and it doesn’t work.

I disabled Advanced Security on my network so I don’t think a firewall is the problem",pihole,1649096034.0
4831,comment,5,i3dv7ci,,"You may need to set a forwarding rule in your WG config this is from mine, change eth0 to whatever your network interface is called, and %i with whatever interface your wireguard is (wg0/etc):

    PostUp = iptables -A FORWARD -i %i -j ACCEPT; iptables -A FORWARD -o %i -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
    
    PostDown = iptables -D FORWARD -i %i -j ACCEPT; iptables -D FORWARD -o %i -j ACCEPT; iptables -t nat -D POSTROUTING -o eth0 -j MASQUERADE

\-edit- this may help https://www.cyberciti.biz/faq/how-to-set-up-wireguard-firewall-rules-in-linux/",pihole,1649097188.0
4832,comment,1,i3dyv39,,Ok I’ll try that,pihole,1649098600.0
4833,comment,1,i3pbgs5,,"The debug log says

\[OK\] Iptables MASQUERADE rule set

Does that mean the forwarding rule is already there?",pihole,1649292672.0
4834,comment,1,i3pdxwd,,"Hmm...
Looks like it, though now this is getting a little further away from what I'm familiar with.",pihole,1649293792.0
4835,post,50,tw4nxo,Appropriate place to submit a feature request?,"Where is the proper place to submit a feature request?  I'd like to be able to view the dates a domain was added to the whitelist/blacklist and when it was edited.  I know this information exists in the database, and it would be helpful for this information to be populated in the admin portal.",pihole,1649085784.0
4836,comment,23,i3d3tqg,,https://discourse.pi-hole.net,pihole,1649086608.0
4837,comment,10,i3d61u7,,"For what it's worth, I created my own block list in Gitlab and it has version control on it.",pihole,1649087490.0
4838,comment,9,i3d4zhl,,"Thank you!  I'll submit it there and bookmark it for future use.

You guys are the best!",pihole,1649087070.0
4839,comment,3,i3ejuj1,,How do you do it?,pihole,1649106529.0
4840,comment,6,i3eqmb6,,"1. Created a new project in your preferred repository
2. Create a txt file that contains a list of blocked sites
3. Add the raw text data as a source to the blocked lists group management ad list.",pihole,1649109200.0
4841,post,3,tw2sal,New ISP & new router coming soon - what do i need to do to keep my PiHole/network as it is?,"Hi all. i've had my pihole sittin' there doing its thing for a couple of years now (i do update it...). I'm about to upgrade to fibre broadband with a new ISP & with a new router on the Gigaclear network. I have  a modified internal network range and have static IP addresses for all of my devices - computers, tablets, phones, TV, OSMC/Kodi box, etc., that the PiHole filters and works its blacklist/whitelist on.

I'd like to be able to minimise the disruption of switching to a new router. Is it as simple as logging in to the new router and setting it up the same as my previous one - IP address & range, etc. or will I need to prepare more to get the PiHole to function as it currently does?

Just a bit nervous about having a tonne of work to do to get things back to normal.

Thanks!",pihole,1649080975.0
4842,comment,5,i3d04gm,,"To be clear on terminology, keep in mind that the modem, router, and ONT are separate things.  Some OEMs will combine them into one device, but they are still separate technology performing different functions.

The easiest way to keep your network the same is to use your own router.  So changing ISPs will not have any effect on your internal network.  For instance if you have your own router, when you change from a cable ISP to a fiber ISP you will swap the cable modem for the fiber ONT, reboot your router, log into the router to provide whatever login info your ISP might require, and then you should be back in business without having to setup your network all over again from scratch.

Now if you are currently using your ISPs router you really don't have a choice other than to document your current network setup and start all over.",pihole,1649085105.0
4843,comment,1,i3css2z,,"Document how you setup your existing router, then setup the new router the same way, ensuring that it hands out pihole as the DNS server 

:)",pihole,1649082054.0
4844,comment,1,i3d5t7l,,Change the dns…?,pihole,1649087395.0
4845,comment,4,i3dn5jo,,Wireless access point is also a separate function often included in the router.,pihole,1649094122.0
4846,comment,2,i3ecwa2,,"yeah, my current, and own, modem/router is about an 8 or 9 year old model, so for updates and security reasons I think I'll try to use the new one and document my current settings to input to the new one.",pihole,1649103908.0
4847,comment,1,i3cuh8t,,that's what i was hoping to hear. thanks for the confirmation,pihole,1649082771.0
4848,comment,0,i3ddura,,">c

In the supplied router, yes.",pihole,1649090542.0
4849,comment,0,i3eceof,,"more than that. I use 192.168.254.x as my network address range. don't know why anymore - mists of time and all. so there's more to it than just a dns change.

mostly I'm asking to make certain that I'm not missing anything obvious or important so that I don't actually have to set it all up again, but can merely transition.",pihole,1649103726.0
4850,comment,1,i3ed0m4,,thanks. I'd forgotten about that. Will repurpose the old router as an access point.,pihole,1649103952.0
4851,comment,2,i3eg4hq,,"With all the stuff in the news lately about router vulnerabilities and such you definitely want one that is still receiving updates.  Just an FYI, you could look into a 3rd party OS for your router such as Merlin, ddwrt, and fresh tomato.  Then your current one would at least be getting security patches.  

Good luck.  Hopefully the new ISP gateway will have the functionality you need to replicate your current setup.",pihole,1649105124.0
4852,comment,1,i3di9bl,,Obviously,pihole,1649092231.0
4853,comment,1,i3f0h2m,,It’s pretty obvious what you need to do,pihole,1649113213.0
4854,comment,0,i3diuqm,,"Hey, this is Reddit, remember? Can't be too careful.",pihole,1649092460.0
4855,comment,0,i3gtn6c,,"I'm not a novice at setting up and maintaining a network, but I'm far from an expert, which is why I posted here - to gather the collective intelligence and knowledge of people who know more than me in order to help me.",pihole,1649148304.0
4856,comment,1,i3dv2w1,,You would think if they set it up once they could set it up again,pihole,1649097141.0
4857,post,32,tvw9h1,"[OT] Is there anything out there like Pi-hole, but for home/enthusiast router functionality?","I understand there are distros like OpenWRT and pfSense, but is there any distro-agnostic software that performs router functions (and web GUI) like Pi-hole?

I'm personally running OpenWRT already, but find it pretty flawed and unpolished. Finding other router distros that run on my hardware (Orange Pi w/ Rockchip 3328) is, as far as I can tell, impossible.",pihole,1649057943.0
4858,comment,18,i3bwrta,,"Far from impossible, it's just one of those things that configuring Linux firewalling isn't overly complicated so pretty much people buy OpenWRT capable routers and run that, 9r just configure their firewall on the command line.  A simple nat firewall is like 3 lines of shell code.",pihole,1649062663.0
4859,comment,9,i3cfksl,,"[RaspAP is feature-rich wireless router software that just works on many popular Debian-based devices, including the Raspberry Pi.](https://raspap.com/)",pihole,1649075808.0
4860,comment,15,i3c8fng,,"Edit to make it clear what i mean by LAN port (one ethernet)

So you want to run a router on a device with a single LAN port and lowpower SOC?

What is it exactly you are trying to achieve that OpenWRT/PFsense does not provide?

Performance is probably going to suck and with only one ethernet port you would need some ""strange"" networking or use a usb ethernet adapter. 

Neither would be my recommendation.",pihole,1649071617.0
4861,comment,3,i3cb72n,,Opnsense,pihole,1649073333.0
4862,comment,2,i3cb35g,,"Vyatta? Or if the chipset you’re referring to is compatible, VyOS.",pihole,1649073267.0
4863,comment,2,i3daqdc,,"Still having ""defects"" OpenWrt, I choose it.",pihole,1649089338.0
4864,comment,2,i3de6kg,,"Take a  look at the, https://thepi.io/how-to-use-your-raspberry-pi-as-a-wireless-access-point/.",pihole,1649090667.0
4865,comment,2,i3eb9jt,,May we know what kind of workloads you are running on your router that's not good enough for OpenWRT?,pihole,1649103298.0
4866,comment,4,i3cjewg,,"Try DietPi, there are so many packages available that you can probably find something that'll work for you during the setup process, or after.

https://dietpi.com/",pihole,1649077793.0
4867,comment,2,i3bwyjk,,There is a debian image for your device. This should cover all your needs.,pihole,1649062824.0
4868,comment,3,i3dbvkz,,">I'm personally running OpenWRT already, but find it pretty flawed and unpolished

Wow. Introduced in 2004. You would think that in 18 years the flaws would have been worked out by now and the product more polished. I hope you'll communicate your observations to the clearly unqualified and incompetent maintainers of such a ""flawed and unpolished"" offering . They need to know that the product does not meet your standards. They got some learnin' to do and you seem like just the right person to let 'em know what's what.",pihole,1649089783.0
4869,comment,1,i3ccuz1,,Why do you not wish to run Pi-hole on your Orange Pi?,pihole,1649074298.0
4870,comment,1,i3df0tl,,Yes. DD-WRT.,pihole,1649090987.0
4871,comment,1,i3dg535,,If blokada made a router........,pihole,1649091413.0
4872,comment,1,i3ec6gs,,https://www.apu-board.de/produkte/apu2e0.html,pihole,1649103640.0
4873,comment,1,i3ededy,,Vyatta and the open source fork VyOS. It's actually what the Ubiquiti Edge Router's were based off as well. It's all CLI unless you get a third party web interface that creates the files for you.,pihole,1649104096.0
4874,comment,2,i3f2orr,,Purchase a $15 USB 3.0  Ethernet dongle. Plug the dongle into a 3.0 port. It will send packets around 850mbs.  The USB is found automatically and works fine.,pihole,1649114021.0
4875,comment,-8,i3cmv5i,,"> So you want to run a router on a device with a single LAN port and lowpower SOC?

What is so weird about this? Every router I have ever owned had a single LAN port. It is not a switch, it is a router. You plug that single LAN port into your switch.

> Performance is probably going to suck and with only one LAN port 

This makes absolutely no sense. How does have a single LAN port impact performance?",pihole,1649079443.0
4876,comment,1,i3f30ba,,Or [here.](https://github.com/JVital2013/pihole-router),pihole,1649114143.0
4877,comment,2,i3gd31b,,"As a project for fun, sure perhaps. But else.. why?",pihole,1649135576.0
4878,comment,8,i3cqj8h,,">What is so weird about this? Every router I have ever owned had a single LAN port. It is not a switch, it is a router. You plug that single LAN port into your switch.

you know exactly what i mean. But ill edit it for your benefit.

There is only ONE Ethernet/RJ-45 port on most of the orangepi models - if you tell me that all routers you have ever used only have one ethernet port - you are lying.

The single LAN port impedes performance because ALL traffic will need to be routed through it, unless you have layer 3 switches which i very much doubt since he is trying to use a orangepi as router. But again this is not really what the point of my performance comment was about, but rather that the orangepi is pretty weak in routing performance if you wish to use any advanced features.",pihole,1649081097.0
4879,comment,1,i3gebny,,Routers with only one Ethernet port are kinda worthless since all the packets come in and go out of the same wire. Just set the IP address to the input is in snoop mode and you can read the packets.,pihole,1649136374.0
4880,comment,-8,i3csvm7,,"> There is only ONE Ethernet/RJ-45 port on most of the orangepi models - if you tell me that all routers you have ever used only have one ethernet port - you are lying.

Most good ones. Good routers assume you also have a switch. So they don't waste money and space putting ports on the router that will rarely be used. Even a high end Cisco Catalyst 8200 only has 2. 

 > The single LAN port impedes performance because ALL traffic will need to be routed through it

This statement confirms you have no idea what you are talking about and are simply making assumptions based on a little knowledge.

So? No matter how many downstream ports you router has, it only has one upstream port. Everything eventually goes through one port regardless. And it is no a performance issue.

OP's device is no a high-performance router. But it's problems having nothing to do with the number of LAN ports.",pihole,1649082094.0
4881,comment,8,i3cv2hj,,"> Most good ones. Good routers assume you also have a switch. So they don't waste money and space putting ports on the router that will rarely be used. Even a high end Cisco Catalyst 8200 only has 2.
> 
> 

no, most have a LAN and a WAN port, does the Pi have TWO ethernet ports? One for WAN and one for LAN?",pihole,1649083018.0
4882,comment,3,i3cwsrw,,"You keep insisting on misunderstanding me. sorry im not biting. 

If you insist that all routers you have ever used only had ONE single rj45 port on the entire device you are outright lying its that simple, even a basic ubnt usg-3 has 3 ports 1 WAN +1LAN+1 wan2/voip. All the official pfsense boxes has atleast 3 ports, the cheapest sonicwall has 5. 

Have fun debating semantics with someone else, i wont be participating.",pihole,1649083736.0
4883,comment,-10,i3cvw8u,,"We are not discussing the WAN port. That is sort of required for a router to be a router. 

But a router only needs 1 LAN port.",pihole,1649083364.0
4884,comment,0,i3d0g5v,,"1 LAN port is all you ever need.

Of course any router needs a WAN port too or it is not a router.

> even a basic ubnt usg-3 has 3 ports 1 WAN +1LAN+1 wan2/voip

That is a single LAN port. 

Adding LAN ports to a router does not make it better. It is usually the cheapest routers that have multiple ports because people who get those don't have a separate switch.",pihole,1649085239.0
4885,comment,6,i3cwxym,,so you are ignoring that Pis only have one ethernet port on purpose?,pihole,1649083794.0
4886,comment,3,i3dbejr,,"yes, but i have clearly already pointed out several times now, i was referring to one, 1, uno ethernet/RJ-45 port.

and yes it IS possible with some artificial ""magic"" to run such a device using vlan and a gateway elsewhere on the network. But this is what i was referring to when i wrote ""strange"" networking. But again you seem intent on misunderstanding everything, so ill just leave the thread entirely - have an excellent day, im sure you feel better now.",pihole,1649089599.0
4887,comment,-5,i3d0mz9,,So? We are talking routers here. A Pi is a little computer. It makes for terrible routers without additional ethernet via USB.,pihole,1649085316.0
4888,post,6,tvvgou,DNS through a secondary LAN in a LAN,"This is my Network setup at the moment:

https://imgur.com/a/lN8y0U9

As you can hopefully see, the eero is acting like a router creating its own lan within the main router's lan. I'm running a pihole DNS instance in eero LAN and would like to make it the DNS server of the WHOLE LAN under the main router. To do so, I did the following:

Edited primary DNS on main router to IP of eero that main router assigned

Port forwarded tcp/udp 53 to the pihole server on the Amazon eero router.

The requests work for a few second and after that it just stops working giving an error such as DNS not resolved or dns_probe_possible, it appears to be an error in the way forwarding is being done as it starts to fail after a few seconds. Any ideas would be super helpful

I really don't know how to go about this any farther, and this is all that my own research could allow me to do.

Looking forward to your responses, 

Thanks",pihole,1649054608.0
4889,comment,2,i3bncbl,,"> the eero is acting like a router creating its own lan

Any special reason you need that setup as it is?",pihole,1649054720.0
4890,comment,2,i3bx7hq,,"This makes absolutely no sense, wire the eero on the LAN side not the WAN side and keep it all on the same subnet.",pihole,1649063040.0
4891,comment,1,i3bz5ax,,I dont want to to keep in same subnet,pihole,1649064706.0
4892,comment,1,i3cglm9,,You port forward port 53 on eero to the PiHole and then it would work.,pihole,1649076350.0
4893,comment,0,i3bni15,,Because my parents don't want me messing with the main router. That's why😕,pihole,1649054842.0
4894,comment,1,i3cg5ti,,"At thi point, probably the best thing to do, although i must consider other syggesstionsoffered",pihole,1649076119.0
4895,comment,1,i3cefod,,"With your restriction of not ""messing with the main router"" only the devices on the eero LAN can use Pi-hole. 

Why do you want all devices on the main router to use Pi-hole if your parents (apparently the router owners and payers for the internet service?) don't want that?",pihole,1649075188.0
4896,comment,1,i3cf7tz,,"You come here with a questionable network configuration asking us to help. But when suggestions are offered you seem to have issues with everything.

Here is your solution. Buy a router that is VLAN capable, create 2 VLANs, one for your parents and one for you. That will allow PiHole to be used across the network and still keep you all separated.

I'm sure you'll have an issue with this solution, also.",pihole,1649075615.0
4897,comment,1,i3cxqht,,I did. It works for 10 seconds and then all requests judt outright fail,pihole,1649084118.0
4898,comment,2,i3bnobl,,"But you're already doing that.

>Edited primary DNS on main router to IP of eero that main router assigned

Not sure what the routers support, but it should be possible to simply do that with routing, and set the 10.0.... pihole as a DNS server.",pihole,1649054976.0
4899,comment,1,i3cdb3u,,"You don't need to add a second router.  

Connect your Pi-hole and your devices to the main router. Then manually map your devices to use Pi-hole as their DNS server.  No changes to any routers required, and you don't affect any other devices on the network.",pihole,1649074558.0
4900,comment,1,i3cep4f,,"They also want the adblocking functionality, but don't want me to be messing with assigning ips on the main router. Because i also have other services to run, my dad decided to get me my own router for this specific purpose",pihole,1649075333.0
4901,comment,2,i3cfoai,,I will consider it. I didn't mean to come off as an inflexible  person. I apologise for this. I have looked and will look into all the solutions everyone has offered. Thankd,pihole,1649075860.0
4902,comment,1,i3csrxk,,the eero might do NAT. But maybe it is a NAT implementation which does not work in this case?,pihole,1649082052.0
4903,comment,0,i3bnspe,,"It doesn't. If you look at the network diagram, it is not possible for client 2 to communicate with dns server. If I out the the 10.0.0.23 server on main router it wouldn't go anywhere",pihole,1649055070.0
4904,comment,1,i3cdq9y,,I have 15 devices on which i have ti chnage DNS and that is tedious. And i can't just return my router,pihole,1649074797.0
4905,comment,1,i3cf7vt,,Get a separate Pi-hole for their router.,pihole,1649075616.0
4906,comment,5,i3bo0px,,"Yes, it won't work with the current setup.

You need to add a route which tells your 192.168.. clients how to reach the 10.0... subnet via the Eero as a gateway.",pihole,1649055246.0
4907,comment,1,i3cdxy8,,Got it. Your diagram showed two devices including Pi-hole.,pihole,1649074915.0
4908,comment,1,i3cfb83,,Unfirtunately i don't have the facility to dimply buy another pc or raspberry pi 🙄,pihole,1649075666.0
4909,comment,1,i3bpx47,,"For the record I have a similar setup, because A) the ISP box controls the ISP's TV decoder, and B) rules-as-written support won't help if I remove the ISP box.  
I consider ""clients on main LAN use ISP-DNS instead of Pihole"" as a safety feature in case Pihole is down so I' setup'd like OP but on purpose. At least I have some minimal experience...  

An issue that I see is that the Eero network is behind double NAT, which means that UPnP support won't work (for example, gaming), because the main router won't get requests anymore and the ports there will stay closed.  
[EDIT] UPnP is a complicated question on *two* debates, ""security vs usability"" and ""needs of one person vs needs of a group"", so [here's a lengthy explanation](https://www.reddit.com/r/HomeNetworking/comments/cwmz71/comment/eydyyj9/). In short, when gaming ONE person needs to support UPnP to be able to host the game, else everybody needs to have something else that often doesn't work. [/EDIT]  

When you will try to fix that, you will likely set the ISP router to send all non-forwarded traffic to the Eero (Called ""DMZ host"" at my ISP), and at this point there will be a huge security issue. Because Eero is forwarding port 53, so by fixing the UPnP support OP will also turn Pihole into an open resolver.  
So, I would redo the design and assume the ""main router"" is as unsecure the internet is.  

If OP wants UPnP for dynamic hosting, then they can't provide unlimited DNS access from an unsecure network. Wait, accessing Pihole from the Internet has been already solved, right?  
It may be overkill, but I would look into setting up a VPN in Pihole, opening the VPN's port into Eero instead of DNS, and installing the VPN on the clients (they then connect to 192.168.1.xxxx eero)  

1) Because it's a VPN, later you can open traffic from the Internet and be safe, as port 53 is closed. (And have VPN-access from online, assuming there's no CG-NAT.)  
2) You need to install a VPN on the client... but you  already needed to setup a route in each client anyway, and said route won't be needed because the VPN already redirects DNS traffic to Eero.  
3) You're more likely to encounter Pihole users with PiVPN than a double-LAN, so maybe easier to ask for help?    
4) At least with OpenVPN, it's easier to connect/disconnect than changing DNS settings each time (and  it will avoid bad surprises the day that extra route cause issues. At least the VPN is user-started)  

Con : you probably need to setup the VPN to use 172.16-31.x.x as a virtual range, because you already use both 192.168.x.x and 10.x.x.x",pihole,1649056770.0
4910,comment,1,i3ce4fr,,Ik but that was just for demonstration. I should've been clearer sorry,pihole,1649075017.0
4911,comment,1,i3cg381,,This seems like a viable option,pihole,1649076080.0
4912,post,0,tvsvuy,Does pihole work for blocking Instagram app ads?,Does pihole work for blocking Instagram app ads?,pihole,1649045452.0
4913,comment,9,i3bakoz,,No.,pihole,1649046023.0
4914,comment,1,i3cqz1f,,Use Instagram lite,pihole,1649081289.0
4915,comment,1,i3duwmf,,Try Instander,pihole,1649097073.0
4916,post,0,tvraaf,Pi-Hole seems to be working but it’s really not.,"Hey, title says pretty much all
I did a post on the official pi-hole forum (in French tho) explaining in details my issue but I'll try to explain it in English to reach out more people. And it kinda evolved since…

Starting by my internet box, I can't set a custom DNS on it so, the solution was to reduce its DHCP range to only 3 addresses (one for the box in itself and the other one for TV decoder). So, my box's DHCP only have 192.168.1.1 .2 and .3 in its range.
My Pi-Hole tho, has from 192.168.1.10 to 192.168.1.250. All my devices are connected to my pihole except for my tv decoder and pihole itself which are in the range of my box.

everything works great, lots of domains on lists, some queries are blocked but 2 things : i can’t load pages, like, any at all so yeah i don’t see ads but i don’t see anything so… and second even when i could load them, ads were still showing

sorry if i explain things bad, it’s my first time doing it and i’ll probably reinstall pihole again tomorrow from scratch.

and since it appears i can’t even upload a debug token, here it is : [https://pastebin.com/ZWidhYLT](https://pastebin.com/ZWidhYLT)

thx a lot for your time",pihole,1649040456.0
4917,comment,4,i3b1mvs,,"Your DHCP servers are offering IP's 1 and 3 as DNS servers, but Pi-hole is configured for IP 18. 

    *** [ DIAGNOSING ]: Name resolution (IPv4) using a random blocked domain and a known ad-serving domain
    [✓] pornoindirseyret.blogspot.co.nz is 0.0.0.0 on lo (127.0.0.1)
    [✓] pornoindirseyret.blogspot.co.nz is 0.0.0.0 on eth0 (192.168.1.3)
    [✗] Failed to resolve doubleclick.com via a remote, public DNS server (8.8.8.8)

    *** [ DIAGNOSING ]: Setup variables
    PIHOLE_INTERFACE=eth0
    IPV4_ADDRESS=192.168.1.18/24

Run `pihole -r` and select the ***reconfigure*** option to configure Pi-hole for the active ethernet IP.

Also note that your last two adlists starting with the following are not adlists. You should remove them. 

    https://www.youtube.com/redirect?",pihole,1649041323.0
4918,comment,4,i3bf05n,,Don’t have 2 working dhcp servers in your network it will mess things up. Turn dhcp off on your router.,pihole,1649048747.0
4919,comment,1,i3cai5q,,"well, when running pihole -r my prompt does not let me interact with anything, it’s just telling me infos and checking for stuff

    [✓] Update local cache of available packages [i] Existing PHP installation detected : PHP version 7.4.28
    [✓] Checking apt-get for upgraded packages... up to date!
    [i] Checking for / installing Required dependencies for OS Check... [✓] Checking for grep [✓] Checking for dnsutils
    [✗] Retrieval of supported OS list failed. dig failed with return code 10. Unable to determine if the detected OS (Raspbian 11) is supported Possible causes for this include: - Firewall blocking certain DNS lookups from Pi-hole device - ns1.pi-hole.net being blocked (required to obtain TXT record from versions.pi-hole.net containing supported operating systems) - Other internet connectivity issues
      https://docs.pi-hole.net/main/prerequesites/#supported-operating-systems
    
      If you wish to attempt to continue anyway, you can try one of the following commands to skip this check:
    
      e.g: If you are seeing this message on a fresh install, you can run:
             curl -sSL https://install.pi-hole.net | PIHOLE_SKIP_OS_CHECK=true sudo -E bash
    
           If you are seeing this message after having run pihole -up:
             PIHOLE_SKIP_OS_CHECK=true sudo -E pihole -r
           (In this case, your previous run of pihole -up will have already updated the local repository)
    
      It is possible that the installation will still fail at this stage due to an unsupported configuration.
      If that is the case, you can feel free to ask the community on Discourse with the Community Help category:
      https://discourse.pi-hole.net/c/bugs-problems-issues/community-help/",pihole,1649072915.0
4920,comment,1,i3co6lf,,even if the range is different ?,pihole,1649080049.0
4921,comment,1,i3cco7y,,"    PIHOLE_SKIP_OS_CHECK=true sudo -E pihole -r

Did you run this command per the screen output?",pihole,1649074190.0
4922,comment,1,i3criqz,,"Yes, the DHCPs answer „fastest first“ so randomly. And the third one might get a failure „no addresses left.“",pihole,1649081525.0
4923,comment,1,i3f6g7o,,I have multiple DHCP servers on my network because I can’t change the dns settings on my modem so… I have my pfsense server connected to my modem.  Pfsense server is then connected to a separate router with Pihole and the rest of my network.  Problem solved.  You’ll need another router with the modem connected to that router via the WAN port,pihole,1649115494.0
4924,comment,1,i3chqy8,,"i just did and now it works just fine. Only issue is, i have to manually set the DNS in all of my devices, can’t it be automatic ?

EDIT : most of the ads are still shown, despite my 5mil domains blocked",pihole,1649076947.0
4925,comment,1,i3crsrl,,"well, my routers DHCP only have 2 addresses in its range, both are attributed permanently to my tv module and the pi
how can other devices could connect to it ? just curiosity",pihole,1649081641.0
4926,comment,1,i3cmmx8,,">	i have to manually set the DNS in all of my devices

Make the DNS assignment (the Pi-hole IP) for your network in your router DHCP settings. Then renew the DHCP leases and the whole network should be using Pi-hole.",pihole,1649079337.0
4927,comment,1,i3ct8zh,,A new client asks into the network. If the router‘s DHCP is faster it might respond „no addresses left“. I expect the client to ignore the second answer (and go into unconfigured state or tries autoconfig).,pihole,1649082250.0
4928,comment,1,i3cmvxd,,"my router doesn’t let me, that’s the point",pihole,1649079453.0
4929,comment,1,i3cn0xq,,"Then disable DHCP on the router and enable DHCP in Pi-hole.  You appear to have done this. 

From a connected client (and not via ssh to the Pi terminal) what is the output of the following:

`nslookup pi.hole`

`nslookup flurry.com`",pihole,1649079521.0
4930,comment,1,i3cs3ji,,"Did you check the following: there are two places for editing DNS server: a) the upstream DNS (where the router will ask) and b) the DNS distributed to clients via DHCP (somewhere in the „LAN“ or „home network“ section.

If both not available shut off the DHCP of the router and let Pihole‘s DHCP do the job for all dynamic clients.",pihole,1649081771.0
4931,comment,1,i3cngm7,,"Done, ads still showing

EDIT : new debug token

[https://tricorder.pi-hole.net/gctJRLPe/](https://tricorder.pi-hole.net/gctJRLPe/)

EDIT2: this is the output

############# ~ % nslookup pi.hole
Server:		192.168.1.3
Address:	192.168.1.3#53

Name:	pi.hole
Address: 192.168.1.3
    
############# ~ % nslookup flurry.com
Server:		192.168.1.3
Address:	192.168.1.3#53

Name:	flurry.com
Address: 0.0.0.0",pihole,1649079723.0
4932,comment,1,i3csc7h,,"yeah i can’t control any of the DNS within the routers settings, so i guess i have to let the pihole do the job on this part",pihole,1649081872.0
4933,comment,1,i3cxe0e,,">	ads still showing

The nslookup output shows that the client is using Pi-hole and Pi-hole is blocking domains as programmed.

Are you seeing ads in all sites or just some?  What browsers are you using and are they using secure or private DNS?

https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522",pihole,1649083977.0
4934,comment,1,i3cyezr,,"I can see ads on some sites, for instance [speedtest.net](https://speedtest.net) shows no ad but YouTube does. Haven't tested on much sites but I thought nearly 5mil domains blocked should at least block most of ads.

&#x200B;

Also I'm using OpenDNS

&#x200B;

EDIT: well, now that I have disabled my routers DHCP my TV doesn't work anymore. Looks like Pi-Hole doesn't care about tue MAC exception for the TV Module",pihole,1649084398.0
4935,comment,1,i3d4b4m,,">	speedtest.net shows no ad but YouTube does
>	I thought nearly 5mil domains blocked should at least block most of ads.

You won't be able to block YouTube ads with a domain blocker (Pi-hole, for example).",pihole,1649086802.0
4936,post,1,tvp9o2,Pi-hole not finding local domain for PTR lookups,"In my pihole-FTL.conf, I set `PIHOLE_PTR=HOSTNAMEFQDN`, and the pi-hole used to respond to PTR requests, as expected, with ""Pi-hole.lan"".  After having to reinstall the OS and pi-hole, I'm now getting ""Pi-hole.no_fqdn_available.""

I checked the documentation, and it suggests adding a config file inside /etc/dnsmasq.d/ with domain=lan or domain=#.  The former works, but with domain=#, DNS fails to restart, and in the Web UI, I get a warning of type `DNSMASQ_CONFIG` and message ""FTL failed to start due to must have exactly one resolv.conf to read domain from.""

Is there a bug here, either with pi-hole or in the documentation?  About a week ago I didn't have to add the custom config file, and pi-hole was automagically finding the lan suffix.  It's currently at the top of my /etc/resolv.conf.",pihole,1649034538.0
4937,comment,2,i3zepey,,"Your DHCP server tells clients what your domain is, Is pihole your DHCP server if not your results are expected.

As far as I know pihole will default to .lan if it's the DHCP I have no idea what router or DHCP server you are running",pihole,1649469835.0
4938,comment,1,i4c770b,,"Thanks for the reply.  My router is my DHCP server and hands out the .lan suffix.  This is also specified in the Pi-hole Web UI under Settings->DNS->Conditional forwarding->Local domain name.  And the top line of resolv.conf file is `domain lan`, so the Pi-hole *should* know its domain.

To the best of my knowledge, all the settings are the same after the Raspberry Pi OS/Pi-hole/Unbound re-install.  The only difference is that this time was a clean install of Bullseye instead of doing dist-upgrades from Stretch to Buster to Bullseye.",pihole,1649709241.0
4939,comment,1,i7rtye6,,I am on the same boat. Did you find a solution?,pihole,1651994585.0
4940,post,1,tvonq0,Conditional Forward: Some hostnames don't get resolved,"Hey there,

&#x200B;

I recently have set up Conditional Forwarding on my Pihole (running on a Rpi-4 docker) while some hostnames get resolved, others don't, they say as IP addresses.

&#x200B;

Any ideas why that may be happening?",pihole,1649032770.0
4941,comment,1,i3bfa9z,,I suggest to let pihole handle the DHCP too.,pihole,1649048931.0
4942,comment,1,i3emllt,,"Can you see a pattern there, for example only devices with static IPs doesn't get resolved or somehting like this?",pihole,1649107598.0
4943,comment,1,i3eq88b,,You forward them to your router? I've seen routers not to the best job with ClientID ... that might be the problem. Any way to see the names on the router?,pihole,1649109041.0
4944,comment,1,i3esjw9,,Not an option for me!,pihole,1649109982.0
4945,comment,1,i3eswi7,,"I haven't been able to identify any patterns. For instance. I have 2 iOS devices (iPhones) that don't have a static IP. I see their names on the router, however when I check Pihole, one of them is only an IP while the other gets resolved.",pihole,1649110129.0
4946,comment,1,i3esn7x,,"I am using a UDM Pro as my router/DHCP server!

&#x200B;

Yes, I am forwarding it to my router! And I see the cliente names in my router.",pihole,1649110020.0
4947,comment,1,i3eyqty,,"Ok I have one more idea: release and renew the IPs for this devices.

Other than that I have another idea for a dirty workaround. Assign the affected devices static IPs or static DHCP (DHCP reservation) and add the hostnames and IPs to the  `/etc/hosts` file",pihole,1649112574.0
4948,post,4,tvmnnf,Can't load videos in invidious using unbound.,"Hey all !

I recently heard about unbound and wanted to test it.
So I have a machine running pihole and unbound, and another machine running invidious.

I set DNS to my pihole on my modem, and set DNS to unbound in my pihole.
When I do that, everything seems to work fine (I have not tested everything I host though), except from invidious that loads, but won't play any video.

I tried adding cloudflare's 1.0.0.1 additional DNS in my pihole (https://imgur.com/0GIKwDH ). It works, but how can I be sure it will use unbound first and cloudflare when applicable (in this case, for invidious).

I'm pretty much ignorant about all this, so if anyone could enlighten me, that'd be greatly appreciated.",pihole,1649026947.0
4949,comment,3,i3a9euy,,">tried adding cloudflare's 1.0.0.1 additional DNS in my pihole (https://imgur.com/0GIKwDH ). It works, but how can I be sure it will use unbound first and cloudflare when applicable (in this case, for invidious).

Pi-hole will use whichever nameservers it has available, in any/no particular order, based on performance. It's hard to imagine a local Unbound instance ever not being the fastest responder.

If you want specific domains to hit a specific resolver you'll have to tackle that in dnsmasq configuration.",pihole,1649028167.0
4950,comment,1,i3bxpbg,,"Thank you for your enlightening comment.

I'll try to find some docs about dnsmasq :)",pihole,1649063473.0
4951,comment,3,i3cdsmn,,"https://thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html

This is the command you want:

    -S, --local, --server=[/[<domain>]/[domain/]][<ipaddr>[#<port>]][@<interface>][@<source-ip>[#<port>]]",pihole,1649074832.0
4952,comment,1,i3iaiek,,Thanks a lot !,pihole,1649175861.0
4953,post,1,tvi0ou,Still seeing my router as a client.,"I am still seeing my router as a client in the PiHole logs. 

Here is my setup:

Router: Asus RT-AC68U running Merlin

**Router Settings:**

DHCP: On

LAN > DNS 1: 192.168.1.2 (Primary PiHole)

LAN > DNS 2: 192.168.1.3 (Secondary PiHole)

Advertise router's IP in addition to user-specified DNS: Off

DNSFilter: Enable DNS-based Filtering: On (this is supposed to hijack devices with a hardcoded dns like smart TVs)

Custom (user-defined) DNS 1: 192.168.1.2

Custom (user-defined) DNS 2: 192.168.1.3


WAN > DNS 1: 192.168.1.2

WAN > DNS 2: 192.168.1.3

Connect to DNS Server automatically: No

Forward local domain queries to upstream DNS: No

**PiHole Settings:**

DNS Upstream: Cloudflare

Conditional Forwarding: 
192.168.1.0/24

192.168.1.1



Why is the router still showing up in the PiHole logs and not the host? Is this because of a hard coded dns?

Would setting dnsmasq on the router fix this?",pihole,1649015265.0
4954,comment,1,i39rog1,,"If you have the WAN router setting configured to use Pihole of course you'll see router-based requests going to Pihole :)

I.E. the router acts as a client when it check if it's up, to resolve NTP servers, to check if there are updates for Merlin etc.",pihole,1649020325.0
4955,comment,1,i39t143,,"Gotcha. 

I swapped it to Google. And I still see it listed as a client but I think it's just its keep alive checking as I only see cloud flare and Google checks. 

Although I do see some weird Netflix dns lookup being listed under the router. 

Is this because a hardwired device?",pihole,1649020902.0
4956,comment,1,i3a11ai,,That’s bc anything the dns filter is forcing out the lab dns will show as coming from your router instead of the device,pihole,1649024389.0
4957,comment,1,i3a1h5i,,"Well it's Netflix so it's gotta be either my Roku or LG TV. 

Both devices have their own entries though so yeah idk",pihole,1649024583.0
4958,comment,1,i3a1ldg,,Some dns entries may be hard coded and Merlin is forcing them through the router lab dns,pihole,1649024636.0
4959,comment,1,i3a3a4c,,"Is it as simple as looking at all of my devices and seeing which one isn't listed? 

The only Netflix I can think of is from: my shield, my tv. My roku. 


All of which have their own entry",pihole,1649025381.0
4960,post,2,tvezfo,Was the newest pihole update supposed to fix the issue with not being able to flush queries? Or is that planned for another release/component?,"Like the title states, just wondering when this is slotted to be fixed :-)

Before when I flushed queries, it would reset the dashboard and ""top clients"" and stuff.",pihole,1649007840.0
4961,comment,2,i393tum,,"The fix is in the development branch and will be included in our next release (5.10). 

https://github.com/pi-hole/pi-hole/issues/4611",pihole,1649010366.0
4962,comment,1,i393ywr,,Thanks :-). Does the flush logs clear the dashboard? I thought it did but i saw you replied to another thread saying it didnt,pihole,1649010426.0
4963,comment,1,i3d79on,,"Does flush logs clear the dashboard? Does it clear the dnsmasq query list or last 24 hours from ftl, or both?",pihole,1649087972.0
4964,post,3,tvdjzh,pi-hole not working for windows 10 pc,"I have installed pi-hole on my pi 4. On my phone it works great, not so much on my pc.

I still see ads, as a test i put [twitter.com](https://twitter.com) in blacklists. On my phone its correctly blocket, on my pc its not.

PC is connected via lan and configured as follows:

&#x200B;

https://preview.redd.it/7olxy22fdcr81.png?width=1294&format=png&auto=webp&s=2141f4c06e69a136e1b29f55875de18e1b817f59

The ipv6 is disabled, the ip of the pi is [192.168.0.222](https://192.168.0.222) as shown here:

&#x200B;

https://preview.redd.it/a3e49x7ldcr81.png?width=1106&format=png&auto=webp&s=402f6430dd726e2c11c6283152622e4f54e32acf

Ipconfig shows the right dns:

https://preview.redd.it/cxjpvteodcr81.png?width=729&format=png&auto=webp&s=d5f2cbf604903e4dee9c058f7fd4a330c97b594a

but now when i do nslookup [twitter.com](https://twitter.com) it gives back the ip of twitter instead of [0.0.0.0](https://0.0.0.0)

&#x200B;

https://preview.redd.it/9a16acqvdcr81.png?width=303&format=png&auto=webp&s=2f21321ee1c0bf4d05cd5aec8d8507ebff5c911c

tried flushdns already. 

I dont realy know whats wrong. MY pc also doesnt show up in the pi-hole webadmin panel.

&#x200B;

Hope someone is able to help :)",pihole,1649004203.0
4965,comment,2,i38r88c,,Have you disabled ipV6 on windows ?,pihole,1649005228.0
4966,comment,1,i38oztx,,What DNS is your pi-hole using?,pihole,1649004304.0
4967,comment,1,i399l4x,,"have you tried clear the cache ?  
ipconfig /flushdns",pihole,1649012793.0
4968,comment,1,i3bvyp7,,"What are your interface settings in pihole and how many hops is your PC away from the pihole device? Maybe it's ""too far"" away and you have to change your interface settings.",pihole,1649061958.0
4969,comment,1,i418gwa,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1649512220.0
4970,comment,1,i38skl3,,This.,pihole,1649005787.0
4971,comment,1,i38srkg,,>yes,pihole,1649005866.0
4972,comment,1,i38p96v,,"If you mean what upstream dns im using: [62.2.17.61](https://62.2.17.61)

is the one from my isp",pihole,1649004410.0
4973,comment,1,i39a2d5,,Yes,pihole,1649012988.0
4974,comment,1,i3eaisc,,Will try that,pihole,1649103014.0
4975,comment,1,i410ymq,,"1 hop away, wha do you mean by interface settings ?",pihole,1649508411.0
4976,comment,1,i419898,,"sure, should have done that from the beginning :)

https://tricorder.pi-hole.net/z7XwIqPU/",pihole,1649512577.0
4977,comment,1,i38pj7h,,"Just for testing purposes, trying setting your upstream DNS to Cloudflare or Google DNS servers.  Then see if your results change.",pihole,1649004526.0
4978,comment,1,i39hfvi,,"  
Do you have a different group assigned to the PC ?  
From Pi-Hole, >Group Management >Clients",pihole,1649015985.0
4979,comment,1,i417ws8,,https://docs.pi-hole.net/ftldns/interfaces/?h=interface,pihole,1649511955.0
4980,comment,1,i418uzr,,"Maybe your browser overrides the DNS system settings, it's worth to check this too",pihole,1649512404.0
4981,comment,1,i38skmm,,">okay i set it to [8.8.8.8](https://8.8.8.8) did flushdns, still the same outcome",pihole,1649005787.0
4982,comment,1,i39j3ug,,"No, only the default group, even added the pc to this default group.",pihole,1649016678.0
4983,comment,1,i4196o1,,"already disablet dns over https for chrome, but as nslookup itself gives me a valid it adress i dont think its an browser issue.

the pi hole is on ""Permit all origins""",pihole,1649512557.0
4984,comment,1,i38tp76,,"Give your rpi a reboot... while that is rebooting, what are using for a router?  Is your router providing IP assignment via DHCP?  If possible, have your router assign your pi-hole IP address as a DNS server, vice setting it under the ethernet properties.

Can you try `nslookup reddit.com` [`8.8.8.8`](https://8.8.8.8) and see what it outputs? 

Just brainstorming...",pihole,1649006247.0
4985,comment,1,i39tgd9,,"try this:

1. open command prompt, ipconfig /flushdns
2. on your browser, clear cache, ctrl+shift+delete
3. close all browser window
4. open browser, type: twitter.com  


https://discourse.pi-hole.net/t/how-do-i-flush-my-pi-hole-cache/3020",pihole,1649021082.0
4986,comment,1,i41c0iv,,Does other browser s behave similiar?,pihole,1649513852.0
4987,comment,1,i41d4eu,,"And did you maybe set a secondary DNS in your gateway? Bc a more standard setup would be to change the DNS only in your gateway / DHCP server, so you don't have to config it on every device by itself.",pihole,1649514328.0
4988,comment,1,i38umsj,,"okay rebooted the rpi, but still the same. Yes my router provides a dhcp but i cant set a dns for the whole network via the router. 

nslookup gives the following: 

Server:  dns.google  
Address:  8.8.8.8  
  
Nicht autorisierende Antwort:  
Name:    reddit.com  
Addresses:  151.101.193.140  
151.101.1.140  
151.101.65.140  
151.101.129.140",pihole,1649006625.0
4989,comment,1,i391v9v,,"once my rpi was off, my pc couldnt reach any website, showing that he is in fact using the pi hole as its dns. Looks like the pi hole just doesnt block it for the pc. I have put the pc into the default group in the pi hole but it didnt help",pihole,1649009558.0
4990,comment,1,i3eaqgo,,"I will give that a try, didnt have the time today",pihole,1649103096.0
4991,comment,1,i4112yx,,Didnt help,pihole,1649508479.0
4992,comment,1,i41d2rh,,Yes,pihole,1649514308.0
4993,comment,1,i41dkbq,,"I only want to use pi hole on a few devices, but yes i guess the router has a dns setup. I also dont use the pi hole as a dhcp but i dont see way that could be a problem.",pihole,1649514521.0
4994,comment,1,i41g0e1,,"Ok I understand. For me it sounds like your network card on your windows 10 machine doesn't use the set DNS for some reason. You can find easily tutorials how to troubleshoot this further.
Or your DHCP server overrides the DNS settings you set on windows 10. You could try to set pihole as DNS in your gateway / DHCP server and change the DNS on the devices which should not use Pihole.
I know, this is a pain in the ass, but I have no further ideas :)",pihole,1649515568.0
4995,comment,1,i41gjf9,,"Realy appreciate you help, i just checked i cant change the dns of my router, funny enought nslookup shows that it gets it from pihole ip. Im not realy a network guy but doesnt that mean that it gets the response correctly from pihole but pihole responds with the wrong answer ?",pihole,1649515787.0
4996,comment,1,i41kxyd,,"Yes, but why it handles requests from different devices different?Do you use different groups in pihole? (BTW this could be another option for you, if you use pihole for your whole network and config two groups in there, one which uses filtering and the other group without filtering)

What does the query log says when you request it from your phone and when you request it from the Win10 machine?",pihole,1649517590.0
4997,post,6,tvbznx,Problem: Pi-Hole with Unbound over Docker,"I am using an RPI4 as an HomeServer for my Homeautomation and filtering the internet.   
All Services are running in a separate Docker container (Pi-hole, portainer, unifi-controller, unbound, homebridge, rasparrymatic).  


PROBLEM:  
Now I have the problem that my network is really slow with pihole and I can't use it with unbound in combination. I think this is a Problem with a misconfiguration and false used IPs in my network.  
If I replace the DNS servers in Pihole with unbound I have no internet anymore.  
Under Top Clients Total (pihole adminpage) is on the first place the domain 172.20.0.1 which is configured in Unbound. But right now only cloudflare is set up as DNS server, because unbound does not connect to the internet.  
I want to use ipv4 and ipv6 in my network.  


INTERNET SPEED:  
My internet speed are actually at approx. \[DOWN: 120MB/s, UP: 40MB/s\] it should be round about \[DOWN: 800MB/s, UP: 50 MB/s\].  
My router has \[DOWN: 1150MB/s, UP: 57 MB/s\]. I am using GBSwitches and Ports + Unifi APs in every Floor and connected to 5 GHz WLANs. 

  
LOGS AND SETTINGS:

Docker Log Pi-hole: [https://pastebin.com/WDtAXPPk](https://pastebin.com/WDtAXPPk)  
Docker Log unbound: [https://pastebin.com/adxujwB7](https://pastebin.com/adxujwB7)  
Pihole Debug Log: [https://pastebin.com/xmfpqvqx](https://pastebin.com/xmfpqvqx)  


unbound.conf: [https://pastebin.com/rESm5LUM](https://pastebin.com/rESm5LUM)  
pihole setupVars.conf: [https://pastebin.com/4yCPy0TQ](https://pastebin.com/4yCPy0TQ)  
pihole docker-compose.yml: [https://pastebin.com/ZdQAk9M8](https://pastebin.com/ZdQAk9M8)  


192.168.157.1 = Router  
192.168.157.10 = Pi

&#x200B;

[Docker Pihole + Unbound Network](https://preview.redd.it/5ymmwtnb2cr81.png?width=1958&format=png&auto=webp&s=39016e910558fa39e0546bec493c810aaf7f6bbb)

&#x200B;

I hope someone can help me with the problem.",pihole,1649000144.0
4998,comment,2,i38ic90,,"Sorry, not sure about the issue per se. But did you mean to say Mbps instead if MB/s? That’s some serious down and up speeds if you really are getting that throughput!

As an example: 800Mbps is good and equates to 100MB/s.",pihole,1649001539.0
4999,comment,1,i3e6rrr,,"Not sure what this means: ""But right now only cloudflare is set up as DNS server, because unbound does not connect to the internet."" If unbound does not connect to the internet how will it resolve for you? Is it firewalled/stopped?

If you are planning on having PiHole use Unbound, then unbound is needed first off. What does: 

dig foo.bar u/172.20.0.7 -p 5053 | grep HEADER 

Tell you?",pihole,1649101610.0
5000,comment,1,i3eewcx,,"My Internet works now with unbound.  
I am using  now 172.20.0.1#5053 in the DNS Settings on the Pihole interface.  
172.20.0.7#5053 and 127.0.0.1#5053 doesn't works as DNS IP.

This error comes in the pihole web interface:  
Warning in dnsmasq core:  
Maximum number of concurrent DNS queries reached (max: 150)",pihole,1649104659.0
5001,comment,1,i3jcmn4,,"Ok, now I have found all the problems and want to share them in case someone has similar problems.  


I have a Fritz!Box running as a router and there is a DNS rebind protection in the settings.  
There I have entered as an exception the IP of the pi and unbounds docker IP.  


Which DNS servers are contacted by pi-hole?  
Open the Pi-hole container console and enter:  
`grep ""server="" --include=\*.conf -rn /etc/dnsmasq.d/`

I then got this:  
/etc/dnsmasq.d/06-rfc6761.conf:23:server=/test/  
/etc/dnsmasq.d/06-rfc6761.conf:24:server=/localhost/  
/etc/dnsmasq.d/06-rfc6761.conf:25:server=/invalid/  
/etc/dnsmasq.d/06-rfc6761.conf:41:server=/bind/  
/etc/dnsmasq.d/06-rfc6761.conf:42:server=/onion/  
/etc/dnsmasq.d/01-pihole.conf:38:server=172.20.0.7#5053  
/etc/dnsmasq.d/01-pihole.conf:40:rev-server=[192.168.157.1/24,192.168.157.1](https://192.168.157.1/24,192.168.157.1)  
/etc/dnsmasq.d/01-pihole.conf:41:server=/fritz.box/192.168.157.1  
/etc/dnsmasq.d/01-pihole.conf:42:server=//192.168.157.1  


In setupVars.conf I have set the entry REV\_SERVER to false:  
`REV_SERVER=false`

This is how it looks now:  
WEBPASSWORD=XXXXXXXXX  
CACHE\_SIZE=0  
BLOCKING\_ENABLED=true  
DNSMASQ\_LISTENING=single  
DNS\_FQDN\_REQUIRED=false  
DNS\_BOGUS\_PRIV=false  
DNSSEC=false  
REV\_SERVER=false  
REV\_SERVER\_CIDR=192.168.157.1/24  
REV\_SERVER\_TARGET=192.168.157.1  
REV\_SERVER\_DOMAIN=fritz.box  
INSTALL\_WEB\_SERVER=true  
INSTALL\_WEB\_INTERFACE=true  
PIHOLE\_DNS\_1=172.20.0.7#5053  
PIHOLE\_INTERFACE=eth0  
QUERY\_LOGGING=true",pihole,1649190733.0
5002,comment,2,i38iyqr,,"Yes, sorry I mean Mbps on all my Values",pihole,1649001800.0
5003,comment,1,i3e87rz,,"Ok, that was a bit stupidly formulated because my english is not really good.  
As soon as I change the DNS servers from Cloudflare to unbound my internet does not work anymore.

dig foo.bar u/172.20.0.7 -p 5053 | grep HEADER  
;; ->>HEADER<<- opcode: QUERY, status: SERVFAIL, id: 56679  
;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 149

The problem with the internet speed is apparently due to the Unifi APs. I will have to take care of that otherwise.",pihole,1649102149.0
5004,comment,1,i3esctb,,Sorry I didn't notice when typing. That 'dig' server should be <@ sign><IP address> Wanting to query your unbound server which I believe is running on [172.20.0.7](https://172.20.0.7) on port 5053 and see if it's working,pihole,1649109901.0
5005,post,1,tvat5x,Error during pihole update to 5.9.1,"After trying to update pihole it shows error message ""Data Stream error (incorrect header check) and and ""fatal : packed object \[pack name\] stored in /var/www/html/admin/.git/objects/pack/\[pack name\] is corrupt.",pihole,1648996983.0
5006,comment,3,i38e94b,,"These steps will delete and rebuild your local web admin files and repair from that new setup.

`sudo rm /var/www/html/admin`

`sudo git clone https://github.com/pi-hole/AdminLTE.git /var/www/html/admin`

`pihole -r` and select ***repair***",pihole,1648999805.0
5007,comment,1,i3bjj2g,,Thank you :),pihole,1649051839.0
5008,post,119,tva10e,What’s the best Pi-hole device when there’s no PI’s in stock,"I’m having difficulty finding any RPi’s in stock. Besides a docker image, does anyone have any recommendations on what I can use (that is also in stock)?",pihole,1648994705.0
5009,comment,82,i38ai71,,Buy any old used Pi on eBay or similar. Old models work fine as pihole is not demanding at all.,pihole,1648998156.0
5010,comment,94,i3843jz,,A run an instance in an Ubuntu server VM. You can also run it in Docker which would greatly expand your hardware platform options,pihole,1648995218.0
5011,comment,10,i391iq7,,Literally any old PC you have lying around. Anything at all.,pihole,1649009418.0
5012,comment,24,i388zft,,Thin clients like the Wyse 3040.,pihole,1648997474.0
5013,comment,21,i385k55,,"If you have a old laptop or PC, install ubuntu or debian and install pi-hole and enjoy.  Just make sure that machine doesn't turn itself off.",pihole,1648995909.0
5014,comment,8,i38dpdy,,"One of the Odroid models from Hardkernel. If you're in the US, check out Ameridroid.",pihole,1648999567.0
5015,comment,6,i38dhmc,,"I found Android TV Boxes a great cheap alternative to Raspberry Pis. You get a built-in Plastic Case, Heat Sink, and a built-in eMMC memory storage.

You can get one of the supported Android TV Boxes from [here](https://github.com/ophub/amlogic-s9xxx-armbian) and install Linux on it and use it as a headless server.

Currently, I own two Android TV Boxes, H96 X3 and Hk1 X3 both with Gigabit Ethernet Port and 4 Gigs of RAM. I am using H96 X3 a primary DNS server with Cloudflared DoH and another one for storing the Kodi database on MySQL. As both boxes have USB 3.0, I have one of them hooked up with a 1 TB HDD and using it as a NAS with samba and for pumping Kodi with movies and TV series. I have also set up a home assistant on one of the box and Qbittorrent servers. It's been like almost a year now and so far no problem at all. I highly recommend this.",pihole,1648999472.0
5016,comment,4,i38epv4,,I run both of mine on some older nucs I have.,pihole,1649000004.0
5017,comment,4,i392aqe,,I use an Intel NUC.,pihole,1649009733.0
5018,comment,8,i387hlr,,I got a used mini pc ( Lenovo ) for 50$ and installed Ubuntu server to run it.,pihole,1648996801.0
5019,comment,3,i38chdu,,Nanopi,pihole,1648999034.0
5020,comment,3,i39kxul,,"Flash Armbian on an old Android TV box. Turn an old laptop into a Linux based server. Odroid. Asus Tinker board. Banana Pi. If you only want to run Pi-hole, go for the cheapest thing that runs on the least electricity. It will run on very light hardware.",pihole,1649017445.0
5021,comment,3,i3a33fg,,"One option is to get a cheap vps (I recommend checking out Vultr's $2.50/month option) and running it in the cloud. Firewall it so only you, and maybe even family, can use it.  If you don't have an ""always on"" computer already that you can run pihole on (in a vm, or otherwise) then you are going to spend more than $2.50/month in electricity running it on pretty much anything besides a rpi or similar device.",pihole,1649025299.0
5022,comment,9,i38e5pf,,"I'm going to go with a VM rather than Docker, you can do a LOT with DietPi over and above its excellent service with Pihole. I used the ""Native PC (BIOS/CSM)"" image to set up an UnRAID VM and it works very well indeed.

[https://dietpi.com/](https://dietpi.com/)",pihole,1648999764.0
5023,comment,13,i389rmn,,"Docker is the way, maximise your hardware and learn something new.",pihole,1648997831.0
5024,comment,4,i38am3r,,I see Raspberry Pi 400's in stock. You may need to buy it in a kit of accessories.,pihole,1648998204.0
5025,comment,2,i38my2f,,I'm just running it on a VM on my Hyper-V server.,pihole,1649003460.0
5026,comment,2,i395cu6,,"Just use pfSense software with the PfBlocker addin. win-win (imho).

See it as a enterprise grade  router/ firewall with PiHole functionality in one device.",pihole,1649011005.0
5027,comment,2,i39zz4y,,"Windows subsystem Linux. You can download an installer that does that, pihole, and unbound. 
Can’t remember the git, if you want it I’ll find it.",pihole,1649023923.0
5028,comment,2,i3avlpo,,"Due to the same lack of regular RPis, I went with the RPi 400 (same as the 4 with 4gb ram) and am very pleased. Amazing link (2 in stock at the moment - non-affiliate link): Raspberry PI 400 Computer Kit - RPI400-US https://www.amazon.com/dp/B08MYVQW1S/",pihole,1649038427.0
5029,comment,2,i3b16li,,"You can always run it in aws, or linode, I have mine running in linode and it’s great for me it’s not a network wide adbocker it’s a always on adblocker",pihole,1649041105.0
5030,comment,2,i3blzvq,,A VM on your NAS.,pihole,1649053680.0
5031,comment,2,i3cwg65,,"I am using old android phones with broken screens 

Root+linux deploy+ battery limit",pihole,1649083592.0
5032,comment,3,i386r05,,OrangePI.,pihole,1648996461.0
5033,comment,2,i39bllr,,"Personally, I have Ubuntu running in Hyper-V on my windows machine with Veeam for Windows backup Free edition backing up the Ubuntu VM.

Alternatively, I could place the VHDX file in my documents folder and have that backed up is OneDrive.",pihole,1649013595.0
5034,comment,1,i38h3iz,,I haven't seen anybody offer the solution but what about a $5 a month VPS?,pihole,1649001015.0
5035,comment,1,i383o3z,,A VM?,pihole,1648995012.0
5036,comment,1,i385q66,,beaglebone black.  You can get it under $50,pihole,1648995986.0
5037,comment,1,i38nyy3,,"I was already using an intel nuc for sailing the high seas. It’s running on windows 11 

Just doubled the ram and setup Hyperv with Debian 11 basic which takes less than a couple of gigs of space 

It’s working like a champ so far",pihole,1649003886.0
5038,comment,1,i38seyb,,Is it possible to put Linux and Pihole on an old Ouya?,pihole,1649005722.0
5039,comment,0,i39bm6n,,"Personally, I have Ubuntu running in Hyper-V on my windows machine with Veeam for Windows backup Free edition backing up the Ubuntu VM.

Alternatively, I could place the VHDX file in my documents folder and have that backed up is OneDrive.",pihole,1649013601.0
5040,comment,0,i39bs07,,"Personally, I have Ubuntu running in Hyper-V on my windows machine with Veeam for Windows backup Free edition backing up my windows machine along with the .VHDX file that the the Ubuntu VM is on.

Alternatively, I could place the VHDX file in my documents folder and have that backed up via OneDrive with folder redirection.",pihole,1649013665.0
5041,comment,1,i386hfi,,VM.,pihole,1648996341.0
5042,comment,1,i38fesr,,"I run pihole on an orange pi zero 512mb with no problems at all, for about 3 or 4 years now. I suppose pihole is so lightweight it can run smoothly on anything",pihole,1649000301.0
5043,comment,1,i38ne48,,I have a nice VMware host so I just carve out a little 1 vCPU 1 MB machine and let it rock.,pihole,1649003645.0
5044,comment,1,i38p1hb,,"I use a low powered netbook with Linux and Docker. I use AdGuardHome actually, but I also used Pi-hole.",pihole,1649004321.0
5045,comment,1,i38wic9,,"Seeed often has them in stock, limit one.  Last week they had multiple cm4 versions which you could pair with a pitray.",pihole,1649007389.0
5046,comment,1,i38wtmu,,"Get an android TV box off of eBay. There are a lot of them that can run a distro of Linux. 

Or you can get some old netbook, the ones that came with the celeron CPUs, install a bare bones Linux server distro and you're good to go. You probably don't even need to install it, get a live distro and run it off the USB stick. Something like Ubuntu Server live should do.",pihole,1649007517.0
5047,comment,1,i3932ee,,Not speaking from experience but apparently you can install Debian Raspberry on a Mac Mini and then run Pihole there.,pihole,1649010051.0
5048,comment,1,i39ck03,,Odroid M1 or N2+,pihole,1649013983.0
5049,comment,1,i39n2xe,,I'm using a couple of Raspberry Pi 1B. They are overlooked to 800Mhz. I using a couple of Pi's for redundancy.,pihole,1649018349.0
5050,comment,1,i39q7to,,Ubuntu Server VM on a Synology NAS. Works flawless with only 1Gb Ram and 10 GB assigned.,pihole,1649019691.0
5051,comment,1,i39tw5f,,"i run 2 piholes at home, 2 dietpi vm in 2 separate computers for HA.",pihole,1649021268.0
5052,comment,1,i39ua15,,"you can run pihole in a container or vm, don;t need a RPI for it.",pihole,1649021429.0
5053,comment,1,i39uz7r,,If you don't want to run it on your PC you could snag a free second-hand laptop off of Facebook Marketplace and install linux or a vm on it.,pihole,1649021723.0
5054,comment,1,i39x14q,,I use the 3b+ from Canakit. but even that one is sold out now!,pihole,1649022621.0
5055,comment,1,i39x9ae,,Odroid makes a few models similar to Pi's. I used a HC2 before upgrading that to a Seeed (needed x86). If you're in Aus can ship it to you.,pihole,1649022722.0
5056,comment,1,i39y9wb,,I'm running the docker image along multiple other images on an old computer with K3s and metallb.,pihole,1649023171.0
5057,comment,1,i3a1bh0,,I run it in Hyper-V on my windows box that's on 24/7 anyway.,pihole,1649024513.0
5058,comment,1,i3a7ess,,Old laptops that you or friends have laying around or are cheap on ebay work fine. It's what I use.,pihole,1649027244.0
5059,comment,1,i3aarer,,Any old laptop.,pihole,1649028799.0
5060,comment,1,i3aeusw,,I run a Docker container on a PC at the house. Works the same.,pihole,1649030722.0
5061,comment,1,i3ag8d6,,NextDNS,pihole,1649031353.0
5062,comment,1,i3agjqp,,I'm running some on some old Intel NUCs.,pihole,1649031496.0
5063,comment,1,i3alajp,,I have an old dell vostro that runs all my server and network controls running ubuntu,pihole,1649033663.0
5064,comment,1,i3auy67,,"Very situational, but I run it off a docker image on my synology NAS.",pihole,1649038111.0
5065,comment,1,i3b8m5r,,"I run it on a random old Dell minitower I had sitting around unused. 

Would be more energy efficient on a Pi, but this frees up my Pi for music streamer use.",pihole,1649044904.0
5066,comment,1,i3bgo62,,Any old laptop will do the trick.,pihole,1649049839.0
5067,comment,1,i3bknom,,"You can get some thin client for like 10$, maybe even less.   
Or on your own PC via VMWare.   

You could probably do it on some old crappy android tablet or phone too.",pihole,1649052673.0
5068,comment,1,i3boky9,,"Rock Pi 4a/b/c depending on if you need wifi or not.  It actually has a little stronger CPU and a really beefy heatsink... Also for about $15 more you can add a nvme SSD shield w/ epic throughput (i got a 250gb nvme for $40 on the Zon)

I got a cluster last week or so from allnet china i think?",pihole,1649055691.0
5069,comment,1,i3bsobe,,"You don't need to use a RPi at all, just because the Pihole came from this popular system. This is like having a program run only on HP laptops because it was programmed on one.

Almost any SBC with ARM architecture will work fine. Buy whatever is in stock.",pihole,1649059090.0
5070,comment,1,i3bzucv,,"I use a HP Thin Client T630 which i got refurbished for 69€ 

That's a quad Core with 4gb ram (upgradeable) 

That's more than enough for a Pihole and power draw is also only around 10Watts.",pihole,1649065275.0
5071,comment,1,i3c09ry,,Would Pihole work on an Synology NAS?,pihole,1649065623.0
5072,comment,1,i3c1psh,,Run it (using docker) on a Google or Oracle alway free VM.,pihole,1649066784.0
5073,comment,1,i3c721t,,"I started running an Intel NUC with a celeron as a proxmox server. Running pihole in a lxc container is more fun imo because you can still use pihole -up. 
I ran it with less than 1 cpu core and 64mb of ram doing ~50k queries a day. I also enjoy seeing the hardware usage trends over time. 
Once you have a proxmox server the learning never stops",pihole,1649070693.0
5074,comment,1,i3cgxbc,,I run mine on a couple Rock64 boards that I got for cheap. Maybe see if you can get one of those. Doesn't require much in terms of hardware specs.,pihole,1649076520.0
5075,comment,1,i3ch8me,,I've setup my pihole via docker containers on an unRAID server.,pihole,1649076683.0
5076,comment,1,i3cwk6f,,Just about any low powered PC. I got mine running on an old Intel DN2800MT board with the Atom CPU. Whole thing runs off of a 12V brick and has worked flawlessly for the last 4-5 years now.,pihole,1649083639.0
5077,comment,1,i3dm9ur,,I'm using a very old (somewhere around 8 years I guess) laptop. Upgraded it years ago with a small ssd and after some time collecting dust I found this usage,pihole,1649093785.0
5078,comment,1,i3dmehj,,"Personally I run my PiHole in a container on my NAS. Other possibilities are e.g. (used) workstation PCs such as the Lenovo ThinkCentre with low power profile, any homeserver capable of virtualization or containering, an old laptop (battery in case of power loss included) or a cloud vm connected to your home via vpn or secured via ip filter.",pihole,1649093834.0
5079,comment,1,i3eft0e,,"My ""pihole"" is just a Debian lxc (container) on my NAS. That said unless you need/want the fancy webui you can get the same thing with unbound + RPZs and Dnsmasq.",pihole,1649105003.0
5080,comment,1,i3mhxhd,,You can use android box and convert it to a linux box running armbian. It's cheaper than raspberry pi i guess. I've been running pihole with it and it works pretty well.,pihole,1649252536.0
5081,comment,1,i40vwfi,,I just seen this article listing this new 'MangoPi' unit coming very soon. Could be a very good alternative as it aimed more at headless operation and same form factor as Pi Zero W 2 (but with USB-C!) https://www.cnx-software.com/2022/04/09/mangopi-mq-pro-a-20-risc-v-alternative-to-raspberry-pi-zero-w/,pihole,1649505422.0
5082,comment,1,i42gwnl,,I have a raspberry pi vm in virtualbox with pi-hole manually installed into it.,pihole,1649530535.0
5083,comment,1,i431imp,,"I have an old intel i3 desktop with proxmox ve and then added a ubuntu virtual machine and pi-hole runs flawlessly until the power goes out.  


If you go this route make sure your vms are set to auto start after power failure.",pihole,1649539467.0
5084,comment,1,i5yq6l8,,"I have been running Pi-hole on an Orange Pi Zero LTS for over a year now.

Wanted a cheap device, with very low power consumption, and the OPi Zero LTS does exactly that. Extremely stable, doesn't get hot (despite being in my utility closet next to my hot water tank) and powered by the USB port of my router.

Consumes about 1.2w of power, so can't get any better.",pihole,1650775135.0
5085,comment,-3,i38p0uk,,"Not in scope of your question, but I thought about doing PiHole.  I just didn't feel like running a device 24/7, so I just set my router to use AdGuard DNS.  [94.140.14.14](https://94.140.14.14) and [94.140.15.15](https://94.140.15.15).  Does pretty much the same thing.",pihole,1649004315.0
5086,comment,-4,i38pt8n,,I was able to pickup a base 8gb Pi4b starter kit on eBay for less than $200 a week ago. Brand new in the box.,pihole,1649004640.0
5087,comment,-2,i38haca,,I have a home media server/web server that does everything + Pi-hole,pihole,1649001095.0
5088,comment,-1,i38jkqv,,"I use a container on my proxmox computer. If you have a couple,Peter that’s a
Ways on a docker will do the job too.",pihole,1649002056.0
5089,comment,-1,i38jn17,,"I use a container on my proxmox computer. If you have a couple,Peter that’s a
Ways on a docker will do the job too.",pihole,1649002083.0
5090,comment,0,i39y9tr,,I have it running fine on a pi zero.,pihole,1649023170.0
5091,comment,0,i3ags3g,,A NAS.,pihole,1649031603.0
5092,comment,27,i38d8ny,,"I even had pi zero running pihole, now i use it has a backup.",pihole,1648999362.0
5093,comment,3,i3a6iuj,,"Rpi 1 works just fine too until you get around 2 million + entire on the older Pihole version with a desktop installed, idk about the current one, I think the new version (as well as Raspbian distros) works better",pihole,1649026838.0
5094,comment,2,i3cg926,,Yeah mine are on 3B+'s but ran for years on a 1st gen RPi 1.,pihole,1649076166.0
5095,comment,2,i3b4414,,"Same here, on Ubuntu on a VM",pihole,1649042530.0
5096,comment,6,i392zc9,,The best way,pihole,1649010016.0
5097,comment,1,i5ljsni,,yeah even thin client will do,pihole,1650535668.0
5098,comment,10,i38aust,,"Was just gonna comment this. I picked up 2 3060s on ebay for $35 each. 4GB ram, 16GB storage and a pretty good cpu - great value. Works perfectly for pihole. Ram and storage can be upgraded (though I couldn't find any drives higher than 32gb as this uses an unusual form factor)

Edit: wyze 5060

Edit2: a number",pihole,1648998310.0
5099,comment,4,i38bbny,,"Great idea! Just purchased one on eBay.

Everyone, thank you for your suggestions!",pihole,1648998518.0
5100,comment,3,i393r2a,,This is what I use.  I actually have like 35 3040’s if anyone needs one.  They’re usually cheaper than a Pi at $35 ish dollars.  We just migrated to PCoIP units.,pihole,1649010332.0
5101,comment,1,i3aqd5m,,"Thin clients are definitely the way to go. I got 3 quad core AMD Wyse with 16gb ram and 128g SSDs for $99. So, $33 each. They run windows 11 halfway tolerably! Plus, they're not arm architecture, so they are way more versatile than Pis. They do draw more power at full load, but not much. With the price of a pi right now, the RoI would be at least a couple years for the difference. Hell, these can run proxmox and have docker and other things running with these specs.",pihole,1649035959.0
5102,comment,3,i3an7lj,,"I currently have pihole running an old win8 laptop with a partially broken screen, gives it a whole new purpose.",pihole,1649034544.0
5103,comment,1,i3b4f7w,,"I had it up and running on a odroid go super, which is clearly impractical but I suppose that's why I did it.",pihole,1649042689.0
5104,comment,1,i3bjynw,,I have a old Odroid that still punches way above its weight class.,pihole,1649052158.0
5105,comment,1,i3960s2,,"I have PiVPN and PiHole running on a a NUC just fine (i3, 4GB, SSD) with zero issues.

to the OP: There are still plenty of good used RPi2b and 3b out on ebay. A PiZERO-w works quite (but I would get a RJ45 USB dongle or ""hat"" for it)",pihole,1649011285.0
5106,comment,2,i3adrwv,,"I tried to setup DietPI in an Unraid VM just last week and had no luck at all with it. I swear I tried the ""Native PC (BIOS/CM)"" version but I will try again in case. 

Didn't have to do anything specific to make it work?",pihole,1649030223.0
5107,comment,5,i39sbz6,,"But be prepared for extra breakage, such as this recent issue:

 - https://github.com/pi-hole/docker-pi-hole/discussions/1021
 - https://github.com/pi-hole/docker-pi-hole/issues/1035",pihole,1649020604.0
5108,comment,2,i38q1ih,,And how do I stop others from using my server?,pihole,1649004738.0
5109,comment,2,i3c1gk3,,"yes it does, when I lived with my parents, where I still have my Synology NAS because of the 1.5gigabit FTTH with 300mb upload speed, I had my PiHole running via docker on the Synology.

&#x200B;

Now it's just off since it would be ""too much maintenance"" for my younger brother",pihole,1649066581.0
5110,comment,1,i3giipi,,Oh thats good news thanks for info 👌,pihole,1649139316.0
5111,comment,4,i38ub9s,,"Just pointing out that PiHole does much more than just domain blocking. It can be your DHCP server and it also acts as a local DNS server so you can use hostnames for devices on your local network.

If all you’re looking for is ad blocking all you need then Ad Guard’s service is a decent option.",pihole,1649006496.0
5112,comment,4,i39b6zb,,Isn't that about double what it should go for?,pihole,1649013434.0
5113,comment,3,i3a1d8v,,Ouch. That was not a good price.,pihole,1649024535.0
5114,comment,16,i396ixn,,"I run my piholes on a pair of Pi Zero W's, no problems at all.",pihole,1649011502.0
5115,comment,2,i3ca242,,Yeah just run it headless,pihole,1649072642.0
5116,comment,8,i3a6i0d,,Not if you don't have a device to run 24/7 to run your containers,pihole,1649026827.0
5117,comment,1,i39dc8c,,Are there instructions for dockerizing pihole somewhere?,pihole,1649014304.0
5118,comment,1,i38ebn0,,"3060 or the 3040?
I'm not familiar with the 3060 but on eBay all I can find are much bigger PCs than the 3040 and they have an i5 so much higher power draw. Could you please link what you got?",pihole,1648999835.0
5119,comment,1,i3btcew,,"Here is an idea: [Chenyang Up Angled SATA 22Pin 7+15 Male to SATA 22Pin Female Extension Convertor Adapter 90 Degree](https://www.amazon.com/dp/B07JCV7QC7/ref=cm_sw_r_apan_i_6A8SXS45HWPXTQED8GZ6?_encoding=UTF8&psc=1) bought 2 of them and hooked them together to get sata port to point the other way (180 degree) .. Then I took an old ssd apart and installed it (almost half sized without the plastic case) it would be in an elevated position but perfectly clears the top metal cover ..


Edit: [Results](https://imgur.com/a/zjIregr)",pihole,1649059666.0
5120,comment,4,i38qv1a,,"FYI I also did some WireGuard performance testing and posted here

https://redd.it/r7qp9r",pihole,1649005077.0
5121,comment,1,i3blhrt,,Are you selling them at $35 shipped? Also are they 8 or 16Gb? I looked through your posts and didn't see any listing on homelabsales or hardware swap.,pihole,1649053297.0
5122,comment,1,i3ciplw,,"What model?  

Also, did you get these recently, or before the pandemic chip shortages?  I know that the shortages have driven up the prices of a lot of used gear.",pihole,1649077443.0
5123,comment,1,i3ccnvk,,"Machine: i440fx-5.1
SeaBIOS
2GB RAM
Those were the only things I specified, all else was defaults",pihole,1649074185.0
5124,comment,3,i39sxir,,"Easy to mitigate. I run two containers, one is static, one is auto updated.",pihole,1649020860.0
5125,comment,3,i3a9nmj,,"You’re asking the right question. Just putting pi-hole on a server facing the internet creates an open dns resolver and is a good way to get booted from your host.

The way I get around this is to only make the pi-hole dns accessible when connected by VPN. There’s a package called [wirehole](https://github.com/IAmStoxe/wirehole) that combines Pi-hole, WireGuard, and Unbound to do this. And it can run on a free-tier Oracle virtual machine.",pihole,1649028282.0
5126,comment,-4,i38q4eu,,"Good passwords, SSH keys, and firewall rules",pihole,1649004772.0
5127,comment,1,i3kzmnt,,"Install Fail2Ban and configure a good filter for port 53, blocking ANY and TXT queries",pihole,1649216570.0
5128,comment,2,i3b1f89,,"For street price, that's doing pretty good. When you can't find one in stock at msrp, a full tilt kit under $200 is decent April 2022.",pihole,1649041222.0
5129,comment,1,i3c5419,,"In a world of chip shortages and supply chain issues? All the sourcing sites report on-hand projections of late April. (28th in many cases).

Do you think the prices will drop back down to pre-2022?

I hope so, I’ll grab a couple more at once and shelve them.",pihole,1649069345.0
5130,comment,1,i3bpusf,,Yeah I've had no issues getting pi4 2gb and pi 3A+ at msrp.  That one 8gb cost more than my x3 pi4 and x2 pi3.... ouch,pihole,1649056717.0
5131,comment,1,i3khayc,,"Found 4B 8GB today online for $75 each. To my surprise instead of getting an update they were delayed, I received a shipping confirmation and tracking.

All with only power supply and heatsink kit. 

I have found a good case I like to put them in anyway now. so all good.

I'll share what condition they arrive in when delivered.",pihole,1649207979.0
5132,comment,8,i3a6dpu,,"Samw, usb powered off my router too.",pihole,1649026773.0
5133,comment,3,i3aeg8y,,Same and even have them powered using a Y power adapter plugged into the battery backed USB port on my APC UPS.,pihole,1649030539.0
5134,comment,1,i3dnlmh,,That's what I started afterwards but I'm also being a bit more selective for my lists now. It can't remove duplicates in the new version,pihole,1649094286.0
5135,comment,2,i3c6zsx,,Then why even run a DNS server like PiHole in the first place?,pihole,1649070650.0
5136,comment,13,i39fr3m,,There's an official repo for it https://github.com/pi-hole/docker-pi-hole,pihole,1649015291.0
5137,comment,1,i38gvmc,,Sorry lol I meant 5060,pihole,1649000924.0
5138,comment,1,i393w4s,,Search for “3040 Thin client” unfortunately Dell has a 3040 PC as well so that’s confusing.,pihole,1649010393.0
5139,comment,2,i3cbzsc,,"I can yes.  They’re on eBay, 16GB flash version.  

https://www.ebay.com/itm/DELL-WYSE-3040-THIN-CLIENT-16GB-FL-2-GB-RAM-THINOS-AC-/334215120931?mkcid=16&mkevt=1&_trksid=p2349624.m46890.l49286&mkrid=711-127632-2357-0",pihole,1649073798.0
5140,comment,1,i3cc3u1,,I don’t really sell labs.  I sell network equipment and PC’s.  Mainly Cisco and Dell.,pihole,1649073861.0
5141,comment,1,i3cja5o,,"About a year ago I got them. Wyse 7020 (Zx0Q) from ebay. Seller had about 50 of them for sale.

The 3 I got also have the unusual 2.5"" drive tray inside. Rare to see them. 

Mine also came with windows 7 pro stickers... lol. I definitely got a deal. I had been watching for them for a while.",pihole,1649077729.0
5142,comment,2,i39x3x1,,Interesting - perhaps I'll try that. Which one listens on port 53?,pihole,1649022655.0
5143,comment,1,i3j1t52,,Or also use another port that is not DNS.,pihole,1649186693.0
5144,comment,1,i3j20kp,,In the end I am using a netbook with AdGuardHome at home.,pihole,1649186773.0
5145,comment,3,i38q9x4,,I'm talking about using the server as DNS and avoiding it.,pihole,1649004835.0
5146,comment,2,i3odxs8,,I see a better solution using WireGuard and only DNS traffic passing through it.,pihole,1649278341.0
5147,comment,6,i3c8qj6,,"I don't understand your question?

Why run Pihole without running a server to run docker? I was just saying that docker may not be the best way. I'd argue the best way, is to run it on a $5 Pi Zero. Then it's a dedicated device that uses almost zero electricity.",pihole,1649071811.0
5148,comment,4,i3apt4f,,"There are lots of videos out there on how to get this set up.  If you already have docker running, setting up pihole should take 10 minutes or so.",pihole,1649035704.0
5149,comment,2,i38scva,,I’m sorry maybe im dumb or just still asleep I don’t see any 3060 in that price range. Everything is almost $100 or more. Could you please if you don’t mind post an example eBay listing,pihole,1649005698.0
5150,comment,1,i3j35g7,,"Not a good idea. Port scanners are very effective. If your DNS server is open, people will find it. Don’t do that.",pihole,1649187209.0
5151,comment,1,i3j39dy,,Hope that works for you. I’m not comfortable with AdGuard’s Russian ties.,pihole,1649187251.0
5152,comment,-9,i38raqg,,This comment doesn't make sense and I answered your question,pihole,1649005257.0
5153,comment,1,i38ux30,,"I clarified in my previous comment that I meant 5060.

Heres the listing I purchased from, but it seems the price has gone up since then when I looked up the 16gb model. The 8gb model is around $40 now.

https://www.ebay.com/itm/Dell-Wyse-5060-Thin-Client-AMD-Quad-Core-4GB-RAM-16GB-SSD-Complete-/144346003294?mkcid=16&mkevt=1&_trksid=p2349624.m46890.l49286&mkrid=711-127632-2357-0",pihole,1649006739.0
5154,comment,1,i3j3hki,,"But it is better than using port 53. The problem that they scan the ports and find (probably a software) the one that AdGuardHome/Pi-hole uses is like a security problem, but if it is in 53, anyone can use it as a DNS server . That's the real problem. Let them use it for free. Besides, if 53 were used, it would also be found by port scanners.",pihole,1649187339.0
5155,comment,1,i3j3k2w,,But it is open source.,pihole,1649187366.0
5156,comment,2,i38rfii,,And how does the server know which IP to accept to respond? There is no ready-to-use system.,pihole,1649005314.0
5157,comment,2,i38y8n5,,"Ah I’m so sorry. I guess I was still sleeping. I did check em out. The cheapest 8GB ones are about $36-$40 plus additional $10-15 shipping. 
Semiconductor shortage biting us in the butt!!! 

I can’t get over how stupid I was being in 2019-2020 thinking the pi4 would drop further and I would get it on sale like I got the pi3b a few years earlier. 

I’m guessing the AMDs on the 5060 will be consuming a lot more power and noisy with a fan? I looked into the 3040s last week and they’re based on the Atom CherryTrail CPU. 
I think for $40ish I should go for the 3040 instead. Can’t make up my mind. 
I’m not familiar with docker but thinking I can run a pihole in a docker session and maybe also thinking of upgrading my router to a unifi or tplink omada for which I’ll need a box to run a controller. 2 docker sessions should run fine on this. 
Or I can run my samba server and torrent box on this 3040 and free up my pi3b for the controller.",pihole,1649008090.0
5158,comment,1,i3j8isp,,"It's not really better. It's trivial to use nmap and identify open DNS resolvers on any port, not just 53. Once your open resolver is identified, it can be used for DNS amplification DoS attacks.

It's serious enough that your ISP or host will lock down your IP and eventually ban you if you don't fix it.

I am not aware of any valid reason for running a dns server (on any port) with an open resolver unless you're one of the big boys like Cloudflare, Google, or Cisco.",pihole,1649189220.0
5159,comment,1,i3j8v5b,,"True. And if I ever get around to auditing the code and determining to my satisfaction that there's nothing nefarious, maybe I'll consider it. But until then, I consider it possibly tainted due to the association.",pihole,1649189342.0
5160,comment,2,i3cd7zc,,"You'd set up firewall rules to only allow DNS (UDP:53) from your clients IP address. This would work if your ISP assigned you a static IP

If you have a dynamic ip you could set up a VPN on the VPS and have an always on VPN on your devices tunneling DNS traffic to/from the VPS with a firewall rule on the VPS blocking all inbound DNS requests",pihole,1649074508.0
5161,comment,-7,i38rihe,,"It seems like you have a lot of research to do, all you would do is point your DNS to that IP address. Best of luck",pihole,1649005348.0
5162,comment,3,i3911ra,,"I think it's less the shortage at this point and moreso scalpers recognizing and capitalizing on trends. I probably wasn't the first or the last to find these thin clients and use them as subs for rpi's, and scalpers probably saw that on public forums like this one. We're seeing stock come back now for a lot of stuff - but scalpers who probably started basing their livelihood on ruining markets using bots during the shortage/pandemic are desperate to disrupt any market they can so they can continue to not actually work for their living. Just my two cents.

As for noise, it is not nearly as loud as a rpi with a tiny fan on it lol. Pretty quiet tbh",pihole,1649009226.0
5163,comment,1,i3j8unt,,You are not understanding. I'm not looking for security because they wouldn't attack me. What I'm looking for is that any common people don't use my server as DNS and they are less likely to use it if I change the port.,pihole,1649189336.0
5164,comment,1,i3j933x,,And what other alternative is there after Pi-hole and that they are similar in terms of how the statistics show?,pihole,1649189423.0
5165,comment,1,i3j1ld1,,Or as an alternative that I have come up with now is to use another port other than 53 and forward from OpenWrt to that port.,pihole,1649186611.0
5166,comment,1,i3j1ncw,,I can't understand.,pihole,1649186632.0
5167,comment,2,i3ccat3,,I noticed some sellers have started putting limits or 2FA requirements on orders to combat bots.  It's a shame that scalpers are choking the market.,pihole,1649073974.0
5168,comment,1,i3j9g8b,,"If your DNS server responds to incoming DNS queries from outside your firewall then you will eventually be attacked. That is 100% certain and the port does not matter. I have the server logs just on the few machines I run that proves this, and there are plenty of articles online that explain just how bad of an idea this is.",pihole,1649189557.0
5169,comment,1,i3jbew8,,"Not sure what you mean about being ""similar in terms of how the statistics show"" but one alternative that is similar to Pi-hole would be pfBlockerNG. But that requires running pfSense and I'm not very familiar with it.",pihole,1649190285.0
5170,comment,1,i3kbipr,,Then there is no other option than to use WireGuard and only DNS traffic passes through it. But I'm not sure how to do it. I'm not even going to do it because I already use AdGuardHome/Pi-hole in my local network with a netbook as a server.,pihole,1649205394.0
5171,comment,1,i3kb7zt,,So I continue with AdGuardHome.,pihole,1649205262.0
5172,comment,1,i3kptgd,,"> Then there is no other option than to use WireGuard and only DNS traffic passes through it.

That's the best way. The wirehole project I linked to in the original comment comment makes the whole process extremely easy. I use that with an on-demand WireGuard profile to get ad blocking on my phone when I'm away from wifi. When I'm at home I use a local Pi-hole running on a Pi Zero.

The other way you could protect a remote Pi-hole installation is to setup a firewall on your VPS that only allows connections from your home IP address. That's a bit more complicated because home IP addresses are typically dynamic. And you don't get the benefit of ad blocking on the go.

> I'm not even going to do it because I already use AdGuardHome/Pi-hole in my local network with a netbook as a server.

Brilliant. But why are we talking about Pi-hole on a VPS if you're already running it on a local machine?",pihole,1649211732.0
5173,comment,1,i3oe4ye,,For perhaps future use.,pihole,1649278416.0
5174,post,1,tv9y4w,"Just updated, dashboard almost non-functional, shows disabled but is enabled.","Just updated my docker images, did it again to be sure it wasn't me doing something wrong the first time and same result both times, pihole appears to be disabled but is actually enabled as I can see the query log in action, I cant generate a debug as nothing happens when I click it, I cant use the teleporter function as nothing downloads, status shows ""unknown"" but does display load, memory usage and temp.     

* **Docker Tag** [2022.04.2beta](https://github.com/pi-hole/docker-pi-hole/releases/2022.04.2beta) 
* **Pi-hole** [v5.9.1](https://github.com/pi-hole/pi-hole/releases/v5.9.1) 
* **FTL** [v5.14](https://github.com/pi-hole/FTL/releases/v5.14) 
* **Web Interface** [v5.11](https://github.com/pi-hole/AdminLTE/releases/v5.11)",pihole,1648994473.0
5175,comment,2,i399a5x,,"Same here, new update broke everything. Yesterday's update was fun already...",pihole,1649012668.0
5176,comment,1,i38yrpp,,Rolling back to the 2022.02.1 docker image fixed the problem,pihole,1649008306.0
5177,post,5,tv6fez,Can't access site with Dnssec enabled,"Hi

I noticed I can't access 
http://data.europa.eu/eli/reg/2021/697/oj
or
https://eur-lex.europa.eu/eli/reg/2021/697/oj

if my Dnssec is enabled in my pi-hole config. I checked the query logs and nothing is blocked. I even whitelisted those 2 domains and even disabled pi-hole. Still they don't open!

I could only access them if I disabled Dnssec.

Is this a bug?",pihole,1648982234.0
5178,comment,2,i37nza9,,What is your upstream DNS?,pihole,1648985855.0
5179,comment,2,i37si08,,"I use Unbound as my resolver which is usually pretty intolerant of DNSSEC issues with domains, and those sites both load for me.",pihole,1648988917.0
5180,comment,2,i3809az,,"From the Pi terminal, what is the output of the following:

`nslookup data.europa.eu 127.0.0.1`

`nslookup eur-lex.europa.eu 127.0.0.1`",pihole,1648993301.0
5181,comment,2,i382qve,,I use cloudflared DoH and have DNSSEC enabled by cloudflare side. That works fine.,pihole,1648994563.0
5182,comment,1,i37x7jb,,8.8.8.8 and 8.8.4.4,pihole,1648991664.0
5183,comment,2,i3825g1,,"I can confirm the same.   
Using both unbound and dnscrypt-proxy with dnssec enabled.   
I was able to open both sites fine.",pihole,1648994268.0
5184,comment,1,i3825ov,,[https://i.imgur.com/K9T2IEs.jpg](https://i.imgur.com/K9T2IEs.jpg),pihole,1648994271.0
5185,comment,1,i387lg3,,I switched to cloudflare and it now works. Just for my curiosity does it work for you with DNSSEC and the Google DNS?,pihole,1648996848.0
5186,comment,1,i38hivi,,"Weird, I can resolve this via [8.8.8.8](https://8.8.8.8)

~~You may have a look into your blocklists or try to whiteliste this domain in PiHole and see if the behaviour changes.~~ (I see you already did this)",pihole,1649001195.0
5187,comment,1,i38p0lt,,"Here you go: https://pastebin.com/rfY5fW13

I queried sigfail.verteiltesysteme.net to show the result of a BOGUS DNSSEC check.",pihole,1649004312.0
5188,comment,1,i38peek,,"I, too, can resolve both via 8.8.8.8 and 1.1.1.1. 

https://pastebin.com/rfY5fW13",pihole,1649004471.0
5189,post,28,tv60js,"Warning in dnsmasq core, DNSMASQ_WARN with VPN?","I have ordered VPS, installed PiHole + PiVPN(WireGuard) + Unbound on it. So PiVPN uses PiHole as filter and then passes to Unbound. Everything is working properly except one thing. One or several times per day I recieve a warning like:  ""Warning in core: ignoring query from non-local network [89.248.172.16](https://89.248.172.16)"" (ip differs from time to time, but it is definitely non local). I pinned screenshot. What is it? How is it possible that some ip outside from my local make queries to my local pihole? I have seen some simular topics and one of the suggestions was to change from only local(default) to ""Respond only on interface eth0"" but I am afraid of become insecured.

Please help to understand, I don't know much about this kind of stuff and just followed official guides to make everything work. Do I need any fixing or it is OK behaviour?

https://preview.redd.it/cvudsywcgar81.jpg?width=1269&format=pjpg&auto=webp&s=ef13ed7c24869e7a0f1fa63533a2b32619e0ad49",pihole,1648980515.0
5190,comment,2,i37oiph,,"I'm not sure, but for my understanding DNS queries are sent via port 53. Is this port reachable on your VPS?",pihole,1648986244.0
5191,comment,2,i37q2fn,,"the problem here is wireguard… somehow WG routes some packets through the tunnel but doesn’t change the ip. But the problem isn’t pihole.

I‘ve got the same problem but I haven’t got the time to fix that yet. (Although my problem is not with a vps but a selfhosted server)",pihole,1648987323.0
5192,comment,1,i37ri76,,"I ve checked it with: 'telnet myservip 53' from my home pc. And looks like it is opened and the new Warning message appeared, but now with my home pc not local ip adress. Any suggestions how to properly close this port (i mean commands) on Ubuntu from being reached and not to break anything? Or this port should't be closed?",pihole,1648988284.0
5193,comment,2,i37rmjb,,"Thank you for the reply, i ll try to fix it somehow. If succeed, i' ll add the info here)",pihole,1648988360.0
5194,comment,1,i37s7ac,,Every port should be closed unless you don't opened it. What firewall do you use?,pihole,1648988730.0
5195,comment,2,i3a0osy,,"Thanks to u/Repulsive_Sherbert83, I understood my problem and looks like I found a solution. Actually I don't know if it is connected with your case, but still I post what worked for me.

1. Installed nmap, '`apt install nmap`'
2. Than tested my pihole for open ports '`nmap` [`10.6.0.1`](https://10.6.0.1)'
3. Found that 53(dns queries) and 80(web inteface) opened
4. Found a solution with iptables. Several commands, the order is important, first which you accept and after which you deny:  
'`iptables -A INPUT -p tcp -s localhost --dport 53 -j ACCEPT`' (here accepting localhost to 53 port - dns queries)  
'`iptables -A INPUT -p tcp -s 10.6.0.0/24 --dport 53 -j ACCEPT`' (here accepting my wg0 interface WireGuard network to accept to 53 port, which in my case is 10.6.0.0-10.6.0.xxx)  
'`iptables -A INPUT -p tcp --dport 53 -j DROP`'(deny all other connections for port 53 except 2 cases which I allowed above)  
'`iptables -A INPUT -p tcp -s localhost --dport 80 -j ACCEPT`' (accepting localhost to 80 port - web interface)  
'`iptables -A INPUT -p tcp -s 10.6.0.0/24 --dport 80 -j ACCEPT`' (accepting wg0 WireGuard network to 80 port)  
NEXT ONE IS OPTIONAL  
'`iptables -A INPUT -p tcp -s YOUR_HOME_PC_IP_ADDRESS --dport 80 -j ACCEPT`' (accept from only your home pc external address)  
'`iptables -A INPUT -p tcp --dport 80 -j DROP`' (deny all other cases for port 80)
5. After these commands access is opened only when you try to connect while using WireGuard tunnel or from localhost or from you home pc ip address(OPTIONAL)
6. The only problem is that these ip rules reset after reboot. To make them not reseting you should install iptables-persistent. do the following:  
'`sudo apt-get install iptables-persistent`'  
'`echo iptables-persistent iptables-persistent/autosave_v4 boolean true | sudo debconf-set-selections`'  
'`echo iptables-persistent iptables-persistent/autosave_v6 boolean true | sudo debconf-set-selections`'  
'`sudo systemctl enable netfilter-persistent`'  
'`sudo netfilter-persistent save`' (and in future after changing ip rules, you should use this command to save permanently)
7. This is it, optionally I blocked my ipv6 ports as well:  
'`ip6tables -A INPUT -p tcp -s ::1/128 --dport 53 -j ACCEPT`' (open ipv6 53 only for localhost ::1/128)  
'`ip6tables -A INPUT -p tcp -s ::1/128 --dport 80 -j ACCEPT`' (same for 80)  
'`ip6tables -A INPUT -p tcp --dport 53 -j DROP`'  
'`ip6tables -A INPUT -p tcp --dport 80 -j DROP`'  
'`sudo netfilter-persistent save`'

I don't know if I have done everything correctly because of the lack of knowledge, but that worked for me and now my web pihole interface(80) is unlocked only for my PC ip and when I am connected to Wireguard and for localhost, while blocking all others. And my dns queries(53) unlocked only for Wireguard network and localhost.

And quite logical that all warnings from other non local ip addresses trying to query my dns dissappeared.",pihole,1649024236.0
5196,comment,1,i37tgfy,,"Frankly speaking, i am really kinda noob in all this) I ve just done the autoconfiguration when installing all the things and i thought that all iptables rules are autoconfigured properly. I ve done:

1. curl -sSL https://install.pi-hole.net | bash
2. curl -L https://install.pivpn.io | bash      #and choose as dns piHole
3. sudo apt install unbound     #and configured it inside according to official guides

And then I ve just made some internal configuration to make it work with each other. That's all i ve done. Sry for stupid questions, but what should i do next or just what firewall to install and how not to break everythin that work good right now?",pihole,1648989504.0
5197,comment,1,i3avrnv,,Ah so your problem was a different one. My ports are closed (because PiHole/WireGuard is behind a proper firewall).,pihole,1649038509.0
5198,comment,1,i37vpdl,,"Sry this is also beyond my knowledge. My firewall is my router :) Maybe you can contact your VPS provider and ask there for help.
Right now thes requests get blocked by pihole itself, but I'm sure there is also an option to filter it by IP iptables already earlier, with some sort of whitelist for the source of the requests.
But my concern is, that the port is reachable without messing with iptables beforehand. IDK if the install script changed something there.
Maybe some more experienced user can help out here?",pihole,1648990822.0
5199,comment,1,i37vzii,,"Anyway, thank you very much for helping me to understand, at least i know what to search for.",pihole,1648990980.0
5200,post,1,tuuy48,"Pi-hole DNSMASQ_WARN & RATE_LIMIT, can't send debug token","Just finished doing a clean install of Bullseye 64bit on RP4 4GB. I had no issues installing Pi-hole or Unbound or Tailscale for VPN. I saved everything from the previous pihole that I had running 2 years  


Now I got the same errors a before when running buster:  DNSMASQ\_WARN &  RATE\_LIMIT.

From what I understand the cache has reached its limit on queries it can store or resolve within a certain time. But I could be wrong since I don't know much about this.

Also I got an error when trying to upload a debug file and get the token for the support but was met with an ""Error message: curl: (6) Could not resolve host: [tricorder.pi-hole.net](https://tricorder.pi-hole.net)""  


I'm not sure what I did wrong during the process or if my teleporter file brought over the issues of the previous install I had. I also don't know how to grab the debug file from CLI.",pihole,1648938147.0
5201,comment,1,i35sexi,,">DNSMASQ\_WARN & RATE\_LIMIT.  
>  
>From what I understand the cache has reached its limit on queries it can store or resolve within a certain time

This is not the case.  Rate limiting is a user-configurable option, which installs by default at 1000 queries in 60 seconds.

[https://docs.pi-hole.net/ftldns/configfile/#rate\_limit](https://docs.pi-hole.net/ftldns/configfile/#rate_limit)

>curl: (6) Could not resolve host: tricorder.pi-hole.net""

Change the nameserver in file ***/etc/resolv.conf*** to something other than the loopback IP or Pi-hole.  Make it `1.1.1.1` or `9.9.9.9`, for example.  Save and exit that file.  Then generate a new debug log and upload it.",pihole,1648939371.0
5202,comment,2,i35tva9,,"The nameserver on the file was the IP address for the tailscale DNS, is there a reason for that or no?

Here is my token for both errors: https://tricorder.pi-hole.net/G9sAqUNx/",pihole,1648940082.0
5203,comment,1,i4gr4xl,,"Found out what the problem was.  
[https://discourse.pi-hole.net/t/dnsmasq-warn-for-max-concurrent-queries-max-is-150-when-using-vpn-or-when-using-pi-hole-as-local-network-dns-with-35-devices/54784/25](https://discourse.pi-hole.net/t/dnsmasq-warn-for-max-concurrent-queries-max-is-150-when-using-vpn-or-when-using-pi-hole-as-local-network-dns-with-35-devices/54784/25)",pihole,1649789871.0
5204,comment,1,i362ty8,,"That means your machine is using the VPN as its upstream DNS server. Either you’ve configured that correctly on the machine but misconfigured on the VPN or misconfigured on the machine, if you don’t want to route your DNS through your VPN",pihole,1648944511.0
5205,comment,1,i364ioy,,"A client has been rate limited, and may have also contributed to the earlier warning. 

    *** [ DIAGNOSING ]: Pi-hole diagnosis messages
    id    timestamp            type                  message                                                       blob1                 blob2                 blob3                 blob4                 blob5               
    ----  -------------------  --------------------  ------------------------------------------------------------  --------------------  --------------------  --------------------  --------------------  --------------------
    16    2022-04-02 18:34:47  DNSMASQ_WARN          Maximum number of concurrent DNS queries reached (max: 150)                                                                                                               
    17    2022-04-02 18:49:46  RATE_LIMIT            100.78.165.86",pihole,1648948815.0
5206,comment,1,i364xq6,,"I followed the guide on tailscale's website here: https://tailscale.com/download/linux/debian-bullseye

I got no errors and everything works well, its just the warnings on Pi-hole that concern me. But I never had issues before.",pihole,1648949075.0
5207,comment,1,i364p7e,,"That's the Tailscale IP for the Raspberry Pi to be used as a DNS.

However, when I changed it over to the new IP, the one listed, the only thing connected was my phone. And before then, I never got errors like this.",pihole,1648948931.0
5208,comment,1,i366j3d,,The rate limit is adjustable.,pihole,1648949954.0
5209,comment,1,i366t2f,,"Got it, what about the DNSMASQ\_WARN message? Under what file can I adjust that limit or no?",pihole,1648950102.0
5210,comment,1,i366zia,,">[https://docs.pi-hole.net/ftldns/configfile/#rate\_limit](https://docs.pi-hole.net/ftldns/configfile/#rate_limit)

This was in my first reply to you.

See the first sentence in the linked page.

After you create (or modify, which may be the case) the file, restart Pi-hole with

`pihole restartdns`",pihole,1648950196.0
5211,comment,2,i368o2s,,"My bad  
Thank you for your help.",pihole,1648951043.0
5212,comment,1,i394s8c,,"Still getting the ""Maximum number of concurrent DNS queries to DOMAIN reached (max: NUMBER)"" error after setting the RATE\_LIMIT to 0/0 in /etc/pihole/pihole-FTL.conf.

 I don't know what line/command to put to get rid of the DNSMASQ warning. I also went to the first sentence of the configuration of the rate limit. But since I disabled the RATE\_LIMIT by setting it 0/0, why do I still get this DNSMASQ warning?  


There is my token: [https://tricorder.pi-hole.net/W1WqTlIX/](https://tricorder.pi-hole.net/W1WqTlIX/)",pihole,1649010763.0
5213,comment,1,i39i6n6,,"I think I know why it's triggering the warning. [https://imgur.com/2Bsds6A](https://imgur.com/2Bsds6A)

[https://imgur.com/WSWHYqO](https://imgur.com/WSWHYqO)

Now I really don't know what I did. I took it off my network's DNS and now just run it through Tailscale as a DNS, but never has this happened before.",pihole,1649016294.0
5214,comment,1,i3a1uxo,,">	since I disabled the RATE_LIMIT by setting it 0/0, why do I still get this DNSMASQ warning?

Because that is a separate warning not controlled by the rate limit parameter.",pihole,1649024753.0
5215,comment,1,i3dde11,,"Ok, then where can change the limit for DNSMASQ? The only thing I found in relation to the 150 limit of concurrent request, was the DNS cache size here: [https://docs.pi-hole.net/ftldns/dns-cache/](https://docs.pi-hole.net/ftldns/dns-cache/) apart from the DNSMASQ warning section of the documentation.",pihole,1649090364.0
5216,comment,1,i3gdbq3,,"    dns-forward-max=<queries

https://thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html",pihole,1649135732.0
5217,post,0,tuqokd,Client List Doesn't Show Host Names Or IPs,"I had to reset my pihole install to move away from docker to a bare metal install. For some reason the clients list shows names that are not related to the devices name [\(photo\)](https://imgur.com/a/7cft01e). 

My set up is pihole on a raspberry pi. I have pihole as my dhcp server and my att router/modem has dhcp turned off. To my knowledge pihole is working fine but I would like to see the names of the clients.

Looking at the log is my problem caused by these lines?


    -rw-r--r-- 1 root root 78 Mar 14 13:29 /etc/resolv.conf
       search attlocal.net 

Log

https://tricorder.pi-hole.net/xuA6yre2/",pihole,1648926766.0
5218,comment,2,i35cjlv,,See [https://discourse.pi-hole.net/t/client-hostnames-show-unknownxxxxxxxxxxxx-attlocal-net-on-att-rg/53499](https://discourse.pi-hole.net/t/client-hostnames-show-unknownxxxxxxxxxxxx-attlocal-net-on-att-rg/53499),pihole,1648931775.0
5219,comment,2,i35ohcq,,">For some reason the clients list shows names that are not related to the devices name

These are the names that Pi-hole knows, and are likely provided by the client devices during the DHCP transactions.

After you made the DHCP changes, did you renew the DHCP leases on all connected clients?",pihole,1648937454.0
5220,comment,1,i35s7f1,,"I had just seen a different comment about the dns assist feature. I turned it off a few days ago but never restarted my router. I’ll see if I can dig up any more info it. 

Thanks!",pihole,1648939269.0
5221,comment,1,i35s26g,,I did do that. I have been running Pi-hole like this for many weeks. I previously had the att router in pass through mode. I could try reverting back to that set up,pihole,1648939197.0
5222,post,0,tuq1sm,Is there a better way to add blocklists when running pihole in docker/kube?,"This is how I'm doing it currently, but I'm not happy with it since it seems like the gravity database exists between deployments.

https://github.com/donovanrost/k3s-ansible/blob/master/roles/pihole/tasks/main.yml#L158

If I check the state of the pods while the container is starting I see this in the output:

    ' exited with 1: Error: UNIQUE constraint failed: adlist.address
    Error: in prepare, database is locked (5)
    Error: in prepare, database is locked (5)


What's the best way to do this?",pihole,1648925116.0
5223,comment,2,i35agdy,,Bind mount `/etc/pihole/` to somewhere on the host (and also `/etc/dnsmasq.d/`) so your data persists between upgrades. Then just add them as normal in the GUI.,pihole,1648930794.0
5224,post,35,tup9pf,Unbound forwarding requests to upstream,"Hi everyone, 

So I setup Unbound+Pi Hole on my new Pi4. I had it running before on my Pi3, but decided to upgrade and reinstall. 

&#x200B;

Here's the problem: I followed the unbound guide, all test sites work as expected BUT: domains blocked by my upstream DNS provider are returning a NXDOMAIN. Wasn't the whole idea of Unbound to not forward the requests? DId I mess up something, or is this intentional?",pihole,1648923063.0
5225,comment,2,i35n35z,,">domains blocked by my upstream DNS provider are returning a NXDOMAIN.

If you followed our guide, unbound is your upstream DNS provider.  If you have NXDOMAIN replies, this is typically due to the nameservers not having an IP to match the domain you requested they resolve.

Is the output you posted in a separate reply (your unbound config file) all that is in the unbound configuration directory?  Other files can change unbound behavior.  What is the output of the following command:

`cat /etc/unbound/unbound.conf.d/resolvconf_resolvers.conf`",pihole,1648936780.0
5226,comment,2,i34zecu,,"> domains blocked by my upstream DNS provider are returning a NXDOMAIN

They could be blocked by firewall. To check this, try getting the IP from a common DNS like 8.8.8.8. Also try getting the webpage.
Commands for these can be
```
nslookup abcd.efg 8.8.8.8
curl --dns-servers 8.8.8.8 https://abcd.efg
```
If both fail, then I think abcd.efg is blocked at a firewall level.",pihole,1648925361.0
5227,comment,1,i34vw5s,,What’s in your unbound conf?,pihole,1648923679.0
5228,comment,1,i35rh5d,,"I have two Raspberry Pis running the Pi-Hole and Unbound combination. One is a Pi 4 running Ubuntu Server 64 bit, the other a Pi Zero running Raspberry OS. I find that by default, the Pi 4 works fine on its own if the Pi Zero goes down, but that the Pi Zero gives out a whole bunch of NXDOMAIN if the Pi 4 is down. The Pi Zero does work ok on its own if, after rebooting it, I manually delete /etc/unbound/unbound.conf.d/resolvconf_resolvers.conf and restart the Unbound service.",pihole,1648938910.0
5229,comment,1,i37ns8e,,">t /etc/unbound/unbound.conf.d/resolvconf\_resolvers.conf

The output of that command is:

&#x200B;

\# Generated by resolvconf  
forward-zone:  
	name: "".""  
	forward-addr: [192.168.1.10](https://192.168.1.10)  


&#x200B;

[192.168.1.10](https://192.168.1.10) is the IP-address of both my Pi Hole and my Unbound install.",pihole,1648985709.0
5230,comment,1,i37qf8o,,"&#x200B;

So i did a bit more digging after I found the answer of u/idontweargoggles, and it seems that there is nothing about this config file in the guide. It seems that it is the default config file, but because we create a custom pi-hole.conf file, we don't need to touch it, but it seems that it still existed. Maybe include something about that in the guide?",pihole,1648987560.0
5231,comment,1,i3506ri,,"That one returns an answer - as usual. I also noticed another thing: when i de-select any other DNS (leaving Unbound as the only one) every domain fails to resolve. Not just the ones that are blocked by the upstream provider. 

&#x200B;

I do have a fiewall that redirects traffic on port 53 if it isn't coming from the Pi and not going to the Pi. I did not change this, and when I plugin the SD-card of my old Pi, it works again. So it has to be something within Pi Hole or Unbound.",pihole,1648925745.0
5232,comment,1,i34xzha,,"Exactly what the instructions said, so:

&#x200B;

**server:**  
**# If no logfile is specified, syslog is used**  
**# logfile: ""/var/log/unbound/unbound.log""**  
**verbosity: 0**  
**interface: 127.0.0.1**  
**port: 5335**  
**do-ip4: yes**  
**do-udp: yes**  
**do-tcp: yes**  
**# May be set to yes if you have IPv6 connectivity**  
**do-ip6: no**  
**# You want to leave this to no unless you have \*native\* IPv6. With 6to4 and**  
**# Terredo tunnels your web browser should favor IPv4 for the same reasons**  
**prefer-ip6: no**  
**# Use this only when you downloaded the list of primary root servers!**  
**# If you use the default dns-root-data package, unbound will find it automatically**  
**#root-hints: ""/var/lib/unbound/root.hints""**  
**# Trust glue only if it is within the server's authority**  
**harden-glue: yes**  
**# Require DNSSEC data for trust-anchored zones, if such data is absent, the zone becomes BOGUS**  
**harden-dnssec-stripped: yes**  
**# Don't use Capitalization randomization as it known to cause DNSSEC issues sometimes**  
**# see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details**  
**use-caps-for-id: no**  
**# Reduce EDNS reassembly buffer size.**  
**# IP fragmentation is unreliable on the Internet today, and can cause**  
**# transmission failures when large DNS messages are sent via UDP. Even**  
**# when fragmentation does work, it may not be secure; it is theoretically**  
**# possible to spoof parts of a fragmented DNS message, without easy**  
**# detection at the receiving end. Recently, there was an excellent study**  
**# >>> Defragmenting DNS - Determining the optimal maximum UDP response size for DNS <<<**  
**# by Axel Koolhaas, and Tjeerd Slokker (https://indico.dns-oarc.net/event/36/contributions/776/)**  
**# in collaboration with NLnet Labs explored DNS using real world data from the**  
**# the RIPE Atlas probes and the researchers suggested different values for**  
**# IPv4 and IPv6 and in different scenarios. They advise that servers should**  
**# be configured to limit DNS messages sent over UDP to a size that will not**  
**# trigger fragmentation on typical network links. DNS servers can switch**  
**# from UDP to TCP when a DNS response is too big to fit in this limited**  
**# buffer size. This value has also been suggested in DNS Flag Day 2020.**  
**edns-buffer-size: 1232**  
**# Perform prefetching of close to expired message cache entries**  
**# This only applies to domains that have been frequently queried**  
**prefetch: yes**  
**# One thread should be sufficient, can be increased on beefy machines. In reality for most users running on small networks or on a single machine, it should be unnecessary to seek performance enhancement by increasing num-threads above 1.**  
**num-threads: 1**  
**# Ensure kernel buffer is large enough to not lose messages in traffic spikes**  
**so-rcvbuf: 1m**  
**# Ensure privacy of local IP ranges**  
**private-address: 192.168.0.0/16**  
**private-address: 169.254.0.0/16**  
**private-address: 172.16.0.0/12**  
**private-address: 10.0.0.0/8**  
**private-address: fd00::/8**  
**private-address: fe80::/10**",pihole,1648924664.0
5233,comment,4,i35rui1,,">The Pi Zero does work ok on its own if l, after rebooting, I manually delete /etc/unbound/unbound.conf.d/resolvconf\_resolvers.conf and restart the Unbound service.

You need to fix the problem that causes this file to be generated.

Edit file `/etc/resolvconf.conf` and comment out the last line which should read:

`unbound_conf=/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf`

Delete the unwanted unbound configuration file (if it exists):

`sudo rm /etc/unbound/unbound.conf.d/resolvconf_resolvers.conf`

Restart unbound:

`sudo service unbound restart`",pihole,1648939092.0
5234,comment,1,i37qn8r,,"You’re right, I don’t recall it being in a guide. Could make for a good addition to help people find out how to solve this problem.",pihole,1648987713.0
5235,comment,1,i352al2,,"> when i de-select any other DNS (leaving Unbound as the only one) every domain fails to resolve

Then I guess unbound is the problem. I suggest turning on the logs in a logfile unless you're comfortable with syslog (uncomment `logfile: ...`), test unbound with
```
dig sigfail.verteiltesysteme.net @127.0.0.1 -p 5335
dig sigok.verteiltesysteme.net @127.0.0.1 -p 5335
```
which should return ERROR then NOERROR somewhere in the result (I think in the first 2 lines). From what you wrote, this test will fail, so look at the logs, see if an obvious error shows up, and if you can't fix it then make a post here with what you did and the logs, someone should be able to help.

If this test succeeds, then unbound works well, and I think the problem  is with Pihole.

EDIT: updated to OP's port 5335 instead of default 5353
EDIT2: 5353 is not the default, 53 is. 5335 is the port advised in pihole's guide",pihole,1648926817.0
5236,comment,1,i35c94n,,"Sounds like your ISP is pre-routing your 53 traffic through their DNS.

To prevent that for myself, I've got my router set to ONLY VPN my server running pi-hole to a location without filtering so that my ISP only sees secure traffic coming out instead of port 53 traffic. So my DNS has a different IP than the rest of my network. (ASUS VPN fusion does this well)

This is assuming that VPN's are legal where you are and bypassing web traffic blocks imposed by your ISP is legal.

I also set my local network IPTables to preroute all 53 traffic through the pi-hole using this tutorial on my router.[https://dxpetti.com/blog/2019/using-iptables-to-force-all-dns-queries-to-a-pi-hole/](https://dxpetti.com/blog/2019/using-iptables-to-force-all-dns-queries-to-a-pi-hole/)",pihole,1648931639.0
5237,comment,1,i35x72z,,I will try this and report back. It sounds like it’ll do the trick. Thank you so much!,pihole,1648941699.0
5238,comment,1,i362cew,,"Thank you again for these instructions, as that file is no longer generated automatically. I’m curious whether it may solve the OP’s problem?",pihole,1648944258.0
5239,comment,2,i35n6zs,,[deleted],pihole,1648936830.0
5240,comment,2,i369d89,,">	OP’s port 5335 instead of default 5353

The default port for unbound is 53. This is changed in a configuration file to deconflict  with dnsmasq/unbound.  5353 or 5335 will work, but neither is a default. 

Our guide used to specify 5353, but we changed the guide to avoid conflicts with avahi. Our more recent guide uses 5335. 

If you have an older install from our older guide, you may still be using 5353.",pihole,1648951390.0
5241,comment,1,i3535h0,,"I tried this, but the logfile doesn't have any content? I already un-commented that line and restarted the unbound service. Am I missing something?",pihole,1648927256.0
5242,comment,1,i49cz7m,,"Your ISP sees the IP of every website you visit either way, why increase DNS latency for no practical privacy gain?",pihole,1649655401.0
5243,comment,1,i37o83j,,">sudo rm /etc/unbound/unbound.conf.d/resolvconf\_resolvers.conf

I tried this, and it seems to - domains blocked by my upstream provider are resolving again and I can de-select my upstream provider without letting all domains fail to resolve. I'll report back later once I can test it a bit more. 

&#x200B;

I am curious though: how did this error slip in the config file?",pihole,1648986032.0
5244,comment,1,i35t7fb,,"Do you mean that this doesn't also verify that unbound can resolve sigfail.verteiltesysteme.net and sigok.verteiltesysteme.net?

His problem is about resolving queries, so I thought this would test both DNSSEC and resolving queries and check that everything works. Is this wrong?",pihole,1648939756.0
5245,comment,2,i36a2hx,,"I was wrong on the default port, good to know :)\
Thanks for the good catch!",pihole,1648951729.0
5246,comment,0,i3576vh,,"Try giving everyone full permissions on it
```
chmod 777 /var/log/unbound/unbound.log
```
If it doesn't work, then reboot. If it still fails, I don't know.",pihole,1648929241.0
5247,comment,1,i49dcjz,,"For one it makes it so the standard method of searching their DNS lists for determining your internet history doesn’t work, so they’d have to compile it via your traffic history directly. This means you’d have to be targeted and your history compiled directly.
Also it means that if I VPN myself to a different location my isp just sees some traffic to one (DNS over VPN) and some traffic to another (all other traffic ), with no context. 

I don’t do that because I don’t want to, but it would allow me to quickly add a layer of privacy if I so choose. 

Basically i know it’s always possible to track me if you’re my ISP. But I want to make it so I have to be directly targeted for them to do it.

(And if I add the second VPN, they’d have to get the logs from VPN provider to figure out the traffic because all the ISP logs show is that a ton of traffic goes to one of them)",pihole,1649655662.0
5248,comment,2,i35vbcl,,No. You are correct and my reply was in error. Thanks for the catch.,pihole,1648940785.0
5249,comment,2,i35ydgm,,OP is also using port 5335 so needs to change that in the dig command.,pihole,1648942274.0
5250,comment,1,i35d8b0,,My unbound when installed was set to have minimal logging. The logging verbosity may need to be edited.,pihole,1648932097.0
5251,comment,1,i49dj8o,,"Ah I see, that’s valid reasoning.",pihole,1649655791.0
5252,comment,2,i35xu09,,"No worries, thanks for keeping an eye out for possible mistakes :)

And most of all, thanks for participating in this amazing project!",pihole,1648942011.0
5253,comment,1,i368mni,,"Good eye! Thanks, I updated it",pihole,1648951022.0
5254,post,0,tuljmm,Unbound DNS,"Is Unbound DNS enabled by default ?

* **DNSSEC**
* **DNS over HTTPS (DoH)**

It has anycast support and QNAME Minimization ?",pihole,1648913574.0
5255,comment,2,i369rb2,,"Unbound is separate software from Pi-hole and needs to be installed by the user. 

Our guide for unbound sets unbound up as a recursive server using both DNSSEC and qname minimisation.

You can change unbound to a forwarding server which will then allow encrypted traffic between unbiund and the upstream server you specify.",pihole,1648951577.0
5256,comment,1,i3529mb,,"What?
Do you mean is unbound installed in pihole by default?
Unbound is a validating, recursive, caching DNS resolver so I contact the root servers and there is no such thing as anycast in this case because it makes no sense and how would it work?
Qname is possible if you give it to config file.
Unbound has the possibility to act as cache server and contact for example quad9 via doh. 
Dnssec like everything else has to be enabled in the config file. 
I advise you to read about it here https://docs.pi-hole.net/guides/dns/unbound/
I also send here a good configuration file download root hints for it 
https://url.howwof.pl/L8k9ES",pihole,1648926803.0
5257,comment,1,i36a9v2,,">	Qname is possible if you give it to config file

It is enabled by default in unbound. 

>	Dnssec like everything else has to be enabled in the config file

DNSSEC is also enabled by default. 

https://unbound.docs.nlnetlabs.nl/en/latest/manpages/unbound.conf.html",pihole,1648951831.0
5258,post,0,tui5ca,Making Pihole on VPS only accessible through OpenVPN,"Hello, I have a pihole set up on my VPS and i want the pihole to not be reachable via the public IPv4, but only within the private network 10.8.0.x, where do i set this?",pihole,1648903811.0
5259,comment,1,i346099,,"Do you use the docker image?
If yes you can put the ip you want to bind to in front of the port like 10.8.0.1:53:53
If not use iptables to drop all packages that dont have 10.8.0.0 as source.",pihole,1648912245.0
5260,post,1,tui3ji,Disable Pi-hole diagnosis screen,"Recently Pi-hole added a diagnosis screen with a very annoying bouncing icon that is begging for my attention. It is completely useless, it gives alerts that tell me CPU load has been too high for longer than a few minutes. I know, I run a cronjob every night. It is a distraction that doesn't tell me anything new.

How can I disable this terrible piece of functionality? It was clearly rushed without thinking about it.",pihole,1648903640.0
5261,comment,3,i33qvr8,,">	it gives alerts that tell me CPU load has been too high for longer than a few minutes.

You can disable this load check, as noted in our documentation. 

https://docs.pi-hole.net/ftldns/configfile/#check_load",pihole,1648904653.0
5262,comment,3,i33s6os,,"Thanks! Changed the setting.

Some feedback: in my opinion this piece of documentation is buried. I don't know what FTLDNS is so I would never look there. There is no documentation on the diagnosis screen and where the alerts are coming from. I would have never found this without your help. I did try looking through the documentation before asking the question here.",pihole,1648905393.0
5263,comment,1,i35skmc,,">There is no documentation on the diagnosis screen

I don't have a load limit warning in my diagnosis screen to check, but for other dnsmasq warnings there is a link to our documentation page below each warning.",pihole,1648939449.0
5264,post,0,tuhxiz,Anybody block nanovisor.io?,"Basically the title.  I recently started seeing this as a top permitted domain, so wondering if you guys have experience with or know what this domain is.

Thanks!",pihole,1648903082.0
5265,comment,4,i34u5sw,,"Guys, this isnt rocket science. Block it. Unblock it if it causes issues.",pihole,1648922883.0
5266,comment,2,i36aqjn,,Nanovisor is part of a system which can “unblock” ad blocking.,pihole,1648952060.0
5267,comment,1,i34jhbs,,I have it blocked and it didn't cause any problems. I couldn't find what it is for.,pihole,1648918279.0
5268,comment,0,i36f27q,,Cool thanks for your super helpful answer.  You must be a joy to be around.,pihole,1648954197.0
5269,comment,3,i377iwy,,"Did you do an internet search before posting?  When I see my devices going to sites I didn’t request, i will attempt to find out what it is, or I block it to see what effects it will have.  One URL was a Chinese social media domain.  It was blocked immediately.",pihole,1648972458.0
5270,post,2,tueaea,Should I update to v5.9.1 if I am not using docker?,"As there are no pinned post here explaining it, and the only listed changelog are related to docker

Edit: I forgot to mention I am not using docker version.

https://github.com/pi-hole/pi-hole/releases/tag/v5.9.1",pihole,1648889049.0
5271,comment,5,i35efvk,,I updated to 5.9.1 an hour ago and I'm fine.,pihole,1648932660.0
5272,comment,4,i33jcwy,,I don’t mean to be rude but I never understood why people ask these questions? Like if there is no need to update now why bother going out of your way to do so? On the other hand when 5.9.2 or 5.10.0 comes out presumably you are going to upgrade so you’ll get this change anyway so surely it is entire up to you whether or not you bother right now?,pihole,1648899827.0
5273,comment,4,i33mo9q,,"Its generally a good practice to keep your software up to date, especially on a server with a exposed port (at least PiVPN). But this time I am unsure of I should upgrade, since there are reports of it breaking after update. 

> you'll get the change anyway

They may revert the changes on the next release. Who knows?",pihole,1648902075.0
5274,comment,1,i33svna,,">	They may revert the changes on the next release. Who knows?

But there is no way anyone here can know if that’ll happen so they can only give you an answer predicated on the assumption that the change will not be removed?




To answer the question yes upgrade, always upgrade unless there is a known issue with doing so based on your setup",pihole,1648905776.0
5275,post,0,tu59vo,bitmojis not showing up in snapchat,"not a huge deal, but just a personal annoyance. wondering how i could find out what’s causing this to happen? i had thought for months that bitmoji was just broken, but wondering if there’s much i can do to stop this from happening. 
TIA",pihole,1648857387.0
5276,post,24,tu54a8,Latest docker image broke Pihole,"Just noticed 2022.04 was released so went to update my docker install.  After update, FTL would not start, and DNS services would not load.

Tried adding both -e DNSMASQ\_USER=root -e PIHOLE\_UID=0 with no luck, so rolled it back to the 2022.02 image and am back up and running again.

Not sure if this is just my install on Ubuntu 20.04 LTS or not, but figured I'd mention it before others potentially run into the same issue.",pihole,1648856927.0
5277,comment,1,i33r8gp,,"Update as of 4/1/2022.

https://github.com/pi-hole/docker-pi-hole/blob/master/README.md",pihole,1648904852.0
5278,comment,5,i34322v,,2022.04.1 was just released as an update to 2022.04 and is working fine here.,pihole,1648910874.0
5279,comment,3,i33qpd1,,I got another update a couple hours ago and no longer have this issue now.,pihole,1648904550.0
5280,comment,2,i31smr6,,"Using jacklul/pihole:latest, these same lines over and over again in the log:

Starting pihole-FTL (no-daemon) as pihole

**Unable to set inheritable capabilities: Operation not permitted**

Stopping pihole-FTL

pihole-FTL: no process found",pihole,1648857463.0
5281,comment,2,i32hw2o,,"same here, completely broken

anyone know of a fix?",pihole,1648870629.0
5282,comment,1,i31sdt7,,"I'm having the same issue on arch. I was already on root user, but I tried the UID workaround as well, but it failed.

This is what's in the container log:

Starting pihole-FTL (no-daemon) as root

Unable to set inheritable capabilities: Operation not permitted

Stopping pihole-FTL

pihole-FTL: no process found",pihole,1648857336.0
5283,comment,1,i31vhrq,,I tried to instal Pihole last night but couldn’t get it working. Perhaps it’s related to the issue you mention here?,pihole,1648858902.0
5284,comment,1,i31yl49,,[https://github.com/pi-hole/docker-pi-hole/issues/1019](https://github.com/pi-hole/docker-pi-hole/issues/1019) if you haven't downgraded to 2022.02.1 as I did for now.,pihole,1648860467.0
5285,comment,1,i32skzj,,"Ran intro same issue. updated docker compose to use old version and fixed my issues. make sure the docker host is using something besides local host for DNS. I had to set my router up to fall back to [8.8.8.8](https://8.8.8.8) for DNS host in order to download the older version of pihole.

\#image: pihole/pihole:latest  
  image: pihole/pihole:2022.02.1",pihole,1648877481.0
5286,comment,1,i32zsdl,,"On both of my Linux systems as well (ARM and x64). Downgraded to 2022.02.1 as a workaround for now.

GitHub issue: https://github.com/pi-hole/docker-pi-hole/issues/1035",pihole,1648883176.0
5287,comment,1,i33nabw,,"cap_add:
 - NET_ADMIN",pihole,1648902462.0
5288,comment,1,i33z668,,Mine broke as well. How to downgrade docker on Synology?,pihole,1648909013.0
5289,comment,1,i341bzb,,"As a Synology user, thank you!",pihole,1648910064.0
5290,comment,1,i343nx7,,I just did a new pull and this time all is working...so looks like they fixed whatever the issue was.  Also removed -e DNSMASQ\_USER=root -e PIHOLE\_UID=0 from my config and 2022.04.1 still works perfectly.,pihole,1648911159.0
5291,comment,1,i343hk5,,I just did a new pull and this time all is working...so looks like they fixed whatever the issue was.  Also removed -e DNSMASQ\_USER=root -e PIHOLE\_UID=0 from my config and 2022.04.1 still works perfectly.,pihole,1648911077.0
5292,comment,1,i34668u,,Thanks pulling latest worked,pihole,1648912321.0
5293,comment,2,i338c23,,"I run pihole on my Synology in Docker.

It runs if I add NET_ADMIN to the container privileges, I tried the other workarounds too with no success.

The only other thing that worked for me was running the container with highest privileges, but I didn't want to do that as a permanent solution so I found that other workaround.",pihole,1648890727.0
5294,comment,1,i31ytct,,Tried all that before downgrading and it didn't work.,pihole,1648860584.0
5295,comment,1,i35iwiu,,This worked for me too.,pihole,1648934780.0
5296,comment,1,i3ctgbd,,"Complete noob here...

Also using pihole in Docker on Synology. 

How do you add NET\_ADMIN to the privileges?",pihole,1649082336.0
5297,comment,2,i32aynh,,"I'm in the same boat.  I've tried to add DNSMASQ_USER=root while using the pihole:latest and pihole:dev builds, and left the variable out, neither work.  For Pihole to work for me I have to use the pihole:2022.02.1 build.

Anyone else have it working?  I'm sure that if I use the sysctl change mentioned it would, but is that a risk? (sorta a noob)",pihole,1648866840.0
5298,comment,1,i325jun,,I think that link is for a different issue than we're having.,pihole,1648864006.0
5299,comment,2,i3cvc0v,,"Open the container settings in Docker, there should be a button that says ""configure capabilities"" under general settings tab. You can check the box for NET_ADMIN from there.",pihole,1649083129.0
5300,comment,2,i338gfo,,Try adding NET_ADMIN to the container privileges,pihole,1648890835.0
5301,comment,1,i36t9ky,,"I have the same issue, btw do you use macvlan at all?",pihole,1648962012.0
5302,comment,2,i3cxwtf,,"OMG thanks a lot, it finally works!

Those settings were greyed out for me since I ticked ""run with high privileges"". I noted when ticking the box again, that change is reverted.",pihole,1649084190.0
5303,comment,2,i3d1y6d,,"Nice! 

Yeah, you want to avoid using ""run with high privileges"", because this setting basically gives your entire container full root permission over your synology.",pihole,1649085849.0
5304,comment,1,i3d2uap,,"Another good point!

Have done that because my step by step tutorial told me so... I should start learning more about Docker",pihole,1649086212.0
5305,post,0,tu2ljx,Update gravity daily,Is there a way to have gravity (blacklists) update automatically on a daily basis? How would I go about this?,pihole,1648849944.0
5306,comment,6,i31eo22,,">Is there a way to have gravity (blacklists) update automatically on a daily basis?

Why do you want to do this?

>How would I go about this?

There is an existing cron script installed by Pi-hole at: /etc/cron.d/pihole

    18 3   * * 7   root    PATH=""$PATH:/usr/sbin:/usr/local/bin/"" pihole updateGravity >/var/log/pihole_updateGravity.log || cat /var/log/pihole_updateGravity.log

Modify this script to run daily.

Note that your changes will be overwritten on a Pi-hole update or repair.",pihole,1648850748.0
5307,comment,2,i36rlec,,">There is an existing cron script installed by Pi-hole at: /etc/cron.d/pihole


>Modify this script to run daily.


You would do that by replacing <7> with <*>, in case OP doesn't know that.",pihole,1648960976.0
5308,post,128,tu1vfn,Gravity Sync 4 Beta,"Greetings! Those of you who are familiar with Gravity Sync know it's a great way to keep multiple Pi-hole instances in sync. I have been working on a major rewrite, version 4.0, and would like to get extra eyes on it in the form of a beta before I publish it to everyone.

In the past I've always gone to great lengths to make sure that anyone who ran Gravity Sync and kept up to date using the built in updater, would not have to do much other than occasionally reapply automation jobs to take advantage of new features. This had the effect of making me reliant on flawed or shortsighted decisions that were made two years ago, and building all new features on top of, or within, the confines of those decisions. With this version you will be required to reinstall Gravity Sync and start fresh.

In previous versions the directions indicated that you should select a primary and a secondary Pi-hole.

In 4.0, the architecture and installation have been simplified in that you now just install Gravity Sync on the pair of Pi-hole boxes that you want to use it. Both sides run replication jobs as a pair. Automation jobs are set to run at semi-randomized times to prevent overlaps, and the hashes are now swapped at the end of a successful job. A change to either side will result in both sides picking up the change in under 5 minutes. If you want to manually run the changes, it will handle that fine and shouldn't cause the other side to replicate again with the automated job runs.

There are a ton of other changes. If you're a current users or if you've tried Gravity Sync in the past and it didn't meet your needs or work correctly for you I would love to get your view of this new approach. 

[https://github.com/vmstan/gravity-sync/pull/317](https://github.com/vmstan/gravity-sync/pull/317)

I'm happy to answer any general questions about Gravity Sync or the beta here, but if you have specific technical issues with the beta please direct them to the GitHub above. The installation instructions are available there as well :)",pihole,1648848031.0
5309,comment,7,i325jbp,,Do I need to do anything special when syncing 3 pi-hole servers? The current version I have the two setup to sync with the “primary” server. Does this change with this new architecture? I believe I only saw reference to sync a pair of Pi-hole servers so just wanted to make sure if I needed to do anything different.,pihole,1648863998.0
5310,comment,16,i31coj2,,"Dear vmstan, just want to tell you, how much I appreciate your work. Will give it a try.",pihole,1648849842.0
5311,comment,4,i31zxdd,,If I run two piholes via docker should I create a new docker image with gravitysync installed ?,pihole,1648861146.0
5312,comment,4,i31ifcq,,List of changes look great.  I'll try to have a play over the weekend.  Thanks,pihole,1648852496.0
5313,comment,2,i328o4n,,"Thanks for continuing to work on this!  Willl this new version require scheduling via cron, or the automation you mention will eliminate that requirement ?  

I ran into a bunch of problems trying to get cron to work with sudo in the commands on a mac (hosting docker Pi-hole) in the past, so if cron is no longer needed it’d be great news.",pihole,1648865628.0
5314,comment,2,i33u2fi,,"Thanks, this is one of my favorites! Please count me in.",pihole,1648906420.0
5315,comment,1,i31bhxx,,The upside to this I guess is that it will force me to jump off armhf and into arm64 raspos on my pi-holes. Looking forward to the updates,pihole,1648849310.0
5316,comment,1,i34183b,,"Have you run shellcheck against the project? 

https://www.shellcheck.net/",pihole,1648910013.0
5317,comment,1,i346yw2,,Currently I just SCP the DB from my primary to secondary pihole to sync them. It's sloppy but I wonder if that's dangerous? Never failed so far.,pihole,1648912685.0
5318,comment,1,i7qmqbq,,I recently installed pihole in docker on my Synology along with a second pihole on a raspberry pi. I am able to add it to my pi but get an error when trying to install it in docker. “GIT has not been detected” is the error that I get and cannot figure it out for the life of me. If someone knows any steps on a way to resolve this issue that would be great!!,pihole,1651968806.0
5319,comment,-2,i33k5ri,,[deleted],pihole,1648900396.0
5320,comment,8,i32fapr,,If you’re syncing multiples hold off on the beta for now. There will be an option to disable the hash sync and function just like the current version but it’s not there yet.,pihole,1648869177.0
5321,comment,1,i3y2w3e,,"I've added a ""peerless"" mode today that should accommodate this sort of configuration. It will see there is no configuration file for Gravity Sync on the remote Pi-hole and bypass the hash sharing (it'll tell you in the interface to configure your remote instance but just ignore it)

This should let you do a master and two secondary instances, similar to the original script. Please give it a try and let me know.",pihole,1649448881.0
5322,comment,4,i32ftpp,,"Right now it’s designed to run on the base OS, reach inside the containers for running commands, and sync the data that are mounted to them. However, I’m planning for a containerize release later.",pihole,1648869471.0
5323,comment,3,i32edat,,"It uses systemd timers instead of cron. I’m pretty sure it still won’t work on a Mac, but after I get things settled I’m hoping to get a containerized version of GS built that you could run alongside instead.",pihole,1648868670.0
5324,comment,3,i31cain,,Why’s that?,pihole,1648849669.0
5325,comment,2,i394uri,,"No, and I’m kind of embarrassed to say I didn’t know about this too until just now, but now that I’ve got it installed as a linter in VSCode, I wish I’d know sooner. 

Would have saved me a lot of unnecessary  git commits.",pihole,1649010794.0
5326,comment,2,i38yzpw,,"You're not far off from what the core is doing here, just consumable across different setups.",pihole,1649008397.0
5327,comment,1,i7qs6o6,,"You don’t install Gravity Sync inside the Docker container.

I’m not sure how you’d get Git installed on your Synology, but you could just decide to run it with Gravity Sync only being installed on the Pi. Git is required to download the code and update.

You’ll manually need to make sure that all other requirements are met on your Synology.

https://github.com/vmstan/gravity-sync/wiki/System-Requirements

Edit: I do see Git Server listed as an option in the DSM packages. I assume it would also install Git client abilities with that.",pihole,1651971670.0
5328,comment,4,i33m4vn,,"If you need to restart your pi, dns resolution won't work anymore. When your pi crashes, same.",pihole,1648901726.0
5329,comment,1,i33o2r5,,"For me, I run a self hosted internal domain for local name resolution and DHCP DDNS, and I have redundant Active Directory controllers locally. Over a full mesh site-to-site VPN, I also have a self hosted VPS access VPN and a mobile site I can pick up and take with me. 

All of these get linked together with Gravity Sync so they have the same config and no single point of failure. (other than both AD controllers being in the same rack)",pihole,1648902963.0
5330,comment,1,i33o5eh,,"I run 2 so that the home gets the “don’t want things to get messed up” instance as primary DNS. While my other piHole instance, only my workstation has as its primary DNS server because I’m always tinkering with lists and settings that can make it unusable. I have some internal DNS records so those times when DNS stops working is inevitably when people in the family start to access Plesk, etc.",pihole,1648903009.0
5331,comment,1,i346qpf,,"So the internet doesn't go down when and if my main server does.

The backup is just a Raspi which resolves things slower, but still does it.

This morning a bug took out both piholes and I had to just through hoops without working DNS to fix it. Having at least one up helps a ton.",pihole,1648912580.0
5332,comment,1,i37mtzo,,"Because I can, and it's a lot safer for me if I'm at work, or away for work, if there's a bit of redundancy/resiliency it'll save me talking the wife or kids through what to do to get stuff working again if there's an SD card failure, someone unplugs something, the dog thinks the Pi is a treat (and yes that's happened before)",pihole,1648984992.0
5333,comment,1,i3ywqi7,,Seems to be working so far! Thanks!,pihole,1649461353.0
5334,comment,2,i3406gy,,Docker version would be really excellent!,pihole,1648909505.0
5335,comment,1,i33c84n,,Thanks for the reply!,pihole,1648894169.0
5336,comment,2,i35oe1w,,Because I have been lazy as heck to actually do it so the reinstall of gravity sync starting fresh is the perfect opportunity to also re-flash the distro. I guess i should have phrased it a little better on re-reading,pihole,1648937409.0
5337,comment,-3,i33n5se,,[deleted],pihole,1648902384.0
5338,comment,1,i33om71,,[deleted],pihole,1648903296.0
5339,comment,2,i38yrth,,"Haha, been there.",pihole,1649008307.0
5340,comment,2,i33orkd,,for sure pis are stable. but in your case ads and trackers can actually bypass your pihole using the secondary dns. don't you see the value of the secondary pihole?,pihole,1648903389.0
5341,comment,2,i33onue,,Already running OPNsense :),pihole,1648903324.0
5342,comment,-3,i33q9oz,,[deleted],pihole,1648904295.0
5343,comment,3,i34rwwy,,that seems more complicated than just running two pi containers.,pihole,1648921898.0
5344,post,4,ttx4nt,First timer: I just switch from Adguard Home to Pi-Hole 5.9,"However, everything is completed via the Raspberry Pi4 Homebridge installation wizard/setup.

Unifi router is pointed at my Pi4 for DNS.

Everything is working and being filtered but I have heard about DoH. Is Pi-Hole v5.9 not setup for DoH by default? How do I know if it is enabled?

Screenshot here shows some INSECURE and some SECURE.

&#x200B;

https://preview.redd.it/875w2ny3iyq81.png?width=1954&format=png&auto=webp&s=9f1dd9b2eaccced582c2e0cf245cd2f731ad1f94",pihole,1648835915.0
5345,comment,3,i30k57c,,">Is Pi-Hole v5.9 not setup for DoH by default?

It is not.

>How do I know if it is enabled?

You would have to install add-on software to have an upstream DNS server.  Cloudflared, Stubby, etc.

>Screenshot here shows some INSECURE and some SECURE.

This is completely unrelated to DoH.  What you are seeing are the results of the DNSSEC authentication.

    SECURE == I've found a signed records and they validate.
    BOGUS == I've found a signed record and the signature is bad.
    INSECURE == I've found no signed records, either the domain is unsigned and not implementing DNSSEC or there are other issues, but I can not say it's SECURE or BOGUS.",pihole,1648837775.0
5346,comment,3,i30r5kq,,"No, you have to do it manually. Details are available here. 

https://docs.pi-hole.net/guides/dns/cloudflared/  


If you are using/planning to do it in docker, you have to clone following and build your own docker image with latest version, which will include both DOH/DOT configured automatically. It's very simple process.

[https://github.com/oijkn/pihole-doh-dot](https://github.com/oijkn/pihole-doh-dot)",pihole,1648840664.0
5347,comment,-2,i30zt65,,"Bruh, adguard literally has a button for this in settings, and a field to put the doh server... why hasn't pihole implemented this basic feature that has quickly become necessary in today's world?",pihole,1648844267.0
5348,comment,1,i31r20q,,"DoH can be accomplished by adding dnscrypt-proxy to your configuration.  I have it working w/latest release of pihole.  

I have read some claim it’s not required from a security standpoint and others claim it’s the latest requirement to remain secure - your choice.",pihole,1648856677.0
5349,comment,1,i30m3so,,"Thank you,

I am not sure if DoH is really important to have on Pi-Hole but I ran into issue during the install over my Pi4. --legacy isn't working in that command line.

Is this basically same as Unbound setup? I wonder if I should set that one up instead.",pihole,1648838583.0
5350,comment,6,i31n7s3,,">	why hasn’t pihole implemented this basic feature that has quickly become necessary in today’s world?

Because it's not **necessary** and Pi-hole is based on dnsmasq which does not support DoH.",pihole,1648854797.0
5351,comment,1,i30mvss,,">I ran into issue during the install over my Pi4. --legacy isn't working in that command line.

I'm not following you here.  Please elaborate.

>Is this basically same as Unbound setup? I wonder if I should set that one up instead.

The normal setup for unbound (and particularly so with our guide) is as a recursive DNS server, not as a forwarding encrypted (DoH or DoT) server.

What is it that you are trying to accomplish?",pihole,1648838900.0
5352,comment,-1,i31rclo,,[removed],pihole,1648856823.0
5353,comment,1,i30o5ms,,"I ran into this issue here:
https://discourse.pi-hole.net/t/cloudflared-legacy-service-install-fails/54160

It seems like I need a cloudflare account?


---

I was trying to setup Pi-Hole securely and forget.",pihole,1648839423.0
5354,comment,1,i31v9jv,,Have a nice day.,pihole,1648858789.0
5355,comment,1,i323n9p,,Removed as a violation of rule 5 - always be civil.  Please review this rule prior to further posting.,pihole,1648863036.0
5356,comment,0,i31vqlw,,[removed],pihole,1648859025.0
5357,comment,2,i31w18n,,Removed as a violation of rule 5 - always be civil.  Please review this rule prior to further posting.,pihole,1648859174.0
5358,post,1,ttwzed,What do the different icons in my adlist mean? And how is my blockrate so low?,"Hi,  i have my pihole up and running for some weeks now. Before everything  
worked fine but i always wondered about the different icons and also why my rate is so low now. would appreciate some advice :) 

&#x200B;

Also:  When i check websites like [fuzzthepiguy](https://fuzzthepiguy.tech/) or [canyoublockit.com](https://canyoublockit.com/), i get flooded with adds when using edge, where i dont have any adblocker installed. 

&#x200B;

&#x200B;

[icons](https://preview.redd.it/6o9b6ce0hyq81.png?width=41&format=png&auto=webp&s=96d6d85990714583ec281692194dab10c12f49aa)

&#x200B;

[queries](https://preview.redd.it/2oudddj2hyq81.png?width=814&format=png&auto=webp&s=87a768ca3f635e4f3ee5bf1d8d33a4a346e46cb4)",pihole,1648835557.0
5359,comment,3,i30jiut,,"The icons show you the status of each of your subscribed adlists.  If you click on the icon, you will see a pop-up with some details of that adlist.

From your connected client, and from the terminal or command prompt on that client (and not via ssh to the Pi terminal), what are the outputs of the following?

`nslookup pi.hole`

`nslookup flurry.com`",pihole,1648837520.0
5360,comment,1,i30t1uy,,"    nslookup pi.holeServer:         2a02:810d:a340:f94:10:18ff:fe2e:de7cAddress:        2a02:810d:a340:f94:10:18ff:fe2e:de7c#53** server can't find pi.hole: NXDOMAIN
    
    nslookup flurry.comServer:         2a02:810d:a340:f94:10:18ff:fe2e:de7cAddress:        2a02:810d:a340:f94:10:18ff:fe2e:de7c#53Non-authoritative answer:Name:   flurry.comAddress: 98.136.103.23Name:   flurry.comAddress: 212.82.100.150Name:   flurry.comAddress: 74.6.136.150
    
    

thats what came out.",pihole,1648841447.0
5361,comment,3,i30ucrr,,This client is not using Pi-hole for DNS.  It is using an IPv6 DNS server other than Pi-hole.,pihole,1648841986.0
5362,comment,1,i30t9bz,,i know about the popup. but both were added yesterday. the only difference is that one was updated 2h ago the other one a day ago,pihole,1648841533.0
5363,comment,1,i30vpvm,,"oh ok, would you be so kind to send me a link how to change it to ipv4 and ipv6? or maybe i should just set it up completely to be a dns hole?",pihole,1648842555.0
5364,comment,3,i30vgiy,,"Under the circled icon, you may see the following (or similar text):

    Health status of this list:	List unchanged upstream, Pi-hole used a local copy (OK)
    This list was added to Pi-hole  	6 months ago (2021-10-01 10:47:24)
    Database entry was last modified  	4 months ago (2021-12-14 20:21:38)
    The list contents were last updated  	6 days ago (2022-03-26 10:26:42)
    Number of domains on this list:  	57
    Number of invalid domains on this list:  	0
    Database ID of this list:	245

If the list is unchanged on the server when Pi-hole checks for updates, a local copy is used to minimize load on the blocklist server.",pihole,1648842448.0
5365,comment,1,i310cqa,,"As a first troubleshooting step, turn off IPv6 on this client.  Then it won't be able to use an IPv6 DNS server.",pihole,1648844492.0
5366,comment,1,i30vrpe,,so thats completely normal?,pihole,1648842576.0
5367,comment,1,i335qkc,,"so, i have turned off IPv6 on this client (win 10 pc). i dont see any changes yet (regarding the ads in edge)",pihole,1648888367.0
5368,comment,3,i30zzzl,,">	so thats completely normal?

Appears to be, yes.",pihole,1648844344.0
5369,comment,1,i33jp99,,the percentage blocked is going up though,pihole,1648900074.0
5370,post,0,ttwr7e,How do i find my DNS server?,How do i find out what my DNS server is? if im running with default settings (google) do i just make the dns server do i just connect with 8.8.8.8?,pihole,1648834998.0
5371,comment,2,i30gngh,,"For Linux and widows. 

https://www.isunshare.com/windows-10/check-dns-address-in-windows-10.html

https://www.tecmint.com/find-my-dns-server-ip-address-in-linux/",pihole,1648836348.0
5372,comment,2,i337beu,,"A simple way, across linux and windows would be to do a nslookup. It would tell you the servers.

    nslookup example.com",pihole,1648889805.0
5373,comment,1,i30f4e0,,Edit: I baso just want to find a way to find what the dns server numbers are,pihole,1648835729.0
5374,comment,1,i30gdpr,,"In Linux the command below, in windows look in the connection properties.

`stan@hp-800:~> cat /etc/resolv.conf`  
`search home.arpa`  
`nameserver 172.16.2.20`  
`nameserver 172.16.2.21`",pihole,1648836240.0
5375,comment,1,i30jq6q,,What client OS are you running?  How to do this depends on the operating system.,pihole,1648837604.0
5376,comment,1,i31midq,,Pi os 32 (not lite),pihole,1648854453.0
5377,post,30,tttp7j,"Pi-Hole with Nginx Reverse Proxy - Redirection to /admin , working but small issue","Hi,

I am using Nginx reverse proxy to configure secure Pihole access over internet, and it is working perfectly fine. I am running in in docker, and initially having issue with /admin redirection, as I had to do it manually.

Later I have used the following rule to get it fixed from Nginx reverse Proxy.

    # Pihole /admin/ Fix
     location / {
     proxy_pass http://192.168.0.114:8008/admin/;
     proxy_set_header Host $host;
     proxy_set_header X-Real-IP $remote_addr;
     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
     proxy_read_timeout 90;
      }

&#x200B;

https://preview.redd.it/xgpuhz66txq81.png?width=515&format=png&auto=webp&s=0a56b87354ca8213de6a4b3715ab9be4de0bb344

Using this rule, everything working fine without any issue except if i go to settings> API/Web Interface and click show API token, I am getting this with  refused to connect. If I remove the rule, it works.

&#x200B;

https://preview.redd.it/bwsnw7resxq81.png?width=592&format=png&auto=webp&s=6c2d2503e2ccf9b9cce84babdabccd5e455e5084

Any way to fix this?

&#x200B;

Every other URL with this rule working fine.

https://preview.redd.it/afmuhbkjtxq81.png?width=1737&format=png&auto=webp&s=42b64fab5ad17a1c5d99436e01da9fc890f505a4",pihole,1648827507.0
5378,comment,5,i30ffc5,,"Looks like it's an X-Frame problem from playing around with it. I'm not clear in my wee brain ""why"" but this seems to fix it. (Meaning why is 'set\_header' not enough and 'hide\_header' seems needed also.)

location / {  
proxy\_pass http://192.168.0.114:8008/admin/;  
proxy\_set\_header Host $host;  
proxy\_set\_header X-Real-IP $remote\_addr;  
proxy\_set\_header X-Forwarded-For $proxy\_add\_x\_forwarded\_for;  
**proxy\_hide\_header X-Frame-Options;**  
**proxy\_set\_header X-Frame-Options ""SAMEORIGIN"";**",pihole,1648835851.0
5379,comment,3,i30ospk,,"Yup, it is working now. Thank you :)

Full code:

Note : Do not use $server & $port, somehow it is not working, you have to use IP and port directly.

    # Pihole /admin/ Fix
     location / {
     proxy_pass http://YourIPAddress:PiPort/admin/;
     proxy_set_header Host $host;
     proxy_set_header X-Real-IP $remote_addr;
     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
     proxy_hide_header X-Frame-Options;
     proxy_set_header X-Frame-Options ""SAMEORIGIN"";
     proxy_read_timeout 90;
     }",pihole,1648839689.0
5380,comment,1,i33vtqv,,"I use this option when I start my NPM container by using the environment variable.

  `- X_FRAME_OPTIONS=""sameorigin""`

I was struggling with the same but posted in this [reverse proxy](https://www.reddit.com/r/pihole/comments/bv75sw/comment/i33tz3d/?utm_source=share&utm_medium=web2x&context=3) thread an image of how to do this as a custom location instead of the advanced custom configuration, very simple but not intuitive. Just need to add /admin/ to your pihole forward, but as a custom location. When adding to initial page it doesn't work as expected.",pihole,1648907337.0
5381,comment,1,i31gth6,,I don’t even see $server and $port in your example,pihole,1648851745.0
5382,comment,1,i3284sx,,See the edit proxy host screenshot.,pihole,1648865343.0
5383,comment,1,i32iptx,,Ah in the proxy pass?,pihole,1648871102.0
5384,comment,1,i33uyz7,,Yup,pihole,1648906894.0
5385,post,0,ttslxo,What are these types of requests from my printer?,"I have been seeing these come from my printer for a while.  It reaching out to all of my LAN IP's while it is on a separate IoT VLAN. 

[Pihole Querries](https://imgur.com/a/XfQ4rDs)

Are these reverse look ups?  I see these .arpa strings (with a reverse local IP ) show up a bunch.",pihole,1648824787.0
5386,comment,3,i2zozyp,,Reverse dns queries,pihole,1648825436.0
5387,comment,2,i3049j3,,"As a other commenter noted, these are reverse DNS queries. The printer is asking ""what is the name of the client at this IP address"", and the IP address is listed in reverse order.",pihole,1648831507.0
5388,comment,1,i309sc3,,Thank you!,pihole,1648833634.0
5389,comment,1,i30ade4,,"Thank you! This is kind of what I assumed, but didn't want to be too-afraid-to-ask - there is so much I don't know!",pihole,1648833857.0
5390,post,1,ttscj3,German Black-/Block-/Adlist,"Hello there.   
As a new member of the infamour Pihole-Club i found way more Lists for American/English Regions oder Ads. As the titlesuggests.. i need way more european/german Lists. Any hints?  
Thanks!",pihole,1648824124.0
5391,comment,5,i2zmrs7,,"https://oisd.nl/

If you look at his `included lists` section you'll see he includes a lot of international lists in his full list.  I would say just using his full list should be the only list you'll ever need.",pihole,1648824535.0
5392,comment,1,i310r6v,,"Like this one? 

https://raw.githubusercontent.com/miriquidi/dns-block-lists/main/block.txt",pihole,1648844662.0
5393,comment,2,i304zes,,Duuuude.. thanks a lot. Will test right away!,pihole,1648831788.0
5394,post,2,ttqwsb,Docker pihole-FTL: no process found,"Hello all,

After an OS update to my linux box (Ubuntu 20.04), my pihole container won't start. All my other containers seem to be up, but pihole gets in the following loop.

    Starting pihole-FTL (no-daemon) as pihole
    Stopping pihole-FTL
    pihole-FTL: no process found

I can access the container so I'm able to get into my debug log: [https://tricorder.pi-hole.net/ygJvU2BY/](https://tricorder.pi-hole.net/ygJvU2BY/)

Edit: Adding my docker-compose 

    version: ""3""
    services:
      pihole:
        container_name: pihole
        image: pihole/pihole:latest
        network_mode: host
        environment:
          TZ: 'America/New_York'
          WEBPASSWORD: 'REDACTED'
        volumes:
          - './etc-pihole/:/etc/pihole/'
          - './etc-dnsmasq.d/:/etc/dnsmasq.d/'
        cap_add:
          - NET_ADMIN
        restart: always

Any help would be appreciated!",pihole,1648820360.0
5395,comment,2,i2zftw6,,"This may be the same problem reported here:

https://github.com/pi-hole/docker-pi-hole/issues/1019",pihole,1648821616.0
5396,comment,2,i2zfzdh,,"found something on the github related to ubuntu update 20.10.14

[https://github.com/pi-hole/docker-pi-hole/issues/1019](https://github.com/pi-hole/docker-pi-hole/issues/1019)

Try adding env variables as follows:

\-e DNSMASQ\_USER=root

or

\-e PIHOLE\_UID=0

&#x200B;

edit: Posted above.... and works for me",pihole,1648821684.0
5397,comment,1,i2zf58d,,"Same issue, posting for followup",pihole,1648821317.0
5398,comment,1,i2zho3n,,Thanks all for the quick reply - the issue/solution linked by u/jfb-pihole and u/LuN-z was the answer.,pihole,1648822410.0
5399,comment,1,i2zgs0j,,Thank you (as well as thanks to the others that replied) for the quick reply! This looks to be the cause and I'll test out the interim solutions.,pihole,1648822026.0
5400,comment,1,i2zhiyu,,The fix listed above works,pihole,1648822349.0
5401,post,7,ttn7sw,Malware or Tracker,"    - t.nylas.com/ 
- znsrc.com

These two domains strick again and again. May I block these domains or not.  
According to Virus total, these are media-sharing domains.   
[znsrc.com](https://znsrc.com) is blocked by [1host](https://raw.githubusercontent.com/badmojr/1Hosts/master/Xtra/adblock.txt) blocklist and the other one doesn’t know.  
Any suggestions.",pihole,1648807852.0
5402,comment,4,i2z3tl8,,"For your reference, I outright blocked some CDN networks as they often host malicious scripts. As the script hosting services change domains quite frequently to avoid domain blocking, I outright blocked the CDN, as I found out they often use the same VPS so the same CDN network.

If you blocked it and nothing broke, you can safely block it.",pihole,1648815944.0
5403,comment,2,i2z0js6,,Looks like a tracker. Alienvault has alot of 1x1 image files listed for it.,pihole,1648814150.0
5404,comment,1,i2z3yfn,,Thanks 👍,pihole,1648816014.0
5405,comment,1,i31hkfu,,"for those wanting to use alienvault, google alienvault OTX to get a page you can use.",pihole,1648852095.0
5406,post,0,ttjdlg,Thousands of --connect-timeout responses from the modem?,"I have a Zyxel C4000BG router-modem (I'm on CenturyLink DSL, because it's literally all that gets here), and Pi-Hole running on a Debian 10 machine that serves DNS and DHCP.  I'm getting blocks of **hundreds** of requests from the modem (gateway, [192.168.0.1](https://192.168.0.1)) that are resolving --connect-timeout - about 10 for ever other DNS request from our machines (140k of these vs 14k all other DNS requests).  Any idea what's doing this?  It's not breaking anything (everything seems to be working fine), but it sure makes it hard to find anything in the query log if I need to hunt something down.  


EDIT: We were previously using a Zyxel PK5001Z modem that was not exhibiting this behavior.

https://preview.redd.it/djrbr3ostuq81.png?width=967&format=png&auto=webp&s=896aa9dac99a57ee3a093fc5879721ce8e795520",pihole,1648791547.0
5407,comment,2,i2yihkn,,"hallo this is maybe your problem
https://www.bleepingcomputer.com/news/security/zyxel-patches-critical-bug-affecting-firewall-and-vpn-devices/",pihole,1648800455.0
5408,comment,1,i30q9qd,,"The C4000BG does not appear to be one of the affected devices, and mine has the most recent available firmware.",pihole,1648840299.0
5409,post,1,ttiypb,How can I persist/retain Unbound cache across reboot?,"I care for my privacy so when I discover Unbound DNS, I started using it with Pi-hole. The problem is across reboots, I notice that my browsing seems slow again due to the rebuilding of cache. I can confirm this using the ""dig"" command. How can I persist Unbound cache across reboot? Thanks",pihole,1648789976.0
5410,comment,1,i2yhie9,,https://github.com/NLnetLabs/unbound/blob/master/contrib/unbound_cache.sh,pihole,1648799630.0
5411,comment,2,i31x8ot,,"You should use Unbound's cachedb module instead.

The above is not exactly flexible, and you're still going to lose your cache in unexpected closure conditions. With cachedb the cache is persisted to database as a fundamental part of Unbound's operation, to be served optimistically with ttl0 later.",pihole,1648859786.0
5412,comment,1,i331r9u,,"can't use cachedb module. cachedb and respip modules cannot be loaded together, its either ... or ...

since I use rpz (read [here](https://jpgpi250.github.io/piholemanual/doc/Unbound%20response%20policy%20zones.pdf)), the cachedb module is not an option",pihole,1648884860.0
5413,comment,1,i332ozx,,">can't use cachedb module. cachedb and respip modules cannot be loaded together

Compile mainline. From memory this was added as an allowed module configuration quietly not terribly long ago.",pihole,1648885674.0
5414,comment,1,i3346pk,,"using compiled (latest) 1.15.0, added cachedb module to config to show the result:

sudo /usr/sbin/unbound-checkconf
[1648886943] unbound-checkconf[15131:0] fatal error: module conf 'cachedb respip' is not known to work

edit
reported (issue) [here](https://github.com/NLnetLabs/unbound/issues/593).
/edit",pihole,1648886982.0
5415,comment,1,i334baw,,This is from 15.1 mainline?,pihole,1648887094.0
5416,comment,1,i335d4j,,compiled 1.15.0 from tar.gz [here](https://nlnetlabs.nl/downloads/unbound/unbound-1.15.0.tar.gz),pihole,1648888029.0
5417,comment,1,i3371pl,,">compiled 1.15.0 from tar.gz here

""No"" would've been fine, but thanks.

I just checked my module config definition. It's as follows:

```
module-config: respip subnetcache validator cachedb iterator
```

It's 1.15.1, built from 8f8a8a3 specifically.",pihole,1648889556.0
5418,comment,1,i337ogr,,"I found it does compile and unbound will start.
I was using redis (cachdb) and added rpz (respip).
depending on the order you load the modules, I found that either redis OR rpz simply doesn't work anymore.
Are you using redis? If yes, does the redis database contain entries? I'm using  [this](https://packagist.org/packages/erik-dubbelboer/php-redis-admin) to look at the redis database.
Are you also using rpz? look at my [manual](https://jpgpi250.github.io/piholemanual/doc/Unbound%20response%20policy%20zones.pdf) to configure it, make sure you get the desired responses (log entries).
haven't tried compiling from github yet, will test this asap.

thanks for keeping the conversation going...",pihole,1648890136.0
5419,comment,1,i339be3,,">Are you using redis? If yes, does the redis database contain entries?

Yes, and yes.

>Are you also using rpz?

Yes.

>look at my manual to configure it

I'm pretty well versed with Unbound, thank you.",pihole,1648891603.0
5420,comment,2,i33ctmj,,"just compiled unbound from github repository, YOU are correct, both cachedb and respip can be used together in unbound 1.15.1. Thanks for your help.",pihole,1648894680.0
5421,comment,1,i33dwg3,,"I went looking for the exact commit that added it briefly during a break and I couldn't see it immediately. There wasn't exactly a huge fanfare about it if I recall correctly. I found it indirectly through following a chain of issues and just happened to see the diff included allowing that combination, and another combination, that was previously off limits for as far as I can tell no good reason (and which I used to just patch out the checks for in configure myself).

I went looking for the logic behind disallowing specific combinations in the module parser in the first place and it seemed to basically boil down to there only being very few valid combinations (as you know, modules need to be loaded in a specific sequence), and no one really testing those cases specifically/or seeing why anyone would use them in that combination.

The chain of conversation in the issue was basically just ""oh hey yeah if that works sure why not"".",pihole,1648895585.0
5422,comment,2,i378lt2,,"thanks again for making me aware of the recent change that allows cachedb and respip to work.

A question, since you appear to be an expert. Is it possible (and how) to see the entries (domain names) in the redis database?

Thanks for your time and effort.",pihole,1648973320.0
5423,comment,1,i37b6b2,,"I mostly use [redis-munin](https://github.com/bpineau/redis-munin) for a general overview of what my master database is doing.

The cachedb/Redis relationship isn't really designed with human readability at the forefront, or at all really. Cache entries as far as I'm aware are just raw data hashed with the random seed. You could view this if you wanted to using a fairly simple project, [phpRedisAdmin](https://github.com/erikdubbelboer/phpRedisAdmin), but it's not overly useful in this context, [here's a small snippet](https://imgur.com/a/1jrjAHa) of one of my nodes with an entry being viewed. I haven't bothered making sure the encoding is agreeable on both ends so it's possible I may be able to clean up the cache entry content itself - but you can see the domain is visible.

It's possible you may be able to dump db entries to terminal using [redis-cli](https://redis.io/docs/manual/cli/) and some combination of its `--scan` pattern matching, but I haven't actually tried.",pihole,1648975422.0
5424,comment,1,i37cfi5,,"Thanks.
I am aware of phpredisadmin (and using it), but, as you indicated, the record content isn't very helpfull. Will look into redis-cli...

personally, not using munin but [this](https://grafana.com/grafana/dashboards/12776) grafana dashboard, which has some usefull info about redis, not the database content though...
grafana [screenshot](https://imgur.com/a/nDHTDRm)

Thanks again.",pihole,1648976467.0
5425,post,2,tthhz0,Pi-hole + Unbound cgnat,"Recently my isp changed to use cgnat, since then have been getting intermittent timeouts

Question is, would a change to cgnat cause this kind of problem or am I looking at a red herring?

If I update my configuration to bypass the Pi-hole setup everything works perfectly",pihole,1648784769.0
5426,comment,1,i2z6bc2,,"The only thing I can think of which would create problems with unbound is if they have a caching dns server in between.

The possible problem is that the dnssec information is lost.

Another source could be that their equipment does not work well with the number of udp streams used.

Pihole itself should not be affected.",pihole,1648817215.0
5427,post,0,ttgnuh,Setting up a new pi-hole,"I had an old set up for pi-hole from years ago when I really didn't know what I was doing.  I am pretty sure it was never set up right since it never seemed to block ads on my smart tv.  

I just set up a new one and followed a more in depth video guide, but it wasn't up to date on the new options I was seeing.  I got to the point where it is asking if I want to set the pi-hole up to use Ethernet or WAN. If I set it up as WAN and still connect an Ethernet cable, will that cover all of my devices, or will it just cover the wireless ones?",pihole,1648781945.0
5428,comment,2,i2xulub,,">	I got to the point where it is asking if I want to set the pi-hole up to use Ethernet or WAN.

I think you mean wlan (or WiFi). Given the two options it is preferable to run the Pi connected to your network via ethernet (for reliability reasons).

>	will that cover all of my devices, or will it just cover the wireless ones?

The method by which clients connect to your network should have no bearing on this. As long as the Pi has a static IP, clients can always reach it at that IP, regardless of whether the clients are wired or wireless.",pihole,1648784264.0
5429,comment,1,i2xqjb5,,"Should, I choose ETH today, and I am on WLAN.",pihole,1648782183.0
5430,comment,1,i2xs6nt,,"Cool.  Hopefully, it works like it is supposed to this time around",pihole,1648783008.0
5431,post,0,ttds61,Another post where performance sucks ass with the newer update,"So - I have been running pihole natively with unbound - I also do this with 30+ containers and I have been very particular with my 4GB pi running everything.  Over the last month or so plus, I've been trying to manage my overheads and the reality is the pihole will go down for no reason at all when the rest of the stack should have remained active.

The most important part of my stack is pihole and unbound, If my DNS does not work, everything else hits the dirt.  I'm in the process of removing those two to run on a pi2zero and I'm going to run dietpi for this.   The docker stack will run on the pi 4.

I'm going to tell you a secret - the last update I did on my pi,  I was unable to flush the current status without changing the branch - I did this and I guess it kinda worked.

Kinda....  So I'm currently stuck with what appears to be a half working pi hole with the expectation it will kinda, mibbie, almost works on the next official release - however the reality is that there appears to be so much more wrong that pihole and unbound barely work on their own.

I have experienced EXTREME slowdowns to the extent I have to restart the pi from CMD IF i can, however if I refresh the pihole it suddenly crashes.

I want to reiterate - what others have suggested, the recent update to pihole has been a massive resource hog to something that actually really worked well, and I recommend that people pay attention to.

I am concerned that with the original error that causes people to use a different branch, is so large that it's not just a few people and that even with the 'fix' (using a different branch)  that it's working worse than previous updates.

Do you mind explaining with the sudden increases in resources?  What about an actual fix for those that are unable to clear and refresh their DB without changing branch?

I'm sorry but I carefully manage my memory, CPU usage and temperature - but I have never seen this pi less stable, much less responsive and much more of a pita than it used to be.  I have used this pi with unbound for over a year.

I would love to be the only person to voice performance decreases, but I know for a fact I'm not the only one - but even with my docker stack disabled, the performance is P poor and really should be reviewed.

Thanks,
Ian.",pihole,1648772665.0
5432,comment,2,i2x933v,,">	I’m going to tell you a secret - the last update I did on my pi,  I was unable to flush the current status without changing the branch - I did this and I guess it kinda worked.

That's not a secret. It was a reported bug which we addressed and fixed the day after it was reported. 

https://github.com/pi-hole/pi-hole/pull/4609

>	What about an actual fix for those that are unable to clear and refresh their DB without changing branch?

As is our normal practice, new code goes into the development branch. After we accumulate enough changes to the code to make a new release, we then issue a new release. Some critical problems that prevent Pi-hole from running are resolved with a point release, but this problem is not in that category. 

>	the recent update to pihole has been a massive resource hog

Does **htop** show any part of Pi-hole consuming significant or abnormal resources?  You note that unbound is also slow, but that is software separate from Pi-hole. 

You also note 30+ containers running in the same Pi. No changes were made to any other software running on the Pi?

>	So I’m currently stuck with what appears to be a half working pi hole

Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1648774142.0
5433,comment,2,i2xc3nw,,"*****************************************************************
*****************************************************************

[✓] Your debug token is: https://tricorder.pi-hole.net/PEe6M1lv/
[i] Logs are deleted 48 hours after upload.

*****************************************************************
*****************************************************************

   * Provide the token above to the Pi-hole team for assistance at https://discourse.pi-hole.net
   * A local copy of the debug log can be found at: /var/log/pihole_debug.log",pihole,1648775500.0
5434,comment,0,i2xbk8x,,">> That's not a secret. It was a reported bug which we addressed and fixed the day after it was reported.

great so if I update pihole I will be upgraded to that version, right?

>> Does htop show any part of Pi-hole consuming significant or abnormal resources? You note that unbound is also slow, but that is software separate from Pi-hole.

No, the whole system shits itself from the second it is turned on - a month ago, about 10 seconds after reboot the stack would work no errors.  These days the system will barely update with the stack running and even without the stack running it runs like shit.

>> Please generate a debug log, upload it when prompted and post the token URL here.

I will do this, although I'm willing to accept I run the pi to the metal and if given the option would buy an 8GB if they were available, knowing just how badly pi-hole / unbound went from hero to zero I am genuinely interested in what is going on.",pihole,1648775258.0
5435,comment,1,i2xdofe,,">	if I update pihole I will be upgraded to that version, right?

Maybe.  The fix is currently in the development branch. When you update Pi-hole, it updates on the current branch you are running. If you are on the development branch, you will get the fix. If you are on the master branch, the fix is not in master yet and you won't get the fix. 

Should you prefer to run development code for a while, run the following to move to that branch:

`pihole checkout dev`

>	knowing just how badly pi-hole / unbound went from hero to zero I am genuinely interested in what is going on.

As I noted in my earlier reply, unbound is separate software. If both unbound and Pi-hole are having problems at once, the problem may lie outside either of those packages.  Along with your debug token, please post the output of `htop.",pihole,1648776210.0
5436,comment,1,i2xfhe0,,"I went back to the 'stable' branch after having the fixes applied - there is no point in me cleansing the database when the software itself is not worth a do docken leaf.  You have already accepted there is an issue with this - are you going to send me back to unbound to query this?

On checking htop currently, home assistant is currently taking over python3  with about 7% of memory and 1.2% CPU- I can check this again later tomorrow for your curiosity - but as I said before, even if I stop the stack and do an update, the system runs away with itself.  I have an uptime of almost 4 hours right now and this time tomorrow I can down the stack to the point that only pihole and unbound are running with the very basic software, it will start an update and then crash out doing its own update - its own update.  I know I'm not the only one having these issues after the recent update, so are you saying there IS an issue with unbound, or are you saying, you do not actually know?",pihole,1648777020.0
5437,comment,1,i2xgeu3,,"Your debug log doesn't show details of unbound, as that is not our software.  Your debug log does show that queries are being forwarded to unbound and answered, so this indicates that unbound is working properly. 

>	You have already accepted there is an issue with this - are you going to send me back to unbound to query this?

I'm not following you here. How is unbound related to the flush logs issue?

>	even if I stop the stack and do an update, the system runs away with itself.

Please elaborate. System runs away how?

I think your best troubleshooting is to stop all the other processes running on the Pi, including unbound. Just the ports in use section of the debug log is over 50 lines, which indicates that there are many processes that can be causing system slowdown. 

When you get that pared down, run the Pi-hole updater and post the complete output.",pihole,1648777444.0
5438,comment,1,i2xhqza,,"I will try that breakdown tomorrow and see how I get on - I've switched back to the dev branch and will run it for a while again to see if it makes a difference. however even with quite sufficient CPU and memory available I  have found that the system will suddenly go down even doing an update and eventually the system will crash because the pi will not resolve its own IP to continue the update.  Hence why I'm currently in the process of transferring pi-hole and unbound to a separate device, however after my initial query about resetting logs - I have recognized I am certainly not the only person that has seen significant increases in system lockups and random problems that is also having the same issues with this version of pihole.

thanks.",pihole,1648778102.0
5439,comment,1,i2xilqa,,">	the pi will not resolve its own IP to continue the update

I'm not following you here. Are you saying that when Pi-hole is not responsive the Pi can no longer resolve DNS?  If this is the case, change the nameserver assignment for the Pi to something other than Pi-hole. This will allow the Pi to reach the internet regardless of the status of Pi-hole.",pihole,1648778486.0
5440,comment,1,i2xlnlm,,">	I have recognized I am certainly not the only person that has seen significant increases in system lockups and random problems that is also having the same issues with this version of pihole.

We have six open issues on Github since the latest release, and none appear to be similar to the problem you are reporting. 

https://github.com/pi-hole/pi-hole/issues?q=is%3Aopen+is%3Aissue",pihole,1648779885.0
5441,comment,1,i2xjz6y,,"At random times, including when updating the pi itself, the whole network stops being able to resolve DNS - this is due to pihole and unbound running on the same device (from what I have diagnosed so far).  When I restart the pi and shutdown docker - sometimes the pi will then allow me to update anything available but for the last 30+ days even doing an update takes ages - but when I check the admin interface nothing is running over.  I went from running 29 containers in November to 31 today - and due to system resources 4 of those are currently permanently offline.  However as I said even with docker down the whole system will grind to a halt with just pihole and unbound running - if you are asking me to change the DNS away from pihole - then yes, it works great pointing everything back to my router, but that does not really resolve the issue of wanting to use pihole.",pihole,1648779121.0
5442,comment,1,i2xmido,,"Right and the first check I did I found something similar to the outcome of my own problems - I also know that people have complained here about similar issues and also been dismissed

https://github.com/pi-hole/pi-hole/issues/4613

This is the ultimate end point of my problems - the whole networks locks up with no DNS resolution, I need to restart the pi to get anything back and it has got to the stage I do this every few days regardless of how much I keep an eye on the resource usage.

Actually, let me retract that - my issue is that pihole will lockup, not lookup - this was my error and I do apologize, however my comment about general responsiveness still stands.",pihole,1648780283.0
5443,comment,1,i2xkvtk,,">	At random times, including when updating the pi itself, the whole network stops being able to resolve DNS

This is why I recommended that the Pi not use Pi-hole as DNS server. 

>	this is due to pihole and unbound running on the same device (from what I have diagnosed so far)

Have you tried changjng the upstream DNS server used by Pi-hole to something other than unbound to see if the problem changes?

>	for the last 30+ days even doing an update takes ages

Is this because the Pi cannot resolve DNS queries, or for other reasons?  The apt update process can find all the packages?",pihole,1648779534.0
5444,comment,1,i2xndg7,,">	https://github.com/pi-hole/pi-hole/issues/4613

Nothing was dismissed in that link. It was marked as a confirmed bug. 

But, it doesn't appear to be the problem you are reporting here.",pihole,1648780684.0
5445,comment,1,i2xltaf,,"> Have you tried changjng the upstream DNS server used by Pi-hole to something other than hnbiund to see if the problem changes?

Because I want the pi to use unbound and Pi-hole as part of the system I have tried to avoid doing this, however as part of troubleshooting I will do this for the next few days to check.

>>Is this because the Pi cannot resolve DNS queries, or for other reasons? The apt update process can find all the packages?

For the most part it's almost like the pi cannot resolve itself - from ssh the pi just pauses and 'pretends' it's doing something when clients connected to the pi display dns errors - those CLIENTS cannot find the internet, when the PI just gets stuck at updating or stuck at anything else you ask it to do during this time.

I just find it really weird that the average load, temp, cpu usage etc are not anything above average - and that even from start to stop the system has just been extremely sluggish since the recent update to pi hole.",pihole,1648779958.0
5446,comment,2,i2xno0h,,"apologies, that was me being too quick to comment and I have reflected my reply to show this - I will look into what we have discussed further, however it was only a few days ago where someone was commenting on the same thing.  This I admit is heresay and I need to do better.",pihole,1648780822.0
5447,post,210,ttcwtv,"New cooling for my Raspberry Pi 4, runnin Pi-Hole 🙂.",,pihole,1648769939.0
5448,comment,34,i2x9otv,,"What else are you running on it!?!? I'm on the zero w, load is never even close to that high with 4 people in the house, and temp usually running 42 (too hot for me)",pihole,1648774410.0
5449,comment,12,i2x0tjh,,Wow! What kind of case did you originally have? Big difference in temps there! Good job!,pihole,1648770413.0
5450,comment,10,i2xdaxp,,My 4B 4GB sits at 48° running Pi-hole and 13 other docker containers with average load ~18% on CPU. Passively cooled by Flirc case.,pihole,1648776042.0
5451,comment,29,i2x3ipa,," Temp: 43.5 °C
never had a case... shrug?",pihole,1648771636.0
5452,comment,4,i2y4vnv,,I use the Flirc case and it runs at around 43ºC,pihole,1648790250.0
5453,comment,6,i2x5u62,,"Not that mine was hot (around 42-44C) with running only Pi-Hole, but I had some high end 2mm 15W thermal pads laying around and I thought I should try it. Now the temps are 36-38C! Case is something similar to yours…",pihole,1648772687.0
5454,comment,3,i2xb4j6,,Pi Zero W with a free heat sink and 33 C 😂,pihole,1648775059.0
5455,comment,6,i2xbimt,,44C is nice for a Pi4...,pihole,1648775237.0
5456,comment,2,i2xwsz1,,Every case I buy with a fan for my pi dies within a few weeks.,pihole,1648785443.0
5457,comment,2,i2yvknc,,Are you in the UK - you could use this to heat your house after the huge energy bill increases today. (-;,pihole,1648811056.0
5458,comment,2,i2yy8lw,,"  
STATUS  
  
 ACTIVE  
 LOAD:  0.06  0.03  0  
 MEMORY USAGE:  5.9 %  
 TEMP: 30.2 °C",pihole,1648812778.0
5459,comment,2,i2zvp3v,,"*looks at my Pi Nano 3 running at 68C*

My adblocker literally burns ads in the pits of hell",pihole,1648828126.0
5460,comment,4,i2xgasa,,"A Pi 4 i a bit of overkill for Pi Hole, if that's all you're running on it, and they normally run hot no matter what the are doing, so they should usually have a fan or (my preference) a big heat sink case.

For reference, my Pi Hole is running just fine on an ancient (2015-ish, IIRC) model B+, and it's currently at 33.3% load and 39C.",pihole,1648777383.0
5461,comment,2,i2xi4yx,,"I too have like one of the best pihole 4s running just pihole.

Just pihole.

Always wanted to have it do more but never moved on it. I use more on too and I know it can do that, and I did have it run octoprint for awhile.

Might get my other out of the box finally when my prusa xl comes in this summer (I hope) and set it up for a camera and whatever else I can use it for for that printer.",pihole,1648778277.0
5462,comment,2,i2xuwbx,,Very sexy.,pihole,1648784419.0
5463,comment,1,i2xfgxu,,"Did you OC your pi? My last pi zero went to 70C, even to >100C then fried. You may want to be careful.

My pi4 is 45.8C at room temperature of 22.68C, CPU at idle",pihole,1648777014.0
5464,comment,1,i2xz90i,,Thanks buddy! Been using the config for more than an year but never realized pi-hole shows the temp until now.,pihole,1648786823.0
5465,comment,0,i2xbl0y,,Pi1 no heatsinks,pihole,1648775268.0
5466,comment,1,i2xc06e,,Pi 4B 2GB running Bullseye Arm64 showing 41.9C with an [Armor Case from PiShop.us](https://www.pishop.us/product/armor-case-passive-cooling-for-raspberry-pi-4-model-b-black/) .  That's bananas how hot that first screenshot was!  I wonder if it would've been cooler just sitting out in the air.  (But then you're potentially putting the thing at risk physically/electrically.),pihole,1648775456.0
5467,comment,1,i2xjriw,,"I've been keeping for + a year my pi next to the window and it will be under 30c, amazing tbh. Now it's under my desk, not as cool during summer but all nice",pihole,1648779024.0
5468,comment,1,i2yif7n,,"Damn, now I wanna check what mines sitting at.. meh, 50c with a heatsink.

I find that the new chips run a little hotter and necessitate some sort of cooling solution, but that's it. I stuck a heatsink on mine and it sits in some random cabinet in my entertainment stand with stagnant airflow and does just fine.

THAT BEING SAID gg on the cooling improvement, I'm always one for no moving parts but not only do fans not fail enough to not trust them, but the pi4 does fine with just a heatsink.",pihole,1648800398.0
5469,comment,1,i2z0n0k,,Where do I get that case?,pihole,1648814201.0
5470,comment,1,i2zooqz,,"Yike, mine is 35'c only alu enclosure (body heat sink). Running Homebridge + PiHole.",pihole,1648825312.0
5471,comment,1,i300sbx,,"Wow!! Isn't 85c the breaking point for the rpi cpu?  You must have something else running using 100% cpu, I know from time to time my **pcmanfm** acts up and starts using 100% of 1-3 cores and I have to use task manager to kill it or reboot.

That temp is only going to decrease the life of the board and its components!",pihole,1648830149.0
5472,comment,1,i30anen,,"Approximately 30 Docker containers 24/7 here. The most intensive services are Nextcloud (2 users), Duplicati, and some -arr containers.

I only have an aluminum passive heatsink, temp is usually around 37°C.",pihole,1648833963.0
5473,comment,1,i30kgpl,,I put a simple passive cooler on the chip and it stay under 83C max load. I have no ideas how you managed to get it that hot.,pihole,1648837908.0
5474,comment,1,i315zio,,"Impressive. For me, a pi with a cooling fan kind of defeats the purpose..",pihole,1648846885.0
5475,comment,0,i2x6zvz,,what OS are you running on it ? is it strictly for running pinhole ?,pihole,1648773209.0
5476,comment,38,i2xcdpx,,"Well Valheim server, SAMBA, torrent client, HDD, nginx, Pi-VPN, Pi-Hole, Archi, Tor relay, Tor Bridge, Webmin, a GUI which is a bit unnecesairy at this point and a few folder monitoring scripts. That should be about it. Also had a Mysterium node on but I reflashed.",pihole,1648775626.0
5477,comment,1,i2xb9g1,,What I’m wondering as well. Load is high and memory is double what mine is using. Currently 9 clients (one being a Roku) with thousands of queries blocked. Something else must be sharing the hardware?,pihole,1648775121.0
5478,comment,5,i2x118g,,"Just plastic, the one I got when I bought it, and I think it was crashing because of the temparature.",pihole,1648770510.0
5479,comment,1,i2xdjyw,,"Oh I just ordered some random one on ebay, that seemed nice.",pihole,1648776155.0
5480,comment,6,i2x4hng,,Idk it might depend on how many things you are running.,pihole,1648772076.0
5481,comment,1,i2yyswm,,He's running quite a few other things.,pihole,1648813119.0
5482,comment,1,i2xchbk,,And I presume you're only running Pi-Hole on it.,pihole,1648775671.0
5483,comment,1,i2yckvx,,"With no heat sink and a basic case, not even 38C  
And it runs DHCP, PiVPN (two OpenVPN instances) and  a dyndns updater",pihole,1648795676.0
5484,comment,5,i2xcklq,,I'm just glad it isn't over 80 anymore :) .,pihole,1648775712.0
5485,comment,1,i2xx3o5,,"Well you can try this one, it has over 500 sales and they have 100% feedback, https://www.ebay.com/itm/Raspberry-Pi-4-Pi4-Case-Cooling-Kit-inc-Fan-Heatsink-35-C-lower-temps-/133351554298?mkcid=16&mkevt=1&_trksid=p2349624.m46890.l49286&mkrid=710-127635-2958-0 .",pihole,1648785608.0
5486,comment,1,i2yiw6c,,"Look into a raspi case for a standard 40mm or 60mm fan instead.   


Noctua has some 5V fans you can then run off the GPIO pins. They'll beat those cheap tiny generic fans in cooling, silence and reliability.",pihole,1648800804.0
5487,comment,1,i30x21k,,"119,000 queries, 7,398 blocked

Status  
Active  
Load:  0.08  0.09  0.11  
Memory usage:  18.2 %  
Temp: 27.8 °C",pihole,1648843110.0
5488,comment,3,i2xgsdn,,"No, you can check the other comments for what else should be on it.",pihole,1648777656.0
5489,comment,2,i30k1pd,,I’m surprise that it’s at 33% load if that is all that you are running on it.,pihole,1648837735.0
5490,comment,0,i2ximfq,,I have quit a few things more.,pihole,1648778496.0
5491,comment,1,i2xuzq6,,Right :D .,pihole,1648784469.0
5492,comment,3,i2xgkgu,,No :) .,pihole,1648777549.0
5493,comment,1,i2xzph9,,"Glad I could assist :) , I noticed it the first time using it :) .",pihole,1648787089.0
5494,comment,1,i2xcvln,,"Well it was a common occurance, at least it should've been around or over 80, also these things do not really seem to last under pressure withouth some cooling.",pihole,1648775850.0
5495,comment,1,i31c824,,"I don't think I've seen it on 100 the last few times I was around the stats board, only the swap was around there, but I increased it.",pihole,1648849639.0
5496,comment,1,i31a41k,,I don't get why.,pihole,1648848688.0
5497,comment,1,i2x8df3,,"No Raspbian 64 bit, alho I don't rlly need the GUI.",pihole,1648773825.0
5498,comment,52,i2xvdf1,,"You like living on the edge, I’ll give you that. Personally I don’t mix and match vital and non-vital services on a single system.",pihole,1648784672.0
5499,comment,7,i2xwb35,,"Valheim server runs fine on your pi 4? Recently got into the game, it's great!",pihole,1648785169.0
5500,comment,1,i6n2s5o,,That's way too much on the little guy ...is everything running smooth ?,pihole,1651218661.0
5501,comment,2,i306izd,,I found the official Pi Case (made of plastic) acted as an oven.  Can't believe they sell it.,pihole,1648832373.0
5502,comment,1,i2x1a7g,,"Yeah, I think that is the threshold for CPU throttling on the Pi 4",pihole,1648770621.0
5503,comment,6,i2xdwud,,"I had one of those cases with fan before but after running it pretty much nonstop for a year a fan started making a very annoying sound and rather than getting a new fan, I got a new case. :D

Now the only thing that’s making sound is my WD Elements connected to Pi.",pihole,1648776316.0
5504,comment,3,i2yz2nr,,"ya thanks, 12 hours later after he stated it on another comment..",pihole,1648813282.0
5505,comment,0,i2xi87c,,"And its headless to boot lol, as light as possible. But you know what, it works great so…",pihole,1648778317.0
5506,comment,2,i2yem2m,,Definitely! I dunno how it would survive that heat in the long run...,pihole,1648797256.0
5507,comment,3,i2xxjhw,,"I'm over it to be honest, I just run it without a case and it seems fine. All those little fans just die randomly, and I've had a few different brands of them.",pihole,1648785849.0
5508,comment,5,i2xjt9s,,"Okay, fair enough :-)",pihole,1648779045.0
5509,comment,0,i32whp5,,"It's a personal opinion. The moment you need a specific charger, a fan and it sucks power like a small laptop, for me it's not the typical pi that I know and love since day one.",pihole,1648880465.0
5510,comment,2,i2x8wkb,,"yeah gui always increases the system load, I switched to ubuntu server and it is minimal resources needed.

running pinhole and cockpit for easy administration.",pihole,1648774061.0
5511,comment,4,i2xvnfj,,I really don't mind it :) .,pihole,1648784817.0
5512,comment,4,i2xwg0t,,"Yup works :) , agreed :) , bought it just cuz I found out you could make a server, wasn't dissapointed :) .

Edit: Had some rare and small stutters but it might be due to running around 15 VM, which I most likely was :) .

Editting the edit: Increasing the swap might help, if you decide to do it ;) .",pihole,1648785243.0
5513,comment,1,i31bk37,,I think I had that.,pihole,1648849338.0
5514,comment,2,i2xepxz,,"With the prices I'd most likely do the same :), same here altho I don't really notice or most likely hear it that much.

Altho it was quite warm the last time I touched it so that got me kinda concerned.",pihole,1648776681.0
5515,comment,3,i2xis0k,,"I can believe that yeah, but you can check the other comments and you'll I'm running quite a few things on mine.",pihole,1648778567.0
5516,comment,1,i2xy3iv,,Well I can't do that as of thermo-nuclear war :D .,pihole,1648786165.0
5517,comment,0,i33q46n,,I really doubt a single fan sucks power like a small laptop :D .,pihole,1648904204.0
5518,comment,1,i2x9pys,,"Less than the light Raspbian? Oh, I use Webmin.",pihole,1648774424.0
5519,comment,1,i2y23j8,,"Tried dietpi? That's really light, use it for all my Droids and pis.",pihole,1648788505.0
5520,comment,7,i2yinpa,,It's efficient!,pihole,1648800600.0
5521,comment,1,i2yo5pz,,"Wow, didn't thought Valheim Server would run on a RPi4, that's why I used an old notebook.

It always stutters a bit while the world saving",pihole,1648805321.0
5522,comment,3,i2xiljp,,"Yep, I hate being wasteful but when my first fan case started the failing bearing shrill of death, I learned that a whole new case was the same price as just getting a new fan.",pihole,1648778484.0
5523,comment,0,i33q6as,,I didn't say that.,pihole,1648904239.0
5524,comment,11,i2zffzb,,A 222% load is not efficient.,pihole,1648821447.0
5525,comment,1,i2zh76f,,"I was running it on my normal home server: 3700x, 32GB ram

but I use it for other game servers too, my pi-hole is running on a pi2",pihole,1648822208.0
5526,comment,1,i31chti,,As far as I remember it never suttered for me while it was saving.,pihole,1648849761.0
5527,comment,1,i2xiv6j,,You could melt the old one and recycle it :) .,pihole,1648778607.0
5528,comment,0,i33qcwe,,"""and it sucks power like a small laptop""

quote from your post :) .",pihole,1648904347.0
5529,comment,5,i30qkqr,,"Isn't the 4 equipped with 4 cores? 2.22/4.0 isn't that bad, just a bit over 50% utilization.",pihole,1648840426.0
5530,comment,2,i31d8ga,,"It doesn't seem to cause any problems performance wise.

&#x200B;

Edit also not 222% .",pihole,1648850092.0
5531,comment,2,i2zzrnp,,"Just remark: Load average isn't equal to cpu utilization. 2.2 load avg, looks ok for RP4.",pihole,1648829752.0
5532,comment,-1,i2zhu16,,Why is CPU usage not 0%?,pihole,1648822482.0
5533,comment,1,i31cknd,,Yeah you can't get it on there.,pihole,1648849796.0
5534,comment,1,i33qlld,,"Just do yourself a favour and google ""raspberry pi power draw comparison"". You will see the pi 4 draws 10 times as much power as an earlier model. Regardless of the fan. You can argue that it also does more, but that's not my point.",pihole,1648904488.0
5535,comment,0,i33qfah,,And where did I say it was because of the fan?,pihole,1648904386.0
5536,comment,1,i33qv45,,"Yeah that doesn't seem like a favor to myself, and you never said it was cuz of the new model, you mentioned its accessiories, and sttronger components, should equal higher consumption, unless there was smth done on power manegment.",pihole,1648904642.0
5537,comment,1,i33qnl1,,"The moment you need a specific charger and a fan, my mind kinda ignored the charger part, as for a fan you don't need a specific chargers as you just connect it to the pins.",pihole,1648904521.0
5538,comment,1,i33qxqo,,I never said the higher power draw was because of the accessories. You need to learn how to read.,pihole,1648904684.0
5539,comment,1,i33qtth,,"Ffs dude. You're missing my point. The pi 4 no longer uses a ubiquitous phone charger, it no longer dispenses active cooler and no longer uses 2 euros of energy per year. My point is very simple, and I said it's my personal view.",pihole,1648904621.0
5540,post,1,ttbe9c,what items to Whitelist for brave browser ads?,"Like the title, does someone have a list for brave browser ads to get bat?",pihole,1648765330.0
5541,comment,1,i2wqpd2,,">	does someone have a list for brave browser ads to get bat?

Please clarify.",pihole,1648766002.0
5542,comment,1,i2wr8uo,,"How do I make sure that pi hole does not block the ads brave browser provides so I receive bat rewards? What do I should I be looking for to whitelist, ignore the obvious brave domains.",pihole,1648766231.0
5543,comment,2,i2x2mqb,,This should be complicated.,pihole,1648771233.0
5544,post,10,ttb7yu,Best solution to blocking Pihole bypass attempts?,"I'm sure many people are already aware some devices will attempt to bypass your Pihole by using another DNS server. The snip below is my Android phone trying to reach out to cloudflare after I blocked [dns.google](https://dns.google). This repeated a few times in the logs over a couple minutes. Hopefully this was because the attempts failed.

I'm aware that blocking by IP is outside of the Piehole scope and a firewall would likely be the best solution for devices reaching out by IP. I just wish there was an easier way to stop these bypass attempts.  There probably has been many successful bypasses that I haven't caught.

Right now what I'm doing is adding a block list that contains many DNS servers by name.  Any thoughts on this would be appreciated.

&#x200B;

https://preview.redd.it/aypoxzc3lsq81.png?width=1700&format=png&auto=webp&s=e731d8220bc6d79b44694b1e6c4be79c46b8bbd4",pihole,1648764823.0
5545,comment,8,i2wp2yb,,"The only solution I know of is a combination of NAT and firewall rules, and blacklisting DoH bootstrap domains in PiHole.. The NAT rule basically forwards DNS queries destined for other servers to your PiHole so you’re not breaking the source devices. The firewall rule(s) can block DoT easily since it runs over port 853, and you could also build a list of well known public DNS IPs and block those to help with DoH (like 1.1.1.1, 4.2.2.2, 8.8.8.8, etc. I think there’s a list out there). Finally, the blacklist for DoH bootstrap domains prevents a DNS based attempt to flip over to DoH. This is how I handle it on my network and it’s a pretty solid solution.",pihole,1648765319.0
5546,comment,5,i2ws460,,"you could in your firewall:
wan firewall rule 1 allow udp 53 outbound from pihole IP
wan firewall rule 2 block udp 53 everything

that's how I do it... things like chromecast and Google minis which are hard coded to use 8.8.8.8 have to then use the pihole",pihole,1648766609.0
5547,comment,3,i2wx988,,"Something like this: All port 53 requests going through PREROUTING are regardless directed to the Pihole machine and the Pihole dnsmasq handles the DNS query. There is an IPv6 rule.  eth1 is the lan Ethernet device.  

&#x200B;

`-A PREROUTING -i eth1 -p udp -m udp --dport 53 -j DNAT --to-destination 192.168.1.1`  
`-A PREROUTING -i eth1 -p tcp -m tcp --dport 53 -j DNAT --to-destination 192.168.1.1.`

This [URL](https://github.com/JVital2013/pihole-router) has the how-to, but requires you to have complete control over the routers firewall.  The URL has the Pihole on the RPI router.",pihole,1648768835.0
5548,comment,2,i2x204q,,"If your router is running OpenWRT, install banIP and block these IP addresses:
https://en.wikipedia.org/wiki/Public_recursive_name_server

If not, set up static routes so as many of those IP addresses as possible end up going nowhere.

I run Pi-Hole in combination with Unbound so have no need to access those public DNS services. My guest Wifi is manually set up to provide the DNS servers from my ISPs.",pihole,1648770947.0
5549,comment,1,i2xd2js,,"My setup is a pfsense router with NAT rules to force all DNS traffic to the pihole. All port 53 traffic for both TCP and UDP are blocked, except to the pihole. 

The pfsense also has the IPs of DOH servers hard blocked. 

The pfsense has port 853 blocked to prevent DOT. 

Get a few blacklists with DOH servers for pihole.",pihole,1648775937.0
5550,comment,1,i2y04nc,,"A device reaching connecting by IP directly doesn’t need a DNS server, as there’s no domain name to resolve. In that case a firewall rule is what you need.",pihole,1648787336.0
5551,comment,1,i2y84yf,,"I use OpenWRT, and I have firewall rules that automatically redirect any request to ports 53, 853 and 5353 to my pihole, using masquerading so it looks like they went to the ""real"" server.

I've found lots of devices will complain if the server they think they are hitting does not respond as if it was that server, but a different IP address.",pihole,1648792441.0
5552,comment,1,i2yhqw0,,"- manual block doh with pfsense [here](https://jpgpi250.github.io/piholemanual/doc/Block%20DOH%20with%20pfsense.pdf)
- manual catching firewall redirects [here](https://jpgpi250.github.io/piholemanual/doc/Catching%20Firewall%20redirected%20DNS%20requests.pdf)",pihole,1648799827.0
5553,comment,1,i2yxtom,,"I do this with pfSense. I have all of the known DoH servers blocked (and I test for new ones weekly). Port 853 is blocked, DNS is redirected to Pi-Hole, pfBlockerNG is configured for ASN blocking (And I have at least 50+ different ASNs blocked, many belonging to ad server/malware hosts), and probably thousands of Amazon/Google hosting IPs blocked, as well as some ranges. (This also puts quite a stop to the Admiral anti-adblock crap)

If something does somehow manage to reach a DoH server on my network, I will 100% know about it by just looking at the pfSense logs. If I see a huge amount of blocked requests to one device hitting known adserver IPs, I'll block that device from the network until I can block whatever workaround it's using.

The bonus to all of this is on sites that use randomly generated domains, those usually get past Pi-Hole, but never past the firewall.",pihole,1648812528.0
5554,comment,3,i2wrqix,,"Exactly.  

You need a router that's blocking 53 & 853 outbound, as well as blocking all known DoH servers.
There are blocklists that have these servers listed.  
Pihole can not solve this issue.",pihole,1648766445.0
5555,comment,1,i2z9865,,Something similar worked for me when I used offense. I allowed pihole to access port 53 directly and NAT'd every other attempt to reach 53 to go to pihole instead.,pihole,1648818624.0
5556,post,4,tt9nmo,Why is Pi-hole is giving out an IP ***.***.*.201 which is outside the IP range,"I have Pi-hole IP range set to [192.168.1.100](https://192.168.1.100) \- [192.168.1.200](https://192.168.1.200). When I do a query log, I see a device [192.168.1.201](https://192.168.2.201) that appeared several days ago. It does not appear in Active DHCP Leases nor in Static DHCP Leases Configuration. I try to ping that IP and get destination host unreachable. I have several routers on the property and I see no static IP anywhere nor any configuration settings on any of them that might produce this IP. All routers are set to disable DHCP. I'm wondering what the heck? Any ideas, anyone?",pihole,1648760488.0
5557,comment,13,i2webff,,"What leads you to the conclusion that Pi-hole is assigning this IP?  A device could have this IP assigned statically on the device itself, as one possibility.",pihole,1648761005.0
5558,comment,3,i2weaes,,Unplug devices until you find what is holding .201 problem solved,pihole,1648760994.0
5559,comment,3,i2x6jan,,"Thanks to jfb-pihole, I was able to identify the MAC address and the offender. Turned out to be a TPLink Range Extender. I thought that since the AP it is paired to has its DHCP disabled, the range extender would draw its IP from the Pi-hole pool. Apparently not. My curiosity is aroused so I have to study TPLink documentation so I can understand how it handles IP. Thanks to everyone! You have been a lot of help to an old (77) man!",pihole,1648773001.0
5560,comment,1,i2wmtue,,Most unnerving post I've seen tonight as that IP is the very same IP my pihole is configured at. In the DHCP server page whats the MAC address that is using your .201 address? You can enter the MAC address at [macvendors.com](https://macvendors.com) or another MAC lookup tool to see if you can identify the device/NIC manufacturer. Often doesn't get you the answers you want but sometimes can be very helpful.,pihole,1648764383.0
5561,comment,2,i2wfie4,,This. Nothing is stopping a devise from using an IP outside of the assigned rage so long as it’s in the same subnet range.,pihole,1648761475.0
5562,comment,1,i2wjlli,,And thanks for the reply!,pihole,1648763081.0
5563,comment,0,i2wja4p,,"Oh, ok. I thought that Pi-hole controlled the issuance of dynamic IP. No device on my network has a static IP except the APs.",pihole,1648762954.0
5564,comment,1,i2wqha2,,"See, that's the strange thing. It does not appear in the DHCP active or static lease lists. It only appears in the Long Term Query Log for 2022-03-27 with 52 queries from 09:56:21 to 09:58:19. All queries that were not blocked were forwarded to [1.1.1.1](https://1.1.1.1) Cloudfare DNS. The ones blocked and not blocked are all familiar to me, so I am not worried that someone got into my network. It just bugs me that I haven't been able to figure it out. I do not have iPv6 enabled so they are all iPv4.",pihole,1648765907.0
5565,comment,1,i2wjg0l,,Thanks. I control all devices on my network. None of which have static IP except the APs.,pihole,1648763019.0
5566,comment,8,i2wonip,,"You can look in the dnsmasq logs at /var/log/pihole.log (and suffixed logs from previous days) and see the DHCP transactions.

The network tab in the web admin GUI will tell you the Mac ID of the device and uses a macvendor database to associate MACs with manufacturers.",pihole,1648765140.0
5567,comment,1,i2wqorg,,"I'll keep looking and if/when I figure it out, I'll post it. I'm sure it's some dumb thing I did or caused to happen. Usually is.",pihole,1648765995.0
5568,comment,1,i2wsbhe,,"Without trying to pry too much, what does your local network look like? Lots of devices? Mainly wireless clients? Any IoT stuff? That sort of thing. I have a couple of Sky Q boxes (satelite set top boxes) and they do some very odd stuff over the LAN here. There are only 2 boxes in the house but 3 devices show up on my network according to my router. It could be something like this where you have a device that has been given a DHCP address and it's decided to allocate itself another address for another service based on what it's been given already - unlikely but not impossible.

&#x200B;

Given that my pihole has the same address I have to ask do you have any Ubiquiti network gear on your network?",pihole,1648766697.0
5569,comment,1,i2wjkyf,,Did someone pwn your wifi and gain access? (It’s not very hard to do),pihole,1648763074.0
5570,comment,1,i2wygj0,,">You can look in the dnsmasq logs at /var/log/pihole.log (and suffixed logs from previous days) and see the DHCP transactions.  
>  
>The network tab in the web admin GUI will tell you the Mac ID of the device and uses a macvendor database to associate MACs with manufacturers.

Thanks. I neglected important information in my original post.  It only appears in the Long Term Query Log for 2022-03-27 with 52 queries from 09:56:21 to 09:58:19.",pihole,1648769359.0
5571,comment,1,i2x0fyc,,"You, sir, provided me the answer I was looking for!! Thank you!!! Problem solved, mystery device identified and neutralized!",pihole,1648770245.0
5572,comment,1,i2wy74l,,"Strictly old school here. CAT6E, main router, 3 APs, 1 range extender, 3 Androids, 1 iPhone, 1 Linux server, 4 desktops, 2 laptops, 2 ROKUs all Linksys absolutely no IOT! Androids and iPhone are the only wireless. Everything else is hard wired. Like I said, strictly old school with copper. All router/APs running custom firmware.",pihole,1648769244.0
5573,comment,1,i2wkxw9,,"I suppose anything is possible, but not probable due to my location. I am out in the boonies, use strong passwords and use MAC address filter on my main router and APs. But it is no biggie. It just got my curiosity up and I was wondering if I missed something in my setup configuraitons. I've had Pi-hole for years and the same router/AP configuration for even longer and never seen it before. Thanks to everyone for the response! I really appreciate it!",pihole,1648763616.0
5574,comment,3,i2x1ard,,What was the mystery device?,pihole,1648770628.0
5575,comment,1,i2wzusd,,Hands up time I'm beat. The phones probably have the ability to set random MAC addresses but as far as I know the pihole logs would still show the MAC they used at the time.,pihole,1648769983.0
5576,comment,4,i2x55nb,,"It was an old TPLink Range Extender. I am so glad to have that information you gave me on finding the MAC addresses!! I keep a spreadsheet on all my equipment  with all the details including the MACs so it was easily identifiable once the MAC was determined. Now, I need to figure out how it came up with that IP. I thought it was nothing more than an extension of the AP it was paired to and that since DHCP was disabled on the AP, I thought it would get it's IP from the Pi-hole pool. Apparently not. I'll study my TPLink documentation further. Again, many, many thanks!!!",pihole,1648772380.0
5577,comment,1,i4ijvib,,Improperly configured wifi range extended. DHCP was not disabled,pihole,1649816942.0
5578,comment,3,i2x20nl,,"I have all wireless devices assigned to a specific AP and I disabled the random MAC ""feature"" on each of them while connected.

Thanks to jfb-pihole I found the offending device to be an old TPLink Range Extender that seems to have developed a mind of it's own! 

Little does it know that a 9mm cartridge has it's name scratched on it.",pihole,1648770953.0
5579,post,6,tt6fsf,unbound not working,"Hi
I installed pi-hole from scratch again after re-installing my server and now every time i enable unbound i have no dns resolution. 
i follow the guide as usual here
https://docs.pi-hole.net/guides/dns/unbound/

here is my debug log https://tricorder.pi-hole.net/YfPPsGw9/",pihole,1648751733.0
5580,comment,3,i2vv6zr,,comment out the unbound entry in /etc/resolvconf.conf & delete /etc/unbound/unbound.conf.d/resolvconf\_resolvers.conf....this is what fixed my bullseye install,pihole,1648753648.0
5581,comment,1,i2vvdmz,,"It would help if you said what OS you're using. If you're on bullseye then this will likely solve your problem.

https://discourse.pi-hole.net/t/pihole-unbound-not-working-as-it-should/51381/12",pihole,1648753720.0
5582,comment,2,i2ymw8a,,that fixed it for me. thanks !,pihole,1648804240.0
5583,comment,1,i2vxc9m,,It is 64bit bullseye yes,pihole,1648754488.0
5584,post,4,tt36jo,Question about DNSLeak dot com test and pihole,"I have two environments, both use pihole and both use pfsense and both have pivpn running on the same rpi that runs pihole.

Location 1 (sends DNS to pfsense)

client---->pihole---->sends DNS request to pfsense router---->1.1.1.1,1.0.0.1


Location 2 (does not send DNS to pfsense)

client---->pihole---->1.1.1.1,9.9.9.9

When I run a test at dnsleak dot com from Location 1, it tells me ""It appears your DNS is not leaking right now""

When I run a test from Location 2, it tells me ""Looks like your DNS might be leaking..."" and shows cloudflare as the ISP.

Can anyone explain this?

Thanks.",pihole,1648742929.0
5585,comment,2,i2v3v4j,,">When I run a test at dnsleak dot com

A DNS leak occurs when you have your data traffic within a VPN tunnel but the DNS traffic is exposed outside the tunnel.  Your use of this website may not be accurately showing a DNS leak.

The Pi-hole dashboard will accurately show you where your DNS queries are going (which upstream DNS servers are being used).",pihole,1648743240.0
5586,comment,1,i2v4zt3,,"Ok, I understand what you are saying about the pihole log, that looks correct, at location 1 it shows my pfsense IP and at location 2 it shows one.one.one.one and/or dns9.quad9.net.

What I don't get is why at location 1 it tells me I don't have a leak, but at location 2 it does tell me I have a leak. Why does running through pfsense show no leak but running through pihole does show a link?

Is there a better DNS Leak test?",pihole,1648743669.0
5587,comment,3,i2v7fd3,,">Is there a better DNS Leak test?

If you aren't using a VPN service, don't worry about DNS leaks and don't use any of the test websites.  Your DNS server is what you have specified in the upstream DNS server section of Pi-hole.

Without a VPN in use, there can be no DNS leak.",pihole,1648744575.0
5588,comment,0,i2v8vs0,,"Ok, in that case, when I AM using a VPN connection, I get DNS leaking when I connect to location 2 and I don't get DNS leaking when I connect to location 1.

I have VPN servers running at location 1 and location 2, I'm not using a VPN service.",pihole,1648745123.0
5589,comment,1,i2vck09,,">I have VPN servers running at location 1 and location 2, I'm not using a VPN service.

You are using a VPN for incoming connections (i.e. you can connect to your home Pi-hole while away from home), and not using a commercial VPN to change your exit endpoint (NORD, etc.)?

If the former, there is still no concept of a DNS leak.",pihole,1648746517.0
5590,comment,0,i2vdg04,,"Yes, correct, I don't use a commercial VPN, I use OpenVPN and/or Wireguard when I am away from home. When I connect to the location with the DNS requests going through pfsense, no leak, when connect to the location that uses pihole to send to quad9, for example, I do get a DNS leak.",pihole,1648746860.0
5591,post,6,tt0ln2,Pihole won't allow WAN connection,"Hi all,

So every so often I wake up too my Wifi connected and it not allowing internet access. I have rebooted the router, modem, switches and Pihole many times and nothing. I have cycled the devices and nope. 

I know my internet is still up as my BitTorrent server is running fine and my Smart Tvs can get YouTube. The Pihole is up and I have upgraded it to the newest version. 

The Pihole is on the same network as everything else. A reboot of the Pihole usually fixes it. The new warning section at the top does five the odd DNSMASQ_WARN for Max no being reached at 150. And also a RATE_LIMIT for the Pihole itself to 100 queries per 100s. Only other warning is a DISK shortage or 93% /var/log/Pihole/Pihole-FTL.log

My Upstream DNS servers have none set in the too section and in the smaller upstream box below they have 1 set as: 127.0.0.1#5335 the setting below is on recommended of only responding to local requests.

Any ideas? The phone had been working fine for weeks. I have DHCP on my Netgear router and that is running and hasn't been altered for years. That being said, in the list of DHCP clients running, Pihole isn't in that active list? 

Oh and I have Unbound running, that's about it.  

Edit: I worked it out in the end. Spectrum had stopped my internet because of BitTorrent",pihole,1648735782.0
5592,comment,2,i2umgzu,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1648736401.0
5593,comment,1,i2uxzsp,,"On the DNS page you referred to, left-hand box with all the checkboxes, do you have anything checked? You need to choose at least 1 in order for PiHole to work.

IP address 127.0.0.1 is the localaddress or loopback address of every computer. It is not a real IP address to use and should not be posted in PIHole.",pihole,1648740981.0
5594,comment,1,i2vcjs8,,Feels like duplicate IP address conflict.,pihole,1648746514.0
5595,comment,1,i2vsiqu,,"what happens if you change your upstream to Google or opendns? it's looking like your unbound server is not working.

on the pi can you run

host google.com 127.0.0.1:5335

and

host google.com 8.8.8.8",pihole,1648752611.0
5596,comment,1,i2vwcn7,,Course there is. The local IP similar to the rest of my local network and the external one is the one provided by the ISP,pihole,1648754104.0
5597,comment,1,i2wrnwg,,"Random thought ... could you have power\_save on your Pi's Wifi?

/usr/sbin/iw dev wlan0 get power\_save  
Power save: off

/usr/sbin/iw dev wlan0 set power\_save off # if the above said ""on"".",pihole,1648766413.0
5598,comment,1,i2wztjo,,"What about:

[✗] Distro:  Raspbian

[✗] Error: Raspbian is not a supported distro (https

Do you really still run Raspbian? Maybe this is the issue, idk if it still supported.
When did you do your last ""distro-upgrade""?",pihole,1648769967.0
5599,comment,1,i2uslzb,,"My Pihole doesn't have an internet connection, so now neither does my laptop, so I can't paste it anywhere. My cell signal here is so bad I can't even use it as a hotspot",pihole,1648738880.0
5600,comment,1,i2vfjdl,,"Edit: pastebin said my paste was offensive. 
https://paste.ubuntu.com/p/W4p8P6RBGm",pihole,1648747662.0
5601,comment,2,i2vre9c,,op was running unbound as the upstream server so the loopback makes sense,pihole,1648752174.0
5602,comment,1,i2v0f4l,,It has literally worked this way for years. What should I replace 127.0.0.1 with?,pihole,1648741909.0
5603,comment,1,i2v5bcx,,"He’s probably using Unbound. He needs to clarify if that’s the scenario. If he’s using Unbound, then yes that’s the correct address that goes into Pi-hole. If he’s NOT using Pi-hole then he definitely needs to select a DNS to forward to his request from the list.",pihole,1648743788.0
5604,comment,1,i2vhqdv,,But then I couldn't get into the home network at all? I can login to the router etc.,pihole,1648748498.0
5605,comment,1,i2vsxqx,,"Changed those, nothing happens.  I have uninstalled Unbound.

First command says COULDN'T GET ADDRESS FOR '127.0.0.1:5335': NOT FOUND 

2nd:. 

CONNECTION TIMED OUT NO SERVERS COULD BE REACHED

I also can't ping the modem IP where as everything else in my home network responds",pihole,1648752772.0
5606,comment,1,i2x2y4z,,"Nevermind, I found this in another thread:

>>	I see that this OS is not supported

>It is supported, but your Pi cannot reach the server which provides the list of supported OS's.",pihole,1648771378.0
5607,comment,1,i2vk5x4,,"This indicate a connectivity problem.  Are you running any firewall or other software that interferes with port 53 traffic?

    [✗] Failed to resolve doubleclick.com via a remote, public DNS server (8.8.8.8)

This is also a connectivity problem:

     WARN: Could not sendto() in send_dhcp_discover() (/__w/FTL/FTL/src/dhcp-discover.c:233): Network is unreachable

Your local unbound instance does not appear to be responding:

       Mar 31 09:54:42 dnsmasq[27340]: forwarded time4.google.com to 127.0.0.1
       Mar 31 09:54:42 dnsmasq[27340]: reply error is SERVFAIL",pihole,1648749410.0
5608,comment,1,i2v0ukl,,"Nothing, you can leave all 4 of those boxes blank. The important box is the one on the left.",pihole,1648742072.0
5609,comment,1,i2vhz24,,I am using Unbound. I have even set the pihole as off in the settings and nothing has changed.,pihole,1648748588.0
5610,comment,1,i2vtx9n,,"maybe check your pi network settings and make sure you have a gateway set?

you can't ping the routers external ip or you can ping your routers internal ip? I'm assuming by modem you meant router. is it a combo modem/router?",pihole,1648753153.0
5611,comment,1,i2vmxot,,"Absolutely nothing that affects port 53. I have uninstalled Unbound, set pihole to disabled, done 4 checks by OpenDNS on the upstream DNS.  

My modem is showing a connection and Spectrum saying no outages. It just won't pass the connection from the router to the rest of the network. When this used to happen I could get an internet connection via VNC through the pihole but it's not even doing this now. I think it's a software issue with my Netgear but I have no idea",pihole,1648750460.0
5612,comment,1,i2vv8ly,,No I have a router and modem separately. I can ping the router's internal IP but not the internal IP of the modem.,pihole,1648753666.0
5613,comment,1,i2vvzgf,,"there should be no internal ip for the modem, can you explain?

normally the router will have an internal ip and an external ip that would be the ip of the modem.",pihole,1648753960.0
5614,post,0,tszusa,pihole stopped working yesterday at 4PM CST,"I have a pihole running on an rpi and it seems that DNS stopped working/resolving around 4pm. I have another pihole and I switched to that because I didn't have time to troubleshoot yesterday. I have some time to troubleshoot today and I've tried the basic steps of rebooting the device and I changed my upstream DNS server to something else to rule out any forwarding issue (I send pihole lookups to my pfsense router because my pfsense router has a bunch of static DNS records I need for lookup. At some point I'll move those custom entries to pihole, but pfsense was online long before I had pihole).

To be clear, I switched from using a custom DNS server (my pfsense router) to 9.9.9.9 and 1.1.1.1 and I still can't get lookups to work so I know that's not the problem.

When I SSH into the pihole I can ping 8.8.8.8, so it has internet connectivity, but I can't ping anything using a hostname.

rpi is running

PRETTY_NAME=""Raspbian GNU/Linux 10 (buster)""

I am not on site, I am currently connected via VPN, but I could wipe this install and install rpi 10 lite, but since I won't be able to re-install until I am back home, I figured I would post here to see if anyone can assist with my current issue.

    *** [ DIAGNOSING ]: Core version
    [i] Core: v5.9 (https://discourse.pi-hole.net/t/how-do-i-update-pi-hole/249)
    [i] Remotes: origin	https://github.com/pi-hole/pi-hole.git (fetch)
                 origin	https://github.com/pi-hole/pi-hole.git (push)
    [i] Branch: master
    [i] Commit: v5.9-0-g6ffa2ba
    
    *** [ DIAGNOSING ]: Web version
    [i] Web: v5.11 (https://discourse.pi-hole.net/t/how-do-i-update-pi-hole/249)
    [i] Remotes: origin	https://github.com/pi-hole/AdminLTE.git (fetch)
                 origin	https://github.com/pi-hole/AdminLTE.git (push)
    [i] Branch: master
    [i] Commit: v5.11-0-g64bbce90
    
    *** [ DIAGNOSING ]: FTL version
    [✓] FTL: v5.14 (https://discourse.pi-hole.net/t/how-do-i-update-pi-hole/249)
    
    *** [ DIAGNOSING ]: lighttpd version
    [i] 1.4.53
    
    *** [ DIAGNOSING ]: php version
    [i] 7.3.31
    
    *** [ DIAGNOSING ]: Operating system
    [i] dig return code:  10
    [i] dig response:  dig: couldn't get address for 'ns1.pi-hole.net': failure
    [✗] Distro:  Raspbian
    [✗] Error: Raspbian is not a supported distro (https://docs.pi-hole.net/main/prerequisites/)    

I see that this OS is not supported, but since I've been running it this way for a while (over a year) and hadn't changed/updated anything yesterday, I'm curious if something else is causing DNS to stop working. This rpi is also running pivpn as of a few weeks ago.

Thanks.

edit ***RESOLVED***

Pfsense unbound service stopped yesterday at 1547 and pihole graphs spiked yesterday at 1600. Not sure why unbound stopped running on pfsense, but I started the service and SSHed into the pihole and everything works fine now. Pihole was not the issue. If unbound continues to randomly stop running on pfsense, I'll need to investigate that issue.

Thanks to all who helped.",pihole,1648733565.0
5615,comment,1,i2uk22m,,Is your pfsense blocking the dns requests of the pihole?,pihole,1648735369.0
5616,comment,1,i2umbyb,,">	I see that this OS is not supported

It is supported, but your Pi cannot reach the server which provides the list of supported OS's. 

`dig +short -t txt versions.pi-hole.net @ns1.pi-hole.net`

Edit file /etc/resolv.conf and change the nameserver to 9.9.9.9 or 1.1.1.1.

Then generate a debug log, upload it when prompted and post the token URL here.",pihole,1648736343.0
5617,comment,1,i2urozg,,"...did you, by chance, set up log2ram (or similar) on this Pi?

I'm not saying I have any *personal* experience to relate, mind you  \[ ;) \] ...but if the drive containing your /var/log (or equivalent) directory reaches 100% use (0 bytes available), you might witness similar behavior.

If you suspect this might be an issue, you can, in the short term, click on the \[flush logs\] button in the pi-hole admin panel to see if DNS queries start getting processed again.   Long term (if the previous action gets things going again), you might want to tweak your log settings a tad so that the drive doesn't get filled up again.

&#x200B;

PS:  Mine stopped at 4:36PM yesterday.           ...y'know, theoretically and all.   ;)",pihole,1648738515.0
5618,comment,1,i2ulll2,,"Nope, I haven't touched a pfsense firewall rule in a long time. It was working fine up until 4pm. Also, I changed pfsense from being the upstream DNS server in pihole to rule out the upstream server and I've never had any firewall rule in pfsense to block any traffic/DNS lookups from pihole.",pihole,1648736031.0
5619,comment,1,i2urmie,,"I already have a debug, can I just paste the section you are looking for here?",pihole,1648738488.0
5620,comment,1,i337x07,,"Is it possible, to save the supported OS info on disk if pihole is already installed and not fetch again unless its trying to update? I see no reason a OS suddently is not supported if FTL is the same version.",pihole,1648890348.0
5621,comment,1,i2usojf,,"Aside from the default pihole install, the only thing I've recently added to this rpi is pivpn and that was 2-3 weeks ago and I've beein using pivpn almost daily since I've installed it on this rpi.",pihole,1648738908.0
5622,comment,1,i2umve1,,Do you have suricata or pfblockerng? They might block it too.,pihole,1648736567.0
5623,comment,1,i2ut2hh,,"I would prefer not. I need to see the entire log, and it may have personal information in it. By posting the token only, just a few of us on the Pi-hole team can see your log and it is hidden from all others.",pihole,1648739061.0
5624,comment,1,i2urhn4,,No I don't use either of those services.,pihole,1648738436.0
5625,comment,2,i2uxb1u,,"Pfsense unbound service stopped yesterday at 1547 and pihole graphs spiked yesterday at 1600. Not sure why unbound stopped running on pfsense, but I started the service and SSHed into the pihole and everything works fine now. Pihole was not the issue.",pihole,1648740715.0
5626,comment,1,i2uv123,,"Understood. While I was posting in this thread, I logged back into the pihole and I see devices getting successful lookups and the server being requested is quad 9 so that tells me that things seem to be working when using something other than my custom DNS 1 entry which was my pfsense router. The traffic graph also lines up with my change to using 9.9.9.9 this morning. Meaning, yesterday at 4pm the graph spiked since some devices tend to check in more when there is no internet connection. The graph dropped around the time I made the changes to 9.9.9.9, this morning.

I will try to restart the DNS service on pfsense and/or reboot pfense and see if that's what the problem was. Right now I have to assume that the DNS query was being sent to pfsense and if the service is stuck in pfsense then it won't return an answer to the client. I did reboot pihole, initially, but I did not bother with pfsense since I rarely reboot that unit.

I have multiple sites running with pfense netgate appliances and pihole and I've never seen this specific scenario yet.

If that doesn't solve the problem, then I'll post with the debug token.",pihole,1648739837.0
5627,post,35,tswg0k,How do you Optimize Your Gravity Database?,"I have been using a lot of regex for my blocking these days on Pihole, and I am sure I have some domains in my blocklist that could be removed for optimization. How do you go about optimizing your blocklist these days? Any tips or suggestions?",pihole,1648721056.0
5628,comment,14,i2u43mm,,">	I am sure I have some domains in my blocklist that could be removed for optimization

Please elaborate.",pihole,1648727374.0
5629,comment,17,i2u0ni5,,I'm not sure what you mean by optimization.  It sounds like you're talking about making things faster by removing DB entries.  I don't do anything like that.  I don't think there would be a measurable improvement unless you've added several hundred thousand entries and want to remove those.,pihole,1648725156.0
5630,comment,5,i2v9sfe,,"Keep these points in mind.

1. A statically defined block list will be more computationally efficient than one defined with regex.

1. So long as your device isn't running out of memory, then there is no performance advantage to using regex to define your block lists. Rather, a regex lookup will be much more computationally inefficient than a static block list, which can be searched with O-n(log2(n)) complexity.

1. The only real advantage to using a regex to define your block list is convenience for you. Specifically, regex enables you to use a single, very compact expression to block a large number of domains. Even though regex matching is well-optimized and very computationally efficient, it will never be as efficient as searching a static block list.",pihole,1648745462.0
5631,comment,2,i30bn55,,"I have 1.5 mil blocked and there’s no delay. Never saw a performance hit on pi3b,p4b and a vm I run. It’s all instantaneous.",pihole,1648834355.0
5632,comment,2,i2u05ua,,"Don't use regex.

It takes a lot more processing power (and therefore time) to check domains against regex than it does specific or wildcard domains.

Is there a reason you are using regex so much?",pihole,1648724821.0
5633,comment,1,i2u18qi,,"If it’s consistent domains you’d like blocked network wide add them to the /etc/hosts file? So they get sunk before the pihole even sees them?

Just a thought.",pihole,1648725558.0
5634,comment,1,i2uwlue,,I tried this [pihole-gravity-optimise](https://github.com/mmotti/pihole-gravity-optimise),pihole,1648740446.0
5635,comment,4,i2uwklx,,"I have about 50-70 regex rules in my blacklist database. But I also have around 300 ad lists (mainly malware, tracking and ads)  and a total of 70k blacklisted domains. I am sure if you collected all those domains in a text file and run the above mentioned regex rules against them, I am positive you would find many matches that could then be deleted from the database as regex already blocks them. [Kinda like this tool](https://github.com/mmotti/pihole-gravity-optimise) .

Just to add to this, even thought this might sound a good idea, I am don't think it's an ""amazing"" or ""profound"" idea as it might cause issues, depending on the quality and quantity of your regex. That's because basically you deleting potentially thousands of domains that match those regex rules from your database.

It's just a thought I am having about what can be improved.",pihole,1648740434.0
5636,comment,-3,i2ujr1s,,"My DB has 1.4 million sites blocked, so maybe.",pihole,1648735236.0
5637,comment,8,i2v6ode,,">Don't use regex.

This is an overly broad (and generally inaccurate) statement.",pihole,1648744297.0
5638,comment,4,i2uab99,,"Wildcard domains *are* regex, right?",pihole,1648730836.0
5639,comment,1,i2uxcva,,"I should clarify that ""a lot"" for me are about 50-70 regex, mainly for ads. I know they use more processing power, but they are much more effective for some limited purposes. I don't condone using regex excessively as they will cause trouble and lot of time wasted on tweaking.",pihole,1648740735.0
5640,comment,3,i2u4v68,,">	add them to the /etc/hosts file? So they get sunk before the pihole even sees them?

If you are referring to the hosts file on the Pi-hole host OS, Pi-hole will still see them.  Example:

     nslookup chicken-potato
    Server:		127.0.0.1
    Address:	127.0.0.1#53

    Name:	chicken-potato
    Address: 0.0.0.0

    grep chicken-potato /var/log/pihole.log
    Mar 31 11:32:52 dnsmasq[11395]: query[A] chicken-potato from 127.0.0.1
    Mar 31 11:32:52 dnsmasq[11395]: /etc/hosts chicken-potato is 0.0.0.0",pihole,1648727839.0
5641,comment,2,i2vdek1,,"As noted in the link, this ""optimization"" is not effective for Pi-hole V5 and later.  Pi-hole V5 introduced group management, and for group management to be effective, each individual adlist needs to remain intact so that it can selectively be applied to different client groups.

Deleting gravity entries which match a regex entry defeats this functionality.",pihole,1648746845.0
5642,comment,1,i2uxvo8,,"I've seen this and used it long ago, I think before even updating to v5.0 and it worked but I tried it a couple weeks ago and it randomly just said ""Killed"" after updating the gravity database. Didn't have much time to look into the issues tab and try fixes ever since. Did it work for you?",pihole,1648740936.0
5643,comment,10,i2v5hup,,">I am sure if you collected all those domains in a text file and run the above mentioned regex rules against them, I am positive you would find many matches that could then be deleted from the database as regex already blocks them

The problem with this approach is that you lose list integrity.  If you keep each individual adlist (blocklist) intact, that list can be individually applied to different management groups.

Additionally, there is no benefit to reducing your gravity list and replacing entries with regex entries.  Gravity is searched very efficiently using B-trees (nanosecond), while regex not only have to be compiled, they have to be searched individually.

This is not to say that regex don't have value - they do.  If you want to block a key word in any domain, regex is the ticket.  Same for wildcards.  But, using regex to make your gravity list smaller and ""more efficient"" does not improve things.

> I also have around 300 ad lists (mainly malware, tracking and ads) and a total of 70k blacklisted domains

This math may not check.  The default adlist shipped with Pi-hole contains over 100k domains alone.",pihole,1648743855.0
5644,comment,17,i2uqqfg,,">	My DB has 1.4 million sites blocked

Pi-hole can search that entire list in nanoseconds. The list is in memory and searched quickly via B tree.",pihole,1648738134.0
5645,comment,8,i2udzyd,,">	Wildcard domains are regex, right?

Correct. Adding a wildcard domain creates the appropriate regex.",pihole,1648732641.0
5646,comment,1,i2v6ah9,,"    it works fine for me.

'$ sudo python3 gravityOptimise.py  
\[i\] Root user detected  
\[i\] Pi-hole path exists  
\[i\] Updating gravity (this may take a little time)  
\[i\] DB detected  
\[i\] Fetching domains  
\[i\] Connecting to /etc/pihole/gravity.db  
\[i\] Querying DB for gravity domains  
\[i\] --> 4596681 domains found  
\[i\] Scanning /etc/dnsmasq.d for wildcards  
\[i\] --> No wildcards found  
\[i\] Fetching regexps  
\[i\] --> 21 regexps found  
\[i\] Checking for gravity matches  
\[i\] --> 45393 matches found in gravity  
\[i\] Running deletions  
\[i\] --> 4551288 domains remain in the gravity database  
\[i\] Updating the gravity count in the info table  
\[i\] Restarting Pi-hole",pihole,1648744152.0
5647,comment,2,i2v8eq1,,">This math may not check. The default adlist shipped with Pi-hole contains over 100k domains alone.  


I meant manual entries in my Blacklist through the Web Interface.

&#x200B;

>The problem with this approach is that you lose list integrity. If you keep each individual adlist (blocklist) intact, that list can be individually applied to different management groups.

   That's a great point. I just didn't consider it because this specific pihole only applies to myself and I only use two devices, so it's no problem.",pihole,1648744945.0
5648,comment,3,i2uwj12,,You can't search regexes / wildcards with binary trees.,pihole,1648740417.0
5649,comment,1,i2uyn1h,,"On that topic....as far as I understand, adlists are preferred compared to the option of adding the domains one contains manually to the blacklist. Reason being, they can be updated at will with the pihole -g command. Right?",pihole,1648741230.0
5650,comment,1,i2v9elr,,Great! Will check out why mine seems to fail.,pihole,1648745319.0
5651,comment,6,i2vc8w4,,">I meant manual entries in my Blacklist through the Web Interface.

You have 100K entries in your blacklist?  That is very unusual.",pihole,1648746399.0
5652,comment,8,i2v4ngq,,"That's true, but you also typically can't add every possible wildcard subdomain of a domain with exact entries.  This is why we added regex as an option in Pi-hole.

The order of precedence in Pi-hole blocking appears below.  Whitelist always overrides blacklist, and gravity is searched prior to regex blacklist.  It is only if a domain is not in gravity that the regex blacklist will be searched.

    Exact Whitelist
    Regex Whitelist
    Exact Blacklist
    Blocklist domains (AKA gravity)
    Regex Blacklist",pihole,1648743540.0
5653,comment,2,i2v6kaz,,">as far as I understand, adlists are preferred compared to the option of adding the domains one contains manually to the blacklist

Perhaps not.  If there is a domain you always want blocked, adding this domain to your local domain list ensures it will always be blocked regardless of what domains list maintainers include on their blocklists.  The opposite is also true for whitelist entries - if you enter a domain on your whitelist, it will never be blocked since whitelist is higher precedence than blacklist.

An example is ocsp domains.  These are used for determining the validity of certificates.  At one point, the Apple ocsp domain ended up on several public blocklists, which interfered with functionality.  If you whitelist that domain, it will always load regardless of any changes to public adlists.",pihole,1648744254.0
5654,comment,1,i2veb6o,,Yes. Mostly domains that serve malware.,pihole,1648747195.0
5655,comment,3,i2v95u4,,"Ohh I see....now I understand this a lot better. Thanks man! I don't know if you hear this a lot, but we lucky to have someone like you respectfully answering our questions and debating.",pihole,1648745228.0
5656,comment,11,i2vfgcg,,"Out of curiosity, how did you identify these 100K domains that serve malware?  I assume that came from a list somewhere?",pihole,1648747629.0
5657,comment,1,i2ykmi1,,"The majority came from lists you find on sites like FilterLists and Github/Gitlab, some of it came from research done in my university based on data collected in association with an Antivirus company and finally some around 20k are ads and trackers.

To be clear, I don't think all 100k are in use and dealing with such a large dataset, for sure there are false positives in there. But I do minimal browsing outside the normal browsing an average user would do (social media, youtube, work related stuff and duckduckgo search etc.), so I never had to whitelist supposed malware domains. My whitelist is 500 entries long.",pihole,1648802271.0
5658,post,1,tsperl,Can't resolve DNS names in PiHole installation on raspberry pi installation.,"I installed PiHole with Unbound, following this guide: [https://github.com/notasausage/pi-hole-unbound-wireguard](https://github.com/notasausage/pi-hole-unbound-wireguard) and after those, I also installed wireguard. Everything was working so far, but when I entered via ssh to the raspberry pi, to enable NFS shares there, it started having problems resolving the domains:

Temporary failure resolving '[raspbian.raspberrypi.org](https://raspbian.raspberrypi.org)'

So I went to the file in /etc/resolv.conf and the nameserver points to my raspberry pi, so it should be ok. I've changed to [1.1.1.1](https://1.1.1.1) to restore connectivity for apt and be able to install some packages and worked fine. So, the problem seems to lie in the Unbound part of the installation maybe?. I did some research, and my /etc/unbound/unbound.conf.d/pi-hole.conf seems to be ok, the only thing that I changed to try to repair the problem, is the:

edns-buffer-size from 1472 to 1232, to no avail.

I'm clueless, I checked the port, and it is 5353. Don't know what changed, everything was working fine and then it failed. 

As a side note, the nfs shares I created work perfectly in Windows 10 Pro, and then I created samba shares, and they work on my chromecast and android smartphone, but they are invisible to windows, but that's probably a windows issue. 

I don't know what else to try really. Thanks.",pihole,1648692965.0
5659,comment,1,i2sq6th,,"Please post the output of the following command from the Pi terminal:

`sudo grep -v ‘#\|^$’ -R /etc/unbound/unbound.conf*`",pihole,1648693125.0
5660,comment,1,i2sqrip,,"This is the output:

    /etc/unbound/unbound.conf:# Unbound configuration file for Debian.
/etc/unbound/unbound.conf:#
/etc/unbound/unbound.conf:# See the unbound.conf(5) man page.
/etc/unbound/unbound.conf:#
/etc/unbound/unbound.conf:# See /usr/share/doc/unbound/examples/unbound.conf for a commented
/etc/unbound/unbound.conf:# reference config file.
/etc/unbound/unbound.conf:#
/etc/unbound/unbound.conf:# The following line includes additional configuration files from the
/etc/unbound/unbound.conf:# /etc/unbound/unbound.conf.d directory.
/etc/unbound/unbound.conf:include-toplevel: ""/etc/unbound/unbound.conf.d/*.conf""
/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:server:
/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:    # The following line will configure unbound to perform cryptographic
/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:    # DNSSEC validation using the root trust anchor.
/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:    auto-trust-anchor-file: ""/var/lib/unbound/root.key""
/etc/unbound/unbound.conf.d/pi-hole.conf:server:
/etc/unbound/unbound.conf.d/pi-hole.conf:# If no logfile is specified, syslog is used
/etc/unbound/unbound.conf.d/pi-hole.conf:# logfile: ""/var/log/unbound/unbound.log""
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Level 2 gives detailed operational information
/etc/unbound/unbound.conf.d/pi-hole.conf:verbosity: 2
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:port: 5353
/etc/unbound/unbound.conf.d/pi-hole.conf:do-ip4: yes
/etc/unbound/unbound.conf.d/pi-hole.conf:do-udp: yes
/etc/unbound/unbound.conf.d/pi-hole.conf:do-tcp: yes
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# May be set to yes if you have IPv6 connectivity
/etc/unbound/unbound.conf.d/pi-hole.conf:do-ip6: no
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Use this only when you downloaded the list of primary root servers!
/etc/unbound/unbound.conf.d/pi-hole.conf:root-hints: ""/var/lib/unbound/root.hints""
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Respond to DNS requests on all interfaces
/etc/unbound/unbound.conf.d/pi-hole.conf:interface: 0.0.0.0
/etc/unbound/unbound.conf.d/pi-hole.conf:# Maximum  UDP response size, default is 4096
/etc/unbound/unbound.conf.d/pi-hole.conf:max-udp-size: 3072
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# IPs authorized to access the DNS Server
/etc/unbound/unbound.conf.d/pi-hole.conf:access-control: 0.0.0.0/0 refuse
/etc/unbound/unbound.conf.d/pi-hole.conf:access-control: 127.0.0.1 allow
/etc/unbound/unbound.conf.d/pi-hole.conf:access-control: 10.10.34.0/24 allow
/etc/unbound/unbound.conf.d/pi-hole.conf:# If you have a guest network with a separate DHCP range
/etc/unbound/unbound.conf.d/pi-hole.conf:#access-control: 172.16.1.0/24 allow
/etc/unbound/unbound.conf.d/pi-hole.conf:#access-control: 10.0.0.0/24 allow
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Hide DNS Server info
/etc/unbound/unbound.conf.d/pi-hole.conf:hide-identity: yes
/etc/unbound/unbound.conf.d/pi-hole.conf:hide-version: yes
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Trust glue only if it is within the servers authority
/etc/unbound/unbound.conf.d/pi-hole.conf:harden-glue: yes
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Require DNSSEC data for trust-anchored zones, if such data is absent, the zone becomes BOGUS
/etc/unbound/unbound.conf.d/pi-hole.conf:harden-dnssec-stripped: yes
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Burdens the authority servers, not RFC standard, and could lead to performance problems
/etc/unbound/unbound.conf.d/pi-hole.conf:harden-referral-path: no
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Add an unwanted reply threshold to clean the cache and avoid, when possible, DNS poisoning
/etc/unbound/unbound.conf.d/pi-hole.conf:unwanted-reply-threshold: 10000000
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Don't use Capitalization randomization as it known to cause DNSSEC issues sometimes
/etc/unbound/unbound.conf.d/pi-hole.conf:# see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details
/etc/unbound/unbound.conf.d/pi-hole.conf:use-caps-for-id: no
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Reduce EDNS reassembly buffer size.
/etc/unbound/unbound.conf.d/pi-hole.conf:# Suggested by the unbound man page to reduce fragmentation reassembly problems
/etc/unbound/unbound.conf.d/pi-hole.conf:edns-buffer-size: 1232
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Perform prefetching of close to expired message cache entries
/etc/unbound/unbound.conf.d/pi-hole.conf:# This only applies to domains that have been frequently queried
/etc/unbound/unbound.conf.d/pi-hole.conf:prefetch: yes
/etc/unbound/unbound.conf.d/pi-hole.conf:# Fetch the DNSKEYs earlier in the validation process, which lowers the latency of requests
/etc/unbound/unbound.conf.d/pi-hole.conf:# but also uses a little more CPU
/etc/unbound/unbound.conf.d/pi-hole.conf:prefetch-key: yes
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Time To Live (in seconds) for DNS cache. Set cache-min-ttl to 0 remove caching (default).
/etc/unbound/unbound.conf.d/pi-hole.conf:# Max cache default is 86400 (1 day).
/etc/unbound/unbound.conf.d/pi-hole.conf:cache-min-ttl: 3600
/etc/unbound/unbound.conf.d/pi-hole.conf:cache-max-ttl: 86400
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# If enabled, attempt to serve old responses from cache without waiting for the actual
/etc/unbound/unbound.conf.d/pi-hole.conf:# resolution to finish.
/etc/unbound/unbound.conf.d/pi-hole.conf:# serve-expired: yes
/etc/unbound/unbound.conf.d/pi-hole.conf:# serve-expired-ttl: 3600
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Use about 2x more for rrset cache, total memory use is about 2-2.5x
/etc/unbound/unbound.conf.d/pi-hole.conf:# total cache size. Current setting is way overkill for a small network.
/etc/unbound/unbound.conf.d/pi-hole.conf:# Judging from my used cache size you can get away with 8/16 and still
/etc/unbound/unbound.conf.d/pi-hole.conf:# have lots of room, but I've got the ram and I'm not using it on anything else.
/etc/unbound/unbound.conf.d/pi-hole.conf:# Default is 4m/4m
/etc/unbound/unbound.conf.d/pi-hole.conf:msg-cache-size: 128m
/etc/unbound/unbound.conf.d/pi-hole.conf:rrset-cache-size: 256m
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# One thread should be sufficient, can be increased on beefy machines.
/etc/unbound/unbound.conf.d/pi-hole.conf:# In reality for most users running on small networks or on a single machine it should
/etc/unbound/unbound.conf.d/pi-hole.conf:# be unnecessary to seek performance enhancement by increasing num-threads above 1.
/etc/unbound/unbound.conf.d/pi-hole.conf:num-threads: 1
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Ensure kernel buffer is large enough to not lose messages in traffic spikes
/etc/unbound/unbound.conf.d/pi-hole.conf:so-rcvbuf: 1m
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Ensure privacy of local IP ranges
/etc/unbound/unbound.conf.d/pi-hole.conf:private-address: 192.168.0.0/16
/etc/unbound/unbound.conf.d/pi-hole.conf:private-address: 169.254.0.0/16
/etc/unbound/unbound.conf.d/pi-hole.conf:private-address: 172.16.0.0/12
/etc/unbound/unbound.conf.d/pi-hole.conf:private-address: 10.0.0.0/8
/etc/unbound/unbound.conf.d/pi-hole.conf:private-address: fd00::/8
/etc/unbound/unbound.conf.d/pi-hole.conf:private-address: fe80::/10
/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:# Create DNS record for Pi-Hole Web Interface
/etc/unbound/unbound.conf.d/pi-hole.conf:private-domain: ""pi.hole""
/etc/unbound/unbound.conf.d/pi-hole.conf:local-zone: ""pi.hole"" static
/etc/unbound/unbound.conf.d/pi-hole.conf:local-data: ""pi.hole IN A 10.10.34.116""
/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf:# Generated by resolvconf
/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf:
/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf:forward-zone:
/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf:  name: "".""
/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf:  forward-addr: 10.10.34.116

    

Hope it helps.",pihole,1648693386.0
5661,comment,1,i2sqyey,,"Sorry for the bad formatting, I put code block but only the first line got marked :/",pihole,1648693477.0
5662,comment,3,i2sr22h,,"This forwarding configuration was installed by Bullseye through resolvconf.

Edit file `/etc/resolvconf.conf` and comment out the last line which should read:

    unbound_conf=/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf

Delete the unwanted unbound configuration file:

`sudo rm /etc/unbound/unbound.conf.d/resolvconf_resolvers.conf`

restart unbound:

`sudo service unbound restart`",pihole,1648693525.0
5663,comment,1,i2tf1dl,,Use pastebin for huge ascii files like this.,pihole,1648707505.0
5664,comment,1,i2ssjx2,,"Now it worked, many thanks!. I didn't find anywhere anything like this when researching, it seems it was a configuration change made by the OS?. I think that I restarted one time prior to this problem, maybe that restart made the OS to make this change?. If so, it wont happen again on restart?. Thanks again.",pihole,1648694236.0
5665,comment,2,i2sto4c,,It won't happen on restart since you commented out the applicable line.,pihole,1648694764.0
5666,comment,1,i2t1u0o,,"Great, thanks!, much appreciated!.",pihole,1648698984.0
5667,post,3,tso6i5,"New PiHole user here, question about pihole vs adblock browser extension... Wildcard in text lists?","Is there any way to use the lists from adblock in the pihole lists?  

So I'm looking at the list that adblock uses and I found this 

[https://easylist-downloads.adblockplus.org/easylist.txt](https://easylist-downloads.adblockplus.org/easylist.txt)  

It seems to use a wildcard of ## to limit elements to block regardless of domain, wondering if anyone has tried plugging one of adblocks lists into pihole?  

  

I'm brand new, just installed today. Big fan so far.",pihole,1648689012.0
5668,comment,1,i2shp7u,,"Such lists won't work with pihole, pihole can only block the domain. So it can see `google.com` but can't tell the difference between `google.com/advert.jpg` or `google.com/imageyouwant.jpg`.",pihole,1648689248.0
5669,comment,1,i2si452,,">	Is there any way to use the lists from adblock in the pihole lists?

No.  These are in completely different formats intended for two fundamentally different applications.  Pi-hole uses domain names only (with or without leading IP's that may appear in lists formatted for standalone use in a hosts file). 

>	wondering if anyone has tried plugging one of adblocks lists into pihole?

Many people have, and it usually results in numerous false positives if the list loads at all.",pihole,1648689440.0
5670,comment,1,i2u0n2a,,"A while back, I came across several articles how those browser extensions were getting money from ad agencies to white list certain domains. I don’t trust those browser extensions for the most part. For my Pi-hole i use the following lists:

    1. https://firebog.net/
    2. https://dbl.oisd.nl/
    3. https://github.com/StevenBlack/hosts",pihole,1648725148.0
5671,comment,1,i2u4oqn,,">	https://firebog.net/

This is a website that contains lists of blocklists, not a blocklist itself. If you have entered this URL in your adlists, it isn't doing anything.",pihole,1648727731.0
5672,comment,1,i2u4t65,,Of course… I guess I could’ve been more specific. You’re correct.,pihole,1648727806.0
5673,post,15,tsj1gw,"Not sure if I should post this here, or somewhere else, but it involves Pi-Hole, so here's my question:","Recently I've been considering on adding  **unbound** in conjunction with **Pi-Hole** to use as a recursive DNS server. Now my question is, what upstream DNS server does unbound fetch from, when it needs to add new domains to it's cache? Also, can you change it to a different one if need be?",pihole,1648673840.0
5674,comment,8,i2rjj0l,,"Have a look at this video

https://m.youtube.com/watch?v=FnFtWsZ8IP0

I haven't done it but this guy is good",pihole,1648674121.0
5675,comment,2,i2rkzht,,">	what upstream DNS server does unbound fetch from, when it needs to add new domains to it’s cache?

The most common configuration (and the one that is set up if you use our guide) is as a recursive DNS server. In this setup unbound queries the authoritative nameservers directly. 

https://docs.pi-hole.net/guides/dns/unbound/

>	can you change it to a different one if need be?

You can configure unbound as a forwarding resolver, where it forwards all queries to a recursive resolver of your choice.  This could be Cloudflare, Quad9, etc. In forwarding mode unbound no longer does recursion.",pihole,1648674717.0
5676,comment,2,i2rn39m,,">t done i

It's funny, the two links that were provided in the comments are already open in my tabs. Thank you for sharing and for the help. To be completely honest, that particular You Tuber is what inspired the idea of using Unbound.",pihole,1648675582.0
5677,comment,2,i2rr5hy,,"Thank You for the quick reply, I really appreciate it. I actually have that exact tab open for reference. Also what you said makes allot of sense. Thanks for clearing up some confusion, and leading me in the right direction. I'm still alittle new at all this, though am trying to learn with every opportunity.",pihole,1648677262.0
5678,comment,1,i2s7nn8,,"I really like this picture to visualize it: [https://d1.awsstatic.com/Route53/how-route-53-routes-traffic.8d313c7da075c3c7303aaef32e89b5d0b7885e7c.png](https://d1.awsstatic.com/Route53/how-route-53-routes-traffic.8d313c7da075c3c7303aaef32e89b5d0b7885e7c.png)

In your case the DNS resolver is unbound. And if the domain is already cached (bc you visited it already), it goes straight from step 2 to step 7.",pihole,1648684685.0
5679,comment,3,i2sdh9x,,"That graphic isn't quite accurate. Qname minimisation is the default behavior of unbound, and only the part of the domain name needed to get to the next level nameserver is sent to each nameserver.

The first query to the root nameserver would not include ""www.example.com"". It would simply be a request for the nameserver that is handling the **.com** TLD. Then the next level of nameserver gets enough of the domain to get to the next level, etc. Only the final nameserver sees the entire domain name.",pihole,1648687345.0
5680,post,0,tsd21y,no longer blocking adds when vpn active,"I use surfshark vpn and have never had any issues blocking adds when ""Clean Web"" is disabled.

however now when i connect to surfshark using any protocol with CleanWeb off Im getting adds come through...

has anything changed in pihole or is this likely something stuck in the vpn software?",pihole,1648665080.0
5681,comment,1,i2r1d5e,,You can try doing a what's my IP to see if the VPN is routing your internet traffic through it or out your normal internet. Another issue could be the order of the network adapters in Windows. If your VPN has a higher priority then your normal network adapter then it would send traffic there first.,pihole,1648666974.0
5682,comment,1,i2rwlg5,,"I'm not familiar with Surfshark, but this sounds like it's DNS related. You could try a nslookup via CMD to see what DNS you are currently using.

&#x200B;

\# nslookup [google.com](https://google.com)

&#x200B;

Result should look like the following:

Server:         192.168.178.1  
Address:        192.168.178.1#53  
Non-authoritative answer:  
Name:   google.de  
Address: 142.250.181.195  
Name:   google.de  
Address: 2a00:1450:4005:802::2003",pihole,1648679625.0
5683,comment,0,i2ydi5o,,The traffic is definately going via the vpn,pihole,1648796392.0
5684,comment,0,i2ydvg3,,"I've just done this and it's definately using their own dns

I've tried changing the DNS via windows for the TAP driver and oddly the VPN connects but has no internet connectivity so that was a waste of time...

Looks like I'll just have to live with this issue till I can find a vpn that doesnt force DNS settings on the user",pihole,1648796674.0
5685,comment,1,i2yrhvr,,"You could try using OpenVPN instead of their native client.

&#x200B;

https://support.surfshark.com/hc/en-us/articles/360003204233-How-to-set-up-OpenVPN-GUI-app-on-Windows-",pihole,1648808071.0
5686,comment,1,i304gtc,,"oooh yes why didn't I think of this!
Fingers crossed 🤞",pihole,1648831587.0
5687,comment,1,i3077rt,,"Didn't work :(  
SS just block (openvpn) or overide it (wiregaurd and ikev2)

Its ok for now. I dont really use SS that much on this machine and I can live with the small amount of adds I may have to put up with.

that said thank you for reminding me openvpn exists.... soooo much better than the SS app",pihole,1648832637.0
5688,post,51,tscg6k,DNS Leak Test on Pi-Hole + Unbound + Wireguard,"**EDIT: Appeared to be caused by not rebooting after installing Wireguard for the first time on the PC. After a reboot the DNS leak test shows the home IP. Wireguard had a ""Failed to connect to adapter interface. System could not find the file specified."" error in its log before rebooting.**

I have a RPi4 set up with the Pi-Hole and Unbound. Just installed Wireguard using PiVPN. First time using it in this fashion as I'd never done it with Unbound before.

Trying to understand what should be expected of a DNS leak test for the VPN. I know when I do it locally it reports my DNS server is my IP address. Shouldn't I get the same result over VPN?

Tried connecting over a hotspot. Pi-Hole seems to work fine. Ads are blocked and there are queries in the log with .pivpn added to the hostname. A DNS leak test doesn't show my home IP address however, it's showing my hotspot ISPs DNS servers.

Should I be concerned?",pihole,1648663423.0
5689,comment,7,i2qw385,,That sounds more like a misconfig with your hotspot/wireguard client application. Any more details you can provide on that setup?,pihole,1648664906.0
5690,comment,2,i2rh11m,,"In your Client you want set AllowedIPs= 0.0.0.0/0. This is what’s know as a Full Tunnel and will route all your network traffic through the VPN. When you specify a specific subnet under AllowedIPs, only local traffic for the subnet will be routed through the VPN, this is know as a Split Tunnel. In split tunnel situation, you device will still use its regular internet access and only route local traffic to the specify subnet view the VPN. In other words, if you want all the client’s traffic to go through the VPN then make sure AllowedIPs = 0.0.0.0/0

Edit: some spelling errors lol",pihole,1648673125.0
5691,comment,1,i2rs7oq,,"If you run Unbound then your modem IP address should show as the DNS, that is expected behavior and normal. As for the VPN with it I would assume your IP would also show as the DNS then as well. What should worry you is any other DNS servers being shown. If they are you have a missconfig and only then should be worried.",pihole,1648677710.0
5692,comment,1,i2tr4bz,,"I was kinda having the same problem yesterday and found out that if allow all ip 0.0.0.0/0 i have no dns leak.

i kinda want for some devices to not talk to each other.",pihole,1648717642.0
5693,comment,2,i2qxnbr,,"  
Removed the keys and I'm using a ddns as my endpoint. Here's the rest of the config.

`[Interface]`  
`Address = 10.6.0.2/24`  
`DNS = 10.6.0.1`  
  
`[Peer]`  
`AllowedIPs = 192.168.50.0/24, 10.6.0.0/24`",pihole,1648665521.0
5694,comment,2,i2ra526,,Did you set AllowedIPs = 0.0.0.0/0 in your client config? This permit to use VPN connection for all destinations,pihole,1648670411.0
5695,post,7,tsavws,Subnet Change for Pi-Hole?,"I recently installed Pi-Hole on a Synology NAS through Docker. I changed my network's router DNS settings to utilize my NAS's IP as the DNS server with no secondary option. My router immediately and automatically changed its IP address from 192.168.0.1 to 192.168.1.1 which naturally threw all my devices for a loop. When I changed the IP back and changed the whole network's subnet mask from 255.255.255.0 to 255.255.0.0 everything started working and traffic was being funneled through Pi-Hole. I've been trying to wrap my head around why the subnet mask is making a difference. Would utilizing the automatic IP that my router suggested, 192.168.1.1, with the original subnet mask also resolve this the same way? I'll also add that my DHCP and IP binding is being handled by my router.",pihole,1648659214.0
5696,comment,4,i2qkhcd,,"I bet you would be fine even at a subnet mask of 255.255.254.0. Thats 192.168.0.0/23 in CIDR, aka 192.168.0.0 - 192.168.1.255",pihole,1648660344.0
5697,comment,2,i2qjoff,,"With a 16 bit subnet mask (255.255.0.0) you have expanded your available address scope by a factor of 256. Where the old 24 bit subnet mask covered the range 192.168.0.0 to 192.168.0.255, you now cover a much larger range.

https://www.ipaddressguide.com/cidr",pihole,1648660024.0
5698,comment,1,i2qkvcn,,That makes sense. I'll give it a try when I get home and see if this will also work. I'm not really understanding why I needed to change the subnet mask in the first place.,pihole,1648660500.0
5699,comment,1,i2qkeh7,,"Thanks for the reply and you're completely correct. However, I'm not sure how covering a larger range would change the outcome of me having issues with my router utilizing my NAS as a DNS server.",pihole,1648660313.0
5700,comment,1,i2qm3b4,,"Subnet mask the method for routers to determine ""if this packet is in my region or not"". If yes, then dont forward it out. If no, then forward it to the next in chain. If the IP matches the subnet mask (which is in binary) then its in their region. Typically for home routers the region for them are local network.

P.S. the routers in most homes are actually router + access point + network switch. In my computer lesson notes, it was called ""SOHO routers""",pihole,1648660979.0
5701,comment,2,i2qm01h,,"If the NAS is in a range no longer included in your new IP range with the /24 subnet, it won't be visible to the other clients.",pihole,1648660944.0
5702,post,42,ts3oa7,pihole-FTL no longer starting on Raspberry Pi 400 / Docker,"Everything was working fine, but this morning I ran updates on my Pi 400 and one of these included a docker update. All my other Docker containers are fine, only the pihole one is having problems.  

I have tried creating a new container and redownloading the latest image, but it's doing the exact same thing. Set up different volumes to make sure it's not using any old data as well, again same thing.  

New temporary yaml setup, super basic. Network mode host because I want to use DHCP on it.

    version: ""3""
    services:
      pihole:
        container_name: pihole2basic
        image: pihole/pihole:latest
        network_mode: ""host""
        environment:
          TZ: 'Europe/London'
        volumes:
          - '/docker/pihole2basic/config:/etc/pihole'
          - '/docker/pihole2basic/dnsmasq.d:/etc/dnsmasq.d'    
        cap_add:
          - NET_ADMIN
        restart: unless-stopped

Logs from docker shows FTL having problems

    [s6-init] making user provided files available at /var/run/s6/etc...exited 0.
    [s6-init] ensuring user provided files have correct perms...exited 0.
    [fix-attrs.d] applying ownership & permissions fixes...
    [fix-attrs.d] 01-resolver-resolv: applying... 
    [fix-attrs.d] 01-resolver-resolv: exited 0.
    [fix-attrs.d] done.
    [cont-init.d] executing container initialization scripts...
    [cont-init.d] 05-changer-uid-gid.sh: executing... 
    [cont-init.d] 05-changer-uid-gid.sh: exited 0.
    [cont-init.d] 20-start.sh: executing... 
     ::: Starting docker specific checks & setup for docker pihole/pihole
    Assigning random password: Vy3QxonJ
      [i] Installing configs from /etc/.pihole...
      [i] Existing dnsmasq.conf found... it is not a Pi-hole file, leaving alone!
      [i] Installing /etc/dnsmasq.d/01-pihole.conf...
      [✓] Installed /etc/dnsmasq.d/01-pihole.conf
      [i] Installing /etc/.pihole/advanced/06-rfc6761.conf...
      [✓] Installed /etc/dnsmasq.d/06-rfc6761.conf
    Configuring default DNS servers: 8.8.8.8, 8.8.4.4
      [✓] New password set
    DNSMasq binding to default interface: eth0
    Added ENV to php:
    			""TZ"" => ""Europe/London"",
    			""PIHOLE_DOCKER_TAG"" => ""2022.02.1"",
    			""PHP_ERROR_LOG"" => ""/var/log/lighttpd/error.log"",
    			""ServerIP"" => ""0.0.0.0"",
    			""CORS_HOSTS"" => """",
    			""VIRTUAL_HOST"" => ""0.0.0.0"",
    Using IPv4 and IPv6
    ::: setup_blocklists now setting default blocklists up: 
    ::: TIP: Use a docker volume for /etc/pihole/adlists.list if you want to customize for first boot
    ::: Blocklists (/etc/pihole/adlists.list) now set to:
    https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts
    ::: Testing lighttpd config: Syntax OK
    ::: All config checks passed, cleared for startup ...
    ::: Enabling Query Logging
      [i] Enabling logging...
    
      [✓] Logging has been enabled!
     ::: Docker start setup complete
      Checking if custom gravity.db is set in /etc/pihole/pihole-FTL.conf
      Pi-hole version is v5.9 (Latest: v5.9)
      AdminLTE version is v5.11 (Latest: v5.11)
      FTL version is v5.14 (Latest: v5.14)
      Container tag is: 2022.02.1
    [cont-init.d] 20-start.sh: exited 0.
    [cont-init.d] done.
    [services.d] starting services
    Starting crond
    Starting pihole-FTL (no-daemon) as pihole
    Starting lighttpd
    [services.d] done.
    Stopping pihole-FTL
    pihole-FTL: no process found
    Starting pihole-FTL (no-daemon) as pihole
    Stopping pihole-FTL
    pihole-FTL: no process found
    Starting pihole-FTL (no-daemon) as pihole
    Stopping pihole-FTL
    Starting pihole-FTL (no-daemon) as pihole
    Stopping pihole-FTL
    pihole-FTL: no process found
    Starting pihole-FTL (no-daemon) as pihole
    Stopping pihole-FTL
    pihole-FTL: no process found
    Starting pihole-FTL (no-daemon) as pihole
    Stopping pihole-FTL
    pihole-FTL: no process found
    Starting pihole-FTL (no-daemon) as pihole
    Stopping pihole-FTL
    pihole-FTL: no process found
    Starting pihole-FTL (no-daemon) as pihole
    Stopping pihole-FTL
    pihole-FTL: no process found
    Starting pihole-FTL (no-daemon) as pihole
    Stopping pihole-FTL
    pihole-FTL: no process found",pihole,1648637402.0
5703,comment,15,i2pbxgt,,New changes in the docker demon are causing this. Add “DNSMASQ_USER: root” to your environment variables and reload the container and you should be good,pihole,1648640768.0
5704,comment,7,i2pc1id,,"Dealt with this yesterday after updating docker. There's a thread on the pihole forum/GitHub/whatever. 

Long story short, I added `DNSMASQ_USER: 'root'` to the env variables to solve the problem. There is likely a more elegant and secure option available, but given the layers of security across my setup, I'm OK with it for now. 

I haven't dug into the cause beyond ""something in docker changed"".

ETA aforementioned thread: https://discourse.pi-hole.net/t/failed-to-bind-dhcp-server-socket-permission-denied/54481/6",pihole,1648640836.0
5705,comment,3,i2pgawt,,https://github.com/pi-hole/docker-pi-hole/issues/1019,pihole,1648643262.0
5706,comment,1,i2p9fjp,,Theres a lot of issues regarding pihole in docker these few days,pihole,1648639196.0
5707,comment,-5,i2pbdki,,Why use docker? It adds just another layer of config fiddling.,pihole,1648640434.0
5708,comment,1,i2p73rj,,"Web interface doesn't load properly, shows DNS service not running.

[https://i.imgur.com/kvrg3B3.png](https://i.imgur.com/kvrg3B3.png)

The log in the web interface now actually shows an additional error

[https://i.imgur.com/uZvgY8u.png](https://i.imgur.com/uZvgY8u.png)

DNSMASQ\_CONFIG

	FTL failed to start due to failed to create listening socket for port 53: Permission denied",pihole,1648637598.0
5709,comment,1,i2w2c7q,,"I had the same issue. I disabled the DHCP server and now it works again. For now I moved it back to the router, until it's fixed.",pihole,1648756428.0
5710,comment,3,i2pefzk,,"Thanks for this, that has indeed done the trick. I was just about to wipe the whole thing and try from scratch.",pihole,1648642240.0
5711,comment,1,i2quzo0,,"Running processes at root in containers goes against best security practices.  Is there an alternative option? Release notes say the Dnsmasq user has changed to pihole. Does that mean we can also run that service as pihole user if we create that? If yes, does this user account need to be created in the docker image or on the docker host?",pihole,1648664473.0
5712,comment,1,i2pefrx,,"Thanks for this, that has indeed done the trick. I was just about to wipe the whole thing and try from scratch.",pihole,1648642236.0
5713,comment,4,i2pbmz4,,"Because I've been running it like that forever and has never caused problems.

It makes it easier to backup and restore to different versions. You can run new pi-hole versions with the same config and if there are issues, you just go back to the old container.

Obviously doesn't work if the host is having problems like now.",pihole,1648640592.0
5714,comment,4,i2pcsv3,,"Not to sound facetious, but for all the reasons containerization is a popular technology. 

In this case, a significant change to how docker handles part of what it provides to containers changed, which has yet to be accounted for in the codebase and/or docker images. It's no different than when significant changes happen in OS's that require applications to adjust. FWIW, I've been running pihole via docker for 5 years or so and this is this first time I can recall something like this happening.",pihole,1648641286.0
5715,comment,1,i2q611i,,"...What? You've got it backwards...doing it via Docker is MUCH simpler and cleaner than doing it native. One YML configures the stack, done. Doing it natively you need to futz around with scripts, individual configs, networking, etc., all in different places.

Installing a service natively on a server is a fool's errand in the age of hyperconvergence anyway.",pihole,1648654586.0
5716,comment,1,i2pcnlc,,"[https://www.linuxuprising.com/2020/07/ubuntu-how-to-free-up-port-53-used-by.html](https://www.linuxuprising.com/2020/07/ubuntu-how-to-free-up-port-53-used-by.html)

systemd-resolved was using the port on the host  

However, after following above it still didn't work and still gives the same error",pihole,1648641200.0
5717,comment,1,i2wkbb9,,"If you add the DNSMASQ\_USER bit in the environment part like below it will work including DHCP.

environment:  
\- TZ=Europe/London  
\- DNSMASQ\_USER=root",pihole,1648763367.0
5718,comment,-4,i2pg26q,,"Yea it has it's advantages over VM's but still needs more resources as non-docker apps, which is the main reason for me to use it not on a Pi.
Maybe I just have too much preconceptions 😅",pihole,1648643129.0
5719,comment,1,i2r1cdn,,"I don't talk about a servers with a lot of different services and stuff, I talk about the OPs problem running PiHole on a Pi400. I see no benefit in this usecase. 

You set up your system once, like you have also to do when you want to use docker later on, and install PiHole, config PiHole and you're done. No step of configuring Docker.",pihole,1648666965.0
5720,comment,2,i2phjsa,,"Haha, totally get it. I was very much in the ""this seems like more work for little benefit"" camp up until I took the plunge. If you're just running a single workload/app on something, then the benefits are less. But if you're running 2+ on a single host - basically all of the benefits of VMs with a _fraction_ of the overhead. Generally, each container will include _only_ what is absolutely required for the workload, so you don't have all the overhead of stuff you don't need. I have 5 containers that run all the time and the overhead of docker itself is negligible on my pi4. I could move them over to a server and run 5 VMs, but then I'm running 5 full OS's with all of their extra weight that my workloads don't need. 

But it is another layer to figure out and something else to manage (albeit much less than a full VM), and it doesn't make sense in every instance.",pihole,1648643924.0
5721,comment,2,i2q6bb1,,"I have a Pi running literally 30 docker containers, one of them Pi-Hole. The Pi has no problems with resource contention. 

Whatever concerns you have about Docker being overcomplicated or resource-hungry are unfounded.",pihole,1648654703.0
5722,comment,2,i2rpeay,,"Because I run more than just PiHole within Docker, hence the sentence in OP ""All my other Docker containers are fine, only the pihole one is having problems"". So Docker is already running anyway.

Also, the container I normally use is PiHole with Unbound, which means it's much easier to maintain than having both installed directly. And having a second Pi for secondary DNS I only need to copy the yml file and I'm done.",pihole,1648676532.0
5723,post,3,ts1mxj,Unable to reach admin panel via OpenVPN,"Hi All,

I have pihole running in docker container in TrueNAS scale and i am not able to reach admin interface via OpenVPN. All other dockers running on different ports are reachable, but not pihole.

Any suggestions ?",pihole,1648628389.0
5724,comment,1,i2wu313,,"Can you do a 'sudo docker ps' and see what PiHole is listening on? 

Under the PORTS column you should see something like 0.0.0.0:80->80/tcp for the ""pihole"" image, and not for any other container (that got it first).",pihole,1648767462.0
5725,post,0,tru5c9,Pairing Nighthawk X6 R8000 and Pi-hole,"I would like to know if I can continue using my router (R8000 with the latest Netgear firmware)  as a DHCP server, specify my pi-hole IP address as the default DNS server, and still be able to see all clients resolved in the pi-hole query log? I came across the setting available in pi-hole to forward, but I can't get it to work. I thought it was very well explained and straightforward forward but maybe I am missing something? I specified [192.168.55.0/24](https://192.168.1.0/24) as my network, and [192.168.55.1](https://192.168.55.1) as my router IP. I left the local domain blank as it was optional.

I am reluctant in using pi-zero pi-hole as a dedicated DHCP server as I keep tinkering with it and my family members are not going to be able to get the router working if for some reason the pi goes down.",pihole,1648600723.0
5726,comment,1,i2q4ydu,,No problem using your router as the DHCP client. Change the DNS to the PiHole and you're are good to go I've always used my router for DHCP and haven't had any issues at all.,pihole,1648654155.0
5727,comment,1,i2rtdgo,,Thank you. But that route then shows my router as the only client in the query log. I wish to see individual clients,pihole,1648678206.0
5728,comment,1,i2s3q1f,,I solved that problem by going to my client list in my Unifi controller and putting the IP addresses and client names manually in PiHole. Most of my clients are wired and the ones on WiFi have never changed IP addresses. Doing this allows me to see all my clients except guests when they come in.,pihole,1648682856.0
5729,post,2,trsvhj,do the companies that are blocked still have to pay for their ads?,"Like, are they still getting charged even though the ad doesn't show?",pihole,1648596686.0
5730,comment,7,i2nqzrx,,"No. The ads are never requested from the ad broker.  The site with the ads on it didn't get paid, either.",pihole,1648603298.0
5731,comment,1,i2s7bxn,,"It's not that the ad doesn't show. The ad is never *loaded*.  
If a company was charged for not-loaded content, you can be sure said company would complain!",pihole,1648684535.0
5732,comment,0,i2nd8yg,,"Some ads are impression based and others are click based. So I would guess in both cases they wouldn't pay since it does not show and can't be clicked. I could be wrong though

Edit: I meant ""does not show""",pihole,1648596939.0
5733,comment,2,i2plaae,,"It shouldn‘t appear at all. Sometimes an empty area is visible. Sometimes this can be clicked, but hopefully the click does not work.",pihole,1648645796.0
5734,post,26,trs31s,Warning in dnsmasq core: reducing DNS packet size for nameserver 8.8.4.4 to 1232,how do i fix this?,pihole,1648594318.0
5735,comment,8,i2neemz,,https://discourse.pi-hole.net/t/dnsmasq-warn-reducing-dns-packet-size/51803/15,pihole,1648597469.0
5736,comment,8,i2nl150,,"You can get rid of the warning by adding a config file like /etc/dnsmasq.d/99-edns.conf and adding

“edns-packet-max=1280” in there. Then run “pihole restartdns” and your Pi-hole will not even try with larger packet sizes

From the doc the Mod posted. Just in case you TL;DR it.",pihole,1648600538.0
5737,comment,13,i2nsd8b,,">	edns-packet-max=1280”

1232 to solve this particular problem.",pihole,1648603931.0
5738,comment,2,i2p09qr,,"Hello,

I have this issue too but this solution doesn't work... I still have those warnings.
I use a docker version of pihole.

Any ideas ?",pihole,1648632057.0
5739,comment,1,i2oe933,,\+1 This,pihole,1648615054.0
5740,comment,1,i2p5uus,,"1232 is just a default value. Theres a grid somewhere for reference, I have linked that in my post...

Edit: https://discourse.pi-hole.net/t/dnsmasq-warn-reducing-dns-packet-size/51803/31

Edit: I've check the grid: for OP it should be 1400",pihole,1648636686.0
5741,comment,1,i2wtaur,,Do you have a docker version of dnsmasq.d then instead or do you map the /etc volume? (My pihole is run with docker-compose so its dnsmasq.d is ./etc/dnsmasq.d.),pihole,1648767119.0
5742,comment,1,i2pfsla,,">	I’ve check the grid: for OP it should be 1400

It should be the size reported by the warning.  This specific dnsmasq action was reducing to 1232, not 1400. 

    Warning in dnsmasq core: reducing DNS packet size for nameserver 8.8.4.4 to 1232",pihole,1648642984.0
5743,comment,1,i345flf,,"I have a mounted volume for /etc/dnsmasq.d. Inside, there is a 99-edns.conf file which contain the ""edns-packet-max=1232"".",pihole,1648911984.0
5744,comment,1,i2pi0op,,"So did it tried 1400 first? I believe it dont. It was set to be 4096 for a reason, so I believe the bigger the size the better, maybe less packets are sent that could reduce network congestion. 

It seems that 1232 was a default value, not a trial and error value. 

To me, it like blindly halfing the box size without measuring the space it should be fitted into. Yeah, its going to fit at some point, but you waste some space. The headers of the edns packets is like the package material of the box. Using multiple boxes means you use the space where actual contents could have been as packaging materials.",pihole,1648644170.0
5745,comment,1,i3f8oko,,"Only suggestion I can think of is to double check (grasp at straws) and edit that 99-edns.conf file so it's a known error. Then restart and it should fail, proving it's reading it. Or not fail, showing it's not. Sorry ... pretty lame suggestion.",pihole,1649116398.0
5746,comment,1,i2pj28e,,"If the warning occurs only occasionally, the answer is more appropriately ""do nothing"".   Let dnsmasq make an adjustment when it needs to, but no applied limit otherwise. 

The OP's question however, was how to get rid of the warning (with no mention of the frequency at which they receive the warning). The solution in that case is to set the limit to 1232.",pihole,1648644695.0
5747,post,5,trn8k0,Some devices don't use piHole,"Hello, I just installed pi hole on my raspberry pi but on the network page I can see that some of my devices (pc, smartphone, router) doesn't use pi hole. I followed [this guide](https://docs.pi-hole.net/routers/fritzbox/) but nothing changed. Any advice?

&#x200B;

https://preview.redd.it/4hn739ke4eq81.png?width=986&format=png&auto=webp&s=0543c041b1a454798ad318db3bdb3be13488751a",pihole,1648589144.0
5748,comment,6,i2mc606,,"If you just did it, your clients probably didn't renew their DHCP lease to get the new DNS server. You could restart your router to force them to all renew.",pihole,1648589807.0
5749,comment,0,i2mhmgm,,"What are these devices? If IoT thats normal because they don't need pihole, if they are computers its probably because they don't have pihole as dns.",pihole,1648591695.0
5750,comment,1,i2piqe0,,Thank you!,pihole,1648644531.0
5751,comment,5,i2mnf1j,,">	If IoT thats normal because they don’t need pihole

IOT devices typically have much telemetry that is blocked by Pi-hole.",pihole,1648593679.0
5752,comment,1,i2pjleo,,IoT might have baked in DNS even on other devices where you can edit the network settings like TVs. The rule of thumb is to force all DNS traffic through your pihole with firewall rules. Most consumer-grade routers especially ones that can be flashed with third-party firmware like DDWRT Tomato Open WRT should be able to accomplish this task. You can go further by setting up your own router and using something akin to pfsense to fully customize and secure your home network. You would also tend to go this route with Windows 10 and especially Windows 11 since by default both have lots of telemetry on top of most programs or websites you use these days. Cap it off with a reliable VPN to stunt collection from your ISP.,pihole,1648644962.0
5753,post,2,trjz4i,Private DNS Android with Pihole,"Recently I've got a new phone and I would like to use pihole but not have to deal with a VPN + lockscreeen at home. 

I've looked around and tried a script in my pi (not in my primary Pihole) to try and run it but so far I've encountered problems with Nginx, some config file issue.

(https://github.com/varunsridharan/pi-hole-android-private-dns)

Does anyone have something around that works?, I would like to run Pihole over data for me and my wife without having to use a VPN to home",pihole,1648586945.0
5754,comment,1,i2m7hc5,,https://github.com/varunsridharan/pi-hole-android-private-dns/issues,pihole,1648588172.0
5755,comment,1,i2mceg0,,"Oh geez, I didn't notice. I will try that and tomorrow I will update my post! thanks jfb!

edit, certbot didn't make any certificate to work...",pihole,1648589905.0
5756,comment,2,i2o59sa,,"Pass `--preferred-chain ""ISRG Root X1""` during certificate generation.",pihole,1648610108.0
5757,comment,1,i2r84up,,"No luck, I might try pivpn",pihole,1648669626.0
5758,comment,1,i2rr20w,,">No luck

Then the certificate isn't your (only) problem and you have something else entirely going on.",pihole,1648677221.0
5759,post,0,trc1yq,"[Troubleshooting] Network seems to go down at times, checking if PiHole is to blame","Hello All, 

I've had a PiHole setup for a while now but lately I've had an issue where my internet goes down for a while and I just want to make sure I've not bungled something up in the PiHole before I call the ISP / troubleshoot elsewhere.

When the internet goes out I note the lights on my modem are blue, but the upstream light is blinking. (Is this a sign it's the modem and *not* the pi-hole? 

I accept if it is, I just want a sanity check on my PiHole config before I just *assume* ""Modem lights means modem issue"" 

https://tricorder.pi-hole.net/2FtFCV6B/",pihole,1648577457.0
5760,comment,2,i2lwo0c,,"the easiest way to test is to:

`ping` [`8.8.8.8`](https://8.8.8.8) \-t

in command prompt on windows.

the -t makes it continuous and pressing the ctrl + c will stop it. If you dont want continuous, just omit the -t from the command.

if it is successful and your internet is ""down"", you can assume routing works and DNS is the culprit (if this is the issue you are actually having)

If it fails. Your ISP is probably having issues. I would try pinging when your network is working to ensure this is a reliable test. Some places block ICMP traffic.",pihole,1648584082.0
5761,comment,1,i2loom6,,"The simple way to check is as follows:

When you have 'internet issues' configure a local client's DNS settings manually, then test again.

Even quicker, if you have VPN software installed on a client, turn on VPN, which will utilize the VPN providers DNS and bypass your pihole.

Should be an easy test :)",pihole,1648581016.0
5762,comment,1,i2m0nyz,,"*"" but the upstream light is blinking""*

If you are referring to the status lamps then you are probably losing connection from the ISP. If you are referring to the lamps at the RJ45 jacks, that means the blinking port is active.",pihole,1648585608.0
5763,comment,1,i2m2s3c,,"You have at least one chatty client that is causing overloads.  The portion of the pihole.log that is included in your debug log contains almost all entries like this (at different times):

      [2022-03-29 07:11:34.850 24853M] WARNING in dnsmasq core: Maximum number of concurrent DNS queries reached (max: 150)

From our documentation page at: https://docs.pi-hole.net/ftldns/dnsmasq_warn/

""The configured maximum number of concurrent DNS queries for a given server is reached. The system is either very busy at the moment or not receiving queries from the configured upstream. Check your connectivity or the upstream DNS server status.

The warning can also be printed when being spammed with an excessive amount of duplicates or when the upstream server never replies for specific domains. Check your logs and try to identify similarities between the query directly preceding this warning and earlier queries in /var/log/pihole.log. Try to find out if your upstream does maybe never reply to specific domains and fix this.

This warning is printed at most once every five seconds (per upstream server) to help mitigate unlimited log file growth.""",pihole,1648586421.0
5764,comment,1,i2nc6lo,,"Oh I hadn't thought of that pinging the IP directly would mean yeah that the DNS isn't answering FQDN's but matches IP addresses. 

Clever, I'll keep this in mind (Or try to) when it happens next",pihole,1648596464.0
5765,comment,1,i2lpvlr,,"No VPN software and when you mean local client, you mean set my browser to use the DNS? 

It's not down *long* so I don't get a ton of time to just check things

It's long enough to realize the internet was out, check if I can connect to the modem and then shortly after it's back up",pihole,1648581482.0
5766,comment,1,i2nc7u6,,It's the status lights.,pihole,1648596479.0
5767,comment,1,i2nc0dp,,"Could this be caused by the fact that I have 4 Google home devices, a Dakboard, and an Alexa in the house? 

Or would it be something else?",pihole,1648596386.0
5768,comment,1,i2ne1cp,,Most ISP modems & routers have a steady status lamp when there is an internet connection. A blinking status lamp is trouble on the line. It could be your drop line to the pole or the line back to the ISP or the ISP's equipment. Modem lights don't lie.,pihole,1648597300.0
5769,comment,1,i2nebdq,,Its hard to say.  Look at your top clients and those are the likely culprits.,pihole,1648597429.0
5770,post,47,tra7r5,Exclude some devices from ad blocking,"So, this is the basic setup:   
Devices to router ([Fritz.box](https://Fritz.box) 6591 cable) to Pi-Hole. Pi-Hole is configured as the DNS server.  


Some devices need to bypass this whole adblocking thing though, as they don't function properly this way. (Rather the devices owner, who don't function properly if they can't click on shiny insta ads smh)

I already tried adding said devices under Clients and then adding them to a group without adlists.   
However, those devices have never even sent  a request to Pi-Hole, only the [fritz.box](https://fritz.box) router itself.

&#x200B;

How can I fix this and get some devices to ""ignore"" Pi-Holes adlists?",pihole,1648574733.0
5771,comment,45,i2ld6s7,,Manually assign DNS servers on those clients.,pihole,1648576704.0
5772,comment,12,i2lhs73,,"I thought you could assign devices to groups and then set which lists to use for each group.

Edit: just logged into the admin panel for one of my piholes and there's a group management menu where it looks like you can set all this up.",pihole,1648578452.0
5773,comment,6,i2lp7qo,,"You can create a new group in the group management tab, I called mine ""Exclude"". Then go to the adlist tab and make sure every list has your default group enabled and ""Exclude"" disabled. Then add that Exclude group to any client device you don't want to be blocking ads.",pihole,1648581224.0
5774,comment,3,i2mgh41,,"If you have access to configure both PiHole and the router, you should be able to configure them so that the FritzBox advertises the PiHoles as DNS server so that your clients ask the PiHole directly for DNS resolution. 

If that is not wanted or not possible, follow the advice given by the PiHole team member and configure the DNS directly for that device where you do not want the adblocking",pihole,1648591222.0
5775,comment,3,i2mk2kv,,"Instead of bypassing, which should be viewed as a last resort, a better solution is to use groups and allow the domains that need to be allowed. Don't allow all traffic, just what needs to be allowed. 

This still keeps the protection in place and allows you to still gather stats for the devices.",pihole,1648592709.0
5776,comment,2,i2ndidr,,"Frame challenge : if the DHCP server doesn't allow Pihole to work correctly... why not disable said DHCP and use Pihole as DHCP instead?  

I used this approach because I needed my telework machine to *literally* not use Pihole's DNS at all (Pihole, even with *blocking* disabled, still logs requests), *but had no admin rights*, so the ""easy way"" was to tinker Pihole's DHCP to change the resolver for specific clients.  

My fritz box lacked the ability to set client-specific DHCP rules, so I disabled FritzBox's DHCP. Kinda crazy solution, but it works.",pihole,1648597057.0
5777,comment,1,i2nv3k8,,"I use pfSense DHCP to assign custom DNS servers for certain devices that have static assigned addresses in the DHCP service. Saves me from having to maintain on two systems.

Cheers!",pihole,1648605176.0
5778,comment,1,i2o3gdx,,"You should be able to configure your router (well the DHCP server portion anyway) to point your clients directly at Pi-hole so the requests don't all come from the router. In your DHCP settings, use the pihole's IP address instead of the router's and then the groups will work as intended.",pihole,1648609192.0
5779,comment,1,i2o87y6,,Are they Apple devices? Those can change their MAC addresses to provide another level of privacy. You can disable that setting and then add the MAC addresses to pihole. Or do what I do and manually add a public DNS server like Google or Cloudflare on the device’s network settings — it’s a lot simpler.,pihole,1648611658.0
5780,comment,1,i2p76gc,,"> Rather the devices owner, who dont function properly if they cant click on shiny insta ads smh

God, i feel you. My parents like to shop online by clicking on ads",pihole,1648637652.0
5781,comment,2,i2njdii,,This is what I do. Works great!,pihole,1648599770.0
5782,comment,7,i2m59n5,,"Group management only works if the individual clients are seen by IP in Pi-hole.  If all the DNS queries appear to originate from the router, group management won't work.",pihole,1648587297.0
5783,comment,2,i2m5cck,,The OP isn't seeing individual clients - only the router.,pihole,1648587326.0
5784,comment,2,i2mp9ae,,If all the DNS queries appear to come from the router and not individual clients (as appears to be the case here) group management will not be effective.,pihole,1648593921.0
5785,comment,2,i2qf5sw,,"This worked, thank you so much!",pihole,1648658248.0
5786,comment,1,i2o8l32,,"Android behaves the same way, (at least Samsung's version of it anyway)

I agree though, force the DNS server on the individual device to 8.8.8.8 or something similar.  It's easier.",pihole,1648611852.0
5787,comment,1,i2nxwkj,,"I'm just curious: why does this happen? And is there no way to change this behaviour?
I use also a fritzbox, which handles the DHCP, and I can see every client from the network, not just the router.",pihole,1648606502.0
5788,comment,1,i2ny268,,https://discourse.pi-hole.net/t/why-do-i-only-see-my-routers-ip-address-instead-of-individual-devices-in-the-top-clients-section-and-query-log/3653,pihole,1648606577.0
5789,comment,1,i2nztvn,,"Makes no sense bc I have the same router and it works.
My guess is he didn't define a local DNS server in the fritzbox config, instead he changed  the upstream ones, where you can set a primary and secondary.
Or my second thought is, that he allowed only local requests in pihole, which are one hop away. and this one hop is to the router, in his case.
Unfortunately I cannot test this right now",pihole,1648607425.0
5790,comment,1,i2phd30,,"Tried changing the hop thing, did not work sadly. How would I change the local DNS thingy? All I find are the upstream ones.",pihole,1648643826.0
5791,comment,1,i2pi6ag,,Nvm found it. I'll try that later.,pihole,1648644250.0
5792,comment,1,i2piso2,,"It's a little bit hidden and maybe you had to activate the ""advanced view""?! (I'm not sure if it is called like that in the english version of the GUI)",pihole,1648644562.0
5793,post,7,tr534h,Connecting to a Pi-Hole server via WireGuard doesn't allow the client to have internet access,"**Edit:** Resolved. I had a setting in Pi-Hole's DNS settings mis-configured. In DNS Settings -> Interface Settings, I had ""Respond only on eth0"" selected. I changed it to ""Allow only local requests"".

I've successfully set up Wireguard server on my LAN's raspberry PI Pi-Hole server. I followed [Pi-Hole's documentation guide](https://docs.pi-hole.net/guides/vpn/wireguard/server/) for doing this exactly.

My wireguard client (Android phone) can successfully connect to the Wireguard server, including from outside my LAN (e.g. from phone's cellular data network).

The problem is: when the client connects to the Wireguard server, the client can't access the internet (outside world, e.g. [google.com](https://google.com), other websites).

Remedies I've tried:

* Editing /etc/sysctl.conf and uncommenting net.ipv4.ip\_forward=1
* Updating the system after making edits to /etc/sysctl.conf with command sysctl -p
* Rebooting the wireguard server/raspberry pi
* Running the command sudo sysctl -w net.ipv4.ip\_forward=1

This is what my /etc/wireguard/wg0.conf file looks like:

    [Interface]
    Address = 10.100.0.1/24, fd08:4711::1/64
    ListenPort = 47111
    PrivateKey = [redacted]
    
    [Peer]
    PublicKey = [redacted]
    PresharedKey = [redacted]
    AllowedIPs = 10.100.0.2/32, fd08:4711::2/128

My router is definitely configured to forward port 47111 UDP to the Wireguard server on the Raspberry Pi (again, the client is able to successfully establish a connection to the Wireguard server. Client just has no internet access while connected).",pihole,1648569049.0
5794,comment,1,i2ktm0e,,"Does the Wireguard server have a DNS server (specifically the Pihole instance, probably 127.0.0.1:53) configured?

I'm not so familiar with Wireguard installation itself but I've done it via PiVPN a few times and that installer self-configures the DNS server appropriately.",pihole,1648569278.0
5795,comment,1,i2kvha3,,[deleted],pihole,1648569990.0
5796,comment,1,i2kvcrk,,"Yes it does, Pi-Hole.",pihole,1648569941.0
5797,comment,2,i2kz9pf,,"Does Pi-Hole see the requests? I.e. you connect to cellular & VPN then enter Google.com or randomdomain.com, do they show up in Pi-Hole log?",pihole,1648571431.0
5798,comment,1,i2kywdo,,Allowed IP’s should be 0.0.0.0 if you want all traffic to go through WireGuard.,pihole,1648571292.0
5799,comment,2,i2l68kr,,"I figured it out, it was a Pi-Hole setting. See my original post for update. Thanks",pihole,1648574060.0
5800,post,1,tr4rbo,Needing to restart DNS resolver every day - troubleshoot or start over?,"Starting a couple of weeks ago, literally every morning (probably nothing to do with the time of day, but rather the accumulation of whatever is causing this), my browsing slows to a crawl. I've found that restarting the DNS resolver fixes the issue, but have no idea where/how to begin troubleshooting this. Any tips on what to look at would be appreciated -- or is it time to just start over? (Pi-hole v5.9  FTL v5.14  Web Interface v5.11 on a Raspberry Pi 3b+)",pihole,1648568133.0
5801,comment,2,i2kwjjd,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1648570397.0
5802,comment,2,i2kx49i,,"Please generate a debug log first, then upload when prompt. You can do so by `pihole -d`.

The try repair: `pihole -r` then select repair

Then try to see if theres any abnormal behaviors in `/var/log/pihole-FTL.log`. Resizing ""FTL-dns-cache"" is a normal behavior.

For a temporary, quick bodge, you may add these lines in the crontab and let pihole restart itself. Keep in mind that this is not a long term solution and you should **not** rely on this to solve the problem. 

1. `crontab -e`
2. In the crontab editing page, enter these lines at the bottom. This restarts pihole at 05:30 every morning.

```
# restart pi-hole every morning
# TODO: fix the issue
30 5 * * * /usr/local/bin/pihole restartdns
```",pihole,1648570617.0
5803,comment,1,i2kxf97,,Thank you: https://tricorder.pi-hole.net/ayzH52bV/,pihole,1648570733.0
5804,post,2,tr1uv8,Ipad and Macbook bypassing pihole but not iphone,"Edit: Problem solved. I have no idea how. I was playing with the dhcp option on the pihole and everything on the mac started to work. 

I do not know where to ask this. I installed pihole inside a docker on my gaming pc. It has worked good on both iphone 8 and iphone 11, but not with ipados and macos (new pc received yesterday).

I can't access the pihole admin from ipad and mac, but works from iphone.

Plex detects that I am not in direct link with my pc, so it play at 240p, iphone works fine.

I can't use microsoft remote desktop on ipad and mac, but works on iphone

I can't connect to my shared drive on ipad and mac, but works on iphone.

I also have a Windows10 laptops, everything works flawlessly on it.

Private relay is disable on all apple device. 

The problems started when I installed pihole on my pc.

I am out of idea of what to do. I tried many thing I found on google and none seems to be working.

Thank you",pihole,1648565334.0
5805,comment,2,i2kn1da,,"Is iCloud private relay enabled? Even without a premium iCloud sub, PR seems to function as kind of a DoH client, causing a potential bypass. 

Are the two devices on the same network? Example is if you use Xfinity (Comcast) and have devices attached to the ""xfinitywifi"" hotspot feature instead of your home network. (Seems silly as hell, but I have seen this happen many times).",pihole,1648566705.0
5806,comment,1,i2kvmgw,,"OK, so you can access [pi.hole](http://pi.hole) on your phone right? Try accessing example.net on your ipad or macbook and see if it shows up in the query log. Or, try to disconnect your ipad, reconnect it and refresh the query log page on your phone after 3 seconds to see if the ipad queried anything. Repeat for the macbook. 



While you are there, generate a debug log and upload. It is not useful for me but very useful for the devs. You can do it by `pihole -d` and type Y for upload, or admin page > tools > generate debug log and tick the upload checkbox.",pihole,1648570045.0
5807,comment,1,i2kw701,,"I’ve added a forwarding rule for dns in my router. This forces all traffic to my pihole. Also you can try adding it manually.

iOS tells me there a privacy issues regarding my dns setup but I don’t care about this.",pihole,1648570264.0
5808,comment,2,i2kr1gq,,"It is deactivated in the options of both ipad and macbook. BUT I am assuming it is still doing something in the background. I have a profile to deactive it, I got it from github: https://gist.github.com/haircut/1dbb4a0ea6988d5bf2c9388b03047faa

The reason I am thinking this is that everytime I walk in the house, my iphone says that PR isn't compatible with my network, so I click deactivate. And my iphone works fine.",pihole,1648568280.0
5809,comment,1,i2krzmi,,Extremely weird. Affected devices are on the correct network as well?,pihole,1648568647.0
5810,comment,1,i2l8kly,,"Yes, my router can see both devices.

Edit: No idea how, but the problem is fixed.",pihole,1648574941.0
5811,post,1,tr1uhu,How do I retain pihole config & history after recreating it in docker .,"I am very recent at cli stuff but eager to learn so be gentle if this is kids stuff to most of you... I have pihole in a docker container on an rPi4. I used some guides online and used a docker-compose.yml to create the container. As I understand it containers are meant to be jettisoned overboard and remade fresh rather than updated...and there's something about docker knowing where to find any persistent settings when creating a new one. This is the bit I don't really get. I think its these bits in the yaml: `volumes:` `- './etc-pihole/:/etc/pihole/'` `- './etc-dnsmasq.d/:/etc/dnsmasq.d/'` Does ./ mean 'create these dirs in ‏‏‎ the same folder this yaml file is located)?? Because although I have \~/etc-pihole I also have /etc-pihole (at the root dir). I don't know why that is or which is being used to store data outside of the container. I'm 99% sure its the one in my home dir tho. Thing is when I recreated the container, it had some of the config but I was missing things like custom group-adlist entries (and even the web UI colour) and the history. This is where I'm stuck... how do ensure pihole finds the total config and history?",pihole,1648565304.0
5812,comment,1,i2wuoka,,"The string on the left of the ':' is the filesystem on the Pi. The string on the right of the ':' is the filesystem in the container. It gets mounted. So if you have ./foo:/etc/dnsmasq.d/ then ./foo/bar.txt will be /etc/dnsmasq.d/bar.txt inside the container. 

TLDR; you want ./etc-pihole/ and ./etc-dnsmasq.d/ based on the above. (And not /anthing).",pihole,1648767723.0
5813,post,8,tr1rud,Blocking Yandex (and maybe Sentry),"So after reading this... [https://9to5mac.com/2022/03/29/yandex-is-sending-data-from-ios-users/](https://9to5mac.com/2022/03/29/yandex-is-sending-data-from-ios-users/)

... I realized that Yandex and Sentry are the only ones that are still getting through when I run the ad blocker test at [https://d3ward.github.io/toolz/adblock.html](https://d3ward.github.io/toolz/adblock.html)

I'm currently using these two block lists:

[https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts](https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts)

[https://dbl.oisd.nl](https://dbl.oisd.nl)

&#x200B;

Any suggestions?",pihole,1648565089.0
5814,comment,9,i2kjyvl,,">	Any suggestions?

If you want to block those domains, just add them to your blacklist.",pihole,1648565489.0
5815,comment,2,i2oge5d,,"I don't know about Yonder, but Sentry is primarily for tracking crashes, and secondarily performance. If you block it, then sites and apps you use will not get said crash reports, and will not know about the bugs you are hitting.

These sites are not about tracking you from a marketing perspective.",pihole,1648616369.0
5816,comment,1,i2lgyhz,,"In addition to those block lists you mentioned I also use: https://firebog.net

I I have copied the ones with the tick marks and check marks and I do not use the crossed list on this website.

I run that text you posted, and my test came back as 100% blocked",pihole,1648578136.0
5817,comment,2,i2pnsl7,,"Good to know, thanks!",pihole,1648646974.0
5818,comment,1,i2ma855,,"That’s a lot of sources to add. Out of curiosity, how many different sources are in your adlists and how many overall domains are blocked?",pihole,1648589189.0
5819,comment,0,i2lkl4k,,"Thanks, I will check that out!",pihole,1648579441.0
5820,post,1,tr0tps,Pihole from outside local network. How can I be sure I did things right ?,"Hello !

So I got a RPi4 spinning docker and I'm running Pihole on it.

From home, as DNS server, it's working great. I got around 15% blocked traffic. That's awesome, I love it and just made a little donation.

I also created a VPN tunnel using wg-easy that let's me connect to my server remotely from my phone.

Is usining PiHole from outside as simple as changing the DNS Server address to my pihole's ip in my wireguard config on my phone?


Thanks for your help.",pihole,1648563595.0
5821,comment,4,i2kibo1,,Yes that’s it,pihole,1648564826.0
5822,comment,1,i2le6x3,,"Thank you.

I don't get it though. When I'm home, I got hundreds of requests blocked on my phone. When I'm out using my vpn, I only got q handful of them. Would you know why ?",pihole,1648577087.0
5823,comment,2,i2lim4o,,"VPNs on phones don't always cover the entire device. In example, Samsung KNOX is effectively a whole separate virtual phone and it's connections will not be caught by a VPN client running from the host OS.

Beyond that, applications may already have cached entries from running before the VPN was launched, or perhaps using DoH (have you disable ""secure DNS"" in your browser?), but those exceptions should honestly be the same on either connection.

I would advise looking at your VPN settings to make sure you have DNS servers properly advertised so VPN clients only get the PiHole, and possibly to disable split tunneling if enabled.",pihole,1648578771.0
5824,comment,1,i2rzufr,,"Thank you for your answer, and sorry for my delayed answer.

I don't use split tunneling. Neither do I use DoH or disabled ""secure dns"" in my browser.  
I also checked my settings. I got my pihole as DNS on my modem at home. It works fine.

Then I got my wirguard setup on my phone. I do connect to my local network. I set DNS server as my pihole, and my endpoint to my isp ip address and wireguard port. It still blocks almost nothing.  


I don't know what I'm doing wrong.",pihole,1648681082.0
5825,comment,1,i2s1z4g,,"Say you're using Chrome. ""Secure browsing"" -is- DoH. If it's enabled, Chrome's DNS queries will not go to your pihole. 

I can only guess that with your VPN on you still have DNS queries being sent outside the tunnel. Maybe try a different VPN client on the phone? 

Personally I use Forticlient (as I have Fortigates), and it works great.",pihole,1648682058.0
5826,post,32,tqxssx,Plans for FreeBSD compatibility?,"FreeBSD compatibility is something not supported yet. I would like to know if there's any plan to get FreeBSD supported.

It would be very nice the have PiHole plugins for OPNSense and pfSense for example. It would be freaking awesome, but also would gain even more recognition to the project.

I would really enjoy to simplify and speed up my network stack running everything on a single box.",pihole,1648553972.0
5827,comment,8,i2jz02o,,"I feel like bsd rarely gets support for anything, even their stuff from official plugins is sometimes updates behind their Linux/windows counterparts. I love truenas, but it's probably the last thing I'll ever use bsd with.",pihole,1648555803.0
5828,comment,7,i2k2qhs,,"There is an open feature request.

https://discourse.pi-hole.net/t/freebsd-compatability/2092",pihole,1648557844.0
5829,comment,2,i2nv5zz,,">also would gain even more recognition to the project

Hey devs, you should do it for free for the EXPOSURE.",pihole,1648605207.0
5830,comment,1,i2kr3k4,,"Maybe until then, You may find [this](https://www.geoghegan.ca/unbound-adblock.html) interesting",pihole,1648568303.0
5831,comment,1,i2ktbr8,,"While I would love to see pihole on OPNSense (I truly prefer pihole), Adguard is already available on OPNSense via the community repository.  PFSense has PF-BlockerNG.  Adguard and PF-BlockerNG are comparable to pihole.",pihole,1648569167.0
5832,comment,1,i2l401u,,"Is there an inherent incompatibility with running it in a Linux jail?

Or just prefer not to?",pihole,1648573213.0
5833,comment,1,i2o1kuw,,"Meh. I see no need to support *BSD.

Also not a fan of running everything on a single box.",pihole,1648608271.0
5834,comment,3,i2l2cfc,,Well there is TrueNas scale now. Based on debian.,pihole,1648572585.0
5835,comment,2,i2k6c9u,,"Thanks, it seems to be old. What is actually needed to become active?",pihole,1648559652.0
5836,comment,2,i2nxiw3,,I'm not following you. Our software is open source and no charge (donation supported) already. How do we get more free than that?,pihole,1648606320.0
5837,comment,1,i2kshei,,It is interesting. How would you use it with OPNSense for example?,pihole,1648568840.0
5838,comment,1,i2l9wz1,,"Yeah I have it on a vm now, but I like  keeping a toe into BSD, it looks decent on a resume imo. It's just not practical for a lot of things, thanks though!",pihole,1648575451.0
5839,comment,8,i2kcnqc,,"There needs to be enough votes and developers who have experience with FreeBSD to change the installer and support the code changes.  As of now, none of the development team runs FreeBSD, so this feature request is very low on the list.",pihole,1648562470.0
5840,comment,0,i2od0n3,,You don't need to ask for donations any more! Hooray!,pihole,1648614320.0
5841,comment,1,i2lpbea,,"I believe it is already apart of opnsense, also adguard home can install on bsd.",pihole,1648581265.0
5842,comment,3,i2kdtki,,I see it as fourth item by vote count if I filter on pending feature requests. But yeah developer who know FreeBSD is a must. Hope there will be someone.,pihole,1648562961.0
5843,comment,1,i2lsb2c,,Then it must be the DNSBL section of Unbound right?,pihole,1648582420.0
5844,comment,1,i2nb3tx,,"Off topic, but I've been curious about this for a while...

What does the AdGuard app do that using their DNS servers doesn't?",pihole,1648596082.0
5845,comment,1,i2lu3th,,Correct that would stand for DNS Blackhole.,pihole,1648583116.0
5846,comment,2,i2nbx1d,,Same as pihole does.,pihole,1648596345.0
5847,post,0,tqse54,"On my iphone mail app emails wont load correctly and i have to manually press loud mail, any fix?",It says stuff like your network settings ddint allow flr this to load properly,pihole,1648530729.0
5848,comment,6,i2j4iy3,,You are going to have to be a bit more specific.,pihole,1648531771.0
5849,comment,4,i2ja8uj,,"I can‘t imagine a reason, why DNS filter can stop the automatic inbox refresh but not a manual refresh. 

Did you check turning off Pihole‘s filtering for a while? Does the auto refresh come back?",pihole,1648536101.0
5850,comment,3,i2j5ydz,,Check your logs. See what’s blocked.,pihole,1648532792.0
5851,comment,1,i2jpmb3,,Try going to Wi-Fi settings on your iPhone and turning off “limit IP address tracking” for the Wi-Fi network you are connected to that uses Pihole.,pihole,1648549430.0
5852,post,3,tqr3s7,Would you buy a router with built-in Pi-hole features?,"Hi everyone!
I’ve been a longtime lurker and recently started using Pi-Hole and it’s been an eye opening experience. 

After dozens of hours I finally managed to block YouTube ads on my iOS device. It’s definitely worth it, but I wish it was easier to setup. 

This made me wonder why there wasn’t a router with built in Pi-Hole features. It takes a lot of work, but I’m sure a commercial team of devs could even figure out how to block ads in other apps such as TikTok. 

Would you buy a router with these privacy and Adblock features built-in?

Would love to hear your opinions

[View Poll](https://www.reddit.com/poll/tqr3s7)",pihole,1648526013.0
5853,comment,18,i2ixq8g,,">	After dozens of hours I finally managed to block YouTube ads on my iOS device.

You can't do this reliably and repeatedly with Pi-hole.",pihole,1648527338.0
5854,comment,4,i2k5sxm,,I voted no because adding 3rd party software to a router seems like just adding one more potential point of obsolescence  to me.  Also not sure providing another attack vector to a router is a good idea or if it even would be considered one but when I'm not sure on that front I vote for caution.  Easier to just keep the two separate.,pihole,1648559389.0
5855,comment,3,i2jja45,,What I would really enjoy is FreeBSD compatibility. So I could have it within OPNSense I run anyway.,pihole,1648543953.0
5856,comment,3,i2khd2x,,"I suspect that most people who own a Raspberry Pi enjoy tinkering, and setting things up themselves.

That's probably going to skew the results of the poll. 

In addition, configuring which blacklists to run and what to whitelist does take a bit of tweaking for some, so they have to engage in that level of setup anyway.  

YMMV of course :)",pihole,1648564431.0
5857,comment,2,i2j3qhu,,Can you inform me of the wizardry you used to block ads on YouTube? I want to try that spell on my ex-wife.,pihole,1648531209.0
5858,comment,2,i2juebi,,"I just voted with ""Yes"" but not for me personally.

I like to have it separated from my router because i'm a lazy person.So in a case of human failure that my pihole gets broken, i can just change the DNS in my router back to the ISP default and call it a day.

With build in, it could be harder to just gain back your internet access, depends on how such AIO are configured, but still.

But for my Family or even friends such AIO could be a great investment and the chances are higher that users like them will buy it because they don't have to do some cabling and configuring stuff or such.

So, there are always pros and cons like for almost everything.Just depends on your know-how, needs, budget and what not else.",pihole,1648552939.0
5859,comment,2,i2l8yj2,,"I voted: No

I run my pihole on a separate device and I don’t want to run it on anything else.

My experience is, that most router manufacturers or ISPs try to save money and that heavenly reflects on there usability.

But I would like it, if more routers would support blocklists. Not for my personal network but it eliminates my parent from pulling out there raspberry pi with Pihole and it’s included dhcp.",pihole,1648575086.0
5860,comment,2,i2lzbk8,,I have to ask - what took dozens of hours? Is it something iOS specific?,pihole,1648585100.0
5861,comment,1,i2m4wh9,,"Voted: No.  Most routers do have similar features.  Deco, Asus, and Google all give it away in their mesh devices.  I think Eero and Netgear charge for it.  But I am always really nervous about messing with advanced router settings.  I usually get burned the further I drift from stock setup.  I feel very confident with pi-hole.",pihole,1648587154.0
5862,comment,1,i2w38sk,,there’s the pfsense router with dnsbl already. i use one as my router but i decided to stich with pihile as its easier for troubleshooting.,pihole,1648756778.0
5863,comment,1,i2l7z81,,"It’s a bit more annoying but you can install the kvm/qemu plug-in and create a VM for it or, if you have the resources, run OPNsense in a vm.",pihole,1648574717.0
5864,post,8,tqpol2,Moving text over slightly to one side?,"I have a 2.8"" display running pi-hole but the case it's in cuts off the left side slightly.  How can I move the text over a little to the right side?",pihole,1648521101.0
5865,comment,3,i2j9tko,,"Cut the case. Much easier, more reliable and it will survive updates.",pihole,1648535760.0
5866,comment,1,i2in7mz,,"I would think the best way to handle this, rather than having to re-roll everything to fit, would be to limit the display output to the visible portion of the display at the required offset.",pihole,1648521547.0
5867,post,39,tqp77t,"Installing WireHole on Raspberry 4, can NordVPN work with this?","Hello,

I wanted to run Wirehole (has pihole, unbound and wire guard) and a VPN on my raspberrypi to protect my whole network. But i've been seeing a lot of conflict of PiHole not running well with vpns, i.e the vpn not allowing devices to use pihole DNS. Is it not possible to have the network devices point to Pi-hole >Unbound> then wireguard/NordVPN? I do have a Netgear Nighthawk x6 R8000 router, would it be better to just install a vpn on the router directly?",pihole,1648519518.0
5868,comment,12,i2iv53t,,"Follow this https://archern9.github.io/posts/route-pivpn-traffic-via-mullvad/
I have your setup working fine via Mullvad vpn",pihole,1648525809.0
5869,comment,5,i2io85a,,"I have WireGuard running on my
PiHole no problems what so ever. Also have Unbound as well.",pihole,1648522065.0
5870,comment,4,i2itstp,,You say wireguard and a VPN. Why the two same things. And again wireguard (I imagine on your Pi) and the NordVPN not on Pi. In any case PiHole is “just” DNS (well ignoring DHCP) so should work as well as any DNS server.,pihole,1648525053.0
5871,comment,-6,i2isanf,,[deleted],pihole,1648524216.0
5872,comment,0,i2jyngl,,"They aren’t strictly the same thing. A VPN like Nord will encrypt the traffic between the user’s computer that the VNP software is installed on and the external VPN server which he/she then connects to.  
  
Wireguard on the other hand is more useful when remote connecting into self-hosted services from outside as the Wireguard server is install on the users machine inside.",pihole,1648555602.0
5873,comment,-4,i2jlqah,,Do you have any resources for that last bit?,pihole,1648546146.0
5874,comment,1,i2k7ibf,,"The terminology issue is that wireguard/nordvpn are both vpns (because in my opinion ""public VPNs"" misuse the term), so it geels weird if we take the technical approach instead of the marketting one x)",pihole,1648560210.0
5875,comment,1,i2lgplq,,"If you have net.IPv4.IP\_forward = 1 in your /etc/sysctl.conf your Pi will be a server like a Nord server. But I see what you are saying ... it's not uncommon for internet connections to be asymmetric in terms of bandwidth so VPN'ing to ""home"" and from there to where you were going is limited by your upload speed which I imagine isn't a factor for Nord.",pihole,1648578043.0
5876,post,0,tqom1a,Local DNS not resolving over Wireguard,"Update: Got a DIG utility for my phone. The DNS is replying over VPN with correct answers. This is indeed a Wireguard/Docker issue. I apologise for wasting everyone’s time but I’m also thankful people were willing to help and point me in the right direction.

This will now go on the back burner as I can still access everything via IP addresses.

~~The dot points of where I’m up to: • Docker host with Wireguard container on board • PiHole on a Model A(!) • PiHole has local A records for both • LAN number space is configured as 10.0.0.1/16, Wireguard is set to 10.0.3.0/32 subnet • PiHole is set to accept requests on all interfaces, this made no difference to behaviour • VPN is working fine, I can access the network from the client • VPN’s DNS provider is confirmed to be PiHole, was ad free while on cellular provider network~~

~~My only issue is that the local DNS records aren’t being resolved. I can access all the network’s services via IP addresses. But when trying the same server via the local A records, the request times out.~~

~~Based on this behaviour, I’m saying this is a PiHole issue rather than a Wireguard issue.  I’m just not seeing the bottle neck. The Pi is configured for a /8 LAN and there’s no software firewall. (RaspbianLite with PiHole, that’s all).~~

~~A little bit of a hint would be helpful.~~",pihole,1648517580.0
5877,comment,1,i2igdhm,,What is shown in the query log or the dnsmasq log (/var/log/pihole.log) for these queries and replies?,pihole,1648518228.0
5878,comment,1,i2ihzj0,,You might have to turn on permit all origins.,pihole,1648519002.0
5879,comment,1,i2isq7i,,I bet its wanting a 10.0.3.x address but you give the client a 10.0.0.x address.,pihole,1648524458.0
5880,comment,1,i2iufep,,"When I try to access a local DNS URL, no log entry is made.  The page load attempt fails with a NSURLErrorDomain in the browser.  Change the URL to use the service's IP address and the page will load.

I tried again and I did notice that if I drop the VPN/switch to LAN before the timeout, there is a burst of log activity and in there one of the entries was a local DNS query and response:  
`Mar 29 04:30:30 dnsmasq[22460]: query[A] pihole.local from 10.0.0.80`  
`Mar 29 04:30:30 dnsmasq[22460]: /etc/pihole/custom.list pihole.local is` [`10.0.0.100`](https://10.0.0.100)  


Other external URL requests are shown as coming from the Docker server's local LAN IP (10.0.0.80).  It will successfully resolve.",pihole,1648525407.0
5881,comment,1,i2irfgu,,"Already on, no changes to the behavior.",pihole,1648523747.0
5882,comment,1,i2iwbdh,,"So are you saying the routing of the DNS reply, inside Docker is failing for some reason?

All DNS requests from the Wireguard client to PiHole are showing in the PiHole log and originating from 10.0.0.80, the Docker host.  The external requests are being given replies and moving on.  The internal record queries cause the log to “visually hang”.  Turn off the VPN, and the DNS request for a local address from Docker and a reply to the request from PiHole shows up with a correct answer.",pihole,1648526498.0
5883,comment,1,i2iwgyg,,"Can you give a dig command to local server output of the VPN on and off? And whats the local address of the server?

Thats why I dont use docker. Its kind of troublesome in these kind of tasks.",pihole,1648526588.0
5884,comment,1,i2j60tw,,"Found a DIG utility for the phone.  The DNS getting back to the phone on VPN, but for some reason the next step isn't taken in the phone's browsers (any of them, they're all Webkit anyway).

The hangup is something else.  It can wait though, I can manage with IP access for now.",pihole,1648532840.0
5885,post,12,tqohys,use pihole with ipv6 and meshname>,"I have Yggdrasil running on my PC, and I use Pi-Hole running on the same pc through a docker container, I was wondering if it was possible if I could get pi-hole to use a meshname DNS server, and serve those records",pihole,1648517206.0
5886,comment,1,i2itgnp,,[deleted],pihole,1648524863.0
5887,comment,1,i2iz9xd,,how would i do this if its running in a docker compose container??,pihole,1648528290.0
5888,comment,1,i2izpma,,[deleted],pihole,1648528560.0
5889,comment,1,i2j1utp,,"yggdrasil is on the host, pihole is in the container

https://paste.gg/p/anonymous/a622cd9a629c4105bfee1b1ca1449209
My compose config


also if you have a recommendation for a better i2p container, let me know, the one im using is literally just i2pd running in a container with",pihole,1648529950.0
5890,comment,1,i2j45xl,,[deleted],pihole,1648531511.0
5891,comment,1,i2j4f5w,,"so... my dns should go something like this

host > meshnet DNS > pihole?",pihole,1648531695.0
5892,comment,1,i2j4z7x,,[deleted],pihole,1648532087.0
5893,comment,1,i2j5y4c,,"okay... how do I set that up? because it seems to me ipv6 dns just isnt working on my PC,",pihole,1648532787.0
5894,post,1,tql63w,Another question about Pihole with Ethernet USB Hat question,"I have  a Pihole  Z WH  with an USB + Ethernet Hat on it. I want to be able to hook up a keyboard and mouse to it. I plug in the keyboard and mouse t to a USB hub and the hub to one of the Pi's USBs. Is this setup not going to work because I tried several times to start Dietpi and I have no keyboard or mouse. Anyone have any ideas?

TIA",pihole,1648506745.0
5895,comment,1,i2huq2j,,I recommend checking the forums for both Pi devices and DietPi.,pihole,1648507405.0
5896,comment,1,i2jkkhb,,Why keyboard etc? Use SSH.,pihole,1648545108.0
5897,post,1,tqfl7i,Pi-Hole running on Beaglebone Black - Yay!,"Finally, i got this working.  Had to read so many old posts - it is crazy.",pihole,1648491325.0
5898,post,41,tq94g4,pi-hole and NMS,"Is it possible to have pi-hole send SNMP data to a NMS? Pi-hole has been working well for me, but I would like to see all data in one location and not have to log into several pihole's to see the data.

I've ran pihole as a VM and on rpi 3's and rpi 4's and the GUI still lags when trying to see more than the default of 10 queries. It seems a little better when I'm on a VM that has more RAM and CPU, but I don't always have the ability to run a VM and that's when I use a rpi.

I also like historical data, using an NMS to capture queries from all the pi-hole's would allow me to search within the NMS and not have to query the individual pi-holes, especially for historical data.

Thanks.",pihole,1648473515.0
5899,comment,6,i2h33hk,,I'm doing it on a RPi3.  I just ssh'd in and installed snmpd.  I have LibreNMS poll the pi-hole for the info I want.,pihole,1648495362.0
5900,comment,3,i2hmzde,,"Please provide steps, I'm also using librenms.",pihole,1648503631.0
5901,comment,5,i2hppmw,,"There is an app that you enable, download the script add it to your Pi-hole and extend snmp to call the script

So add the following to a snmpd.conf

    extend pi-hole /etc/snmp/pi-hole

Then this bash script and make it executable.

`#!/usr/bin/env bash`  
`set -euo pipefail`  
`IFS=$'\n\t'`  
`API_AUTH_KEY=""YOURAPIKEY""`  
`API_URL=""YOURIP/admin/api.php""`  
`URL_READ_ONLY=""?summaryRaw""`  
`URL_QUERY_TYPE=""?getQueryTypes&auth=""`  
`#/ Description: BASH script to get Pi-hole stats`  
`#/ Examples: ./pi-hole-stats.sh`  
`#/ Options:`  
`#/   --help: Display this help message`  
`#/   --debug: Brief check of system env and script vars`  
`usage() {`  
	`grep '^#/' ""$0"" | cut -c4- ;`  
	`exit 0 ;`  
`}`  
`debug() {`  
	`if ! [ -x ""$(command -v tr)"" ]; then`  
		`echo '[error] tr binary not available, please install it'`  
	`else`  
		`echo '[ok] tr bin';`  
	`fi`  
	`if ! [ -x ""$(command -v jq)"" ]; then`  
		`echo '[error] jq binary not available, please install it'`  
	`else`  
		`echo '[ok] jq bin';`  
	`fi`  
	`if ! [ -x ""$(command -v curl)"" ]; then`  
		`echo '[error] curl binary not available, please install it'`  
	`else`  
		`echo '[ok] curl bin'`  
	`fi`  
	`if [ -z ""$API_URL"" ]; then`  
		`echo '[error] API_URL is not set'`  
	`else`  
		`echo '[ok] API_URL is set'`  
	`fi`  
	`if [ -z $API_AUTH_KEY ]; then`  
		`echo '[warning] API_AUTH_KEY is not set, some values will not be available'`  
	`else`  
		`echo '[ok] API_AUTH_KEY is set'`  
	`fi`  
	`if [ -z ${URL_READ_ONLY} ]; then`  
		`echo '[error] URL_READ_ONLY is not set'`  
	`else`  
		`echo '[ok] URL_READ_ONLY is set'`  
	`fi`  
	`if [ -z ${URL_QUERY_TYPE} ]; then`  
		`echo '[error] URL_QUERY_TYPE is not set'`  
	`else`  
		`echo '[ok] URL_QUERY_TYPE not set'`  
	`fi`  
`}`  
`exportdata() {`  
	`# domains_being_blocked / dns_query_total / ads_blocked_today / ads_percentage_today`  
	`# unique_domains / queries_forwarded / queries_cached`  
	`GET_STATS=$(curl -s $API_URL$URL_READ_ONLY | jq '.[]')`  
	`echo $GET_STATS | tr "" "" ""\n""`  
	`# A / AAAA / PTR / SRV`  
	`GET_QUERY_TYPE=$(curl -s $API_URL$URL_QUERY_TYPE$API_AUTH_KEY | jq '.[][]')`  
	`echo $GET_QUERY_TYPE | tr "" "" ""\n""`  
`}`  
`if [ -z $* ]; then`  
`exportdata`  
`fi`  
`expr ""$*"" : "".*--help"" > /dev/null && usage`  
`expr ""$*"" : "".*--debug"" > /dev/null && debug`

if you go to your pi hole in NMS then click the cog and then click applications, there should be a bunch of toggles, one of them should be pi hole, toggle it on.",pihole,1648504943.0
5902,comment,2,i2igj5c,,"I did a simpler snmpd install.  Below works for me.

sudo apt install snmpd

sudo mkdir -p /etc/snmp/backup

sudo cp /etc/snmp/snmp\* /etc/snmp/backup/.

In /etc/snmp/snmpd.conf I changed ""agentAddress  udp:127.0.0.1:161"" to ""agentAddress udp:161""  You may also want to change the community string from public to something of your choosing.

sudo systemctl daemon-reloadsudo systemctl restart snmpd

On the libreNMS host you should have snmpget and snmpwalk installed.  Test your pi-hole snmp setup with ""snmpwalk -c public -v 2c pi-hole.addr 1.3.6

Change the community string and pi-hole IP address as needed.",pihole,1648518305.0
5903,comment,1,i2hqcpo,,"What app? Does it have a name? Can you post a link? Not sure what you mean by extend SNMP to call the script.

I do appreciate the information, but some more details would be appreciated and very helpful.

Thanks.",pihole,1648505267.0
5904,comment,3,i2htjn5,,"edited above.

you have to edit /etc/snmp/snmpd.conf and use SNMPs extend functionality to call a 3rd party script that will connect to your pi hole and pull the information.

enabling the application on your pi from libreNMS should create the relevant database columns to store the data.

test that you get a response by just running ./scriptname when you're in it's directory.

you'll need to add your PI IP address and your API key to the script then make it executable via chmod +x scriptname

I would just stick the script in /etc/snmp for simplicity",pihole,1648506831.0
5905,post,10,tq88yn,"Reinstalled, now localhost queries pi.mynet 4 times/second","Hi! I'm a new Pihole user, I don't know a whole lot about networking and stuff but I can follow guides and instructions (and found some answers on this excellent subreddit) so since a week or so I've been using it on a Raspberry Pi 4 without issues and it's been working fine. 

Today I reinstalled from scratch because I wanted to change the OS to Ubuntu Server, add SSH and some firewall rules. After some hiccups (locking myself out from SSH hehe) I got it all working and set up exactly as before (I'm pretty sure), same adlists and everything updated, added it as DNS to my router and everything worked fine just as before.

Only thing that is different is this time the client *localhost* is querying (?) *pi.mynet* about 4 times every seconds. I am absolutely sure this wasn't the case before. I have no idea what this means or what is causing it, if it is a problem and what I could do about it. I have tried searching for answers but found nothing (that I understand). 

I would very much appreciate and ELI5 if anyone of you talented folks would care to inform me what is going on.

Edit: Will add a link to the debug thing I see is requested in similar posts as soon as I’m home by the computer again.

Edit2: I think it's solved, as a known bug, but posting link anyway as promised:
https://tricorder.pi-hole.net/rh8MqwDd/

Edit3: Got rid of it by adding a hostname address according to this guide: https://www.globo.tech/learning-center/sudo-unable-to-resolve-host-explained/",pihole,1648470700.0
5906,comment,2,i2fmqlq,,"You appear to be having the same problem reported in discourse and Github. 

https://discourse.pi-hole.net/t/a-lot-of-queries-while-viewing-the-dashboard/53570/3",pihole,1648473354.0
5907,comment,2,i2k0mdw,,"Had the same problem with the latest update of pihole. The requests only happen when the Web Gui is open.

I edited the hostnames file as suggested in your guide. Worked for me!",pihole,1648556707.0
5908,comment,1,i2g04cy,,"Thank you very much for the swift reply! It seems to be something similar to that, yes! Though not behaving exactly as some others have posted, for example running *pihole -t* in terminal seems to always give 5 requests *query[A]/[AAAA] pi.mynet from 127.0.0.1* but it stops right at that and then what follows is only regular traffic... 

Anyway, happy to see it's a bug and not something I messed up. I interpret the things said on Github as it's kind of working as intended just not supposed to show up in the logs like this, and I can just sit back & update and wait for a fix down the line..?",pihole,1648479429.0
5909,comment,1,i2mqxhn,,"Cool, glad my post helped someone else find this solutuion as well! 

Curious, are you using Ubuntu Server as well? I’m wondering if the OS change is what’s caused it for me or if it’s something else.",pihole,1648594092.0
5910,comment,2,i2g0lvd,,If it's identified as a bug we will fix it.,pihole,1648479631.0
5911,comment,2,i2osg63,,i used to run Raspbian and switched to Debian ([https://raspi.debian.net](https://raspi.debian.net)).,pihole,1648625240.0
5912,comment,1,i2g5kap,,"Awesome, thank you. Figured out how to add a hostname address as suggested in the Github thread and that solved it for me!",pihole,1648481691.0
5913,post,12,tq84zy,"Using pihole without a problem, encrypted dns, but when I add a whitelist, it takes a while to be able to load? How do I force a fresh reload?","Using pihole without a problem, encrypted dns, but when I add a whitelist, it takes a while before the site is able to load?  TTL?  How do I force a fresh reload?",pihole,1648470322.0
5914,comment,4,i2fxl97,,"Remember that the client also caches.

So you may need to dump the client cache.

One Windows machine:

1. Open command prompt
2. type:  ipconfig /flushdns

This will purge the local DNS resolver cache",pihole,1648478362.0
5915,comment,3,i2fmfsf,,"You can clear the Pi-hole cache with a Pi-hole restart, but I don't think this is your problem.

`pihole restartdns`",pihole,1648473199.0
5916,comment,1,i2fkxuu,,"The normal blacklist TTL is 2 seconds. Which means after whitelisting for 2 seconds, it should be whitelisted. Clearing the DNS cache can be done by turning off and on wifi, on android at least.",pihole,1648472413.0
5917,post,1,tq5wce,pihole queries pihole,"Hey, 

i have a Synology DS920+ with a pihole as docker container running and my querylog is flooded with queries from pi.hole to the domain pihole.server (.server is my vlan 2 domain name)

&#x200B;

https://preview.redd.it/elja0ck0l3q81.png?width=985&format=png&auto=webp&s=e29df1c5ab93dcee50e5c2ed11ade75812344580

I have no Idea how to solve this issue... Hope that somebody could help me out...",pihole,1648461782.0
5918,comment,1,i2i3okg,,"This is normal. It's part of the health check.

See the [Dockerfile](https://github.com/pi-hole/docker-pi-hole/blob/1b35e7fdd425ee2ac49b3aadc33ac1489c897ef3/Dockerfile#L45) on their github.",pihole,1648511981.0
5919,comment,1,i2igrrr,,"This may be the same issue:

https://github.com/pi-hole/pi-hole/issues/4613",pihole,1648518420.0
5920,comment,1,i2k6siw,,"Ok, strange… never saw that behavior in prior installations… is it possible to suppres that logging?",pihole,1648559873.0
5921,comment,2,i2kg4qz,,Yes by ignore local host on pihole-ftl.conf,pihole,1648563922.0
5922,post,2,tq53dc,"Need to manually change IP every few hours when connected to EOP extender, why?","A weird one, I have tried the Google first!

Because I share the house with people who want ads/tracking etc, I have not set the piHole up as our DHCP server - so I've set fixed IPs for my machines that point to it. When I'm downstairs I can't access the router's wifi so have a TP-link ethernet-over-power adapter with a built-in wifi hotspot.   


The hotspot has a different SSID so I know where I'm connected.  
Every now and again (hour or two? perhaps) I lose connectivity: '**Connected, no internet**' and I've found that changing my IP to another available one fixes this for a while.   


Why could this be?",pihole,1648458152.0
5923,comment,2,i2f66cz,,Wouldn’t it be easier/better to use groups in pihole?,pihole,1648462639.0
5924,comment,1,i2f6ydz,,"You might want to troubleshoot your network problem first. That powerline connection could be your trouble or its WiFi access point.

Most OS allow you to only change the DNS server to be used. This does not require manual IP configuration which might be your problem.

As u/jonners9999 said, you can use the groups feature to enable/disable blocking on a per device level. For example, no blocklists for the default group and have another group with blocklists. You can then subscribe individual devices to the second group.",pihole,1648463278.0
5925,comment,1,i2gn0q9,,"Your home sounds like a perfect place for VLANs. Those who want the ads can be on one VLAN while those who don't can be on a PiHole VLAN. My wife couldn't play several of her online games after installing PiHole, so I put her on a VLAN that bypasses PiHole. She gets ads but she can play her games. I have 4 VLANs pumping out my APs for different things and 3 wired VLANs with managed switches for the servers and LAN.",pihole,1648488677.0
5926,comment,2,i2f6kdk,,That sounds like a thing I should know about. Any pointers?,pihole,1648462958.0
5927,post,7,tq4yok,Anyone archive the query db?,"Hi,

our pihole is only used by the family, but the FTL database is now at 1GB. I'd like to keep the query logs for analysis, but make the DB smaller.

My idea was to create quarterly or yearly DBs that I'd store on another machine. Analysis would still be possible, because sqlite can attach up to 62 DBs...

Do you do this and if so, how do you do it?

&#x200B;

Edit: This is what I now do:

* Open Database
* attach new archive DB
* copy table schema
* copy data
* delete old data

&#8203;

    service pihole-FTL stop
    sqlite3 /etc/pihole/pihole-FTL.db
    ATTACH DATABASE ""/etc/pihole/pihole-FTL-2021.db"" AS new;
    CREATE TABLE new.queries AS SELECT * FROM queries WHERE 0;
    INSERT INTO new.queries SELECT * FROM queries WHERE datetime(timestamp,'unixepoch') < '2022-01-01 00:00:00';
    DELETE FROM query_storage WHERE datetime(timestamp,'unixepoch') < '2022-01-01 00:00:00';
    DETACH DATABASE new;
    VACUUM;
    .quit
    service pihole-FTL start

&#x200B;",pihole,1648457600.0
5928,comment,2,i2fm2u9,,https://docs.pi-hole.net/database/ftl/#split-database,pihole,1648473011.0
5929,comment,2,i2f99lc,,"AFAIK, you could stop FTL and move the DB, then restart FTL

Also, why are you going to analysis it? For what?

I just keep the DB for 93 days (3 months), previously I only keep 31 days.",pihole,1648465085.0
5930,comment,1,i2hq4nu,,Do you know the technology of the db? You might be able to have a scheduled job do a data export / import job every quarter to copy data into you “analytics” db.,pihole,1648505152.0
5931,comment,1,i2gnbkg,,"Thank you, that was actually that got me thinking :-)

I now dump the query\_storage to a new DB quarterly, delete it from the main FTL DB and then vacuum.",pihole,1648488800.0
5932,comment,1,i2f9rzh,,">Also, why are you going to analysis it? 

* to learn (both sqlite and from the data itself)
* adjusting / tuning my blocklists
* for fun",pihole,1648465472.0
5933,comment,1,i2j6hc9,,"Yes, I familiarized myself with the DB and now do exactly that, although manually. Post edited to include solution.",pihole,1648533171.0
5934,comment,-1,i2fftej,,"> to learn sqlite

From my experience, most of the time a month is enough. The dataset are already very big.

> to learn the data

???

> tuning blocklist

Theres a tool for that, you dont have to DIY it

> for fun

I agree. But again, from experience, most of the time 1 month is enough. Now I expand to 3 months because, well, I can so I do so. You have to decide if its worth for that <1% of the chance of using the 1 year data.",pihole,1648469508.0
5935,comment,1,i2g527m,,">From my experience, most of the time a month is enough. The dataset are already very big.

How do you know how big my datasets are?

&#x200B;

>to learn the data

I did not write that, see above. I want to learn *from* the data.

&#x200B;

>Theres a tool for that, you dont have to DIY it  


Maybe I don't *have* to, but i would *like* to?

&#x200B;

>You have to decide if its worth for that <1% of the chance of using the 1 year data.

You don't know my usecase, yet you think you know the chance of me using this data?",pihole,1648481486.0
5936,post,6,tq4mdc,Help for IPv6 please,"So I want to go to IPv6, since it seems like the future standerd and I want to have both v4 and v6 available. 

So right now my Pi4 is the DHCP for the network, and my ISP side was ready, my router is ready on a click of a button. 

What should I do on the pi to enable IPv6 DNS for all of my local devices and force them to use the pi as DNS? 

I remember some time ago I tried to do so but some ads slipped through for unknown reason.

Any help would be appreciated.

Edit: OK IDK why my last edit did not go through. Its quite long and I dont want to type it again. The TLDR is, this is not possible on my router for now until a firmware update. Basically, the developer of the firmware is drunk or something, he dont allow the only DNS settings in the page to have a IPv6 local address, a duplicate one, or a empty one, if so it would be changed to a default one. The IP address handout tab, where you could choose to have DHCPv6 or SLAAC for local clients, dont have the option to choose a different address than the one in WAN.",pihole,1648455970.0
5937,comment,3,i2f0vxk,,"OK, one thing to consider: ""IPv6 internet connectivity of the clients"" and ""pi-hole offering DNS over IPv6"" are fully independent things.

For example in a dual stack network: a client ([192.168.1.10](https://192.168.1.10)) can ask your pi-hole ([192.168.1.5](https://192.168.1.5)) over IPv4 ""what is the AAAA record for [www.google.com](https://www.google.com)"" and the pi-hole will answer by a DNS response with the IPv6 address. The client then connects to that IPv6 address over IPv6. So: DNS over IPv4, internet connectivity over IPv6.

(The reverse also works, ask an IPv6 DNS server to resolve an IPv4 hostname)

In other words, you don't necessarily \*need\* to set up pi-hole as an IPv6 DNS server.

>What should I do on the pi to enable IPv6 DNS for all of my local devices and force them to use the pi as DNS?

With IPv6, the router advertises the DNS server to all clients on the network through its Router Advertisements (RDNSS). This means you need to go into your router's settings, and set the custom IPv6 DNS server to whatever your Pi's IPv6 address is. The router will then either:

* advertise the Pi as the DNS server
* advertise itself as the DNS server and forward all DNS requests to the Pi

(this is assuming you have a proper router and not a locked-down ISP-supplied one where custom DNS can't be set - in that case you're screwed and have to set DNS manually on each client)",pihole,1648458019.0
5938,comment,1,i2hhgnf,,[deleted],pihole,1648501230.0
5939,comment,0,i2f56ue,,"Announcing a DNS server (in this case pi-hole) over IPv6 is a bit more complicated and depends on your router. Usually there are multiple options to be changed.

There are multiple different ways this is achieved. Usually the router announces itself as a DNS server using router advertisement (RA). Another option is to set the DNS using DHCPv6. Third pi-hole and other servers can announce themself using RA without any routes.",pihole,1648461817.0
5940,comment,1,i2f2gsi,,So right now my pi-hole is ALSO my DHCP server. So what should I do on it? I see the DHCP tab on the admin GUI...,pihole,1648459450.0
5941,comment,2,i2hicg2,,">	Then all you have to do is enable upstream IPv6 servers in the Pi-hole web ui.

You specifically don't **have** to do this. A DNS server at an IPv4 address can resolve both A and AAAA queries.

It's an option to have an upstream IPv6 server assigned, but is not required.",pihole,1648501598.0
5942,comment,2,i2f3ftc,,"DHCP is for IPv4 - with it, you hand out IP addresses to each client, and give them the IPv4 addresses of the gateway (=your router) and a DNS server (=your Pi). That's fine and works great. Don't need to change anything there, it works.

With IPv6, the router sends out Router Advertisements (RA's) which provides clients:

* the subnet (first 64 bits of the address). The clients then self-assign the last 64 bits for their addresses
* an IPv6 DNS server (either the router's address, or the address of the Pi - you configure that in the router settings)
* automatically the clients use the sender of the RA's as the gateway",pihole,1648460324.0
5943,comment,1,i2hjy1t,,[deleted],pihole,1648502290.0
5944,comment,1,i2f466w,,"My router does not allow a blank secondary IPv6 DNS, a duplicate one or a link local one.

Also how do I get static IPv6 for my pi?",pihole,1648460954.0
5945,comment,1,i2ho5yz,,"If you intend to take a network to IPv6 only it would make sense to use an upstream IPv6 server only. If you have a mixed network, pick one or the other. There is no reason to send parallel queries to nameservers.",pihole,1648504170.0
5946,comment,1,i2f78ef,,"You can use a random non-existent address I guess?

Static IPv6 is likely already set, most (all?) Linux server distributions use stable addresses by default. Type `ip addr` and you'll see it.",pihole,1648463501.0
5947,post,0,tq349a,Whats a good blocklist I can use? Some stuff are still getting thru occasionaly.,yess,pihole,1648449361.0
5948,comment,5,i2ewdi9,,"https://github.com/blocklistproject/Lists

Also a good one",pihole,1648453948.0
5949,comment,5,i2flo9p,,"Use these tools to determine the source of ads. Then locally blacklist as needed. Note that some ads are served from the same domains as the content and you won't be able to block them with Pi-hole, no matter how many blocklists you add. 

https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522",pihole,1648472798.0
5950,comment,5,i2esgf2,,"
https://firebog.net/",pihole,1648450669.0
5951,comment,2,i2khv6b,,"[https://v.firebog.net/hosts/lists.php?type=tick](https://v.firebog.net/hosts/lists.php?type=tick) in combination with the default list is what I use. Blocks about 290,000 domains and keeps my whitelisting more manageable. I don't know how people can actually do anything when they have lists of millions of domains blocked. If I did that my family would be constantly telling me that something is broken with the internet.",pihole,1648564636.0
5952,comment,1,i2ex1a4,,"Go to your tail log and add the domains to the blocklist that got thru….?

I personally visit my audit log page once a week and add questionable looking domains to my own blocklist",pihole,1648454533.0
5953,comment,1,i2jw9z5,,"Which link do we typically use for Pi-Hole?
Original, No IP, 	DNSMASQ?",pihole,1648554162.0
5954,comment,1,i2etst3,,how do i use it and stuff a bit confusing,pihole,1648451764.0
5955,comment,2,i2jwkn9,,No IP version.,pihole,1648554345.0
5956,comment,6,i2exytq,,"Copy + Paste the Urls of the Lists from your browser one by one (or more Urls space sepperated) in ""Group Management->Addlist"" + press Add.

Go to ""Tools->Update Gravity"" ans update the database. Thats it.",pihole,1648455353.0
5957,comment,4,i2f3zum,,That's way easier than I remember! I should make a change to one of my pages to offer the option of space separated or newline separated.,pihole,1648460806.0
5958,comment,4,i2fplrg,,"Copying and pasting all your ticked lists directly into Pi-hole works as you currently have it set up.  Select all, copy, paste, add.",pihole,1648474771.0
5959,post,73,tq1zqk,"What tools are you using to analyse Pihole logs? I'm finding the Pi Zero to be ample for running pihole, but insufficient for analysing the data it logs.","Hi all,

As per the title. I'm chasing some network issues that I became aware of via the pihole dashboard. 

I have questions, therefore, that can be answered by the pihole logs. But navigating the logs from the pihole interface is difficult, primarily because it is slow - which is presumably because database queries and webpage rendering require more muscle than the Pi Zero can reasonably provide. Also, for my purposes, seeing more than 10 results at a time would help a lot.

I love pihole; it is a superb DNS filter. For me, it's not a great data analysis tool, though, but it doesn't have to be.

Can I get at the logs another way? If I could, I suppose I could import the logs into a database and run queries against it. I'm not super techie but I can ssh into a box.

But if a visualisation tool already exists that people are using and/or developing, that'd save me a lot of time that I frankly just don't have. (running a farm, raising kids, etc etc)

Any help would be appreciated.",pihole,1648444681.0
5960,comment,38,i2elagi,,"Edit: I wanted to say thanks, in a more prominent place, for the sudden influx of support and well-wishing. It's quite touching. I genuinely do hope people enjoy this small project.

Original comment below:

Pi-hole's web UI is good for managing Pi-hole itself, and good for understanding what's happening in the network state *right now*, but I frequently found myself wondering what *had* happened, *over time*. Sometimes lots of time, weeks, months, even years.

Eventually, I ended up making [a thing](https://github.com/saint-lascivious/munin-pihole-plugins) that does just that. Spawned from the ashes of an apparently abandoned project. I was actually just going to make a coffee and sit down and think about changing an approach in it very shortly. It's a fairly dynamic project at the moment and I have a kind of awkward master-is-dev workflow. It's mostly a hobby project for myself.

It's not quite what you're asking though, I suspect. This project quite deliberately doesn't touch Pi-hole logs or the long term database at all, the monitoring plugins obtain their information via API call.

If you're not familiar with Munin it would pay to follow the links in the project README to see what Munin is/isn't.",pihole,1648445408.0
5961,comment,4,i2fpjt0,,Grab the database and run sqlite3 queries on it. Unfortunately the web UI is pretty bad at showing or exporting logs (this is in major need of improvement IMO),pihole,1648474746.0
5962,comment,3,i2ftnxv,,Home assistant or grafana,pihole,1648476644.0
5963,comment,2,i2gj4g2,,I use papertrail’s free tier. A cloud service with very basic graph capabilities.,pihole,1648487103.0
5964,comment,2,i2h40fe,,I have some instructions for grafana that I've used in the past message me if interested and I can send it over to you,pihole,1648495740.0
5965,comment,1,i2h05sc,,"Not quite a tool for analyzing, but an app to control it & look at some data: https://apps.apple.com/nl/app/pi-hole-remote/id1515445551?l=en",pihole,1648494135.0
5966,comment,5,i2feem0,,"Thank you so much for your response, and for your continued work on what looks to be an excellent tool.

Rolling up my sleeves to dive in.",pihole,1648468641.0
5967,comment,3,i2g5pcj,,"THIS IS AMAZING!

it's one of those things I never knew I needed or wanted! Now I'm clock-watching, waiting for the clock to hit 5 so I can leave work and go home and get this running! Damnit, the one day I can't leave work early without someone noticing!",pihole,1648481748.0
5968,comment,2,i2gxnf3,,"Sweet!! If only we could have this in something more sleek looking, like Grafana for instance, it would be awesome!",pihole,1648493093.0
5969,comment,1,i2g2udv,,"I use Home Assistant, and I've dabbled a little with Grafana, so thank you for that suggestion.",pihole,1648480576.0
5970,comment,1,i2gkphc,,How do you set it up?,pihole,1648487736.0
5971,comment,3,i2fhwqs,,"My apologies if you got caught in the crossfire, I have *just* now actually got my local repository in line with the remote repository, and fixed a couple of gremlins.

Install can now be re-run overtop of itself as I always intended, so you can change the plugin set in an existing installation if you want (the default is to install all plugins).

Plugins now accept redirects in the API call (thanks lionslair).

Uninstall also would have been affected. Hopefully everything is gravy now.

I had a particularly bad bout of insomnia after a night of drinking a while ago and it seems I'm still paying for breaking the dont-push-to-master-while-drunk unspoken rule.

The default installation is *intended* to Just Work on Debian and not-too-diverged Debian derivatives, but can be whipped into running on almost anything via env var overrides as long as it knows where to put what where and the dependencies are met.

Use ""--help"" for a brief help output, and ""--help command_here"" for more detailed help on each command.",pihole,1648470753.0
5972,comment,2,i2iaxxh,,"Thank you very much for the kind words.

It is honestly quite inspiring seeing such genuine enthusiasm displayed about this project.

If you find that you have any questions about the project, you can reach out to me here in this thread or via private message/chat if you'd like.

If you experience any issues, bugs, unintended operation, or would like to suggest a change please open an issue/feature request on GitHub.",pihole,1648515608.0
5973,comment,1,i2ivvv6,,"Thank you for the support.

I understand that the rather utilitarian default look of Munin's web interface and graphs is an acquired taste perhaps. While I don't mind things being prettied up a bit, I'm generally more of a function over form kind of guy myself so it doesn't bother me.

There are some options for customising the Munin interface, but that's a bit out of scope for this project specifically.

Just spitballing here, but you could also possibly see if there's a solution out there for Grafana to consume .rrd files (Munin's plugin database format) as a data source, or convert it as required and run munin-pihole-plugins (in your case without the optional webserver element). The .rrd format is fairly widely used.",pihole,1648526245.0
5974,comment,1,i2gusak,,replying to see the answer later,pihole,1648491892.0
5975,comment,1,i2gyexj,,"Depends a bit on what you want to send, but basically you install an agent that parses logs for papertrail, and they have a bunch of preconfigured agents. I use it for syslogg but they support other logs as well. 

https://www.papertrail.com/help/configuring-remote-syslog-from-unixlinux-and-bsdos-x/",pihole,1648493415.0
5976,comment,2,i2g37zw,,"Thank you for this. In point of fact, I haven't done anything yet, because I am a farmer, and today just happens to be the first day of our harvesting season, and ohhhhh boy are there kinks to shake out.

So this is on my radar, I just haven't got there yet.

I don't drink anymore myself, but I have had similar things happen with my personal choice of intoxicants.",pihole,1648480733.0
5977,post,0,tpzj5s,1 specific site isn't blocked even though logs say it was blocked? wtf? making me paranoid.,"Pi-hole v5.9 FTL v5.14 Web Interface v5.11    
I've tried clearing the cache, changing DNS providers, restarting everything (pi, devices, router, modem). Even though the logs say greasyfork.org was blocked (I am blocking all .org with a regex) and has worked for the past 3 years this one specific site is still loading on multiple devices. I found out because I actually wanted to go whitelist greasyfork.org so I can access it but found out it worked? wtf?  
A	greasyfork.org	dellxps	Blocked (regex blacklist)	IP (0.2ms)  
when I look in whitelist, there is no result for greasyfork.  
I have no idea how this one specific site is bypassing pihole and am now wondering if others have been in the past as well. I'm looking at the site right now even though it says pihole blocked it.   
https://greasyfork.org/en  
here is the regex that is supposed to be catching it and according to logs did:  
(^|\.)org$  

&nbsp;

Edit: in case it is messy below in the logs it seems the non-www. site still loads but the www. URL is blocked as expected. The result is the same  with 0.0.0.0 being returned. WTFx2",pihole,1648435809.0
5978,comment,2,i2e4x93,,"If Pi-hole blocked the domain, the IP isn't being returned to the client. If the client is able to load the IP that corresponds to that domain, it either has the IP already or is getting the IP through some path other than Pi-hole.

What is the output of the following command from the Pi terminal:

`grep greasyfork.org /var/log/pihole.log | tail -n12`",pihole,1648436001.0
5979,comment,2,i2e6pfn,,">(I am blocking all .org with a regex)

Can't say I'm not curious as to why. While .org is now a generic TLD, there's still an absolute shitload of domains under this TLD that were created while it was fairly loosely ""non-profit/non-commercial entities"".

This seems like a really big chunk of the internet to restrict access to via blanket rule. It's hard to imagine a use case where blacklisting wouldn't be more appropriate, but again I'm not sure what the actual intent is here.

I could link some information on the history of this TLD, but I guess you wouldn't be able to access it, as most of it exists under .org domains.",pihole,1648436929.0
5980,comment,2,i2evyub,,Ok. Have you tried to disable and re-enable wifi? Or reboot? Sometime clearing the DNS cache is necessary.,pihole,1648453596.0
5981,comment,2,i2eyzbt,,"Looking at the Arch Linux [wiki](https://wiki.archlinux.org/title/Systemd-resolved), it seems like it uses a built in DNS service(systemd-resolved) that uses DNS over TLS. This would bypass Pi-hole. I’d bet this is why that domain is not being blocked. Use dig or nslookup from the laptop to confirm whether or not it’s using Pi-hole for DNS resolution. You can probably change the systemd-resolved settings on your laptop to only use your Pi-hole but I’m not completely sure. If your firewall supports it, it’s pretty easy to block DoT by blocking port 853. I use pfSense for my firewall and use it to block DoT and the more common DoH servers. It is much harder to block DoH since it uses the same port and protocol as HTTPs. Also look into DNS over QUIC. If your firewall is capable you can also redirect all DNS requests to PiHole via port forward or completely blocking all port 53 requests except the ones to Pi-hole. Like someone else said, it seems like for you’re use case it might be best to go the block everything and whitelist what you need route. Hopefully this info can help you figure out your issue.",pihole,1648456285.0
5982,comment,2,i2gk53h,,"Please try an experiment. Put greasyfork.org on your black list and see what happens. I know that you think all of the .org sites are blocked, obviously, something is amiss. If PiHole still says that the site is blocked but you get through, you have a DNS leak somewhere. You have 20 years in IT, use your troubleshooting skills and break down the trouble into the smallest parts. That's how I did it for 40 years!",pihole,1648487510.0
5983,comment,1,i2e6eck,,"Thank you for the quick response:  
grep greasyfork.org /var/log/pihole.log | tail -n12  
Mar 27 22:10:17 dnsmasq[12814]: query[A] greasyfork.org from 192.168.0.121  
Mar 27 22:10:17 dnsmasq[12814]: regex blacklisted greasyfork.org is 0.0.0.0  
Mar 27 22:10:17 dnsmasq[12814]: query[A] greasyfork.org from 192.168.0.121  
Mar 27 22:10:17 dnsmasq[12814]: regex blacklisted greasyfork.org is 0.0.0.0  
yo wtf. it is successfully blocked with the www. it is only not blocked without www.!?:  
Mar 27 22:43:50 dnsmasq[12814]: query[A] www.greasyfork.org from 192.168.0.121  
Mar 27 22:43:50 dnsmasq[12814]: regex blacklisted www.greasyfork.org is 0.0.0.0  
Mar 27 22:43:51 dnsmasq[12814]: query[A] www.greasyfork.org from 192.168.0.121  
Mar 27 22:43:51 dnsmasq[12814]: regex blacklisted www.greasyfork.org is 0.0.0.0  
SITE IS BLOCKED  
Mar 27 22:43:59 dnsmasq[12814]: query[A] greasyfork.org from 192.168.0.121  
Mar 27 22:43:59 dnsmasq[12814]: regex blacklisted greasyfork.org is 0.0.0.0  
Mar 27 22:44:00 dnsmasq[12814]: query[A] greasyfork.org from 192.168.0.121  
Mar 27 22:44:00 dnsmasq[12814]: regex blacklisted greasyfork.org is 0.0.0.0  
SITE LOADS",pihole,1648436766.0
5984,comment,0,i2e7iij,,"Also to note, I went to a bunch of random .org URLs and they are successfully blocked. It seem to be only this specific one.  
Mar 27 22:41:51 dnsmasq[12814]: query[A] www.icann.org from 192.168.0.121  
Mar 27 22:41:51 dnsmasq[12814]: regex blacklisted www.icann.org is 0.0.0.0  
Mar 27 22:41:51 dnsmasq[12814]: query[A] www.icann.org from 192.168.0.121  
Mar 27 22:41:51 dnsmasq[12814]: regex blacklisted www.icann.org is 0.0.0.0  
Site is blocked as expected.  
Also tried without the www.:  
Mar 27 22:42:47 dnsmasq[12814]: query[A] icann.org from 192.168.0.121  
Mar 27 22:42:47 dnsmasq[12814]: regex blacklisted icann.org is 0.0.0.0  
Mar 27 22:42:47 dnsmasq[12814]: query[A] icann.org from 192.168.0.121  
Mar 27 22:42:47 dnsmasq[12814]: regex blacklisted icann.org is 0.0.0.0  
Site is blocked as expected.",pihole,1648437350.0
5985,comment,0,i2e72w9,,[deleted],pihole,1648437127.0
5986,comment,1,i2gnxjn,,">	Put greasyfork.org on your black list and see what happens.

The posted log outputs show that Pi-hole is blocking the domain.",pihole,1648489050.0
5987,comment,2,i2e9jtv,,">	Mar 27 22:10:17 dnsmasq[12814]: regex blacklisted greasyfork.org is 0.0.0.0

>	Mar 27 22:43:50 dnsmasq[12814]: regex blacklisted www.greasyfork.org is 0.0.0.0

Both the domain and the www subdomain are blocked by Pi-hole as expected. 

If the site loads, it is not through either of those domains if the client is using Pi-hole.",pihole,1648438430.0
5988,comment,5,i2ea4up,,"Damn dude, you're paranoid AF and that isn't normal.

You said you tried it without success but the only hope for you is to block everything and whitelist as you go; you'll eventually get only the sites you want worked out.",pihole,1648438744.0
5989,comment,2,i2e967d,,"It would appear that your needs would be better suited by blocking everything via regex, and then operating on a whitelist only policy.

>Why not protect yourself? All those scam texts you get that say your bank wants to lock your account unless you click (here) go to TLDs like .ru or .by or .cn.

I don't think I could tell you the last time I received a spam SMS (or an actual SMS, incidentally, it's all RCS now), I tried looking through my history to find any, and I couldn't. I made it back as far as the beginning of 2020 (I never delete SMS or emails) before giving up.

That being said, I'm technologically literate, and capable of critical thought.

If I ever did get spam that made it through both my ISP's spam SMS filtering, and my device's spam SMS filtering (I'm curious which SMS client you use that's letting this through), my thought process would probably just be ""lol"" and little else. Unless you're browsing on an ancient, long since deprecated and unsupported mobile OS (anything running Android 8 or prior belongs in the bin, and no I'm really not joking about that), there's very little actual risk here. The idea of clicking a link and being immediately compromised isn't really a thing that exists anymore. The vast majority of spam is low hanging fruit social engineering, relying on people's inherent trust or lack of critical thought, and tricking people into giving up their information voluntarily.",pihole,1648438227.0
5990,comment,2,i2ey829,,"If you really want to block all sites and then white list domains that you choose just create a regex of .\* if you use that you can get rid of all your blocklists and all other regexs

    .*",pihole,1648455587.0
5991,comment,0,i2goah9,,"Did you do the experiment I asked you to do? I don't care what the log says, did you get to the site after putting it on the black list?",pihole,1648489198.0
5992,comment,0,i2e9yrb,,[deleted],pihole,1648438652.0
5993,comment,0,i2eal9z,,[deleted],pihole,1648438991.0
5994,comment,1,i2eavzx,,[deleted],pihole,1648439152.0
5995,comment,1,i2gojbu,,"I'm not the OP. 

The domain is blocked by Pi-hole. Adding it again to the blacklist won't block it double.",pihole,1648489297.0
5996,comment,1,i2ecppj,,">Were you not able to reproduce?

I'm not sure what you want me to reproduce.  The domain is correctly being blocked by Pi-hole, and the traceroute leads to the NULL IP (the IP that is returned by Pi-hole for the blocked domain).  It's not going anywhere - one hop to the loopback address.

From the laptop terminal (and not via ssh to Pi-hole) what is the output of

`nslookup greasyfork.org`",pihole,1648440164.0
5997,comment,3,i2ecxr6,,"Ok then,

How are you vetting sites you deem acceptable and what browser do you use?",pihole,1648440290.0
5998,comment,2,i2ee6vn,,"I'm curious which applications you're using as the default dialer, and default SMS handlers.

Google Phone and Messages both have opt in spam protection. Samsung has spam protection as opt-ins in both their offerings as well. In my experience Google has better coverage for a wider range of localities. 

Incidentally both Google and Samsung have network-agnostic RCS messaging as well.

You could possibly also just look at a default blacklist approach there as well, and restrict calling and messaging to known contacts only. This should be quite do-able if you have an existing bank of call and message history to work from.

Note: The above is Android-centric and I have no idea what capabilities iOS has in either regard.",pihole,1648441004.0
5999,comment,1,i2gp521,,"Sorry for responding to you. Let the OP do the experiment. I am suspecting a DNS leak but it is necessary to prove that the block is in fact working. Also, let the OP respond, please.",pihole,1648489545.0
6000,comment,2,i2gqn2c,,"Please read through this entire thread.  The OP previously posted this output:

    Mar 27 22:10:17 dnsmasq[12814]: regex blacklisted greasyfork.org is 0.0.0.0
    Mar 27 22:43:50 dnsmasq[12814]: regex blacklisted www.greasyfork.org is 0.0.0.0",pihole,1648490167.0
6001,comment,-3,i2grl8x,,"If you think that I don't know what I'm doing, then fix the OPs problem. Let's go, genius, come up with the solution and show how you can do better than 20 & 40 years in the business. Come on, we are all waiting!!!",pihole,1648490562.0
6002,comment,1,i2h4jwf,,"Please, take a deep breath.

The output the OP provided shows that in every case, Pi-hole correctly blocked the two domains.  Do you agree?

If you do agree, then there is nothing more that you can do with Pi-hole to block those domains.  Do you agree?

If you do agree, then the problem lies elsewhere. The OP will have to sort out why the client is still able to load a blocked domain.",pihole,1648495961.0
6003,post,0,tpyme4,I have this kinda old router and I need help with it to connect it to pihole.,"Hi, I have no idea how to access the settings page on this router, I dont know what model it is at all and it seems old and shitty, anyone mind to help?",pihole,1648432680.0
6004,comment,6,i2e1jca,,So no model or make and you don't know the ip?  Good luck.,pihole,1648434272.0
6005,comment,2,i2e40k1,,Let’s start by posting the Make and Model,pihole,1648435532.0
6006,comment,2,i2e8lch,,You don't actually need to change the router at all if you have a small number of devices. Just pick a static address for the pi-hole and then configure DNS on the individual computers and mobile devices to use that address for DNS.,pihole,1648437920.0
6007,comment,1,i2e9rnb,,"You don't need access to the router at all.

It would be significantly more convenient for you, and allow devices on the network to use Pi-hole without explicit client side configuration, but it's not a requirement.

Static address the Pi-hole server, configure clients to use it as desired.",pihole,1648438544.0
6008,comment,1,i2et7r7,,"Most routers have a manufacturer and model number printed on a label attached to the bottom of the router.  

On your computer, get the default gateway.  That will be your router IP address.  Using a browser, access that IP address.  If you didn’t set a user name and password, try “admin” and “admin”.

If you can’t figure it out, you need a new router anyway.  If it is old, it is providing you with absolutely no network security.",pihole,1648451281.0
6009,comment,2,i2e45ws,,"Zinwell, gfast dual wan cpn",pihole,1648435610.0
6010,comment,1,i2e8nff,,How,pihole,1648437949.0
6011,comment,1,i2ebwd3,,"well i think i set it up, i went to [cnn.com](https://cnn.com) to see if it would block and it didnt :(",pihole,1648439709.0
6012,comment,1,i2lhdtf,,I’m not familiar with that router. Sorry I can’t help more.,pihole,1648578299.0
6013,comment,1,i2w6p6v,,"Check the bottom of the router and find the exact model number. You can google that, searching for the manual, which may also include the default password.

Using the router's DHCP function, you can automatically tell all devices on your network to use the Pihole for DNS resolution. Or, you can run DHCP on the Pihole itself, but you'll have to turn off DHCP on the router.",pihole,1648758114.0
6014,comment,1,i2ejnow,,"I used this great tutorial for setup:

https://www.tomshardware.com/how-to/set-up-pi-hole-raspberry-pi

Which includes how to manually configure DNS on Windows. For other OSes or devices, a Google search will give you the specific steps - ""manual DNS Mac"" ""manual DNS android"" etc",pihole,1648444327.0
6015,comment,1,i2ekild,,Set your Pi's IP as your DNS on all of the devices.,pihole,1648444886.0
6016,comment,1,i2ectzs,,"Assuming the Pi-hole server is set up correctly, is statically addressed, and clients are able to send requests to that address and receive a response (presumably you've tested this?), in order for Pi-hole to function as intended it needs to be the only nameserver available to clients you want blocking on.

If a client has one or more nameservers that *aren't* Pi-hole available to it, it can and will use it or them, often in no particular order (primary/secondary DNS settings are somewhat misleading and in reality the secondary could very well be called first).

If the client will allow you to (some won't), you can just supply the Pi-hole's address for both primary and secondary DNS fields, or supply null (0.0.0.0) in the secondary field.",pihole,1648440231.0
6017,comment,1,i2ecwfm,,"well actually [cnn.com](https://cnn.com) works i dont see ads when i turn my vpn off, but youtube n other popular sites dont",pihole,1648440269.0
6018,comment,1,i2edpae,,Pi-hole won't block ads on YT. The ads are served from the same domains as the content.,pihole,1648440725.0
6019,comment,1,i2ekmm2,,"I don't see why CNN wouldn't work, just the ads shouldn't show, unless you specifically blocked it.",pihole,1648444963.0
6020,comment,1,i2edqni,,what about on reddit?,pihole,1648440746.0
6021,comment,1,i2eip3k,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1648443714.0
6022,post,0,tpy1m8,Can I run pihole on my dynamic ip? If I cant can you tell me how?,thanks.,pihole,1648430721.0
6023,comment,7,i2e3e24,,"Reading through your comments, maybe don't setup pihole without learning more first. If something breaks you aren't gonna know how to fix it and it's gonna be a major pain for you.",pihole,1648435210.0
6024,comment,4,i2dzbyr,,"Reading some other comments it seems like you have a misunderstanding of networking.

Your ISP, or WAN, can provide you a dynamic or static IP but yours is likely Dynamic but persists for a long time due to refresh.  If you were to take your modem offline for a few days, you might get a new IP assigned. That’s only relevant if you’re trying to use pihole from outside your network. Which is not recommended without a VPN. In which case you’ll want a DNS service to update your dynamic IP/host pair. I don’t think this is what you’re talking about though. 

Inside your personal network, or LAN, you can have dynamic or static as well. Based on your finding “dynamic” from your command prompt, it sounds like your router is using DHCP to assign IP leases.  If you were to static assign a NIC MAC address from the router or change the NIC config on the host to a specific IP, you would no longer have a lease subject to expiration and it will no longer be dynamic on that host.

Static assignment inside your LAN is what you want configured on pihole so when you configure piholes IP in DHCP, the IP of pihole wont change at a later date and your DHCP config will assign the correct Pihole IP on the DNS config for all your hosts.

If you have a dynamic public IP, and dynamic internal host, you can still configure pihole on your internal network with a static IP. 

Make sense?",pihole,1648433154.0
6025,comment,6,i2dufwl,,Your IP has nothing to do with it,pihole,1648430752.0
6026,comment,1,i2etkn5,,"I recommend that you use static IP over dynamic, because your DNS server will not work properly if it's IP address is constantly changing, meaning that the device connected to the same network as your pihole server might get confused, resulting in no internet connection.",pihole,1648451575.0
6027,comment,2,i2ec162,,I upvoted because it may not be the best idea for them. But it could also be what starts the learning process for them. Nothing like your internet not working to get you learning quick!,pihole,1648439782.0
6028,comment,0,i2dzhos,,"no, partially because i use like a 2009 zinwell router and i have no idea how to connect to the dashboard",pihole,1648433237.0
6029,comment,-2,i2duhxg,,but it said on the installation that its made for static ips and not dynamic ones,pihole,1648430779.0
6030,comment,2,i2e03xg,,"You can access the ""dashboard"" by going to the gateway ip address. I.E 192.168.1.1 It will likely have a login. If it's not changed from default I'm sure you could find it with a simple Google search.",pihole,1648433545.0
6031,comment,1,i2ez0ji,,"> i have no idea how to connect to the dashboard

Look on the router, the URL, username and pwd should be printed on it.",pihole,1648456315.0
6032,comment,7,i2dustx,,"You may be thinking of the dynamic IP on the WAN side of your router/modem.  That is the IP assigned to your modem by your ISP.

Your router hides all that from your local clients on the LAN side of your router.  The LAN side of the router is where the Pi-hole needs a static IP so that network clients can always find it at the same IP.",pihole,1648430928.0
6033,comment,5,i2duloq,,I think you may have misinterpreted something Bc that doesn’t make sense,pihole,1648430830.0
6034,comment,4,i2dulr8,,"Inside your network, where it would need to reside, it will have a static IP.",pihole,1648430831.0
6035,comment,1,i2eqaqk,,"You don’t need a static IP in the traditional sense.  Your DHCP server can hand out the same reserved IP for your pi-hole.  You will want your PiHole to have a constant  IP, as an IP address is used in the DNS configuration, not a host name.",pihole,1648448995.0
6036,comment,-1,i2duukw,,so can i run it or no?,pihole,1648430952.0
6037,comment,4,i2dwcg4,,">I think you may have misinterpreted something NAS [sic] that doesn’t make sense

""Pi-hole needs a static IP"", to paraphrase, is both true, and makes perfect sense (well, more accurately I suppose, clients need a static reference).

Whether OP's misinterpreting anything here seems to be fairly up in the air. It's not clear if they're talking about LAN or WAN side addressing, or understand the difference between the cases.",pihole,1648431684.0
6038,comment,0,i2duobv,,"so even if command prompt says i have a dynamic ip, can i still run it?",pihole,1648430866.0
6039,comment,2,i2e1jiv,,"Yes, you can.",pihole,1648434274.0
6040,comment,3,i2dxtlp,,Yes. The pi hole needs to be a static IP. Not to be confused with the ISP providing a static IP.,pihole,1648432402.0
6041,comment,3,i2duum7,,"You can, somehow, set it up on a static IP inside your network. We know nothing about your network.",pihole,1648430953.0
6042,comment,-2,i2e1mms,,I cant even access mu router,pihole,1648434319.0
6043,comment,0,i2dyu36,,can you help me? im having some troubles.,pihole,1648432903.0
6044,comment,1,i2emscq,,Then no.,pihole,1648446425.0
6045,comment,3,i2dzh9u,,"Dude just set your IP to static on the Pi, should be a few minutes of work.",pihole,1648433231.0
6046,comment,1,i2dzi54,,"Well, first thing is that if anyone is to help you, you're going to have to give a bunch of information about your network and what you're talking about.",pihole,1648433243.0
6047,comment,1,i2dzjer,,setup a DHCP reservation of the IP that your raspberry pi is using. If you don't have static IPs then thats what you do,pihole,1648433261.0
6048,post,11,tpudcm,Pi Zero WH with Ethernet Hat queation,"My Pi Zero WH with Ethernet Hat has a bad ethernet port. I was wondering if using a USB to Ethernet adapter will work on the Pi Zero. It seems to be the cheaper way to fix this problem. A new Hat would be 6 times as much as a adapter, if I could even find one.",pihole,1648418519.0
6049,comment,3,i2d739p,,">	I was wondering if using a USB to Ethernet adapter will work on the Pi Zero.

It will. You also have the option to run your device wirelessly. That is a popular setup.",pihole,1648419432.0
6050,comment,1,i2dhisu,,I started with my pi zero on WiFi but I noticed that sometimes online games would lag or disconnect during the match. I switched to usb to ethernet adapter and resolved all those small lag issues and random disconnections.,pihole,1648424523.0
6051,comment,-1,i2d88ho,,I’d say that if you have a requirement for a physical Ethernet connection then the Zero is not the Pi for the Job. Swallow the increased power consumption and use a 3/4.,pihole,1648420000.0
6052,comment,1,i2enw2q,,"Can recommend waveshare ethernet board for raspberry pi.

Attached via pogo pins under the board so gpio still free. I have the Poe version for my pihole.

But as others have said, pi 3/4 is probably far better for your usecase if you're playing games.

Keep checking rpilocator.com and hopefully you get lucky finding one.",pihole,1648447202.0
6053,comment,1,i2fadcc,,"Just run it over wireless, been doing it for years.",pihole,1648465908.0
6054,comment,1,i2fftse,,"pizero will only get you ethernet over usb bus anyways, so do whichever.",pihole,1648469514.0
6055,comment,1,i2d9oud,,Thanks I will give it a try.,pihole,1648420728.0
6056,comment,4,i2dilfb,,">	sometimes online games would lag or disconnect during the match

This is not due to Pi-hole or how the Pi-hole host is connected to your network. Once the DNS resolution is complete, any data transfer and connectivity is between the client and the router.",pihole,1648425036.0
6057,comment,2,i2e7pph,,"The problem is that RPi3s and RPi4s are pretty much impossible to find right now. 

I am using a Pi zero with a USB ethernet adapter right now - works fine. 

I have tried two USB ethernet adapters - both worked. For my purposes I prefer the first one, but the second gives some USB ports (and an annoyingly long cable) 

https://smile.amazon.com/dp/B01AT4C3KQ

https://smile.amazon.com/dp/B08D6H7Y85",pihole,1648437454.0
6058,comment,1,i2d9rxj,,It is something to think about. Thanks.,pihole,1648420771.0
6059,comment,1,i2fadkv,,Thank You,pihole,1648465913.0
6060,comment,3,i2dw9ob,,You also could use this one cable solution to power and give Ethernet to your Pi Zero. https://www.amazon.com/dp/B08M37DF62/ref=cm_sw_r_apan_i_EGQJZQW5TN0PQ3Y4GD26?_encoding=UTF8&psc=1 I have a couple of these and they work great with the Pi Zero and Pi Zero 2.,pihole,1648431647.0
6061,comment,1,i2e84tp,,Thanks - that is cool solution...,pihole,1648437674.0
6062,comment,1,i2ft2p1,,"Nice, actually I've got one of these, but never used it. Where do I have to connect the cable? On the usb or power port?",pihole,1648476378.0
6063,comment,2,i2fte9w,,On the USB port.,pihole,1648476524.0
6064,post,1,tptmt4,Help with IPV6," Quick one - when  forwarding my devices to the Pihole for DNS, should I use the link local address or global address of my Raspberry Pi for the IPv6 address? 

My understanding is that link local isn’t supposed to be routable, so I should just use global, but just checking that this won’t send my requests out over the internet will it?",pihole,1648416358.0
6065,comment,3,i2d3e2j,,"You can use either. The difference is:

\- if you advertise (or set manually) the link local address of the Pi, it will only be accessible for devices on the same subnet as the Pi, i.e. the ones in your local network

\- if you advertise (or set manually) the global address, it can also be accessible for devices that are on another subnet: for example, if you have a second WiFi network set up for guests, etc

The global address will only be accessible from the internet if you have explicitly added a rule in your router's IPv6 firewall to allow incoming connections from the internet on port 53 - which I assume you have not :)",pihole,1648417634.0
6066,comment,1,i2dbsvo,,So use the global address if you have several VLANs? Am I understanding this right?,pihole,1648421786.0
6067,comment,1,i2ecy8g,,Ty most useful,pihole,1648440297.0
6068,comment,2,i2ddm6a,,"Yeah. In that case there needs to be routing between the VLANs of course, the devices from VLAN 1 need to be able to reach the pi-hole on VLAN 2.

If you're concerned about isolating the two VLANs, only let TCP/UDP port 53 through between VLAN 1 and VLAN 2.

(third option is with ULA addressing: routable within your local network between VLANs, VPNs etc, but not to the internet. But that's an extra network to configure...)",pihole,1648422681.0
6069,comment,1,i2gt4ge,,It is more „different subnets“ than „VLAN“.,pihole,1648491207.0
6070,post,22,tpmr81,reducing DNS packet size,"is something wrong with my config?

I keep getting this even after I've applied the fix

[https://discourse.pi-hole.net/t/dnsmasq-warn-reducing-dns-packet-size/51803/9](https://discourse.pi-hole.net/t/dnsmasq-warn-reducing-dns-packet-size/51803/9)

I created a new file in  

    /etc/dnsmasq.d/99-edns.conf  

with 

    ""edns-packet-max=1280""

and restarted everything

I am using Pi 4 2GB with PiHole + DoH and getting 5-11 errors everyday

https://preview.redd.it/x2gilzwa7yp81.png?width=1263&format=png&auto=webp&s=18a16025150f81f8ec6caef48fdea79836e5545f

&#x200B;

https://preview.redd.it/ecotojxq6yp81.png?width=1110&format=png&auto=webp&s=99ef1237e507bc4f1bc95204845088d79157492a",pihole,1648396442.0
6071,comment,9,i2bt7l8,,">"" edns-packet-max=1280 ""

Change this value to 1232.",pihole,1648397637.0
6072,comment,3,i2c6pkp,,"done. Will report back if it comes back again.

Thank you",pihole,1648403288.0
6073,comment,3,i2hmvoi,,"Update: its been over 24 hours and No more errors.

thank you",pihole,1648503584.0
6074,post,54,tpldb6,To Ethernet Port Or Not To Ethernet Port,"Hello there,

I'm new to the raspberry pi game and I wanted to try the pi-hole sinkhole. I'm fine with installing and all that but, was wondering if I absolutely needed to plug it through Ethernet on my modem or if it is possible to run it through the USB port on said modem or even via WiFi.

Thanks for your help!  


EDIT: Damn, thanks everyone you've all been really useful. Much love ♡ ",pihole,1648392238.0
6075,comment,47,i2bixye,,Ethernet is best.  Is there a reason you don’t want to connect it in this way?,pihole,1648393208.0
6076,comment,99,i2by4hj,,"Having DNS requests resolved over wifi as a network admin gives me anxiety, but it will work, I just can’t recommend it.",pihole,1648399718.0
6077,comment,50,i2bh9w3,,Either ethernet or WiFi will do fine. You won't be able to use the USB port because that's not a network path.,pihole,1648392467.0
6078,comment,13,i2ccykk,,"If you're doing this for a home environment (even a busy one - I routinely have 40 devices on my network with all my smart home shit, when friends come over it'll cruise to 60+ sometimes), wired vs wifi will be absolutely indistinguishable.

If you're doing this as a sysadmin of a large-scale industrial network, you would already have made up your mind that wired is the only way to go.

Me?  I've run on a Pi Zero over WiFi for *years* with no issues whatsoever.",pihole,1648405857.0
6079,comment,15,i2bvidm,,Wifi is fine. Mines been on wifi for 2 years.,pihole,1648398616.0
6080,comment,6,i2covxy,,"Ethernet will be way more reliable that WiFi. Not to say WiFi won't work. But WiFi is always subject to interference. Many more variable will affect the reliability of a WiFi connection vs Ethernet. If you can, you should go ethernet every time before WiFi. Since pihole will be your DNS, if for some reason it's not reachable your internet will break. Ethernet will provide a more reliable connection.",pihole,1648410932.0
6081,comment,2,i2bi7j7,,Either works just make sure your nic has a static IP,pihole,1648392880.0
6082,comment,2,i2d28k6,,"It's wifi and /or ethernet only.
I've used wifi in the past, but i recommend ethernet to your Router for less latency",pihole,1648417085.0
6083,comment,2,i2d46se,,Running it on wifi because my Pi doesn't have an Ethernet jack and I forgot to look for a Pi with one when I ordered it. If there's a dongle or something with Ethernet however I will consider switching.,pihole,1648418017.0
6084,comment,5,i2c3iep,,Many of us are using a Pi Zero W connected via WiFi without any problems.,pihole,1648401982.0
6085,comment,3,i2d2abd,,"Running it on a Nexus 5 over WiFi. No issues at all. Just keep it close enough to the router.

Speed wise you won't notice any difference. Unless you have really crappy WiFi.",pihole,1648417107.0
6086,comment,3,i2dvjy6,,I'd never want to make anything that performs a critical server or network-related duty to operate off of wifi. Plug it into ethernet.,pihole,1648431297.0
6087,comment,7,i2c33wt,,"DNS is probably the most important base network service on an entire network. Wi-Fi is for convenience, not reliability. You should absolutely never host DNS via WiFi if you plan to depend on your network at all. If this is a loan environment and you just want to test out or experiment, then don't worry about it and it doesn't matter.

CAN it be done via WiFi in a production environment? Absolutely! You CAN do all kinds of things, but in this case you probably shouldn't.",pihole,1648401812.0
6088,comment,2,i2c38rq,,"DNS is probably the most important base network service on an entire network. Wi-Fi is for convenience, not reliability. You should absolutely never host DNS via WiFi if you plan to depend on your network at all. If this is a loan environment and you just want to test out or experiment, then don't worry about it and it doesn't matter.

CAN it be done via WiFi in a production environment? Absolutely! You CAN do all kinds of things, but in this case you probably shouldn't.",pihole,1648401870.0
6089,comment,1,i2c8jnu,,"PiHole is a DNS server. All servers should be wired. 

Yes WiFi works but there's lots of potential problems, latency issues, interference, frequency sharing, retransmission, etc. Using a wired connection eliminates all those problems.",pihole,1648404044.0
6090,comment,1,i2c496n,,"I ran my pi zero w’s for over a year on Wi-Fi with no issues. I moved them to Ethernet because I moved to PoE at the same time I dumped injectors for my access points. The change was transparent from a performance/reliability stand point.

I was more concerned running without a RTC or internal ntp server than using Wi-Fi for DNS on my home network.",pihole,1648402286.0
6091,comment,1,i2c5yup,,"It will probably work fine over wifi, but since I also use my Pi zero 2 as a wireguard VPN server, I use [This](https://www.amazon.com/UGREEN-Ethernet-Adapter-All-New-Chromecast/dp/B01N1X28F1/ref=mp_s_a_1_8?crid=1CRXVOPQ4TJIM&keywords=micro+usb+to+ethernet+adapter&qid=1648402804&sprefix=microusb+to+ethernet+adapter%2Caps%2C233&sr=8-8) .",pihole,1648402983.0
6092,comment,1,i2d39u6,,"Hey don't run RetroPie and pinhole simultaneously. I have pinhole running with home assistant, weather station and a few other programs. I noticed with RetroPie there was a noticeable lag. 
I had limited the environment to just pihole and RetroPie and found that the more demanding the network or game the greater the chance of lag to occur.",pihole,1648417579.0
6093,comment,1,i2dnc2m,,"I have a TP-Link Archer C7, and I have (using OpenWRT) configured the USB port to work with a Raspberry Pi Zero (No-W). 

Works a treat. Although, I do have a second (docker-based) PiHole running, to improve performance (and redundancy, when doing upgrades)",pihole,1648427300.0
6094,comment,1,i2dy254,,"I have mine powered through the USB of a router on my network. Less cables. Minimum power pull. It works fine with wifi from 1ft away on a short cord with a fairly large home network using it, multiple OIT devices, cameras, security system, streaming platform for adults and kids etc. I see no hinderence and run at about 40% capacity of the device on a RPI2W.  Go for it",pihole,1648432517.0
6095,comment,1,i2e50lq,,"I have an Rpi 3B with the one USB socket, running a USB ethernet interface.

Dietpi seems to be just fine with the setup. Having an external DHCP server helps.",pihole,1648436050.0
6096,comment,1,i2ec0is,,"If you're using a stock router it most likely does not support USB. you'll need a custom router firmware to be able to set that up, like openwrt.

[https://www.djackson.org/openwrt-2B-pi-hole-on-rpi-zero-over-usb/](https://www.djackson.org/openwrt-2B-pi-hole-on-rpi-zero-over-usb/)",pihole,1648439773.0
6097,comment,1,i2euft7,,Others have said already but yes Ethernet would be best. Wifi just has too much latency for stuff like DNS resolve. Tighten down your response times even further with unbound.,pihole,1648452290.0
6098,comment,1,i2f1939,,I have two pi zeros running on wifi only powered from the USB powered port of my APC UPS using a y-splitter.  Works great.,pihole,1648458351.0
6099,comment,1,i2f6ifl,,I use a Pi-Zero W for my pi-hole on wifi and I've never had an issue. The pi is sitting right next to the router and since DNS queries are usually between 50 and 550 bytes I've never really thought it was worth the purchase of an Ethernet hat or similar peripheral to wire it up.,pihole,1648462912.0
6100,comment,4,i2bpe82,,Nah just that I'm using a pi zero and I don't have a usb to ethernet dongle on hand.,pihole,1648396020.0
6101,comment,9,i2dt6cx,,This.  The other guys are right to say it requires so little bandwidth and any latency you prob wont even notice if you have a good wifi signal and all that. But the thought of it grinds my gears and I would want to use corded even if I know logically it would work fine.,pihole,1648430129.0
6102,comment,23,i2cibcx,,This.,pihole,1648408084.0
6103,comment,7,i2dq5xs,,Totally agree. DNS is a critical service and should have as few dependencies as possible.,pihole,1648428657.0
6104,comment,1,i2ehfpe,,"Oh man, you just gave me an awesome/horrible idea.",pihole,1648442933.0
6105,comment,1,i2eqxgd,,"I mean for home use with like 3 users it's gonna be just fine. Yes, it takes 10ms more, but it's not like that's super critical at home, and your devices will cache entries anyway.",pihole,1648449482.0
6106,comment,1,i2er79t,,[deleted],pihole,1648449695.0
6107,comment,1,i2f54c4,,"You just gotta know your IPs off by heart for most of the internet and you'll be fine in case it ever fails, then you won't need DNS anymore 😂😂😂",pihole,1648461760.0
6108,comment,14,i2d5c39,,"Since Jessie 5-10-16 it is possible to configure the Pi as an USB/Ethernet gadget, all you need to do is edit a couple files on the SD card.

The question here, is whether the router usb port supports this functionality.",pihole,1648418568.0
6109,comment,6,i2ct64t,,"You can use the pi zero in OTG mode, which turns usb to an eth device. 

https://reddit.com/r/pihole/comments/ef7tjy/pihole_on_pi_zero_w_mikrotik_connected_via_usb/",pihole,1648412868.0
6110,comment,-4,i2bq9q9,,Ok so it's like an outward only path via USB right? Like when you plug your printer directly to your modem so it's accessible throughout the network. But you can't send commands through it?,pihole,1648396393.0
6111,comment,9,i2cpfj2,,"Large scale networks should have a real protection solution, Not Pihole.",pihole,1648411175.0
6112,comment,1,i2es4nv,,"My situation is almost exactly the same, only when i have all my friends over the 40 devices hits 42 on a good day (sometimes John also brings his laptop)",pihole,1648450408.0
6113,comment,1,i2cqlar,,"'way more reliable'? 90% of devices run wireless at this point. I have about 50 devices in my house. And other than my router itself and my NAS its all wireless. Even laptops these days don't even bother with ethernet ports. 

If your wireless is janky invest in that.",pihole,1648411692.0
6114,comment,2,i2bqgz0,,"Hmm okay, I'll look into that, Thanks!",pihole,1648396478.0
6115,comment,3,i2dibm2,,You can run the pihole off an Android phone?,pihole,1648424907.0
6116,comment,6,i2c9680,,"Meh, we're taking home use here, it's not NASA. Modern WiFi is very reliable, and DNS data is minimal.

I've run a zero W for years.",pihole,1648404305.0
6117,comment,1,i2c9hpm,,"Home use. Wifi works fine, plus all in you're under $20.",pihole,1648404431.0
6118,comment,1,i2fpb5y,,">	Wifi just has too much latency for stuff like DNS resolve.

A few extra msec (typical with wifi) is not noticeable to the end user. 

I run both wired and wireless Pi-holes and there is zero observable difference in DNS performance.",pihole,1648474626.0
6119,comment,14,i2bqa3m,,I run mine over WiFi on a zero with no issues,pihole,1648396398.0
6120,comment,5,i2bqqgn,,"Not sure if you're necessarily looking for one or not, but I had picked up [this one](https://www.amazon.com/gp/aw/d/B00RM3KXAU?psc=1&ref=ppx_pop_mob_b_asin_title) for my pihole setup & it worked out of the box.",pihole,1648396592.0
6121,comment,4,i2crb1v,,"I ran mine on a zero for a couple years, and running it on WiFi was never an issue.  DNS traffic is so lite, that the bandwidth is a non issue.  You do get a little longer on the response time, but it was never enough to notice.",pihole,1648412018.0
6122,comment,2,i2dduuu,,"Note that pizero uses *micro* -USB, the 0W first edition at least",pihole,1648422801.0
6123,comment,4,i2ewnby,,"Wi-fi is always going to be less reliable than ethernet, no matter what you do. It also adds an extra thing to consider when troubleshooting. Pihole not responding to dns requests? Could be the pihole itself, could be your client devices connection, could be your internet connection, or now it could just be that your neighbour turned on their shitty old microwave and flooded the spectrum.",pihole,1648454186.0
6124,comment,6,i2ddbyq,,"Yes, but OP was asking if he could hook the Pihole to the router with USB and make it work out-of-the-box  
Personally I have an Ethernet-to-microUSB adapter, but of course at *some* point something changes along the path",pihole,1648422546.0
6125,comment,6,i2dnavz,,"When you are referring to USB, are you referring to USB on the RPi, or the USB on the router?  

The router USB is not likely routable.",pihole,1648427284.0
6126,comment,17,i2btfyf,,"USB is a local interface for data traffic between devices like printers and hard drives.  It isn't for carrying network traffic.

You connect any client on your network to your router via either ethernet or WiFi.  A Pi/Pi-hole is no different.",pihole,1648397736.0
6127,comment,3,i2dkm0y,,"It can send commands in both directions, but it doesn't normally carry network data. You can ostensibly write some drivers to do that (essentially mimicking a network card but over USB), but you'll need to also hack your router/modem firmware to get it to support it as well. Now you're in way over your head territory. Just use ethernet and wifi, it works fine.",pihole,1648425998.0
6128,comment,1,i2e3idc,,"When you connect a printer to the USB port on your router, it's not actually giving a network connection to the printer. What it's doing is talking to the printer over USB, like a computer would, and telling every device ""I can print for you"". When you send a document to that printer it first goes to the router over the network, and then over USB to the printer",pihole,1648435272.0
6129,comment,3,i2cts30,,Also true!,pihole,1648413147.0
6130,comment,4,i2cspfa,,"I'm just repeating what the network industry mentions as best practices. For starters, don't assume my wireless network is janky. As a matter of fact is the opposite. I live in a townhouse and yet I have a network and WiFi system the will rival a mid-size business. But even then, I run most of my devices via wired connections when possible (Apple TV, Synology NAS, Computer, Raspberry PIs, PlayStation, Nintendo Switch, etc etc). The rest of my network runs wireless (IoT devices, HomePods (10 of them), and many other). I don't run into issues with either WiFi or wired network, yet I follow industry best practices.

&#x200B;

My first replay meant to just reflect industry best practices.",pihole,1648412656.0
6131,comment,1,i2ddw5h,,"The last line sums it up. I moved up the chain and got a pair of et8s from Asus, and the QoL improvement is not something that can be put in words.",pihole,1648422817.0
6132,comment,3,i2cpls4,,"To be clear, the pihole needs a static ip.",pihole,1648411252.0
6133,comment,1,i2e7jak,,"I think you can containerize it in tmux or preferably Linux Deploy - alternatively the Nexus 5 has postmarketOS or Ubuntu Touch available, which gives you root access with apt. Normal arm Linux",pihole,1648437361.0
6134,comment,1,i2efsj5,,"Sure you can.

https://github.com/DesktopECHO/Pi-hole-for-Android",pihole,1648441946.0
6135,comment,9,i2cgpyz,,">	it’s not NASA

And just as an aside, all NASA communications to their spacecraft and rovers is wireless.  Some are billions of miles away.  Voyager is about 14 billion miles from earth.",pihole,1648407405.0
6136,comment,4,i2ceh6j,,"Again, not saying can't, just saying it's still not a good idea. Modern WiFi isn't really any different than old WiFi, it's just got more complicated extensions on it and more powerful processors. Arguably, however, I think driver support has improved to a point where the modern software makes the connections more reliable than they used to be.",pihole,1648406469.0
6137,comment,5,i2cisg2,,There's nothing wrong with learning and following best practices even as a regular end user tho.,pihole,1648408289.0
6138,comment,4,i2ddpcv,,"I got mine a long time ago, but I think it was [this one](https://www.amazon.fr/Adaptateur-Ethernet-Carte-R%C3%A9seau-Raspberry/dp/B092M9B7W8/)",pihole,1648422725.0
6139,comment,5,i2d7r9c,,"I've also heard the Chromecast Ultra GL0402 charger with Ethernet works out of the box, and gives you power and ethernet over one USB connection.",pihole,1648419763.0
6140,comment,1,i2ey1wk,,Microwaves man they are a admins worst nightmare. I was at s friend's house and they hat bad wifi from time to time. There AP hang right above there microwave.,pihole,1648455433.0
6141,comment,6,i2dn74s,,"I actually think OP was wanting to use the USB on the router as the network route, I doubt many routers would have the onboard USB as network routable.",pihole,1648427235.0
6142,comment,0,i2cttqm,,"Again you are talking about industry / enterprise stuff. 


PiHole is a home user product - it's more than fine to run Wifi.",pihole,1648413169.0
6143,comment,3,i2de2r5,,"Now I'm picturing a rover with an ethernet cable, thanks for the laugh.  
^(Because they obviously needed optic fiber /s)",pihole,1648422904.0
6144,comment,0,i2cfkw2,,I find the ease / convince / cost of running it wirelessly far outweighs any other possible benefits.,pihole,1648406926.0
6145,comment,-7,i2cltrg,,"Best practices from 20 years ago maybe.

Enterprise, sure, but even smaller businesses do everything wirelessly, I know a bunch that run everything off a consumer grade wireless, and are 100% cloud, or something like a Synology NAS.

Pihole is targeted at home users, so you should be basing recommenations for home use.",pihole,1648409598.0
6146,comment,2,i2decd2,,"I'm going to go big brain and remark that using Ethernet does *not* mean it can't be setuped to use wifi as well, in case it's not convenient.  
But if it's located near the router and there's a free port, why not make use of it?",pihole,1648423023.0
6147,comment,5,i2d5u25,,"Wireless is great and all, but what about when some tosspot next door to you decides to eat into the same wireless channel?  Or over the road, the Jones family buy a new washing machine or TV that isn't shielded correctly and you're scratching your head wondering why your wireless browsing speeds are slow, or your gaming pings are high?

Best practises are there for a reason, someone's already done the case studies, even if they were 20 years ago.

Remember wireless frequencies have a finite amount of bandwidth available.  You live in an apartment block on multiple stories, and uneducated people just plug their new router in without even knowing about channels and different GHz, suddenly everyone thinks their ISP is shit, because everyones router is on channel 7.

Wireless is convenient, just that.  If I can plug a twisted pair into anything, I always do.",pihole,1648418812.0
6148,comment,4,i2d8nhb,,"I would estimate that the majority of devices in a home network are wireless. If there is WiFi interference or other problems, the problems will be more widespread than just the DNS server. 

In my specific network with 38 clients active as of now, 33 are wireless.",pihole,1648420209.0
6149,comment,0,i2d6vs9,,"Meh, and deal with a spaghetti mess, no thanks... My router is the size of a deck of cards, my NAS has a Ethernet (only because wireless isn't an option), and one wire to the base AP, the rest is mesh wireless. Zero issues.

AGAIN HOME USERS, really get over it, wires are for luddites.",pihole,1648419327.0
6150,comment,1,i2dqnmn,,"That's true but a PiHole is the one device that almost all other devices depend on. If one random client has problems then perhaps your refrigerator goes offline. If your microwave messes with your PiHole device, every device will suffer.",pihole,1648428895.0
6151,comment,1,i2drfqt,,"I recommend that users try their Pi-hole on WiFi if that's their option. If it works, stick with it. If it doesn't, then find an ethernet solution. 

I see zero observable difference in DNS response between my three Pi-holes wired via ethernet to the main router and the three Zero W's on WiFi on a different floor of the house. I suspect that will be the case for most users with a solid WiFi signal.",pihole,1648429272.0
6152,post,9,tpkzmv,Deco router wont let guest network see pihole,"Hi I have Pihole setup and hardwired to my router. When i try to setup pihope ip as DNS ip under DHCP settings (thats where primary DNS can be entered), my main network can access Pihole (hardwired is in primary network), however, my guest network clients cannot see pihole (because of network isolation) and hence none of the devices can access internet. What are some recommendations do get around it? 
(PS: I do want to keep my guest network and i do want network isolation as I have quite a few IOT devices)",pihole,1648391039.0
6153,comment,5,i2bg4jm,,"Guest network have something called ""AP isolation"" (thats the way my router calls it) which prevents guest network fron accessing main network. Thats normally a good thing. In this case you might have to allow it separately or connect the pi to BOTH main and guest network. In DHCP config, add BOTH IP of your pi to DNS servers.",pihole,1648391940.0
6154,comment,2,i2bk09b,,"Correct. The guest network should be on an isolated subnet, one that should also prevent endpoints from seeing one another. Think ""public network"" where you wouldn't want any potential ne'er-do-wells peeping at your device. As such it won't see your pihole from the subnet persective or the isolation perspective.",pihole,1648393678.0
6155,comment,1,i2bgcff,,Yes,pihole,1648392041.0
6156,comment,1,i2clgsl,,"With pi on Ethernet and WiFi, you will still have the issue of how your guest network clients will get the IP of the WiFi interface based on dhcp unless you do as above:

Primary as Ethernet IP, secondary as WiFi IP

Have not tried this.

I have the same issue with a asus router. To get around this, I set the wan dns setting on router as the Pi and set the dhcp running off the router to the router IP. Disadvantage is you don’t get individual client IP’s in PiHole, they all come from the router IP.",pihole,1648409441.0
6157,comment,1,i2cmjgx,,"When you say ""guests can't 'see' PiHole"" do you mean ping the PiHole IP address? If so, that would be normal as the guest network should not be able to ping into the LAN. If you mean that when you check a device's network information, it does not show PiHole as the DNS IP, that should be adjustable in the guest network settings. Simply put, the last place all the network traffic passes through is your router and if that is set to the correct DNS (PiHole), everything should be directed to PiHole.",pihole,1648409907.0
6158,comment,1,i2cmse2,,"I have this setup too. There's one workaround that I know of. It has its drawbacks though, so I don't use it.

1. Set your Deco's **WAN** DNS to your pi-hole's LAN address. The router will always be able to see the pi-hole.
2. Set your Deco's **LAN** DNS to itself. Both the main network and guest network will be able to access the router.

All devices that join your network will have their DNS pointing at your Deco router, and your Deco router will get DNS from the pi-hole.

This will block all ads on both the main and guest network.

BUT, the pi-hole logs will see ALL requests coming from your router. It will not see any of the individual devices. So your logs will never tell you which device is making each request.

If you can live with the logs being kneecapped, this will get pi-hole working on your entire Deco network.",pihole,1648410017.0
6159,comment,1,i2bg8dg,,How do i connect pi to both?,pihole,1648391990.0
6160,comment,1,i2cz35q,,This is how I had it before. But it stopped working. Deco would not accept a local IP for WAN DNS anymore,pihole,1648415593.0
6161,comment,2,i2clkbo,,"I too have the Deco Mesh wifi, and have not found a workaround other than turning off the guest network. Even if you get the Pi to have a second IP on the guest network, it will still be isolated from all the other IPs on that network. The Deco's guest network is prevented from seeing the main network AND each device on the guest network is prevented from seeing each other. 

The Deco Mesh devices are very limited in their options. One of the popular feature requests is to allow setting a different DNS server for the main and guest networks. This would at least let you use the pi-hole on your main network while using public DNS for the guest network. But TP-Link has merely acknowledged the request. It's unlikely to make that upgrade any time soon, if ever.",pihole,1648409484.0
6162,comment,1,i2bgaq3,,Did your pi have both ethernet and wifi?,pihole,1648392020.0
6163,comment,1,i2d0bbg,,"Oh man, I see that now. I tried this setup once and didn't like it because of the logging problem. But you're right that it's not even allowed in the Deco settings any more, to set the WAN DNS within the LAN DHCP scope. 

You may still be able to get it working by manually setting the IP address on the pi-hole outside of the Deco's DHCP range.",pihole,1648416165.0
6164,comment,1,i2bge67,,Yea,pihole,1648392064.0
6165,comment,1,i2d2pxw,,Yeah but the fact that it is connected via lan port do u think deco will let devices on guest talk to it?,pihole,1648417313.0
6166,comment,1,i2bgj6m,,"Thats how. Use ethernet to connect to main network, and wifi to guest network.",pihole,1648392128.0
6167,comment,1,i2d77pe,,"The other devices wouldn’t have to talk to it. 

I’m suggesting putting the pi-hole on a static IP outside the DHCP scope, so that you could use the pi-hole as the WAN DNS again. The new Deco settings won’t let you set the WAN DNS to anything within the DHCP scope.

Edit: this is admittedly some trial and error that i haven’t tried.",pihole,1648419494.0
6168,comment,1,i2bguty,,So i put primary dns as my pi wired ip and secondary as wifi pi ip? That way rely on fallback mechanism in router to use secondary?,pihole,1648392277.0
6169,comment,1,i2bpyxb,,"I tried to enable wifi, i do get a ipaddress for it aswell but my router says it’s inactive. Would pi restrict operating on two network interfaces?",pihole,1648396267.0
6170,comment,1,i2dfkvu,,Good idea. So my network is 192.168.1.x range so i picked 192.168.1.254 for my pihole. And deco didn’t let me add pihole as my WAN DNS. My subnet was 255.255.255.0 with dhcp range from 192.168.1.1 to 192.168.1.250 (pi outside that range). So i changed my pi ip to 192.168.2.2 - now I cannot find that device in my network anymore. Any suggestions,pihole,1648423600.0
6171,comment,3,i2bh72h,,"There is no such thing as fallback. Router dont know, its the client who decide. The client is free to choose whatever they want in those two. Its like having two candys. You could choose A or B, but A is empty. If you chosed B, then you are fine. If you chose A, then you found out its empty, you would chose B instead.",pihole,1648392431.0
6172,comment,2,i2bxw9n,,Just give it a try. Maybe you will have to run `pihole -r` repair to make pihole notice there is another interface tho.,pihole,1648399622.0
6173,comment,1,i2djlw9,,"Blech, I dunno. Might be out of luck with the Deco. Like I said, I don’t have a workaround that I like. I gave up my guest network. 

If you just need to get you pi-hole back, though, you can temporarily switch your deco/LAN to 192.168.2.*, do an ipconfig -renew, and you should be able to see your pi-hole long enough to change it’s IP back to your main LAN.",pihole,1648425518.0
6174,post,1,tpkuxv,"pihole VPS, no web interface, cli only install issues","First issue, cannot specify eth0 only without editing pihole-ftl.conf

Second issue, Documentation seems a bit sparse on how to fix this, my pihole VPS is protected with ufw, and it's cheaper to run it in the cloud than locally, as I have public static IP addresses for each location that connects to it.

Finally resolved, would an alternative installer make sense?",pihole,1648390624.0
6175,post,6,tpjvih,No DNS resolution inside docker containers when host DNS set to pihole,"I run pihole alongside other services inside docker.

Now the problem is, when the host (Raspberry Pi 4) DNS Servers are set via DHCP to the local IP of the Raspberry (10.0.0.x), DNS resolution is not working inside the docker containers. All of them. It works outside docker and for all other devices.

If i try to resolve domains inside docker containers with the local IP of the pihole container (172.20.0.x) or within the pihole container itself with localhost, everything works fine.

So the problem really is the host's DNS Servers being set to itself. (10.0.0.x, not localhost)

I don't know if this is a problem with docker or pihole.

I could't find anything helpful on Google. Does someone know the solution to this problem?  
Setting the host's DNS servers to localhost or the router or just anything else works but I don't understand why this should be needed for docker.

Pihole is configured to allow all origins.  
Pihole's DNS Server is Cloudflare.",pihole,1648387495.0
6176,comment,2,i2bps8i,,"I found out that running 'nslookup sth [10.0.0.2](https://10.0.0.2)' (where [10.0.0.2](https://10.0.0.2) is my Raspberry Pi) from within docker leads to a ""reply from unexpected source"" error.

So the request is going to [10.0.0.2](https://10.0.0.2) (interface eth0) but the pihole container is responding via the docker interface, not eth0, and the response is coming from 172.20.0.\*.

This is the problem. Still don't know how to fix.",pihole,1648396187.0
6177,comment,1,i2blohx,,"Kind of hard to picture from your description; but it sounds like they're configured for 2 different networks 172.20.*.* vs 10.*.*.*

Is there routing logic to allow communication between the two?",pihole,1648394413.0
6178,comment,1,i2byskh,,"I’ve ditched local domain names, it’s just too much complexity around all the layers of NAT, split horizons etc.

Still using pi-hole, but all my containers go into global DNS (AAAA record for *servicename.mydomain.com*), and that automatically resolves to the correct IPv6 address inside, outside the local network, VPNs, clients with different DNS servers etc. 

Only costs me a domain name, saves me a ton of hassle.",pihole,1648400000.0
6179,comment,1,i2bp6y6,,"Yes, they can communicate with each other.  
10.\* is my local network (interface eth0) and 172.20.\* is the docker network (interface docker-bridge....). Both are accessible from the host itself and from within the docker containers. I also thought about this but this is not the problem.",pihole,1648395934.0
6180,post,3,tpiniv,High Availability,"I’ve got 2 PiHoles running in high availability with keepalived.

In the setup instructions it says to adjust the static IP assignments on both pis in /etc/dhcpcd.conf to :

interface eth0
static ip_address=192.168.0.101/24
static routers=192.168.0.1
static domain_name_servers=192.168.0.100 192.168.0.101 192.168.0.102

(With the correct IP’s)

When I do this I start getting a loop and max queries and rate limited.

So I retuned it to the default where static domain_name_servers= is blank and it seems to be working perfectly again.

Am I missing out on something by not having anything for static domain_name_servers=?

I’m also running unbound on both.",pihole,1648383044.0
6181,comment,5,i2blj2x,,"Note that High Availability really isn't necessary with Pihole.  The DNS protocol was designed with the idea that the client can easily fail over to another server if the one it's trying doesn't answer.

Fault tolerance is build in :)",pihole,1648394347.0
6182,comment,3,i2b3yg3,,">	In the setup instructions it says...

I would ask the person whose instructions you are following.",pihole,1648385746.0
6183,comment,3,i2buql9,,"DNS doesn’t need HA but I have two PIs as primary and secondary also. I use this app to look at logs. Assuming you have an iOS device. 

https://apps.apple.com/us/app/pi-hole-remote/id1515445551",pihole,1648398287.0
6184,comment,1,i2dbgbe,,Thanks.TIL.,pihole,1648421611.0
6185,comment,-2,i2ckdsa,,Never put the pihole itself as its own resolver. Pihole 1 should have pihole 2 as its resolver and vice versa.,pihole,1648408970.0
6186,comment,2,i2bo63w,,"I just like having all my queries hit PiHole 1 so I don’t have to search the logs if there’s an issue. If I just set them up as DNS 1 and 2 queries hit both on like a 75/25 split.

Like I said, High Availability seems to be working perfectly. Just wondered if there may be some side effects of skipping that step out if someone knew what it did.",pihole,1648395490.0
6187,comment,3,i2d56ac,,"Essentially all this achieves is ensuring that if one device fails, it takes both down, and you have no redundancy.

Defeating most of the point of having two devices in the first place.",pihole,1648418488.0
6188,comment,1,i2d85sq,,">	Pihole 1 should have pihole 2 as its resolver and vice versa.

This is not the ideal setup. If the opposite Pi-hole is down the remaining Pi cannot reach the internet. 

A more reliable setup is to set the nameserver on each Pi to an independent third party DNS (Cloudflare, Quad9, etc). This completely separates the Pi's from potential Pi-hole issues.",pihole,1648419962.0
6189,comment,2,i2cyrwg,,"I find that 95% of the devices I have prefer the primary DNS that is issued via DHCP, so if PiHole 1 is your primary, that should be the place you go to first.",pihole,1648415446.0
6190,comment,1,i2d7ab9,,"I don't mean the resolvers within pihole - use both addresses (or local unbound and 2nd pihole address)for those. I meant at the OS level. If you use the pihole DNS in the OS DNS settings you'll end up in a race condition if the device reboots. But regardless, you dont need to configure HA - just have 2 servers providing DNS services. Remember ""Primary"" & ""Secondary"" servers in the client doesn't mean ""preferred"" & ""backup"".",pihole,1648419530.0
6191,comment,1,i2d8d5p,,">I don't mean the resolvers within pihole - use both addresses (or local unbound and 2nd pihole address)for those. I meant at the OS level

This doesn't really change a lot, and you'll still wipe out one host's resolution when the other goes down, for essentially no reason.

>. If you use the pihole DNS in the OS DNS settings you'll end up in a race condition if the device reboots

Maybe *you* do, but that's something you're going to have to investigate yourself I suppose, and not attribute to Pi-hole as a whole. My stacks have been self referential for years.",pihole,1648420066.0
6192,comment,1,i2dbjb6,,Thanks. TIL.,pihole,1648421653.0
6193,comment,1,i2ddh94,,"Thinking about it, you may want to add `DELAY_STARTUP=` to your FTL configuration.

From your description it's sounding a lot like your FTL isn't coming up in time to service the host. Start with ten seconds, and increment higher as required until the host boots and resolves as expected.",pihole,1648422616.0
6194,post,6,tpee29,"Pihole tipped me to the fact that a device on my network has inexplicably gone insane. This isn't strictly to do with pihole, but, I don't know who to ask.","Hello.

This morning as I was doing my rounds (checking everything before I start work) I happened to notice that the Top Permitted Domain according to pihole was hik-online dot com, by a savage amount. 

Pihole says it's making a request every 2 seconds. I added the domain to the blacklist, but for some reason, it's still being allowed, and the requests keep climbing.

The device in question is a Hikvision security camera that I bought 8 years ago. Its MAC address is blocked at the firewall, and until today, it has never said a peep to anyone except the Hikvision NVR. The NVR itself is not doing anything it shouldn't, and is also blocked at the firewall. I don't want to get into conversations about VLANs. If I could afford the kind of hardware that can do VLANs, I'd already be doing VLANs. MAC blocking is the best tool I have right now.

So I guess the question is, is my camera DDOSing my pihole? Is that why I seem to be unable to blacklist this site? 

... I mean I guess I could get a ladder and unplug the camera (network switch is in the roof because I'm a dickhead), reboot the pihole, manually block the domain, and reconnect the camera ... but, is what I'm proposing even a thing?

EDIT: I was able to manually add hik-online dot com to the blacklist. But then something even weirder happened. You see, all incoming and outbound traffic is blocked for that camera's MAC address anyway. Successfully blocking the DNS should have had no effect on what the camera experiences: it's trying to talk to a server, it's still getting no response whether it's pihole or the router that's stopping it.

BUT.

You would expect such a chatty device to very quickly appear in the Top Blocked lists, either the device or the site. It hasn't. The requests stopped almost immediately - like within 5 minutes of blacklisting the device. It no longer appears in the current log at all. It just stopped. It is as though someone saw me edit the blacklist, realised it was futile, and went away.

I think someone's in my house.",pihole,1648363673.0
6195,comment,3,i2adhjn,,"wat is mac filtering blocking from your camere? is it all outgoing traffic?

if yes then your camera can get the ip of such server via dns but those packets would be blocked.

one think you can do  if you want your camera to talk only to one ip oudside your networj 1) create device for camera in pihole 2) create new group in pihole with all sites blocked and add one whitelist rule 3) assign device to that group",pihole,1648364709.0
6196,comment,2,i2b83jb,,"A lot of devices, if they don’t get the response they want they just keep making the request over and over. If your device is blocked by your firewall that could be the case. Don’t know why after 8 years it would suddenly want to make that connection though.",pihole,1648388061.0
6197,comment,3,i2afr05,,"Thank you for your very useful response.

Yes, all my camera and IOT devices have outbound AND inbound traffic blocked at the router's firewall. It's running ddwrt.

I never want my cameras to talk to the outside world, ever. In the extremely rare case that I need to see them, I VPN in from my phone, using PiVPN on the same PiZero that pihole is running on.

Nevertheless, I'm going to look into groups as you describe, as an extra layer of security. Like, for everything in that group, the only whitelist item will be the NVR. Thanks for that suggestion.",pihole,1648366611.0
6198,post,19,tozwgl,Conditional forwarding not working,"Hello,

I am having a small problem with setting up conditional forwarding. I set it up, filling in my information (Network: [192.168.1.0/24](https://192.168.1.0/24), Router: [192.168.1.1](https://192.168.1.1), Local domain name: home) and removing the ticks on `Never forward non-FQDN A and AAAA queries` and `Never forward reverse lookups for private IP ranges`, but client hostnames never appear in Pi-hole. The router is a Huawei HG658 V2, provided by the ISP (A1, Croatia). As an alternative to get local hostname resolution, I tried seting up the DHCP server in Pi-hole, but then the ISP provided cable TV box stops working after a few days. I guess that my router does not support conditional forwarding, but i would still appreciate any help on the subject. Getting the cable box to work with Pi-hole's DHCP server would also be an acceptable solution. Thanks in advance

P:S. I'm sorry for all of my grammar and spelling errors.",pihole,1648319976.0
6199,comment,2,i29fxyj,,"It is possible that your router doesn’t store DNS records for DHCP connected devices? Have you checked that? If you configure a device with the Huawei router as its DNS servers, can you get those client hostnames? Also, are you sure that the DHCP in your router is advertising only Pihole as DNS? Many routers also include themselves in the DNS section, even if you don’t want them to.",pihole,1648343995.0
6200,comment,1,i2anroq,,"Now I'm not sure if it stores DNS records for DHCP devices. I tried setting the router as Raspberry Pi's DNS server and running nslookup on my PCs hostname with .home local domain name:  
 `$ nslookup MyPC.home`  
`Server:         192.168.1.1`  
`Address:`        [`192.168.1.1#53`](https://192.168.1.1#53)

`** server can't find MyPC.home: NXDOMAIN`

and without .home:

`$ nslookup MyPC`  
`Server:         192.168.1.1`  
`Address:`        [`192.168.1.1`](https://192.168.1.1)`#53`

`** server can't find MyPC: NXDOMAIN`

This doesn't work, but nslookup-ing the PCs name saved into the router works (MyPC-Ethernet):

`$ nslookup MyPC-Ethernet`  
`Server:         192.168.1.1`  
`Address:`        [`192.168.1.1#53`](https://192.168.1.1#53)

`Non-authoritative answer:`  
`Name:   MyPC-Ethernet`  
`Address: 192.168.1.71`  
`** server can't find MyPC-Ethernet: NXDOMAIN`

and nslookup with local domain name also works (MyPC-Ethernet.home).

The DHCP server is advertising only Pi-hole (secondary DNS in DHCP options is set to empty).",pihole,1648373623.0
6201,comment,1,i2b7t91,,"If you set the router as PiHole’s upstream server then there’s no need for conditional forwarding.

I’m not sure what you did with nslookup there, all those examples seem to be using the router as DNS server, never Pihole.

I’m assuming 192.168.1.1 is your router. What’s the Pi’s IP address?",pihole,1648387910.0
6202,comment,1,i2cqc4o,,"The Pi's IP is 192.168.1.5, Pi-hole's upstream dns server is Cloudflare's (1.1.1.1).

I tried nslookup-ing directly to my router to see if it stores DNS records of DHCP clients, as You siggested above. Theese were the results (devices not reachable by their hostname, but reachable by their name in the router which can be manually cahnged to the device's hostname).",pihole,1648411578.0
6203,comment,1,i2f907e,,"Okay, I get you. 

I’m thinking maybe conditional forwarding works only for reverse lookups. If you try to use Pihole to resolve 192.168.1.71 do you get back “MyPC-Ethernet”?

Another way to do what you’re trying to do is to use Local DNS in Pihole. You’ll have to manually add every device (name + IP). For a home network that’s usually no more than 10-15 devices, it’s perfectly doable.",pihole,1648464887.0
6204,comment,1,i2ues1q,,"Sorry for getting late to you and thank you for your support. I tried nslookup on [192.168.1.71](https://192.168.1.71) using my router as DNS and I get the result ""Non-existent domain"". This makes me think that my router doesn't store DNS records for DHCP clients.

Adding device hostnames to Local DNS is a good alternative and I will use it, even tough it isn't optimal because then I have to configure static IP addresses as well.

As a better alternative to using Local DNS, I was wondering if avahi could be used?

Or even better, could one map hostnames to device's mac addresses, so no need for setting up static IPs?",pihole,1648733006.0
6205,comment,1,i2vyiwg,,"Hi, no problem. To answer your questions:

It is always good practice to have static IP addresses for the devices that are “important” in your network, i.e. devices you would want to access from another device

Second, yes you could use avahi or another mDNS based solution, that is absolutely independent from Pihole and your router and has nothing to do with it.

Third, no you cannot map a hostname to a MAC address, that’s just not how DNS works.",pihole,1648754945.0
6206,comment,1,i30ezq5,,"Yes, I know that you cannot map hostnames to MAC addresses, but since pi-hole is magical, I thought it could use avahi to track device hostnames. Alternatively, since it already knows every device's MAC and IP address, it could map them to a specific hostname (which is set manually, as I don't see a way to discover it) and track IP changes for every MAC.

But, since neither of that is currently possible, I will stick to using Local DNS.

One more question about local DNS, should I map MyPC, or MyPC.home to IP address?

Thank you for all your support once again.",pihole,1648835677.0
6207,comment,1,i31x7rc,,"Hahaha PiHole definitely seems a bit magical, but it’s not THAT magical.

For Local, you need a domain name. It could be just .home, or even better could be something unique, like (let’s imagine your name is Bob) .bob.home",pihole,1648859773.0
6208,post,1,tozhru,Backwards post for aid,"I'm not looking for DNS entries to prevent breaking, but DNS entries  to completely break and disconnect a wyze cameras ability to communicate home. specifically, to prevent cloud saves/streams. If anyone had a specific entry that broke functionality, I would like those entries. Any help is appreciated.",pihole,1648318743.0
6209,comment,2,i282c4j,,"On your router, block it’s outgoing requests",pihole,1648320800.0
6210,comment,1,i2897ov,,Simply add the domains to the blocklist. Nothing else needed.,pihole,1648323900.0
6211,comment,0,i2bguyb,,Just buy a decent camera system or start digging through the logs…,pihole,1648392279.0
6212,comment,1,i2892j6,,Yup. Drop all outgoing connections for the cams IP.,pihole,1648323835.0
6213,comment,1,i28kgzl,,Sure I will likely do that for all 12 cameras for sure. I'm looking for redundancy. And therefor the DNS entries,pihole,1648328961.0
6214,comment,2,i28kw60,,"Correct, that is how the pihole works. I'm looking for the specific domain names that people have come across, to save time blocking each individual potential primary, secondary, and tertiary connection etc for each process. Most network systems have redundancy in place, so if I block one it'll try another etc etc. Considering I have 12 cameras all in varying states of firmware depending on my needs, the potential list is very long. And would be time consuming, therefore the question asking if anyone has any DNS entries is the answer I am looking for. But thank you for your input :)",pihole,1648329149.0
6215,comment,1,i2cc9uc,,"I have an IP/nvr combo system installed. That's a separate system for a separate purpose, and not the information asked. Thanks for your input though.",pihole,1648405574.0
6216,comment,2,i28le7z,,What does the pihole logs say?,pihole,1648329380.0
6217,post,2,toylgq,Looking for some guidance on setting up local DNS record,"I am looking to set up a local dns record (and then hopefully more) in pihole settings. Is there a tutorial I can follow? So far, I already set router.lan to my router IP address. But when I go to a client that is using pihole (I already checked the query log and 100% sure its using pihole) and enter [https://router.local](https://router.local) in a web browser, I get DNS\_PROBE\_FINISHED\_NXDOMAIN.

&#x200B;

If I do \`nslookup router.local\`

Server: 127.0.053

Address: [127.0.0.53](https://127.0.0.53) \#53

Non-Authoritative answer:

Name: router.local

Address: [192.168.55.1](https://192.168.0.1)",pihole,1648316132.0
6218,comment,1,i27sho1,,"As you can see, I am still learning how to properly use code blocks in reddit. :) I apologize.",pihole,1648316556.0
6219,comment,1,i27sm48,,What does your query log show for that query from that client web browser?,pihole,1648316610.0
6220,comment,1,i27tgo8,,"`17:47:29: query[SOA] local from 192.168.55.34`  
`17:47:29: forwarded local to 127.0.0.1#5335`  
`17:47:29: reply local is NODATA`  
`17:47:35: query[SOA] local from 192.168.55.34`  
`17:47:35: forwarded local to 127.0.0.1#5335`  
`17:47:35: reply local is NODATA`  


So, [192.168.55.34](https://192.168.55.34) is the client. I do have unbound configured.",pihole,1648316961.0
6221,comment,1,i27uh3x,,The client is requesting DNS resolution for the domain **local**.,pihole,1648317378.0
6222,comment,1,i27upza,,Could you help me understand this a little better? What do I need to change?,pihole,1648317478.0
6223,comment,2,i28z3j1,,"For starters, .local is used by mDNS so for a first try, maybe you should test with .lan and not thinker with .local unless if your hand is forced, as the client may have special handling for this TLD?  

(Or use the newly standard name DOMAIN.home.arpa, if the weird format is not an issue for you)",pihole,1648335750.0
6224,comment,1,i29a1to,,">S so for a first try, maybe you should test with .lan and not thinker with .local unless if your hand is forced, as the client may have special handling for this TLD?  
>  
>(Or use the newly standard name DOMAIN.home.arpa, if the weird format is not an issue for you)

Thank you!",pihole,1648341069.0
6225,post,1,toy92x,Netflix on WebOS(LG) fails to update with blocks,"On LG C9 us.lgtvsdp.com had to be temporarily unblocked for Netflix app to be updated.   Did not affect Amazon Prime though, which is weird.   After update block can be turned back on and it works normally.

To unlbock, created a group with filtering off, then added LG TV to the unfiltered group, removed from default group.  Proceeded with Netflix update.  Logged in.  Afterward, unselected unfiltered group, back to default group.

Note: Found this on github, curious if it still works.   https://github.com/wisq/lgtv-sdp",pihole,1648315128.0
6226,comment,1,i2aph06,,"I’ve experienced this as well.

I’m okay with it.",pihole,1648375062.0
6227,post,5,torfyo,Android acting weird in combination with pihole,"Hi everyone,

After moving houses I have not used my pihole for a year because I was too lazy :)Since the router/modem provided by my ISP does not allow me to set a static IP I am configuring all my devices to use the pihole DNS.Apple devices and my smart tv work perfectly but my android phone blocking certain websites like [theverge.com](https://theverge.com).The error in the browser is ERR\_ADDRESS\_UNREACHABLE.The exact same website work fine on all other devices that are using the pihole.I checked all blocked requests for this specific client and there is nothing wrongly being blocked. Did I do something wrong or is this an android thing?",pihole,1648305163.0
6228,comment,2,i277vl8,,Have you tried a different browser on Android? Might just be a browser thing,pihole,1648307637.0
6229,comment,1,i27eoa3,,I tried using firefox but that browser has the same issue.,pihole,1648310649.0
6230,comment,1,i27ie0o,,"Check to see if there’s an OS wide setting for DNS over HTTPS and disable it. By default PiHole doesn’t block DoH domains, but you might have blocklists that have some of those domains listed.",pihole,1648312262.0
6231,comment,1,i28vnfl,,"I could not find any on my OS (android 11), but there is one in chrome.
However disabling it did not change anything :/
Disabling the pihole in the pihole admin interface for a minute also does not fix the problem which kind of confirms that it is an android issue and not a pihole issue.",pihole,1648334121.0
6232,comment,1,i297gwi,,"I'm not aware of a singular certified Android distribution that sets a custom Android Private DNS endpoint.

Chrome has had Private DNS enabled by default for everyone for quite some time now, but this feature is opportunistic, and Johnny Enduser is almost certainly never going to have an APDNS compliant nameserver within their own network.

The TL;DR: here is that this will never be the problem unless a user set a custom private DNS endpoint in Android or Chrome/Chromium manually.",pihole,1648339791.0
6233,comment,1,i28yvg9,,">However disabling it did not change anything

I had a similar issue with a McDonalds app.  
The resolver that I set in Pihole returned a different IP than my ISP, so it worked with ISP but not with Pihole regardless of blocklists.  
Just in case, check *what* is returned in the query log.",pihole,1648335646.0
6234,post,0,ton3v0,Samsung Galaxy S21 not showing anything Samsung related in logs.,"Only showing google / Android related stuff.

Is it bypassing my pihole in some sort of way ?",pihole,1648296302.0
6235,comment,1,i27hqy2,,"What Samsung related anything do you expect?

If Pi-hole shows Google and Android related domains, it is likely the device is not bypassing Pi-hole.",pihole,1648311984.0
6236,comment,1,i3dvda2,,"ok thanks.
I just though that a new samsung s21 was filled with stuff that needed to phone home to samsung.",pihole,1649097254.0
6237,post,0,tomday,Docker version gives me a variety of problems,"I am completly noob with this docker image and i had quite a few problems installing it via portainer. I run a OpenMediaVault home server with docker and portainer. I have 3 containers running: Plex, jDownloader and qBitorrent.

https://preview.redd.it/9qfxt4rtopp81.jpg?width=1650&format=pjpg&auto=webp&s=76a8c0ba8a7d6a5c3d195f7bc09cae3277852158

And I wanted to add the pihole docker but in the installation process i had a lot of error until i managed to install it. This is my docker compose code that finally worked. **I had to change the 53 TCP/UDP port to 54 because it said that the 53 port was already in use.**

     services:
      pihole:
        container_name: pihole
        image: pihole/pihole:latest
        # For DHCP it is recommended to remove these ports and instead add: network_mode: ""host""
        ports:
          - ""54:54/tcp""
          - ""54:54/udp""
          - ""67:67/udp"" # Only required if you are using Pi-hole as your DHCP server
          - ""3333:80/tcp""
        environment:
          TZ: 'Europe/Madrid'
          WEBPASSWORD: 'MYPASSWORD'
        # Volumes store your data between container upgrades
        volumes:
          - '/home/pi/Docker/pihole/etc-pihole:/etc/pihole'
          - '/home/pi/Docker/pihole/etc-dnsmasq.d:/etc/dnsmasq.d'   
        #   https://github.com/pi-hole/docker-pi-hole#note-on-capabilities
        cap_add:
          - NET_ADMIN # Recommended but not required (DHCP needs NET_ADMIN)      
        restart: unless-stopped

And after that, the container was finally deployed. But when I put in my DNS configuration on my devices (iPad, Android TV, android phone...) I lose the internet connection. I am pretty sure that I am doing something wrong. But I Dont know what YET. Can you throw me some ideas?

THANKS

https://preview.redd.it/ladn0ecvmpp81.jpg?width=1002&format=pjpg&auto=webp&s=a968076fb076adfae515991db7fe1ab91cb981ff",pihole,1648293397.0
6238,comment,2,i26l15h,,"Pretty sure your problem is port 53. Devices expect DNS to be on port 53 and nothing else (maybe you can change it per device, idk).

What you need to do is figure out what is using port 53 on the host and either turn it off or move it so that Pihole can use that port to serve DNS requests.",pihole,1648295448.0
6239,comment,1,i26lzuj,,It sounds good. How could I do it? How do I check that?,pihole,1648296127.0
6240,comment,1,i26nogq,,"Unfortunately, I don't know anything about OMV so I can't help on that front. Google probably has an answer though.",pihole,1648297247.0
6241,comment,1,i275kpi,,"YES! That was the solution. I just had to follow this tutorial and reinstal from scratch the docker. 

[https://www.linuxuprising.com/2020/07/ubuntu-how-to-free-up-port-53-used-by.html](https://www.linuxuprising.com/2020/07/ubuntu-how-to-free-up-port-53-used-by.html)

Easy peasy",pihole,1648306610.0
6242,post,4,tom3db,Pihole 5.9 on Ubuntu 21.10. Temporary Disable not working.,I hit Disable for 10 minutes but it's still blocking ads. I click on a googleadservices link and get an 'unable to connect' error. How to fix this?,pihole,1648292235.0
6243,comment,1,i27dqm1,,">it's still blocking ads.

Do you see these domains blocked in the dnsmasq log at /var/log/pihole.log while Pi-hole is disabled?  Do the following to check:

`nslookup` `googleadservices.com` `127.0.0.1`

`pihole disable 2m`

Wait about 10 seconds

`nslookup` `googleadservices.com` `127.0.0.1`

`grep googleadservices.com /var/log/pihole.log | tail -n10`",pihole,1648310240.0
6244,comment,1,i2bcpzw,,"Works on my impish install, usually I have to refresh the browser",pihole,1648390329.0
6245,comment,1,i2fbgcu,,Refreshing the browser worked. Thanks!,pihole,1648466687.0
6246,post,157,tolq3g,FYI; It seems that the Reddit app is responsible for api2.branch.io,"So what happened lately was I discovered two abnormal behaviours:

1. My phone drains the battery a lot, and was warm to touch (to the point like I am playing heavy games) when I am just watching youtube and browsing Reddit.
2. Random spikes, or waves of queries from my phone, for api2.branch.io, which was blocked.

After some investigation, I found out the behaviour was related to the reddit mobile app. It decided to query api2.branch.io once every 2 seconds, maybe it's the TTL for pihole blocking. I tried to stop the behaviour, as it was described as ""hybrid tracking/telemetry"" from my little research. 

After unsuccessful blocking by pihole, I tried to tell pihole to respond with no data, null IP, my pihole's IP, 127.0.0.1, my router's IP. None of which stopped the behaviour. 

I have to resort to using my router's parent control to block api2.branch.io. That seems to silently drop the DNS queries.

Until I know exactly what api2.branch.io does, or Reddit stop using it, or pihole have a new blocking mode to silently drop blocked queries, I have to use my router's parent control to block api2.branch.io.

Anyone has seen similar behaviours? Or have whitelisted it? If so what's the reason for whitelisting it?

Edit: I just have a thought, given that its used as a tracking service (thanks u/rikquest for that info), would it be related to the new online status thing? The green dot that shows up on the bottom-right of your avatar when you are online. I have disabled it, but maybe reddit programmers are stupid that they forgot to add a function to not ping the domain, just make it invisible. Or its intended to get users online habbit? It's appearance seems to match when the function was rolled out.

Edit: Thanks u/laplongejr for finding a [working workaround](https://www.reddit.com/r/pihole/comments/tolq3g/fyi_it_seems_that_the_reddit_app_is_responsible/i26yeqs?context=3)",pihole,1648290569.0
6247,comment,52,i26k5cn,,"[api2.branch.io](https://api2.branch.io) is a tracking pixel from what I can work out

[https://confection.io/pixels/api2-branch-io/](https://confection.io/pixels/api2-branch-io/)",pihole,1648294811.0
6248,comment,17,i26j608,,Just looked in pihole and I have a load of entries for [api2.branch.io](https://api2.branch.io) but pihole is blocking them (Gravity). Requests every 2 seconds with the Reddit AP open.,pihole,1648294085.0
6249,comment,83,i26tpcc,,*Laughs in* r/apolloapp,pihole,1648300818.0
6250,comment,6,i26ootd,,"I turned off background processing for most apps including Reddit, but my pihole server has no recorded queries to api2. Maybe it’s only something they try in the background?

It turns out you don’t need background processing in hardly any apps. I’ve been running this way for a few years now and my battery life is happier for it, and so is my privacy.",pihole,1648297887.0
6251,comment,50,i26vzsi,,"Step 1: Delete Reddit App

Step 2: Download r/apolloapp 

Step 3: Profit",pihole,1648302056.0
6252,comment,5,i26gvrz,,Funny as you just post this and i am just searching for it.  I just had to do a reboot on my phone for an update and happened to just notice this as well.  Keep getting multiple pings to this domain nonstop. Still trying to figure out exactly what it is too.,pihole,1648292285.0
6253,comment,3,i291k1q,,Omg! I have been trying to track this down and even started a thread on the damn branch.io. is it confirmed to be from Reddit App?,pihole,1648336901.0
6254,comment,8,i26yeqs,,">It decided to query api2.branch.io once every 2 seconds, maybe it's the TTL for pihole blocking.

I increased TTL, see no difference  
[EDIT] Forget my bad faith, IT WORKED!!![/EDIT]  

1) Go to /etc/dnsmasq.d and create a new file  
2) host-record=api2.branch.io,0.0.0.0,::,120  
3) Save the file, run ""pihole restartdns""  
4) Go in pihole, WHITELIST api2.branch.io (Use the comment to remind you it's blacklisted in the dnsmasq files)  

From now, pihole's gravity will allow the domain, and dnsmasq will answer a NULL address with a 120s TTL  
Con 1 : you lose group-based whitelisting  
Con 2 : can't send a NXDOMAIN  
Con 3 : *pihole misinterprets the answer as ""OK (cache)""*  

Is somebody here knowledgable enough with Pihole's code base? When Pihole receives an EXTERNAL 0.0.0.0, Pihole is able to detect it as blocked, but somehow it is not detected when from dnsmasq itself?  

[EDIT]Brb, going to set it to 30mins (1600)",pihole,1648303273.0
6255,comment,3,i26h1c2,,"After your post I went to check it, and apparently my phone did the same. It's not really draining and not warm either but since yesterday 16.30 CET I got 12k blocked queries for api2.branch.io, and that's only from my phone because I'm the only one in this house using reddit.",pihole,1648292413.0
6256,comment,3,i26v4w6,,"Don’t use the reddit app, there are way better alternatives (Apollo on iOS, not sure about Android)",pihole,1648301604.0
6257,comment,2,i26ktq2,,"I seem to get api.segment.io for Reddit app.

How are you logged into Reddit, did you sign up directly or authenticate via Google or Facebook or something?",pihole,1648295302.0
6258,comment,2,i26qi50,,Interesting. I’ve been [having the same](https://imgur.com/a/QXrV3h6) issue for the last few days. It always happens between midnight and around 6:30 am for some reason even though I’m not using reddit at those times.,pihole,1648298983.0
6259,comment,2,i26vr5u,,"I noticed the same. I whitelisted this, all the phones in my house had drained 30-50% battery in a single day.",pihole,1648301929.0
6260,comment,2,i28gfhl,,"never used the reddit app. I hate how everything has an app, even websites.

I actually enjoy old.reddit.com more than anything.",pihole,1648327161.0
6261,comment,2,i28xf4c,,[deleted],pihole,1648334952.0
6262,comment,2,i290063,,"Just saw the same thing, lots of queries to that domain from my Android phone. However I haven't opened the Reddit app on it at all today (using Reddit on my computer), and there's nothing that's draining the battery in an unusual way.",pihole,1648336172.0
6263,comment,2,i2jglbm,,"Found the exact same behavior yesterday, my solution was just to move to another Reddit app (Boost). An app that pings the internet every 2 seconds is not an app I want to have installed.",pihole,1648541533.0
6264,comment,2,i4gy9fq,,"I am pretty sure it's the online status dot. Out of the 41k requests my phone has sent, 38k have been from api2.branch.io. But for some reason I only get spammed with requests when I am sleeping. I have no idea how Reddit is able to detect that, but while I'm sleeping I get about 600 api2.branch.io requests per hour.

I uninstalled Reddit for now and I'll see if I still get the requests when I wake up tomorrow.",pihole,1649792595.0
6265,comment,1,i27eb32,,"This really isn't a Pi-hole question.  You are using an app that repeatedly requests a blocked domain.  If you want to fix the underlying cause, find another app for accessing Reddit.",pihole,1648310490.0
6266,comment,1,i26yas5,,"I still use BaconReader, will never ever use new Reddit or the Reddit app, fuck that.",pihole,1648303218.0
6267,comment,1,i27893h,,Download Narwhal like the rest of us.,pihole,1648307805.0
6268,comment,1,i26h64p,,"I have this from my android phone as well, although I have not noticed any side effects on my phone. The requests are blocked.",pihole,1648292520.0
6269,comment,1,i270e1m,,"Have you tried ""Reddit is Fun"" ?On Android?",pihole,1648304230.0
6270,comment,1,i271e6w,,"Interesting. Both my iPhone and Mac air batteries would overheat when using their respective Reddit apps. Using the Brave browser for Reddit stopped the overheating. I do not use Reddit apps anymore. I don’t understand why this was happening but if any of you experience the same problem, switch over to the browser and see if that fixes the problem. I’d love to know if anyone else has had the same issue…",pihole,1648304701.0
6271,comment,1,i27s9mi,,"I just blacklisted branch.io and segment.io as wildcards, updated gravity, and closed/reopened the Reddit app. No issues so far, but now I’m curious about battery usage. Looks like Reddit app is using 35% of my battery.

I hadn’t heard of the Apollo app. I’ll have to check it out.",pihole,1648316462.0
6272,comment,1,i27w8hn,,Stop torturing yourself and start using a proper reddit app. Any 3rd party client is better than official app.,pihole,1648318116.0
6273,comment,1,i5ymhsv,,"Thank you very much for this post. I do recently find my phone heating up regularly but i thought it was the battery ageing. Up until i recently checked my pihole for abnormality as my regular routine, i see this api2.branch.io in my top no. 1 blocked domain and i started searching about it and ending up here.

After reading the suggestions listed here, i realize i can do it in another way and it solved my problem! 

Here is my way:
As I'm using DNSDIST in front of my pihole as a DOT/DOH gateway (to use ""private DNS"" on our Android phones), i simply put a DROP rule in DNSDIST to drop all api2.branch.io request and problem solved! 

In dnsdist.conf:
addAction (""api2.branch.io"", DropAction())


EDIT:
after reading through the discussions again, calming the queries with a NULL answer with long TTL is a better approach:
addAction(""api2.branch.io"", SpoofAction(""0.0.0.0"",{ttl=1600}))",pihole,1650772979.0
6274,comment,1,i63dq10,,I did investigation with Charles proxy to see what data it was sending and to say the least you should make sure to block it as it sends hardware ids and other fingerprinting information to remote servers,pihole,1650862595.0
6275,comment,1,i6b0z0m,,"Just adding to the info/knowledge now stored here in case it helps someone else track things down:

Reddit isn't the only app doing this. We don't use the Reddit app in our household, but I was getting the same every-2-seconds traffic to [api2.branch.io](https://api2.branch.io).

In my case, it was caused by the prayer companion app *Hallow*.",pihole,1651001368.0
6276,comment,1,i6pmzn4,,"I have the same issue, thanks for posting this! Even though the requests were blocked, the app would not stop. The official reddit app is the culprit!",pihole,1651265158.0
6277,comment,1,i73gvul,,"This is a month outdated, but wanted to tell this odd story: I just installed the Pandora app on my phone (I haven't had it in some time), and on first run it was acting like there was no internet connection. I noticed my phone was asking for ""api2.branch.io"" on the pihole. I temporarily white-listed it, then Pandora loaded correctly. Now I've blacklisted that domain again, and Pandora is working fine. So apparently Pandora checks right out of the gate if it can reach it. Found it odd.",pihole,1651536617.0
6278,comment,0,i28awf9,,Been using the reddit is fun app for years,pihole,1648324663.0
6279,comment,44,i26kao1,,"Whats ""tracking pixel""? Those invisible 1x1 PNG image to track your IP?",pihole,1648294921.0
6280,comment,5,i26jed4,,"I believe 2 seconds is the TTL for pihole reply if its from pihole not from upstream, aka blocked/local DNS.",pihole,1648294260.0
6281,comment,1,i3ffkoi,,"Me too, I don't know where they are coming from...",pihole,1649119230.0
6282,comment,13,i28pzsj,,"If you're on Android, Infinity for Reddit is free, open-source, blocks ads...",pihole,1648331469.0
6283,comment,1,i26vxqd,,How do you turn that off? I'm on android and don't see anything like this in the perms.,pihole,1648302026.0
6284,comment,0,i26yr9l,,"Except I dont use iOS. Not only does I dont use it, I hate what apple is doing, like against right to repair and claim to be eco-friendly but doing exactly opposite.",pihole,1648303441.0
6285,comment,1,i26h1v7,,"It was called ""generate deep-links""?",pihole,1648292425.0
6286,comment,1,i29otj6,,"When I opened the reddit app it requested api2.branch.io every 2 seconds. Which is the same as the TTL of pihole reply. I have changed the TTL for pihole reply for api2.branch.io to be half a day. The behaviour seems to stop.

Do you think they are related?",pihole,1648348506.0
6287,comment,2,i26z50v,,"This might be an option, but I have used access control in router level to block api2.branch.io. It apprently also applies to DNS packets. If it works then I would never touch it unless I have to...

Did `dig api2.branch.io` returns the 120s TTL?",pihole,1648303624.0
6288,comment,1,i27uei9,,Screw it. I am setting that to 43200 seconds (half a day).,pihole,1648317347.0
6289,comment,1,i298gli,,">Con 3 : pihole misinterprets the answer as ""OK (cache)"" 


This isn't misinterpreted at all. It's perfectly accurate.",pihole,1648340277.0
6290,comment,1,i2bek9v,,"Good stuff. I might have to use this approach for a domain getting hammered by the ScrabbleGo mobile app, which is sitting at 150k+ blocks currently.",pihole,1648391209.0
6291,comment,1,i4yzyn4,,Thank you for this! I'm running pihole in docker and it seems to have worked perfectly. I currently have 33723 hits to `api2.branch.io` in my 24 hour statistics.,pihole,1650125431.0
6292,comment,4,i26hbfo,,"I am also the only one in my house who use reddit. 8k queries for api2.branch.io in about 1 hour, but it managed to use the CPU for 5 hours, which means 4 hours of CPU background usage. No wonder why the battery was draining like a hole in a bucket.",pihole,1648292640.0
6293,comment,1,i26l4pq,,Directly,pihole,1648295517.0
6294,comment,2,i26rxfu,,"This is [my graph](https://www.reddit.com/user/SodaWithoutSparkles/comments/too1b3/image/), looking back it seems highly reddit related...",pihole,1648299812.0
6295,comment,2,i29p3qf,,"Humm, it seems that its has something to do with reddit, not reddit app.",pihole,1648348655.0
6296,comment,1,i29p13x,,Background activities. I am using MIUI which defaults to analysis the behaviour of apps and limits their background activities. So it only happens when Reddit app is in foreground and some time after its in background.,pihole,1648348617.0
6297,comment,7,i27ihnm,,"I just want to post here if anyone have the same issue. If they were, then that might be related. I am not sure if they are 100% related at the time of posting, but now I am quite sure.",pihole,1648312306.0
6298,comment,1,i2bogek,,I'd prefer to uninstall the official Reddit app than have to uninstall pihole.,pihole,1648395615.0
6299,comment,1,i29p8id,,People reported seeing the same bwhaviour when using 3rd party reddit clients.,pihole,1648348726.0
6300,comment,1,i29p8uc,,People reported seeing the same bwhaviour when using 3rd party reddit clients.,pihole,1648348730.0
6301,comment,31,i26leu0,,Yes!,pihole,1648295718.0
6302,comment,3,i26toqe,,"Isn't there a way to serve a TTL for a specific address record?  
I could change the ttl for all records, but it doesn't seem a good idea  

[EDIT] I changed for now. Having to wait one minute after whitelisting is worth dividing that spamming behemoth by 30. It'll revert itself next time I update, hoping somebody will find a better way at that point.  
!RemindMe 30d  
/etc/dnsmasq.d/01-pihole.conf (the file is overwritten during updates, amazing for a temp fix)  
local-ttl=60  

[EDIT2] Doesn't work, but I found how to make a block-specific TTL, I made it a top comment",pihole,1648300808.0
6303,comment,3,i2v2tsv,,"Thanks for the app recommendation, fixes my pihole issue with [api2.branch.io](https://api2.branch.io) and is much better than the official Reddit app.",pihole,1648742839.0
6304,comment,1,i2bojmj,,"Installed, issue fixed",pihole,1648395654.0
6305,comment,5,i26x43s,,"https://www.asurion.com/connect/tech-tips/conserve-phone-data-by-turning-off-the-background-refresh/

I am on iPhone but this article talks about both platforms.",pihole,1648302626.0
6306,comment,27,i271x02,,"If you are on Android there are plenty of great options. Personally, I am using Sync Dev (Dev because it is currently undergoing a major rewrite), but Joey, Boost, Infinity, and some others are all available.",pihole,1648304947.0
6307,comment,14,i276u0q,,I like [Boost](https://play.google.com/store/apps/details?id=com.rubenmayayo.reddit&gl=US).,pihole,1648307171.0
6308,comment,8,i27juhq,,"if you're still looking for a reddit app, reddit is fun (""RiF is fun"" on the play store) is a great  free app without ads, if you don't want to use premium features like modmail...

i used it for 3 years on the non-premium version without any need for the extra features but paid for it eventually because i wanted to support probably the only app i used on a smartphone that was consistently performing well.

also, darkmode.",pihole,1648312888.0
6309,comment,3,i27bwm7,,Infinity for reddit :),pihole,1648309427.0
6310,comment,3,i27jhp4,,Relay for reddit is a fantastic Android app.,pihole,1648312735.0
6311,comment,6,i270moc,,Like any other phone maker is doing any better…,pihole,1648304342.0
6312,comment,-2,i289xt1,,"lol @ the apple fanboys downvoting you for having valid concerns

edit: *YOUR BOOS MEAN NOTHING, I'VE SEEN WHAT MAKES YOU CHEER!*",pihole,1648324229.0
6313,comment,1,i27woxj,,Bacon Reader.,pihole,1648318316.0
6314,comment,1,i26isfl,,"i did not see anything like that.  It seems to go back to some Amazon Data center,  no report on the IP being used for anything bad.  Looks like it probably is some kind of telemetry like you said.",pihole,1648293800.0
6315,comment,1,i3lscwx,,How do you configure that in pihole?,pihole,1649237245.0
6316,comment,2,i26zya7,,"Pihole sees it, yes, maybe the device doesn't care  
[EDIT] Okay, it seems it finally kicked in and it works for already running devices",pihole,1648304021.0
6317,comment,2,i29a99a,,"Yes and no...  
The answer is a NULL address, yet in this specific setup is considered ""not blocked"" in the query logs and the stats.  
If, however, the same NULL came from upstream, Pihole would treat it as ""Blocked (external, NULL)""   

I guess Pihole doesn't check for a potential ""Blocked (cache)"" situation because of how crazy it sounds.",pihole,1648341170.0
6318,comment,1,i2bg5rp,,"150k+ blocks... per day?  
A 24/24 device sending every 2 seconds would cause max 43200 queries.  
Assuming IPV6 as well, that would still not reach 100k.  

It's possible that the app doesn't care about TTL then...",pihole,1648391956.0
6319,comment,1,i5260ug,,"Happy to learn it works with everybody!

Weirdly, after using rif instead of the official app, I still see queries for api2. So I'm not sure that the app was the real  culprit...",pihole,1650183729.0
6320,comment,1,i742cq1,,Can u please tell me how n where did u edit that dnsmasq.d? I'm also in docker (n using portainer). Don't know exactly how to do it. Can't find that dnsmasq.d from /etc.,pihole,1651546246.0
6321,comment,2,i26hvdz,,"This is actually what my battery usage looks like: https://imgur.com/a/DxSDR1B
Doesn't look too great, i'm going to try and force-stop the reddit app to see if it stops....",pihole,1648293085.0
6322,comment,1,i2bckka,,"It's switched to api2.branch today for me, coincides with the latest Reddit app update on Android.",pihole,1648390254.0
6323,comment,1,i26s4mw,,"Hmmm. For me, it always happens when I am sleeping and definately not using Reddit. Maybe mine is coming from a different source than yours.",pihole,1648299925.0
6324,comment,1,i2af6il,,[deleted],pihole,1648366124.0
6325,comment,5,i280p7a,,"Appreciate you posting here, I've had 10k queries for that domain in the last two days and this post saved me all the time figuring out the cause myself.",pihole,1648320074.0
6326,comment,5,i285ftg,,"Your post helped multiple people, including myself. 
It’s absolutely related to pi-hole; I’m glad this didn’t end up like other questions on here where the only reply is a link to the documentation or an unsolved forum post instead of actual guidance.",pihole,1648322221.0
6327,comment,1,i3fft0j,,"Thank you, this FYI was very helpful. I was wondering for the last few weeks where this was coming from.",pihole,1649119329.0
6328,comment,1,i2btp6w,,"I have never used the Reddit app, so I can't speak to that.  On IOS, I use Apollo and that is a great bit of software.",pihole,1648397846.0
6329,comment,2,i29v6dh,,An iPad running Apollo had 12 queries in 2 days.,pihole,1648351993.0
6330,comment,16,i26qb6n,,"https://help.branch.io/developers-hub/docs/deep-linking-api

It seems to be related...",pihole,1648298872.0
6331,comment,0,i26yh1t,,"Just create another file in the same directory, like `69-localttl.conf`, then put that line there.

Also, does you have access to router admin page? Using access control on router level can drop the DNS packets directly. Maybe better than having to mess with the local ttl",pihole,1648303304.0
6332,comment,2,i2wl5md,,Just did the same. I haven't logged into PiHole for awhile and look today to see my phone clogging DNS queries with [api2.branch.io](https://api2.branch.io).,pihole,1648763701.0
6333,comment,6,i2851vs,,[deleted],pihole,1648322046.0
6334,comment,4,i27ae3f,,I'm up voting your comment from Boost as well 👍,pihole,1648308756.0
6335,comment,2,i27w6mx,,Been using Boost for years. I love it,pihole,1648318093.0
6336,comment,2,i2jgqd5,,">Infinity for Reddit

Boost was also my solution yesterday. Up up you go.",pihole,1648541659.0
6337,comment,3,i298shq,,">also, darkmode.

Why is this listed specifically?

Reddit has dark mode, both system and AMOLED, and I honestly can't remember it ever not having this option.",pihole,1648340439.0
6338,comment,0,i2a6b0s,,Joining in for the free downvotes,pihole,1648359079.0
6339,comment,2,i26izy5,,"https://maltiverse.com/hostname/api2.branch.io

It said ""hybrid analysis""

And it seems to generate deeplinks, aka clicking on a url and it links to a page in a app, not just open the app.",pihole,1648293959.0
6340,comment,1,i3ltriv,,Read the last edit of the main post,pihole,1649238418.0
6341,comment,1,i271l42,,LPT: turn wifi off and on to purge android DNS cache.,pihole,1648304793.0
6342,comment,1,i2bh1vx,,"I don't know for sure if that is per day. I'm looking at ""Top Blocked Domains"". I  know the app used to not be so aggressive but they changed something within the last month or so which caused the huge spike in queries.

I suppose it couldn't hurt to try letting dnsmasq handle it, and see how it goes.

ETA: Looking at the logs more closely, the app was sending at least 6 queries per second, often more. WTF?!?  On the plus side, adding the file for a NULL response from dnsmasq seems to be working well.",pihole,1648392365.0
6343,comment,1,i5lw5t9,,"To be honest, me too. I'm using infinity now and it seems that something else is doing all these requests.",pihole,1650543727.0
6344,comment,1,i745l8j,,"I have a volume on my host, so I can directly edit it. So, look up where your volume is mounted on your machine and you'll be able to edit the file.",pihole,1651547804.0
6345,comment,2,i2bfbd3,,So now 100% related.,pihole,1648391562.0
6346,comment,1,i26sazc,,Strange... Is yours api2.branch.io too?,pihole,1648300027.0
6347,comment,1,i2vhu6a,,"I have the same thing happening, during 12pm and 9am it was pounding 20k+ requests using 30% batterie on my phone. My [graph](https://imgur.com/a/7aGUrag)",pihole,1648748538.0
6348,comment,1,i2af81y,,Restarting kills all background process until they are started again.,pihole,1648366162.0
6349,comment,1,i26ywq7,,"Putting the line elsewhere is a wrong idea because a GLOBAL increase is a bad idea, it's temporary (and didn't even work anyway)  
My ISP router doesn't allow dns-level filtering directly  

I'll try a permanent host-record and see what it does",pihole,1648303514.0
6350,comment,1,i2mg724,,"To the moon, Alice. To the moon.",pihole,1648591106.0
6351,comment,1,i2aolei,,"lol, i've used the official app for about a day and thought it was so shitty tha i should just switch to another app.

and then i just assumed there was no darkmode.",pihole,1648374329.0
6352,comment,3,i2b16vz,,heck yeah brüther,pihole,1648384083.0
6353,comment,1,i26j53c,,Yeah that checks out. Weird..,pihole,1648294065.0
6354,comment,1,i2bhhoo,,">	I’m looking at “Top Blocked Domains”.

If this is from the dashboard, it's for the most recent 24 hours.",pihole,1648392563.0
6355,comment,1,i75ev09,,Okay got it. Thanks.,pihole,1651579866.0
6356,comment,1,i2bnn8w,,Have you posted in /r/redditmobile,pihole,1648395264.0
6357,comment,1,i3tf32p,,"And it's gone again, back to api.segment.io

Is this /r/place related?",pihole,1649367415.0
6358,comment,1,i26sd02,,[yep.](https://imgur.com/a/mSV94Yk),pihole,1648300058.0
6359,comment,0,i26z9uu,,"For changes to survive the update it have to be in a separate file.

Fk reddit for doing stupid things.",pihole,1648303691.0
6360,comment,1,i2bw98y,,Thanks. I feel like I should have known that already.,pihole,1648398930.0
6361,comment,1,i2byfy6,,Nah. Maybe you post it?,pihole,1648399853.0
6362,comment,1,i2fg12g,,"Update:
You were right, it was Reddit. I uninstalled Reddit from my phone and it stopped happening.",pihole,1648469637.0
6363,comment,1,i270rsu,,"Yeah, but increasing ttl globally for one domain is clearly not something that should survive the update, that was on purpose",pihole,1648304410.0
6364,comment,1,i2exiiz,,"the auto moderator just removes my posts, I've switched to infinity for reddit",pihole,1648454949.0
6365,comment,1,i271b2f,,See my latest edit. Someone have found a workaround.,pihole,1648304661.0
6366,comment,1,i272jlp,,"Yeah, it's mine... :P",pihole,1648305238.0
6367,comment,1,i27i1gq,,Oops...,pihole,1648312111.0
6368,post,1,toheht,255 Hourly PTR Reverse Lookups?,"What are these green spikes and why do they happen exactly once every hour?

https://preview.redd.it/8wy2fvwaunp81.png?width=999&format=png&auto=webp&s=c60b718e78740fe86532e8c8609ff7ebfc6e13bd

https://preview.redd.it/rmzypdpbunp81.png?width=984&format=png&auto=webp&s=6938a408a59b8c1f4d66aa42db68b80e41180d31",pihole,1648271063.0
6369,comment,2,i25ssj7,,It would be useful to know what the device is? A samsung phone? A HP laptop?,pihole,1648271894.0
6370,comment,1,i278b3i,,"The client at 10.21.21.1 is asking ""what is the name of the client at IP 10.21.21.254?""

Pi-hole does not have the answer and returns NXDOMAIN. 

You can map that IP to a name with Local DNS records in Pi-hole. Then Pi-hole will be able to answer the request. 

    10.21.21.254 some-device-name",pihole,1648307830.0
6371,comment,1,i25t67l,,"Not sure, I'm a bit of a novice. I think this is the pi-hole itself. I only have 2 clients showing up, my router and [10.21.21.1](https://10.21.21.1). I ssh'd into the pi and did ""ip route"" which gives me [this result.](https://i.imgur.com/wlKfvV7.png) I'm not sure what br-a459492806ab is, but it's definitely coming from my pi.",pihole,1648272162.0
6372,comment,1,i279h0e,,Thanks. I guess I need to just figure out why the client is looking up names for a bunch of empty IP’s.,pihole,1648308345.0
6373,comment,1,i27a0id,,Another issue came up in this same thread about my ongoing battle with trying to enable DHCP in a docker container. I created a new thread. Could you provide some insight? https://reddit.com/r/pihole/comments/tosry4/can_i_install_pihole_outside_of_a_docker/,pihole,1648308587.0
6374,comment,0,i25tn0c,,"It might be pihole populating its network table. Normal behaviour if so.

BTW [this thread](https://discourse.pi-hole.net/t/why-do-i-only-see-my-routers-ip-address-instead-of-individual-devices-in-the-top-clients-section-and-query-log/3653?u=sodawithoutsparkles) should help if you want clients showing up separately instead of router as a single client.

Its also strange for the pi to show the 10.21.21.1 address instead of 127.0.0.1 or localhost. Maybe worth investagating. You could generate a debug log by `pihole -d` and upload when promted, post the link here and let the devs take a look.",pihole,1648272498.0
6375,comment,1,i27ej6a,,"Do you have a Brother printer?  That may be the device, based on the ID string shown in one of your screenshots?",pihole,1648310588.0
6376,comment,1,i25whgt,,"I would love to make my pi-hole the DHCP server and have tried many many times, but it's far too complicated because I am running pi-hole inside of a docker container. From [this thread](https://community.getumbrel.com/t/pi-hole-missing-required-capability-net-admin/3308/10) it seems like the problem I'm running into is caused by my network not being able to forward traffic to the internal network of the docker container. I'm not currently well versed enough to set it up without getting overwhelmed and lost.",pihole,1648274653.0
6377,comment,1,i27f49m,,"Nope, no printers in this apartment. Are you referring to [this screenshot?](https://i.imgur.com/wlKfvV7.png)",pihole,1648310838.0
6378,comment,1,i25yzyo,,Is it absolutely necessary to use docker?,pihole,1648276640.0
6379,comment,1,i27hx5f,,"Yes.

Take a look in your router webpage or interface and see what client is at that IP.

You can also look in the network table in the Pi-hole web admin (under Tools) and this may shed some light on that client.  We use a vendor database to match the MAC ID to a known vendor.",pihole,1648312059.0
6380,comment,1,i25z510,,"Yes, I am using the Umbrel operating system for a Bitcoin Lighting node. It comes with the ability to install ""apps"" in docker containers, pi-hole is one of those ""apps."" I did just get my hands on 2 pi model 3's today though... Maybe I'll install pi-hole on one of those and remove pi-hole from my Umbrel install.",pihole,1648276751.0
6381,post,1,toh1ca,lacklustre performance lately,I was wondering if anyone else has been having issues with their piholes not really doing anything? Mine doesn't seem to be doing anything as of late. I was wondering if there was any issues with the recent update?,pihole,1648269622.0
6382,comment,3,i262arc,,"I've had trouble too, but no idea if it's the current update or not, because the installs were in within the last few months trying out a new raspberry pi.  Internet speeds crumbled and it gave my router lots of issues... so, kinda hard to figure out if it was the router not liking having the pi-hole, or the pi-hole not liking the router.",pihole,1648279459.0
6383,comment,3,i278o7y,,">	Mine doesn’t seem to be doing anything as of late

What is the specific problem? Not receiving DNS queries, not blocking queries as expected, cannot resolve unblocked queries, etc?

Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1648307992.0
6384,comment,2,i2604mi,,I switched over to NextDNS until the next pihole update. My pihole was getting slow and logs could not be cleared.,pihole,1648277569.0
6385,comment,1,i278wao,,">	Internet speeds crumbled

That is not due to Pi-hole. Only your DNS traffic is routed to Pi-hole; the data flow is from client to router to modem to internet.",pihole,1648308092.0
6386,post,2,to9v48,IPv6 Turned off in /unbound.conf.d/dietpi.conf but still getting duplicate a(ip4) and aaaa(ip6) requests.,"**Edited** */unbound.conf.d/dietpi.conf*

access-control: ::/0 deny  
access-control: ::1/128 deny  
access-control: fd00::/8 deny  
access-control: fe80::/10 deny  
do-ip6: no

Also ipv6 is disabled under dietpi-config

pi log shows each dns request has a duplicate A(ip4) type and AAAA(ip6) type requests:

    2022-03-24 18:29:41	AAAA	chrome.google.com	192.168.1.8	OK, answered by localhost#5335	CNAME (0.8ms)	
    2022-03-24 18:29:41	A	chrome.google.com	192.168.1.8	OK, answered by localhost#5335	CNAME (0.9ms)	
    2022-03-24 18:29:38	AAAA	www.youtube.com	192.168.1.8	OK, answered by localhost#5335	CNAME (0.7ms)	
    2022-03-24 18:29:38	A	www.youtube.com	192.168.1.8	OK, answered by localhost#5335	CNAME (0.7ms)",pihole,1648255632.0
6387,comment,2,i24zpe6,,"Any changes you make in unbound won't carry forward to Pi-hole. Pi-hole sees the queries first, then forwards as needed to unbound. 

When either an A or AAAA query is forwarded to unbound, it can be fully resolved over the IPv4 path to the DNS server (unbound).  Likewise, unbound can resolve both of these queries using its IPv4 path to the authoritative nameservers.

This allows both A and AAAA queries to be resolved regardless of whether you are using an IPv6 path to the nameservers.",pihole,1648256010.0
6388,comment,1,i27zfnh,,"dnsmasq made it very difficult to change this behavior a few years ago, If your really hell bent on disabling IPv6 results I would suggest reading their mailing list its in there somewhere Good Luck

[https://lists.thekelleys.org.uk/pipermail/dnsmasq-discuss/](https://lists.thekelleys.org.uk/pipermail/dnsmasq-discuss/)",pihole,1648319516.0
6389,comment,1,i250ivm,,Is there a way I can stop every dns request being duplicate a and aaaa?,pihole,1648256405.0
6390,comment,1,i28la1j,,"I'd be ok with just being able to stop listening on ipv6 ports ::1 22,53,80

Seems like it should be possible by editing some config files somewhere?🤷",pihole,1648329326.0
6391,comment,2,i251rwk,,That's a client behavior. You can configure Pi-hole to not process AAAA requests. Why do you object to both types of queries?  Are you IPv4 only end to end?,pihole,1648257008.0
6392,comment,1,i252zxb,,"ISP gives both ip4 and ip6.

Only ipv4 **or** ipv6 is needed.

Every request should not have to be both ipv4 and ipv6.

Just seems like an inefficient and unnecessary waste of time and log space to do both🤷

I have [127.0.0.1#5335](https://127.0.0.1#5335) in the pihole ipv4 upstream for unbound. No ipv6 upstreams.

    Mar 25 19:07:55 dnsmasq[1342]: query[AAAA] chrome.google.com from 192.168.1.8
    Mar 25 19:07:55 dnsmasq[1342]: forwarded chrome.google.com to 127.0.0.1#5335",pihole,1648257589.0
6393,comment,3,i25b3kh,,"As I noted, you won't easily change client behavior. If you want to block all AAAA requests in Pi-hole, and solely use A queries to get domain names, then this regex in Pi-hole will do it:

`.*;querytype=!A`

I would not do this, and just let the A and AAAA queries flow, but it's your device and your call. 

https://docs.pi-hole.net/regex/pi-hole/",pihole,1648261602.0
6394,comment,1,i25vodw,,"Thanks, I understand now that calling both ip4 & 6 is normal client behavior, just seems redundant.

What do I need to do to stop pihole from listening on ipv6 port ::1#53 ?  
Also dropbear and lighthttpd?",pihole,1648274016.0
6395,comment,1,i278fhz,,Disable IPv6 completely on the Pi.,pihole,1648307884.0
6396,comment,1,i27clx2,,"I did under dietpi-config, still listening after reboot on ::1 ports 22,53, and 80

>tcp         LISTEN       0            1024                         \[::\]:80                         \[::\]:\*           users:((""lighttpd"",pid=434,fd=5))             
tcp         LISTEN       0            32                           \[::\]:53                         \[::\]:\*           users:((""pihole-FTL"",pid=1342,fd=7))          
tcp         LISTEN       0            1000                         \[::\]:22                         \[::\]:\*           users:((""dropbear"",pid=227,fd=5))

""ip a "" shows no ipv6 address assigned",pihole,1648309735.0
6397,comment,1,i27cwor,,"Since this is DietPi, I would inquire with the DietPi developer:

https://github.com/MichaIng/DietPi/issues",pihole,1648309868.0
6398,post,0,to1u46,Rate Limit Exception for only one host,"Hi folks, first time here! I tried searching all over (here, Google, GGD, etc) and came up empty... is there a way to put a single host on exception for the query rate limit? I like the rate limit, except for one host where I'm usually testing stuff.",pihole,1648245283.0
6399,comment,1,i24fdpv,,"We have no option to apply different rate limits to different clients.

However, the global rate limit is applied individually to clients. If client X is rate limited and client Y is not, client Y will continue to have DNS queries resolved.",pihole,1648246591.0
6400,comment,1,i25go0s,,"yeah, that much I realized... guess I'll just configure it to use an external DNS then.",pihole,1648264557.0
6401,post,56,tnxtsz,Pi-hole for Windows-on-ARM,"For all six of you out there still rockin' their Lumia 950's, or anyone else running Windows-on-ARM, here's your ad-blocking DNS server!

[Pi-hole for Windows on ARM (Github.com)](https://github.com/DesktopECHO/Pi-Hole-for-WoA)

[Screenshot: Pi-hole for Windows on ARM on WSL1](https://preview.redd.it/hmsl53rgtlp81.png?width=2426&format=png&auto=webp&s=8fa638386c5e68a658050e0909af531b0e553eb1)

Open to suggestions for the next oddball Pi-hole port... current candidates are:

\- Nintendo Wii (or DS)

\- Timex/Sinclair TS1000

\- HP 9000 PA-RISC Workstation

\- My toaster",pihole,1648238720.0
6402,comment,17,i249jln,,"As you can run Doom on it, may I suggest a pregnancy test kit",pihole,1648244039.0
6403,comment,3,i24c3kl,,"Are people running Windows 11 on the Lumia 950? Wow, I know they already got 10 running, but that was fast!",pihole,1648245150.0
6404,comment,5,i240xrx,,No idea what is next for ya - but stuff like this reminds me of over 20 years ago and my friend running a  PC emulator on a Mac that was itself an emulator running on an Amiga.. just to do it ;-)  Good stuff though haha I'm not one of those 6 users so I can't test it.,pihole,1648240439.0
6405,comment,11,i24g5hq,,"I love this idea, but sadly the CPU and screen had to be replaced on the pregnancy tester before it could play Doom.",pihole,1648246932.0
6406,comment,6,i24fup6,,"Indeed...  Looks like this whole Windows-on-ARM thing might take off after 10 years of false starts!  

[https://www.xda-developers.com/windows-11-on-lumia-950-xl-raspberry-pi-4/](https://www.xda-developers.com/windows-11-on-lumia-950-xl-raspberry-pi-4/)",pihole,1648246799.0
6407,comment,3,i24h1fv,,"This was definitely ""For the LulZ"" too, but perhaps slightly more useful as other twisted minds out there have asked for this since putting together PH4WSL1.CMD in 2020.",pihole,1648247324.0
6408,post,4,tnuvid,"pihole provides domain search for dhcp clients only, not for static ip clients","Hi all,

It appears that dnsmasq only supports providing domain search for it's dhcp clients, and not for static ip dns clients.

Normally, you add static ip clients to /etc/hosts, then dnsmasq will provide the ip to those host names, but only to dhcp clients.  I've been reading man pages and how-to's for dnsmasq, and haven't found anything about provide domain search capabilities to static ip clients.

Has anyone found a fix for this?  I'm hoping there is an easy one.  It would be nice to add static ip names within the pihole GUI itself, maybe in a future version?

Thanks",pihole,1648232156.0
6409,comment,4,i24qifj,,"> but only to dhcp clients

Incorrect.

Unless you setup groups with different settings, Dnsmasq does not differentiate between DHCP clients or static clients.

Never has.

Or, you are confusing hostname resolution with local domain resolution and you have misconducted the static clients.

Either way, PiHole doesn't serve clients differently like you suggest, by default.",pihole,1648251604.0
6410,comment,2,i23zmll,,Are static  clients configured to use Pihole as DNS?,pihole,1648239901.0
6411,comment,1,i4ernr3,,"Apologies, I got your issue wrong! I figured static clients don't get served, yet you need to these to be settled by the others. I did this for a few outside IPs by entering them into „local DNS records"" and it fills in true to form.  
[domain search uk](https://websouls.co.uk/domain-registration)",pihole,1649758937.0
6412,comment,1,i273wb4,,"Thanks, I guess I am confusing hostname resolution with local domain resolution.  You are the first to even mention that.

I still have no idea how to fix it though, except to manually configure every single static ip machine with domain search.  I was hoping there is an easier way (the whole point of this thread), but so far, I've found nothing.",pihole,1648305860.0
6413,comment,0,i2761bd,,"I asked for help, but instead of being helpful, you call me names, i'm ""incorrect"" ""confused"" and wrong.  And 2 people upvoted you.  Great.  Just great.

You appear to understand the problem I'm trying to solve, but offered no help, just criticism.  Thanks alot.",pihole,1648306817.0
6414,comment,1,i24lia3,,"Hi, yes, of course, I have the static IP clients using pihole as their only DNS servers.

I also added ip host info to /etc/hosts on the pihole server.

I also created a /etc/dnsmasq.d/03-pihole-static.conf file and added entries, according to the man pages.

I even considered adding CNAME and DNS records in the pihole interface, but that's not what those are for.

Oh well, I was hoping to find a way to get dnsmasq to provide the same domain search abilities for static ip's the same way it provides to dhcp-clients, but doesn't look like that is supported.

I guess I can install unbound on pihole, and have pihole get all dns from unbound.  Most people install unbound for privacy concerns, not using their ISP's dns servers.  Since my router keeps our home network permanently connected to a major vpn service, I'm fine with using the internal vpn dns server.  All I need unbound for is domain searching the local network.",pihole,1648249317.0
6415,comment,2,i2772qd,,">	instead of being helpful, you call me names

Unless something has been edited out of the reply, this is not the case.",pihole,1648307279.0
6416,comment,1,i24qqaa,,"Sorry, I did misunderstand your issue! I thought static clients do not get served, but you want to these to be resolved by the others.
I did this for some external IPs  by entering them into „local DNS records“ and it works as expected.",pihole,1648251706.0
6417,post,55,tntpqs,FYI; latest docker version seems to have a bug with cap=net_admin,"After updating my docker yesterday on my Ubuntu host I noticed that pihole was no longer starting. I use it for DHCP as well as DNS so it needs cap=net_admin to function properly without running as root/privileged mode.

A workaround until docker fixes it is to change the ENV variable DNSMASQ_USER to root",pihole,1648230761.0
6418,comment,2,i23sczw,,Out of curiosity what kernel ver are you running.,pihole,1648236962.0
6419,comment,1,i23vw6q,,I started getting this issue after updating to rpi linux kernel 5.15.30 even without cap=net_admin. Your workaround worked for me.,pihole,1648238395.0
6420,comment,0,i2406p4,,">	A workaround until docker fixes it is to change the ENV variable DNSMASQ_USER to root

Note that running as root reduces security.",pihole,1648240131.0
6421,comment,1,i3fofpu,,I've changed my DNSMAS\_USER in environments to root on my synology box and i'm still getting that error in the pi-hole admin panel. Any ideas on how to resolve it?,pihole,1649123095.0
6422,comment,0,i24utp8,,Bzz bzz.,pihole,1648253648.0
6423,comment,2,i23zwju,,5.4.0-105 with docker 20.10.14,pihole,1648240014.0
6424,comment,1,i2490eq,,Yeah I don't love it but with net_admin non functional this is currently the only way to restore service other than downgrading to the previous docker release.,pihole,1648243808.0
6425,post,2,tnr51n,Double name resolution - is that what's happening?,"I'm hosting my own DNS on a PiHole.  Fantastic!

So, the DHCP on my wifi solution (TP-Link Deco x68 / W7200) hands out the LAN-based PiHole DNS as primary and OpenDNS as secondary.  Very good.

The  Deco router itself has its own ipv4 config and doesn't let me point to a LAN IP for DNS (???) so I point it to OpenDNS so I can still do some filtering (almost  entirely 10's of thousands of requests to  [ast.safethings.avira.com](https://ast.safethings.avira.com), a TP-Link subscription service I don't subscribe to.....stop the nonsense, TP-LINK !!!).

Anyway,  in this config, from reviewing logs, it would appear that all my LAN  traffic (minus the Deco itself) first requests DNS resolution from the  local PiHole server, then they go out and do it again directly from Open DNS.

How can I avoid double name resolution, if that is indeed what is happening. Am I wrong? I can query logs on the PiHole and OpenDNS and see the same entries.

In case this is because OpenDNS is the SECONDARY server in DHCP (which I don't think is causing ""spillover"") if I were set DHCP to just the one local DNS server and my Pi fails for any reason, all LAN clients would be stuck.  That seems bad.

Alternately, if I set DHCP to use the AT&T router as second DNS, then is it querying  the WAN router for name resolution that it cannot provide, or just forwarding the already resolved-by-PiHole  lookups directly out to the internet?

Thanks,

Jon",pihole,1648227841.0
6426,comment,1,i2395u0,,"You don't want to use OpenDNS (or any non-pihole device) as a Secondary DNS entry. Most likely what you're seeing is clients querying an address, getting a response from PiHole, and then querying the secondary because PiHole blocked the query. This results in your blocking not working because clients are using the secondary DNS to bypass the primary (PiHole).

If you can setup another install of PiHole (on another Rpi, in a virtual machine, etc), then using that install as the secondary is the best option to provide some redundancy. If that's not possible, use the PiHole address is the primary DNS and leave the secondary blank. For devices that *require* both fields filled, try entering PiHole's IP in both fields.",pihole,1648229291.0
6427,comment,1,i23kmyl,,"Hi rmn!

I really, really appreciate the response.

So, this isn't a matter of blocking.  PiHole is definitely allowing the traffic per the logs.

My *best guess* is that traffic is going like this:

1) Clients resolve DNS against the PiHole due to OPTIONAL DNS server settings in DHCP scope being set as PiHole/OpenDNS  
2) Next hop - traffic hits the gateway assigned in DHCP,the Deco wifi router.  
Router has it's own DNS settings which can't point to LAN IP for DNS, which is OpenDNS (to filter the TP-Link spammy service)

But, I'll test the theory about OpenDNS getting in the way regardless and drop the optional secondary DNS server from the Wifi scope. Hopefully, clients will fall back to the router primary or secondary DNS if the PiHole fails.  Unclear.

Thanks

Jon",pihole,1648233819.0
6428,post,9,tnq9p3,appsflyer?,"Appsflyer ads seem to be getting through pihole these days. They're particularly pernicious on phones, popping up with full screen ads (I think they're triggered as a subfunction of pressing buttons in apps). It looks like I have a listing for ""[launches.appsflyer.com](https://launches.appsflyer.com)"" in pihole, but these ads have recently started showing up, so I think they've found a different way to bypass adblockers. Anyone figured out a new solution?",pihole,1648226658.0
6429,comment,3,i23c1v9,,"Which apps? 

Try wildcard blacklisting appsflyer.com 

[They have a ton of different addresses](https://otx.alienvault.com/indicator/domain/appsflyer.com)",pihole,1648230421.0
6430,comment,2,i23rm5w,,"I forget which apps call that domain, but I block everything from appsflyer and haven’t had any issues.

Edit: It’s currently not in my logs. Wonder if my wife stopped using apps that call this domain.",pihole,1648236658.0
6431,comment,1,i23hd08,,Is there a link that you can share that has these ads?,pihole,1648232516.0
6432,comment,1,i25q05n,,"Thanks, I'll give this a try",pihole,1648270001.0
6433,comment,2,i23v6xl,,That or she's using Private DNS and bypassing it.,pihole,1648238113.0
6434,comment,1,i25q4mu,,"Thanks, I'm going to try to wildcard block and see if that fixes it.",pihole,1648270081.0
6435,comment,1,i25q3es,,"Nothing in particular, but if you use iOS apps that rely on appsflyer to serve ads, they've seemed to start popping up. Nextplus, Grindr...",pihole,1648270059.0
6436,comment,1,i26f0k4,,"In this case, look for this in the logs too: 

    doh.dns.apple.com

Block it if it is present.",pihole,1648290716.0
6437,comment,1,i2egl8k,,"Thanks, it's not showing up for me. At this point I've put wildcard blocks on appsflyer, applovin, applvn, playablefactory and vungle. I think I might have gotten them all, but we'll see.",pihole,1648442416.0
6438,post,6,tnnmgk,Backup settings if pi fails?,"So my Pi got unplugged and internet stopped working. Too me a while to figure out why some of my devices couldn't connect.

Is there a way to configure my settings so that if the pi gets disconnected, the router can jump back to the default dns settings?",pihole,1648219881.0
6439,comment,10,i22rvp7,,"Running a second Pi with pihole, or running pihole in a VM or container on a different machine as secondary DNS would help here as well. Just setting secondary DNS to external DNS will effectively bypass your pihole though. If one goes down, the other takes over entirely and if they’re both running the queries are split between them.",pihole,1648222615.0
6440,comment,6,i23ctcw,,"Watchdog? Maybe watchdog is what you need?

https://diode.io/raspberry%20pi/running-forever-with-the-raspberry-pi-hardware-watchdog-20202/",pihole,1648230715.0
6441,comment,2,i230zx8,,"I always keep a backup of the SD card so that I could swap the card if I messed up the settings. Tho the backup might be a few days old, it could spin up and respond to queries in less than 5 minutes. 

The router is connected to the same power distributor so that if the pi loss power the router would too.

The best way is to keep a second pi running pi-hole. 

Or you could have a backup pi-hole using a rooted android phone. If anything goes wrong just boot the phone and its good to go. I am looking into this but havent tried that yet.",pihole,1648226135.0
6442,comment,2,i23czdi,,Make a image of the Sd-card as backup.,pihole,1648230781.0
6443,comment,2,i22ocbx,,"That would need to be a feature the router supports. Or set the secondary/tertiary DNS on your router to one of the DNS servers that PiHole forwards requests too. Then if the internet is working but slow, you have an idea where to start looking, as it's the router failing to resolve via PiHole and failing over to the secondary/tertiary DNS server.",pihole,1648221223.0
6444,comment,1,i2719qk,,"Secondary / tertiary dns entry is what you are looking for. You can config it in your router for your whole network or even for each machine in the network adapter settings.

the first entry is your pihole and the second / third is some backup solution like cloudflare, quad9 or whatever you like",pihole,1648304644.0
6445,comment,-9,i22yc29,,"Or just put 1.1.1.1 there for the second one, also when my Pi failed the internet still didn't work even with the backup.",pihole,1648225118.0
6446,comment,1,i2r88wp,,Do you manually make the backups or is there a way to automate this?,pihole,1648669670.0
6447,comment,2,i24q281,,I'd say this is the best solution short of setting up an HA failover (second pi with replicated settings),pihole,1648251394.0
6448,comment,3,i232cws,,"That won't necessarily work. Most routers don't treat the 2 entries as a true primary and secondary. Instead they balance requests between the DNS entries, which is fine for backup purposes but then some of the requests will regularly be bypassing the Pi-hole.",pihole,1648226660.0
6449,comment,1,i2tzmmi,,"I did create a hacky script to do so, but thats kind of janky. Basically just a script to rsync the disks and some protection logic to prevent copying to the wrong disk or try to copy when disk is not mounted.",pihole,1648724452.0
6450,comment,-3,i23kyuy,,Yeah I know.,pihole,1648233951.0
6451,post,11,tnm3pf,DNS Query Limit Pi-hole and unbound,"I set up Pi-hole with unbound on a classic Raspberry Pi.

For unbound I used the config provided by the pihole docs. It works really well, but i started getting dnsmasq warnings soon after, stating that i 'reached the maximum number of DNS queries'.

Digging through the logs a bit, i found that there are only 4 UDP queries causing these warnings:

[0.debian.pool.ntp.org](https://0.debian.pool.ntp.org)

[1.debian.pool.ntp.org](https://1.debian.pool.ntp.org)

[2.debian.pool.ntp.org](https://2.debian.pool.ntp.org)

[3.debian.pool.ntp.org](https://3.debian.pool.ntp.org)

These always come from the localhost (lo/127.0.0.1). They are also labelled either 'query\[A\]' or 'query\[AAAA\]'

I'm not really an expert on Networking, so i dont know what to do here, but it's getting really annoying and also messing up my statistics and logs. All 4 of these are now my 'Top Permitted Domains' with almost 5 times the amount of queries than anything else. 

Can someone help me on this?

Would be much appreciated.",pihole,1648215397.0
6452,comment,2,i22b1w7,,"The Pi OS is contacting time servers.  Is the time/date on your Pi correct for your location?  Use this command from the Pi terminal:

`date`",pihole,1648215694.0
6453,comment,1,i22ofk9,,Ok. I just checked. The Time is off by an hour. Do i need to change it manually and deactivate synchronization? Or why is it failing to set the time correctly?,pihole,1648221258.0
6454,comment,2,i23c38l,,"Btw i just updated the timezone accordingly, but i'm not sure yet if that solves the issue. I'll give an update tomorrow",pihole,1648230435.0
6455,comment,1,i23m228,,[deleted],pihole,1648234379.0
6456,comment,2,i268zhy,,"Here the update as promised:

Setting the timezone didn't solve the issue. Honestly it would have been to easy. 

I got over 1k Warnings over night.",pihole,1648285451.0
6457,comment,1,i24ijtq,,">	packet size has been reduced? Curious as to what’s causing it.

https://discourse.pi-hole.net/t/dnsmasq-warn-reducing-dns-packet-size/51803/30",pihole,1648247998.0
6458,comment,1,i278ze1,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1648308129.0
6459,comment,1,i269u01,,"I will try that setting. Hope it helps.

On another note - I stumbled into another problem which might be related: If i try to update the Adlist i get another error stating the connection is refused. I had to temporarily change my DNS to cloudflare   to update the list and then go back to unbound.

It seems my Pi doesn't handle dns requests from itself too well...",pihole,1648286217.0
6460,comment,1,i26cjmv,,"So i am up to 65k requests to the above mentioned time servers just in the last 5 days. That can hardly be normal.

And it is still going strong after limiting the packet size (and I didn't restart the dns afterwards)

Any other recommendations? 

My Raspi is connected via WiFi, could this be causing that issue?

I sadly can't connect it directly to my router",pihole,1648288623.0
6461,comment,1,i2793s2,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1648308184.0
6462,comment,1,i2aknhi,,"I generated the debug log, but i get an error when uploading:

\[i\] Debug script running in automated mode  
\* Using curl for transmission.  
\* curl failed, contact Pi-hole support for assistance.  
\* Error message: curl: (6) Could not resolve host: tricorder.pi-hole.net  
\[✗\]  There was an error uploading your debug log.  
   \* Please try again or contact the Pi-hole team for assistance.

&#x200B;

Pi cant resolve that host. It is not part of any block list. i just checked that. Do i need to upload it manually",pihole,1648370915.0
6463,comment,1,i2lso42,,"Did the Upload work?

Were you able to see the debug log?

Just let me know if you need me to upload a new log",pihole,1648582560.0
6464,comment,1,i2b2w5q,,"Edit file ***/etc/resolv.conf*** and change the nameserver to something other than 127.0.0.1. 

Use 1.1.1.1, or 9.9.9.9 for now. 

Then generate a debug log, upload it when prompted and post the token URL here.",pihole,1648385130.0
6465,comment,1,i2ccj71,,"Ok it worked. 

Here's the token:  https://tricorder.pi-hole.net/TbqFF6jF/",pihole,1648405686.0
6466,post,1,tnkbpe,Updating lighttpd,"Are there any plans to include a newer version of lighttpd in the next/future/upcoming release of Pi-hole? If not, are there any caveats I should be aware of, or any reason why I should not upgrade the packages by myself?

My use case is as follows: I have obtained a public certificate via Let's Encrypt, deployed it and secured the admin interface etc. - all successfully. However, as soon as I disable port 80 entirely and force lighttpd to listen only on 443, access to the web interface through IPv4 breaks completely; but IPv6 continues to work (I modified the config in external.conf to listen on v6 addresses as well).

Curl tests and packet captures show no server hello being returned over IPv4 in response to the client hello, thus the interface never loads. After many hours troubleshooting and reconfiguring, I eventually stumbled across a solution (quoting verbatim from  [https - Activate SSL with lighttpd on a Raspberry Pi - Stack Overflow](https://stackoverflow.com/questions/68939760/activate-ssl-with-lighttpd-on-a-raspberry-pi)):

"" The TLS config needs to be in the global scope along with 

    server.port = 443

. (In the upcoming lighttpd 1.4.60, this will be more forgiving.) ""

This is in the main lighttpd.conf file which is overwritten by Pi-hole updates, hence back to my original question: are there any plans for an impending update, or can I update it myself? I'd prefer not to have to go through the edit process after every update if it can be avoided.

Thanks in advance, and apologies in advance if this is a stupid question.",pihole,1648209516.0
6467,comment,3,i2248n9,,"Make the port change permanent in the lighttpd external.conf file:

https://discourse.pi-hole.net/t/lighttpd-daemon-wont-start/44985/10",pihole,1648212408.0
6468,comment,1,i2jpe83,,"Please mark this as solved - after some digging, the install script pulls lighttpd from the distribution repository, so that is the root of the problem.",pihole,1648549253.0
6469,comment,1,i228gjt,,"Hi jfb,

Thanks for that, I will be including it in external.conf. I'm not convinced it will solve this problem though: my current issue is not the port, more the required TLS configuration in the main file - HTTPS over IPV4 (with port 80 disabled) does not work for me without those lines included in lighttpd.conf which is overwritten on upgrade.

I presume the build/update process does revisit lighttpd every so often; is this the case and if not can I manually move to a newer version without breaking anything (assuming my config files are correct of course)?

Apologies if I am not explaining very well here.",pihole,1648214498.0
6470,post,1,tni7bt,Don't know how to set static ip in pihole setup,"I don't seem to be able to set a static ip in my router. I have been trying to install pihole but a lot of places tell me that I need to set up a static ip first. Does the pihole setup fully set my ip to static? Would a ddns help? I am very new to this stuff and I am not very experienced. Any help would be appreciated!

&#x200B;

Thanks in advance!",pihole,1648200923.0
6471,comment,1,i21qrcp,,"Do it in the pi itself
https://howchoo.com/pi/configure-static-ip-address-raspberry-pi",pihole,1648203942.0
6472,comment,1,i22iprw,,"I followed these instructions last night and it worked great:

https://www.makeuseof.com/raspberry-pi-set-static-ip/",pihole,1648218957.0
6473,comment,1,i242kxl,,I have tried to follow these instructions but then I could not access the internet.,pihole,1648241110.0
6474,post,0,tncs0n,Forgot Admin password for SSH control,"I'm running PiHole on a Pi Zero W.  In order to update PiHole, I need to SSH into the Pi, but I don't remember the admin password.

&#x200B;

Anything I can do?  Plain English ELI5-style advice preferred, I have very little technical knowledge about command line stuff and Linux code and whatnot",pihole,1648178087.0
6475,comment,1,i20r1a7,,"Did you make sure the username is ""pi""",pihole,1648178183.0
6476,comment,1,i20rkuk,,"If you didn't change it, the default login password for Raspbian is **raspberry**, and the user name is **pi**.",pihole,1648178449.0
6477,comment,1,i20wva8,,"Do you have physical access, i.e. can connect a keyboard (mouse is not needed)?

Or did you enable VNC?",pihole,1648181151.0
6478,comment,1,i20rppy,,"How do I check that?

I open a terminal window.  I type ""**ssh \[Pi's IP address\]**"".  It displays ""**\[My MacOS username\]@\[Pi's IP address\]'s password:**"" and prompts for a password.",pihole,1648178517.0
6479,comment,2,i20ruzd,,I know I changed it.  That's why I don't remember it.,pihole,1648178590.0
6480,comment,1,i20xgda,,"It's in the basement, with my router and cable modem.  I could bring it upstairs, but getting my monitor and keyboard connected would be kind of a hassle.  
  I honestly don't remember if I have VNC or not, it's all been hands-off for so long.",pihole,1648181471.0
6481,comment,1,i20vbuh,,"ssh pi@ip.address (or ssh username@ip.address if you changed the username from the default user, pi)

Alternatively, you can connect a keyboard and monitor using a micro-hdmi adaptor & micro-usb OTG cable. You may or may not need your username and password, depending on the settings when it was initially installed.",pihole,1648180341.0
6482,comment,1,i20s350,,Visit the Pi forums for steps to take to reset your password.,pihole,1648178702.0
6483,comment,1,i20xw3a,,"You _could_ do it in a risky way and do blind typing...

Or I think you _could_ remove the SD card and get the password somehow...

The blind risky method would be the following, note that commands to type would be in a different font, like `this` : 

1. Connect a keyboard to it, wired keyboards are adviced
2. Hit Ctrl + Alt + t, if you have a monitor it should show a terminal window for typing command, but I assume you dont.
3. Wait a few seconds, maybe 30 for it to load, as you cant confirm without video output
4. Type `sudo passwd pi` exactly
5. If you have a screen you would see it prompted for password reset. Type a password, carefully, looking at the keyboard as you type, hit Enter if you finished. If you want to abort, hit Ctrl + c. As I dont know if there are any convensions, use at least 1 upper-case, 1 lower-case and 1 number, and it should be at least 10 characters long. Write that down.
6. Type the new password again. Hit enter if you finished
7. Try ssh to your pi using new password on a different device, by `ssh pi@[IP]`, for example `ssh pi@192.168.1.107`. The 107 IP is for my pi, change that.
8. If thats not successful, connect a monitor and repeat above steps.",pihole,1648181715.0
6484,comment,0,i20vl4r,,"that doesn't help me much, seeing as it's the *password* that I don't have",pihole,1648180478.0
6485,comment,4,i21rn6i,,"Allow me to clarify. If you are logging in with ssh on a Mac (or other Unix/linux box) without the username before the IP address, the default mechanism for ssh is to insert your mac username. If that is not the same as the username on you pi, then there is no password that will work. Try running ssh [pi username]@[pi ip address] instead of ssh [pi ip address] and see if you can’t remember your password. 

Also, even if you think you changed your username, try logging in with the default username(pi, your password), or the default username and password for raspberryOS (pi, raspberry) and see if that doesn’t get you in—I suggest this step because most step by step instructions for installing Pihole (or other software packages) do not instruct you to set up another user, and you would really have to go out of your way to setup a new user account on the pi. 

Alternatively, try booting the pi with a keyboard and monitor directly connected to the pi and see if it boots straight to a bash prompt. In some cases (I.e. if it was installed with the auto-login flag selected, I’m not sure if that’s default though), your pi will boot straight to bash without needing to enter the password.",pihole,1648204607.0
6486,post,111,tn9wwe,Pihole/PiVPN tutorial (protect your data!). Runs stable and under 100F!,"  

This tutorial is for a pihole/pivpn stable setup. 

Part 1: The equipment

· Raspberry pi 4

· 16g or higher [**Gigastone**](https://www.amazon.com/Gigastone-16GB-U1-C10-Nintendo/dp/B07NW48JWP/ref=sr_1_6?crid=YHAFV1OIUKMK&keywords=gigastone+micro+sd+card+16gb&qid=1648164687&sprefix=gigastone+micro+sd+card%2Caps%2C80&sr=8-6) micro SD card (do not buy a cheap one, it will corrupt itself)

· Micro SD card reader.

· Raspberry pi power cord (don’t skimp here either)

· Case with heat shields and fan (don’t worry about variable speed fans).

· HDMI to micro HDMI cord (you will only need this for initial setup

· 6” CAT 6 cable. Amazon does carry these. You can get a longer cable if you want to move the pi further away from the router. I use 6” and it works fine.

Part 2: Assembly

1. Put the heat sinks on the raspberry pi. They come with double sided tape. There are 3 or 4 small heat sinks. This is important to keep pi cool. If pi overheats, it will corrupt the micro SD card and not function properly.

2. Put raspberry pi 4 in case

3. Hook up fan to 3.3v input and ground pins (do NOT put the fan on 5v or it while spin so fast as to create a very irritating whining sound…trust me…I know). 3.3v will generate enough speed to keep the pi cool.

4. Complete case assembly

Part 3: Install the OS on the card

1. Put your micro SD card into the reader. It will only go in one way so you can’t mess this up.

2. Either you have a USB card reader or a micro usb plug. The only difference is the micro usb plug will write everything much faster. The USB only plug will take 2-3x longer.

3. Go to [https://www.raspberrypi.com/software/](https://www.raspberrypi.com/software/) and download the software. 

4. Install the software on your pc

5. Insert the card reader into your pc

6. Run the installer

7. Under Choose OS, select Raspberry PI OS (other), then Raspberry Pi OS Lite. The reason for this is you do NOT need a desktop environment and the pi will run cooler without the desktop version. Everything will run faster/smoother and you aren’t able to use the point and click environment to install anything anyway. Get the Lite version!!!

Part 4: Initial programming

a. Once OS is install on SD card, remove it from reader and insert into pi 4.

b. Plug in hdmi cable to pi 4 and a video monitor (your tv can be used for this if you don’t have a monitor)

c. Plug in a keyboard (you will not need a mouse)

d. Plug in power and wait until you see a terminal. It may take up to two minutes before you see the terminal.

Part 5: Initial programming

1. Once you have a terminal, type in sudo raspi-config

2. Select 3 Interface Options by arrow keys and enter key

3. Select SSH to enable SSH capability.

4. Once done, you may unplug power cord, hdmi cable. You are ready to remotely program the pi 

Part 6: Remoting into your pi

a. Download the free software called putty.

b. Install putty on your pc

c. While waiting on the install, relocate your pi near your router and use the cat 6 cable to plug into both the pi and your router.

d. Once cat 6 cable is installed, plug pi power source in.

e. Log into your router (most people’s routers are 192.168.1.1, though your router may vary)

f. Look into your router connections to find the ip address of all wired connections. One of these will be your pi.

g. Run putty and open a new connection with the  ip address of the wired connection for your pi.

h. The user name will be pi

i. The default password is ….wait for it….raspberry

j. Once logged in, type in sudo passwd and enter a new password.

Part 7: Updating the pi

1. First run:

· Sudo apt update

2. Next: 

· Sudo apt upgrade

This may take some time to update your pi. Take a break and come back in about 30 minutes. Or sit and watch…text…a lot of text. Your choice…You do you.

Part 8: Install Pihole

Finally right? It’s now time to install the first part…pihole. I’ll keep these as bullet points. Lots to cover here. To install pihole you will type the following commands at the prompt (just the text):

o Sudo su

o curl -sSL https://install.pi-hole.net | bash

During the setup, you will be asked many questions. I’m not going over all of those, just know you’ll need to open a port on your router: UDP 1194. The instructions will ask other questions, mostly answer yes to all of them. Once pihole is installed, when you are back at the prompt, type sudo reboot.

Once rebooted, set a new password for pihole by typing:

pihole -a -p

Great! You have now installed pihole, but nothing is working yet. The reason? You haven’t updated any lists, nor have your pointed traffic on your router to go through the pihole. So…first things first…let’s see what pihole looks like.

Remember your ip address for the pi 4? Well…open your browser on your pc and type that address in with a /admin after. You want an example? Sure (192.168.1.11/admin). Your ip address may be different.’

Login to your pihole using the password you created. Don’t remember it? SSH back into your pi 4 (putty) and use pihole -a -p to change it again if needed.

Once logged into pihole, click on settings.

Under settings, click on DNS tab

On interface settings, you may need to permit all origins. Right now you should have allow only local requests. At the bottom, click on save.

Now for the REALLY LONG WAITING part.

At the bottom of this is a list of servers. A lot. Takes a while…watch a sitcom or something while this is happening. This time around, there is no text…just…waiting.

So..click on groups management and ad lists. At the bottom of this tutorial, there is a section called…wait for it…ad lists! Here is the cool part…you can select all of them and enter at ONE TIME! Do it now…don’t wait!

Ok…some of you may actually do social media…my spouse does….facebook. Pihole ad lists…HATE FACEBOOK for all the tracking so…if you want to use that, you will need to white list it.

Click on whitelist, then click on RegEx filter. Same thing. At bottom, you will see facebook white list. Select it all and paste it under regex filter.

Here comes the wating part. You have to update pihole.

Go to tools and click on Update Gravity. Then go watch that sitcom. This will take a while.

Once it’s done…SSH back in (putty) and type in sudo reboot.

Getting close to pihole protecting your house. Last step for pihole…I promise.

Go back into your router (192.168.1.1). you will need to find the section for your internet setup and specifically find “Domain Name Sever (DNS) Address”. It will most likely be setup to automatically get it from your ISP. Now you have to redirect all traffic to your pihole ip address. So…Select Use These DNS Servers (it may have multiple). Delete any thing primary or secondary that you see. You only want one…your ip address of your raspberry pi that you use for putty. Once you’ve entered in that specific address, make sure there are no alternates…should be empty (not even 0). Then hit save. You will lose internet in your house for about 1-2 minutes while your router redirects traffic through the pihole.

Want to know if it’s working? Sure you do! Go back to your browser and your pihole admin page (you didn’t save it as a favorite did you?) Ok…192.168.1.23/admin (yes…another example, your IP will be different).

Click on dashboard. You’ll start to see total queries and queries blocked. It’s working!!!!

So…your house is now protected from ads and malware sites with your pihole. If there were only some way that you could harness this power for your devices when not at home. Oh wait!!!! PIVPN will do that for you! Yay! Rejoice!

Part 9: Install Pihole on your pi 4

SSH back into your pihole (using putty)

At the prompt, type

· sudo su

· curl -L https://install.pivpn.io | bash

Again, you will get a lot of prompts but here are some pointers:

· ensure opendns

· link with pihole.

· Get ip address to set static.

· 256 encryption

· Use OPENVPN (you will have to hit the space bar then enter to select OPENVPN at the prompt)

Once installed, type sudo reboot. Yes, keep rebooting the pihole to ensure everything is talking to each other! BTW, everytime you reboot now, you will lose your internet until the pi is rebooted. Rember you rerouting all traffic through it?

Ok…once it’s rebooted (not sure? Bring back pihole admin page…you didn’t favorite yet did you? I’m not typing the example again…look at previous section to figure that out)

SSH back into pi 4 (using putty)

You now want to add users for any device that will possibly be used outside your home. You can name it anything you want (don’t use spaces…if you need spaces…use this \_ as a space. Example? Ok…iPhone\_dad)

Back too adding users. Type:

Pivpn add nopass

Type in the name (No spaces!)

Hit enter for 1080 days (3+ years)

It will generate a profile. Generate as many profiles as you need.

Now…profiles are created, you need to get them off pi and onto your devices!

Part 10: install vpn profiles on your devices

1. Download and install WinSCP

2. Use your ip address, username and password to log into your pi 4.

3. On right side of WINSCP, click on ovpns folder

4. Select all the profiles and click on download icon above them.

5. Select where on your pc you want them downloaded.

6. Once downloaded, email the profiles to whatever devices need them.

7. On any device, ensure you have openvpn installed. I have personally installed this on both android and iphone so they do work. Iphone is easy, android is a little trickier and I don’t recall exactly how to install it. On iphone, you select the profile from the email and use openvpn app to install. It will open the app, install it, then ask for your phone code to activate the vpn profile. Bam…done. On android, you have to download it to the phone, open the app and locate the file to load the vpn.

8. When at home, you do not need your devices to vpn. Only when you leave your home network. Once away, you use the openvpn app, tape on the profile and it will connect. Once connected, your vpn profile encrypts all data, sends it to your home network and through the pihole thereby protecting your data.

9. The downside to this? You use both your phone data plan and your home data for any internet information. 

10. The upside? Your data is now firewalled and encrypted through your home network.

11. Enjoy!!!!

Ad Lists: 

https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts

https://mirror1.malwaredomains.com/files/justdomains

http://sysctl.org/cameleon/hosts

https://zeustracker.abuse.ch/blocklist.php?download=domainblocklist

https://s3.amazonaws.com/lists.disconnect.me/simple\_tracking.txt

https://s3.amazonaws.com/lists.disconnect.me/simple\_ad.txt

https://hosts-file.net/ad\_servers.txt

https://adaway.org/hosts.txt

https://v.firebog.net/hosts/AdguardDNS.txt

https://raw.githubusercontent.com/anudeepND/blacklist/master/adservers.txt

https://v.firebog.net/hosts/Easylist.txt

https://pgl.yoyo.org/adservers/serverlist.php?hostformat=hosts;showintro=0

https://raw.githubusercontent.com/StevenBlack/hosts/master/data/UncheckyAds/hosts

https://www.squidblacklist.org/downloads/dg-ads.acl

https://hosts-file.net/grm.txt

https://reddestdream.github.io/Projects/MinimalHosts/etc/MinimalHostsBlocker/minimalhosts

https://raw.githubusercontent.com/StevenBlack/hosts/master/data/KADhosts/hosts

https://raw.githubusercontent.com/StevenBlack/hosts/master/data/add.Spam/hosts

https://v.firebog.net/hosts/static/w3kbl.txt

https://v.firebog.net/hosts/Easyprivacy.txt

https://v.firebog.net/hosts/Prigent-Ads.txt

https://gitlab.com/quidsup/notrack-blocklists/raw/master/notrack-blocklist.txt

https://raw.githubusercontent.com/StevenBlack/hosts/master/data/add.2o7Net/hosts

https://raw.githubusercontent.com/crazy-max/WindowsSpyBlocker/master/data/hosts/spy.txt

https://s3.amazonaws.com/lists.disconnect.me/simple\_malvertising.txt

https://hosts-file.net/exp.txt

https://hosts-file.net/emd.txt

https://hosts-file.net/psh.txt

https://mirror.cedia.org.ec/malwaredomains/immortal\_domains.txt

https://www.malwaredomainlist.com/hostslist/hosts.txt

https://bitbucket.org/ethanr/dns-blacklists/raw/8575c9f96e5b4a1308f2f12394abd86d0927a4a0/bad\_lists/Mandiant\_APT1\_Report\_Appendix\_D.txt

https://v.firebog.net/hosts/Prigent-Malware.txt

https://v.firebog.net/hosts/Prigent-Phishing.txt

https://gitlab.com/quidsup/notrack-blocklists/raw/master/notrack-malware.txt

https://ransomwaretracker.abuse.ch/downloads/RW\_DOMBL.txt

https://ransomwaretracker.abuse.ch/downloads/CW\_C2\_DOMBL.txt

https://ransomwaretracker.abuse.ch/downloads/LY\_C2\_DOMBL.txt

https://ransomwaretracker.abuse.ch/downloads/TC\_C2\_DOMBL.txt

https://ransomwaretracker.abuse.ch/downloads/TL\_C2\_DOMBL.txt

https://v.firebog.net/hosts/Shalla-mal.txt

https://raw.githubusercontent.com/StevenBlack/hosts/master/data/add.Risk/hosts

[https://www.squidblacklist.org/downloads/dg-malicious.acl](https://www.squidblacklist.org/downloads/dg-malicious.acl)

[https://blocklistproject.github.io/Lists/adguard/abuse-ags.txt](https://blocklistproject.github.io/Lists/adguard/abuse-ags.txt)

[https://blocklistproject.github.io/Lists/adguard/ads-ags.txt](https://blocklistproject.github.io/Lists/adguard/ads-ags.txt)

[https://blocklistproject.github.io/Lists/adguard/crypto-ags.txt](https://blocklistproject.github.io/Lists/adguard/crypto-ags.txt)

[https://blocklistproject.github.io/Lists/adguard/fraud-ags.txt](https://blocklistproject.github.io/Lists/adguard/fraud-ags.txt)

[https://blocklistproject.github.io/Lists/adguard/malware-ags.txt](https://blocklistproject.github.io/Lists/adguard/malware-ags.txt)

[https://blocklistproject.github.io/Lists/adguard/phishing-ags.txt](https://blocklistproject.github.io/Lists/adguard/phishing-ags.txt)

[https://blocklistproject.github.io/Lists/adguard/scam-ags.txt](https://blocklistproject.github.io/Lists/adguard/scam-ags.txt)

[https://blocklistproject.github.io/Lists/adguard/tracking-ags.txt](https://blocklistproject.github.io/Lists/adguard/tracking-ags.txt)

facebook white list

star-mini.c10r.facebook.com 

star.c10r.facebook.com 

scontent.xx.fbcdn.net 

external-cph2-1.xx.fbcdn.net

video-cph2-1.xx.fbcdn.net

messenger.com 

connect.facebook.net

scontent-cph2-1.xx.fbcdn.net

edge-chat.messenger.com

video.xx.fbcdn.net

web.facebook.com

rupload.facebook.com

edge-mqtt.facebook.com

edge-chat.facebook.com

mqtt-mini.facebook.com

mqtt.c10r.facebook.com

m.facebook.com

facebook.com

static.xx.fbcdn.net

www.facebook.com

www.messenger.com

media0.giphy.com

media1.giphy.com

media2.giphy.com

media3.giphy.com

media.tenor.co

upload.messenger.com

star.facebook.com

external.xx.fbcdn.net

limited-prod.giphy.map.fastly.net

external-arn2-1.xx.fbcdn.net

scontent-arn2-1.xx.fbcdn.net

cdn.fbsbx.com

graph.facebook.com

lm.facebook.com

media4.giphy.com

l.facebook.com

scontent.fgdl5-1.fna.fbcdn.net",pihole,1648168694.0
6487,comment,1,i20f0p4,,"Your adlist collection has a number of problems.  Out of the 50 lists, some do not exist on the internet and others are in the wrong format for Pi-hole.

    [i] Target: https://zeustracker.abuse.ch/blocklist.php?download=domainblocklist
    [✗] Status: Connection Refused
    [✗] List download failed: no cached list available

    [i] Target: https://hosts-file.net/ad_servers.txt
    [✗] Status: Not found
    [✗] List download failed: no cached list available

    [i] Target: https://www.squidblacklist.org/downloads/dg-ads.acl
    [✗] Status: Connection Timed Out (Cloudflare)
    [✗] List download failed: no cached list available

    [i] Target: https://hosts-file.net/grm.txt
    [✗] Status: Not found
    [✗] List download failed: no cached list available

    [i] Target: https://hosts-file.net/exp.txt
    [✗] Status: Not found
    [✗] List download failed: no cached list available

    [i] Target: https://hosts-file.net/emd.txt
    [✗] Status: Not found
    [✗] List download failed: no cached list available

    [i] Target: https://hosts-file.net/psh.txt
    [✗] Status: Not found
    [✗] List download failed: no cached list available

    [i] Target: https://mirror.cedia.org.ec/malwaredomains/immortal_domains.txt
    [✗] Status: Not found
    [✗] List download failed: no cached list available

    [i] Target: https://ransomwaretracker.abuse.ch/downloads/RW_DOMBL.txt
    [✗] Status: https://ransomwaretracker.abuse.ch/downloads/RW_DOMBL.txt (503)
    [✗] List download failed: no cached list available
  
    [i] Target: https://ransomwaretracker.abuse.ch/downloads/CW_C2_DOMBL.txt
    [✗] Status: https://ransomwaretracker.abuse.ch/downloads/CW_C2_DOMBL.txt (503)
    [✗] List download failed: no cached list available

    [i] Target: https://ransomwaretracker.abuse.ch/downloads/LY_C2_DOMBL.txt
    [✗] Status: https://ransomwaretracker.abuse.ch/downloads/LY_C2_DOMBL.txt (503)
    [✗] List download failed: no cached list available

    [i] Target: https://ransomwaretracker.abuse.ch/downloads/TC_C2_DOMBL.txt
    [✗] Status: https://ransomwaretracker.abuse.ch/downloads/TC_C2_DOMBL.txt (503)
    [✗] List download failed: no cached list available

    [i] Target: https://ransomwaretracker.abuse.ch/downloads/TL_C2_DOMBL.txt
    [✗] Status: https://ransomwaretracker.abuse.ch/downloads/TL_C2_DOMBL.txt (503)
    [✗] List download failed: no cached list available
  
    [i] Target: https://www.squidblacklist.org/downloads/dg-malicious.acl
    [✗] Status: Connection Timed Out (Cloudflare)
    [✗] List download failed: no cached list available

    [i] Target: https://blocklistproject.github.io/Lists/adguard/abuse-ags.txt
    [✓] Status: Retrieval successful
    [i] Analyzed 435239 domains, 435239 domains invalid!
      Sample of invalid domains:
      - ||100.1qingdao.com^
      - ||7minuteworkout.com^
      - ||addshoppers.com^
      - ||affiliatecashpile.go2jump.org^
      - ||arklighting.co^

    [i] Target: https://blocklistproject.github.io/Lists/adguard/ads-ags.txt
    [✓] Status: Retrieval successful
    [i] Analyzed 154574 domains, 154574 domains invalid!
      Sample of invalid domains:
      - ||_thums.ero-advertising.com^
      - ||0.fls.doubleclick.net^
      - ||0.r.msn.com^
      - ||0.start.bz^
      - ||0.up.qingdaonews.com^

    [i] Target: https://blocklistproject.github.io/Lists/adguard/crypto-ags.txt
    [✓] Status: Retrieval successful
    [i] Analyzed 23789 domains, 23789 domains invalid!
      Sample of invalid domains:
      - ||0.r.msn.com^
      - ||000.0x1f4b0.com^
      - ||001.0x1f4b0.com^
      - ||002.0x1f4b0.com^
      - ||003.0x1f4b0.com^

    [i] Target: https://blocklistproject.github.io/Lists/adguard/fraud-ags.txt
    [✓] Status: Retrieval successful
    [i] Analyzed 196092 domains, 196092 domains invalid!
      Sample of invalid domains:
      - ||0-0-----------------------------------------------------------0.com^
      - ||0-google.com^
      - ||00-lawyer.com^
      - ||0000.support^
      - ||000spyware000.com^

    [i] Target: https://blocklistproject.github.io/Lists/adguard/malware-ags.txt
    [✓] Status: Retrieval successful
    [i] Analyzed 435342 domains, 435342 domains invalid!
      Sample of invalid domains:
      - @@||seclists.org^!
      - ||-sso.anbtr.com^
      - ||0--foodwarez.da.ru^
      - ||0-0-0-0-0-0proxy.tserv.se^
      - ||0-0-0.6te.net^

    [i] Target: https://blocklistproject.github.io/Lists/adguard/phishing-ags.txt
    [✓] Status: Retrieval successful
    [i] Analyzed 190278 domains, 190278 domains invalid!
      Sample of invalid domains:
      - ||0.01.2.13.3.sydneypropertyinvestors.com^
      - ||0.01.2.23.3.sydneypropertyinvestors.com^
      - ||000.9.009.09.ekurbani.com^
      - ||000.9.019.09.ekurbani.com^
      - ||000000-0.000webhostapp.com^

    [i] Target: https://blocklistproject.github.io/Lists/adguard/scam-ags.txt
    [✓] Status: Retrieval successful
    [i] Analyzed 1265 domains, 1265 domains invalid!
      Sample of invalid domains:
      - ||10tradeoption.com^
      - ||123tradeoption.com^
      - ||1n.yarrid.com^
      - ||1stireland.com^
      - ||1sttheglobal.com^

    [i] Target: https://blocklistproject.github.io/Lists/adguard/tracking-ags.txt
    [✓] Status: Retrieval successful
    [i] Analyzed 15051 domains, 15051 domains invalid!
      Sample of invalid domains:
      - ||1-cl0ud.com^
      - ||1-creative-1.com^
      - ||1000mercis.com^
      - ||1010data.com^
      - ||102.112.207.net^",pihole,1648172589.0
6488,comment,16,i209s8k,,"I am running Docker with about 30 services simultaneously, only have a passive heatsink (aluminum), just me using it, and it is currently at 100F.

No need for a fan unless you plan a heavy usage IMO.",pihole,1648170241.0
6489,comment,9,i20s3fa,,"Pi 4 is way overkill, I agree. On the flip side it does make for a nice base for a NAS/home server. 

My PiHole/PiVPN is a Zero W in the $5 adafruit case running off a USB port that’s on the gateway/router. Runs 95° F on the high end and uses a whopping 16% memory.",pihole,1648178706.0
6490,comment,48,i20aqli,,">Plug in hdmi cable to pi 4 and a video monitor

Not needed. Just enable ssh when you flash the card, by putting an empty file named ssh in the boot directory.

>Download the free software called putty.

Only needed with ~~a~~ some PC's. Many other OS's support ssh natively.

>o Sudo su

Not required or desired.

>nothing is working yet. The reason? You haven’t updated any lists...

This is done during the install process. The default list is fetched during this process.

Also, a Pi4 is overkill for Pi-hole by about two orders of magnitude.  It's a nice device, but this level of capability is not needed for Pi-hole. A Zero will work nicely.

Why should a new user select any or all of your recommended adlists?  Edit - they shouldn't.  See my separate comment regarding problems with many of those adlists.",pihole,1648170667.0
6491,comment,8,i20id3y,,we need gigastone sd card? no other card will do?,pihole,1648174095.0
6492,comment,3,i22zq4m,,"A couple points of feedback.

For the things people will want to copy and paste, put it into code blocks.

It looks like this is aimed at not an linux expert. So you'll want to explain some linux quirks, like the the fact password fields don't show any visible interaction when you're typing it. I get this question a lot from linux newbies. Also basically explain what each command will be doing.",pihole,1648225651.0
6493,comment,9,i20c3ma,,"""Under 100F""? O_O

Has that been a problem for you???

I've been running PiHole with PiVPN for two or three years now, and it never gets anywhere near that temperature.",pihole,1648171283.0
6494,comment,7,i217qxs,,"People are always on about using Putty, I'm like 'just use your terminal!'",pihole,1648188187.0
6495,comment,4,i20bzda,,"Nice instructions!  Might be a bit of thermal overkill maybe but no harm. I’d recommend an SSD if you can swing it. A Pi4 will boot off it. Mine is headless and runs pihole, unbound, home automation, photoprism, wordpress in docker plus wireguard with passive cooling.",pihole,1648171229.0
6496,comment,2,i20d04z,,"Last thing you need to add is how to manage it from your phone:

https://www.reddit.com/r/shortcuts/comments/9kf720/pihole_admin/",pihole,1648171689.0
6497,comment,2,i21f67v,,"Does anyone have experience troubleshooting the final steps of this setup? I tried it once and found that, when all was set up and done, my home network devices stopped using my Pi-Hole entirely. I tried finding an answer to no avail. And of course this sub is for Pi-Hole help, PiVPN is an entirely different thing, and few people here seem to have experience with it.

There’s also all this mumbo jumbo about ports and cgNAT and other complexities with the VPN, which everyone kinda glosses over. I don’t know, maybe I’m not as good with technology as I thought I was, but it definitely gets fuzzy after the “set up wireguard and make profiles” step. Like it’s just supposed to magically work from there like Pi-Hole does.",pihole,1648194145.0
6498,comment,2,i21utue,,"Part 9 should be

>Part 9: Install **PIVPN** on your pi 4",pihole,1648206882.0
6499,comment,1,i22nbvr,,If a tutorial for a PiVPN + Pihole setup starts with a pi4 as a requirement you know you can skip the tutorial.,pihole,1648220817.0
6500,comment,1,i233mgr,,Thanks a lot :),pihole,1648227147.0
6501,comment,23,i20ew5w,,"> Only needed with a PC. Many other OS's support ssh natively. 

Windows has had a native SSH client since at least 2018.",pihole,1648172533.0
6502,comment,8,i21ndkr,,"> Also, a Pi4 is overkill for Pi-hole by about two orders of magnitude. It's a nice device, but this level of capability is not needed for Pi-hole. A Zero will work nicely.

He's literally mentioned PiVPN in the title (and the Pi4B is the only Pi capable of actual Gigabit throughput).. If you have a fiber connection at home and want to VPN into it with all the bandwidth available you have to get the Pi4B and not something older/cheaper..",pihole,1648201220.0
6503,comment,0,i22axbg,,"using the directions I provided, it doesn't have an option to enable ssh when I install.

I use putty due it's easy, convenient, free and i can save my settings so ssh in is very fast.

Sudo su?  I used that to ensure a clean install.  I tried sudo only but was getting errors on pihole install.  using sudo su ensured no issues.

I tried running the same setup on my pi 3 and twice it would quit responding between 10-14 days.  I yanked my pi 4 (christmas lights), and didn't have that issue.  Again YMMV.

As far as adlists.  I pulled from multiple sources.  these are free lists and some might not be getting updates.  What I do know is whether I have broken links or not, i've got a good firewall from ads and malware sights now.

My intent is to share knowledge due many may know about pihole, but don't know they can protect their data outside the house with pivpn.",pihole,1648215637.0
6504,comment,-20,i20ij9d,,I’ve used other cards but they don’t hold up. Gigastone lasts.,pihole,1648174175.0
6505,comment,0,i20dlqy,,"Yes. It’s why I got case, fan, heat sinks. Was running 110+",pihole,1648171956.0
6506,comment,6,i218mcu,,"Unlike the terminal, Putty does have the advantage of being able to store your different setups.

I haven't used it in years, but I will if I ever need to manage more than 2 or 3 servers, or if I want to use advanced tools like e.g. ssh tunnel with a proxy.",pihole,1648188859.0
6507,comment,1,i23pi6x,,I like mobaxterm,pihole,1648235786.0
6508,comment,1,i22cbxb,,"My setup has the pi literally 6"" off my router which is centrally located in my house.  In a case, cooled with micro sd, it's a clean setup.  If I switched to SSD, more gear, blah blah.

I do have a 5TB SSD that was a NAS on my router but for some reason, back in January, my router and my SSD decided they didn't want to play together.

The router will show the SSD attached and a link, but the link quit pulling up the SSD.  Multiple restarts, resets, plugins, checking SSD for issues, I gave up for a while.  SSD is currently just used for backup data on my laptop when needed.

I may try the cat6 cable attachment for a USB NAS route since the actual router is being stubborn.  Though I am waiting for the archer AXE200.",pihole,1648216260.0
6509,comment,2,i22qqco,,I used [this guide](https://blog.crankshafttech.com/2021/03/how-to-setup-pihole-pivpn-unbound.html) for setting up WireGuard and feel like it explains things pretty well.,pihole,1648222166.0
6510,comment,1,i21vab4,,I used OpenVPN as I couldn’t get wireguard to work.,pihole,1648207191.0
6511,comment,1,i21vciu,,Good catch!,pihole,1648207231.0
6512,comment,9,i20fe6j,,Good point.,pihole,1648172756.0
6513,comment,1,i22azzn,,"putty is very convenient, saves my settings.  one click on my menu bar and one click on connect; im in!",pihole,1648215670.0
6514,comment,4,i224ixb,,[deleted],pihole,1648212553.0
6515,comment,2,i224rrz,,Good point.  To use your full upload bandwidth at home you need a device that can match that speed.,pihole,1648212678.0
6516,comment,1,i22nnb7,,I’m using Zero W and pivpn. Does it really have a huge difference in terms of speed?,pihole,1648220943.0
6517,comment,3,i22btce,,">	these are free lists and some might not be getting updates

That is the case for some of them. Others are simply not suitable for use with Pi-hole and will never work properly. They are written for an entirely different type of ad blocker.   Using lists of this type can lead to false positives. 

>	it doesn’t have an option to enable ssh when I install.

That is where the empty ssh file comes in. 

>	i’ve got a good firewall from ads and malware sights now.

Pi-hole is not a firewall. It's a DNS domain blocker. These are fundamentally different.",pihole,1648216035.0
6518,comment,3,i22cwjw,,"Part3 section 3 you say download the software, and in their [documentation](https://www.raspberrypi.com/documentation/computers/remote-access.html) they also state making an empty (touch via Linux, or notepad no extension in Windows) SSH file.


Also, if you download the software and install it, hold ctrl or shift when selecting your SD card (or USB drive, or USB SSD) and you can give your Pi a name, an IP, a user and password, enable SSH, enter WiFi credentials..heck even add an SSH Key!


No idea why you EVER need to connect a display to setup a Pi(hole).",pihole,1648216510.0
6519,comment,2,i24gozs,,">	Sudo su?  I used that to ensure a clean install.  I tried sudo only but was getting errors on pihole install.

You should not need to run the install script as root user. If you need to do so, there is typically a problem in the underlying OS.",pihole,1648247173.0
6520,comment,1,i23gysu,,">my intent is to share knowledge

But many, many smarter and more articulate, more knowledgeable people have made much much better tutorials than what you've written here. Knowing this, don't you think your time could be better spent doing something else?",pihole,1648232363.0
6521,comment,1,i20j1y4,,"gen 10 card does, I have been using samsung for quite a few years. it looks like you are affiliated with them?",pihole,1648174415.0
6522,comment,1,i236zyt,,Never heard of them. Won't use them.,pihole,1648228450.0
6523,comment,13,i20f809,,That's.... Not normal.,pihole,1648172679.0
6524,comment,1,i21ymvj,,"Perhaps dumb question as I haven’t used Putty in probably a decade, what does it do that .ssh/config doesn’t do?",pihole,1648209297.0
6525,comment,1,i2wwvm0,,Might be of interest for long-life-for-SD just in case you hadn't see it before: ... https://medium.com/swlh/make-your-raspberry-pi-file-system-read-only-raspbian-buster-c558694de79,pihole,1648768672.0
6526,comment,2,i22c337,,"Same as my native W11 terminal, and even my Windows 10 CMD and Shell..


I only like PuttyGen to create ssh keys on Windows 10.",pihole,1648216154.0
6527,comment,1,i22fw0c,,"Personally, I agree. Putty is great since I SSH into a bunch of different systems.",pihole,1648217790.0
6528,comment,1,i236myi,,"Neat, but unnecessary. K.I.S.S.",pihole,1648228311.0
6529,comment,2,i22f912,,The 3B+ doesn't have true Gigabit like the Pi4B does (Pi4B doesn't have the NIC connected though USB).. Which is exactly why I made the point to say Pi4B. I have OpenSpeedtest on one of my VPN Pi4B (not sure if it's the WireGuard or OpenVPN one) and I have multiple times gotten 800+ Mbps at work without issue (but to be fair it's the same ISP at home and at work and my commute is barely 10 min). With the exception of the Compute Module 4 there are no others Pis that offer true Gigabit like the Pi4B does. And if you want no bottlenecks there really isn't a good option out there besides Pi4B.,pihole,1648217521.0
6530,comment,1,i22b8o3,,"had a pi3 that kept having issues.  used my pi 4 and it's running easily, stable and i'm sharing info.

i originally started to do this on my pc until i realized I could use a pi.  i have two right now and pi 4 is apparently sold out everywhere.  glad I had it.",pihole,1648215779.0
6531,comment,1,i22eeiw,,Download too.. Depends on what your using your VPN for..,pihole,1648217159.0
6532,comment,1,i23028d,,"No, you don't need a raspberry pi 4 for what you're doing. I have a pi 4 that is my primary and a zero w for my secondary. When I am updating the pi 4 the zero w takes over without breaking a sweat. Ok it goes up to like 30%-50% cpu under heavy load. I also host some other discord bots on my pi 4 so that's the only reason I have a 4 in the first place.  


edit: I forgot to talk about vpn. I guess if you have a very fast upload at home, then a pi 4 can help with that. But keep in mind, it probably wouldn't exceed 250 mbps either. It's CPU bottlenecked. I only have 40 mbps on my upload at home anyways, the zero w was able to handle that with an usb ethernet adaptor.",pihole,1648225779.0
6533,comment,2,i22g78j,,"The last programming language I took was fortran back in the early 90's.  So...I can understand a bit, but am no expert in programming.

I...the naive programmer, initially tried to do everything in a desktop environment, which, I suspect, many people who are used to a GUI would do.

It's when I realized that I was using the console mode the entire time that I got that aha moment.  Veteran programmers are laughing at this statement...hope you enjoyed your smirk.

This write up I did is for many who want to push a little further than they've been comfortable with and aren't quite sure what/how to do it.  I've seen piecemeal instructions all over the place, but no guide on both.  I chose to take my notes and flesh them out a bit.

I spent hours trying to find the best options/combinations to get this to work.  You can imagine my happiness and joy when i got the openvpn to connect for the first time on my iphone.

then all the crashes came due my setup, sd card, overheating, blah blah.

This is my setup.  YMMV and that's ok.  I just hope that any replies are helpful to those looking to protect their data, avoid annoying ads and please, some one with the expertise, for the love that is all programming, find a solution for freaking Hulu ads!!!!",pihole,1648217922.0
6534,comment,6,i21eowv,,">it looks like you are affiliated with them?

Given it's a rather huge assertion, I took the liberty to check OP's profile.  
[When he asked for help, other people recommended Gigastone to avoid corruption](https://www.reddit.com/r/pivpn/comments/tcid1a/raspberry_pi_4_pihole_pivpn_and_system_corrupted/i0dow7w), so it seems OP is genuine to me",pihole,1648193735.0
6535,comment,1,i21jjt2,,[deleted],pihole,1648197936.0
6536,comment,-1,i20jd60,,Eh?  Use whatever card you want then.,pihole,1648174558.0
6537,comment,2,i23ynac,,You do you!,pihole,1648239502.0
6538,comment,3,i20mbps,,Not normal how?  Like too high or low?  Been running mine for just over 2 years at 130F ish,pihole,1648175922.0
6539,comment,1,i20xy4a,,Mines running at 58c according to pihole interface. That seems a bit too hot tbh,pihole,1648181747.0
6540,comment,1,i220bxl,,"AFAIK, a GUI",pihole,1648210285.0
6541,comment,1,i2x0alz,,cool,pihole,1648770181.0
6542,comment,1,i23bgts,,"Configuring Linux based devices works so well on macOS. Just open terminal, type in “ssh pi@ipaddress” and then enter your password and…that’s it. You’re ssh’d in to your Raspberry Pi. I’ve done it with Ubuntu as well on my Mac.",pihole,1648230191.0
6543,comment,1,i258hm2,,"Doesn't just affect upload speed (from your ISP at home), that depends entirely on what you're using the VPN connection for. If I'm transferring DJI drone video from a 5G connection in the field to my file servers at home through a VPN, then it's my download speed at home thats's being utilized (and a Pi Zero would take 10 times longer because it can't even come close 1 Gbps up/down like the Pi4B can handle).",pihole,1648260274.0
6544,comment,1,i27h6jn,,I’m at 400 download and 100 upload on home network as of about 2 weeks ago.,pihole,1648311734.0
6545,comment,-4,i22bixd,,"i've had many cheap cards.  someone recommended it and turns out, i have two at my house.  one 8 and one 16.  using it, no issues.

i'm no longer a fan of sandisk though...kept having issues just flashing it.",pihole,1648215907.0
6546,comment,2,i23xsan,,then why do you specifically name a product and have a link to it that takes to amazon? and his claim that Gigastone lasts and other card does not? Are you kidding?,pihole,1648239153.0
6547,comment,5,i20pfiv,,Seems super hot to me. My two PiHoles are generally running ~32-35°C.,pihole,1648177384.0
6548,comment,2,i21ev7p,,"Mine just clocked in at 122°F. All it does is Pi-Hole. I think the big contributor is I switched the fan to the slower speed. Trying to find a good replacement that isn’t obnoxiously loud, but having no luck. Seems like such a thing doesn’t exist and I’m best off using a heat sink case.",pihole,1648193885.0
6549,comment,2,i236xa2,,It's better to use C for temp comparison.,pihole,1648228421.0
6550,comment,1,i20r31o,,I have two Rpi 1 Model B and they hover around 100-120F,pihole,1648178208.0
6551,comment,1,i20s25g,,Just checked one of mine. 118F.,pihole,1648178688.0
6552,comment,3,i210eqm,,"Dunno, my RPi4 running pihole/pivpn using the official PoE adapter is running at 44.8c, or about 113F.",pihole,1648183156.0
6553,comment,3,i20t5vq,,"It's hot, ish, in human scale.

It's not even remotely in near the scale of shit-giving for an ARM SOC intended for embedded use. It won't start caring until 80~85°C, and most of the rest of an RPi board is rated for similar or higher operating temperatures.

TL;DR: Hot for a human, yes. Hot for an RPi? Not even remotely.",pihole,1648179237.0
6554,comment,1,i22ab7f,,"That is why i'm running the base OS with no desktop environment.  That and a case with heat sinks and low speed 3.3v fan running both and it's running around 99F.

According to replies on this thread, YMMV.",pihole,1648215356.0
6555,comment,-1,i224n64,,"I'm not saying hot for a human. I'm saying hot compared to my rpis running the exact same thing. Try reading the whole post.

And the CPU being able to handle 90°C means nothing. My car's engine will happily handle 7,000 RPM all day long. If you tell me that your car is constantly running at 4,000 RPM, I'm going to say that's pretty high.",pihole,1648212613.0
6556,comment,3,i22d4k9,,">	I’m saying hot compared to my rpis running the exact same thing. 

Do you have the same model Pi?  The reported temps vary widely by model. Pi 4's are known to run hotter.",pihole,1648216607.0
6557,comment,1,i22fpv0,,"One's an RPi 4, one's a 3B.",pihole,1648217717.0
6558,post,0,tn73k6,Is a PiHole VPN linked to the internet speed?,"I’ll try to explain it better down here:
My internet speed is blocked at 10mbps, and I wanted to add a VPN through which connect to PiHole outside the LAN. 

Will the 4G connection be limited by the 10mbps in my home (where the pihole is) or the speed of 4G won’t be affected by it?",pihole,1648160295.0
6559,comment,3,i1zouf6,,"If all your traffic from the remote client (both DNS queries and data) is routed back to your home network, then the data speed on the client will be limited to the upload speed on your home router.

If you split tunnel (send only the DNS queries back home, leaving the data on the network where the client is located), then the data speed on the client will not be limited by your home network.  Only the DNS traffic will be subject to that limit, and 10 mbps is orders of magnitude higher than needed for DNS traffic.",pihole,1648161011.0
6560,comment,2,i236jf2,,"Your PiVPN speed will be limited by your ISP’s UPLOAD speed. So, for example, if your download speed is around 10mb/s, your upload speed may be limited to as low as maybe 1mb/s or so. Depending upon how you are using the Internet, this might actually be fast enough, but I would expect compromises in video first.

Here I have around 90mb/s download and about 10mb/s upload which is plenty fast for me using PiVPN, which works well BTW.",pihole,1648228273.0
6561,comment,1,i24h35m,,"Thanks! 

Regarding the split tunnel option, are you referring to [this guide?](https://docs.pi-hole.net/guides/vpn/openvpn/only-dns-via-vpn/)

Alternatively, could you post the correct guide (if available)?",pihole,1648247345.0
6562,comment,1,i24inp3,,">	are you referring to this guide?

Yes.",pihole,1648248047.0
6563,post,0,tn5kaq,"Using Piholes with Server 2016, How to properly set up?","Hope this is the right sub for this...

Hello! So I want to do something within my homelab and came across some articles/sites/posts about how to set it up but want to see if anyone else or if there is a better recommendation on how to set this up. Overall, I want to continue to use my PiHoles within my home network while running Windows 2016 Server. Would like to tie all my home services and VMs to my domain. While doing some quick research, I came across these options:

[Option 1](https://www.reddit.com/r/pihole/comments/6o5q0l/pihole_placement_in_a_domain/) \- So based on this post, option A would be the best way of doing this but don't have an idea on how to set this up if this would be the best course of action. 

[Option 2](https://www.vikash.nl/use-pi-hole-with-microsoft-active-directory/) \- Came across this one in my research.

[Option 3](https://www.virtualizationhowto.com/2022/01/pihole-local-dns-records-synchronized-from-active-directory/)\- This is the most recent article I found. I am leaning towards this option but would like an opinion on it as well. 

Any guidance or recommendation would be greatly appreciated. Thank you in advance.",pihole,1648156670.0
6564,comment,1,i1zyl9l,,"I presume you are running Active Directory with integrated DHCP and DNS?

If so, then yes... Option 1A would be best.   What I do with pfSense should work for you too.  The resulting DNS path will look like...

    Clients --> Pi-hole --> AD-integrated DNS --> Internet

Do the following...

**In AD DNS & DHCP...**

1. Configure Forwarders in the AD-integrated DNS server to use some public DNS services like Google.
2. Configure DHCP clients in the AD-integrated DHCP server to use the Pi-hole for primary DNS and nothing else.

**In Pi-Hole...**

In Settings / DNS:

1. Under **Upstream DNS Servers**
   1. for Custom 1 (IPv4) enter the IPv4 address of your AD-integrated DNS server,
   2. for Custom 3 (IPv6) optionally enter the IPv6 address of your AD-integrated DNS server, and finally
   3. use no other upstream DNS servers.
2. Under **Advanced DNS settings**
   1. Uncheck ***Never forward non-FQDNs***, and
   2. Uncheck ***Never forward reverse lookups for private IP ranges***.

After setting these, make sure to renew the DHCP leases on all clients.

These settings will result in the following...

* Pi-hole will forward all **unblocked** DNS lookups to the AD-integrated DNS server for resolution.  These can be Fully Qualified Domain Name (FQDN) like *hostname.domain*, or non-FQDN like *hostname*.  This should maintain Active Directory integrity.
* Pi-hole also will automatically do reverse lookups of client IP addresses at the AD-integrated DNS server, so you will see individual hostnames instead of IP addresses under Top Clients and other reports.

My home servers (both Windows and Linux) have static IP addresses.  Since I do no casual Internet browsing on these, I configure them to skip Pi-hole and use pfSense directly.

You could skip Pi-hole as well and use AD-integrated DNS directly for your servers with static IP configurations.",pihole,1648165234.0
6565,comment,1,i203p3e,,"NOTE:  I perused Option 3.  It is overly complicated and grossly violates the Keep-It-Simple-Stupid (KISS) principle. 

Synchronizing DNS records from the AD-integrated DNS server to Pi-hole is just... dumb.  It is entirely unnecessary.",pihole,1648167506.0
6566,post,9,tmujih,FTL failed to start due to failed to create listening socket for port 53: Permission denied,"Just updated my raspberry pi using apt update/upgrade, no changes made to anything else including the docker compose file. Running unbound on 5335 - working normally.

https://tricorder.pi-hole.net/jnlOqP8M/",pihole,1648147118.0
6567,comment,2,i1zvxnm,,"Weird. I ran into the same bug.

For anyone running into the same issue, i think there was an update to docker today that change how network mode: host works. according to my pihole, everything broke exactly when my auto update happened on my pihole server.

add the environment variable 'DNSMASQ_USER=root' to your compose

or

remove the network mode: host from your compose file and just open the ports

    ports:
      - ""53:53/tcp""
      - ""53:53/udp""
      - ""67:67/udp"" # Only required if you are using Pi-hole as your DHCP server
      - ""80:80/tcp""",pihole,1648164063.0
6568,comment,1,i1ysec2,,"Where did you get your docker image of Pi-hole?  There is a whole lot of stuff running in your container aside from what we ship - many ports in use.

Your debug log shows that port 53 traffic isn't making it to Pi-hole:

    *** [ DIAGNOSING ]: Name resolution (IPv4) using a random blocked domain and a known ad-serving domain
    [✗] Failed to resolve  on lo (127.0.0.1)
    [✗] Failed to resolve  on eth0 (192.168.1.25)
    [✗] Failed to resolve  on br-0781b187f09b (172.31.0.1)
    [✗] Failed to resolve  on br-28b60b9cf46c (192.168.48.1)
    [✗] Failed to resolve  on br-4a0a0bc81b3c (172.20.0.1)
    [✗] Failed to resolve  on br-6a9f51d36e5b (172.22.0.1)
    [✗] Failed to resolve  on docker0 (172.17.0.1)
    [✗] Failed to resolve  on br-755c11bdb600 (192.168.32.1)
    [✗] Failed to resolve  on br-9687431379aa (192.168.16.1)
    [✗] Failed to resolve  on br-e5a5ce4e874a (172.28.0.1)
    [✗] Failed to resolve  on br-fb5828fdf09a (172.23.0.1)
    [✓] doubleclick.com is 142.250.217.110 via a remote, public DNS server (8.8.8.8)",pihole,1648148120.0
6569,comment,2,i20023p,,"This disables the ability to use pihole as my DHCP server, right?",pihole,1648165887.0
6570,comment,1,i1ytdnk,,"I've pasted the compose file below, it's from pihole/pihole

https://pastebin.com/BXQM1ZUA",pihole,1648148499.0
6571,comment,1,i20aaio,,"~~as long as you open port 67, thats why that note is there. i commented over it because i use my router for DHCP.~~

Edit: I stand corrected. Adding the environment variable 'DNSMASQ_USER=root' also let allowed me to use network mode host.",pihole,1648170467.0
6572,comment,3,i1ywgm1,,"Updated my compose file according to: 
https://hub.docker.com/r/pihole/pihole

All is well now.",pihole,1648149714.0
6573,comment,1,i22486i,,"u/haenzrqz is right. Opening port 67 will allow the pihole instance to receive DHCP, but not broadcast it if you run the DHCP server from the pihole itself. DHCP needs to broadcast to the rest of the network and bridge mode prevents that as documented here:

https://docs.pi-hole.net/docker/dhcp/",pihole,1648212402.0
6574,comment,2,i225695,,"I'm having the exact same error. Running Raspberry Pi OS (arm64) on an rpi400 and using Portainer to deploy pihole/pihole:latest. I can run in bridge mode, but host mode gives the ""FTL failed to start due to failed to create listening socket for port 53: Permission denied"" error. Can you confirm that you're able to use host mode after fixing the compose file? Did you identify the root cause of the problem? I'm extremely new to containers and trying to wrap my head around everything, so any guidance would be greatly appreciated.

Edit: looks like u/darcmage's link to a solution below might help me.

Edit: setting DNSMASQ\_USER=root fixed my problem. Thanks!",pihole,1648212883.0
6575,comment,1,i20uwpj,,"I'm running into the same issue after an apt update. How did you get pihole working with unbound? I can get pihole to work with other DNS servers but not unbound for some reason.

Edit: Came across [this solution](https://github.com/pi-hole/docker-pi-hole/issues/1019). For some reason DNSMASQ_USER=root didn't work but PIHOLE_UID=0 did. It allowed me to keep Network_mode: host and didn't have to add any port mappings. My error was ""pihole-FTL: no process found"" so it might not be related.",pihole,1648180126.0
6576,comment,1,i22kngj,,The answer is in this link,pihole,1648219745.0
6577,comment,1,i213lbw,,"Ah man, I'm having the same issue now - initially since pihole was 'working' but not with unbound - I've spent most of the day messing around with settings. They work independently of each other, but not together. My hunch is it's a network issue within docker. For now I'm using pihole without unbound.",pihole,1648185198.0
6578,post,12,tmhrkm,How to route all of your DNS queries over TOR? [only DNS queries],"**How?**

* Is there any guide to use TOR network for all of your DNS queries coming to PiHole?
* Are there any potential downside of this approach? (I am aware that it will increase the domain name resolution time. But hey, no pain no gain! Moreover, PiHole dns caching should help to some extent)

**Why?**

I am following DNS privacy and/or security related information since few months. Recently, I came across this beautiful concept of Oblivious DoH (ODoH) published by cloudflare (link down below). Moreover, I get to know that Apple's iCloud private relay uses the same concept. I believe this is a brilliant idea to improve both privacy and security of the good old DNS protocol. ODoH tries to mitigate the shortcomings of traditional DoH/DoT when it comes to user privacy. However, there is a risk that if the proxy and target servers collude, users' privacy will be compromised. Hence, I was thinking TOR network is well tested when comes to privacy and ODoH is somewhat similar to how a TOR relay works. It makes more sense if we can use TOR network for our DNS queries as a hardened ODoH. My understanding can be incomplete or incorrect. Let me know your thoughts on this.

[https://blog.cloudflare.com/oblivious-dns/](https://blog.cloudflare.com/oblivious-dns/)

**What is my setup?**

* I am using PiHole+Unbound on RPi 3B (ubuntu server) and all of my devices are using PiHole as a DNS server
* Only PiHole can make DNS queries to WAN
* DoT (port 853) and DoH (list of known DoH providers) are blocked by the router running OpenWRT

PS- No, I do not want to route all of my internet traffic over TOR, only DNS queries!",pihole,1648136300.0
6579,comment,13,i1ybot2,,"What are you trying to accomplish?  Regardless of how clandestinely you resolve domain names to IPs (or use IP's directly without domain name resolution), once you have an IP you send both the IP and the SNI in clear text to your ISP and they can easily see where you are browsing.",pihole,1648141596.0
6580,comment,4,i1y0mew,,"This should do the trick.

https://github.com/piskyscan/dns_over_tls_over_tor/blob/master/README.md",pihole,1648137369.0
6581,comment,2,i20oqby,,"Please don't use Tor anymore.  I used to run Tor nodes.  I wouldn't touch it now.  Nothing but feds chasing criminals.  Too many documented cases of feds tracking people over Tor.

You are much safer using a major vpn provider, and it's a gazillion times faster too.

[https://restoreprivacy.com/tor/](https://restoreprivacy.com/tor/)",pihole,1648177047.0
6582,comment,-5,i1yijlk,,"I completely understand that you can not hide your “traffic” from your ISP or VPN provider. End of the day, it depends on whom do you trust!  However, I want to limit my traffic visibility between myself and my ISP (or VPN) provider. While using my own recursive name resolution using unbound, one can still sniff my unencrypted DNS packets. Problem with using DoT or DoH is that, the DoT/DoH service provider now gets all of my DNS traffic (along with ISP). ODoH tries to mitigate this by introducing proxy, but even this has an issue if the server and proxy colludes. So,I am thinking if we use TOR instead, we are checking all the DNS privacy checkboxes. Hope this provides a bit more clarification on my expectations!",pihole,1648144255.0
6583,comment,1,i1yig40,,"Thank you. I will check this out. However, any idea on if it can use HTTPS as well?. It will be more secure over just plain TLS encryption.",pihole,1648144217.0
6584,comment,1,i234950,,"Thank you for this. I have tried this solution and damn it works! However as expected , name resolution takes avg 1-2 sec. I didn't observe any noticeable delay in the website post that. Some websites (LinkedIn etc) were asking for security verification, which was strange as we are not using Tor for connecting to a website (only for dns resolution). Any idea on how can this possible?",pihole,1648227388.0
6585,comment,2,i21xw2b,,makes sense. Cons outweigh pros in this approach,pihole,1648208848.0
6586,comment,2,i21u4u3,,">However, I want to limit my traffic visibility between myself and my ISP (or VPN) provider. While using my own recursive name resolution using unbound, one can still sniff my unencrypted DNS packets.

You still have that issue with Tor. You make sure the ISP won't be able to read the packets, but the exit node can. Which is basically a VPN provider.  
Do you have a reason to trust TOR? Why not use it for the entire traffic and secure http requests as well?  

>So,I am thinking if we use TOR instead, we are checking all the DNS privacy checkboxes.

Pedantically, you CAN'T check all DNS privacy checkboxes.  
You can send parts of the info to various untrusted providers, but you can't have requests not sniffed at some points, because the root are not encrypted. You need *some* middleman for anonymization and encryption to that middleman (the ISP can then see where you go, but not for what)  

Instead of trusting a DoT resolver or a VPN provider, you need to trust TOR. If you trust TOR, yes it kinda works. But you have to trust TOR first, which is basically a nested VPN operated by random people.  

I don't like the idea of wrecking performances for theorical safety benefits. I want security against real treats, like random hackers. And a random VPN sounds less trustworthy than the possibility of a branded one.",pihole,1648206405.0
6587,comment,8,i1ykivf,,">any idea on if it can use HTTPS as well?. It will be more secure over just plain TLS encryption.

How so?  Encrypted is encrypted.",pihole,1648145030.0
6588,comment,1,i22kxcz,,"yes, end of the day whatever service you choose to use, you have to trust it!

>You still have that issue with Tor. You make sure the ISP won't be able to read the packets, but the exit node can. Which is basically a VPN provider. Do you have a reason to trust TOR? Why not use it for the entire traffic and secure http requests as well?

The only reason you dont want to use the entire traffic over Tor is that, it will be slow as a snail. 

>You can send parts of the info to various untrusted providers, but you can't have requests not sniffed at some points, because the root are not encrypted. You need some middleman for anonymization and encryption to that middleman (the ISP can then see where you go, but not for what)

Theoretically if you use DoT/DoH over Tor, then no one (except you and your ISP/VPN + feds lol) should be able to link your ip and your dns query. DoT/DoH provider will see the DNS query coming from a Tor exit node and the Tor exit node will see encrypted packet to DoT/DoH service provider.",pihole,1648219853.0
6589,comment,-1,i1your0,,"yes. you are correct. Can you also point out any downsides with this entire DNS over TOR concept? (obviously it will make name resolution slower, ISP can still see my traffic if they want to)",pihole,1648146736.0
6590,comment,1,i22nakf,,"Yeah, but if you use DOT over VPN, you have the same result, right?  

The ISP sees a VPN query. Hmm, suspicious. But the query is hidden.  
The VPN sees a DoT query to a resolver. The VPN doesn't know what domain you're looking for thanks to  the trusted certificate.  
The resolver knows your query, but because of the VPN doesn't know who you are.  
The resolver's resolution should prevent eavesdropping at the root.  

2 middlemen, no need to trust the VPN one... unless knowing what specific resolver you use is a critical info? I guess it could be common knowledge that you use cloudflare anyway, as long the resolver can't identify you.  
DoT over TOR still has the issue of trusting the DoT resolver, I don't get the benefit of Tor as long DoT is involved. You don't need to trust the VPN anyway, right?",pihole,1648220802.0
6591,comment,4,i1yrsnm,,"The downside would be speed, most likely, and the IP's you receive may not be optimal for your geographic location.

In my opinion, you gain little in return for those potential problems.",pihole,1648147884.0
6592,comment,1,i22sizg,,"Yeah, I believe if you use DoT over VPN, it gives same results as using DoT over Tor. Added advantage will be speed of operation and less suspicion. However, my knowledge here is limited. It would be better if some networking expert can comment on these understandings!

>DoT over TOR still has the issue of trusting the DoT resolver, I don't get the benefit of Tor in your scenario.

Sorry, but I didn't get why only Tor will have an issue of trusting DoT resolver? Isn't it should be same for the VPN as well right?(in DoT context)",pihole,1648222871.0
6593,comment,1,i1ywzfy,,"Oh yes,  depending on TOR exit node, resolved IP might be pointing to a CDN server to a far location. This might slowdown entire internet and/or website as well. Thank you for this critical insight.",pihole,1648149924.0
6594,comment,2,i22um0r,,">Sorry, but I didn't get why only Tor will have an issue of trusting DoT resolver? Isn't it should be same for the VPN as well right?(in DoT context)

Yes, that's my point. Assuming the resolver is public knowledge, you don't have to trust the VPN, but trust the resolver. TOR changes the middleman you *don't* need to trust and do nothing against the one who is a weak link.  

The gold solution would be to pass unbound through a VPN (identity) and send encrypted queries (integrity) to the roots and registrars, etc.  

Which is why people are pleading for encryption support at the root level, while pragmatics say that only the resolvers need to support encyption, under the assumption recursive queries shouldn't be used per-user.",pihole,1648223681.0
6595,comment,1,i2335ql,,">The gold solution would be to pass unbound through a VPN (identity) and send encrypted queries (integrity) to the roots and registrars, etc.

Can't agree more on this. Unfortunately, root servers do not support encrypted dns queries yet. We have to rely on private entities for such task (cloudflare, google etc). This leads to data centralisation and can potentially compromise user privacy.",pihole,1648226966.0
6596,post,4,tmfxve,Flush not working,"Hi everyone. 
After I installed Pihole on another server, when I click “Flush Network Table” and “Flush Logs” nothing happens. In fact it returns that click was ok. Example: https://imgur.com/a/i2Enesp

But when I return to my Dashboard: https://imgur.com/a/mzTeW8E

This is a fresh new installation.

Any ideas?
Regards,",pihole,1648134405.0
6597,comment,2,i1xtu1i,,"**Flush network table** removes the entries in the network table only, not the query log. 

**Flush logs** flushes the dnsmasq logs (/var/log/pihole.log), not the query log which is populated from the query database at /etc/pihole/pihole-FTL.db

Neither of these commands will clear your dashboard query log. 

What are you trying to accomplish?  Perhaps another tool is the answer.",pihole,1648134704.0
6598,comment,3,i1xuat3,,Flush logs not working is a known problem in the latest version of pihole. Apparently it's fixed in the new version.,pihole,1648134889.0
6599,comment,1,i20hspd,,Same here.,pihole,1648173837.0
6600,comment,1,i38xz38,,"Wait, what? Clicking on ""Flush Logs (last 24 hours) used to clear my dashboard before it stopped working on a recent release. Am I misunderstanding something here? Was the behavior of this setting changed?",pihole,1649007982.0
6601,comment,2,i1z40y7,,Thanks!,pihole,1648152687.0
6602,post,3,tmdm21,Modifying the Dashboard to show more data [Question],"Hello!

I have checked through previous posts on this sub and on google, but could not find a good answer. I have a requirement where I want to see all the data - e.g. all the domains queried (sorted as per count) - we can see this on the dashboard, but these are only top allowed/blocked domains. What if I want to see all the domains in such sorted table?

I am using pi-hole on my raspberry pi 3. Initially I thought to install some log analysis tool like ELK or Splunk, but somehow they are not properly supported for ARM devices.

In case modifying the dashboard is not available, but if you guide me on where exactly I can target to make changes (like change the scripts in /var/www/html/admin/scripts/pi-hole/js folder), I can surely spend my time-energy there.

Let me know if you have any heads-up, please.

Thanks!",pihole,1648132000.0
6603,comment,2,i1xrev2,,">	all the domains queried (sorted as per count)

From the Pi terminal:

`echo “>top-domains (1000) >quit” | nc localhost 4711`

`echo “>top-ads (1000) >quit” | nc localhost 4711`",pihole,1648133743.0
6604,comment,1,i228vor,,"thanks for this query, this is helpful.

However, I don't want to run this query everytime by logging in to my Pi. Can we run this query somewhere on the server so that the results are shown on PiHole dashboard?",pihole,1648214696.0
6605,post,0,tm4ef5,Domain pi.hole resolves to 0.0.0.0,"I have set up a Pi-hole in a docker container, and everything seems to work fine, except that I can't access the admin panel using `pi.hole`. I can see in the log that the Pi-hole is resolving other domains as it should, but `pi.hole` returns `0.0.0.0`. I'm using the Pi-hole as a DHCP server, if that matters.

Here is the output from `dig pi.hole`:

```
; <<>> DiG 9.18.1 <<>> pi.hole
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 4338
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 4096
;; QUESTION SECTION:
;pi.hole.                       IN      A

;; ANSWER SECTION:
pi.hole.                0       IN      A       0.0.0.0

;; Query time: 3 msec
;; SERVER: 192.168.1.58#53(192.168.1.58) (UDP)
;; WHEN: Thu Mar 24 12:58:44 CET 2022
;; MSG SIZE  rcvd: 52
```

And here is my `docker-compose.yml`:

```
version: ""3""

# More info at https://github.com/pi-hole/docker-pi-hole/ and https://docs.pi-hole.net/
services:
  pihole:
    container_name: pihole
    image: pihole/pihole:latest
    network_mode: host
    environment:
      TZ: 'Europe/Stockholm'
      WEBPASSWORD: '[A secret password]'
      WEB_PORT: 8080
      ServerIp: 192.168.1.58
    volumes:
      - './etc-pihole:/etc/pihole'
      - './etc-dnsmasq.d:/etc/dnsmasq.d'    
    #   https://github.com/pi-hole/docker-pi-hole#note-on-capabilities
    cap_add:
      - NET_ADMIN # Recommended but not required (DHCP needs NET_ADMIN)      
    restart: unless-stopped
```

Does anyone know why the correct IP is not returned?",pihole,1648123492.0
6606,comment,1,i1x7y98,,"By any chance, did you blocked pi.hole?

This may help: https://docs.pi-hole.net/ftldns/configfile/#local_ipv4

Play around w/ the config and see if that helps",pihole,1648125020.0
6607,comment,1,i1xdb1o,,"It is not blocked as far as I can tell. I tried changing `LOCAL_IPV4` in `etc/pihole/pihole-FTL.conf` to the correct IP (It was `0.0.0.0`), but it keeps changing back. I have also noticed this when starting the container:

```
...
Custom WEB_PORT set to 8080
pihole    | INFO: Without proper router DNAT forwarding to 0.0.0.0:8080, you may not get any blocked websites on ads
pihole    | ::: Pre existing WEBPASSWORD found
pihole    | DNSMasq binding to default interface: eth0
pihole    | Added ENV to php:
pihole    |                     ""TZ"" => ""Europe/Stockholm"",
pihole    |                     ""PIHOLE_DOCKER_TAG"" => ""2022.02.1"",
pihole    |                     ""PHP_ERROR_LOG"" => ""/var/log/lighttpd/error.log"",
pihole    |                     ""ServerIP"" => ""0.0.0.0"",
pihole    |                     ""CORS_HOSTS"" => """",
pihole    |                     ""VIRTUAL_HOST"" => ""0.0.0.0"",
...
```

It seems like the `ServerIP` environment variable is wrong even if it is set in `docker-compose.yml`.",pihole,1648127729.0
6608,comment,3,i1zyzcz,,"Looks like `ServerIP` is [deprecated](https://github.com/pi-hole/docker-pi-hole/) and has been replaced by `FTLCONF_REPLY_ADDR4`

Not that I'm sure it'll make a difference.",pihole,1648165409.0
6609,comment,2,i21a1hk,,That fixed it! Thank you. Not sure how I missed that,pihole,1648189968.0
6610,comment,2,i226bx5,,"That's awesome! Considering you manually changed pihole-FTL.conf, I'm surprised it fixed it.",pihole,1648213465.0
6611,comment,2,i228gsv,,"Yeah, I suspect that the environment variable has a default value overrode the value in the file when i restarted the container",pihole,1648214501.0
6612,post,11,tm33uw,Pi-Hole + Oblivious DoH,"Has anybody got this working with Pi-Hole on Ubuntu? If so what did you use?

Ref: https://blog.cloudflare.com/oblivious-dns/

My understanding is that ODoH is what iCloud Private Relay does/is.

Thanks!",pihole,1648118862.0
6613,comment,1,i1x31l6,,"You mean sending pihole requests to the DNS server using DoH?

I use cloudflared. There's a guide on the official pihole Homepage.",pihole,1648122210.0
6614,comment,1,i1x4ad7,,Never heard or oblivious…lol but why recreate the wheel? Most use cloudflared,pihole,1648122951.0
6615,comment,1,i1x4dym,,https://blog.cloudflare.com/oblivious-dns/,pihole,1648123008.0
6616,comment,1,i1x4dgv,,https://blog.cloudflare.com/oblivious-dns/,pihole,1648123001.0
6617,comment,1,i1xa62c,,Interesting…,pihole,1648126182.0
6618,comment,1,i1x4w1u,,"Sounds real neat but is this for public use yet? I know cloudflare throws around the “1.1.1.1” phrase a lot. Sometimes I’m not sure if it’s technology that’s simply built into their “1.1.1.1 app” or their 1.1.1.1 public dns server

I mean both are public lol but the app obviously has to be installed on a supported device (most any android or iPhone back when I used it) but then the hits wouldn’t go through the local pihole either",pihole,1648123304.0
6619,comment,1,i1xafi0,,"Yeah I only found out about it by doing some digging as to how iCloud Private Relay works.. I want ODoH on my Pi-Hole lol, I’ll update here when I eventually start messing with it.",pihole,1648126315.0
6620,comment,2,i1x52fd,,"iCloud Private Relay is ODoH, I found this https://github.com/SwaroopGiri/Pihole-with-Anonymized-ODOH/ but wanted to see if anyone had any success beforehand, I’m using cloudflared already for DoH.",pihole,1648123406.0
6621,comment,1,i1x57tv,,"Edit: This is already set by default so ignore me.

You can also block iCloud Private Relay on pi-hole in a config, searching “BLOCK_ICLOUD_PR” should yield results containing the right config file.",pihole,1648123491.0
6622,comment,1,i1xj5jq,,lol,pihole,1648130354.0
6623,comment,1,i1xj2em,,lol,pihole,1648130318.0
6624,comment,2,i1xkd7s,,">	You can also block iCloud Private Relay on pi-hole in a config

It is blocked by default with Pi-hole.  No need to change any configuration settings. 

https://docs.pi-hole.net/ftldns/configfile/#icloud_private_relay",pihole,1648130872.0
6625,comment,1,i1xn0e1,,"Thanks for the correction, do you have an opinion on ODoH? I’m tempted to attempt it using this guide. https://github.com/SwaroopGiri/Pihole-with-Anonymized-ODOH/",pihole,1648131973.0
6626,comment,2,i2lnifd,,"I have used this guide to setup ODoH for my home network. It works fairly straightforward. I didn't observe much latency difference compared to using unbound in recursive mode.

I personally believe this approach is a fine balance between privacy and security for dns. However, there are still some catch with this approach as mentioned by other comments. Your ISP can still track you. You are trusting very few available ODoH proxy relays (this can lead to data centralisation). Also, since this is relatively new standard and not much research has gone through to find out the vulnerabilities. and more...",pihole,1648580564.0
6627,comment,1,i1xqffb,,">	do you have an opinion on ODoH?

Not really. I don't use it at home (I use unbound in recursive mode).  oDOH can be useful when you are away from your home network, but note that you have to trust whomever is providing the proxy service. 

I do enable iCloud Private Relay on my IOS devices when I travel and don't have my travel router and Pi-hole with me.",pihole,1648133348.0
6628,comment,1,i2lqhau,,"Thanks, cloudflare seems to guarantee the following though due to the encryption on ODoH. (In terms of trusting the proxy).

1,) The target sees only the query and the proxy’s IP address.

2.) The proxy has no visibility into the DNS messages, with no ability to identify, read, or modify either the query being sent by the client or the answer being returned by the target.

3.) Only the intended target can read the content of the query and produce a response.

I understand IP traffic is visible to the ISP unless using Tor / VPN, this just seems to make it more difficult to log your DNS queries.

I’ll give it a go though, thanks!",pihole,1648581713.0
6629,comment,1,i1xtkyh,,"Right, didn’t know about trusting the proxy as thought it was a bit like tor in the sense one server would see my IP and another would see the request, I have heard of unbound but wouldn’t my ISP see me requesting the different domains recursively and be able to piece it together that way? Kinda why I’ve stuck with DoH for now with cloudflare.",pihole,1648134604.0
6630,comment,2,i1xucaw,,">	wouldn’t my ISP see me requesting the different domains recursively

Yes. 

>	Kinda why I’ve stuck with DoH for now with cloudflare.

You are hiding nothing from your ISP with encrypted DNS. After you clandestinely obtain the IP, you immediately send that to the ISP along with the SNI, both in plain text. The ISP can easily see where you are visiting. They cannot see your data being exchanged, but they know you went there.",pihole,1648134906.0
6631,comment,2,i22es7m,,"Unless you route that traffic over a tunnel. So a VPN, Tor, etc. Encrypted dns + a tunnel hides it all from your ISP, but then you are just putting all of that information in the hands of whomever owns the tunnel (if they wish to track it)",pihole,1648217324.0
6632,comment,1,i2juk7t,,This really is a nightmare isn’t it? Lol,pihole,1648553050.0
6633,post,48,tm2975,Filter Youtube via PiHole?,"Nerds get older and have kids.... How can I force YOUTUBE to set the filter mode to ""moderate"" via PiHole. Is that possible? And if not directly in PiHole, perhaps with a Python script or similar.

I don't want to block Youtube altogether for the kids, but change the DNS request to Youtube for the kids group so that Youtube is filtered. On Youtube itself, this is possible - if you are logged in - via the ""restricted mode"".

Adguard has such a function (incl. ""force safesearch""). How can you set it up on Pihole? (And yes, I know that PiHole is not a parent control system).

I searched the group but only found questions and answers about blocking youtube for kids. I have PiHole running with ubound on a Raspberry and would appreciate any tips.

&#x200B;

SOLVED

Problem solved - force Safesearch only for Kids

Through the local DNS and CNAME in PiHole, the Google/bing/youtube can be redirected to the corresponding strict/restrict addresses.

I now have 2 x PiHoles (adult + kids) running in 2 containers in Docker, accessing one Unbound in a Docker container and assigned 2 static Ips on the network to the Raspi, so I can access the PiHoles separately.

Seems to be working so far.

If anyone needs a Docker compose and tips, feel free to contact me. ",pihole,1648115322.0
6634,comment,27,i1xbdxk,,"[https://support.opendns.com/hc/en-us/articles/227986807-How-to-Enforcing-Google-SafeSearch-YouTube-and-Bing](https://support.opendns.com/hc/en-us/articles/227986807-How-to-Enforcing-Google-SafeSearch-YouTube-and-Bing)

It involves creating a DNS entry to point Google, YouTube, Bing, etc. to a specific IP which forces safe search.  I don't see why PiHole can't do this as you can set manual DNS entries.",pihole,1648126792.0
6635,comment,73,i1x57qp,,"I'll probably get downvoted for this, but you might be better off using Adguard Home since it seems like that it has the features that you're looking for. Pi-hole doesn't support any sort of force Safesearch feature as far as I'm aware.",pihole,1648123490.0
6636,comment,5,i1wv2eh,,[This forum topic](https://discourse.pi-hole.net/t/redirect-with-regex/14902/4) may help you.,pihole,1648116603.0
6637,comment,5,i1x4gl2,,"Sorry but this won't be super helpful but I honestly had to just restrict it to certain devices that weren't mobile so I could moderate it then I just disabled it for my older kid. Even with moderate search what I'd see his search history would serve him was pretty shocking. He had some questions about sex I guess and after he searched for it once they started recommending porn star interviews since they thought he'd be interested. They weren't explicit so they didn't get flagged but it's not great. Best of luck if you decide to keep it around, just want to warn you it's filtered but what is still considered ok is pretty edgy.",pihole,1648123052.0
6638,comment,3,i1y9a0c,,"I know that OP is asking about youtube, but do you use Cloudflare for families as the upstream DNS? it can filer malware and adult content.  And if you have a fixed ip address you can use Cloudflare's Gateway that gives you more control on what content can be loaded. 

I use it for malware at home and its been great so far.

Malware Blocking Only  
Primary DNS: 1.1.1.2  
Secondary DNS: 1.0.0.2  
Malware and Adult Content  
Primary DNS: 1.1.1.3  
Secondary DNS: [1.0.0.3](https://1.0.0.3)  


[https://blog.cloudflare.com/introducing-1-1-1-1-for-families/](https://blog.cloudflare.com/introducing-1-1-1-1-for-families/)",pihole,1648140669.0
6639,comment,3,i1yzeb7,,"I use cloudfared gateway as upstream DNS and have a dedicated pi-hole to pass through all kids devices which are assigned a static IP.

Also for wifi, I have a kids specific vlan which allows me to specify a dedicated pi-hole which has clouflare gateway as upstream dns.

https://blog.cloudflare.com/deploying-gateway-using-a-raspberry-pi-dns-over-https-and-pi-hole/

Edit: Article Link",pihole,1648150884.0
6640,comment,3,i205tki,,This guy has some good ideas- https://quantixed.org/2019/07/29/childs-play-pi-hole-set-up-for-a-safer-internet/,pihole,1648168459.0
6641,comment,12,i1y24s3,,"I am going to catch hell for this, but here goes.

These extra filters are nice as an added net to catch stuff, but is not a direct replacement for sitting your kids down and explaining what they can and cannot do online. You can use this to start teaching them about digital security.

The goal is to raise and teach our kids to be responsible. These help keep them from being tempted, but as they get older a quick Google will show them how to circumvent. 

I have young twins and a kid about to be 18. They have all been taught since they could get online how to be safe online. They have also been told what they can and cannot do online. I do have measures in place, but I also review activity on my network enough I can catch and let them know I can see when they try to break the rules or circumvent something. 

In the end I have kids that no longer try to get to that stuff and if they feel they need to access something or have questions they come to their parents about it. I would much rather the questions about sex and the like start with the parents.

Just my $.02.

Just to add another bit of advice for YouTube and safesearch. There are dns services (paid and free) that can be used to do this. You would just need to use those as the upstream dns. Though, as others have stated you might be better off using adblock home.",pihole,1648137950.0
6642,comment,-5,i1x3n4y,,[deleted],pihole,1648122569.0
6643,comment,1,i23uzwd,,You probably need to use my setup of pihole because I cannot figure out for the life why youtube alone is buffering every 5 seconds when pihole is running. No other streaming service is affected. And tail shows no denied connection. Because it is streaming. Just very slow on 400mbps fiber.,pihole,1648238034.0
6644,comment,0,i1xzz2u,,"[youtubekids.com](https://youtubekids.com) is awesome.....lol

&#x200B;

then i got to thinking, that should be like a youtube creator ""goal"" - to get their content on youtube kids.  lol.  there's plenty of pokemon go youtube kids channels haha, its actually kinda funny watching them",pihole,1648137120.0
6645,comment,7,i1xngpj,,"You mean under ""Local DNS"" in Pihole? Or how can I redirect dns in PiHole?",pihole,1648132156.0
6646,comment,35,i1x7976,,"Competition is what drives technology forward, not monopoly.  


I'm a die-hard pihole fan, but.. have my up-vote, sir",pihole,1648124641.0
6647,comment,4,i1yc964,,Love that username.,pihole,1648141823.0
6648,comment,3,i200avw,,I use Adguard DNS addresses for my upstream requests...get the best of both,pihole,1648165995.0
6649,comment,2,i1xjza4,,"I had to basically setup privoxy with specific rules to enforce stuff like this alongside pihole, I might have to look at adguard home again! Cheers for the reminder.",pihole,1648130708.0
6650,comment,6,i1xo936,,"I switched from Adguard to PiHole because I'm not quite sure how secure AdGuard is (company from Russia ...) Maybe I'm paranoid too.

But what I loved about AdGuard was the force safesearch options.Force safesearch and time-based filter lists/groups - that would be great!",pihole,1648132475.0
6651,comment,3,i1xoibh,,Thanx. I'll have a look at that.,pihole,1648132579.0
6652,comment,1,i1yve8o,,"Personally, I use NextDNS for the configuration. It's kinda a cloud Pihole but convenient lists are convenient.",pihole,1648149296.0
6653,comment,1,i21hmkn,,Jepp. Cloudflare is good. But I’m using unbound as a resolver.,pihole,1648196253.0
6654,comment,2,i21h4f4,,Wow! That sounds great. Merci!,pihole,1648195806.0
6655,comment,2,i1ynwoz,,"Fully agree, even as a high school lad we'd use proxies to circumvent school blocks on games and that was the late 2000s... I'd argue kids these days see VPN ads all over the place & that would certainly circumvent a pi hole.

A good chat, some guidance and how to stay safe online would be the best option here IMO. Block porn for certain client devices of course but the last thing you want is your kid going down the route of dodgy sites / VPNs etc and putting security at risk just to access this stuff.",pihole,1648146364.0
6656,comment,3,i1yeurl,,"Agree... However, we didn't grow up with the abundance of content and the ease of consumption and the raw pushing of content from companies like kids today have. 

Parents and kids should learn and teach each other. That should be the first line of defense. But we also need more. Companies certainly aren't going to do it. If anything, they want less restrictions so they can get kids addicted as much as possible.",pihole,1648142833.0
6657,comment,2,i1xsssf,,">	i thought the pihole community was a bit more in tune with the underlying workings of the internet.

You an use the group management feature of Pi-hole to selectively apply blocking to client groups.",pihole,1648134293.0
6658,comment,1,i1xrvx2,,Two systems for one problem... hmm...,pihole,1648133930.0
6659,comment,1,i1xsfvq,,"Wish I could hire some one like you who understands this shit. I can only think in terms of gears and levers.

I want both adguard and pinhole, but don't have the time to configure",pihole,1648134150.0
6660,comment,3,i1y34ik,," I find that it is terrible.  Can' make lists, and the search is just horrible.  

I have been able to find a cheat to the YouTube rule forbidding adding videos for kids to a playlist.  You can add them from a search.  So I have just made some playlists for the time being. Not perfect but it works for the most part.",pihole,1648138334.0
6661,comment,2,i1yuwcp,,"You can redirect DNS if you *really* want with dnsmasq files.  
However, you don't need that for this problem.",pihole,1648149100.0
6662,comment,11,i1xd848,,"Yeah, I wish that Pi-hole supported these features along with redirecting stuff to another domain.",pihole,1648127689.0
6663,comment,4,i1xq6yy,,"Yeah, it would be so much better than trying to use hacky crontab scripts. I just wish that Pi-hole had more parental control features for the people that need them.",pihole,1648133255.0
6664,comment,1,i1yucnx,,"Not to turn this too technical, but blocking vpns isn't too bad. Even with just pihole you can redirect the initial lookup for most big names. The problem is all of the little free ones you can find with shady providers.. those can be a little more tricky, but still do-able. I haven't gone full crazy yet where I have DPI (deep packet inspection) capabilities, but then again my kids have learned (so far). Though it isn't hard to tell if someone is using a VPN to bypass pihole. 

I am in infosec though... so I am probably a lot more cautious to this than most. I doubt many home users run a SIEM.",pihole,1648148885.0
6665,comment,1,i1znf13,,"I remember proxies. I found a website that would have an up to date list of new domain names when the old ones would eventually be blocked.

I also found out by accident I could just turn off the proxy in the browser and just got unfiltered, no speed restriction internet. That was a good run.",pihole,1648160419.0
6666,comment,1,i1z1fe4,,[deleted],pihole,1648151671.0
6667,comment,0,i1xw43j,,"Yes, but that is not the problem. I want a DNS forward for a certain group (if that is the solution). From google to e.g. safesearch-google, or safesearch-youtube, to force a safe search for a certain group.",pihole,1648135609.0
6668,comment,1,i1z0idd,,[deleted],pihole,1648151322.0
6669,comment,2,i1z1z2b,,[deleted],pihole,1648151884.0
6670,comment,14,i1xt5i4,,">	along with redirecting stuff to another domain.

Local DNS in Pi-hole does this.",pihole,1648134433.0
6671,comment,3,i1ye5f2,,"It's easy to mentally jump the gap to having PiHole filter things like that. But PiHole is just DNS. 

It's not a content filtering system. 

It's like wanting the phone book to be able to have the grocery store be able to talk about certain brands but not others.",pihole,1648142560.0
6672,comment,0,i1xrcvh,,Jepp. I agree wholeheartedly. In many places you notice that PiHole is quite nerdy.,pihole,1648133722.0
6673,comment,1,i1z2gnp,,"Static IP's are not required for client to group assignments in Pi-hole.

""Clients may be described either by their IP addresses (IPv4 and IPv6 are supported), IP subnets (CIDR notation, like 192.168.2.0/24), their MAC addresses (like 12:34:56:78:9A:BC), by their hostnames (like localhost), or by the interface they are connected to (prefaced with a colon, like :eth0).""",pihole,1648152074.0
6674,comment,1,i1xwiga,,Map these domains in the hosts file or Local DNS records in Pi-hole.,pihole,1648135765.0
6675,comment,0,i1z8fsf,,Whatever you mean by that.,pihole,1648154419.0
6676,comment,1,i1zsx68,,"Thanks. This is over my head. I'm not capable (especially with THIS attitude!)

But I will attempt to comprehend what you're instructing",pihole,1648162758.0
6677,comment,3,i1xtg8y,,That's interesting. I thought that it only allowed you to add custom DNS entries. How long ago was it implemented?,pihole,1648134553.0
6678,comment,1,i2axnpi,,"It would be great if the local dns/cname could also be assigned to groups. Then only the kids would be redirected, but not themselves... By the way: VERY GOOD WORK! I LOVE PiHOLE!",pihole,1648381673.0
6679,comment,0,i1yvdcb,,"That's true, but at the same time as far as I can tell, content filtering features seem to be a feature that people want in Pi-hole.",pihole,1648149286.0
6680,comment,1,i1z8wbe,,[deleted],pihole,1648154599.0
6681,comment,1,i1xxhdq,,ok. Thanks. Or in the Dnsmasq.d?,pihole,1648136146.0
6682,comment,2,i1z96h1,,[deleted],pihole,1648154710.0
6683,comment,2,i200axi,,[deleted],pihole,1648165996.0
6684,comment,1,i1yv282,,"Ehm, you described CNAME records.  
I think you meant to another *resolver*, not domain?",pihole,1648149163.0
6685,comment,6,i1z2pnv,,Pi-hole doesn't have the ability to inspect content and filter on that content.  That's simply not available in a DNS server/resolver.,pihole,1648152169.0
6686,comment,1,i1z9cg8,,The OP is running Pi-hole on bare metal.,pihole,1648154774.0
6687,comment,1,i1xy9rt,,You can do that if you specify that location as a hosts file.,pihole,1648136460.0
6688,comment,1,i203cws,,Right! Pihole is great!,pihole,1648167356.0
6689,comment,2,i200ecg,,Ok this is more my speed!  You are my hero. I'm going to try harder!,pihole,1648166038.0
6690,comment,1,i1yw59a,,What I'm talking about is redirecting the domain example.com to anotherwebsite.com.,pihole,1648149590.0
6691,comment,1,i1zgsq3,,I'm talking about doing stuff like filtering content based on domain like how Adguard Home and some home routers do it.,pihole,1648157750.0
6692,comment,2,i1yx154,,"Yeah, that's in Pihole since at least when I first installed it. :) CNAME records in Local DNS",pihole,1648149943.0
6693,comment,1,i1zovn3,,"depends what you mean by redirect

Local dns can override the definition",pihole,1648161025.0
6694,comment,2,i1zix33,,">filtering content based on domain

You can do this with Pi-hole.  If there is a domain that you don't want to load, add it to the blacklist.  If there are number of subdomains as well, enter the domain as a wildcard and the subdomains will be blocked as well.",pihole,1648158603.0
6695,comment,1,i1yy033,,Interesting. I guess it's a feature that I missed.,pihole,1648150332.0
6696,comment,0,i1zkthj,,As well filtering based on a schedule and stuff. It would be nice to have that functionality baked into Pi-hole.,pihole,1648159375.0
6697,comment,3,i1z5tur,,"Oh, now I remember why.  
It only works for already-loaded domains by dnsmasq.  

So if you already went to example.org recently, you can ask to redirect example.com to .org  
But if .org is not loeaded, then it answers .com doesn't exist  

So we're limited to locally defined domain (or use a script, perhaps?), which is less useful.",pihole,1648153389.0
6698,comment,2,i1zps2q,,"There is an open feature request here:

https://discourse.pi-hole.net/t/timed-dns-queries-block-dns-based-on-time/3495",pihole,1648161402.0
6699,post,3,tlznrd,PiHole+Unbound in TrueNAS Scale,"Hello Guys,

I am struggling to run Unbound and PiHole together. WIth TrueNAS scale, i am quite limited as i am not able to use DockerCompose, so i am not able to use most common solution described here [https://github.com/chriscrowe/docker-pihole-unbound](https://github.com/chriscrowe/docker-pihole-unbound) . I have PiHole up and running via Portainer, Unbound is running as well as per Portainer, but with bridge mode there is no IP address assigned to Unbound. I tried click Join the Network in portainer for Unbound without any change.

I also published 5335 TCP/UDP for Unbound, what is not displayed here - have no idea why. 

Any suggestions/workarounds how to run these 2 containers together ?

Thanks

https://preview.redd.it/j1px94dn1ap81.png?width=1462&format=png&auto=webp&s=4b509751cc71eafcdbd01ea371be201a03b26002",pihole,1648104060.0
6700,comment,0,i1zhjad,,[deleted],pihole,1648158049.0
6701,comment,0,i1zrn06,,How does sending all your DNS queries to a third party resolver improve privacy?,pihole,1648162201.0
6702,comment,0,i1zykfm,,[deleted],pihole,1648165224.0
6703,comment,1,i201np5,,">	can you say the same for every server you need to contact to fully resolve mydomain.com

That's one nameserver for any individual request - the final nameserver. Higher level nameservers just get you to the next level nameserver without having the complete domain provided.   Your queries do not all go to a single provider. 

Nameservers handle millions/billions of queries daily and it's unlikely they log anything other than overall performance stats. They have no incentive to do so.",pihole,1648166599.0
6704,comment,0,i2084ao,,[deleted],pihole,1648169492.0
6705,comment,1,i208u7f,,">	that you have no clue on how they operate.

Unbound uses the same nameservers as Cloudflare.

>	you shouldn’t trust your internet providers not to do shady shit

Unrelated to my choice of DNS resolver.

>	cloudflare’s incentive is to sell me their network, expertise and a few domain names.

Unbound is a resolver you have control of, going to the same nameservers Cloudflare uses but cutting out Cloudflare. 

In my opinion, using a local DNS resolver (unbound, Bind, etc) is more private for this reason.

>	guess a subdomain would have helped my example

The process is the same for any domain you are going to access. Every publicly accessible domain I can think of is a subdomain of a TLD.",pihole,1648169817.0
6706,post,2,tlxxin,DHCP Server Issues (Docker),"I have a Nighthawk r7000 router. I set the DNS to solely be the Pi. This setup works. However my issue is, in my pihole admin portal, it's showing all of my traffic coming from the router ip ([192.168.1.1](https://192.168.1.1)) and I want to set up a DHCP server instead, so that way I can see the devices on my network in pihole, rather than seeing all my traffic come from my router.

&#x200B;

I turned off the DHCP server in my router settings, and to get it to allow that, I set my DNS settings back to the default (ISP provided DNS). Once my DHCP server was off on my router, and enabled in Pihole (IP ranges are identical to router defualt, and Router gateway is the Router ip([192.168.1.1](https://192.168.1.1)))

But I get the error DNSMASQ\_CONFIG FTL failed to start due to process is missing required capability NET\_ADMIN

&#x200B;

I have no idea how to fix this. In order to get pihole to work in the first place (port 53 already in use error) i ran the command /etc/init.d/dnsmasq stop  and that was able to get pihole to start in the first place.

&#x200B;

In docker, Network was set to host (default is bridge), and Ill go ahead and post a link to a pastebin of my dockercompose.yml incase there is issues there.

[https://pastebin.com/FGPQUXzE](https://pastebin.com/FGPQUXzE)

&#x200B;

Any help would be greatly appreciated!!",pihole,1648097194.0
6707,comment,2,i20o5ul,,"There was a bug with the latest docker version and docker pihole that stopped ftl to run, entering in a loop, I solved it by adding ""DNSMASQ_USER='root'"" to the environment variables",pihole,1648176770.0
6708,comment,1,i20sbdv,,I will try this. Thanks for the help!,pihole,1648178818.0
6709,post,1,tlwrk9,PiHole doesn't connect to the Internet - Please help!,"This is my setup: Raspberry Pi 4 connected to Google Nest WiFi via ethernet.

It works just fine when I reset my network and connect all the devices again. I set the DHCP pool to [192.168.86.2](https://192.168.86.2) to point all the traffic to nest router to pi-hole. Pi-Hole assigns DNS for all the devices. I have set a static ip for most of devices. I'm able to ping the pi-hole, but it loses access to internet.

This gets on my nerves due to my lack of knowledge on how to debug and fix this. ~~I'm unable to upload my debug log.  I get this message at the end.~~ 

&#x200B;

~~\[?\] Would you like to upload the log? \[y/N\] y~~

~~\* Using curl for transmission.~~

~~\* curl failed, contact Pi-hole support for assistance.~~

~~\* Error message: curl: (6) Could not resolve host: tricorder.pi-hole.net~~

~~\[✗\] There was an error uploading your debug log.~~

~~\* Please try again or contact the Pi-hole team for assistance.~~

~~\* A local copy of the debug log can be found at: /var/log/pihole\_debug.log~~

~~EDIT: I can copy paste my debug log, if that's ok.~~

&#x200B;

EDIT 2:

Reset the network and pi to same settings to connect. and generate debug log: [https://tricorder.pi-hole.net/vlWiHuSM/](https://tricorder.pi-hole.net/vlWiHuSM/)

It works now, but I'm confident it will stop working in a few hours. Can you help me find the root cause of this issue? How do I fix this? Thanks a lot! :)

&#x200B;

&#x200B;",pihole,1648093114.0
6710,comment,2,i1wan7j,,"[Google nest wifi pihole](https://www.reddit.com/r/GoogleWiFi/comments/ifth3x/nest_wifi_how_to_use_pihole_dns/?utm_medium=android_app&utm_source=share)

This link might help, but I thought you couldn't change the LAN IP on the nest wifi routers and they were stuck in the 192.168.1.x network.

I might be wrong on that but I thought that was a thing with them.",pihole,1648099782.0
6711,comment,2,i1wd5ys,,"Well the inability to upload the log is consistent with the pihole being unable to talk to the internet. 

What I’m confused about is your addressing scheme. You say you are setting the dhcp pool to a single address. You say you are setting statics for most things. You have confirmed that the devices are trying to use the pihole for dns. I assume either statically assigned as well or via a dhcp/automatic dns setting even if they aren’t getting the address this way. 

You say they can ping the pihole which implies that you are completely confident what address is the pihole, but forgive me as a troubleshooting step I find myself asking for you to be certain, and it isn’t another device on your network responding. 

While on the pihole - can you ping your router? By IP. Can you traceroute to the outside? Use 8.8.8.8 as a target. 

At the moment this feels like a networking issue with the pihole device which is different than pihole breaking the network, if dns is crippled because the pihole which is doing dns can’t get out the network may be fine. It may be broken. Can non-pihole devices reach the outside? What does a trace look like from them?",pihole,1648101633.0
6712,comment,2,i1xj90t,,Google Nest WiFi routers use 192.168.86.x. I went through that link when I set up the pi-hole. Thanks,pihole,1648130397.0
6713,comment,1,i1x8n3v,,"I believe that is what is going on - pi-hole is not able to talk to the internet. This is my setting on the Nest WiFi. DNS set to custom: 192.168.86.2. Under LAN settings, Router LAN IP set to 192.168.86.1, DHCP Pool start and end at 192.168.86.2 . IPv6 disabled. DHCP IP reservations, one made for RaspberryPi at 192.168.86.2 

After ssh'ing into my pi-hole, when I ping 192.168.86.1, I get a response. I also get a response when I ping the other devices on the network. But if I ping ""ping www.google.com"" I get no response. I'm unable to trace to outside. Also I see that my Nest WiFi router seems to be blinking yellow light (it was working just fine all day yesterday).",pihole,1648125387.0
6714,comment,1,i1xj4oe,,"Reset network to get debug log, edited post to reflect details",pihole,1648130344.0
6715,post,4,tlvuiq,Chrome vs DuckDuckGo on Android,"I have ready this and other subs up and down but just can't find a solution... My pihole works the way it is supposed on on all my laptops no my network. However, with my Android phone I am having trouble. Chrome goes straight to [8.8.8.8](https://8.8.8.8) despite the fact that I changed DNS 1 & 2 to the pihole IP. When I use DuckDuckGo on the same Android phone it pihole does its trick and all queries go via the pihole IP. Please, for the love of god, how can I tell my phone to use pihole 100% of the time and not just with selected apps?? Thanks.",pihole,1648090098.0
6716,comment,1,i201s7p,,"Any router should be able to set up static routes.  I did that on my stock CenturyLink DSL router and set up static routes for 8.8.8.8 and 8.8.4.4.  That seems to do the trick.

https://support.strongvpn.com/hc/en-us/articles/360046949754-Blocking-Google-DNS",pihole,1648166654.0
6717,comment,0,i1vwsy5,,https://benninger.ca/posts/force-dns-go-through-pihole/,pihole,1648091523.0
6718,comment,0,i1vwu1z,,https://www.reddit.com/r/pihole/comments/apfrpz/asus_router_owners_simple_way_to_force_all_dns/,pihole,1648091539.0
6719,post,1,tlrc0o,Having trouble logging in through SSH to my Pihole,"When I attempt to SSH into my Pihole or even physically using the Raspberry Pi with keyboard attached, I cannot login. It prompts me with ""login as:"". This is not the standard pi, raspberry combo that would allow me to get in to the Raspberry Pi itself. It seems to be looking for my ""@ pihole"" login info.

Is there anything aside from reformatting and starting over that I can do to get through this? I'm fairly certain that I didn't choose to create a custom login when I built the Pihole. 

&#x200B;

I have my password for the web interface and can login that way. However, that will not let me update my OS and Pihole software like I need to.",pihole,1648084698.0
6720,comment,3,i1vk8mh,,Pi-hole installation does not change any of your ssh login user credentials.,pihole,1648085575.0
6721,comment,4,i1vkhi9,,">It seems to be looking for my ""@ pihole"" login info.

I assure you it's not.",pihole,1648085686.0
6722,comment,2,i1w6tsj,,"When you set up the RPi, you named it pihole which is why the prompt is ""@pihole"". 

Assuming that you used the Raspian distro, the default password is 'raspberry' so if that is not working then you changed the password after the initial setup... which is what you should have done and likely what any decent guide would tell you to do. So, do you remember what password you used when you set it up?",pihole,1648097180.0
6723,comment,1,i1vk3yz,,Can you post the full example of what you're seeing in the terminal when you're doing this? It's unclear from your description what exactly is going on here,pihole,1648085516.0
6724,comment,1,i1vkyoy,,Have you tried username = pi and password = raspberry?,pihole,1648085901.0
6725,comment,1,i1vntxi,,"You don’t have to start over. https://www.raspberrypi-spy.co.uk/2014/08/how-to-reset-a-forgotten-raspberry-pi-password/

Wondering if the IP address of your pihole.local is what you think it is. Meaning you are really ssh’ing to some other system.",pihole,1648087188.0
6726,comment,3,i1vla2d,,"Admittedly, I'm a level 0 Linux user.",pihole,1648086044.0
6727,comment,2,i1vlvgu,,"[https://imgur.com/rPHySn7](https://imgur.com/rPHySn7)

This is a screenshot of my PuTTY terminal",pihole,1648086305.0
6728,comment,1,i1vlam2,,Yes,pihole,1648086051.0
6729,post,3,tlku5i,Recommended Allow List for Xbox/Minecraft,"Anyone have any recommended allow lists for Xbox and Minecraft? It seems to now be blocked causing issues with logging in, therefore strife with the kids, therefore causing me stress. 

Thank you in advance!",pihole,1648077892.0
6730,comment,5,i1v5het,,[Commonly Whitelisted Domains.](https://discourse.pi-hole.net/t/commonly-whitelisted-domains/212),pihole,1648079025.0
6731,comment,1,i1v3i7u,,Manually set dns on the xbox and move on.,pihole,1648078163.0
6732,comment,4,i1vdu23,,Thanks for the reply.  It has helped me with some domains that they did not know what it was for.  million hugs.,pihole,1648082719.0
6733,comment,1,i1vrc0f,,"Thx, will check it out.",pihole,1648088823.0
6734,comment,2,i1v4h7n,,Doesn't solve my problem for Minecraft on iOS.,pihole,1648078585.0
6735,comment,0,i1v4jbk,,This is the way.,pihole,1648078610.0
6736,comment,1,i31h1v3,,This solved my problem too!,pihole,1648851853.0
6737,comment,0,i1v4pdf,,"If you do a separate vlan for all your “less than secure” devices, you can set a separate dns for them and your problem will be solved.",pihole,1648078684.0
6738,comment,1,i1vawtk,,"This, or put the Xbox in a pihole group with no filtering enabled on that group.",pihole,1648081416.0
6739,comment,1,i1vrhyq,,What may not be clear is that my kids also play Minecraft and Xbox Cloud Beta on their iPads so I'm not able to isolate their devices.  Otherwise easy peasy.,pihole,1648088904.0
6740,post,1,tlib4l,"Is there a way to filter the query log by groups? If there is, I'm not finding it. If there isn't, does anyone else think this would be a good idea, like worthy of a feature request?","I've finally started utilizing Pihole groups, I've assigned static IPs to most of my clients and sorted them into groups. I have specific whitelisted domains for some groups while I have specific blacklisted domains for other groups. I'd love to be able to see all queries from an entire group. It looks like as of now, the only option is to filter by the individual clients.

So, if this isn't a current feature, is anyone else interested in it? I never know whether my ideas are worthy of an official feature request. Thanks for input!",pihole,1648073368.0
6741,comment,1,i1vkj6o,,"If it's a feature you would like to see added, make a feature request on our discourse page.",pihole,1648085707.0
6742,post,1,tlh4u7,Help - Updating via Docker,"I've had piHole installed and functioning for awhile but I've never been able to update it. Can someone assist me or point me to directions for Synology NAS/Docker update? What I've tried hasn't worked and I end up having to revert to the old install.

This is what I'm looking at. And pulling the newest image always seems to leave me with an install that keeps restarting itself.

https://preview.redd.it/kgjtjihye7p81.jpg?width=526&format=pjpg&auto=webp&s=6ff6857023b161996c3e01b4c675aede4f091a23

UPDATE: Followed posted instructions and I'm now caught in a loop of rebooting and without internet on my other devices.

 ""Pihole has stopped unexpectedly"". :-(

LOG:

2022-03-24 21:28:47 stdout \[cont-finish.d\] executing container finish scripts...

2022-03-24 21:28:47 stdout \[cont-init.d\] 20-start.sh: exited 1.

2022-03-24 21:28:47 stdout /start.sh: line 57: /root/ph\_install.sh: No such file or directory

2022-03-24 21:28:47 stdout \[cont-init.d\] 20-start.sh: executing...

2022-03-24 21:28:47 stdout \[cont-init.d\] 05-changer-uid-gid.sh: exited 0.

2022-03-24 21:28:47 stdout \[cont-init.d\] 05-changer-uid-gid.sh: executing...

2022-03-24 21:28:47 stdout \[cont-init.d\] executing container initialization scripts...

2022-03-24 21:28:47 stdout \[fix-attrs.d\] done.

2022-03-24 21:28:47 stdout \[fix-attrs.d\] 01-resolver-resolv: exited 0.

2022-03-24 21:28:47 stdout \[fix-attrs.d\] 01-resolver-resolv: applying...

2022-03-24 21:28:47 stdout \[fix-attrs.d\] applying ownership & permissions fixes...

2022-03-24 21:28:47 stdout \[s6-init\] ensuring user provided files have correct perms...exited 0.

2022-03-24 21:28:47 stdout \[s6-init\] making user provided files available at /var/run/s6/etc...exited 0.

2022-03-24 21:28:44 stdout \[s6-finish\] sending all processes the KILL signal and exiting.

2022-03-24 21:28:41 stdout \[s6-finish\] sending all processes the TERM signal.

2022-03-24 21:28:41 stdout \[s6-finish\] waiting for services.

2022-03-24 21:28:41 stdout \[cont-finish.d\] done.",pihole,1648072107.0
6743,comment,2,i1uqfal,,Watchtower docker img auto updates other imgs,pihole,1648072751.0
6744,comment,1,i1uq7wj,,Delete old one and create new,pihole,1648072667.0
6745,comment,1,i1v4a7b,,[Updating Containers in the Synology Docker Package](https://drfrankenstein.co.uk/2021/09/24/updating-containers-in-the-synology-docker-package/),pihole,1648078499.0
6746,comment,1,i1vc8ld,,"https://mariushosting.com/how-to-install-pi-hole-on-your-synology-nas/

https://mariushosting.com/synology-how-to-update-docker-image/",pihole,1648082005.0
6747,comment,1,i1uzhak,,I wouldn't want to auto update. Afraid something goes wrong and then I'm without internet until I reconfigure,pihole,1648076450.0
6748,comment,1,i1vg5hv,,You can also use Ouroboros with notifications when updating containers.,pihole,1648083743.0
6749,comment,1,i1zfgn9,,"Following this... Once I ""reset"" my container am I going to lose my existing pi-hole config? It's indicating all data will be lost.

Damn it. Followed the instructions exactly and now my pi-hole is rebooting constantly. ""Pihole has stopped unexpectedly"".  :-(

&#x200B;

LOG:

2022-03-24 21:28:47	stdout	\[cont-finish.d\] executing container finish scripts...  
2022-03-24 21:28:47	stdout	\[cont-init.d\] 20-start.sh: exited 1.  
2022-03-24 21:28:47	stdout	/start.sh: line 57: /root/ph\_install.sh: No such file or directory  
2022-03-24 21:28:47	stdout	\[cont-init.d\] 20-start.sh: executing...   
2022-03-24 21:28:47	stdout	\[cont-init.d\] 05-changer-uid-gid.sh: exited 0.  
2022-03-24 21:28:47	stdout	\[cont-init.d\] 05-changer-uid-gid.sh: executing...   
2022-03-24 21:28:47	stdout	\[cont-init.d\] executing container initialization scripts...  
2022-03-24 21:28:47	stdout	\[fix-attrs.d\] done.  
2022-03-24 21:28:47	stdout	\[fix-attrs.d\] 01-resolver-resolv: exited 0.  
2022-03-24 21:28:47	stdout	\[fix-attrs.d\] 01-resolver-resolv: applying...   
2022-03-24 21:28:47	stdout	\[fix-attrs.d\] applying ownership & permissions fixes...  
2022-03-24 21:28:47	stdout	\[s6-init\] ensuring user provided files have correct perms...exited 0.  
2022-03-24 21:28:47	stdout	\[s6-init\] making user provided files available at /var/run/s6/etc...exited 0.  
2022-03-24 21:28:44	stdout	\[s6-finish\] sending all processes the KILL signal and exiting.  
2022-03-24 21:28:41	stdout	\[s6-finish\] sending all processes the TERM signal.  
2022-03-24 21:28:41	stdout	\[s6-finish\] waiting for services.  
2022-03-24 21:28:41	stdout	\[cont-finish.d\] done.",pihole,1648157208.0
6750,comment,1,i1zkxph,,"I have updated containers like that many times, never a problem, configuration and data is retained. I installed Pihole using this guide: [How to Install Pi-Hole on Your Synology NAS – Marius Hosting](https://mariushosting.com/how-to-install-pi-hole-on-your-synology-nas/) Step 4+5 is where the config/data is stored, it is not affected when resetting the container to a new image.",pihole,1648159424.0
6751,comment,0,i1zm4zg,,"No luck. Backed up my config and nuked the container to start over. Even on a fresh image (nothing updated) it's restarting ever few seconds.

Tried running as per instructions above using script.  Output email below:

&#x200B;

Dear user,  
  
Task Scheduler has completed a scheduled task.  
  
Task: Install Pi-hole  
Start time: Thu, 24 Mar 2022 18:18:17 GMT  
Stop time: Thu, 24 Mar 2022 18:18:18 GMT  
Current status: 125 (Interrupted)  
Standard output/error:  
docker: invalid reference format: repository name must be lowercase.  
See 'docker run --help'.",pihole,1648159914.0
6752,post,5,tl8tto,PiHole Blocklist duplicate comparison/aggregation script?,"Is there a script to compare PiHole blacklists?

Also combine differences?

If not, any ideas on programming one?",pihole,1648062932.0
6753,comment,2,i1u4i5u,,"Something like this?

https://github.com/yubiuser/pihole_adlist_tool",pihole,1648064272.0
6754,post,1,tl5pgz,crazy amounts of queries,"Hey guys!

Maybe someone can help me.
I have one android device in my home network which queries google.com and connectivitycheck.gstatic.com. And those queries hit often 1 query per second! (But not everytime. More like 4/7 days per week)
The domains are not blacklisted or in any kind of adlist.
They are permitted. 
I don't know why this specific Smartphone does query this two specified Domains that often.
Also the battery of it is drained really fast.

I hope someone can help me!
Thanks!",pihole,1648059636.0
6755,comment,2,i1u6k1c,,"Google services send out queries for several different things. Some are important, some are logging information, and some are for ad services. PiHole does block a couple of these but not all because, as I stated, some are necessary. Now, this is not the right place to analyze your trouble, but I would guess that if this issue is on one phone, that is your problem. In my experience, if you have a phone that constantly queries something and it is killing your battery, you have spyware or malware. That's all I'm going to say here on the PiHole forum.",pihole,1648065054.0
6756,comment,1,i1tu6mw,,"I have roku's and roku tv's that each will query up to 2 times every second, it's really annoying, so obnoxious.  I wish there was an open source verion of roku, I'd replace all of these in a second.",pihole,1648060317.0
6757,comment,2,i1u8qlt,,"> That’s all I’m going to say here on the PiHole forum.

so mysterious 😳",pihole,1648065874.0
6758,comment,1,i1u6v6r,,I already made an factory reset and it's still going on. But thanks,pihole,1648065169.0
6759,comment,1,i1u6p15,,I have 2 Roku boxes and a TCL/Roku TV and I do not have that problem.,pihole,1648065106.0
6760,comment,1,i1uxer2,,"I know it's not the point, but you could whitelist them and they'd query much less often.",pihole,1648075587.0
6761,comment,1,i1ur2h5,,"I would be happy to post the screenshot, but this forum would just delete it.",pihole,1648073008.0
6762,comment,1,i1vwmqm,,TCL and Hisense Roku TVs and they absolutely do.,pihole,1648091437.0
6763,comment,1,i1v2ih9,,"Or just ignore it, and leave it to scream its heart out. There's no issue here.

If OC didn't want these domains blocked, presumably they wouldn't be. It'll take a *lot* more than Joe Homeuser probably thinks to overwhelm Pi-hole, even on seemingly very resource deprived hosts. DNS traffic is tiny, and the computational overhead very small.

An original RPi model B 256M can push ~100qps.",pihole,1648077735.0
6764,comment,2,i1v6gdr,,">but this forum would just delete it.

Why would you post it as a new thread, instead of just linking it here, in this conversation, where it absolutely won't be deleted?",pihole,1648079450.0
6765,comment,1,i1x1d80,,Maybe you aren't set up correctly. I get anywhere from 6 to 10 queries per day from my Roku units.,pihole,1648121148.0
6766,comment,0,i1wyvpp,,"I use a pi 4 overclocked  ಠ_ʖಠ 
And try  to keep query low",pihole,1648119482.0
6767,comment,1,i1xlpqx,,"No, correct is blocking the analytics, which you’ll get a lot more than 6-10 queries as it continually retries. If you’re only getting 6-10 then you’re not blocking the tracking and analytics.

High numbers of blocked queries means it’s working, not the other way around.",pihole,1648131434.0
6768,comment,1,i1zxagy,,"While that's nice, in context both things are completely and thoroughly unnecessary.",pihole,1648164655.0
6769,post,68,tl42wn,What changed?,"I've been running pihole for a while (few years) on an old RPi model B.  Not B+, not 2/3/4, just an old single core 512MB 'B'.  The dang thing just kept going and going and going and going...  Finally a month or two ago the SD card finally gave up.  Did a fresh install of Raspberry Pi OS, and re-set up pihole.

Before... it'd happily burble away, blocking ads and telemetry as necessary, running at about 0.2-0.5 load average.  Only time it ran any higher was when I ran updates.

Now... it's continually running at 0.5-0.8 load average, and routinely spiking to 1.5 or above, sometimes long enough to pop warnings about the LA being greater than the number of cores for more than 15 minutes.  *And* I'm now getting the warnings about exceeding the DNSmasq requests limit.

Did something major change in pihole?  Nothing new has been added to the home network (so far as I know), other than the wife's ancient MBP got replaced with a new MacBook Air M1.  Pretty sure that ain't the problem.

I'm guessing it's time to retire the old warhorse... which kind of sucks, given the situation regarding availability right now.  I've got a RPi4B+ that I'm trying to get docker and some other stuff set up on.  Guess I'll be adding pihole to that mix... :/",pihole,1648058298.0
6770,comment,32,i1tt1aq,,"Are you using the same OS as before? I noticed that Bullseye seems to have a bit more overhead than Buster, Stretch, and Jessie did.",pihole,1648059881.0
6771,comment,23,i1tqnke,,"ssh into your pi and run htop to see what is taking away your resources…

Did you install raspian with desktop environment?

I am running pihole on a zero w (not: 2) which is essentially similar to what you run it on… no issues at all, pihole is resource-friendly.",pihole,1648058985.0
6772,comment,34,i1ty2aw,,"Try DietPi, super lightweight and supports pihole",pihole,1648061792.0
6773,comment,9,i1tq5oz,,Why use Docker on a pi? It seems to me just to be adding unnecessary overhead.,pihole,1648058794.0
6774,comment,2,i1u70sx,,"Ive seen this too. Ive reinstalled the OS, pihole. Its slow and unbound install fails. I've reinstalled the OS 2 times.",pihole,1648065227.0
6775,comment,2,i1vnyx5,,"I'm so glad I ran into this post. I dug out my RPi 1 Model B last week and went through a fresh install and noticed the same high load and memory usage for a few days. Reading through the comments here, I realized that the OS (installed from [Raspberry Pi Imager](https://www.raspberrypi.com/software/)"" was the full blown desktop version. I went back and reinstalled the Lite (Legacy) ""Buster"" version and it's been great. 

The memory usage went from 30-40mb to about 12mb. Load went from 0.8-2 to about 0.5-0.8.",pihole,1648087252.0
6776,comment,-6,i1tyssh,,"Your pi is fine. I get the same bogus messages and I run it on a 24 core server with 128gb of ram. It's an lxc container under proxmox for me.

Don't expect help from the devs. They blew me off about it with some claims of monitoring that was ignored before is now on by default or some shit. It's definitely not your hardware but some crap the devs changed. I went back to Older pihole that works like I expect.

All I know for certain is that server barely sees any usage yet pihole will be claiming its maxed out 

Its made me consider switching to ad guard tbh. Or back to active dir


EDIT - Not sure why I am getting downvoted for literally speaking the truth here. WTF people? Sycophants? OR are you brigading me from other subs? Weird downvote, just saying.",pihole,1648062079.0
6777,comment,1,i1vmwk7,,">	Did something major change in pihole?

Not recently, but an update near the end of 2021 increased the visibility of dnsmasq warnings. 

https://pi-hole.net/blog/2021/12/22/pi-hole-ftl-v5-12-web-v5-9-and-core-v5-7-released/",pihole,1648086766.0
6778,comment,1,i1urlk1,,"Risky to assume it might be linked to the recent PiHole update? Mine has been running fine and unnoticed on my VPS until I did the update a week ago.

I've started seen the dnsmasq messages (devs have explained it many times in the sub), but now the load is much on the server. I don't know why. The other instance that I haven't updated yet seems to be doing as fine as always.

Will keep an eye on all this.",pihole,1648073218.0
6779,comment,-9,i1tsv1h,,install raspbian and install pihole and pivpn,pihole,1648059816.0
6780,comment,1,i1yjj17,,thanks for the tip. i have already swapped my old smartphone for a new pi because my old ones struggled with reading packages list. maybe i will try dietpi,pihole,1648144640.0
6781,comment,9,i1uj86n,,"Good question. If I SSH onto my pie and see Xorg/Xserver is using the most CPU, have I installed the desktop version by mistake?",pihole,1648069890.0
6782,comment,2,i1u64ra,,"The only thing that was different this go-around (besides upgrading the OS from the old to the current) was a) *not* running unbound this time (yet) and b) I had tailscale installed for remote access.

I didn't think that was particularly resource-intensive, but I uninstalled it anyway.  The numbers *seem* better... but this is the 'slow' part of the day around the house.  We'll see this evening when the smart TV starts wanting to phone home continuously, along with FB, YT, and other browsing activity.",pihole,1648064894.0
6783,comment,1,i1ut9ji,,"Okay... I'm remoted in via SSH, looking at htop... there's no one thing that is consuming gobs of CPU, at least that I can see.  It's jumping around, switching between processes, so it's a little hard to get a good grip on what's going on.

I've got /lib/systemd/systemd-journald consistently at the top of the list, at a whopping 1.8% CPU and 12% memory.  Next seems to be jumping back and forth between pihole-FTL, lighttpd, rsyslogd and occasionally avahi-daemon.  Again, none of them seem to be consuming more than a percent or two of CPU and about the same of memory, so I'm not sure what's making the load average swing between 0.6 and 2+?",pihole,1648073890.0
6784,comment,1,i1u47kk,,[deleted],pihole,1648064158.0
6785,comment,13,i1u0kpd,,"Docker really shouldn't be creating any meaningful amount of additional overhead, even in a resource constrained environment like a pi.

https://stackoverflow.com/questions/21889053/what-is-the-runtime-performance-cost-of-a-docker-container",pihole,1648062767.0
6786,comment,3,i1u1b9b,,https://www.reddit.com/r/selfhosted/comments/poca6i/selfhosting_all_these_services_on_two_raspberry/,pihole,1648063051.0
6787,comment,1,i1vk7eh,,">and unbound install fails

Fails how?

With what message?

As familiar with Unbound as I am it's pretty difficult to imagine it not telling you *why* this is the case. Could you give me an example of your failed installation output?",pihole,1648085560.0
6788,comment,15,i1u4o1j,,">	Don’t expect help from the devs. They blew me off about it with some claims of monitoring that was ignored before is now on by default or some shit.

We did?  Link to this discussion?",pihole,1648064335.0
6789,comment,23,i1ux5g9,,You most certainly have,pihole,1648075481.0
6790,comment,6,i1us3nl,,"Well, that appears to be a big 'No'.  Load average is back up, consistently high again.",pihole,1648073420.0
6791,comment,2,i1v073p,,Try rolling it back to a prior os. This new one is NOT pi friendly ATM.,pihole,1648076753.0
6792,comment,3,i1uu8m6,,Maybe it’s a disk IOPS bottleneck effectively throttling the system. It sounded like you might have switched out the SD card…,pihole,1648074288.0
6793,comment,4,i1u33o7,,Interesting. It sure taxes my macbook.,pihole,1648063734.0
6794,comment,6,i1u94vm,,"Not sure where /u/Fearless-Secret77 had a discussion with you about the topic... but this comment essentially makes the same statement:

https://www.reddit.com/r/pihole/comments/s7ubp8/dnsmasq_max_concurrent_request/htck14h",pihole,1648066024.0
6795,comment,5,i1uav5m,,"Wasn't under this username and I was told that the new version is just showing messages that previously had been suppressed. Thus the constant dhcp, load, and etc msg at the top of the screen. No effort was actually put into listening to what I was saying about it misreading load from inside an lxc container... I know there is only a few of ya so if it wasn't you it was the other one.

Give me a bit, am at work, and I'll dig the convo up, was either here or github. Here I think",pihole,1648066683.0
6796,comment,5,i1ujnx9,,"I was wrong it was this account we spoke thru.  


[https://www.reddit.com/r/pihole/comments/sz221o/turn\_off\_warning\_permanently/hy24gvz/?context=8&depth=9](https://www.reddit.com/r/pihole/comments/sz221o/turn_off_warning_permanently/hy24gvz/?context=8&depth=9)",pihole,1648070060.0
6797,comment,3,i1v1c37,,"Kinda tough with the previous SD card being dead and all.

Or do you mean installing the previous release to the new card?  I think I'd just go with Dietpi if I have to do that.",pihole,1648077235.0
6798,comment,1,i1xsc41,,">	This new one is NOT pi friendly ATM.

In my experience, this is not the case at all. I have Bullseye running on the following Pi devices with zero issues (speed, RAM, etc):

2x Pi -3B+, 2x Pi Zero W, Pi Zero2 W.",pihole,1648134109.0
6799,comment,1,i1uvbta,,"Actually... I did.  Note the part in the OP where I mentioned that the original SD card went tits up?  Kind of **had** to go with a new card.

That said... I thought most of pihole ran in memory?  Further, the system has log2ram installed (both previously and currently) to minimize the amount of writing to disk.",pihole,1648074735.0
6800,comment,11,i1u3miw,,It's different on a Mac because it has to run in a virtual machine. This is not required on Linux.,pihole,1648063935.0
6801,comment,2,i1ykapv,,"Your question was answered.  How is that blowing you off?

Nowhere in that thread was a load warning from an LXC container discussed.",pihole,1648144942.0
6802,comment,9,i1v42pa,,"Yep old os on the new card, Dietpi may be an option if it's not based on buster or it'll likely have the same issues.

Remember your pi is ancient in comparison to today's, so it by default won't handle the overhead in today's oses. Dietpi removes some stuff but old hardware can and will still get bogged down.",pihole,1648078408.0
6803,comment,7,i1vtp5a,,If it's just for pi-hole then I don't see any reason not to go for dietpi. It has an image for pi1.,pihole,1648089969.0
6804,comment,1,i1x1khp,,"Rpi Bullseye is a bit heavier on older Pi's.
It's also seen on the Zero which is based on the OG Pi

Consider going back to buster or an alternative os",pihole,1648121298.0
6805,comment,0,i1xsiog,,Put a fresh install of Bullseye Lite on a new card.,pihole,1648134182.0
6806,comment,1,i1y4p6k,,In my case on a pi1 the new os casues this exact same issue. Roll it back to stretch it disappears.,pihole,1648138934.0
6807,comment,4,i1v965g,,"The single biggest change you'll probably be able to make regarding minimising writes to disk would be disabling Pi-hole's long term database. In my experience very few users actually have a reason to collect a full year's worth of query history, and will only ever access it when they've got a consistent and repeatable case they want to debug - or just for the general novelty of it, where it can be enabled again as required if desired. LTDB accesses on this host are going to be pretty painful at the best of times, in the best of scenarios. That's fairly resource intensive.

Regarding log2ram, you realistically don't have the default 40MB log2ram uses for ramdisk to spare. When you only have 512MB total, dedicating 40MB of this to a ramdisk for logs you're almost certainly not going to be regularly accessing or utilising, seems more than a little wasteful.

Personally, I would at least halve that, to 20MB, and limit the journald to a max journal size of 10MB as described in the additional log2ram install/setup documentation very few people seem to read for whichever reason. You will need to flush `/var/log` after changing the journal size, as your journal will almost certainly already exceed whichever limit you sent. Nothing in this directory is intended to be persistent. It's fine to nuke from orbit.

If you really wanted to, you could disable most system/service level logging entirely.

You can also claw some RAM back from the GPU. Presumably this is running headless.

Add

```
gpu_mem=16
total_mem=512
```

to `/boot/config.txt` and cycle the machine, to recover RAM previously needlessly allocated to the GPU.",pihole,1648080651.0
6808,comment,1,i1yihoo,,">I thought most of pihole ran in memory?

It does.",pihole,1648144234.0
6809,comment,1,i1u69sk,,"Really? So if I have a LAMP in docker, it's using native php, mysql, etc... WTF is the point of docker?",pihole,1648064947.0
6810,comment,1,i1y9uuv,,"Worked my way through that last night.  For some reason DietPi hits a snag on this device and won't do a headless install - goes into 'emergency' mode.  I hit Ctrl+D to get past the warnings, and everything proceeded as per normal, albeit slowly.  I'd forgotten how slow a complete install and/or updating software on this thing is ;)

We'll see if there's a noticeable/functional difference over Raspi Lite, or if I really do have to roll it back.  Pretty sure I still have a Buster-based DietPi image around here somewhere...

I've never had to roll back or hold the OS at an old / out-of-date release before.  Not sure how I feel about that.",pihole,1648140893.0
6811,comment,1,i1yi4wi,,">Dietpi may be an option if it's not based on buster

Current DietPi is Bullseye.

>Remember your pi is ancient in comparison to today's, so it by default won't handle the overhead in today's oses

On what do you base this statement?",pihole,1648144098.0
6812,comment,1,i1y8hp3,,"What did you think I was running?  

Was there anything about my post that suggested I was silly enough to be running the full desktop version on a device this old/limited?",pihole,1648140368.0
6813,comment,1,i1yb58s,,">Roll it back to stretch it disappears.

Roll back to an OS that is nearing EOL support? I would think a better solution is to determine why the newest supported release is causing problems.

    9.13 (18 July 2020; 20 months ago) this is the final update for codename Stretch.[166]
    Stretch long term support reaches end-of-life (30 June 2022; 3 months' time)[167]

https://en.wikipedia.org/wiki/Debian\_version\_history#Debian\_9\_(Stretch)",pihole,1648141385.0
6814,comment,1,i1v9o7p,,While I don't disagree about any particular point... I'm not running out of memory.  Not even close.  Utilizing maybe 12-14% of the available memory.,pihole,1648080874.0
6815,comment,12,i1u74k7,,"    WTF is the point of docker?

Not having to fight incompatible versions between your system libraries and apps, vs. your development environment.",pihole,1648065265.0
6816,comment,1,i1yaoef,,">What did you think I was running?

There is no way to know, since you didn't specify in your post.

I would visit the Raspbian forums for solutions to any Bullseye specific issues.  From your post, it appears Pi-hole is working properly.",pihole,1648141205.0
6817,comment,3,i1vdtaf,,">Utilizing maybe 12-14% of the available memory.

Yes with an if, no with a but.

I'm assuming you're getting this information from Pi-hole's GUI? Memory usage is displayed somewhat weirdly, possibly counter to expectation, in Linux. You almost certainly do not have ~85% of your RAM ""free"". It counts RAM that's currently in use but which *could* potentially be freed, as being free. If you stop to think about it it should be pretty clear that you're absolutely not running a Linux distro using only ~70MB of RAM.

You can view the disparity between free RAM and RAM that's *actually* free, using the following command

```
free -h --si
```

to print a human readable summary of RAM usage in SI unit notation. Note the difference between ""free"" and ""available"" RAM.

Additional note: Take note of whether or not there is a swap available when viewing the results of the `free` command. If there's a swap file in use, you'll also be wanting to remove this to limit writes to the SD card. Raspbian/RaspiOS used `dphys-swapfile` to manage swap. You can do

```
sudo dphys-swapfile swapoff
sudo dphys-swapfile uninstall
```

to disable swap and delete the swap file located on disk, then you can optionally uninstall the `dphys-swapfile` package.",pihole,1648082710.0
6818,comment,-4,i1ue51f,,"So... what's the point of docker, if it uses native apps?",pihole,1648067950.0
6819,comment,1,i1yb3i6,,">  From your post, it appears Pi-hole is working properly.

At this point, I would agree.",pihole,1648141367.0
6820,comment,1,i1vh9fw,,"Actually, I was getting the information from `htop`.

This is what I get from `free -h --si`:

    pi@rpi-alpha:~ $ free -h --si
                   total        used        free      shared  buff/cache   available
    Mem:           429M         53M         61M        8.0M        314M        315M
    Swap:           99M        0.0K         99M


Honestly, I think I've gotten my money's worth out of this little beastie over the years.  I might try dietpi just for giggles - but if it comes down to needing to run an older release because the hardware can't cope with the new/current versions, or going in and trying to manually optimize/tune things to squeeze one more year out of it... I've got other projects I'd rather work on.",pihole,1648084235.0
6821,comment,7,i1uiink,,"A container software like LXC or Docker isolates everything from your main system. Docket ist mainly used to have a controlled environment on every system. Everything is included in a docker image. You don’t have to mess around with any underlaying structures like networking, firewalls, cpu resource assignment, ram resource assignment, library’s and so on",pihole,1648069615.0
6822,comment,12,i1uhqss,,"If you've never experienced ""dependency hell"", then you probably *wouldn't* understand.",pihole,1648069322.0
6823,comment,2,i1vjkob,,"Right, there we see the free RAM is actually only ~60MB, with the remainder made up of things that *could* be freed, provided something else is willing give up its buffer and cache first. Clawing back what you can from the GPU and log2ram isn't going to be strictly necessary, but it most definitely won't hurt.

As an aside, DietPi is still the same OS under the hood. There's no real reason why you couldn't get comparable performance starting with RaspiOS and removing packages and services as required.",pihole,1648085273.0
6824,comment,0,i1uthk9,,"I've never used Docker on Linux, but on my Mac I can specify PHP version and it pulls a new container. It doesn't work like that on Linux?",pihole,1648073980.0
6825,comment,2,i1ut5mh,,What? You mean like composer or npm?,pihole,1648073847.0
6826,comment,4,i1v9luy,,"It does work like that on linux, but on linux the binaries in the container are native linux binaries and run natively.

Teh container is (to massively oversimplify)  a linux environment that runs in an isolated namespace that can´t  see out of the container but still runs natively fast using the existing linux kernel.

On a mac it's the same thing except that a mac can't run a linux environment and doesn't have a linux kernel, so docker spins up a VM to handle that, and then does some _majorly_ slow disk mounting magic to give the linux vm access to folders outside of the VM, which are slow as fuck.

On linux running a binary in docker vs not in docker should have almost no speed difference, and allows the binary to run in whatever arbitrary environment with arbitrary library versions and whatnot that it needs",pihole,1648080845.0
6827,comment,2,i1vaf68,,"Imagine the following scenario:

 - Service A requires package X, greater than version Y

 - Service B requires package X, less than version Y

 - Only a single instance of package X can be installed on the host

What's your solution to this that isn't containerisation?",pihole,1648081201.0
6828,comment,3,i1utcql,,Like that but now add OS dependencies and you've got docker as a solution!,pihole,1648073925.0
6829,comment,1,i1uto91,,"> Like that but now add OS dependencies and you've got docker as a solution!

Except it doesn't run a VM on Linux. So, you've only got the native environment.",pihole,1648074055.0
6830,comment,2,i1vihae,,"The VM isn't the important part of Docker, it's the containers. Docker on Linux provides the controlled environment and isolation that you enjoy from a VM without the performance overhead of actually virtualizing hardware.

You still get disk images and isolation with Docker on Linux, they just run natively fast on the host hardware.",pihole,1648084782.0
6831,comment,0,i1uz41t,,Yep! Makes me want to go back to using Linux again!,pihole,1648076295.0
6832,post,1,tl196p,"Works fine in docker, until I reboot my NAS.","Setup pihole using docker on my NAS.  Pihole works perfectly for as log as I leave it, but if I need to reboot my NAS I get Status 'unknown' and if I click enable, it appears to enable until I click anywhere in the UI and it goes back to 'unknown'.  Only solution is to delete the container and start from scratch.

&#x200B;

Logs still show live queries.  Is this just a UI bug I am unaware of?",pihole,1648054625.0
6833,comment,2,i1tse66,,"Could be a lot of things, but I have 2 questions:

1. Do you have e the restart flag for the container?

2. Are you using persistent volumes?

Volumes would save your configs, so even if you delete the container you can map the new container to the existing volume.",pihole,1648059643.0
6834,comment,1,i1ubrlo,,"Restart flag for the container is fine.  Container starts just fine.

One thing to note is I have just checked the 'status' of pihole via command line, and it shows blocking is enabled.   The UI clearly shows status 'unknown', and gives me the option to enable. It does therefore appear to just be a UI glitch",pihole,1648067025.0
6835,post,0,tkpy8l,Pihole not blocking Roku YouTube,"Hi, 
Newbie here. 

I have my pi connected directly to my home router and have pihole up and running. I ssh from my Mac and all is working great, the web interface shows all the ads I’m blocking (I have 500,000 Domains on Adlist which I am told is a lot lol). 

The main reason i got pihole is to block ads on Roku YouTube, but it blocks ads everywhere BUT Roku YouTube. 

Any ideas to help me? 

Many thanks.",pihole,1648027149.0
6836,comment,1,i1scv1r,,">	The main reason i got pihole is to block ads on Roku YouTube

Please see FAQ #1 in this subReddit, linked in subReddit rule 1. You cannot reliably block YT ads with Pi-hole.

https://reddit.com/r/pihole/comments/frum61/frequently_asked_questions/",pihole,1648039111.0
6837,comment,7,i1rw1t8,,"Youtube ads are notoriously hard to block, especially at a DNS level since the ads come from the same domains as the videos.",pihole,1648027738.0
6838,comment,4,i1s5uq8,,https://reddit.com/r/pihole/comments/frum61/frequently_asked_questions/,pihole,1648035079.0
6839,post,4,tkplvq,command to get list of all sites accessed by a computer,"I would like to have a command grep or something which give me a list of all domains accessed by a computer or simply denied or allowed for that computer. 

Thinking about setting up a cronjob or a list i can activate or deactivate as needed",pihole,1648025567.0
6840,comment,2,i1rtqv3,,"The query logging function in the Pihole GUI provides this.

Should also be saved as a file somewhere...",pihole,1648025712.0
6841,comment,2,i1ryzhd,,"You do that with sql commands.

This would do:

    sqlite3 /etc/pihole/pihole-FTL.db ""SELECT domain, COUNT(*) FROM queries WHERE client='192.168.1.102' GROUP BY domain ORDER BY COUNT(*) DESC;"" | head -n 20

You should replace the IP in `client='192.168.1.102'` to the IP of computer in question.

The output of the first command is ordered by frequency of domain appearence.

The `head -n 20` part gives the top 20 lines of results.",pihole,1648030161.0
6842,comment,1,i1rv63m,,I couldn’t figure out where. I was hoping some one already knew,pihole,1648026970.0
6843,comment,2,i1rvl63,,https://discourse.pi-hole.net/t/moving-the-pi-hole-log-to-another-location-device/2041,pihole,1648027332.0
6844,comment,1,i1t9231,,">I couldn’t figure out where

The query history is stored in an SQL database at ***/etc/pihole/pihole-FTL.db***.",pihole,1648052460.0
6845,post,2,tkoboj,DNSMasq warn messages in pihole docker from global IP,"Hi, I'm currently running pihole in a docker with host networking, with a dhcp server running from the pihole.


I'm having an issue where whenever my network recieves a DHCP request, pi.hole has an error in the 'diagnosis log' about not being able to assign a DHCP request from my global IP, rather than an IP in my network.


I've tried doing no-dhcp-interface=docker0 and lo with no change.

> Warning in dnsmasq core: no address range available for DHCP request via GLOBAL IP.


Where global ip my internet IP
Has anyone encountered anything similar?",pihole,1648019635.0
6846,comment,2,i1rneqo,,"The error implies there's no range configured or that it's a different network to what's used inside the docker.

Try adding: --net host and  --e INTERFACE=""eno1"" to the run command.",pihole,1648020162.0
6847,comment,1,i1rnhm1,,Check this too: https://github.com/pi-hole/docker-pi-hole/issues/355,pihole,1648020229.0
6848,comment,1,i2a6lbk,,"I ended up figuring out that it was occurring as I had DHCP server relay enabled on my router still, from when I was trying bridge networking (so presumably global IP was representing a request forwarded from the router).",pihole,1648359282.0
6849,comment,1,i2afdfp,,"Nice one, at least you fixed it.",pihole,1648366291.0
6850,post,26,tkm8ay,"If you can't login to myEquifax and the wheel just spins and spins, add these to the whitelist","Hopefully this saves someone an hour of troubleshooting... facepalm

`ci-mpsnare.iovation.com`  
`dpm.demdex.net`  
`nexus.ensighten.com`  
`sawap.equifax.com`",pihole,1648010822.0
6851,comment,14,i1rsgif,,As an alternative you can log into PiHole and disable adblocking for 5 minutes.,pihole,1648024566.0
6852,comment,2,i1uzfwi,,demdex.net is a tracking domain. How would blacklisting that break functionality?,pihole,1648076434.0
6853,comment,-2,i1t0rto,,Or just don't log into Equifax. Why support a company that lost all of our data and then lied about it?,pihole,1648049321.0
6854,comment,4,i1tboez,,"This is pretty much what I do. I even made Siri Shortcuts for my Home Screen and to use with Siri so I can easily disable and re-enable Pi-Hole without logging into the GUI. (Not my idea, someone else made the script)",pihole,1648053430.0
6855,comment,2,i1vfn84,,"Quite easily, realistically.

In pseudo-code:

```
if [[ ""$can_access_domain"" == ""true"" ]]; then
    allow_access
else
    deny_access
fi
```

Not entirely dissimilar to how basic adblock detection works.",pihole,1648083520.0
6856,comment,14,i1t6cz3,,'cause your applying for a loan and have to log in to temporarily lift a freeze? (Pretty much the only reason I ever have to log into the big 3 reporting agencies.).,pihole,1648051447.0
6857,comment,2,i1uxx3a,,"You seem to be thinking about Equifax backwards. Equifax and the other consumer credit reporting agencies sell credit reporting services to big banks and other lenders. The American people are not their consumers, banks and other companies are. 

To phrase it another way, we are not the guy in the line at KFC buying a bucket of chicken. We are the chickens. 

So nothing you do supports them or hurts them.",pihole,1648075798.0
6858,comment,0,i1uywfa,,You have to pay them to see your credit score.,pihole,1648076207.0
6859,comment,2,i1uzzd7,,"Ok. That doesn’t change the fact that it doesn’t matter if you use them or not. They are credit reporting on you. You need to know what your score is. You have to go to them and check. There is no “vote with your wallet” option here. 

We are not the customers for these places, we are the product.",pihole,1648076663.0
6860,comment,0,i1v177t,,"I never actually said anything about money to begin with, simply do not support them. Support does not have to be monetary. I honestly don't know how you can argue for a company like that. They fucked us all and then smiled as they were slapped on the hand for it.",pihole,1648077179.0
6861,comment,1,i1v2b9k,,"I honestly do not know what the disconnect is here. The point I’m trying to get across is that we are not the consumers of the product these companies offer. We have no power to influence them in anyway. 

Equifax doesn’t care about the data leak because their customers do not care. The American people are not their customers. Banks and other lenders are. 

I understand what you mean by saying that we shouldn’t support them, and I agree with you. But there is no way for us to do that. Nothing we do at all matters to them. We are not their customers. Sure you can pay $10 to see your credit score. You can see it once a year for free. And as often as you want with Credit Karma. So we are not their customers, Credit Karma are. 

I am not arguing for them.",pihole,1648077651.0
6862,post,0,tkln34,How to reset pi-hole to default setting,I want to reset my pi-hole to default and start over again. Can someone please advise how i can do it,pihole,1648008578.0
6863,comment,1,i1r8swp,,Now far from default are you - what have you changed since install?,pihole,1648009399.0
6864,comment,1,i1rtciu,,I have added about 53 various lists. And a whole bunch of whitelist and blacklist. I am having some weird issues. Where when i try to do a nslookup for a domain i know exist and works response comes back non existing,pihole,1648025357.0
6865,comment,1,i1rxj19,,"That's Pi-hole's default blocklist:

[`https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts`](https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts)

An easy fix for you solution would be to delete all blocklists, then add the default blocklist. And also remove all whitelists and blacklists.",pihole,1648028980.0
6866,post,85,tkj9kv,New PiHole on Raspberry Pi Zero 2 W with InkyPHAT eInk display.,"Custom python script inspired by inky-hole.

Code here: [https://github.com/doublehelix/inky-pihole/](https://github.com/doublehelix/inky-pihole/)  


https://preview.redd.it/g7ocs5ana1p81.jpg?width=3648&format=pjpg&auto=webp&s=405da82771a86c09e4f91903662689f2afe6d28f",pihole,1648000824.0
6867,comment,8,i1s7t3m,,Where do you find a 2 W in stock to purchase?,pihole,1648036277.0
6868,comment,3,i1rlacw,,"DNS server should always be wired, not WiFi.

That display looks awesome though",pihole,1648018374.0
6869,comment,1,i1tltxm,,"This looks really neat! 1. Would it be a more robust setup if it were on ethernet, and 2. I am using Adguard- what are the pros and cons for using Adguard within HA as opposed to Pihole (my HA is running on an RPI in a docker already so I could create a hybrid running the pihole in or not in the same docker) ?",pihole,1648057175.0
6870,comment,1,i1qtn6z,,Ghat daym I am jealous! That's niiiice (I am still waiting for a Zero 2 W ☹️ ),pihole,1648001474.0
6871,comment,1,i1t6a90,,Nice,pihole,1648051419.0
6872,comment,6,i1sp908,,Where can I find literally any Pi in stock and not stupidly overinflated on the price?,pihole,1648044775.0
6873,comment,2,i1t6h9p,,"Adafruit got stock yesterday. Was able to order one, sold out in less than a hour though.",pihole,1648051492.0
6874,comment,2,i1uay27,,"Sooo, I'm in Aus, but got a pair of these from Little Bird https://littlebirdelectronics.com.au/raspberry-pi",pihole,1648066713.0
6875,comment,3,i1rmjeu,,"Couldn't agree more, but for secondary/backup server, wifi is enough.",pihole,1648019413.0
6876,comment,5,i1ru08b,,May I ask why? I have pihole set up on wifi,pihole,1648025945.0
6877,comment,2,i1ro65b,,"Yeah, this is the secondary (sync'd with [edit] gravity-sync) the primary is an Ubuntu server.
Works great as a backup. Latency is only slightly worse.",pihole,1648020823.0
6878,comment,2,i1rvm6d,,Just grab an USB ethernet adapter and it's all sorted... 🙃,pihole,1648027358.0
6879,comment,2,i1tgon7,,Nah. It's fine.,pihole,1648055257.0
6880,comment,5,i1s89sb,,"It's 2022. Nothing needs wires.

Been running a Zero W for years, with Pihole and Unbound.",pihole,1648036555.0
6881,comment,1,i1ucsaf,,"Definitely more responsive and robust when wires. I have rpi 3a+ wired - much smoother.

As for adguard, I didn't realise there was a self hosted option... Figured Adguard DNS  was all cloud like q9, 1.1.1.1, opens etc. Will be interested to see.
But assuming it works like regular DNS, HA should work exactly the same. Specify both server addresses in your DHCP policy, and replicate the DNS settings and Blocklists between the HA instances.",pihole,1648067428.0
6882,comment,5,i1vfvza,,2017.,pihole,1648083628.0
6883,comment,5,i1t16kf,,I ran pihole on wifi for years and had zero issues. the only issue I had was the SD card dying,pihole,1648049477.0
6884,comment,7,i1s8b7u,,I'd doesn't matter carry on.,pihole,1648036578.0
6885,comment,2,i1twnrd,,"The added wireless latency is way too much. It’s not fatal, but it’s not ideal. My 0W has a usb-Ethernet dongle, it’s like night-day difference of round trip.",pihole,1648061261.0
6886,comment,2,i1sg1cp,,Latency of a wired network will be an order of magnitude faster (tenths of a millisecond versus milliseconds) but if it doesn't matter to you then it doesn't matter to you.,pihole,1648040701.0
6887,comment,3,i1twtue,,"It’s not about “issue”. It’s about that’s not optimal. Read my other comment.

Basically you can use a spoon to cut meat, but it will take longer…",pihole,1648061324.0
6888,comment,0,i1tx24v,,"No, on the 0W we’re talking about 30-120ms on a congested network and also consider it’s 2.4G… consider round trip also. Sum everything. Voilà!",pihole,1648061410.0
6889,comment,1,i1u4s1n,,"....but if you’re using wireless and the speed is no slower and little difference in latency between it and wired.........

sounds like just being a bit of a pedant honestly. 

“sure there is absolutely zero functional difference, but you could do it *my way*",pihole,1648064378.0
6890,comment,1,i1vhzby,,"This very much seems like you're attributing faults of your network to general fault of wireless connections as a whole.

It being 2.4GHz is also pretty much entirely inconsequential. There's precisely zero need for the increased bandwidth 5GHz offers in this scenario, and the penetration depth would be considerably worse.

Lookups over wireless within my network are all in the single digit ms range, even if I deliberately pick the most congested band available, and cut my broadcast amplitude in half.

If your wireless sucks, that seems like a totally separate issue for you to address.",pihole,1648084558.0
6891,comment,2,i1u8qon,,"Cable latency is <1ms.
I did migrate from wireless to (dongle) cable because of this problem.
I might sound pedantic, but you’re taking this comment from someone who measured this and had to cable the thing to fix it, and I’m glad that I did. 
I think that 190ms-740ms roundtrip with >50 jitter is worst than 16ms-26ms with ~5 jitter… this applies to the worst scenario which is ironically the most common scenario (wireless clients).",pihole,1648065875.0
6892,comment,1,i1w4h7q,,Could you provide actual numbers of your super network on wireless clients when Pi-hole sits on a 2.4 network?,pihole,1648095747.0
6893,post,0,tkg5fw,Stumped - cannot log in via PuttY,"So I recently set up two brand new PiHoles because I simply couldn‘t log in via terminal anymore - the passwords I had stored in my database weren‘t working. „Access denied“.

I seem to have the same problem again. I log in as user „pi“, copy the password from my password manager and right click to paste it into the PuttY terminal window. „Access denied“.

I have also typed the damn password but it‘s quite long and has some extra characters.

What could be the issue? Is it encoding (set to UTF-8)?",pihole,1647991417.0
6894,comment,2,i1q9lzt,,The password to login via putty is the same password you use to login on the Pi itself. So you are either using the wrong password or you typed it in wrong when you set it. Connect a monitor and keyboard to the Pi and reset the password.,pihole,1647992425.0
6895,post,3,tkdvvk,Recursive DNS and odd behaviour,"Has anyone been using their pihole and experienced odd behaviour when using recursive DNS (unbound) such as teams not displaying shared screens, connections dropping out on IOS devices…. Soon as I disabled the recursive DNS and pointed it Google it’s absolutely fine…",pihole,1647985164.0
6896,comment,2,i1psu1f,,"I don't have any iOS devices, so can't vouch on that, but 0 issues my end with recursive dns",pihole,1647985408.0
6897,comment,2,i1q70d0,,I’ve been running unbound for a long time with a house full of Apple devices and haven’t had any issues.,pihole,1647991296.0
6898,comment,0,i1pyiq8,,[deleted],pihole,1647987714.0
6899,comment,2,i1pt36z,,It’s even got to the stage that I thought it might be the ISP or even the now quite old Netgear D7000 router…,pihole,1647985510.0
6900,comment,1,i1rspoe,,Apologies do you mind sharing your config for unbound? Many thanks,pihole,1648024797.0
6901,comment,1,i1qkn46,,What problem do you think the OP has with unbound that will be corrected by using a different recursive resolver?  They all resolve queries the same way.,pihole,1647997365.0
6902,comment,1,i1pw0ea,,"Hopefully someone with iOS and unbound will come along, have you tried removing and re-installing unbound? On one of my pi's I had issues at first during an install, uninstalled unbound, and all is well...... Running it on raspberry pi os? If so buster or bulls eye? Mine are both on buster...... If on bulls eye, there are a few things to look at.....if so I'll dig up my post on when I asked about unbound on bulls eye, it was messed up until I was advised on how to fix it",pihole,1647986687.0
6903,comment,1,i1vq49r,,Sure.  Here you go: [https://pastebin.com/SrBkrUNr](https://pastebin.com/SrBkrUNr),pihole,1648088250.0
6904,comment,2,i1pwjgz,,"It’s the latest build, I’m running basic repos. Just done a full reinstall and leaving it for a few days to let dhcp settle etc and then might insert unbound back in again and see how it goes",pihole,1647986902.0
6905,comment,1,i1pzn0l,,"https://www.reddit.com/r/pihole/comments/sk4xmn/second_pihole_sending_unbound_requests_to_first/

Not sure if this would also relate to the issue you are having, if you do re install unbound, it did fix it for me when I was running bullseye",pihole,1647988178.0
6906,comment,1,i1tw52y,,"Recursive DNS is not redundancy (more dns servers).
It means that doesn’t depend on a upstream DNS (Google, cloudflare, etc).",pihole,1648061061.0
6907,post,5,tkc7r0,Is port forwarding 443 to a different internal port safe on wireguard with pivpn and unbound,"Is this safe or a bad practice? Currently I’ve found that some networks block most ports but 443 always seems to be open. 

I’m using a raspberry pi with pivpn and wireguard. Am I at any more risk opening an external port to 443, 80, or 53 and routing to a different internal port than I would be opening a random port?",pihole,1647980684.0
6908,comment,3,i1popby,,"i would never port forward port 53. 

any time you 'port forward' you are allowing connections to initiate from the outside. only open up ports where you dont care others can see this on things like [shodan.io](https://shodan.io). you will constantly be scanned, and you will constantly have to ensure you aren't vulnerable to something. 

only do this if you are willing to accept the risk.",pihole,1647983756.0
6909,comment,2,i1pu2ik,,"What is is you're trying to accomplish? I have PiVPN running on my Pi with a static internal IP address. In my router (Unifi Dream Machine), I have it port forwarding incoming connections to port 51280 to my Pi's internal IP address. That allows me to connect via PiVPN/Wireguard protocol to my home network and get Pihole filtering. 

The only other ports I forward are two other high, five digit ports for my Plex server and uTorrent downloading.",pihole,1647985906.0
6910,comment,1,i1q20q9,,[deleted],pihole,1647989175.0
6911,comment,1,i1pud1o,,"Similar set up static ip, the default port is just blocked in my company internet and most public Wi-Fi’s I have tried. So I have external 443 routed to a different internal wireguard port on my pi, just wanted to make sure I’m not creating any more security risks for myself than any other port",pihole,1647986026.0
6912,comment,1,i1q4hek,,Fortunately udp is open on one of the networks I spend the most time on!,pihole,1647990208.0
6913,comment,1,i1pyjtp,,"If 443 is only being used for the VPN and nothing else is listening on 443, then you should be fine. You might be able to use IPtables or firewalld to further restrict types of traffic on the port. I would have to look into this to give a concrete answer.",pihole,1647987727.0
6914,comment,2,i1qyblq,,[deleted],pihole,1648003722.0
6915,comment,1,i1r0swm,,I don’t know enough about networking I set up unbound as a recursive server as well. I’m not sure if it really helps,pihole,1648004975.0
6916,post,1,tkaott,Pi-Hole on multiple interfaces,"So here is my situation:
I have a TP-Link router configured for a main network and a guest network.  Naturally, the guest network is not allowed to see devices on the main network.  Devices on the guest network are allowed to see each other, however.
It appears that TP-Link's guest network implementations are to have all devices on the same subnet (e.g. 10.10.10.10, a ""guest"" device, would not be allowed to see 10.10.10.20, a ""main"" network device).  TP-Link does not allow the router's main DNS to be set to the Pi-Hole's address (if you set it there it complains: ""DNS server IP address and LAN IP address cannot be in the same subnet."").  Instead this must be set at the DHCP level.  Since TP-Link provides no mechanism to exclude devices from the guest network restriction, I have set up the Pi-Hole on two interfaces: the ethernet port (eth0) serves the main network while the wireless port (wlan0) serves the guest network.  DHCP is then configured to use the ethernet address as the primary DNS and the wireless address as the secondary DNS.
This solves half of the problem in that the main and guest networks see the Pi-Hole properly.  However, the guest network cannot actually resolve any addresses.  Thanks to /u helloWorld_segfault and this thread https://www.reddit.com/r/pihole/comments/rx49ux/main_guest_network_tplink_my_solution/ I was able to get a bit further in that now I can get devices that **I know about** to resolve addresses properly.
The summary there: when there are two interfaces, the Pi-Hole will send DNS requests through a default route, in this case eth0.  /u/helloWorld_segfault's script fixes this by manually telling the Pi-Hole to send requests sent from the guest network to wlan0.  The problem is that the script only runs once an hour, so if someone signs onto the guest network at, say 3:02PM, they'll have to wait a full hour until the script runs before they can really get on the Internet, unless someone can log on to the Pi-Hole and run the script manually (in theory I could update the script so it runs far more frequently but at the same time I don't want something pinging the network consistently every minute).
Is there a better way to do this?  If I update the DNS Masq configuration so that it knows about wlan0, will this fix things?  If so what's the proper way to do it (I understand it involves updating the configuration files but I want to make sure I have the right config lines)? Is there a way for the Pi-Hole to run the update script when a new device is detected somehow?",pihole,1647976629.0
6917,comment,1,i1u2p2k,,"Set it at the WAN level, that is what I did, then ER605's 192.168.0.1 becomes the DNS server powered by PiHole",pihole,1648063579.0
6918,comment,1,i21978c,,"If you read my post again, that is not possible on TP-Link routers.  Setting the WAN DNS to the local PiHole address will cause the router to complain.
https://community.tp-link.com/en/home/forum/topic/263720",pihole,1648189305.0
6919,post,2,tka4lr,Struggling to install unbound,"Tried several time to install unbound .. followed the docs ..  installed the apt, installed the file /etc/unbound/unbound.conf.d/pi-hole.conf and tried the command 'sudo service unbound restart'. Each time I get an error ""Process: xxxxx: ExecStart=/usr/sbin/unbound -d -p $DAEMON_OPTS (code=exited, status=1/F"" from 'systemctl status unbound.service' ... any help would be appreciated.  OS Bullseye Debian  [✓] Your debug token is: https://tricorder.pi-hole.net/25QRq8r3/",pihole,1647975138.0
6920,comment,1,i1q06o8,,"Does this file exist?

/var/lib/unbound/root.hints",pihole,1647988402.0
6921,comment,1,i1so06y,,"[Unbound Setup](https://www.wundertech.net/use-unbound-to-enhance-the-privacy-of-pi-hole-on-a-raspberry-pi/)

That is the guide I followed and it worked out great.",pihole,1648044250.0
6922,comment,1,i1qswdy,,Thanks for your reply ... yes the file exists .. still no joy starting the service ... Cheers,pihole,1648001123.0
6923,comment,1,i1u8pb6,,"Thanks for your reply .. the tutorial you refer to is a dup of the pi-hole docs. Did that and u/jfb-pihole help to get the svc going ....... but still cannot route using unbound and as I stated in another thread ... am out, too much hassle .. but thanks for your reply .. cheers",pihole,1648065860.0
6924,comment,1,i1quk7m,,Oof. Yeah. I had this happen and my file was missing.,pihole,1648001908.0
6925,comment,1,i1qux3i,,"Please post the output of the following command from the Pi terminal:

`sudo grep -v ‘#\|^$’ -R /etc/unbound/unbound.conf*`",pihole,1648002077.0
6926,comment,1,i1qwlyo,,"Output:

/etc/unbound/unbound.conf:# Unbound configuration file for Debian.

/etc/unbound/unbound.conf:#

/etc/unbound/unbound.conf:# See the unbound.conf(5) man page.

/etc/unbound/unbound.conf:#

/etc/unbound/unbound.conf:# See /usr/share/doc/unbound/examples/unbound.conf for a commented

/etc/unbound/unbound.conf:# reference config file.

/etc/unbound/unbound.conf:#

/etc/unbound/unbound.conf:# The following line includes additional configuration files from the

/etc/unbound/unbound.conf:# /etc/unbound/unbound.conf.d directory.

/etc/unbound/unbound.conf:include-toplevel: ""/etc/unbound/unbound.conf.d/*.conf""

/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:server:

/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:    # The following line will configure unbound to perform cryptographic

/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:    # DNSSEC validation using the root trust anchor.

/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:    auto-trust-anchor-file: ""/var/lib/unbound/root.key""

/etc/unbound/unbound.conf.d/pi-hole.conf:server:

/etc/unbound/unbound.conf.d/pi-hole.conf:    # If no logfile is specified, syslog is used

/etc/unbound/unbound.conf.d/pi-hole.conf:    # logfile: ""/var/log/unbound/unbound.log""

/etc/unbound/unbound.conf.d/pi-hole.conf:    verbosity: 0

/etc/unbound/unbound.conf.d/pi-hole.conf:

/etc/unbound/unbound.conf.d/pi-hole.conf:    interface: 127.0.0.1

/etc/unbound/unbound.conf.d/pi-hole.conf:    port: 5335

/etc/unbound/unbound.conf.d/pi-hole.conf:    do-ip4: yes

/etc/unbound/unbound.conf.d/pi-hole.conf:    do-udp: yes

/etc/unbound/unbound.conf.d/pi-hole.conf:    do-tcp: yes

/etc/unbound/unbound.conf.d/pi-hole.conf:

/etc/unbound/unbound.conf.d/pi-hole.conf:    # May be set to yes if you have IPv6 connectivity

/etc/unbound/unbound.conf.d/pi-hole.conf:    do-ip6: no

/etc/unbound/unbound.conf.d/pi-hole.conf:

/etc/unbound/unbound.conf.d/pi-hole.conf:    # You want to leave this to no unless you have *native* IPv6. With 6to4 and
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Terredo tunnels your web browser should favor IPv4 for the same reasons

/etc/unbound/unbound.conf.d/pi-hole.conf:    prefer-ip6: no

/etc/unbound/unbound.conf.d/pi-hole.conf:

/etc/unbound/unbound.conf.d/pi-hole.conf:    # Use this only when you downloaded the list of primary root servers!
/etc/unbound/unbound.conf.d/pi-hole.conf:    # If you use the default dns-root-data package, unbound will find it automatically

/etc/unbound/unbound.conf.d/pi-hole.conf:    root-hints: ""/var/lib/unbound/root.hints""

/etc/unbound/unbound.conf.d/pi-hole.conf:

/etc/unbound/unbound.conf.d/pi-hole.conf:    # Trust glue only if it is within the server's authority

/etc/unbound/unbound.conf.d/pi-hole.conf:    harden-glue: yes

/etc/unbound/unbound.conf.d/pi-hole.conf:

/etc/unbound/unbound.conf.d/pi-hole.conf:    # Require DNSSEC data for trust-anchored zones, if such data is absent, the zone becomes BOGUS

/etc/unbound/unbound.conf.d/pi-hole.conf:    harden-dnssec-stripped: yes

/etc/unbound/unbound.conf.d/pi-hole.conf:

/etc/unbound/unbound.conf.d/pi-hole.conf:    # Don't use Capitalization randomization as it known to cause DNSSEC issues sometimes

/etc/unbound/unbound.conf.d/pi-hole.conf:    # see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details

/etc/unbound/unbound.conf.d/pi-hole.conf:    use-caps-for-id: no

/etc/unbound/unbound.conf.d/pi-hole.conf:

/etc/unbound/unbound.conf.d/pi-hole.conf:    # Reduce EDNS reassembly buffer size.

/etc/unbound/unbound.conf.d/pi-hole.conf:    # IP fragmentation is unreliable on the Internet today, and can cause

/etc/unbound/unbound.conf.d/pi-hole.conf:    # transmission failures when large DNS messages are sent via UDP. Even

/etc/unbound/unbound.conf.d/pi-hole.conf:    # when fragmentation does work, it may not be secure; it is theoretically

/etc/unbound/unbound.conf.d/pi-hole.conf:    # possible to spoof parts of a fragmented DNS message, without easy

/etc/unbound/unbound.conf.d/pi-hole.conf:    # detection at the receiving end. Recently, there was an excellent study

/etc/unbound/unbound.conf.d/pi-hole.conf:    # >>> Defragmenting DNS - Determining the optimal maximum UDP response size for DNS <<<
/etc/unbound/unbound.conf.d/pi-hole.conf:    # by Axel Koolhaas, and Tjeerd Slokker (https://indico.dns-oarc.net/event/36/contributions/776/)
/etc/unbound/unbound.conf.d/pi-hole.conf:    # in collaboration with NLnet Labs explored DNS using real world data from the
/etc/unbound/unbound.conf.d/pi-hole.conf:    # the RIPE Atlas probes and the researchers suggested different values for
/etc/unbound/unbound.conf.d/pi-hole.conf:    # IPv4 and IPv6 and in different scenarios. They advise that servers should
/etc/unbound/unbound.conf.d/pi-hole.conf:    # be configured to limit DNS messages sent over UDP to a size that will not
/etc/unbound/unbound.conf.d/pi-hole.conf:    # trigger fragmentation on typical network links. DNS servers can switch
/etc/unbound/unbound.conf.d/pi-hole.conf:    # from UDP to TCP when a DNS response is too big to fit in this limited
/etc/unbound/unbound.conf.d/pi-hole.conf:    # buffer size. This value has also been suggested in DNS Flag Day 2020.

/etc/unbound/unbound.conf.d/pi-hole.conf:    edns-buffer-size: 1232

/etc/unbound/unbound.conf.d/pi-hole.conf:

/etc/unbound/unbound.conf.d/pi-hole.conf:    # Perform prefetching of close to expired message cache entries

/etc/unbound/unbound.conf.d/pi-hole.conf:    # This only applies to domains that have been frequently queried

/etc/unbound/unbound.conf.d/pi-hole.conf:    prefetch: yes
/etc/unbound/unbound.conf.d/pi-hole.conf:

/etc/unbound/unbound.conf.d/pi-hole.conf:    # One thread should be sufficient, can be increased on beefy machines. In reality for most users running on small networks or on a single machine, it should be unnecessary to seek performance enhancement by increasing num-threads above 1.
/etc/unbound/unbound.conf.d/pi-hole.conf:    num-threads: 1

/etc/unbound/unbound.conf.d/pi-hole.conf:
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Ensure kernel buffer is large enough to not lose messages in traffic spikes

/etc/unbound/unbound.conf.d/pi-hole.conf:    so-rcvbuf: 1m
/etc/unbound/unbound.conf.d/pi-hole.conf:

/etc/unbound/unbound.conf.d/pi-hole.conf:    # Ensure privacy of local IP ranges
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address: 192.168.0.0/16
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address: 169.254.0.0/16
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address: 172.16.0.0/12
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address: 10.0.0.0/8
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address: fd00::/8
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address: fe80::/10
/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf:# Generated by resolvconf
/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf:
/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf:forward-zone:
/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf:	name: "".""
/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf:	forward-addr: 9.9.9.9,149.112.112.112

Hope that is helpful .. cheers",pihole,1648002884.0
6927,comment,1,i1qz5l6,,"This forwarding configuration was installed by Bullseye through resolvconf.

Edit file `/etc/resolvconf.conf` and comment out the last line which should read:

    unbound_conf=/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf

Delete the unwanted unbound configuration file:

`sudo rm /etc/unbound/unbound.conf.d/resolvconf_resolvers.conf`

restart unbound:

`sudo service unbound restart`",pihole,1648004137.0
6928,comment,1,i1slgr2,,"Thanks ... but no joy, service started with your suggestion, but will not route .. still thinks the DNS is the 'old' one and refers to the file resolve.conf 'generated by resolvconf' .. the hassle is not worth it .. I am out, but as always thank you very much for trying to help",pihole,1648043170.0
6929,post,1,tk9wvw,Successfully using PiHole with Verizon G3100 Fios router but the only clients that show up in the dashboard are the G3100 and localhost. Ads are being blocked but is there a way to list all of the actual clients on the dashboard?,"I just changed ISPs from RCN cable to Verizon Fios. I did a clean PiHole installation and used [this guide](https://www.joshualowcock.com/guide/guide-verizon-g3100-how-to-change-the-gateway-dns-server/) to have the G3100 router use my PiHole for DNS. I've checked on an iPhone, laptop and iPad and it seems like ads are blocked on all devices. But the only clients that show up on the PiHole's web dashboard are *localhost* and *G3100*. It's not a big deal but is there a way to get the individual clients to show up? Thanks.

https://tricorder.pi-hole.net/rtFUpy5g/",pihole,1647974566.0
6930,comment,1,i1pslpf,,"Only if you manually configure all the clients DNS servers, I'm assuming you've set the DNS in the router currently.

And what is happening is the clients are all using the router as their DNS, which is pointed at the pihole",pihole,1647985314.0
6931,comment,1,i1pygmi,,"What worked for me:
1. Set Pihole as DHCP (don’t forget to turn off router DHCP)
2. My router was still advertising itself as DNS server in addition to Pihole, and I don’t have option to turn RA off - so workaround was to configure my router’s upstream DNS server with some non-existent address (some random local address that doesn’t exist in your network, e.g., 192.168.666.666)

That resulted with only one single working DNS server available to all my clients (the Pihole), and now all queries are properly logged with correct hostnames.",pihole,1647987690.0
6932,comment,1,i1puj3k,,"Right. But I did the same thing with my previous ISP’s router. The clients’ DNS requests went to the router, not directly to the pihole. But all the different clients still showed up on the dashboard.",pihole,1647986094.0
6933,comment,1,i1pz03c,,Thanks for the idea.,pihole,1647987913.0
6934,comment,1,i1pvke6,,"Your old router may have supported DNS forwarding where it goes ""well I don't actually have a DNS server, but I've noticed there is one in the local network submask, I'll had all queries straight over"" 

At which point your router has no involvement at all, you current router either isn't configured for DNS forwarding or doesn't support it, so all queries to to it, it remembers what every client had asked for the casks pihole for the IP address to forward the request to, so pihole only sees the router",pihole,1647986511.0
6935,comment,1,i1pw3pk,,Thanks. I’ll look into it.,pihole,1647986725.0
6936,post,41,tk3b4o,Does Pi-Hole support DNS Views?,"I have two subnets in my network that are both served by Pi-Hole DNS.  I would like to configure unique views for each subnet.  For example, one subnet1 I would like the DNS clients to be able to resolve a given domain (eg: [cnn.com](https://cnn.com)) while subnet2 should resolve the same/given domain to [0.0.0.0](https://0.0.0.0).

I know unbound allows for setting up DNS views based on certain criteria like a block of IP address or a particular subnet.  How do I accomplish the same \*without\* having to run multiple instances of Pi-hole with each servicing a particular subnet?

&#x200B;

Thanks.

\-r",pihole,1647956558.0
6937,comment,55,i1ns6s7,,"Use the group management feature of Pi-hole. 

https://docs.pi-hole.net/database/gravity/groups/",pihole,1647956811.0
6938,comment,2,i1pie1k,,u/neuromonkey u/emmerson_Biggons - What about when someone comes up with such a great product & implementation like the pihole dev team has??,pihole,1647981273.0
6939,comment,37,i1osavw,,"I can't explain how much I frickin' love it when:

  * Someone asks a clear, cogent question
  * Someone else provides a clear answer.

I'm spending too much time on the wrong subreddits.",pihole,1647971170.0
6940,comment,3,i1pn1ur,,"On Reddit you use ""u/"" for tagging. Like this u/rsaanon . You should also typically reply to one of their comments specifically instead of the thread",pihole,1647983095.0
6941,comment,2,i1ppfre,,"Using @ here wont send a notification to someone and they are likely not to check back (I sure as heck dont look at old threads unless I get a notification someone replied  


you need to add u/ infront of the username like u/rsaanon or u/ziogref  


Or you could just click reply under their comment as that also sends the user a notification that you replied",pihole,1647984047.0
6942,comment,6,i1pa9it,,"Agreed on all fronts 😂
The raspberry Pi community and by extension PiHole is the best Linux community period.",pihole,1647978131.0
6943,comment,1,i1pq6w2,,"Thank you u/ThisUserEatingBEANS 😉

However, tagging doesn’t auto complete username (at least not in iOS)",pihole,1647984345.0
6944,comment,1,i1psxnq,,Thanks 🙏,pihole,1647985448.0
6945,comment,2,i1pqexr,,"No problem at all. On iOS, I use Apollo, which I think is a much nicer experience overall and it does support autcomplete for usernames.",pihole,1647984434.0
6946,comment,1,i1pste6,,I do have a premium version of Apollo but for some reason I end up using the official app. I’ll have to give Apollo another try.,pihole,1647985401.0
6947,comment,1,i1pwt2q,,"It auto completes on PC. 

On RIF on android, it does not (I don't use the official reddit app on android, I find RIF better)",pihole,1647987012.0
6948,post,1,tjudux,PiHole in docker resets queries after updating,"I am using docker compose for my pihole and the volume path I have is 

        volumes:
          - './etc-pihole/:/etc/pihole/'
          - './etc-dnsmasq.d/:/etc/dnsmasq.d/'

The /etc/pihole/ is the path that should retain the queries correct? Is there anything else that is needed to persist the data?

Everytime I pull a new image and update pihole, all the queries are gone.",pihole,1647921674.0
6949,comment,1,i1mmlir,,"The query database is in /etc/pihole. 

The dnsmasq query log is in /var/log, but this is not the file used to populate the query database.",pihole,1647927063.0
6950,comment,1,i1mmzfy,,"This is a pain in my ass, it happens when someone accidentally turned off my RPI, and all the data are gone. What I did is every time I change in the config, I'm downloading the backup file in teleporter tab. But I hope there is a workaround here to prevent it.",pihole,1647927348.0
6951,comment,1,i1mp8kk,,I saw the db file in /pihole but the data still doesn't persist. I was thinking it might be because of the docker host name but I made that static and still happened.,pihole,1647929053.0
6952,comment,1,i1o3clc,,"when I ran docker-compose up without -d to show the log output it didnt show anything weird but when I execed into the container I saw that there was a db issue. recreated the db and it seems to be working.

    [2022-03-22 08:46:41.017 488/T533] WARNING: Disk shortage (/etc/pihole/pihole-FTL.db) ahead: 80197872% is used (/etc/pihole: 18.4EB used, 230.0GB total)
    [2022-03-22 08:46:41.045 488M] Reloading DNS cache[2022-03-22 08:46:41.128 488/T533] WARNING: Disk shortage (/var/log/pihole-FTL.log) ahead: 80197872% is used (/var/log: 18.4EB used, 230.0GB total)
    [2022-03-22 08:46:42.049 488/T532] Compiled 2 whitelist and 1 blacklist regex filters for 0 clients in 24.1 msec
    [2022-03-22 08:46:54.615 488M] Reloading DNS cache[2022-03-22 08:46:55.050 488/T532] SQLite3 message: file renamed while open: /etc/pihole/gravity.db (28)
    [2022-03-22 08:46:55.078 488/T532] Compiled 2 whitelist and 1 blacklist regex filters for 0 clients in 19.4 msec
    [2022-03-22 08:47:00.153 488/T532] SQLite3 message: database corruption at line 82694 of [872ba256cb] (11)
    [2022-03-22 08:47:00.157 488/T532] SQLite3 message: statement aborts at 23: [INSERT OR REPLACE INTO network_addresses (network_id,ip,lastSeen,name,nameUpdated) VALUES (?1,?2,(cast(strftime('%s', 'now') as int)),(SELECT name FROM network_addresses WHERE ip = ?2) (11)
    [2022-03-22 08:47:00.162 488/T532] add_netDB_network_address(111, ""172.18.0.1""): Failed to step (error 11): database disk image is malformed
    [2022-03-22 08:47:00.165 488/T532] WARN: Database /etc/pihole/pihole-FTL.db is damaged and cannot be used.
    [2022-03-22 08:47:00.168 488/T532] Database error in ARP cache processing loop

The log is saying I used 18.1 exabytes of data",pihole,1647961525.0
6953,comment,2,i1pqygy,,"Put the pi on a ups and this won't be an issue again. Every time a pi is not shut down gracefully you can expect to have to redo the SD card, it's a miracle if it doesn't frag when not powered off properly. Now if someone did issue sudo shutdown now and it gracefully shut down and still lost data, I'd be looking at the SD card, and the way I had the operating system configured. But if it's just unplugged most likely you will cause data loss at that point.",pihole,1647984651.0
6954,post,1,tju1s7,Help setting up a recursive DNS server on my PiHole installed through HomeBridge,"Hello PiHole team,

Couple of months back, I installed pihole via HomeBridge, and when I saw a video about Recursive DNS, I tried applying it on my own Raspberry Pi. But the problem is, my internet stops working following this guide [PiHole as recursive DNS](https://docs.pi-hole.net/guides/dns/unbound/?h=recur#what-is-a-recursive-dns-server) and watching this [video](https://www.youtube.com/watch?v=FnFtWsZ8IP0).  


This is my debug [token](https://tricorder.pi-hole.net/uvEyNUze/).  


Thanks for your help!",pihole,1647920541.0
6955,comment,1,i1mjhma,,[deleted],pihole,1647924880.0
6956,comment,1,i1mln9n,,[deleted],pihole,1647926374.0
6957,comment,2,i1mm2ha,,[deleted],pihole,1647926680.0
6958,comment,1,i1mmq4x,,">sudo rm /etc/unbound/unbound.conf.d/resolvconf\_resolvers.conf

Thanks a lot, now it works!!  
May I know why it was installed by Bullseye? I am a new in terms of working in Linux env.",pihole,1647927156.0
6959,post,1,tjqsct,Where is pihole.log stored when installed in Docker?,"All the info I can find tells me the log should be at /var/log/pihole.log at least for a normal install but it does not exist, nor could I find any info on where it could possibly be elsewhere in all my searches. I'm completely new to all of this, I pulled an old Pi 3b+ out of storage that I got years ago for projects that never materialized so my knowledge is extremely limited. Been running pihole for a few weeks now but I need the log in order to figure out an error message that I was getting spammed with earlier in the month. Said error is no longer in the dash after I disabled and re-enabled logging in a foolish attempt at making the log file magically appear where I'm expecting it to be, even with ""show hidden"" option checked.

&#x200B;

This feels like a really dumb question but the documentation has failed me.",pihole,1647910192.0
6960,comment,2,i1ms4sk,,"Have you looked into /var/log in the docker? I havent really use pi hole in a docker but usually there is a shared volume as well, the log could bein there",pihole,1647931356.0
6961,comment,1,i1nd5kg,,"I setup a bind volume for the log file to shared storage using gluster. I store the log file there. 

/mnt/glusterfs/docker/pihole/log:/var/log/pihole.log",pihole,1647948814.0
6962,post,0,tjm9wf,PSA: Strange blocking all of a sudden (possibly a group management issue?),"Earlier today I started having problems accessing Twitter and Reddit from my iPhone 12.  However, I flipped on my VPN and noticed everything was working normally so I suspected the PiHole but I had not updated anything recently.  I use group management to lock down certain devices (not this iPhone) more thoroughly than others and I suspect that my iPhone somehow was added to that management policy.  I removed my iPhone from all groups and then re-added it to the default group, and now everything is working as expected.  In case anyone runs into this issue in the future, try toggling your group management assignments and see what happens.",pihole,1647897470.0
6963,post,1,tjjk6o,Pi-Hole not working the same way for all devices,"Hey guys I‘m new to Linux/Pi-Hole in general and this is more kind of wondering instead of bug fixing. I set up my PiHole last weekend as a vm, running fine on 2 cores and 4gb ram. I made sure that all devices use it as dns by giving the pi a static ip-adress and spread it via dhcp of my router. Some devices didn’t got it even after a restart so I put the Pi’s ip manually as their only dns which works fine so far. After getting a bit into it and blocking some domains with adlists and a few regex rules I noticed something weird. While my Windows 10 laptop and iPhone both still show YouTube ads, the windows 10 desktop of my roomie isn’t anymore. I know this sub isn’t about of how to get rid of YouTube ads, I’m just surprised and wondering how this can be possible. I see there could be a difference between within the iOS app and a casual browser but my roomie and I do have the same browsers without any additional ad blockers so how is this possible? Thanks for any advice and huge shout out to the pihole team, very beginner friendly and awesome project to start with!",pihole,1647890176.0
6964,comment,5,i1khby5,,"Its not that this sub isn't about getting rid of youtube adds, its that it isn't possible with the PiHole. Your PiHole setup will have no effect on Youtube. To check your setup is working as expected you could use [https://canyoublockit.com/](https://canyoublockit.com/).

I would suggest there is likely something on your roommates pc that blocks the adds or prevents them from loading.

If you can see other adverts you know you have blocked then there may be a further issue.",pihole,1647890920.0
6965,comment,2,i1khfz9,,"i have the same issue for over a month now, after doing some research i think its because of ipv6 temporary addresses that seem to bypass pihole settings. I haven't figured out how to configure correctly to account for this yet with my asus router despite there being previous posts.",pihole,1647890967.0
6966,comment,1,i1md5ki,,"Does your roommate have different browser plugins.

For instance, if they have uBlock, it'll block youtube ads.  Has nothing to do with pihole, just what has been added to the browser.

Just one possibility.  

YMMV.",pihole,1647921016.0
6967,comment,1,i1kkyrn,,"Thanks for your advice, I’ll check on that link when fully configurated! And yes I’ve heard that Pi-hole isn’t able to block YouTube ads but I’ve also read a lot from people saying it worked for them. To be honest the newest statement I read was from late ‘21 but it seems like somehow it’s working even if it’s not supposed to. I’ll check my roomies pc once more to make sure he hasn’t installed stuff but thanks anyway!",pihole,1647892411.0
6968,comment,2,i1ktyjf,,"It is true, that IPv6 may have been forgotten to configure for Pihole and thus different results are observed for similar situations.

But YT-ads are not subject to this. They come in the stream from the same source and therefore can not be differentiated by DNS. There are browsers and plugins which seem to to be able to influence the delivery. And paying 10$/mo helps also 😁",pihole,1647895965.0
6969,comment,1,i1klm2r,,"Good to know thanks, I’ll check if there is anything going around the dns via IPv6. Could be that some devices are using my router as dns which has the stock isp configuration. Did that on purpose cause every query was listed twice on my dashboard, one from the device and one from my router. Anyways, glad to hear I’m not alone wondering what and why is happening.",pihole,1647892657.0
6970,post,5,tjj2l4,Pi-hole on 2 different screens?,"I set up pi-hole on a 2.8"" screen and attached a 5"" via HDMI, but the 5"" doesn't fill in completely(only about 1/4 of the screen.  During setup there were directions to set the width/height for the 2.8"" screen but I cannot find the site that described it now!  

Any way to do this?",pihole,1647888899.0
6971,comment,2,i1kcnh9,,Raspberry Pi screen resolution settings?,pihole,1647889014.0
6972,comment,2,i1kd5tp,,I am super new to the whole pi thing.  Where do I find those settings?,pihole,1647889213.0
6973,comment,3,i1kenxg,,"In the system menu under preferences if you have the Pi desktop interface available. Or via the terminal, the setup menu is accessible with the command *sudo raspi-config*",pihole,1647889806.0
6974,post,0,tjiujd,College Student with Queries,"Hi PiHole, I'm trying to propose my college set up ad-free internet, but it seems like a lot of the posts are more oriented towards private networks, so I have some questions:

Would I require multiple Raspberries to implement across a university campus with multiple routers? How difficult would it be to set it up so that PiHole filtered WiFi as a separate option to connect to?",pihole,1647888311.0
6975,comment,12,i1kbz2w,,"Bad idea. A university should have a significantly better DNS solution deployed (usually connected to domain controllers). You could use the lists for some blocking, but its very hard to find lists that dont negatively affect any functionality. If an individual or a department wanted to use it that wouldn't be too hard, but school-wide, horrible idea.",pihole,1647888749.0
6976,comment,3,i1kc9i4,,"The number of routers is not important. You want to have a failover concept, but afaik this is not so hard with DNS (because the client can have a list of DNS servers). A scaling must be made to match the number of queries per second. I think a load balancing in the backend should be possible on top of the multiple DNS IPs concept.

Maybe separate IPs could be offered for different levels of blocking.

And how much enforcement is needed vs a offering with opt out option.",pihole,1647888861.0
6977,comment,2,i1mdj3i,,"I really don't see this as a viable solution.

Who decides on what to whitelist?  What to Blacklist?  When to make an exception?

The technology is easy enough to scale (i.e. run it on VM's that have enough power and bandwidths), but the politics is what would be problematic.

In addition, there maybe some at the college who want to analyze the ads, either for content, potential security breaches or simply to study cross domain flows of information.  They couldn't do this now without bypassing the filters.

Just my $0.02",pihole,1647921229.0
6978,comment,-1,i1ke0f3,,"That's why I was thinking of having a separate wifi option, so that any functions that could be negatively affected can just stay on the old system. That and I think there's some legal issues if you don't inform people that you're altering their internet traffic, which is another incentive to make it a separate, clearly labeled option.",pihole,1647889543.0
6979,comment,1,i1kefck,,Hm. This might be more intensive than I thought. Thank you for your comment.,pihole,1647889710.0
6980,comment,3,i1kevp1,,So it sounds like you are only talking about a an untrusted “public” or “student” network. You'll need to know how that untrusted network connects to the trusted university system as well as the internet. If the untrusted network has it's own gateway it's a simpler issue; if it doesn't I wouldn't bother. You are better off just using a wifi bridge yourself and setting up whatever you want for your own personal use.,pihole,1647889893.0
6981,comment,1,i1kg9se,,"I can't imagine there actually are any legal issues. Most routers have a DNS cache like Pihole, and the network admin is well within their rights to block certain domains for whatever reason. It's possible that DNS query logging is legally gray in your jurisdiction but I don't think so.

Overall I think setting up Pihole in a setting with lots of users, particularly lots of users not familiar with Pihole and networking, is tricky and there will probably always be little hiccups even with the best implementation.

In terms of having a separate Wi-Fi SSID for ad blocking... It's probably possible, but I can't imagine many wireless access points have the capability to set a separate DNS server for each SSID.",pihole,1647890469.0
6982,comment,2,i1kmals,,">In terms of having a separate Wi-Fi SSID for ad blocking... It's probably possible, but I can't imagine many wireless access points have the capability to set a separate DNS server for each SSID.

What you'd probably want to do is have different VLANs/subnets for each SSID and then provide different DNS information from DHCP for each of those subnets.",pihole,1647892921.0
6983,post,53,tjipdy,Ubiquiti AP spamming pihole with unifi domain,"I've recently setup a Ubiquiti Access Point WiFi 6 Lite. The problem I'm having is that the AP is spamming both my piholes with unifi domains. I couldn't seem to find anything anywhere about this.

Does anyone how how I could stop it from constantly pinging both my pis? 

Some images to demonstrate:

&#x200B;

https://preview.redd.it/ao9innbb7so81.png?width=980&format=png&auto=webp&s=6a9ec63a384ac7d45e26737c54665e2f7824c95f

https://preview.redd.it/pm7zmr487so81.png?width=981&format=png&auto=webp&s=eee7480c89e9c3f70da1f3e4e631597f84b1c9e7

EDIT: Thank you everyone for the suggestions and help, finally led me in a right is direction. I jumped into all this without much knowledge of unifi systems and clearly misunderstood what standalone mode meant, thinking the ap would run perfectly fine by itself after I set it up on the app.

I then spent many hours trying to get tutorials on the controller on a raspberry pi to work but no luck, I should have probably just installed Ubuntu on one which i will most likely do as a more permanent solution.

I finally got the controller running on my windows 10 machine, which was a bit of a massive pain since their troubleshooting page that the software links literally doesn't exist anymore... But forcing java 8 and disabling private firewall seemed to do the trick and it all works now!",pihole,1647887924.0
6984,comment,27,i1kkawv,,"there is a setting in unifi which detects network uptime and speeds. I cant remember where it is, but you can disable it and this will stop. My USG used to do this all the time.",pihole,1647892161.0
6985,comment,9,i1kl5b7,,turn off wireless Uplink Connectivity Monitor on the unifi controller and also disable conditional forwarding. this is a dns loop.,pihole,1647892480.0
6986,comment,1,i1mq3zw,,"Sounds a little trollish maybe... but your device is supported by openwrt, which does not behave that way",pihole,1647929738.0
6987,comment,0,i1l9rvq,,Just spin up an Ubuntu VM and install the controller.,pihole,1647902711.0
6988,comment,1,i1l2ej0,,I had to disable DNS proxy on my billion router to stop this from occurring.,pihole,1647899598.0
6989,comment,1,i1llzgk,,"Your U6 Lite is looking for the controller, which the default on a L2 network is ""unifi"". Since you don't have an active controller, the U6 Lite is continually searching and not getting a response.",pihole,1647908056.0
6990,comment,1,i1nc5f4,,"APs and switches regularly query for the controller, which by default they want to reach through the ""unifi"" hostname.  
IMO your best move here is to create a DNS entry for this to make your unifi happy.",pihole,1647948154.0
6991,comment,1,i20aor1,,"Just wondering I’d you ended up setting up a controller on the pi?

Reason being I am having the same exact issue",pihole,1648170643.0
6992,comment,1,i4t4n16,,"Hello,

Late to the party but since I found my way here trying to solve this particular issue I'll post for the possible benefit of others.

This seems to be new behaviour in FW 6+ as I've been running an Ubiquity AP in standalone mode for years without this issue but after upgrading it to FW v6 the spamming began.

My solution was to downgrade the firmware. After many many tries the method that worked was the ""via SSH without internet"", details here [https://help.ui.com/hc/en-us/articles/204910064-UniFi-Upgrading-firmware-image-via-SSH#h\_01F8GWSVS8NAN7HRMB8TS0709D](https://help.ui.com/hc/en-us/articles/204910064-UniFi-Upgrading-firmware-image-via-SSH#h_01F8GWSVS8NAN7HRMB8TS0709D) . As usual you do this at your own risk or not at all if FW 6+ fixes something you need fixed.

Now it wants to talk with ""[trace.svc.ui.com](https://trace.svc.ui.com)"" every five minutes which I don't remember if it did before but for now I'm OK with it.

Take care!",pihole,1650010894.0
6993,comment,17,i1klebf,,Uplink Connectivity Monitor,pihole,1647892574.0
6994,comment,4,i1m6yrs,,"You can also set it to a custom domain/IP. 

Setting it to the gateway IP or an internal IP makes it less useful as an internet connectivity monitor, but (and I have not checked this in a long time) when the connectivity goes down the AP's used to reject client connections, bringing down your LAN for wireless clients. 

That always seemed stupid to me, so I set it to an internal host. The gateway in my case.

Edit: The setting is ""Uplink Connectivity Monitor"" under the ""Site"""" tab",pihole,1647917727.0
6995,comment,0,i1kt5nj,,"Problem is I don't think i can access the dashboard since im using the AP as a standalone device, the mobile app doesn't seem to have any options.

I've managed to SSH into the device and it seems that it is ""unable to resolve http://unifi:8080/inform""",pihole,1647895643.0
6996,comment,1,i1l2sss,,"The problem is, since I'm running the AP as standalone with app setup I don't think I can edit that setting anywhere? Unless I'm blind.",pihole,1647899767.0
6997,comment,1,i2210dj,,"Not yet no but I'm planning to. I'll either need to install ubuntu on one of my pis or the 32 bit version of PiOS since unifi doesn't seem to support the 64 bit one.

As a temporary solution I set the controller up on my windows PC and set the AP up (disabled DHCP, gave it a static IP etc) and it stopped complaining.",pihole,1648210668.0
6998,comment,3,i1ks8gi,,thanks. couldnt login to the dashboard from work.,pihole,1647895272.0
6999,comment,5,i1lbq2l,,"you could still download the unifi server application which allows you to adopt and configure devices. I would try this and see if it allows you to configure your wireless AP. If not, then if you are using unbound, you can configure it so the unifi domain's IP is 127.0.0.1",pihole,1647903549.0
7000,comment,2,i1lhfco,,"You could set the inform URL to be an IP, which will stop the DNS queries, but may generate other unnecessary traffic (albeit low volume, afaik)

`set-inform http://192.168.1.1:8080/inform`

Or you could set a local DNS record to point `unifi` to an IP so it resolves it and stops trying repeatedly. 

Both may cause some minor issues if you do start using a Unifi controller, but are easily solvable by doing the same thing but pointing to the controller. 

Again, might cause some other traffic or adoption issues (not running any in stand-alone), so it might take some additional tinkering.

Edit: actually, the AP may query the domain before every inform action anyways, so setting a local domain might not fix this. I can't remember off the top of my head, and I'm not in front of a computer to check. Setting inform to an IP, in my experience, cuts out the DNS queries.",pihole,1647906026.0
7001,comment,3,i1lfepo,,Why didn't you install the controller?,pihole,1647905140.0
7002,comment,5,i1l6nbw,,You need to setup a controller somewhere,pihole,1647901401.0
7003,comment,1,i1lmn89,,"Setting the inform to an IP would definitely cut the DNS queries. Problem is, if OP then later wants to configure the AP, OP will then need to have the controller use the same IP. Not difficult at all, just room for forgetting.",pihole,1647908350.0
7004,comment,1,i1lpne1,,"A series of mistakes an oversights.
The setup process led me to believe that I could just setup the ap on the app as a standalone device and it would be fine, and in terms of an ap it behaved perfectly fine. Apart from the fact that it clearly didn't with all the dns screaming.
I then tried to set it up on one of my PiS but none of the tutorials I followed worked and I eventually managed to get it running on my personal Windows 10 machine (it was great that their troubleshooting page doesn't exist anymore)",pihole,1647909698.0
7005,comment,3,i1l723a,,"This is the way. I had, up until very recently, the UniFi controller software running in tandem with one of my Pi-holes on a RP3. Very easy to do. 

Here’s the guide I followed to do it: https://lazyadmin.nl/home-network/installing-unifi-controller-on-a-raspberry-pi-in-5-min/",pihole,1647901571.0
7006,comment,1,i1ln574,,"Yep. I've actually ran into a similar ""aw crap forgot about that issue"" running my controller in a docker container and it setting the inform to the internal docker IP by default. Adoption would go wonky and I would scratch my head and mutter for a bit before remembering. After doing it a half dozen times, I found a more permanent solution, but I totally get what you're saying.",pihole,1647908574.0
7007,comment,1,i1lpcge,,"It might be me being an idiot but I followed so many guides which looked similar and none of them worked.
Latest version of mongo is not supported by unifi and then for 3.6 I needed libs 1.0.0 which was a massive hassle.
I've got a temporary solution with the controller now running on on my windows 10 machine and I'll get Ubuntu on one of the PiS and run the controller on that.",pihole,1647909561.0
7008,comment,1,i1lw774,,"This guide worked for me installing on a Raspberry Pi from just a few weeks ago:

https://community.ui.com/questions/Step-By-Step-Tutorial-Guide-Raspberry-Pi-with-UniFi-Controller-and-Pi-hole-from-scratch-headless/e8a24143-bfb8-4a61-973d-0b55320101dc",pihole,1647912684.0
7009,post,4,tjh5w1,Verizon 5G Home Internet (US) and pihole,"Has anyone gotten their pihole to work with this service? It's becoming available where I live albeit not yet at my address. My BIL has it and is very happy with it. He says it solved a lot of the dead zone problems within the house and that it was very price competitive.

Not looking to make the jump as soon as available, but merely wanted to know if anyone has been able to successfully deploy pihole with this service. There was [one other thread](https://www.reddit.com/r/pihole/comments/p044pf/new_router_wont_assign_ip_to_pihole/) about this, but it did not provide an answer.

FWIW, running an Edgerouter X in bridged mode. I do know that the 5G does not support bridged mode.",pihole,1647883884.0
7010,comment,3,i1kxh2n,,I believe you can do DMZ to your router for a poor man's bridge mode. Getting my Verizon modem in about 10 days so i can update then.,pihole,1647897522.0
7011,comment,2,i1k4qxh,,"With 5G service, you might be able set the DNS but it depends on the gateway they send you. I know on the ASK-NCQ1338, you can set the DNS.

[ASK-NCQ1338 manual](https://manualzz.com/doc/60133513/verizon-internet-gateway--ask-ncq1338--user-guide)",pihole,1647885934.0
7012,comment,2,i1kn65n,,I would just double NAT at that point. I dont trust any ISP so I would be putting a firewall behind their router and using my own wireless APs.,pihole,1647893261.0
7013,comment,2,i259bto,,"If anyone has this working, and can share their config, it'd be a big help.  I've got the VZW gateway set to use the pihole, my own router DMZ'd and itself using the gateway as DNS (if I dont, nothing works).",pihole,1648260699.0
7014,comment,2,i1ldtbp,,Thanks!,pihole,1647904454.0
7015,comment,1,i1v19eg,,"I have done this, just bind your real router to an IP addy, then set your verizon router (disable its wifi) to DMZ that ip address.  Problem solved.",pihole,1648077204.0
7016,comment,1,i1v1clq,,"double nat causes tons of problems, just have a single router, dmz it behind the vz one.",pihole,1648077241.0
7017,comment,2,i28to8k,,"Okay, so finally got my modem in and this is what I found:

* On Pi-Hole (running DHCP range 168.1.1-254) I messed around for no reason, in the end nothing is changed.  This wasn't the source of my issues.
* On MY ROUTER (Omada with software controller) the same thing.  I messed around with gateways and such, all to waste time finding my real problem.
* On VERIZON router, this is where I found my answers.  I left the DHCP enabled on that router, IP Range 168.0.2-254, subnet [255.255.255.0](https://255.255.255.0).  I was able to set my Pi-Hole as DNS server.  My problem the entire time is I kept trying to get the Verizon on my IP range with all other devices.  This caused me many beers drank.  After resetting the router and having mine plugged in still, it assigned a new IP to the WAN port of my router.  I was able to DMZ that IP. I had kept trying to use the IP on my home setup of 168.1.1 instead of the DHCP assigned port address given by the Verizon. Long story short:
   * Keep DHCP enabled on a different IP range as your home network.
   * DMZ the assigned IP of the WAN port on your router (it should show up on the drop down menu at this point).
   * Assign your Pi-Hole as DNS.
   * I made no other changes at this point.

I'm going to give this a go for a few days and see how it looks.  FYI I'm getting 400/40 service for the last few hours.

&#x200B;

Good luck.",pihole,1648333202.0
7018,post,2,tjgqw5,unable to locate package,"how can i fix this?  
E: Unable to locate package idn2

E: Package 'netcat-openbsd' has no installation candidate

I get it when i try 

curl -sSL [https://install.pi-hole.net](https://install.pi-hole.net) | PIHOLE\_SKIP\_OS\_CHECK=true sudo -E bash  
im on parrot os",pihole,1647882743.0
7019,comment,1,i1k6w3y,,"Note that your OS does not appear to be supported.

What is the complete output of `sudo apt update` ?",pihole,1647886759.0
7020,comment,1,i1k71cb,,"Well, it seems to be a openbsd package, so, if you skip the OS check you see it, but not when it only looks for Debian packages.",pihole,1647886815.0
7021,comment,1,i1m48ts,,"If you're on an unsupported OS, you could use Docker or a VM to get something up and running.",pihole,1647916400.0
7022,post,6,tjcn00,Would my latency in games go up if I installed a pi-hole?,Just wondering. Thanks.,pihole,1647871664.0
7023,comment,22,i1j5okt,,"No it won't.

In general I've found my browsing experience to be a touch more responsive as my Pihole responds to DNS queries much more quickly than my router and ISP DNS do. It seems to cache a bit more as well.",pihole,1647871857.0
7024,comment,8,i1j5tfv,,Should not be affected. Pi would just be lookup request to resolve the ip of a particular host. The game traffic would be sent to the ip in the normal way.,pihole,1647871917.0
7025,comment,5,i1k7o6f,,"Pi-hole only changes your DNS. Latency in games is not influenced by the DNS. Generally, it just does a DNS request when the game starts to figure out the IP of the server to talk to (that's where pihole hooks in), after that it's up to the game/TCP/UDP connection directly.

So, TL;DR: Nope. It technically can affect the time it takes to connect to a server the first time, but I haven't noticed any difference myself; if anything, it's slightly faster because the cache is really close to your PC.",pihole,1647887060.0
7026,comment,2,i1juo98,,No.,pihole,1647882013.0
7027,comment,2,i1kj8f5,,"Death by lag will not be your gamertag with PiHole services

Only if a server/download URL is blocked, would you have connectivity issues",pihole,1647891725.0
7028,comment,2,i1jm8tu,,"I game daily, I have a recursive dns set up with the pinhole as well. Noticed zero difference in latency, but Crunchyroll has no ads 😉",pihole,1647878755.0
7029,comment,1,i1kegqd,,Halo runs fine on my computer with a pihole on a pi zero w…,pihole,1647889725.0
7030,comment,19,i1j9u4p,,"That, and your browser isn't loading a bunch of ad images or videos.",pihole,1647873669.0
7031,comment,2,i1ldan8,,"Also queries to blocked domains don't even make it out of the LAN, meaning the packets for them aren't being sent in or out, freeing up bandwidth to the outside world.",pihole,1647904230.0
7032,post,2,tjc720,GoTo unable to make or receive calls on desktop while Pi-Hole is running,"I have an issue where my soft phone, GoTo, will not make or receive calls, or show statuses while Pi-Hole is running. The iOS app works great under the same conditions, but the desktop app does not want to play nice. 

I have whitelisted every domain listed here:  [https://support.logmeininc.com/pro/help/whitelisting-and-logmein](https://support.logmeininc.com/pro/help/whitelisting-and-logmein) 

Any other suggestions would be incredibly appreciated.",pihole,1647870407.0
7033,comment,2,i1jafz7,,"When using the IOS app, did you make sure you only use Wifi? IOS uses LTE as helper if Wifi is flaky. This could lead to wrong observation.",pihole,1647873924.0
7034,comment,2,i1jawhp,,And similar: can you verify that iOS uses Pihole for all DNS requests (IPV6 requests could go a different way if not configured properly as an own task besides v4).,pihole,1647874118.0
7035,comment,2,i1jkkrj,,Look at the pihole query log whilst trying to make a call and see what it's blocking.,pihole,1647878098.0
7036,comment,1,i1jbdct,,"Yes, I have turned off Cellular Data to the app and calls still work in and out.",pihole,1647874315.0
7037,comment,1,i1jdask,,">	IOS uses LTE as helper if Wifi is flaky

Maybe, if you have WiFi Assist enabled.",pihole,1647875125.0
7038,comment,1,i1jjqvq,,yes I have it set to have all dns requests go through the router/pi-hole,pihole,1647877771.0
7039,comment,1,i22c8v2,,[removed],pihole,1648216223.0
7040,comment,1,i1jp9nl,,"Nothing shows as blocking that I can see when trying to make a call, just nothing happens when I try and call out. It doesn't seem to attempt to call out.",pihole,1647879925.0
7041,comment,2,i1jkn9n,,"Some hints you could do further investigation:
- did you verify all requests go through Pihole (some situation might bypass)
- did you compare the pihole log between a successfull call and a failed one?
- did you try if it works when you disable Pihole temporarily?",pihole,1647878126.0
7042,comment,1,i22mm51,,"When we are searching for „leaks“ (i.e. DNS request bypassing Pihole and therefore is open to ads) IPv6 is one option. 90% of all how-tos only show, how the IPv4 settings should be arranged. 

But IPv6 is a second network, which self-configures and may lead to the situation where the client uses another DNS than Pihole (when using IPv6 for DNS query for v4 or v6 addresses). Many OS start to prefer v6 over v4 so we have to care dir both networks. Or eliminate v6 (which would not be my general recommendation).",pihole,1648220528.0
7043,comment,1,i1kum7l,,"find your device in the pihole query log, click on the device name and now you will see all attempts made by the device. 

If there are not any blocked attempts in the log, then pihole is not even seeing the request and it is most likely something on your computer blocking it.(this assumes everything is using the pihole correctly)",pihole,1647896229.0
7044,post,4,tj8djh,Pi-hole local DNS records not redirecting to local IP's,"Hi all!

Last week I installed pi-hole in a docker container and it has been blocking like crazy.

Today I had more time to look into the settings and saw an option to add local DNS records.

I'm not able to disable DHCP in my ISP router and so so checked ""**Use Conditional Forwarding""** and filled in the info.

https://preview.redd.it/7lo59fazmpo81.png?width=875&format=png&auto=webp&s=410ba319e5d7a411def625fe4da67870ad7c7d45

After this, I added a local DNS record pointing to pihole. (pi.local -> [192.168.2.30](https://192.168.2.30))

If i would access pi.local the browser gives the error  ""DNS\_PROBE\_POSSIBLE"" and doesnt redirect me to the given ip.

Is there something i've missed or did wrong?",pihole,1647857295.0
7045,comment,3,i1jlz62,,"This may be a browser behavior.  Let's check and see if Pi-hole is resolving the domain name to the IP.

From the terminal or command prompt on a client connected to your network, what is the output of the following:

`nslookup pi.local 192.168.2.30`

This routes the nslookup to the Pi-hole.",pihole,1647878651.0
7046,comment,1,i1k8ix5,,Thanks I'll check it out when I'm home!👍,pihole,1647887390.0
7047,comment,1,i1keczq,,"hey with the lookup ip it does work.

here's the output of nslookup:

""C:\\Users\\sebastiaan>nslookup pi.local 192.168.2.30

Server:  pi.hole

Address:  192.168.2.30

Name:    pi.local

Address:  192.168.2.30

C:\\Users\\sebastiaan>nslookup pi.hole

Server:  mijnmodem

Address:  fe80::7e16:89ff:fedd:b977

\*\*\* mijnmodem can't find pi.hole: Non-existent domain

C:\\Users\\sebastiaan>nslookup pi.hole 192.168.2.30

Server:  pi.hole

Address:  192.168.2.30

Name:    pi.hole

Address:  [127.0.0.1](https://127.0.0.1)""",pihole,1647889683.0
7048,comment,3,i1kgn2v,,"The client is not using Pi-hole. It is using a separate IPv6 DNS server.

    Server:  mijnmodem

    Address:  fe80::7e16:89ff:fedd:b977",pihole,1647890625.0
7049,comment,1,i1kv4ov,,I've set my isp router to use pihole. that is probably not waterproof,pihole,1647896431.0
7050,comment,2,i1kxf47,,"What device is this?

    Address:  fe80::7e16:89ff:fedd:b977",pihole,1647897498.0
7051,comment,1,i1l0fz7,,"that's the ipv6 of the isp router. I've set the router to use pihole:

https://imgur.com/a/lS3AmUY",pihole,1647898766.0
7052,comment,3,i1l34vh,,The router is also passing out its own IPv6 IP as DNS. That's what you need to fix.,pihole,1647899912.0
7053,post,0,tj8c80,Which SBC will fit my needs?,"Dear friends I am currently using a rpi 4 with 4GB RAM and a Samsung 980 Pro for the OS. I use Dietpi as OS. The RPi is wired directly to my router. I use pihole primarily for the DNS capabilities with unbound. I am really trying to push the limits with my next setup. 

I am down to avg 8ms when testing the DNS over WiFi and 4ms when testing with LAN. Reaction speed is of utmost priority for me. 

I believe that there will be a slight improvement by attaching the SSD directly to the SBC, so that Feature would be sweet. 

I figured the ROCK Pi 4 or the ROCK Pro 64 could fit my needs. 

A few more general things about my setup.

- HDMI is irrelevant for me since I only use ssh
- fanless would be sweet but not necessary
- Price is not relevant for the decision 
- I also run netdata but intend on not running any more software - 1 project 1 SBC is my motto

I am looking forward for your feedback which SBC I should choose or if I am missing another SBC that I did not consider before.",pihole,1647857144.0
7054,comment,5,i1itvf2,,What you are using now is overkill by a few orders of magnitude for Pi-hole.,pihole,1647865927.0
7055,comment,1,i1ix5a8,,"Thanks for the feedback, I feel that I might have dumped a few too many resources on the project. Is there any margin to improve the reaction speeds of the system?",pihole,1647867713.0
7056,comment,3,i1ixtbe,,"Pi-hole is working primarily in memory. Any improvements will be in the order of nanoseconds. 

Your biggest delay comes when Pi-hole has to forward a domain to an upstream DNS server. Pi-hole favors the fastest among your selected upstream DNS servers.",pihole,1647868062.0
7057,post,3,tj7ttk,Admin interface 403 forbidden via tailscale IP address but ok with local ip address,"
[✓] Your debug token is: https://tricorder.pi-hole.net/zq5eYiX8/

Hi, I have everything working and when I try to use tailscale to share my pihole services with other outside devices (following the [instructions](https://luther.io/tailscale/raspberry-pi/pi-hole/tailscale-pi-hole/), I get a 403 forbidden when I try to load with the tailscale ip address; the local ip address still works fine.....

Any ideas?  Thanks in advance.",pihole,1647855035.0
7058,comment,1,i1itkfv,,What is the complete URL you are using with the tailscale IP address?,pihole,1647865749.0
7059,comment,1,i1ja7l5,,100.01.01.01/admin,pihole,1647873826.0
7060,comment,1,i1jcpa1,,"That is not a complete URL. What protocol are you using (http, https)?

Edit - your Pi-hole is at this IP.  How is tailscale traffic being routed to the Pi-hole web admin URL at that address?

    IPV4_ADDRESS=192.168.1.3/32",pihole,1647874872.0
7061,comment,1,i1jpp8l,,"I can access it on my home network at the 192, but not on outside systems
I've tried http and https.  It IS returning a page of 403 Forbidden on http, nothing on https.",pihole,1647880093.0
7062,post,0,tj6vz4,Would our Xbox still function through a piHole?,What will probably break?,pihole,1647851057.0
7063,comment,3,i1iampd,,"The way to figure this out is to install a pihole instance, then point the Xbox DNS towards it. Monitor the Xbox DNS records in the pihole, and see what’s what. If things are breaking, then start whitelisting web pages. 

Using pihole to whittle down services like Xbox Live to only what is necessary with as little tracking and telemetry as possible is a process of trial and error.",pihole,1647851477.0
7064,comment,1,i1iuphz,,I set up my PiHole last weekend and Xbox Gaming worked fine so far. Haven't specifically checked if the xbox uses PiHole as DNS but I set it via DHCP so should be fine.,pihole,1647866405.0
7065,comment,1,i1kv1ba,,I whitelist my consoles now. In the past my Xbox achievements stopped working for awhile before I realised and I missed out on some FH3 trophies :(,pihole,1647896395.0
7066,comment,3,i1ib3yf,,">Using pihole to whittle down services like Xbox Live to only what is necessary with as little tracking and telemetry as possible is a process of trial and error.

It's all pretty clearly listed in the [Commonly Whitelisted Domains](https://discourse.pi-hole.net/t/commonly-whitelisted-domains/212) Discourse entry, along with many other cases.

In cases like this where it's a service in particularly high demand, you'll find that that process of elimination has almost always been outsourced to the masses already and you'd be reinventing the wheel.",pihole,1647851907.0
7067,post,1,tj6mzp,No device on my network can access IPV6 addresses with pihole,"This causes many issues as some things try to use ipv6 when available, and so those requests fail. For example, all my ping6 attempts fail, installing random packages with NPM, or apt install, hang as well. I have confirmed it is related to ipv6 by disabling ipv6 in a device, and then trying to download the same failing packages, which then work. I think I have narrowed it down to my router's firewall. I have a netgear router with both ipv4 and ipv6 DNS pointing to my pihole, and when I disable the ipv6 firewall in the router, everything works. Is there any risk in doing this? Alternatively, I can just not use pihole for ipv6 and can put cloudflare or something else as my ipv6 dns in the router settings, rather than the pihole.

Anyone else have experience with this ipv6 issue? It may just be my router and not pihole at all.  


Update: The problem goes away for a few minutes but then comes back regardless of whether I am using the pihole as DNS or not, and regardless of whether I set my ipv6 firewall to disabled in the router. This means it is likely just something wrong with my router (ie that it works for a few minutes, and then stops working).",pihole,1647849992.0
7068,comment,2,i1i9vtf,,"In general there is nothing against using IPv6 to the internet. This is what it is made for. Put you might want to start checking how IPv6 is configured / configuring itself. Caring just for v4 is only half of the story.

And yes, it looks like Pihole is working, but if an application wants to talk to a service via v6 it gets stuck in your FW.

DNS wise all combinations are possible: use v4 or v6 to query for AAAA (v6) or A (v4) records.",pihole,1647850794.0
7069,comment,1,i1ia2cx,,"So turning off ipv6 firewall on the router was a fluke because the problem came back. Now I tried the other option of not using the pihole as DNS in my router's ipv6 section, and it works again, so I will see if its a fluke or if stays fixed. If it stays fixed, it means it is something to do with the rpi 4 and pihole.",pihole,1647850958.0
7070,comment,1,i1iabnl,,You have to investigate more deeply if DNS leads to a problem or something else. Get your Sherlock tools and start digging 😁. Logfiles are a good source: the hanging applications should share their problems somewhere.,pihole,1647851194.0
7071,comment,1,i1iat8l,,"Es gibt die üblichen Tools auch für v6, zB ping. Du kannst damit v6 Adressen öffentlicher oder lokaler Server anpingen, über den Namen oder die IP … solche Dinge würde ich versuchen.",pihole,1647851638.0
7072,post,1,tixivy,observed inconsistencies in blacklist regex expression,"hi everyone,

Over the years i have seen many inconsistencies in regex expressions, particularly for blacklist expressions since we installed pihole mainly to keep stuff out.

examples of what i mean by inconsistencies:

1. for google amp, i have seen `^(.+\.)?ampproject\.(org|net)$` and `^(.+\.)?cdn\.ampproject\.org$` . Why can't i just use `.*\.ampproject\..*` ? 
2. for google adsense, i have seen `([A-Za-z0-9.-]*\.)?googlesyndication(\.\w{2}\.\w{2}|\.\w{2,4})/` . why can't i just use `.*\.googlesyndication\..*` ? 
3. what is the difference betcween `(^|\.)` , `^(.+\.)?` ,  `([A-Za-z0-9.-]*\.)?` and `.*\.` at the front? also, what is the difference between `(\.\w{2}\.\w{2}|\.\w{2,4})/` and `\..*` at the back?
4. finally, can i just remove `$` at the back of `(^|\.)examplexyz\.com$` and add `.*\.` to make it `(^|\.)examplexyz\.com.*\.` ? Since sometimes a connection is made to another weird URL that contain the `examplexyz.com` in it. an example of what i mean by ""another weird URL"" is `dwqd12-421d-e21.examplexyz.com.dmai2-examplecdn.com` \- i know for sure `(^|\.)examplexyz\.com$` won't block it.

Please don't just reply with the expression tutorial, i have read through it many times and don't understand what are the differences thus i asked, i hope i am not the only one. thank you all!",pihole,1647817857.0
7073,comment,1,i1gwray,,"Run your regex through regex101.com and it will show you the elements and allow you to test names against your regex. 

There can be multiple regex that will block the same domain.",pihole,1647821106.0
7074,comment,1,i1h6d24,,"\>1) for google amp, i have seen \^(.+\\.)?ampproject\\.(org|net)$ and \^(.+\\.)?cdn\\.ampproject\\.org$ . Why can't i just use .\*\\.ampproject\\..\* ?

Because the first regex matches \[\^.\]ampproject\\..\*

\>2)

Same: the first matches the raw base name (no subdomain) again.

\>3) what is the difference \[between\] (\^|\\.) , \^(.+\\.)? , (\[A-Za-z0-9.-\]\*\\.)? and .\*\\. at the front?

The same, matching subdomains.

\>3a) also, what is the difference between (\\.\\w{2}\\.\\w{2}|\\.\\w{2,4})/ and \\..\* at the back?

\\w isn't something in traditional regexs, someone else needs to answer, but there is a count on the left (which, truth is, is an extension to the original syntax) so .\* should match more.

\>4) finally, can i just remove $ at the back of (\^|\\.)examplexyz\\.com$ and add .\*\\. to make it (\^|\\.)examplexyz\\.com.\*\\. ?

Nope; that would be completely different; you would be matching [examplexyz.com](https://examplexyz.com) in the middle of the domain name, not just at the end; ""$"" means the end.

\>4a) Since sometimes a connection is made to another weird URL that contain the examplexyz.com in it. an example of what i mean by ""another weird URL"" is dwqd12-421d-e21.examplexyz.com.dmai2-examplecdn.com - i know for sure (\^|\\.)examplexyz\\.com$ won't block it.

Indeed; it's not meant to.  Suppose you want to block ""[apple.com](https://apple.com)"" because you don't like apple, then you might not want to block:

[substitute.apple.com.microsoft.com](https://substitute.apple.com.microsoft.com)",pihole,1647825676.0
7075,comment,1,i1loz9c,,is there any guide to the testing? i'd love to try that out!,pihole,1647909395.0
7076,comment,1,i1lqmm3,,"thank you for the long answer!

>Because the first regex matches \[\^.\]ampproject\\..\*

what do you mean by ""first regex""? do you mean  `^(.+\.)?` ? by the way i thought `.*\.` would block everything (sub domains or not). anyway, what do you recommend i use - i want to block everything that comes before the domain name.

>Same: the first matches the raw base name (no subdomain) again.

i assume by ""raw base name"" you mean the domain name?

>\\w isn't something in traditional regexs, someone else needs to answer, but there is a count on the left (which, truth is, is an extension to the original syntax) so .\* should match more.

are all regexs built the same? i didn't know that..",pihole,1647910145.0
7077,comment,2,i1m0hbd,,Enter your regex at the site. Then you can test various domains against that entry.,pihole,1647914625.0
7078,comment,2,i1yzalm,,">what do you mean by ""first regex""?

The first one you list, i.e.  \^**(.+\\.)?**ampproject\\.(org|net)$ because in that regex the part I've highlighted is optional, so \^amproject is matched.

>i thought .\*\\. would block everything (sub domains or not)

In practice yes, it will, because all the domains pihole checks have a literal ""."" in them (I believe).  I.e. I don't think pihole passes things like ""com"" through the regexes (but I may be wrong).

Blocking any sub-domain is **\\.\[\^.\]+\\.\[\^.\]+$** to match "".domain.tld"" at the end of the string (domain name), so if you have a domain [foo.bar](https://foo.bar) the regex **\\.foo\\.bar$** will block all the subdomains of [foo.bar](https://foo.bar) but not [foo.bar](https://foo.bar) itself.

You don't need to match the whole string; it's not anchored unless the regex explicitly anchors it with **\^** (for the start) or **$** (for the end).  This is why the empty string would match everything (if the UI allowed it) and the simplest match of everything except the empty string is the regex **.**

If you really want to match anything **R?** will work (or, indeed, anything valid before the question mark.)

>\>Same: the first matches the raw base name (no subdomain) again.  
>  
>i assume by ""raw base name"" you mean the domain name?

Yes, i.e. it matches [foo.bar](https://foo.bar) as well as .foo.bar

>are all regexs built the same? i didn't know that..

They're all the same thing in the same sense that all arithmetic is the same; there's a common underlying mathematical/linguistic formalism, however the notation varies and there are extensions.  For example the **{min.max}** count extension allows a short hand for the true underlying RE:

**f{1,4}** \-> **f|ff|fff|ffff**

There are also multiple implementations, indeed, IRC, the original unix source contained at least two and they had slightly different syntax.

BTW (this is important ;-) I learnt the basics of this stuff in 1982 and I'm making these statements from memory.  I've used and implemented RE parsers many, many, times since then but I still get things wrong.  Here's a more authoritative source:

[https://web.mit.edu/6.005/www/fa15/classes/17-regex-grammars/](https://web.mit.edu/6.005/www/fa15/classes/17-regex-grammars/)

REs are nasty because despite the conciseness in practice when we use them we often end up with things that match the same string multiple ways; the apparently innocent RE:

**.+\\..+**

Matches a.b.c two ways - (a.b).c and a.(b.c) - in practice this doesn't (shouldn't ;-) slow down the parsing but the ambiguity makes debugging an unintended match more difficult.",pihole,1648150843.0
7079,post,5,tiw9t3,ipad/ipados 15 with pihole,"I have an ipad with ipados 15.4 and Chrome browser, which I've used on my LAN with a pihole for some time. Ad blocking worked on my LAN and ipad/chrome until recently, when I suddenly started getting deluged with ads again. Based on other posts on this subreddit it seems the problem is with iCloud and ""ipados private relay"", and on checking ipados settings I found that after the ipados upgrades my wifi DNS server address was set to ""Automatic"" and I could not be set to my DNS server address to my local pihole system on the LAN. When I try to do so I get a red circle icon with a dash in it, and it reverts back to Automatic, which is apparently an Apple/iCloud DNS server(s). When I try to disable ipados private relay in settings I get a popup window inviting me to upgrade to iCloud+, though I don't use iCloud now .... ie. I can't figure out how to disable ipados private relay. Anyone know how to fix?",pihole,1647814241.0
7080,comment,2,i1gq171,,">When I try to do so I get a red circle icon with a dash in it, and it reverts back to Automatic,

Please post a screen capture of what you are seeing on your IOS device screen.

>I can't figure out how to disable ipados private relay.

This is done in settings > iCloud.  If you don't use iCloud+, I don't think iCloud Private relay is an option.

In any event, a default install of Pi-hole should block iCloud Private Relay.  We use the method specified by Apple to do so.

[https://docs.pi-hole.net/ftldns/configfile/#icloud\_private\_relay](https://docs.pi-hole.net/ftldns/configfile/#icloud_private_relay)

[https://github.com/pi-hole/FTL/pull/1171](https://github.com/pi-hole/FTL/pull/1171)

https://developer.apple.com/support/prepare-your-network-for-icloud-private-relay

Edit - I am also running IOS 15.4 and have not seen this problem.",pihole,1647818032.0
7081,comment,1,i1k0y1g,,"You’re right and I was confused. The problem was in my router config and not with iCloud Private Relay. My router is the DHCP server, and what I needed to do is specify my pinhole’s LAN address as the first of my DNS servers on the router. Ad blocking again working very well!",pihole,1647884474.0
7082,post,14,tiw749,Report of root level domains?,Is there any ability in the pihole reporting to be able to browse root domains (i.e. [microsoft.com](https://microsoft.com)) that would group all of the subdomains (i.e. [updates.microsoft.com](https://updates.microsoft.com)).  I'm interested in large picture what's dialing back to where.,pihole,1647814019.0
7083,comment,3,i1gqgxp,,"You can run an SQL query to show all the domains queried by your Pi-hole clients over the lifetime of your query database.  From there, you can export the text file and sort/search as needed.

`sqlite3 /etc/pihole/pihole-FTL.db ""select domain from queries group by domain order by domain""`",pihole,1647818231.0
7084,comment,2,i1gnrqt,,"Root level is the ""."" 

TLD are top level domains, the .com, .org, .net and so on

&#x200B;

What you want to do is to be able to enumerate a specific company level domain or FQDN.

&#x200B;

Note that nslookup has this capability, but that it is likely blocked by commercial entities (option ""ls -d"" will list all records).  

&#x200B;

Hope this helps.",pihole,1647817019.0
7085,post,5,tiunqv,help with error message,"I keep getting ""Warning in dnsmasq core:not giving name raspberrypi.lan to the DHCP lease of 192.168.1.131 because the name exists in /etc/hosts with address 127.0.1.1"" in my issues log. Does anyone know how to fix this?

The pihole works, but this message keeps repeating over and over.",pihole,1647809712.0
7086,comment,2,i1gk65w,,DL6ER gives a great explaination here: https://discourse.pi-hole.net/t/warning-messages-from-dnsmasq/52034/3,pihole,1647815438.0
7087,comment,1,i1gqt4d,,"Note - this is a warning, not an error.",pihole,1647818383.0
7088,comment,2,i1grvsa,,Thanks for this! I just went in and deleted the 127.0.0.1 from the hosts/etc file and it seemed to fix it,pihole,1647818867.0
7089,comment,2,i1hdsvs,,"This doesn't seem like an ideal fix at all.

Do you actually have more than one device on the network with the hostname `raspberrypi`? What's the client that's requesting this lease? Another Raspberry Pi board, another device entirely, or itself?

If you actually do have two or more clients with the same hostname, the better solution would be to change their hostnames so that they're unique, `raspberrypi-primary` and `raspberrypi-secondary` for example. Just edit `/etc/hostname` manually, and then edit `/etc/hosts` and replace any instances of the old hostname with your new hostname. At that point you could put the `127.0.0.1 hostnamehere` entry back, so the machine actually knows what it's called.

It's potentially possible that you've got yourself into a situation where the Pi-hole DHCP is attempting to assign an address to itself, but I'm not sure if that's the case here. The fix for that would be very simple, though. Statically address the Pi-hole host (with an address outside of your DHCP pool(s)) using its local network configuration so it never requests an address to begin with.",pihole,1647829292.0
7090,comment,1,i1hfk7c,,"Hello. Thanks for answering. I have a few raspberry pis on my network (I have one as an All-star node and another as DMR hotspot (ham radio stuff)).

I am familiar with raspberry pis, but am not super familiar with Linux commands. 

So you're saying go into etc/hosts and put the 127.0.0.1 back in and then label it?  Because in the etc/hosts file, the only thing that was there was address (127.0.0.1) without a name.

Thanks for any help you can provide.",pihole,1647830165.0
7091,comment,1,i1hfx6z,,"Also, how do I statically address the Pi-hole? Through the settings on the Pi-hole admin screen? Or through Raspi-config?",pihole,1647830348.0
7092,comment,1,i1mdn1o,,">So you're saying go into etc/hosts and put the 127.0.0.1 back in and then label it?

Correct.

The hostname should match the (preferably unique) hostname value you set in `/etc/hostname`. Note that only alphabetical, numerical, -, and _ characters are valid for a hostname.

You can get creative, or just go with something simple and easy to remember like `raspberrypi-one`, `raspberrypi-two`, `raspberrypi-three`, etc.

Per your other comment regarding static addressing: Primarily, note that this isn't required if the clients have unique hostnames. If you want to proceed and static address them anyway, if they're Raspbian/RaspiOS/Debian based systems, as much as i dislike the approach the simplest way for an end user to configure a client side static address there is via editing `/etc/dhcpcd.conf`. You may have to install the `dhcpcd` package if this file does not exist.

Then you can append:

```
interface eth0
static ip_address=STATIC_ADDRESS_HERE/24
static routers=GATEWAY_ADDRESS_HERE
static domain_name_servers=PIHOLE_HERE
```

Note the interface name. This needs to match the interface you're setting the static address for, be it `eth0`, `wlan0`, `enxMAC_ADDRESS`, whatever.

The `domain_name_servers` field can contain multiple, comma separated IP addresses. If you want that client to use your Pi-hole, and your Pi-hole only, enter only the local IP address(es) of your Pi-hole server(s) here.",pihole,1647921292.0
7093,comment,1,i1nk5ke,,"Excellent! Thanks for taking time to respond. I'm at work now, but I'll try this when I get home!",pihole,1647952890.0
7094,post,10,tiote1,Has anyone seen spectrum ipv6 PTR records for local devices showing up in your logs? I have no idea where these are coming from.,,pihole,1647793768.0
7095,comment,5,i1fnwbb,,"The ISP ""owns"" the netblock and has defined a PTR record for every IP in it. Most likely they used something like bind's built in $GENERATE facility for this. 

An example in IPv4 for A records:

$GENERATE 1-255 host-$ A 1.2.3.$

Which makes host-1.whatever.com, host-100.whatever.com etc.

ISP's often do this, and something like you are seeing is a logical format.",pihole,1647801644.0
7096,comment,2,i1f4d7c,,What device does your log say is sending the traffic?,pihole,1647793823.0
7097,comment,1,i1f4lg6,,"I ran a tcpdump on the pihole and all of the requests are coming from my local devices. I have a spectrum modem, no routing capability according to them, and my own firewall and networking equipment.",pihole,1647793918.0
7098,comment,1,i1fw9sx,,"That makes a lot of sense, thank you for the explanation!",pihole,1647805253.0
7099,comment,1,i1f65sf,,All of my local devices are using these spectrum ipv6 PTR’s to make requests outbound. The format seems to be ipv6local.inf6.spectrum.com,pihole,1647794524.0
7100,comment,1,i1fa2jl,,"Dumb quest: is it like sky where they send you a receiver box? If it's on the network it could be the box, but then I suppose that would obvious haha.",pihole,1647796014.0
7101,comment,1,i1f6cg1,,Do they have an ISP-provided antivirus or firewall installed?,pihole,1647794588.0
7102,comment,1,i1fht18,,Nope it’s a regular internet modem. Plugged into WAN port on my firewall,pihole,1647799128.0
7103,comment,1,i1f74cd,,"No, I have a full unifi setup including firewall. I only have a modem from Spectrum.",pihole,1647794872.0
7104,comment,1,i1fhyc3,,Ah I meant do you have cable box that uses Ethernet to connect instead of something like rj45,pihole,1647799186.0
7105,post,0,tio4cc,Local clients not found unless listed in local DNS,"I use pihole as both DNS and DHCP, with iptables blocking outbound port 53 and redirected to internal pihole. Now, when I try to resolve something like ""mylaptop"" which should be [192.168.100.56](https://192.168.100.56); it will not resolve unless I have made an entry in local DNS. Once I manually enter it, then everything resolves fine. This is not a sudden issue, has been for almost a year. It's just not getting to really be an issue as my number of devices has grown. I run a lot of VMs and container services, I set a lot of things by static IP reservations rather than worry about configuring a machine's static assignments through DHCP when it will be tossed in a couple of weeks anyway.",pihole,1647791849.0
7106,comment,1,i1fyc0n,,[Local DNS in PiHole](https://www.youtube.com/watch?v=083NowDtnmo),pihole,1647806138.0
7107,post,2,tilgcg,Issues with Pi Hole and BT Smart Hub,"I changed my ISP from Virgin to BT and I'm having a few issues with my PiHole set up.

I turned my DHCP server off on my Smart Hub 2 and turned it on on my PiHole.

[Smart Hub DHCP](https://i.imgur.com/3dGzU10.jpg)

All so far is good but every 24 hours when the IP addresses are refreshed I lose all internet connections.

[Pi Hole DHCP lease ](https://i.imgur.com/KPCRod5.jpg)

What am I doing wrong?

Thanks",pihole,1647784119.0
7108,comment,1,i1emgqm,,Have you set all devices with Static DHCP leases?,pihole,1647786118.0
7109,comment,1,i1evixb,,"No, I've never set any Static DHCP numbers",pihole,1647790154.0
7110,comment,1,i1fs52u,,"Set the pi to have a static ip number.  I choose a low one, i.e 192.168.1.3 but doesn't really matter.

That way when the ip leases after 24 hours the pi dhcp server is still available to give out the new ip numbers.

I found it best once pi is set to static is reboot everything on the network by turning off at the wall for a few minutes, except router and pi",pihole,1647803464.0
7111,comment,1,i1fybss,,"I've actually got it set up on my Synology via a docker and I've made sure that the ""server address"" is set to my server.

I'll set my server as a static IP on my PiHole",pihole,1647806135.0
7112,post,0,tilaj3,UniFi UDM-P and Pihole help,"I need a good step by step guide.  I have followed all of the steps I could find including the guy from crosstalk.  

I can get local traffic to flow through the pihole but not wireless.  They are on the same bland and I’m getting frustrated.  I’m new to this space and just need a hand.

Any help is appreciated!",pihole,1647783612.0
7113,comment,1,i1h5rmn,,"Define local traffic vs wireless traffic.

Did you set your router LAN to point to the Pi Hole? Do not set the WAN to Pi Hole.

Did you reboot/refresh the network connection on the wireless device(s)? You know so the network info will update on them.",pihole,1647825391.0
7114,comment,1,i2maxat,,Did u get sorted? I’m having the same issues,pihole,1648589474.0
7115,post,0,tihx68,Should I chown all PiHole files to the pihole:pihole?,"Hello,

I struggle with some problems when using web interface ilke when adding the entry to the whitelist I receive information that domain is already in the whitelist, but I can see nothing on this screen except input box.   
Or trying to get the long term data query log I receive error ""An unknown error occurred while loading the data.  
These above are only examples.

The question is if remedy could be to chown all the PiHole files to the pihole:pihole or should I leave it as it is now?

https://preview.redd.it/1bnxyfqgiio81.png?width=821&format=png&auto=webp&s=bc8ff1f55b99c95c8b93976d81bcfbd22d0729df",pihole,1647771014.0
7116,comment,2,i1e7so6,,The problems you are describing are not due to ownership. The owners you show are correct.,pihole,1647777973.0
7117,comment,1,i1e9kqm,,"Maybe just try repairing the pihole install with ""pihole -r""",pihole,1647779148.0
7118,comment,1,i1f5mb4,,"So what can be the reason of such problems?   
I am using the version installed separately not the distro...",pihole,1647794326.0
7119,comment,1,i1f5e81,,"I've done it multiple times, without the effect... :-(",pihole,1647794242.0
7120,comment,1,i1f6i5c,,">	I am using the version installed separately not the distro…

Please elaborate.",pihole,1647794643.0
7121,comment,1,i1frekq,,"Sorry, my bad. I have also the MotionEye installed on this RPi and it is distributed as distro, so I mixed it with PiHole...",pihole,1647803145.0
7122,post,0,tiex7l,Internet accessible Personal DNSoverHTTPS Server?,"I’m aware of pivpn, however I would like to know if I could say run my own internet accessible personal DNS over HTTPS server in a reasonably secure manner. Perhaps access control? I ask since I recently realized I can’t force my iPhone to use it (my WireGuard tunnel configured to be used for dns only) for ALL dns queries (it will bypass for certain things unless you use a mobileconfig file for encrypted dns)",pihole,1647757516.0
7123,comment,2,i1h1f8e,,"Yes, you can easily. There are a bunch of ways to do it.

The easiest is the pihole competitor adguard home. It makes it a cinch to set up a dtls/doh upstream. Grab a free VM over on oracle cloud and set it up.",pihole,1647823306.0
7124,comment,1,i1f639i,,"I have personally not looked into it you might have to get a domain name and a SSL cert for it to be https, then run a reverse proxy. I use the same thing on my jellyfin media server.",pihole,1647794500.0
7125,comment,3,i1hmckz,,"No need to run the entire project. You can still run Pi-hole, and put [dnsproxy](https://github.com/AdguardTeam/dnsproxy) in front (either on the same machine or another server entirely). That's the guts of AdGuard, essentially. Which itself is mostly a compilation of cobbled together existing Go libraries.

I still need to fix up a couple of permission issues in my documentation, but I have the rough outline of deploying dnsproxy as a standalone simple service [here](https://github.com/saint-lascivious/dnsproxy-config). The last few edits I made to it were getting it to use the yaml syntaxed config file, and trying to make sure a default configuration should Just Work™ without having to edit it, but you'd still want to.

I've got the configuration set out so that things can be toggled on and off in the config as required. Setting up your own FQDN and certification is left as an exercise for the user. Some domain registrars will provide one or more free SSL certificates for the domain.

Or you can use certbot, but make sure to pass `--preferred-chain ""ISRG ROOT X1""` during generation and renewal of the certificate or most Android devices will not be able to validate the certificate.",pihole,1647833681.0
7126,comment,1,i1k226s,,Is it safe to setup as described on bare metal and use port forwarding to make assessable?,pihole,1647884905.0
7127,comment,1,i1li9r0,,"It's ""safe"", sure. Though the end result here is you very likely ending up with an open resolver.

Securing the instance is an exercise for the user. If you're not going to be restricting access to it by any means, I'm going to go with ""not particularly"".",pihole,1647906398.0
7128,comment,1,i1makva,,"To be absolutely clear here, it's as ""safe"" as any other open resolver is. You're going to want to run some form of firewall in front of this restricting access at IP level.

This makes mobile device access somewhat challenging with typical mobile data provisioning with CGNAT, and not having a unique IP address. My service provider allows for static IP4/6 addressing for post-paid accounts, but this is quite a rarity and very few mobile providers provide this or have the capability to.

If you don't have uniquely addressed mobile devices, d you almost certainly do not, the best you're going to be able to do access control wise is restricting access to within your CGNAT IP block.

If you don't run a firewall in front of this, sure, it's publicly accessible, and will be discovered and probed very shortly after its creation.",pihole,1647919594.0
7129,comment,1,i1rcgay,,Understood. What’s the best way? Ranges of IPs? Perhaps iptables could be of use for that,pihole,1648011701.0
7130,comment,1,i1rd3pg,,"Yea…. Good point. Shit. What about using something like fail2ban to block brute force attacks and perhaps some sort of script to edit ip tables based on a lookup and see what the isp is… if it’s AT&T mobile then it will allow it? In addition to isp, check general region? I’d imagine there’s got to be an api that can be accessed by curl. Unfortunately, I’m pretty new to bash scripting",pihole,1648012139.0
7131,post,1,tidgcv,Pfsense + Pi-hole + VPN,"Hi all,

I just wanted to clarify some functionality.

I have pfsense and am looking into a VPN and Pi-hole.  

What I wanted to know is can I have Pi-hole connect to the VPN and deal with it or is it only for advertisements and VPN has to be done through Pfsense? 

I would prefer to not fiddle too much with Pfsense and have it all going through the Pi-hole. 

Appreciate any feedback.",pihole,1647751672.0
7132,comment,1,i1dkq6x,,"You can install PiVPN w/Wireguard on the machine you are running Pi-Hole. You would just need to open the corresponding NAT UDP port for Wireguard in your pfSense firewall.

https://www.pivpn.io/

*This is for creating a VPN tunnel into your network from the outside. This would allow you to connect to a local NAS from outside your home, for instance. If you are looking for tunneling all outgoing connections for anonymity, you will likely have to set that up in pfSense.",pihole,1647758804.0
7133,comment,1,i1lzj0c,,"Let pfSense handle the VPN, it's very good at it, and your vpn provider likely supports pfSense routers.

Turn off both dns resolver and dns forwarding on pfSense, and tell it to use pihole as it's dns server.

Lastly, tell pfSense to connect to the vpn server via IP address only (no domain names) so it doesn't need to send any dns requests before the vpn is up.  Configure pihole to only use the dns servers \*inside\* the vpn network, to prevent leaks.",pihole,1647914185.0
7134,comment,1,i1dkru7,,Thanks man. I will look into this,pihole,1647758840.0
7135,comment,1,i1mh8rg,,Thanks man!,pihole,1647923431.0
7136,post,1,tib4if,Permit all origins + Tailscale VPN Safe?,I'm using tailscale vpn because wireguard and openvpn weren't working for me. I had to enable Permit all origins for the interface settings in pi hole admin to get it working for outside my network. I read that this was safe as long as you don't have port 53 forwarded in your router. I don't have anything forwarded because tailscale vpn doesn't need you too. I was just wondering if it might be unsafe because tailscale is able to send the dns traffic through without this port being forwarded somehow. I'm not really sure how this works.,pihole,1647743285.0
7137,comment,1,i1djjow,,Nope. It should be perfectly safe.,pihole,1647757851.0
7138,post,16,tiaxtp,Is it just me or is recursive dns with unbound faster than normal dns?,Just setup unbound with my pihole and once it had my normal sites cached they load almost instantly. Like I press enter and they load. Before it usually took a few seconds for a page to be fully loaded and I have a pretty good connection.,pihole,1647742641.0
7139,comment,9,i1cx3ne,,"Unless the resolver you were pointed at was providing particularly slow responses, the difference in latency here should be miniscule.

Pi-hole runs its own cache, and most of the time you'll be interacting with that. Particularly bad cases where no section of the lookup are cached by Unbound may take several seconds, so there's snakes and ladders here, so to speak.

I went a step further with Unbound in providing it a consistent in-memory disk backed database using Unbound's cachedb module (your Unbound binary probably doesn't include this) and a Redis database, so I never have to rebuild Unbound's caches. Every record is retained and served optimistically with TTL 0 while the record is refreshed and cached again in parallel. After several months of usage that database now contains approximately 80k records, and resolution is pretty much instantaneous even immediately after restarting Unbound or the entire machine.

Another bonus is multiple Unbound instances can be serviced by the same database (I have my database server separate as a dedicated server), so any one of my Unbound instances have the same persistent cache as any other in the fleet.",pihole,1647743776.0
7140,comment,2,i1dh7z2,,"This sounds amazing. Do you have a write-up somewhere on how one can do this? I mean, in regards to using cached? I can quickly grab and compile unbound if necessary.",pihole,1647756034.0
7141,comment,8,i1djrf9,,"All the necessary documentation is included in Unbound's [primary configuration document](https://nlnetlabs.nl/documentation/unbound/unbound.conf/).

The relevant documentation can be found be searching the linked document for ""Cache DB Module Options"". Note that the `cachedb` module must be enabled in the `module-config:` declaration.

The order of the module-config declaration is quite specific. You'll want:

`module-config: ""validator cachedb iterator""`

You'll know it's working when:

 - `redis-cli dbsize` returns a non-zero value

 - you receive a warning on startup of the Unbound service (`systemctl status unbound`) that the `cachedb` module is enabled and will be returning cachedb records with a TTL of 0 (this is expected and I honestly have no idea why the warning is persistent)

Some relevant values I use for the Redis database itself in redis.conf:

```
databases 1
stop-writes-on-bgsave-error no
rdbcompression no
maxmemory 16M
maxmemory-policy allkeys-lru
```

For a single uncompressed write-safe database with a memory cap, and a least recently used key eviction policy. For home usage 8M is realistically plenty, don't get too tempted to increase this, you'll almost certainly never see any key evictions from memory with average home network use and a 16M cap. Not that that's necessarily a bad thing.

Feel free to continue this discussion here, or message me privately for any further queries regarding installation, setup, or compilation.",pihole,1647758023.0
7142,comment,2,i1h0ti7,,"Thanks for this. I managed to get it going nicely by looking it up at a few places. So far, so good.

I also love the time you have taken to put things up on GitHub. It was pretty helpful to get things moving along.

I did not have a spare pi, so I booted up an old server and set everything on it. I got around 47 devices, and so far, in just 45 mins, it's already up to 900 queries stored on Redis.",pihole,1647823020.0
7143,comment,0,i1et0np,,"is there a ""simplified"" way to get this set up?",pihole,1647789078.0
7144,comment,2,i1h6mfu,,"No worries. Having to restart the Unbound service or reboot the server, through security updates through unattended-upgrades for instance, and losing my cache was something that really annoyed me. Even though a cold case lookup for a domain will only be a couple of seconds, I still found it annoying. I thought there must be a solution to it, and after pawing around in their extensive documentation it turned out that yes, there was.

It's an interesting option. It's not exactly specification compliant, but the idea of a persistent optimistic cache appeals to me. There will be times where it actually does end up serving a truly stale record, but as its also refreshing that record again in parallel and serving you a result with TTL 0, by the time a client requests the record again it *should* be valid.

On a whole there's very little documentation about the cachedb module, and even less on the respip module for response policy based rule sets that can be more refined than simply block or allow. Response policy is another interesting aspect of Unbound I've been playing about with lately. I have a subset of domains that are always blocked by Unbound. Pi-hole FTL is mostly just handling regex based blocking, and groups. Though groups aren't a function I make use of extensively at all.",pihole,1647825804.0
7145,comment,1,i1rxa1b,,">I also love the time you have taken to put things up on GitHub.

Should this love interest overlap with a general interest in system/network wide distributed long term monitoring and graphing systems, I'm trying to get eyes on [munin-pihole-plugins](https://github.com/saint-lascivious/munin-pihole-plugins), and also hopefully some weird edge case installs for feedback.

It's a project that started from personal use, that kind of developed into an install wrapper for the Munin monitoring environment and a set of reasonably diverse Pi-hole plugins, primarily designed (but not required to) run alongside Pi-hole.

All things going well, it should turn a server from nothing, to a full graphical monitoring environment, in ~10 minutes or less.

The plugins use Pi-hole's API and have no reliance on Pi-hole's long term database or logging.",pihole,1648028774.0
7146,comment,2,i1go604,,"I'm not sure why this has attracted downvotes. Voting behaviour in this sub is weird, band-wagony, and kinda toxic.

To answer your question, no. There's not. If there were I would list such.",pihole,1647817196.0
7147,comment,1,i1ybodk,,"Do you mean [this](https://docs.pi-hole.net/guides/dns/unbound/)?

Edit: Oh, probably you meant the redis setup. Nevermind.",pihole,1648141591.0
7148,post,1,ti6g3l,Pi-hole running with raspberry pi behind VPN,"Hello,

I had a following setup:

Internet <-> NordVPN over Wireguard <-> Raspberry Pi (with Pi-hole) <-> DNS requests from local devices

During setup I selected that  Pi-hole should you eth0 interface.

It used to work fine but for some reason after reconnecting NordVPN once, no DNS requests are being processed on Pi-hole anymore (no new entries in Pi-hole log) until raspberry pi reboot. After a reboot Pi-hole works just fine but stops working every time I activate VPN. 

Any idea what may be an issue? Does this setup even make sense?

Side question: can I change selected pi-hole interface in any way without running ""pihole reconfigure""?",pihole,1647728450.0
7149,post,1,ti66de,Raspberry Pi cant resolve anything after installing PiHole+ PiVPN,"If I try to do anything like ping google I get this error:

ping: [google.com](https://google.com): Temporary failure in name resolution",pihole,1647727667.0
7150,comment,2,i1ghu58,,"reboot?

maybe check /etc/dhcpcd.conf and /etc/resolv.conf for proper configs?",pihole,1647814421.0
7151,comment,1,i1c0xek,,"Please generate a debug log, upload the log when prompted and post the token URL here.",pihole,1647728096.0
7152,comment,1,i1jqqx6,,"Found the problem, since on my router I set my DNS to PiHole,  my raspberry pi could not connect to a DNS since the DNS is itself, I guess?",pihole,1647880495.0
7153,comment,1,i1c2zca,,"Cant! As I said Raspberry Pi itself cant resolve domains. Other devices connected to PiHole can tho.

```

   * The debug log can be uploaded to tricorder.pi-hole.net for sharing with developers only.

[?] Would you like to upload the log? [y/N] y
    * Using curl for transmission.
    * curl failed, contact Pi-hole support for assistance.
    * Error message: curl: (6) Could not resolve host: tricorder.pi-hole.net

[✗]  There was an error uploading your debug log.
   * Please try again or contact the Pi-hole team for assistance.
   * A local copy of the debug log can be found at: /var/log/pihole_debug.log

```",pihole,1647729022.0
7154,comment,1,i1e0pk1,,>A local copy of the debug log can be found at: /var/log/pihole\_debug.log,pihole,1647772509.0
7155,comment,1,i1ejcem,,https://0bin.net/paste/SeZbMEob#kC39f69a4+no-33y/9S7Q/BLuKBgWWFOeyIMcBg4CqU,pihole,1647784616.0
7156,post,1,ti60xw,local dns not being redirected to local address,"I'm trying to set the local DNS record for my.address.io to point to a local IP address, e.g., 192.168.1.30

However, if I'm on the network and i do a
`ping my.addres.io` it's still pointing to the outside address. Any tips?",pihole,1647727232.0
7157,comment,1,i1bzpbk,,Did you wait long enough for the PCs dns cache entry to expire?,pihole,1647727560.0
7158,comment,1,i1c0uka,,"From the client on the network, and using the command prompt or terminal on that client (not via ssh to the Pi-hole host), what is the output of the following:

`nslookup my.address.io`",pihole,1647728061.0
7159,comment,1,i1c3isp,,"ahh that's probably the problem.. i though I cleared the DNS cache, but I guess I didn't and it works if I try another device now",pihole,1647729262.0
7160,comment,1,i1c3kf0,,"all sorted out! I thought i had cleared the DNS cache on my laptop, but I suppose I was wrong. Thanks for your response :)",pihole,1647729281.0
7161,comment,1,i1c7ty8,,dig is more sexy than nslookup ;-0,pihole,1647731236.0
7162,comment,2,i1c8w2q,,"More clients support nslookup, so this is the command we typically request.",pihole,1647731732.0
7163,comment,1,i1cv0t0,,`dnsutils` isn't typically a default metapackage. It's a bit naff asking people to install a dependency just for debug when the same outcome can probably be achieved without it.,pihole,1647742713.0
7164,post,0,ti4ant,watch.spectrum.net is blocked,"Update: Please ignore this post (should I delete?), as I simply quit Safari and restarted it and all was well.   The problem obviously lay elsewhere than pihole.

&#x200B;

>Live TV via [watch.spectrum.net](https://watch.spectrum.net) is blocked, but there's a buttload of servers scroll by in tail pihole log when I access it,  and I don't know which ones to whitelist?  
>  
>  
>  
>PS  All I see is a freeze frame of the live TV, which does update if I refresh, so it's 'seeing' the stream, just not playing it.

&#x200B;",pihole,1647722349.0
7165,comment,1,i1br589,,"I know you solved this, but just so you know PiHole relies upon lists of domains that other people maintain to determine what to block. If you find a domain that is being blocked that you think shouldn’t be, you can whitelist it on your PiHole instance and you should figure out what list the domain is in and let that maintainer know to remove it. There’s Query Lists function in PiHole that will tell you what list(s) a domain exists in.",pihole,1647723813.0
7166,post,1,ti2dmi,Redundant Pi-Hole,"Hi all!  
Thanks for your previous suggestions on my post (PiHole + NAS). 

Now, I have an RPi Zero W, that I would like to run as a Redundancy for my PiHole, and it will also run a CUPS server for another printer. How would I go ahead and run both?

&#x200B;

TIA!",pihole,1647716964.0
7167,comment,3,i1bfd7u,,"If you're going to run multiple pi-holes, there's a nice utility called [gravity-sync](https://github.com/vmstan/gravity-sync) that you can use to ensure your pi-holes' settings, blocklists etc are in sync.

In terms of running CUPS on the zero W, it should be fine.  CUPS uses port 631 IIRC which isn't used by pi-hole, so they should co-exist happily.",pihole,1647718701.0
7168,comment,2,i1doost,,"Whatever you do, use a wired connection. Always more reliable and lower latency. No server should be on WiFi.",pihole,1647762165.0
7169,comment,2,i1bcopr,,"Off the top of my head the easiest way would be to point your router DNS to both Pis.

That way if the primary Pi and Pihole go down, the router falls back to the second Pi and Pihole instance.

You can generally do this with client device settings as well but it's annoying.",pihole,1647717519.0
7170,comment,1,i1ntqz7,,">If you're going to run multiple pi-holes, there's a nice utility called gravity-sync that you can use to ensure your pi-holes' settings, blocklists etc are in sync.

thanks! I never heard about gravity-sync! time to explore with it :-)",pihole,1647957504.0
7171,comment,1,i1ntmgh,,"I agree with you, but, this is what I currently have. That's why the main PiHole is running on the RPI4, and the redundant will run on WiFi, just for the small downtime, at least home users would be able to connect.",pihole,1647957448.0
7172,comment,6,i1be6mr,,">That way if the primary Pi and Pihole go down, the router falls back to the second Pi and Pihole instance.

This is typically not how it works.  With two Pi-holes in parallel, clients are free to use either of them at any time (without a strict order).  The load split between the two Pi-holes varies by client.

If either Pi-hole goes down, the remaining Pi-hole will seamlessly pick up the load.",pihole,1647718177.0
7173,comment,1,i1ntvzp,,"my DHCP is running by my main PiHole, I guess I could have the second DNS Address set on the redundant PiHole, right?",pihole,1647957566.0
7174,comment,1,i1nu07k,,"thanks for the explanation, u/jfb-pihole!",pihole,1647957617.0
7175,comment,1,i1nxls7,,"With your networks DHCP server running on the one Pi you'll need to consider redundancy for that as well, which isn't as easy as a redundant DNS server. Devices that already have an IP should connect ok but you won't get any new devices onto the network without a DHCP server online or manually assigning an IP. While I prefer running the Pi as the DHCP server as well, in this case it may be easier to let your router handle that, if you expect a significant amount of downtime from your primary Pi anyway.

In terms of DNS you can set the IPs of both Pis on your router and the router will forward DNS queries to both. When one goes down the other takes all queries.",pihole,1647959165.0
7176,comment,1,i1oa82y,,You can have each Pi-hole provide DHCP on non-overlapping ranges.,pihole,1647964259.0
7177,post,466,ti16rr,Meet my newly installed Pi-Hole! ❤,,pihole,1647713636.0
7178,comment,35,i1b696k,,"Oh, a new member. Welcome to the club!",pihole,1647714776.0
7179,comment,44,i1bev3q,,"Where are people getting their Raspberry Pis? They are sold out fkn everywhere in the US. Adafruit website is sold out. Amazon is trying to charge $50 for a Raspberry Pi Zero 2 (which is $15 on Adafruit website). 

Sorry to rant, it pisses me off when things are absurdly expensive for no good reason. Can’t even find second hand on eBay for less than $45.",pihole,1647718476.0
7180,comment,5,i1bcbnj,,"Nice!
Have fun!",pihole,1647717358.0
7181,comment,8,i1b3vg8,,"Nice, how did you overcome the single DNS server limit on the Fritzbox DHCP leases? Or are you doing DHCP and DNS on the pihole?",pihole,1647713772.0
7182,comment,2,i1bcy6w,,Welcome to the club!,pihole,1647717633.0
7183,comment,2,i1f15u9,,Pi-Hole runs just fine on Hyper-V Ubuntu /1,pihole,1647792511.0
7184,comment,2,i1dk453,,"The fritzbox supports dns over tls so you could use NextDNS as your upstream server and block ads that way, no real need for pihole and you have built in redundancy",pihole,1647758308.0
7185,comment,2,i1e08ib,,"Hi guys, if someone like me doesn't have a raspberry or an old pc i want you to know that it's possible to install pi hole on a android smartphone. I tried it with an old smartphone and it's working :D

The battery works like a UPS",pihole,1647772113.0
7186,comment,1,i1dijx9,,I think this is missing a pi-hole sticker...,pihole,1647757060.0
7187,comment,1,i1dqq9h,,"You can probably power the Pi of the USB on the fritzbox.
That worked great for my Pi 3 that I used as a PiHole.",pihole,1647763923.0
7188,comment,1,i1dx3un,,Ah Guten Tag,pihole,1647769470.0
7189,comment,1,i1fcpwf,,Fancy!,pihole,1647797071.0
7190,comment,-15,i1bd850,,"Yay well done, you also know how to plug a pi into a wall socket.  Well done.",pihole,1647717755.0
7191,comment,0,i1cjp9h,,Nice case!,pihole,1647736966.0
7192,comment,46,i1bg3fc,,"Just use a secondhand Dell Wyse 3040: https://www.ebay.com/sch/i.html?_nkw=dell+wyse+3040&_sacat=0

These are x86, consume maybe 5W, and are about as powerful as a Raspberry Pi 4 in terms of compute. You will lose the GPIO, but you wouldn't have needed that for using pihole.",pihole,1647719019.0
7193,comment,4,i1bg14u,,$140 in Canada for 8gb one,pihole,1647718992.0
7194,comment,4,i1di04g,,"I had this one lying around. I bought it as the PI 4 came out and my retailer of trust had a promotion on the 2Gb version for like 20 bucks. I bought 4Gb shortly later when it was in stock.
I did not even have had a project in mind at this time, but u always wanna have a pi or two laying around for spontaneous projects.
I still have some Pi 2s and even my first PI 1 model a and another B+ (which was the shit back then)
For most tasks, you dont need 4 Cores and 8Gb RAM",pihole,1647756630.0
7195,comment,3,i1c6o2l,,I had in stock notifications set up on adafruit and  it took about a month for them to come back in stock. I did have to settle for a 2gb raspberry pi 4 instead of 8gb though.,pihole,1647730690.0
7196,comment,2,i1ci93y,,They’re expensive because they can’t be found/are sold out everywhere 🥲,pihole,1647736247.0
7197,comment,2,i4uhmta,,"I check my local Mirco Center website daily and then reserve one and go pick it up.  The last one I bought was a Pi Zero W2 for $19.99, you can buy one at that price and each additional one bought went up in price with a limit of 5.",pihole,1650038901.0
7198,comment,1,i1ewxrx,,Personally not using a pi but docker. You can use docker or a VM as well. So using existing hardware gets the job done.,pihole,1647790744.0
7199,comment,1,i1fi9c8,,"I wouldn’t say for no reason. There’s a really good reason, it just sucks. The very short version is high demand, low supply of chips. That equals higher than normal prices.",pihole,1647799309.0
7200,comment,0,i1cs5ol,,The local store gets shipments twice a week and you can call them and ask if they got any. There is only a trickle of supply but they are still being produced.,pihole,1647741245.0
7201,comment,0,i1du7ap,,"My Pi-Hole is setup in a Docker container on my Unraid server, works great.",pihole,1647766970.0
7202,comment,9,i1b4j2d,,"Why would you need multiple DNS servers? The fritz box allows you to set 1 IPv4 DNs server and 1 IPv6 DNS server.

You only need to set the IPv4 DNS server to the piholes address and the IPv6 to the piholes address

The only reason for more DNS servers would be if you have 2 piholes, but in the above image, only one is shown",pihole,1647714050.0
7203,comment,2,i1dhkq6,,"I am using the pihole as my only DNS in the network. I have thought about a redundancy too, maybe a second pihole. For now, I am gonna go with his setup and see how often I will run into problems. If needed, I can still add another. 
What I have found to help with uptime on a PI (on any machine really) are periodic reboots. This pi will restart every night at 4:05 am. Yes, I will not be able to resolve DNS queries for a minute at 4am, but as said above, I will tackle this if needed.",pihole,1647756302.0
7204,comment,2,i1ebi5h,,"Set the Fritz!Box as DNS server for your DHCP range and use the Pi-Hole(s) as DNS for your Fritz!Box.

Or use a load balancer such as haproxy to make both Pi-Holes reachable over a single IP which also is the prettier solution for multiple hosts imo.",pihole,1647780342.0
7205,comment,1,i1dxbqt,,You can easily enter two DNS servers in the FRITZBox.,pihole,1647769653.0
7206,comment,-1,i1bfiy7,,you can actually keep the fritzbox as dns server and use two piholes as upstream dns servers. it allows this setup.,pihole,1647718771.0
7207,comment,1,i1ff57r,,Any tutorials for that?,pihole,1647798052.0
7208,comment,1,i1dqype,,"Funny, yea I might try that out.
I like to supply my Pis with a healty wattage tho, as I have found that the hardware problems and system failures scale with power availablility.",pihole,1647764133.0
7209,comment,1,i1dihdt,,"Thanks! I love this case and was on the lookout for quite some time. I wanted one that was transparent but still looking modern, and this one was perfect!
It is easy to break when assembling tho, but I usually but my pis in and basically never take them out again. I just store them in their cases.
One thing to say two is that it gets pretty warm in there. The pi hole has a core temp of 55°C, so all fine, but for heavier loads I would go with a more open or better conducting case",pihole,1647757006.0
7210,comment,36,i1bnwm0,,"This why I fkn love Reddit! Thank you, kind internet stranger. May your latency be low, and all your ads blocked",pihole,1647722426.0
7211,comment,4,i1cftql,,New here and have been waiting on a Raspberry pi. What is GPIO and does the Wyse work the same as a Raspberry pi?  Can I follow the same directions on how to load pihole?,pihole,1647735059.0
7212,comment,2,i1dfbh7,,"You're correct, thats why I starting looking for other alternatives, like orangepi, or nanopi. They're also great and much cheaper than rpi. More than enough to onboard the pihole/adguardhome.",pihole,1647754616.0
7213,comment,1,i4v0jug,,I've been doing it off and on but the one closest to me (45 min drive without traffic) never has one. I'll start doing it more often. Thanks for the heads up!,pihole,1650046519.0
7214,comment,1,i4vdsdi,,"I pick up as many as I can and sell them with a slight markup, to break even not profit, to offset the gas (16 mpg) and tolls I spent to pick them up.",pihole,1650052093.0
7215,comment,1,i1fl5l9,,"Same here, multiple docker hosts managed by portainer, soon trying to figure out redundancy just for fun",pihole,1647800499.0
7216,comment,1,i20x8td,,same here. tried to buy rasberry pi nowhere to be found scalper raised price 10x whatever available. So running pi-hole in VM.,pihole,1648181355.0
7217,comment,2,i1b52mr,,"For if\when the pihole is down, e.g. patching\rebooting or failure. As if the pihole is down then nothing on your network will be able to resolve any addresses. Most DHCP servers allow you to specify 2 or more DNS servers for this reason allowing addresses to be resolved from secondary or even tertiary DNS servers in the event the primary is down.",pihole,1647714277.0
7218,comment,2,i1dxtus,,Yes for the upstream DNS the Fritzbox uses but not what is handed out by the DHCP server.,pihole,1647770077.0
7219,comment,1,i1bgbc6,,"True, but this cripples one of the key features of the pihole which is identifying which host is looking at what and being able to restrict certain content (e.g. for children)",pihole,1647719116.0
7220,comment,1,i1ggmns,,https://en.avm.de/service/knowledge-base/dok/FRITZ-Box-7590/165_Configuring-different-DNS-servers-in-the-FRITZ-Box/,pihole,1647813902.0
7221,comment,1,i1emwfn,,"Aha... That's what I was wondering... 55C isn't bad at all for a Pi4 with no active cooling.... I have 2 Pi 4 running 24/7 and they both got a heatsink fan blasting all day...

In fact I really love the front of your case, it looks like a retro hard drive... (if you got what I meant... 😂)",pihole,1647786322.0
7222,comment,6,i1dakfe,,"Glad I could help, friend! May yours be as well.",pihole,1647751401.0
7223,comment,6,i1dbqbo,,"1.) GPIO = General Purpose Input Output. Basically these are the row of pins that you see on the Raspberry Pi PCB, and can be used for what* its name says. Here's some more info about it: https://en.wikipedia.org/wiki/Raspberry_Pi#General_purpose_input-output_(GPIO)_connector

2.) I installed Ubuntu Server 20.04.4 LTS on a couple Wyse 3040 units (I reset the bios, enabled USB boot, disabled secure boot, and boot from a GPT USB I made using Rufus). The installation worked pretty seamlessly. These units don't have removable/expandable storage, so you can maybe play around with the swap space to reduce writes to the eMMC (mine was 8GB). I did read some individuals facing issues with the EFI location, but I didn't have any problems: https://blog.roberthallam.org/2020/05/psa-dell-wyse-3040-uses-fallback-efi-location/

    root@wyse3040-jt9k1p2:~# sudo neofetch
                .-/+oossssoo+/-.               root@wyse3040-jt9k1p2 
            `:+ssssssssssssssssss+:`           --------------------- 
          -+ssssssssssssssssssyyssss+-         OS: Ubuntu 20.04.4 LTS x86_64 
        .ossssssssssssssssssdMMMNysssso.       Host: Wyse 3040 Thin Client 
       /ssssssssssshdmmNNmmyNMMMMhssssss/      Kernel: 5.4.0-104-generic 
      +ssssssssshmydMMMMMMMNddddyssssssss+     Uptime: 7 mins 
     /sssssssshNMMMyhhyyyyhmNMMMNhssssssss/    Packages: 635 (dpkg), 4 (snap) 
    .ssssssssdMMMNhsssssssssshNMMMdssssssss.   Shell: bash 5.0.17 
    +sssshhhyNMMNyssssssssssssyNMMMysssssss+   CPU: Intel Atom x5-Z8350 (4) @ 1.920GHz 
    ossyNMMMNyMMhsssssssssssssshmmmhssssssso   GPU: Intel Atom/Celeron/Pentium Processor x5-E8000/J3xxx/N3xxx 
    ossyNMMMNyMMhsssssssssssssshmmmhssssssso   Memory: 172MiB / 1895MiB 
    +sssshhhyNMMNyssssssssssssyNMMMysssssss+
    .ssssssssdMMMNhsssssssssshNMMMdssssssss.                           
     /sssssssshNMMMyhhyyyyhdNMMMNhssssssss/                            
      +sssssssssdmydMMMMMMMMddddyssssssss+
       /ssssssssssshdmNNNNmyNMMMMhssssss/
        .ossssssssssssssssssdMMMNysssso.
          -+sssssssssssssssssyyyssss+-
            `:+ssssssssssssssssss+:`
                .-/+oossssoo+/-.
    
3.) From there, you can install pihole by running the installation command via SSH (or a kb/mouse/monitor, lol): 

    curl -sSL https://install.pi-hole.net | bash

This part, and onward, is essentially the same as a Raspberry Pi, and behaves similarly for the web interface. I hope that helps! 

edit~ I'm able to run this system headlessly, no problem. I know I read a few comments by some posters that stipulated they had issues.",pihole,1647752151.0
7224,comment,1,i1e1tkv,,"I am running the original Orange Pi Zero for 5 years now with Pihole. Couldn't be happier. [Board plus slick case](https://www.monitoop.com/image/cache/catalog/product/75a22780-b09e-4c4f-aa20-7270ec4ba9e2-500x500.jpg) was around USD 25 in total at the time.

      ___  ____  _   _____              
     / _ \|  _ \(_) |__  /___ _ __ ___  
    | | | | |_) | |   / // _ \ '__/ _ \ 
    | |_| |  __/| |  / /|  __/ | | (_) |
     \___/|_|   |_| /____\___|_|  \___/ 
                                        
    Welcome to Armbian 22.02.1 Focal with Linux 5.15.25-sunxi
    
    System load:   8%               Up time:       7 days 16:33
    Memory usage:  21% of 491M      Zram usage:    4% of 245M       IP:            192.168.88.9
    CPU temp:      53°C             Usage of /:    17% of 15G    

As you can see, even the 512 MB with 16 GB SDcard is overkill for running the Pihole.",pihole,1647773439.0
7225,comment,2,i1fmo00,,Well docker and redundancy you shut take a look at kubernetes,pihole,1647801131.0
7226,comment,13,i1b5ur5,,">Most DHCP servers allow you to specify 2 or more DNS servers for this reason allowing addresses to be resolved from secondary or even tertiary DNS servers in the event the primary is down.

It doesn't typically work that way.  When a client has multiple DNS servers available, it is free to use any of them at any time.  Providing DNS servers other than Pi-hole typically leads to DNS bypasses around Pi-hole.",pihole,1647714606.0
7227,comment,3,i1b5zl9,,If you only have one PiHole you’d only want one DNS entry anyways,pihole,1647714663.0
7228,comment,1,i1dxwi2,,And thats a problem?,pihole,1647770138.0
7229,comment,1,i1buvz0,,"I'm 99% sure fritzbox allows conditional forwarding, but I use Pihole as DHCP so I never checked myself.",pihole,1647725452.0
7230,comment,2,i1p7oxk,,"Great, thank you! That's actually really helpful since I was too lazy to set up my pi hole again. This seems way easier",pihole,1647977129.0
7231,comment,1,i1e3xxx,,Thank you!!  I may give this a try,pihole,1647775170.0
7232,comment,2,i1fo7w1,,Will take a look. Thank you!,pihole,1647801780.0
7233,comment,1,i1b60w6,,True but multiple piholes for that...,pihole,1647714679.0
7234,comment,1,i1fa3cr,,"That's not correct for Microsoft. Windows queries DNS with ranking based on the order of DNS entries associated with the highest ranking interface. From their documentation:

&#x200B;

>The DNS Client service queries the DNS servers in the following order:  
The DNS Client service sends the name query to the first DNS server on the preferred adapter’s list of DNS servers and waits one second for a response.  
If the DNS Client service does not receive a response from the first DNS server within one second, it sends the name query to the first DNS servers on all adapters that are still under consideration and waits two seconds for a response.  
If the DNS Client service does not receive a response from any DNS server within two seconds, the DNS Client service sends the query to all DNS servers on all adapters that are still under consideration and waits another two seconds for a response.  
If the DNS Client service still does not receive a response from any DNS server, it sends the name query to all DNS servers on all adapters that are still under consideration and waits four seconds for a response.  
If it the DNS Client service does not receive a response from any DNS server, the DNS client sends the query to all DNS servers on all adapters that are still under consideration and waits eight seconds for a response.

  
It's changed a little bit since the article was written, specifically with Windows 10 and 11, where now it decides the preferred adapter based on the interface metric, but generally speaking, the above order of operations is enforced.",pihole,1647796022.0
7235,comment,1,i1b8ktg,,"Not necessarily. Some devices (such as Android and Samsung TVs) can self-fill the second DNS entry to use their DNS if you leave it empty. It's recommended to push two DNS IPs via DHCP even if you only have one Pi-hole, just by using the same IP twice.",pihole,1647715761.0
7236,comment,1,i1dxzx8,,Resilience for when the pihole is down so the network will still work.,pihole,1647770222.0
7237,comment,1,i1ea3wx,,"It does. I also don't bother, pihole is my dns and DHCP server, with unbound, and it hasn't skipped a beat for about 6 months.",pihole,1647779485.0
7238,comment,1,i1pba6t,,"You are welcome. Yes NextDNS is a much better option than Pihole in almost all cases. At my personal house I have a custom pc-router with Opnsense + Adguard Home (because it can be installed on the router) but I use NextDNS on mobile so I don't have to keep a vpn connection open to my home. For friends and family I use NextDNS because it can be installed on Fritzboxes (via DoT) and Ubiquiti routers (via NexDNS-CLI). PiHole's main issue is that it can't be installed on a router so always needs a separate device running all the time, this is a huge problem for non network savvy installations like friends and family. Updates are slow and problematic also.",pihole,1647978520.0
7239,comment,-1,i1cz9ql,,Incorrect. You need a redirect rule for port 53 on your firewall to point to pihole’s IP.,pihole,1647744922.0
7240,comment,1,i1e07np,,yeah that's why you put both pis in the upstream DNS server. I do not see here how the Fritzbox can only use a single DNS server when the Fritzbox supports two as you already said yourself,pihole,1647772092.0
7241,comment,2,i1dcmo9,,"Nothing incorrect about my answer.  
  
If you have a firewall that lets you do that, of course. I do that on my pfSense (along with blocking outbound DoH and DoT), those folks still running with consumer routers provided from their ISP won't be able to, hence running single Pi-hole IP twice can help.  
  
If you're thinking hard-coded app based DNS, that's another matter entirely.",pihole,1647752733.0
7242,post,2,ti0wgi,Hours wasted because of a typo,"I go this brilliant idea to re-ip my home network and move from [192.168.1.0/24](https://192.168.1.0/24) to [172.25.100.0/24](https://172.25.100.0/24). I did this because I have a work issued Verizon MiFi that uses A [192.168.1.0/24](https://192.168.1.0/24) network, and when I VPNed back to my house, I could not access any of my home resources.

The MiFi is locked down with a password, so I change any settings on it.

I changed the IP  of the router to 172.25.\`100.1, and rebooted it. I then reconfigured my pi-hole to be [172.25.100.2](https://172.25.100.2), changed my DHCP range and gateway and rebooted it (I'm using pi-hole DHCP). Then I rebooted devices. They would all get a good IP address and a good IP gateway, but could not connect to anything. So, just for yucks I turned off DHCP on the pi-hole and turned on DHCP on the router. The stuff started to work.  So, I immediately got to configuring static leases on the router. I was working from home and needed it all working by 1:00 PM so we could both VPN back into work.

By 1:00PM we could work, but the pi-hole was out of the equation. Which was really frustrating.  After work, I try switching it all back, and as soon as I turn of DHCP on the router, it stops routing.

I'm doing traceroutes and ping and dig tests and they're all failing. 

So at this point, your brain is fried and you don't think to check the obvious stuff.

Finally I checked my /etc/dhcpcd.conf file and there I found my problem:

`static routers=`[`172.25.100,1`](https://172.25.100.1)

Put a damn comma into the default route.

Sigh...",pihole,1647712850.0
7243,comment,5,i1b49i0,,This is the story of everything I’ve ever done that even remotely involves code.,pihole,1647713937.0
7244,comment,4,i1b7k4l,,Maybe I can borrow that title for my autobiography.,pihole,1647715326.0
7245,comment,3,i1cdp52,,"Back in my university days, me and a buddy had a coding assignment in C. We worked on our parts from each other separately for a week, and then the day before started merging the code. Code compiled, but would segfault when it got to one line. We troubleshot that one line of code for 8 hours straight, pulled an all nighter. Finally around 8:00 am we figured it out, and it was a camel-case variable name that should have been all lowercase.",pihole,1647734021.0
7246,comment,1,i1b5bdl,,"After I got it all working, I was pulling my hair out because met PiVPN would not connect.  Turns out my port forwarding rules were port forwarding to [172.25.100.13](https://172.25.100.13), but the static lease set up on my pi-hole was [172.25.100.113](https://172.25.100.113).

So another 30-45 min lost because of another typo.

Sigh...",pihole,1647714377.0
7247,comment,1,i1d0hau,,"I hate when shit like that happens.

It's so much better when someone else reviews your work. They can find errors you overlook.",pihole,1647745576.0
7248,comment,1,i1clsxh,,A VPN is actually something missing some my setup. Is there one you’d recommend? One I could add to a Docker setup would be super. I’ve heard of Tailscale but don’t know much about it.,pihole,1647738017.0
7249,comment,1,i1d0by8,,"I set up PiVPN with Wiregard.

[https://www.pivpn.io](https://www.pivpn.io)

I set up my phone to VPN into my house any time it's not on my home WiFi.

If you're looking for a paid VPN service, I use Mullvad VPN. Haven't has any issues with it.",pihole,1647745494.0
7250,post,1,ti0im1,"New to Debian/Linux and am wondering if this step in the Unbound instructions is as simple as adding a file named 99-edns.conf, with nothing more than the line shown? Unsure if there needs to be any additional info on the .conf to work or just that simple line.",,pihole,1647711784.0
7251,comment,1,i1begrx,,"That line is all that is needed.  After you put the file in place, restart FTL so it reads the new configuration file.  Either of these two commands from the terminal will do it (and you can also restart FTL from the web admin GUI settings page):

`pihole restartdns`

`sudo service pihole-FTL restart`",pihole,1647718299.0
7252,comment,2,i1bwxze,,"Done. 
Thanks for your help!",pihole,1647726341.0
7253,post,0,ti06e1,Google services issues with pi-hole,"Having extreme slowness with things like youtube, and gmail while using pi-hole.

when Express VPN is on, they work fine. I know that this bypasses pi-hole.

Started having this issue last night. updated all the pi-hole software this morning, but the issue still persists.

the rest of the internet is fine. Just google stuff.

any ideas?",pihole,1647710864.0
7254,comment,3,i1beuqj,,"What DNS are you using in PiHole?
If you are using Google (8.8.8.8), have you tried Cloudflare (1.1.1.1)?",pihole,1647718472.0
7255,comment,1,i1b8na7,,"Interesting, are you using Google Chrome? I saw something about Google making their own protocol or something, probably unrelated but it's always worth trying firefox or something and seeing if it's just chrome.    
    
I haven't noticed any problems with mine.     
    
Also you could check the query log to see if some address has a really long response time (though it should cache it after he first time.)",pihole,1647715790.0
7256,comment,-1,i1f5dsk,,Unbound FTW every time.,pihole,1647794238.0
7257,comment,2,i1c6pto,,"switching to cloudfare seems to have resolved it.

Also the internet in general seems a little quicker

Thanks!",pihole,1647730713.0
7258,comment,1,i1bxg96,,"I use Brave, but i also had the same issues with firefox.",pihole,1647726556.0
7259,post,2,thyjrj,"Pfsense, docker & pi-hole with unbound.",I’m looking to use pfsense with pihole also with unbound dns. Now I’ve found some guides but all of them appear to have pihole as a separate machine/vm on a dmz. I was hoping to run this in a docker on the same network as the firewall. Is this possible?,pihole,1647706404.0
7260,comment,2,i1dibfy,,"Not exactly what you are asking for, but I run OPNsense + Unbound DNS + AdGuardHome (via the community repo for OPNSense). So, Client > port 53 > LAN port on OPNsense firewall > AGH > port 5335 > Unbound DNS > WAN port on OPNsense Firewall.

I'm able to run this whole setup on a *single* bare metal on an HP T620 + Intel i340-t4.",pihole,1647756878.0
7261,comment,1,i1ammxg,,"I'm personally running PF sense as my main firewall, virtualized on a VMware machine. I also have pihole virtualized in Linux on the same hardware. I can't speak for unbound.",pihole,1647706504.0
7262,comment,1,i1m1124,,"Run pfSense router software on bare metal, and don't run anything else on it, no hypervisor, no vm's, no dockers, no lxc, nothing.  Keep it clean.  That way, when you have unexplainable problems, it is MUCH EASIER to troubleshoot.

Build a separate pc for other services.  You can run a hypervisor like proxmox, or just straight linux with docker apps, or just straight linux apps on linux.  The last option needs the least resources, and usually the least configuration too.  Easier to break things though, so be careful.

For example, I have one mini-pc running VyOS router software on bare metal, which connects my entire home network to a vpn tunnel ONLY (no routes to Internet), so when the vpn tunnel goes down, all traffic stops.  No leaks.  No worries.

I have a second mini-pc running debian linux with various services like pihole installed.  I used to run things like proxmox and docker, but found those to be too wasteful of resources, and not really necessary.",pihole,1647914884.0
7263,comment,1,i1m2exf,,This is a good solution too.  I used to do this.,pihole,1647915535.0
7264,comment,1,i1c7eus,,"what's your specs on the VMware machine?

I'm still  torn between multiple hardware vs 1 main machine for everything (CCTV, pfsense, pihole, etc)",pihole,1647731038.0
7265,comment,1,i1mrq1s,,I’ve recently moved from vm to bare metal for this exact reason. Have you configured your pfsense to point to pihole? Also are you running pihole as unbound?,pihole,1647931019.0
7266,comment,2,i1nmyam,,"I have since upgraded from pfSense to VyOS.  pfSense and OPNsense are based on BSD, which doesn't perform well on multi-core pc's.  Lots of performance issues.

I switched to VyOS, which is based on Debian linux, which plays very well on multi-core pc's.  My router now cranks out encrypted vpn traffic at more than twice the pfSense speed, using half the cpu.  pfSense would drop up to 30% of packets in a speedtest, VyOS drops nothing.  Huge performance boost.

I do have pihole as my only dns server (VyOS router gets dns from pihole only), and pihole gets dns from my vpn provider's \*internal\* dns server (only accessible over vpn) so no leaks ever.

I have not installed unbound on pihole, don't really need it for home use.  The defaults are fine.",pihole,1647954321.0
7267,comment,2,i1nv0i9,,Not heard of VyOS. But will take a look at it anyway. Thanks for explaining your setup though 🙂,pihole,1647958054.0
7268,post,0,thygvw,Do I need to firewall my pi-hole if it's behind a router NAT?,"RPI4B running Debian Bullseye with Unbound as recursive resolver.

Never had problems configuring a firewall with UFW or IPTables but since NFtables is now the default for Debian going forward, I thought I'd take a stab at learning the syntax and configure a basic ruleset. 3 weeks later and I'm just as baffled.... Still unable to get all pihole services working correctly when I enable NFT. I'm probably just going to purge and replace it with IPT/UFW but it got me wondering: Is it really necessary to firewall a pi when it's behind a router NAT?",pihole,1647706194.0
7269,comment,3,i1amz74,,"No, the Pi-hole is isolated behind the NAT of the router. Without specific port forwarding, it will only be accessible by your local clients.",pihole,1647706647.0
7270,comment,1,i1aw9xm,,"That's great, thanks for the succinct response!",pihole,1647710578.0
7271,comment,1,i1bemse,,"Having said that, it's easy enough to setup UFW with:

All allowed outbound 

Port 53 allowed inbound",pihole,1647718375.0
7272,comment,1,i1ehy6a,,"No problem. Another thing I just remembered is that in the default configuration, Pi-hole will only respond to queries from the same subnet on which it resides. So that's another layer of security.",pihole,1647783912.0
7273,post,0,thwo2n,Proxies Galore,"Curious if anyone knows of a good github or other location to pick up a comprehensive list of proxy servers?

I am very thankful for contributers that maintain other approval/deny lists. 

https://spys.one/en/free-proxy-list/
https://www.proxynova.com/proxy-server-list/
https://www.freeproxylists.net/
https://geonode.com/free-proxy-list/
https://vpnoverview.com/privacy/anonymous-browsing/free-proxy-servers/
https://fossbytes.com/free-proxy-list/
https://hidemy.name/en/proxy-list/
https://www.javatpoint.com/proxy-server-list",pihole,1647701092.0
7274,comment,1,i1ab97z,,How is this related to Pi-hole?,pihole,1647701654.0
7275,comment,0,i1ay5ph,,As a feed into pihole for domain blocking.,pihole,1647711379.0
7276,comment,2,i1b5zn0,,What is an example of how you are intending to use this?  What are you feeding into Pi-hole and how?,pihole,1647714664.0
7277,comment,1,i1b68ij,,I was asking if anyone had a feed of proxy servers like those listed to feed into a ban list.,pihole,1647714768.0
7278,comment,2,i1b7aro,,"All the lists you posted contain IP's of proxy servers.  Pi-hole blocks on domain names, not IP's.  If a client has the IP of a proxy server, it won't require any domain name resolution and there will be no query to a DNS server.

To block IP's, you need a firewall, not Pi-hole.",pihole,1647715215.0
7279,comment,1,i1b7mn6,,Understood.  I know that ip blocking has to happen at the fw level.,pihole,1647715356.0
7280,comment,2,i1bc4h5,,So this is not something you are planning to do with Pi-hole?,pihole,1647717271.0
7281,comment,1,i1be8ja,,"For those public proxies with dns entries, block them. For those that are ip, work on blockes in the FW instead.",pihole,1647718200.0
7282,post,0,thwe7t,How to block all STUN traffic?,"I found that an application running on my computer is sending a TON of traffic all with at stun.domain.xxx. The domains are all different but all have “stun” as a subdomain. I’ve disabled the app right now and tried to block these domains individually in my Pi but I’d like to block this as a whole. 

Is there a way to block all traffic that fits this domain format? I’m guessing it’s something with regex, but I don’t know what that would be. Thank you.",pihole,1647700255.0
7283,comment,1,i1a99k6,,"You don't need to block the domains, you need to deal with whatever the origin of the traffic is.

What is the ""application""???",pihole,1647700737.0
7284,comment,1,i1aawmk,,"Why do you want to block these domains?  Do you believe they are leading to ads of harmful content?

Are they being resolved by Pi-hole to IP's?",pihole,1647701493.0
7285,comment,1,i1ak7an,,SIP telephony?,pihole,1647705508.0
7286,comment,-1,i1ayaua,,"Quite sure a regex could block it, but that would not solve the root cause, and I dont know how to regex either.",pihole,1647711439.0
7287,comment,1,i1ap2uo,,"It’s dDNS Updater for macOS. It’s never done this before and I just realized it today. Had the app for years and this is the first time I’ve seen this activity. When I shut the app down, the requests stopped. I was able to use Little Snitch to sniff out what was happening.",pihole,1647707518.0
7288,comment,1,i1aox9a,,They’re all being answered by my pi-hole but they’re domains with VoIP and and other spammy domains. The app in question is a simple dynamic-DNS app to keep my registrar info updated when my IP changes.,pihole,1647707453.0
7289,comment,2,i1ar914,,"I would look into installing a dynamic dns updater tool on whatever platform you're running Pi-hole on and get rid of the Mac client. From a housekeeping perspective, those kinds of tools belong on the network infrastructure belong on the ""network"" side of things, not on your client machines.

I run an updater on my pfSense firewall, for example.",pihole,1647708431.0
7290,comment,1,i1as7if,,"Sounds like you’ve got a spammy DDNS update client there, or they’re intentionally using STUN as a means to determine your public IP",pihole,1647708840.0
7291,comment,1,i1avx0f,,"Yeah. I reached out to the dev and got this reply. It seems like it’s being done on purpose. 😡

>	The dDNS Broker app, and now our new dDNS Broker SE app, use the STUN protocol to discover, or more specifically to query, your systems public IPv4 address. This is exactly how these apps detect your IPv4 address changes.  This is one of the unique features of these apps.

The part that gets me is the volume of traffic combined with the various domains it’s pinging. Like, why not keep it to a couple of domains and also limit the requests to something reasonable? For now, I’ve completely disabled the app but I will have to look for a long-term solution. I may be naïve but I don’t think it needs to be implemented this way in order to fulfill its purpose.",pihole,1647710422.0
7292,comment,1,i1ayxnq,,"I’m no dev, but I’m pretty sure they could figure out your public IP by having the client do a simple curl to a URL of theirs. A lot of routers have a built in DDNS client, so maybe see if yours does and ditch desktop apps entirely?",pihole,1647711703.0
7293,post,3,thsf6k,Is necessary to update the unbound anchor periodically?,"I think i read at least 1 or 2 times a year, or is a wrong information?

    unbound-anchor

Is the right command?",pihole,1647685739.0
7294,comment,2,i19ybvo,,">	Is necessary to update the unbound anchor periodically?

No.

>	I think i read at least 1 or 2 times a year

That is for the root hints file if you installed it manually. You can go years without updating that file and unbound will continue to work. The file contents rarely change, and changes are typically to one or two of the 26 IP's in the file.",pihole,1647695164.0
7295,comment,0,i19r2u4,,"If you are installing unbound from a package manager, it should install the root.hints file automatically with the dependency dns-root-data. The root hints will then be automatically updated by your package manager.

Optional: Download the current root hints file (the list of primary root servers which are serving the domain ""."" - the root domain). Update it roughly every six months. Note that this file changes infrequently. This is only necessary if you are not installing unbound from a package manager. If you do this optional step, you will need to uncomment the root-hints: configuration line in the suggested config file.


[https://docs.pi-hole.net/guides/dns/unbound/](https://docs.pi-hole.net/guides/dns/unbound/)",pihole,1647690502.0
7296,comment,1,i19s82a,,I used the script for DietPi.,pihole,1647691325.0
7297,comment,0,i19yebu,,">	If you are installing unbound from a package manager, it should install the root.hints file automatically with the dependency dns-root-data

The anchor (root key) is not the same as the root hints file.",pihole,1647695203.0
7298,comment,1,i19sqdi,,"For DietPi, it’s already been done for you automatically as the script also sets up a monthly cron job to update the roots hint file.",pihole,1647691676.0
7299,comment,1,i19vdtk,,Thanks. Don't knew this.,pihole,1647693430.0
7300,post,2,thsbza,Is this configuration correct and how can I improve it?,"I am using a Raspberry Pi 3 with a 16GB card at the moment, although if all this works as it should I will probably expand the SD card.

On this Raspberry I have the following repository installed via Docker: [https://github.com/willy-wagtail/raspberrypi](https://github.com/willy-wagtail/raspberrypi). This repository includes Pi-hole and Unbound in the same file and is very easy to configure.

With this I have both services working without any problem and in fact, I have been using it daily for more than a month. I attach a screenshot of the DNS configuration section in case there is something wrong:

&#x200B;

[DNS Server configuration](https://preview.redd.it/wcbm0905fbo81.png?width=1948&format=png&auto=webp&s=497600bdbfabf6a1effc4036d4b4d0ad7b669ab7)

Also, in my company's router configuration it is possible to modify the two DNS servers of the provider. I have set the IP address of the Raspberry in both of them. I do not know if it is convenient to replace the two or just one and leave the other as it was.

&#x200B;

[DNS server \(Provider router\)](https://preview.redd.it/a6ct8xe6gbo81.png?width=948&format=png&auto=webp&s=07279bf780a43bb4d2352c128769bda030cd875a)

On the other hand, in the Raspberry file etc/resolv.conf I have the IP address of the Raspberry as nameserver:

    nameserver 192.168.1.47
    nameserver 192.168.1.47

Most of the time, if I want to perform some Dietpi update I need to modify this file and change the nameservers to 1.1.1.1.1 to be able to download the packages.

On the other hand, I would be missing the issue of SD card backups. Currently I do them by Dietpi command to an external USB (the one that does not mount automatically, I don't know why).

&#x200B;

Thanks in advance.!!",pihole,1647685329.0
7301,post,3,thraia,Do you want to use pihole in localhost with docker ???,"I wrote an article about this setup [here](https://thanos.mourtzoukos.space/run-pi-hole-in-localhost-and-some-extras/), also I use nginx reverse proxy and local domains with Pi-Hole. What do you think ???",pihole,1647680585.0
7302,comment,3,i19fzpo,,"Just skimmed through and it looks concise. If I would need this I‘d give it a try.

The font is a bit hard to read.",pihole,1647681171.0
7303,comment,2,i19vgem,,"3 things that popped out for me (some are personal preference though)
1. You have to add full configuration files (the compose) in the end for returning readers that knows it all and just need to grab it
2. You don’t need to expose 67 if you don’t configure dhcp
3. DNS forward has local host but I didn’t see while skimming through you setup unbound or something similar, is there a reason for it?
4(but that’s the personal preference) Not a big fan of “ports” section when not needed (you use reverse proxy so expose is enough as it open the 80 port internally, you don’t need port if you don’t access it from outside of docker network)

Other then that I love it, explained well and the use of npm rather then “standard “ nginx is a welcome touch",pihole,1647693475.0
7304,comment,2,i19gkub,,"Thank you very much for the feedback, to be true I don't have tried in Windows 11, I tried it in Windows 10 with WSL and  docker. I tried the nerd fonts in the terminal and I liked it, maybe I change it to something smoother like Ubuntu font.",pihole,1647681711.0
7305,post,125,thqvms,Can somebody explain to me why some devices get a buttload of IPv6 Addresses? Makes identification in the log nearly impossible...,,pihole,1647678661.0
7306,comment,120,i19epyv,,"It’s a privacy feature. Most devices (Windows, Android, Apple for example) generate two public IPv6 addresses for themselves, one stable and one 24h temporary. They use the temporary address for all outgoing connections to make themselves harder to track.

It does make the client list harder to work with - maybe pi-hole should get an option to automatically drop GUA IPv6 addresses older than 24h from that list.",pihole,1647680004.0
7307,comment,39,i19e8mx,,They are changing the IPv6 address from time to time to avoid tracking.,pihole,1647679565.0
7308,comment,10,i19ordt,,That's a feature of IPv6.,pihole,1647688719.0
7309,comment,9,i1ahfib,,">Makes identification [...] nearly impossible

Exactly — this is the entire point. There's no NAT so your ISP, the host, etc all know exactly which device is which. Using (and rotating through) multiple addresses helps blur things a bit.",pihole,1647704333.0
7310,comment,11,i19pdjq,,This is the reason why I don’t use ipv6 in my home network.  Unless someone can point out a good reason I’m missing I’ll probably never enable it for my personal network.,pihole,1647689219.0
7311,comment,5,i19o1nq,,"I don't have an answer to the question, but things like this are the reason I just block all ipv6 traffic on my network (between VLANs).",pihole,1647688144.0
7312,comment,1,i1a1atp,,They ask nicely.,pihole,1647696786.0
7313,comment,1,i1covlv,,"Does your Pi-hole not group your devices with their IPv6 addresses in the query log automatically? Mine does.

I realized a while ago that Pi-hole was sending PTR queries to upstream DNS for IPv6 addresses which were being answered with the IPv6 address and my ISP’s hostname extension (looked like <IPv6>.res6.spectrum). Pi-hole wasn’t associating the addresses with hostname based on the device’s MAC.

I solved it by blocking PTR requests for my IPv6 prefix. It’s done by creating a conf file in the dnsmasq directory:

`/etc/dnsmasq.d/99-custom.conf` using this syntax (flip the numbers around)so 2001:1234:5678:1::/64 would look like:

`local=/1.0.0.0.8.7.6.5.4.3.2.1.1.0.0.2.ip6.arpa/`",pihole,1647739580.0
7314,comment,54,i19xzo6,,">	maybe pi-hole should get an option to automatically drop GUA IPv6 addresses older than 24h from that list.

Feature requests are welcomed on our discourse page.",pihole,1647694976.0
7315,comment,14,i1a20w4,,Sounds similar to the randomized MAC that all newer phones seem to have on by default for WiFi connections. Makes managing my client list a pain.,pihole,1647697173.0
7316,comment,1,i1bhfoi,,learned something 👍,pihole,1647719610.0
7317,comment,18,i19erm2,,"The first half of an IPv6 is the LAN prefix and can't be changed by the unit itself. The LAN prefix is announced by the router. It is possible for a routed to use multiple prefixes at the same time but usually one global prefix (beginning with ""2"" or ""3"") is used and possible also a ULA prefix (beginning with ""fd""). 

It seems there are two IPv6 addresses in each LAN prefix which can mean one stable address and one temporary address. Temporary address changes regularly, for example each day.",pihole,1647680045.0
7318,comment,3,i1epee9,,"Network admins: “I can’t understand these logs! What the hell is this random crap?”

IPv6 designers: “That’s a feature, not a bug. You’re holding it wrong”",pihole,1647787467.0
7319,comment,0,i1cc91e,,"With IPv4, NAT doesn't necessarily help you. Any server that sees a connection by any of your devices (a smart TV loading apps, you visiting a website, a router along the route logging connections) can see the single IPv4 address your household has, can start probing it immediately for router vulnerabilities, any open ports & any insecure servers behind them. It can log your IPv4 address in lists ""to come back later, if we find an exploit for your stuff"". As long as you have that public IPv4 address, you're a target. And every IPv4 address gets mercilessly scanned 24/7 by almost the whole world.

With IPv6 privacy addresses:

* the server you connect to only sees one device, not a whole household with multiple possible machines behind it to attack, i.e. your smart TV does not tell an attacker what the address of your Raspberry Pi server is
* anyone harvesting these addresses only has <24h to try to find a vulnerability before the destination disappears forever

IPv6 privacy addresses are quite nice - not a silver bullet against all attacks, but it helps.",pihole,1647733323.0
7320,comment,3,i1cdap1,,"It has at least three things going for it, which may or may not mean much to you:

* you can access the IPv6 internet, which is rapidly growing: many residential connections are losing their public IPv4 address and can now only host over IPv6 these days, game servers, P2P etc
* these temporary privacy addresses are annoying in pi-hole logs, but do give additional privacy/security
* you can host over IPv6 which comes with a few practical and security advantages over hosting on IPv4",pihole,1647733823.0
7321,comment,11,i1a12f5,,True point to point connections instead of the abomination that is NAT. This makes peer to peer connections and things like VoIP calls a lot more efficient and easier to set up.,pihole,1647696661.0
7322,comment,3,i1ayznj,,"Thanks, I haven’t signed up for that yet, but it looks like a very effective way to channel feature requests!",pihole,1647711727.0
7323,comment,14,i1a7jvv,,"MAC address randomisation only generates a new address when the client configures a new profile for a given SSID, it remains stable until the clients network configuration profile is recreated or otherwise significantly modified.

You can also disallow them by rejecting MAC addresses with the local bit set, which is basically any unicast OUI with a 2, 6, A or E as it’s second hex digit.",pihole,1647699940.0
7324,comment,1,i1aynyw,,"It’s slightly different - with MAC randomization, there’s only a new MAC address when the phone connects to a new WiFi network, so for the same network it’s always constant. IPv6 privacy addresses always change - every 24h as well as on reboot.",pihole,1647711591.0
7325,comment,1,i1cn48o,,NAT is not the same as a firewall. What you’re describing are possible firewall vulnerabilities on the router.,pihole,1647738682.0
7326,comment,3,i1ag3rj,,Just because there’s no overhead of translating every address by the router? Or is there a further efficiency win?,pihole,1647703765.0
7327,comment,3,i1ajd2w,,How much of a speed difference does it make? Or whatever other metric is relevant here,pihole,1647705147.0
7328,comment,2,i1afzvc,,"It’s not that much easier since the IPs all look like gibberish, so you need DNS which is a whole other can of worms, and to do it securely you need TLS which is yet another can of worms.

It’s just not worth it for four machines running a bunch of web services.",pihole,1647703719.0
7329,comment,1,i1dlw7f,,"For what it's worth, Samsung for instance has true MAC address randomisation available as an option since One UI 3, and enabled by default for the Enterprise variants.

A few other vendors have their own versions of true or pseudorandom MAC address randomisation also, either as defaults or configurable options. To the best of my knowledge there's nothing in the Android CDD that specifies that vendors must/must not use any particular mechanism for this. Many just simply use the default AOSP provided MAC handler.",pihole,1647759769.0
7330,comment,1,i1dm5qc,,"Android, being Android, can [make things interesting](https://www.reddit.com/r/pihole/comments/thqvms/can_somebody_explain_to_me_why_some_devices_get_a/i1dlw7f).

Samsung's MAC cycling is particularly aggressive.",pihole,1647759994.0
7331,comment,1,i1dz0k9,,"NAT is not a firewall indeed, but what I’m describing (that device A reveals the location of server B behind the same IPv4 address) is a direct consequence of NAT, not firewalling.",pihole,1647771071.0
7332,comment,3,i1da5ib,,"Just as an indication of the kind of hoops that NAT makes you go through to set up a direct connection between hosts: https://tailscale.com/blog/how-nat-traversal-works/

This is needed for all kinds of things, like calls over IP (WhatsApp, signal), video conferencing, etc.
When NAT traversal is not possible due to the NAT devices being too restrictive, all traffic needs to be relayed over a third-party server, introducing extra latency and bandwidth limitations.

And there are many other considerations, all contributing to the inefficiency and unreliability of connections through NAT.",pihole,1647751142.0
7333,comment,2,i1dawvt,,See my answer here https://www.reddit.com/r/pihole/comments/thqvms/slug/i1da5ib,pihole,1647751617.0
7334,comment,1,i1cxbsg,,"Meh, I think internally applications would advertise their ipv6 address to a server when setting up p2p connections , like a Zoom client for example could advertise its ipv6 address and tls keys to the zoom server when negotiating a new meeting sessions, the server tells all the clients what they need to set up the p2p connections, and clients handle rest. Note that I don’t work on Zoom or have much recent TLS experience, but that’s just one way I could see it being done. 

I agree that I’ll probably never type an ipv6 address into my browser bar or manually try to ssh into an ipv6 address, lol.",pihole,1647743894.0
7335,comment,0,i1daoes,,"I don't see the point, how often do you type a literal IPv4 address in your browser's address bar?
Add to that the practice of hosting multiple domain names on the same IP address, relying on the host header to route requests to the right application, which makes DNS a necessity for IPv4 as well.

Regarding TLS, I don't see what's different between IPv4 and IPv6, I'd say TLS is equally needed with both of them and it operates on a higher layer, independent of the underlying routing protocol.",pihole,1647751472.0
7336,comment,3,i1dz7ix,,"Ooh that’s good info.

I generally think MAC randomization is a good thing and helps with moving towards a zero-trust approach to networking, but any oldschool tools and workflows that still depend on the idea of stable addressing and “identification by address” will run into issues.",pihole,1647771237.0
7337,comment,1,i1eksgr,,When setting it all up and debugging I type the IP address all the time.,pihole,1647785322.0
7338,comment,0,i1elx9k,,"These days there are solutions like mDNS to help with finding devices in a local home network based on their hostnames. While you can stick to IPv4 just to avoid having to adapt your way of working, your network and your networking knowledge will become increasingly obsolete and you will miss out on a lot of new developments.

IPv4 is becoming more and more a patchwork of temporary solutions designed to deal with the limited address space.",pihole,1647785865.0
7339,comment,1,i1en89w,,"mDNS doesn’t have enough control, which is why I set up an actual DNS server for my network. And that gets me right back to needing human-readable IP addresses.

I’m not doing this to have the most advanced network in the world, or to have super-1337 IPv6 haxxoring skills: I just want some servers on my network. 

Besides, every single customer I’ve ever worked with at my job is also still using IPv4 for their networks for the same reasons I stick with it: IPv4 is good enough and IPv6 over complicates a simple job.",pihole,1647786476.0
7340,post,1,thfor6,PTR requests every 3 seconds,"Hello,

So i have a Philips soundbar that apparently really want to resolve its own name, as far as i understand.

Does anyone have any idea why this is happening so often? And how to resolve the issue? I searvhed for it here on reddit and found a comment describing how to remove it from the stats, but i would rather try to solve the problem and make the unnecessary traffic disappear, if possible.

Running Pihole on a Pi with DHCP enabled. I don't know what other information is relevant.

https://preview.redd.it/fgp7ghtdm7o81.png?width=979&format=png&auto=webp&s=47a6ab9752f26fa9668a02c9c5de843d3e2c54d1",pihole,1647639046.0
7341,comment,1,i17t70m,,">	Philips soundbar that apparently really want to resolve its own name, as far as i understand.

The soundbar is asking for the name of the client at 192.168.1.1, which is likely your router.",pihole,1647645238.0
7342,comment,1,i1icx0y,,"do you know why?

And how i can stop it?",pihole,1647853530.0
7343,comment,1,i1itaco,,I do not. I would visit the Phillips support site and any online forums they have.,pihole,1647865585.0
7344,post,0,thffwt,Block all but specific sites,"Hello everyone,
I’ve successfully figured out how to block specific sites for specific devices but I’d like to take this a step further and block **all** sites for a device, **except** specific sites. 
I’ve tried googling but nothing came up immediately so I thought I’d ask here. 
Is there an easy way to accomplish this?
Would something like a custom blocklist with sites added as whitelisted work for this purpose?
Thanks!",pihole,1647638334.0
7345,comment,3,i17fb4v,,"At a guess:

Create a group. Block everything. Whitelist the sites you want to allow access to. Add client to group.",pihole,1647639108.0
7346,comment,4,i17jgqx,,"Keep in mind that this will only work for name resolution. If the device you are blocking does anything by IP, dns won’t be involved. 

If you have a firewall option, your handful of allow statements followed by a deny statement may well be a better solution.",pihole,1647640869.0
7347,comment,1,i17fjxe,,Sounds easy enough. How do I block everything though? That’s the part I’m having issues with :),pihole,1647639210.0
7348,comment,2,i197xzm,,"It should do the trick, I think.
I’m having issues with a rogue tablet that is…khm…playing web games instead of doing homework. 
I don’t have a firewall option, unfortunately. 

The stupid thing about it is, it’s a school-supplied tablet and no programs can be installed (makes sense) but website access isn’t limited at all…",pihole,1647673919.0
7349,comment,4,i17fx8z,,"Regex: "".*"" should block everything.",pihole,1647639362.0
7350,comment,1,i197krp,,"Thanks! Will try this today. 
I just wasn’t sure if specific whitelisting overrides a general blacklist.",pihole,1647673602.0
7351,comment,2,i19yuaq,,">	wasn’t sure if specific whitelisting overrides a general blacklist.

A specific whitelist overrides all blocking. Regex whitelist is the next in priority.",pihole,1647695457.0
7352,comment,1,i1amnof,,"Then this is just what I was looking for!
Thanks for confirming!",pihole,1647706512.0
7353,post,3,thdqq8,How to disable ' Long-term load (15min avg) larger than number of processors' from web interface?,"I understood I can modify the config file, but since I have pi-hole on docker I need to connect to my NAS by SSH and don't want to spend to much time on it. 

So, is it an option to disable the message below through the web interface?

I am running folding@home on my NAS and the CPUs is constantly at 100% or so --> I have that message constantly on and that's annoying...

https://preview.redd.it/4hh6kd5p67o81.png?width=1455&format=png&auto=webp&s=a116200a5893602a8bb65187b80f495d36ebdd37",pihole,1647633619.0
7354,comment,1,i172q9b,,https://docs.pi-hole.net/ftldns/configfile/#check\_load,pihole,1647633999.0
7355,comment,0,i173maf,,don't see where it is specified where on the web interface I can disable this warning,pihole,1647634356.0
7356,comment,2,i175e0a,,You need to add `CHECK_LOAD=false` to your `/etc/pihole/pihole-FTL.conf` file. There is no way to do it on the Web Interface.,pihole,1647635059.0
7357,comment,-1,i175i53,,thanks. would it be possible to add it?,pihole,1647635104.0
7358,comment,1,i178cs8,,"We aren't planning on adding this to the web admin interface.  And, there is no open feature request on our discourse site.",pihole,1647636236.0
7359,post,3,thdb0f,"Blocking You Tube (not ads, all of You Tube)","Title says it - I’m looking for a way to block You Tube from some young inquisitive eyes.  I tried blocking the YouTube.com and googlevideo.com domains but its still coming through.  All the search results focus on blocking the ads, which is not what I’m looking for.  Thanks in advance.",pihole,1647632413.0
7360,comment,1,i17z3dc,,"Folks - this is a simple technical question, not a request for parenting advice. Unsolicited parental advice comments will be removed. There are subReddits for parenting.",pihole,1647647988.0
7361,comment,21,i170xnk,,"Are you using the RegEx to include subdomains? For example the following for Youtube:

    (\.|^)youtube\.com$",pihole,1647633292.0
7362,comment,9,i17cn07,,[removed],pihole,1647637991.0
7363,comment,4,i1705wa,,Edit: just add to block list as a wildcard domain.,pihole,1647632981.0
7364,comment,2,i17hbyc,,Same here and I have mixed feelings about this but I am outvoted 1-1.,pihole,1647639960.0
7365,comment,1,i1748zt,,Thanks I’ll give it a shot. I completely spaced on trying. Regex filter for some reason.,pihole,1647634608.0
7366,comment,4,i171gp6,,This is the way,pihole,1647633500.0
7367,comment,2,i18ipzh,,"While you are at it, maybe also regex block any googlevideo domains.

    (\.|^)googlevideo\.com$ 

Also, I remember [the blocklist project](https://github.com/blocklistproject/Lists) has a list for youtube, you may want to take a look at it.

Edit: The list is for youtube ads and is deprecated, not for all of youtube. You might still want to take a look at it tho.",pihole,1647657547.0
7368,comment,-4,i170dye,,"He doesn't want to block ads, he wants to block all of YouTube",pihole,1647633071.0
7369,comment,-1,i17v1at,,[removed],pihole,1647646094.0
7370,comment,1,i19nc0z,,"add, not ad. 😉 || 
add > Addition ||
ad > advertisment",pihole,1647687572.0
7371,comment,2,i17xeok,,Removed as a violation of rule 5 - always be civil.  Please review this rule prior to further posting.,pihole,1647647197.0
7372,comment,1,i17wb6e,,Please note this isn't a parenting forum.,pihole,1647646683.0
7373,comment,1,i19ut9x,,"Doesn't help that the person I replied to has now changed their answer, can't verify if I misunderstood them or if the other person misunderstood OP. Either way, my response stands, the OP wants to block all of YouTube, not just a portion of it and it's 'features'",pihole,1647693067.0
7374,post,47,th91o1,PiHole + NAS,"Hi all!  
I've got my hands on a Raspberry Pi 4 (2GB) and I got it to successfully run PiHole. I have 1.5 TB External Drive that I would like to run as a NAS Drive on my Pi next to PiHole.  
I've never tried running a NAS before, and I don't want to brick my PiHole setup. So, Is this achievable? If so, what can I follow?  
\*(pi-hole is running both DHCP + DNS (not in docker mode)... my router doesn't allow changing DNS)

if not related, plz inform me.. I'll delete my post.

TIA!",pihole,1647625716.0
7375,comment,19,i16nevl,,"Running NAS software on the Pi alongside Pi-hole should not cause a problem unless there are port conflicts. 

https://docs.pi-hole.net/main/prerequisites/#ports",pihole,1647627780.0
7376,comment,4,i179wqb,,Not an answer to your question but how do you get your network to use PiHole if you can't change the DNS on the router? Do you configure every device manually?,pihole,1647636860.0
7377,comment,2,i183qe7,,"Short answer, use 'Dietpi'. its bare minimal distro based on debian which has all the softwares ready to install. I ran this for years. Most of the softwares are preconfigured, including pihole.

If you want to get into tinkering, install debian ( I prefer) / ubuntu server for pi. With debian you can get rid of lot necessary libraries. Then install samba for file sharing, that should do it. for more adventures install docker and go from there.

I would say though running 24x7 with a usb external drive is not recommended, those usb to sata adapters are not meant for that.",pihole,1647650184.0
7378,comment,2,i18iev9,,"You can plug your drive to it with USB3, format it ZFS or whatever, and then make it an SMB share (assuming you want other devices in your house to be able to use it as storage). If you just mean you want to put media on it and access it through the pi, like plex etc, you dont need to make an SMB share.",pihole,1647657387.0
7379,comment,2,i19udtu,,What about the ram limits?   Im running pihole on a pi 1b.  Works ok but close to limits.    Nas setup the things i was reading..yesterday said best on the pi4 8gb.,pihole,1647692794.0
7380,comment,3,i1781l7,,"I’ll update this comment with the guide I followed, but I run OpenMediaVault on my Pi 4 with PiHole in a Docker container via portainer. Good news about a Docker container is, you mess it up? Blow it away and start fresh! No harm to your main system

OpenMediaVault: https://pimylifeup.com/raspberry-pi-openmediavault/

PiHole in Portainer: https://www.wundertech.net/how-to-set-up-pi-hole-on-openmediavault/",pihole,1647636111.0
7381,comment,0,i170wu7,,"This is my armbian instructions i made for my cubietruck last year.  Based on debian so should be close..


su
sudo apt-get install samba
sudo mv /etc/samba/smb.conf /etc/samba/smb.conf.bak
sudo nano /etc/samba/smb.conf

[global]
workgroup = WORKGROUP
server string = Samba Server %v
netbios name = cubietruck
security = user
board to guest = bad user
dns proxy = no

sudo systemctl restart smbd.service
sudo smbpasswd -a richdotward
sudo nano /etc/samba/smb.conf

[64GB]
  comment = System files
  path = /home/richdotward
  valid users = @users
  force group = users
  create mask = 0660
  directory mask = 0771
  writable = yes
  
[2TB]
        writeable = yes
        path = /mnt/usb_1

[4TB]
        writeable = yes
        path = /mnt/usb_2


sudo systemctl restart smbd.service
sudo systemctl stop smbd.service
sudo systemctl restart smbd.service

Edit.  Sorry for formatting, pasted from my phone.",pihole,1647633282.0
7382,comment,2,i17j8wh,,"Thanks, u/jfb-pihole!",pihole,1647640778.0
7383,comment,7,i17e97d,,"I believe he turned off DHCP on the router and use it on the pihole instead, and from there he can use pihole for DNS.",pihole,1647638665.0
7384,comment,1,i18j75h,,"I use the pi exclusively for pihole and pivpn, and a seperate computer for jellyfin, SMB shares etc, so that even if I am tinkering with stuff, rebooting etc, my wife can keep watching Love It or List It on the internet (ie, the internet and VPN is always up).",pihole,1647657792.0
7385,comment,1,i1ba34f,,">I would say though running 24x7 with a usb external drive is not recommended, those usb to sata adapters are not meant for that.

I'm using an External Hard Drive, not a USB-SATA Hard Drive.

[https://www.powerplanetonline.com/cdnassets/1tb\_western\_digital\_elements\_usb\_05\_l.jpg](https://www.powerplanetonline.com/cdnassets/1tb_western_digital_elements_usb_05_l.jpg)  


>If you want to get into tinkering, install debian ( I prefer) / ubuntu server for pi. With debian you can get rid of lot necessary libraries. Then install samba for file sharing, that should do it. for more adventures install docker and go from there.  


I've installed Raspberry Pi OS Lite (debian I guess), as OMV doesnt run on Ubuntu Server.

Docker messed up always my PiHole DHCP, so I got rid of that idea.",pihole,1647716397.0
7386,comment,2,i1b953m,,"thanks u/ManWithThe105IQ  
I've formatted it with EXT4 format and setup SMB shares!",pihole,1647715997.0
7387,comment,1,i1b9o4l,,">What about the ram limits?   Im running pihole on a pi 1b.  Works ok but close to limits.    Nas setup the things i was reading..yesterday said best on the pi4 8gb.

I'm running PiHole + OMV + CUPS on RPi 4B (2GB).   
My ram usage averages at about 400 to 600MB!",pihole,1647716222.0
7388,comment,3,i17j2w5,,">I’ll update this comment with the guide I followed, but I run OpenMediaVault on my Pi 4 with PiHole in a Docker container via portainer. Good news about a Docker container is, you mess it up? Blow it away and start fresh! No harm to your main system  
>  
>OpenMediaVault: https://pimylifeup.com/raspberry-pi-openmediavault/  
>  
>PiHole in Portainer: https://www.wundertech.net/how-to-set-up-pi-hole-on-openmediavault/

thanks for your comment!  
i've had issues though with PiHole running in Docker (DHCP wont work), and that's why I had to ditch the Docker idea.   


I actually found out another issue, I was using Ubuntu Server but turns out OMV only works on Debian, so now I'm copying over a backup of PiHole & I'll install Raspberry Pi Lite.",pihole,1647640706.0
7389,comment,2,i17gojv,,Doing the same thing but on a Odroid H2+. Works fantastic.,pihole,1647639684.0
7390,comment,1,i178ude,,"\^ this is the way to go...

I'd also suggest using ZFS for your NAS drive's filesystem instead of BTRFS (I think it used to be the default on OMV?), since ZFS has wider support",pihole,1647636433.0
7391,comment,1,i17jch1,,"Thanks u/richdotward  
I'm actually looking at OMV (OpenMediaVault), but thanks for the SAMBA instructions too!",pihole,1647640820.0
7392,comment,2,i17j85i,,"u/miraculum_one  
as u/jalle_h replied, yes I did disable DHCP on my router and use the PiHole DHCP server!",pihole,1647640769.0
7393,comment,2,i1blhjo,,👍,pihole,1647721383.0
7394,comment,1,i17j5fs,,whats the difference? I'm using only one 1.5 TB WD External Hard Drive.,pihole,1647640736.0
7395,comment,0,i1869e8,,"That's great but if the router is providing DNS then the PiHole isn't really doing anything. Unless I'm misunderstanding what he means by ""my router doesn't allow changing DNS"".",pihole,1647651396.0
7396,comment,2,i1a6mt6,,"Mainly future proofing.. I started with a 2TB HDD and the library quickly grew to 12TB mirrored. Then I wanted to try other systems (like TrueNAS) and pretty much the only one which supports BTRFS is OpenMediaVault, while ZFS is much more widely used.

Just making sure you are aware of that before setting up OMV as I didn't and migrating the data over was a huge hassle.",pihole,1647699505.0
7397,comment,2,i18abs7,,I had this problem and just had to manually configure my DNS on each device.,pihole,1647653363.0
7398,comment,2,i18r5jz,,"DHCP provides to each device where the DNS is. If pi-hole is running as DHCP, it will never tell the devices that the router is providing DNS.  


edit: To clarify, most routers also stop severing DNS when you turn off DHCP as well, so you'll almost never run in to a situation where the router will still be running as DNS server unless you specifically configured your DHCP to provide the router as DNS and an active DNS server exist on the router.",pihole,1647662079.0
7399,comment,1,i18iqjm,,"I think he means that he couldnt use the router in router mode while changing DNS, but he can turn off router mode (which turns off DNS on the router, and just uses the router as a modem)",pihole,1647657555.0
7400,comment,2,i1b92sy,,"I've used now EXT4. I'll look at ZFS later on when I expand (which it seems I will!)  
thanks for the suggestion!",pihole,1647715970.0
7401,comment,2,i18tq85,,"The router is still routing. Just not doing DHCP. So it won’t be telling anything else in the network what to use. 

Thus the only thing that the DNS values on the router impact are requests the router itself is making. Which, all things considered should be minimal, likely a time server and things related to the routers gui and maybe firmware updates. 

Routers can do many things, most home targeted devices do a bunch to make it easy, but  DHCP, & dns forwarding are all things that a pihole is excellent at and while doing those the router is still routing, at a base level helping packets leave the network and get to a different one.

I should perhaps edit here to add that DHCP itself is ‘optional’ and an ease of use thing. It is totally possible to statically assign addresses, default routes and dns values on every device. As long as you do that in a value non conflicting way, the network will work. That said it’s a pain and more so as more and more devices have almost no interface and effectively require DHCP. Thus the quotes on optional.",pihole,1647663558.0
7402,post,25,tgyt54,PiHole stopped working after Update,"Hey Guys,

&#x200B;

i Updated my PiHole using ""pihole -up"" to the newest Version

* **Pi-hole** [v5.9](https://github.com/pi-hole/pi-hole/releases/v5.9)
* **FTL** [v5.14](https://github.com/pi-hole/FTL/releases/v5.14)
* **Web Interface** [v5.11](https://github.com/pi-hole/AdminLTE/releases/v5.11)

&#x200B;

After the Update it just stopped working.

&#x200B;

Query isnt logging any website i visit and no ads blocked.

&#x200B;

I attach some screenshots here and hope, someone could help me.

&#x200B;

Before the update anything worked great.

&#x200B;

In the newest updates webinterface is a new message window.

It shows four  reducing DNS packet size Errors. Maybe thats the issue, but with the   official documentation i wasnt able to fix it.

I also tried pihole -r without an solution.

&#x200B;

https://preview.redd.it/wfczfmahj4o81.png?width=1088&format=png&auto=webp&s=e9815d8cb6dfc596c382b2586ec18e60ec7f454a

https://preview.redd.it/itiegnahj4o81.png?width=1369&format=png&auto=webp&s=da486c3897b16f4545d59adfb75de1fa905b9244

https://preview.redd.it/qbix6pahj4o81.png?width=1069&format=png&auto=webp&s=633b2c4e1ec4e35c1300081cfa71ab1790667ea4

https://preview.redd.it/8o9wtrahj4o81.png?width=1087&format=png&auto=webp&s=73b1d72598899e5ef950b440bafdbb8c6c1b699f",pihole,1647601459.0
7403,comment,3,i15pad0,,"Tick off dnsseq, use only one dns provider and restart pihole",pihole,1647614396.0
7404,comment,1,i16r7v4,,"I disabled dnssec and the errors disappeared but the pihole is still not working.

&#x200B;

I checked my Router Settings with the DNS Settings.

First Choice of DNS Server is the Pi Hole and Backup if its not working is googles [8.8.8.8](https://8.8.8.8).

&#x200B;

&#x200B;

I tried putting main and backup dns server adress to pi holes adress to see if its even working.

And its not working, if i try to connect to any website it cant resolve it.

&#x200B;

This information maybe can restrict the possibilities... This just happend after the update... Before the Update it runs 1 year + error free.",pihole,1647629300.0
7405,comment,1,i1710wp,,restart FTL service,pihole,1647633327.0
7406,comment,1,i17sbyn,,"Is your machine running Ubuntu? Can you resolve domains on the host machine?

I had an issue when updating on Ubuntu. Completely broke name resolution on the host machine. Not sure exactly what was wrong, but it had to do with dnsresolve.conf. I ended up switching one of my machines to Debian and using docker containers for good measure.",pihole,1647644832.0
7407,comment,0,i18x7qh,,"Why use just one, Pihole will eventually pick the fastest server.

I would untic dnsec too.",pihole,1647665707.0
7408,comment,5,i1752mt,,Remove the secondary [8.8.8.8](https://8.8.8.8) dns from the router. You should only set up PiHole dns on your router. Restart your router.,pihole,1647634934.0
7409,comment,1,i16utwu,,"Can the box itself resolve things already?

As in ssh into the box and try to ping google.com. Does it resolve the dns properly? Does it reach it properly? The Pi-hole doesn’t use itself for dns so what are you pointing at the OS level? Check resolv.conf or type nslookup and see what the default server is for the Pi-hole itself. 

Basically before troubleshooting the software, make sure the box itself can reach the internet properly.",pihole,1647630775.0
7410,comment,1,i17q8zy,,"Had the exact same thing happen to me. 

I also have pivpn installed. Works fine if I vpn but fails to resolve anything from anyone else.

Admin panel and ssh are all perfectly working.",pihole,1647643879.0
7411,comment,1,i19sn80,,"Keep it simple. Use one. Even better, run your own upstream dns server, for instance unbound. https://docs.pi-hole.net/guides/dns/unbound/",pihole,1647691615.0
7412,comment,0,i19sshq,,"This. Secondary dns would be your backup pihole, NOT google dns.",pihole,1647691717.0
7413,comment,1,i16ye0z,,">Can the box itself resolve things already?  
>  
>As in ssh into the box and try to ping google.com. Does it resolve the dns properly? Does it reach it properly? The Pi-hole doesn’t use itself for dns so what are you pointing at the OS level? Check resolv.conf or type nslookup and see what the default server is for the Pi-hole itself.  
>  
>Basically before troubleshooting the software, make sure the box itself can reach the internet properly.

\--- google.com ping statistics ---  
18 packets transmitted, 18 received, 0% packet loss, time 42ms  
rtt min/avg/max/mdev = 22.918/23.254/23.758/0.280 ms

So it can connect to the internet...",pihole,1647632250.0
7414,comment,1,i171994,,"Are you familiar with troubleshooting with nslookup?

On a different box, use nslookup:

server 192.168.x.x

[google.com](https://google.com)

server [8.8.8.8](https://8.8.8.8)

google.com

Where the address above is the IP address of your pihole. Basically, can your box even lookup IPs at the command line?",pihole,1647633418.0
7415,post,2,tgwt0f,How do I get the IP privacy of using a VPN and adblock properties of Pi hole using DNS sinkhole?,"Like the title asks. Sorry if I sound stupid, I am doing my best to be literate. Correct me when I am using terms or words wrong!

My DNS configure:

The router is using pihole as its only DNS resolver by using Pi's I.P address. Pi hole has a reserve static I.P. via the router webgui. 

Pi hole's upstreams DNS is set to the VPN's Smart DNS address which is provided my VPN provider. 

I can see from Pi Hole's webgui that the web queries is in fact the VPNS DNS . But not if i type nslookup via CMD or Pi Hole terminal. People online say not to worry about it, but why is it not showing up the correct DNS address?

Does connecting to my VPNS DNS actually block ads? This part is very confusing, because from what I understand Pi Hole blocks any element based on the adlist provided before it looks up on VPN DNS. (correct me here).

When I am connected to my VPN via its software, does the software change my DNS or does the DNS that I wrote in Pi Hole's Upstream take over? What I know for certain is that my VPN does change my I.P. address. Which I want, but this DNS set up is so challenging and fun. Hope you can help me!",pihole,1647592946.0
7416,comment,2,i16336g,,"Not entirely what you are asking, but if privacy is what you're after, I would look at configuring unbound on your pihole. Unbound replaces the upstream DNS provider by caching your DNS queries on the pi alongside the block lists. After a period of populating the list of websites, this keeps all DNS queries inside your house.

Unbound is a separate product from pihole and isn't necessarily supported here, but it's a common add on and I'll link a setup video [here](https://youtu.be/FnFtWsZ8IP0). Since your pi is up and running you can potentially skip to about halfway through, or you can watch the whole thing as he drops good tidbits of information throughout the video.",pihole,1647619853.0
7417,comment,2,i15srp8,,">But not if i type nslookup via CMD or Pi Hole terminal

Please post output that shows what you are seeing.

>Does connecting to my VPNS DNS actually block ads?

If your VPN DNS service has filtered results, perhaps. Pi-hole filters DNS queries prior to sending the domain to the upstream DNS server for resolution.  If a domain is on your Pi-hole blocklist, Pi-hole does not forward the query to the upstream DNS server.

>When I am connected to my VPN via its software, does the software change my DNS

Typically yes.  The client running the VPN will go to the DNS server provided by the VPN service.  However, this will make no changes to the upstream DNS server used by Pi-hole.  The change will be made to the DNS server used by the client running the VPN software.",pihole,1647615805.0
7418,comment,2,i1638t7,,Thank you mate!,pihole,1647619914.0
7419,comment,1,i165mc0,,"If you go about this, you'll want to take a look at your VPN settings. Your VPN is probably using their DNS servers by default, but you can usually toggle that off. Encrypted queries are nice, but queries not leaving your house is probably better. As the dev noted in the other post though there is a chance the VPN provider has their own content filtering system on their servers, it's up to you which benefits you'd want to go with.",pihole,1647620827.0
7420,comment,1,i165tvg,,I want the benefit of my vpns IP masking but maybe my own DNS . This is possible right? Not sure if my VPN has such options tho,pihole,1647620908.0
7421,comment,1,i167nfj,,"Yep, so in that situation unbound is probably the way to go. Any ip traffic is going to be encrypted and sent out through your VPN, and DNS traffic is going to go straight to the authoritative server for that domain and then cached locally to answer future requests.

The only requirement for that is you'd need to tell your VPN to still use pihole when connected, when you're at home anyways.",pihole,1647621602.0
7422,comment,1,i167wlo,,"So the trick now is how to make my VPN use my pihole. I just assumed that because I have the pi hole set up , I thought my VPN will use the pi hole. This isn't the case??",pihole,1647621699.0
7423,comment,2,i168hz2,,"It depends on the VPN. I'd connect to the VPN and then take a look at all your network settings, note that you may have a virtual VPN adapter to check settings on as well. If you see your pi ip for everything then you're good. If you see other ips listed, poke around in settings and see if you can chance that behavior",pihole,1647621930.0
7424,comment,1,i16dc8a,,"When i connect directly to the vpn, the configurations i use in the pi-hole are ignored. So i tried to use the dns that the vpn was using, but it internet wont work properly. I know for a fact that their dns has filtering specially in youtube videos. anyway i can find out which dns they are using that works? I tried looking at the adaptor and tried 3 different address not all work properly sadly.",pihole,1647623823.0
7425,post,1,tgt0oi,"dnsmasq core: no upstream servers configured, but they're configured??","As the title shows... dnsmasq claims to not have any upstream servers configured... But it indeed does? According to the logs... Any help would be amazing... Spent a solid 4 hours trying to figure this out on my own, with no luck...

[\\""no upstream servers configured\\"" but they are ;\)](https://preview.redd.it/sa6r0ms4i2o81.png?width=535&format=png&auto=webp&s=e56b2a100ff8e59e5867e82a536089981df214b7)

/var/log/pihole-FTL.log - From a fresh restart

    [2022-03-18 04:02:15.296 4189M] ########## FTL terminated after 6m 8s  (code 0)! ##########
    [2022-03-18 04:02:16.266 31423M] Using log file /var/log/pihole-FTL.log
    [2022-03-18 04:02:16.267 31423M] ########## FTL started on ubuntu! ##########
    [2022-03-18 04:02:16.267 31423M] FTL branch: master
    [2022-03-18 04:02:16.267 31423M] FTL version: v5.14
    [2022-03-18 04:02:16.267 31423M] FTL commit: 52e6b95
    [2022-03-18 04:02:16.267 31423M] FTL date: 2022-02-12 19:58:34 +0000
    [2022-03-18 04:02:16.267 31423M] FTL user: pihole
    [2022-03-18 04:02:16.267 31423M] Compiled for aarch64 (compiled on CI) using aarch64-linux-gnu-gcc (Debian 6.3.0-18) 6.3.0 20170516
    [2022-03-18 04:02:16.267 31423M] Creating mutex
    [2022-03-18 04:02:16.267 31423M] Creating mutex
    [2022-03-18 04:02:16.269 31423M] Starting config file parsing (/etc/pihole/pihole-FTL.conf)
    [2022-03-18 04:02:16.269 31423M]    SOCKET_LISTENING: only local
    [2022-03-18 04:02:16.269 31423M]    AAAA_QUERY_ANALYSIS: Show AAAA queries
    [2022-03-18 04:02:16.269 31423M]    MAXDBDAYS: max age for stored queries is 365 days
    [2022-03-18 04:02:16.269 31423M]    RESOLVE_IPV6: Resolve IPv6 addresses
    [2022-03-18 04:02:16.269 31423M]    RESOLVE_IPV4: Resolve IPv4 addresses
    [2022-03-18 04:02:16.269 31423M]    DBINTERVAL: saving to DB file every minute
    [2022-03-18 04:02:16.269 31423M]    DBFILE: Using /etc/pihole/pihole-FTL.db
    [2022-03-18 04:02:16.270 31423M]    MAXLOGAGE: Importing up to 24.0 hours of log data
    [2022-03-18 04:02:16.270 31423M]    PRIVACYLEVEL: Set to 0
    [2022-03-18 04:02:16.270 31423M]    IGNORE_LOCALHOST: Show queries from localhost
    [2022-03-18 04:02:16.270 31423M]    BLOCKINGMODE: Null IPs for blocked domains
    [2022-03-18 04:02:16.270 31423M]    ANALYZE_ONLY_A_AND_AAAA: Enabled. Analyzing only A and AAAA queries
    [2022-03-18 04:02:16.270 31423M]    DBIMPORT: Importing history from database
    [2022-03-18 04:02:16.270 31423M]    PIDFILE: Using /run/pihole-FTL.pid
    [2022-03-18 04:02:16.270 31423M]    PORTFILE: Using /run/pihole-FTL.port
    [2022-03-18 04:02:16.270 31423M]    SOCKETFILE: Using /run/pihole/FTL.sock
    [2022-03-18 04:02:16.270 31423M]    SETUPVARSFILE: Using /etc/pihole/setupVars.conf
    [2022-03-18 04:02:16.271 31423M]    MACVENDORDB: Using /etc/pihole/macvendor.db
    [2022-03-18 04:02:16.271 31423M]    GRAVITYDB: Using /etc/pihole/gravity.db
    [2022-03-18 04:02:16.271 31423M]    PARSE_ARP_CACHE: Active
    [2022-03-18 04:02:16.271 31423M]    CNAME_DEEP_INSPECT: Active
    [2022-03-18 04:02:16.271 31423M]    DELAY_STARTUP: No delay requested.
    [2022-03-18 04:02:16.271 31423M]    BLOCK_ESNI: Enabled, blocking _esni.{blocked domain}
    [2022-03-18 04:02:16.271 31423M]    NICE: Set process niceness to -10 (default)
    [2022-03-18 04:02:16.271 31423M]    MAXNETAGE: Removing IP addresses and host names from network table after 365 days
    [2022-03-18 04:02:16.271 31423M]    NAMES_FROM_NETDB: Enabled, trying to get names from network database
    [2022-03-18 04:02:16.271 31423M]    EDNS0_ECS: Overwrite client from ECS information
    [2022-03-18 04:02:16.272 31423M]    REFRESH_HOSTNAMES: Periodically refreshing IPv4 names
    [2022-03-18 04:02:16.272 31423M]    RATE_LIMIT: Rate-limiting client making more than 1000 queries in 60 seconds
    [2022-03-18 04:02:16.272 31423M]    LOCAL_IPV4: Automatic interface-dependent detection of address
    [2022-03-18 04:02:16.272 31423M]    LOCAL_IPV6: Automatic interface-dependent detection of address
    [2022-03-18 04:02:16.272 31423M]    BLOCK_IPV4: Automatic interface-dependent detection of address
    [2022-03-18 04:02:16.272 31423M]    BLOCK_IPV6: Automatic interface-dependent detection of address
    [2022-03-18 04:02:16.272 31423M]    SHOW_DNSSEC: Enabled, showing automatically generated DNSSEC queries
    [2022-03-18 04:02:16.272 31423M]    MOZILLA_CANARY: Enabled
    [2022-03-18 04:02:16.272 31423M]    PIHOLE_PTR: internal PTR generation enabled (pi.hole)
    [2022-03-18 04:02:16.272 31423M]    ADDR2LINE: Enabled
    [2022-03-18 04:02:16.272 31423M]    REPLY_WHEN_BUSY: Permit queries when the database is busy
    [2022-03-18 04:02:16.272 31423M]    BLOCK_TTL: 2 seconds
    [2022-03-18 04:02:16.272 31423M]    BLOCK_ICLOUD_PR: Enabled
    [2022-03-18 04:02:16.273 31423M]    CHECK_LOAD: Enabled
    [2022-03-18 04:02:16.273 31423M]    CHECK_SHMEM: Warning if shared-memory usage exceeds 90%
    [2022-03-18 04:02:16.273 31423M]    CHECK_DISK: Warning if certain disk usage exceeds 90%
    [2022-03-18 04:02:16.273 31423M] Finished config file parsing
    [2022-03-18 04:02:16.274 31423M] Database version is 12
    [2022-03-18 04:02:16.275 31423M] Resizing ""FTL-strings"" from 40960 to (81920 * 1) == 81920 (/dev/shm: 688.1KB used, 2.0GB total, FTL uses 676.2KB)
    [2022-03-18 04:02:16.275 31423M] Imported 0 alias-clients
    [2022-03-18 04:02:16.275 31423M] Database successfully initialized
    [2022-03-18 04:02:16.376 31423M] New upstream server: 8.8.4.4:53 (0/32)
    [2022-03-18 04:02:16.381 31423M] New upstream server: 1.0.0.1:53 (1/32)
    [2022-03-18 04:02:16.427 31423M] Resizing ""FTL-queries"" from 229376 to (8192 * 56) == 458752 (/dev/shm: 729.1KB used, 2.0GB total, FTL uses 717.2KB)
    [2022-03-18 04:02:16.437 31423M] New upstream server: 8.8.8.8:53 (2/32)
    [2022-03-18 04:02:16.438 31423M] New upstream server: 1.1.1.1:53 (3/32)
    [2022-03-18 04:02:16.466 31423M] Resizing ""FTL-queries"" from 458752 to (12288 * 56) == 688128 (/dev/shm: 958.5KB used, 2.0GB total, FTL uses 946.5KB)
    [2022-03-18 04:02:16.489 31423M] Resizing ""FTL-domains"" from 12288 to (1024 * 24) == 24576 (/dev/shm: 1.2MB used, 2.0GB total, FTL uses 1.2MB)
    [2022-03-18 04:02:16.508 31423M] Resizing ""FTL-queries"" from 688128 to (16384 * 56) == 917504 (/dev/shm: 1.2MB used, 2.0GB total, FTL uses 1.2MB)
    [2022-03-18 04:02:16.539 31423M] Resizing ""FTL-queries"" from 917504 to (20480 * 56) == 1146880 (/dev/shm: 1.4MB used, 2.0GB total, FTL uses 1.4MB)
    [2022-03-18 04:02:16.554 31423M] Imported 18133 queries from the long-term database
    [2022-03-18 04:02:16.555 31423M]  -> Total DNS queries: 18133
    [2022-03-18 04:02:16.555 31423M]  -> Cached DNS queries: 2190
    [2022-03-18 04:02:16.555 31423M]  -> Forwarded DNS queries: 5934
    [2022-03-18 04:02:16.555 31423M]  -> Blocked DNS queries: 71
    [2022-03-18 04:02:16.555 31423M]  -> Unknown DNS queries: 9766
    [2022-03-18 04:02:16.555 31423M]  -> Unique domains: 573
    [2022-03-18 04:02:16.555 31423M]  -> Unique clients: 32
    [2022-03-18 04:02:16.555 31423M]  -> Known forward destinations: 4
    [2022-03-18 04:02:16.555 31423M] Successfully accessed setupVars.conf
    [2022-03-18 04:02:16.557 31423M] listening on 0.0.0.0 port 53
    [2022-03-18 04:02:16.557 31423M] listening on :: port 53
    [2022-03-18 04:02:16.561 31425M] PID of FTL process: 31425
    [2022-03-18 04:02:16.561 31425/T31426] Listening on port 4711 for incoming IPv4 telnet connections
    [2022-03-18 04:02:16.561 31425/T31428] Listening on Unix socket
    [2022-03-18 04:02:16.562 31425M] INFO: FTL is running as user pihole (UID 997)
    [2022-03-18 04:02:16.562 31425M] WARNING in dnsmasq core: no upstream servers configured
    [2022-03-18 04:02:16.562 31425/T31427] Listening on port 4711 for incoming IPv6 telnet connections
    [2022-03-18 04:02:16.584 31425M] Reloading DNS cache
    [2022-03-18 04:02:17.643 31425/T31429] Compiled 3 whitelist and 0 blacklist regex filters for 32 clients in 76.8 msec
    

/etc/pihole/setupVars.conf

    WEBPASSWORD=42069 :P
    ADMIN_EMAIL=
    WEBUIBOXEDLAYOUT=boxed
    WEBTHEME=default-dark
    BLOCKING_ENABLED=true
    PIHOLE_INTERFACE=eth0
    IPV4_ADDRESS=192.168.50.25/24
    IPV6_ADDRESS=
    QUERY_LOGGING=true
    INSTALL_WEB_SERVER=true
    INSTALL_WEB_INTERFACE=true
    LIGHTTPD_ENABLED=true
    CACHE_SIZE=10000
    DNSMASQ_LISTENING=all
    PIHOLE_DNS_1=8.8.8.8
    PIHOLE_DNS_2=8.8.4.4
    PIHOLE_DNS_3=1.1.1.1
    PIHOLE_DNS_4=1.0.0.1
    DNS_FQDN_REQUIRED=true
    DNS_BOGUS_PRIV=true
    DNSSEC=false
    REV_SERVER=false
    DHCP_ACTIVE=false

/etc/pihole/pihole-FTL.conf

    ANALYZE_ONLY_A_AND_AAAA=true
    PRIVACYLEVEL=0",pihole,1647577135.0
7426,comment,1,i147ith,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1647578913.0
7427,comment,1,i147ru9,,"[https://tricorder.pi-hole.net/gxEfglEx/](https://tricorder.pi-hole.net/gxEfglEx/)

&#x200B;

I browsed at the log, and it appears that it's magically working now??",pihole,1647579067.0
7428,comment,1,i1488wo,,"I think it has been working all along:

    *** [ DIAGNOSING ]: Pi-hole log
    -rw-r--r-- 1 pihole pihole 21M Mar 18 04:49 /var/log/pihole.log
     -----head of pihole.log------
      ...
     Mar 17 00:01:17 dnsmasq[1879]: query[A] geomobileservices-pa.googleapis.com from 192.168.50.232
     Mar 17 00:01:17 dnsmasq[1879]: forwarded geomobileservices-pa.googleapis.com to 1.1.1.1
     Mar 17 00:01:17 dnsmasq[1879]: reply geomobileservices-pa.googleapis.com is 172.217.5.10",pihole,1647579362.0
7429,comment,1,i148zo3,,"I dm'd you a gif that shows, in the query log, that it was refusing them all with an unknown status.",pihole,1647579833.0
7430,comment,1,i149syj,,"Which management group is this client assigned to?  Your group 1 has about a dozen clients assigned to it, but no blocking applied to that group.",pihole,1647580370.0
7431,comment,1,i14a478,,"Group 1, I'm assuming you're talking about \`Default\`, has all clients that should be blocking ads, Group 2... Umm ""B\* Boy"" should only have a blank ad list so it's not blocking ads for those clients.",pihole,1647580584.0
7432,post,1,tgsi0g,Running but not blocking ads on Synology,"So I previously had pi-hole set up through Docker on my Synology DS412+, and the pihole had its own IP address (for example, if the Synology were 192.168.1.2, the pihole was 192.168.1.3). I don't recall how I set this up, but when I went to update it recently it got tanked to the point I needed to set it up again. Ever since then, it hasn't been working properly. I wasn't able to find guides to set it up the same way, so this time the pihole is, for example, 192.168.1.2:8000.

Now even though the pihole is up, running, and used as the DNS for my devices, it's not blocking ads. The admin dashboard shows that queries are blocked, the network overview shows that the devices are using pihole, if I disable the pihole container in docker I get DNS errors on the devices, but ad-block tests (like canyoublockit.com) fail.

I'm not sure what I'm doing wrong.",pihole,1647575348.0
7433,comment,1,i142lvd,,">	the pihole is 192.168.1.2:8000

That is an IP address and port. Pi-hole doesn't use that port.

Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1647576098.0
7434,comment,1,i142yvh,,"This is merely an example, not the actual IP and port being used.

Token URL is https://tricorder.pi-hole.net/KP7UAt4T/",pihole,1647576290.0
7435,comment,1,i143lsm,,"From a client where you are seeing ads (and from the command prompt or terminal in that client and not via ssh to the Pi), what is the output of

`nslookup pi.hole`",pihole,1647576644.0
7436,comment,1,i1440ny,,"    Server:  pi.hole
    Address:  192.168.1.25

    Name:    pi.hole
    Address:  192.168.1.25",pihole,1647576873.0
7437,comment,1,i14464v,,"Output of the following from the same device?

`nslookup flurry.com`",pihole,1647576956.0
7438,comment,1,i144s8o,,"    Server: pi.hole
    Address: 192.168.1.25

    Name: flurry.com
    Addresses:  ::
              0.0.0.0",pihole,1647577306.0
7439,comment,1,i145gxy,,"These outputs establish that Pi-hole is the DNS server for that client and is correctly blocking a domain on your gravity list. 

If you see ads on that particular client, something is directing DNS queries to a server other than Pi-hole.  A VPN, browser running secure or private DNS, etc.  Or the ads are served from domains not on your blocklist. 

These tools can help you determine the sources of ads:

https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522",pihole,1647577703.0
7440,comment,1,i146omh,,"What could possibly be directing DNS queries other than the Pi-hole?

There are three devices I'm concerned about using with the Pi-hole (my desktop, my laptop, and my phone). All three are static IP and configured with the Pi-hole as the DNS server, with no secondary DNS. Other devices on the network use my router for DHCP and DNS.

I'm genuinely stumped as to why I still see ads on these devices. Like, banner ads on fandom wiki pages. I have to use uBlock Origin on my desktop and laptop but my phone still sees ads during mobile games and web browsing, when it didn't used to.

Nothing else on the network has changed since I've had to set up pi-hole again.",pihole,1647578404.0
7441,comment,1,i14748h,,Use the tools in the link I provided to see where the ads are coming from and why they aren't blocked.,pihole,1647578665.0
7442,comment,1,i15eyvr,,"Alrighty.

I appreciate your help.",pihole,1647609950.0
7443,comment,1,i15jup7,,"I mean you could also try nuking Pi-Hole and starting fresh again, as I had Pi-Hole and the internet wasn't working when set as the DNS, but after a certain OS reflash and Pi-Hole installation it works fine ever since.",pihole,1647612125.0
7444,post,1,tgqfm4,FireTV pings invalid domain 9600 times over the span of 3 hours,"&#x200B;

https://preview.redd.it/0gdqxis8u1o81.png?width=569&format=png&auto=webp&s=0bc20fe6cd1977aee039985d6e366891beeb1bca",pihole,1647568760.0
7445,comment,2,i13od3y,,"""Continuously scream into the void in the hope that it answers back"" is a fairly usual strategy for services that can't connect to a given domain while being aware that they do in fact have connectivity.",pihole,1647569026.0
7446,comment,1,i13y5ti,,"You _could_ try to use local DNS and map that to a random **local** IP, like 127.0.0.1 or your pihole's IP",pihole,1647573771.0
7447,comment,1,i13yj82,,"Yeah Amazon devices scream when they can’t phone home, pretty normal.",pihole,1647573961.0
7448,comment,2,i13p9kg,,Best part is it does this every time someone opens a app.,pihole,1647569450.0
7449,post,1,tgooyj,"[Cross post from /r/nostupidquestions] If I am using an ad blocker, will browser extensions like 'Tab for a Cause' still get credit?",,pihole,1647563454.0
7450,comment,4,i13fal7,,">	So does the extension still get credit for it?

We have no way of knowing. Ask the people who wrote the extension.",pihole,1647564855.0
7451,comment,1,i1y9v2h,,"I got a response from their admin team! I am going to whitelist what I can within reason to try to help them out. 

Hi there, 
 
Due to this ad blocker, ads will not appear on your screen which means your tabs won't generate any money directly. Though this is the case, continuing to use Tab for a Cause definitely still helps! If you want to make an additional impact, sharing Tab for a Cause with friends is the best way to do so. :) 
 
Best, 
Miranda ",pihole,1648140896.0
7452,comment,3,i13g7eo,,Thank you pihole person! I will further jump down this rabbit hole.,pihole,1647565276.0
7453,post,0,tgn8pi,Pi-hole secondary login,"Roommate wants to be able to access the Pi Hole to make changes, but can never remember the password I have set. Is there a way to make a second login with admin credentials so that both of us can access it?",pihole,1647559225.0
7454,comment,3,i133mz5,,No. Pi-hole has no concept of users/access control.,pihole,1647559635.0
7455,comment,3,i13pwq4,,Time to get a password manager.,pihole,1647569754.0
7456,comment,2,i133ql0,,">	Is there a way to make a second login with admin credentials so that both of us can access it?

No. One password only (or no password) for the Pi-hole web admin GUI.",pihole,1647559678.0
7457,comment,1,i18a3ec,,They have one. That's what confuses me.,pihole,1647653248.0
7458,post,2,tgmkzb,DHCP issues,"Hey! I'm a new pi-hole user.    


I've been having issues with setting up as a DHCP server.  Pi Hole is connected via WIFI with a static adress. It's set up as the DNS for my router, and also as DHCP server. It has the same range of IPs as the router, and the right IP adress for the router.     
It works for a while (around a day), then it stops working.    
The DHCP leases are set for infinity.    

Any help would be appreciated. Tyvm.",pihole,1647557370.0
7459,comment,2,i12zzzo,,">and also as DHCP server. It has the same range of IPs as the router

This seems like some very particular wording on your part. To be entirely clear, is DHCP on the router enabled, or disabled?

Two DHCP servers with competing/overlapping ranges is absolutely no bueno.

If you don't have the ability to disable DHCP on the router, you'll have to limit its scope (though if you can modify the DHCP parameters on the router it's not clear why you're using Pi-hole's DHCP at all). Ensure its only got a single IP in its range, and reserve it for the Pi-hole instance (even if you've already got it static addressed client side).",pihole,1647558062.0
7460,comment,2,i130ryo,,What exactly means „stop working“? Can you ping the pi? Can you access the Pihole Gui? Is it serving DNS? Can you ssh to the Pi? Did you run a diagnosis?,pihole,1647558400.0
7461,comment,2,i131xqd,,">	It has the same range of IPs as the router

After you changed DHCP servers did you renew the DHCP leases on all clients?",pihole,1647558905.0
7462,comment,1,i12z6vy,,I had loads of trouble using my PiHole Zero W over WiFi so much so I went back to using my router as a DHCP server until I bought USB to ethernet adapter and went hard wired since then I’ve had no problems,pihole,1647557717.0
7463,comment,1,i133kae,,">	It works for a while (around a day), then it stops working.

What are the failure indications?  Anything shown in the query log?  Any errors in any of the logs?",pihole,1647559603.0
7464,comment,1,i13c9ou,,Get it off of wifi and hardwire it. UDP broadcasts aren’t meant for wifi.,pihole,1647563468.0
7465,comment,2,i130oh4,,"Heya! Sorry about the particular wording, English isn't my native tongue.   


I disable the server on the router when I turn it on on the PI :)",pihole,1647558358.0
7466,comment,1,i1319zd,,"Can't ping it, GUI isn't available when that happens. Everything on the network stops having internet access.   


I have to change some settings  on my router (Change the DNS to default and make it the DHCP server again) to make internet available again. As soon as I do that, I'm able to ping the pi.  


I'm wondering if it might be a faulty pi unit.",pihole,1647558615.0
7467,comment,1,i1326gd,,Yes,pihole,1647559010.0
7468,comment,1,i130xse,,"I might do that if I can't get it under control, I have a spare ethernet cable sitting on my desk ATM haha",pihole,1647558469.0
7469,comment,1,i134ljl,,Nothing out of the ordinary in the query log. Devices connected to the network lose access to the internet.,pihole,1647560053.0
7470,comment,3,i130zrw,,"Thanks for clarifying. Are you unable to edit the DHCP properties on the router itself? It's not immediately clear *why* you're using Pi-hole's DHCP.

It's my opinion that if the router can handle this task, it should.",pihole,1647558493.0
7471,comment,1,i13273d,,"How do ping the Pi? By IP or name?
Can you ping 8.8.8.8?",pihole,1647559017.0
7472,comment,1,i13ex2r,,Do they lose DNS resolution?  Or are they disconnecting from the router?,pihole,1647564685.0
7473,comment,2,i131l0i,,"Yes I can. I thought that using the pi-hole's DHCP was the way to make sure the devices on the network would use it as the DNS server.

It seems I might be wrong on the part.",pihole,1647558751.0
7474,comment,1,i160nq2,,"2 reasons I have my pi handle dns instead of my router
1) client name resolution in the query log; yes you can enable conditional forwarding etc to help resolve those things, but I find it just works better then the pi has direct access to it
2) local lan name resolution. Again, in theory forwarding can resolve it, but it works better.",pihole,1647618913.0
7475,comment,1,i132gpz,,"I use Terminal on Mac OS.  


ping [192.168.2.30](https://192.168.2.30) (the pi's static address)  


It pings continually so I can see when it starts responding.",pihole,1647559130.0
7476,comment,2,i132h4x,,If your router is capable of handling out local IPs for DNS endpoints via DHCP I see no reason not to use it to do so.,pihole,1647559135.0
7477,comment,1,i17sz6b,,"As many people do I have a local recursive resolver and handle both aspects there.

If I'm going to bother running a local recursive resolver it may as well be able to address my network.",pihole,1647645135.0
7478,comment,0,i14jql0,,"Bad news. I hoped you ping it under its name (and it would respond by using its IP).

Sorry, but I am missing ideas - seems the cause sits deeper that Pihole configuration. 

How is the Pi connected to the network? May this be unreliable?

You can connect a monitor to the Pi and keyboard and watch what it is doing even if network connection lost. You could see in the logs if parts of the software stack are crashing.",pihole,1647587899.0
7479,comment,2,i132srb,,"Alright, I'll leave it like it is right now and see what happens. Everything is fine, Internet and Pi are online, and DHCP is handled by the router.   


Tyvm friend !",pihole,1647559273.0
7480,comment,1,i14gmoa,,"I agree. Let the router take care of DHCP, and let it distribute the pihole as the DNS resolver for the clients on the local network. All routers I have seen also define a DNS resolver for their _own_ use, e.g. to fetch firmware updates etc. I recommend setting that to an external DNS resolver like 1.1.1.1. It's not like the router needs ad blocking.",pihole,1647585358.0
7481,post,1,tgm8ua,Anyone else notice a lot more IOS app ads getting through?,"Probably in the past month, the ads in those real shitty, ad infested games are now starting to breaking through my pihole. Anyone else been noticing this lately? Any more lists I can add/update to keep these new ads out?",pihole,1647556422.0
7482,comment,3,i12ywj1,,"Apps are starting to use DoH or hardcoded IP addresses.

Time to pull out the bigger guns: IP blacklists on the firewall.",pihole,1647557595.0
7483,comment,5,i131s8z,,IOS apps are unlikely to be using DoH. They are more likely to be serving ads from the same domain as the content. Apple News app is a good example.,pihole,1647558840.0
7484,post,1,tglnoq,Workaround for Router showing as a client,"Hey sub,
I run Pi-hole with Unbound (DHCP from Pi-hole), router is TP-Link vr900v (v1), and my main issue is router (192.168.1.1) showing as a significant client in Pi-hole dashboard. I have IPv6 enabled.

My router has option to set custom upstream IPv4 & IPv6 DNS servers. If I don’t set them, router RADVD will eventually advertise itself and provide my ISP DNS servers to clients (bad). I do not have any option to turn off RA.

With Pi-hole configured as my upstream DNS server (both IPv4 and IPv6) everything seems stable and no leaks, although now I have the Router showing as main client and I lose a lot of client statistics and group policies.

I read about a workaround to set the upstream DNS servers to some fake local addresses (e.g., 192.168.200.200), essentially forcing only one functioning DNS server for the clients (the Pi-hole) and enforcing them to use it instead of what the router advertises. So far it seems no DNS leaks occur and all queries are registered properly with the real client names.

Now I’m a networking newbie really, and all my knowledge is just thanks to Pi-hole, so my question is - how viable is this workaround? Are there any caveats to it I should know about? Is there any harm in running my setup this way?

Thanks!",pihole,1647554775.0
7485,comment,2,i17mmg2,,"Yeah that works. Another way:

- set the pi-hole as DHCP server, so it serves the clients its own IPv4 address as the DNS server
- turn off DHCP on the router, so the clients don’t get the router’s IPv4 address anymore
- set the upstream IPv6 DNS server to a non-existent address in the router, so clients get the router’s IPv6 address as DNS server, but the subsequent upstream DNS lookups over IPv6 don’t work anymore

This way your devices will always use the Pi, and both IPv4 and IPv6 still work.",pihole,1647642259.0
7486,comment,1,i19jzrj,,"Thanks!
My setup is exactly as you suggested - Pi-hole is my DHCP server, router DHCP is off.

In WAN interface configuration I have a non-existent upstream IPv6 DNS server (made up link-local address) as well as a a non-existent IPv4 one.

I found that if I don’t set an IPv4 one as well, I’d still get some DNS leaks occasionally. Not really sure how that’s possible though, but simply adding a fake IPv4 DNS as well solves it so meh.

I was just wondering if there are any caveats to this workaround that I’m unaware of?",pihole,1647684760.0
7487,comment,2,i19ldlp,,"DNS leaks are always possible when apps ignore the DNS servers of the OS and use in-app hardcoded DNS servers (normal or DoH/DoT), there’s not a lot you can do about that. Or when websites/apps don’t use DNS and have hardcoded IP addresses.",pihole,1647685945.0
7488,post,2,tgjxx0,How do you deal with constantly needing to whitelist sites?,"I have made 3 separate attempts to put pihole in place at home and each time it breaks things. From mobile games to Hulu ads. I find myself whitelisting like crazy and eventually get sick of it and rip it out and go back to Cloudflare. I personally do not mind it, I know what to look for and how to add sites. But my family is different and the last time my wife thought an app she had was just broken and never mentioned it to me only for me to find out whatever it was doing was being blocked.

So how do I combat this? I am getting ready to redo my network with OPNSense and I want to setup pihole again and I want it to stick this time. Any ideas as to how to keep the family's apps working?",pihole,1647550201.0
7489,comment,6,i12h8i6,,"Sounds like your blocking is too aggressive and excessive. What blocklists are you using?

I barely have to whitelist anything and also don't see any ads.

https://firebog.net/

The ticked blocklists on this site are a good start. They usually don't tend to break things and provide reliable blocking without interfering.

https://discourse.pi-hole.net/t/commonly-whitelisted-domains/212

This is a list of commonly whitelisted domains.",pihole,1647550527.0
7490,comment,6,i12pgps,,[deleted],pihole,1647553709.0
7491,comment,3,i13q99t,,"Different usecases I guess.

I run the default blocklist and have not had to unblock anything.  If you're needing to unblock that much, I'd start asking some questions about what kind of services you're connecting to, and what their privacy / tracking is like as I would assume it's on blocklists for a reason.

:)",pihole,1647569919.0
7492,comment,2,i12hh4g,,Depends on what your goals are. I got tired of messing with some of my users doing dumb things in their phones so I just crated a group in the PiHole that doesn’t really block anything. I don’t get adds on my systems and the backbone network components have less chance of getting pwned. There were some posts around a while ago about some good recommended while list regex to add to help get over the first hump. I block 4.5mil domains on the list + some regex blocking and I don’t have any problems.,pihole,1647550619.0
7493,comment,2,i12m6q8,,"I use the firebog ticked list.

[https://v.firebog.net/hosts/lists.php?type=tick](https://v.firebog.net/hosts/lists.php?type=tick)

I have about a dozen things whitelisted and everything seems to be fine.",pihole,1647552432.0
7494,comment,1,i12gzjv,,How many domains are you blocking? The big number on the top right of the dashboard.,pihole,1647550433.0
7495,comment,1,i12he5s,,I block a ton and then whitelist on an as-needed basis. I don't mind having to figure out how to whitelist something.,pihole,1647550587.0
7496,comment,1,i1astw7,,"I'm having the same issue and it's driving me crazy! I'm using the default block list (I think it's called Gravity, [this](https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts) is the url)

It's breaking so many things - Amazon Music, BBC iPlayer, coach ticket booking workflow, my GP's app. I would've thought a default list wouldn't be too agressive but that doesn't seem to be the case.",pihole,1647709105.0
7497,comment,0,i13c4x5,,"Last time I did it I stuck with just the default list, still too much I guess.",pihole,1647563407.0
7498,comment,2,i12x9q5,,Same here 👍🏻,pihole,1647556901.0
7499,comment,1,i13cbnx,,I am going to give this one a shot next time. Thanks!,pihole,1647563493.0
7500,comment,1,i15rl6t,,"This one is really good, only thing I've had to whitelist is google ads (gotta keep the family happy).",pihole,1647615329.0
7501,comment,1,i1b24dp,,Giving this a go cheers. Wife has had trouble with online bingo etc,pihole,1647713037.0
7502,comment,1,i13c7dn,,"What ever the default is, I never added another list.",pihole,1647563439.0
7503,post,1,tgfyhw,Why has my dashboard stopped working?,As per title a few weeks back the dashboard just gave up the ghost. I've tried updates and deleting the ftl db. None worked. I'm running it on Debian 11.,pihole,1647539481.0
7504,comment,1,i11p7v0,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1647539818.0
7505,comment,1,i11qy1t,,"[https://tricorder.pi-hole.net/PrtL3iHJ/](https://tricorder.pi-hole.net/PrtL3iHJ/)

Thanks for looking at it.",pihole,1647540479.0
7506,comment,3,i11sua9,,"There are no lighttpd errors shown.

I see you have changed the lighttpd port to 81, but you are doing so in the wrong file.  When you change the lighttpd.conf file, any update or repair will overwrite your entry.

    *** [ DIAGNOSING ]: contents of /etc/lighttpd
    ....
    server.port                 = 81

For a permanent solution, see this thread:

https://discourse.pi-hole.net/t/lighttpd-daemon-wont-start/44985/13

What is the complete URL you are using to access your web admin GUI?",pihole,1647541197.0
7507,comment,1,i125ecn,,"I changed the port because I'm using apache on port 80 so can't run both on the same port. I've been doing that for years. I access from local network only and IP address. Pihole was working fine until a few weeks ago but now it still works but the dashboard does not.

Edit: Just to clarify I can access the web interface without issue.",pihole,1647546037.0
7508,comment,1,i1261c3,,">but now it still works but the dashboard does not.  
>  
>Edit: Just to clarify I can access the web interface without issue.

What is the specific problem you are having with the dashboard?",pihole,1647546274.0
7509,comment,1,i12a33f,,"The dashboard shows ""---"" for everything.",pihole,1647547803.0
7510,comment,1,i12dmuc,,Can you provide a screen shot?  And what is the complete URL you are using to access the admin GUI?,pihole,1647549149.0
7511,comment,1,i12gaj9,,"Here you go

https://imgur.com/a/fIwc9Tz",pihole,1647550166.0
7512,comment,1,i12hhqn,,is this some localhost local network setting?,pihole,1647550625.0
7513,post,320,tge7ww,Started using pihole a few months ago as a main DNS at my workplace (around 170 client) I'm really satisfied so far (some info in comments),,pihole,1647534754.0
7514,comment,142,i11e4eh,,Don't forget to double up for redundancy.,pihole,1647535587.0
7515,comment,35,i11dig6,,"The main reason because our older dns server will be shut down soon (has other functions too which needs to be migrated before). I used pihole at home(on a microserver under wmvare and on rpi too) and I like the GUI (our old server was the old way: ssh, edit config, restart bind etc) so it was an easy choice.

I was afraid of the performance, but the only ""issue"" is that it needs a few seconds to draw the graph. Which looks cool, but I dont really use it to anything.

&#x200B;

Our localdns has around 70 hostname/ip, editing is a next generation thing compared to before. Never had problems with updates so far, they installed quickly. I never had to restore a vm backup so far

&#x200B;

Oh and blocking ads is a cool thing too. Only 1 or 2 people complained about it, when I explained that this is an ad they didnt complained anymore (google search first lines)

&#x200B;

I'm planning to install another one as a secondary dns, but if you know similar just works/not dead project I would give that a chance too.",pihole,1647535354.0
7516,comment,79,i11ce84,,"Impressive, and nice to see the system working with a high user count. I hope your company is providing the PiHole devs some considerable financial support as this is being used in an enterprise environment.",pihole,1647534934.0
7517,comment,5,i12kjj0,,Pretty colors,pihole,1647551799.0
7518,comment,3,i13i4qw,,"Awesome. For that many clients, what hardware is this running on?",pihole,1647566165.0
7519,comment,11,i11np86,,"Usually just using the OISD full list https://oisd.nl/downloads I imagine would be fine for your environment, he claims it passes the gf test which for me it does, I use his list on pfblockerng with no whitelisting needed.",pihole,1647539246.0
7520,comment,15,i11kvf0,,"I added 2 additional block lists to mine, that brought my total ad domains list to over 1.9 million, with no ill effects.",pihole,1647538164.0
7521,comment,2,i15a00q,,"Now get unbound setup, you will get better resolution times.",pihole,1647607505.0
7522,comment,4,i12tfwu,,0800 - 1500? That’s my kinda working day. 😉,pihole,1647555312.0
7523,comment,4,i14eeg6,,That is my smartTV alone when I turn it on hahaha,pihole,1647583644.0
7524,comment,5,i12g3ea,,"I asked to do the same thing at work but was rejected as some sites may break. My thoughts were if a PiHole breaks a site, it should be broken.",pihole,1647550090.0
7525,comment,1,i12ashv,,what is the loan on the system during peak hours?,pihole,1647548072.0
7526,comment,-2,i12c641,,"Pretty impressive a raspberry pi handles that much traffic and is only at ~13 percent cpu. I really would like to deploy this at my work, but we have over 10k employees. I suppose we can segment off the traffic into 2,500 * 4 and route the DNS to 4 different pis. Example AD group 1 or vlan 1 to pi #1, etc. I mean you can have the traffic then pass through the pi to opendns which is free, but I'm sure after that much traffic they'd notice and try to charge you - We currently use Cisco Umbrella/OpenDNS and pay alot for it.",pihole,1647548590.0
7527,comment,1,i12ba2m,,I only came here to comment that I see the Black Garden here. Destiny folk will understand.,pihole,1647548256.0
7528,comment,1,i14chxq,,What Raspberry Pi are you using? I am using the RBP Zero Wireless and seem to have a bit of trouble every so often with only a few users.  a restart seems to fix it.,pihole,1647582235.0
7529,comment,1,i15hf9e,,wait until you start adding more lists to block. Those queries will go up a lot more.,pihole,1647611073.0
7530,comment,1,i19sl2k,,Everyone goes home at three in the afternoon!,pihole,1647691573.0
7531,comment,123,i11zwrt,,Don't forget to double up for redundancy.,pihole,1647543906.0
7532,comment,8,i12bm0s,,"What is the best way to do redundancy? I have the separate RPi’s running Pihole. In my router I have them advertise separate DNSs, so every device in the network has two DNS addresses. I ask, because I came across an article here (r/pihole) that mentioned I should add the second Pihole to the Custom Upstream Server under settings. Is this what you mean? Or what do you suggest is the best way to add redundancy?",pihole,1647548380.0
7533,comment,2,i12rptd,,And triple up for extra redundancy,pihole,1647554606.0
7534,comment,1,i12fkl6,,Cake! 🍰,pihole,1647549890.0
7535,comment,31,i12crq9,,"To fix the slow graph loading, limit the display to 1h or something small and set the max db days to 60days to prevent future load issues (default 365 days). You can find more info in the link below.
https://docs.pi-hole.net/ftldns/configfile/

```
# create the config 
nano /etc/pihole/pihole-FTL.conf

# add these two lines 
MAXLOGAGE=1.0
MAXDBDAYS=60

# save and then restart
```",pihole,1647548819.0
7536,comment,8,i120n1h,,Unbound is great if you need an option for DNS. I have two piholes and they both use a local unbound for their upstream. The main benefit is the response time for the cached queries that are used most often.,pihole,1647544195.0
7537,comment,71,i11edw0,,"Well we are non profit, and I think you know how bosses are. I will give it a try, because its really worth it.",pihole,1647535685.0
7538,comment,3,i14n3wn,,"I wonder what the CPU Usage is. I would like to deploy it at my school, but we are with around 1500 people with each 2 devices. So I don't know what kind of hardware I should use.",pihole,1647590745.0
7539,comment,-8,i13slc4,,[deleted],pihole,1647571015.0
7540,comment,1,i17adk4,,">E5-2620 2 core, 4GB ram, latest ubuntu server",pihole,1647637050.0
7541,comment,5,i120ska,,This is the one I use in addition the to default list. Good balance of ad blocking but regular commerce still working without a ton of whitelisting needed.,pihole,1647544256.0
7542,comment,24,i12hz70,,"Website is here...

https://oisd.nl/",pihole,1647550809.0
7543,comment,3,i12halc,,"https://dbl.oisd.nl
https://dbl.oisd.nl/nsfw",pihole,1647550549.0
7544,comment,5,i11x4n5,,Care to share links to those lists?,pihole,1647542831.0
7545,comment,2,i13x38l,,"For me I have over 4.5 million domains on my blocklist. I went for how much I can block rather then how much I have that's not blocked. Yah so far my whitelist is 60 domains but compared to the about it is blocking, it is nothing. I went for all the lists I could, even if they had false positives. I rather have things blocked and have to unblock them or have things unblocked and having to block them. On average it blocks over 40% of all traffic.",pihole,1647573232.0
7546,comment,3,i122hwp,,+1 on the list request.,pihole,1647544916.0
7547,comment,2,i12e3ru,,Y'all got some of them lists?!,pihole,1647549328.0
7548,comment,2,i12ayir,,1.9? Those are rookie numbers… https://imgur.com/a/HRb4MMB,pihole,1647548135.0
7549,comment,3,i13u2yk,,"I have found 2 sites it breaks.

My insurance companies's login Paige

And the shopping results on Google.

Both were about 5 mins of looking into, and I was able to fix it.",pihole,1647571730.0
7550,comment,5,i12gf88,,"I have never seen a broken site, and if you really find one you can always just whitelist it. If it ever needs to be whitelisted",pihole,1647550216.0
7551,comment,0,i161ddv,,I definitely would have said that,pihole,1647619192.0
7552,comment,6,i12ckop,,"I dont really checked it before, here are the vcenter graphs 

[https://i.imgur.com/zlb80ZB.png](https://i.imgur.com/zlb80ZB.png)

E5-2620 2 core, 4GB ram, latest ubuntu server, Feels like an overkill, only the graph needs a few seconds to load during day",pihole,1647548744.0
7553,comment,2,i14nu21,,The time is 9:15 https://i.imgur.com/rIDZhDD.png,pihole,1647591382.0
7554,comment,5,i14b0he,,"Not sure why you are getting down voted.  We have about 4000 users and I have 4 instances running on Digital Ocean servers behind a firewall.  Works great and the load is super low.

I would run it on Pi boxes but you could run them on VMware or externally like me.  The cost to run them at Digital Ocean is probably less than the cost of power to run them on servers here.",pihole,1647581190.0
7555,comment,2,i13ymkm,,And what criteria did you use to separate into 4 and not 2 as is traditionally done?,pihole,1647574008.0
7556,comment,1,i14nzlg,,">E5-2620 2 core, 4GB ram, latest ubuntu server

I use it at home on hp microserver and rpi4 (was rpi3 before). 20 client max, no problem",pihole,1647591517.0
7557,comment,43,i120phn,,And back up the configuration regularily,pihole,1647544222.0
7558,comment,2,i128kiw,,Don't forget to put one in the cloud for redundancy if your company burns down.,pihole,1647547225.0
7559,comment,1,i139rox,,This is the most underrated comment,pihole,1647562346.0
7560,comment,9,i12d9n7,,"This should be good, if pihole is only used for DNS and your router handles dhcp then you are set. Just look into pihole gravity sync to keep the settings synchronized",pihole,1647549009.0
7561,comment,35,i13wr0a,,"I just gave them $25 because I saw this comment. 

https://imgur.com/a/sy7FCwg

Edit: Thanks! Don’t give me awards though, it was time for me to donate again (I do yearly), please donate to aid for Ukraine instead!",pihole,1647573061.0
7562,comment,9,i135dul,,I feel that life. I work in a 2000+ nonprofit and my org is stingy at every turn. I can't imagine a nonprofit paying for a free product.,pihole,1647560394.0
7563,comment,5,i139wv6,,Just tell them it saves X in traffic/time/whatever and costs X/10. Done.,pihole,1647562410.0
7564,comment,2,i14xeqx,,"[https://i.imgur.com/zlb80ZB.png](https://i.imgur.com/zlb80ZB.png)

[https://i.imgur.com/rIDZhDD.png](https://i.imgur.com/rIDZhDD.png)

E5-2620 2 core, 4GB ram",pihole,1647599533.0
7565,comment,4,i13spa6,,Meh. Startups are often less than 50 users.,pihole,1647571067.0
7566,comment,1,i1644ny,,r/Gatekeeping,pihole,1647620258.0
7567,comment,1,i1218oc,,"FYI, OISD has the default list as a part of his list ;-)",pihole,1647544430.0
7568,comment,3,i12od36,,Great resource. Thanks for sharing. Yer not such a slacker,pihole,1647553279.0
7569,comment,1,i15n0nb,,I love this list. A single list that ticks all the boxes pretty much.,pihole,1647613457.0
7570,comment,-3,i12hdv9,,up,pihole,1647550584.0
7571,comment,1,i1riujm,,"Is it possible that you'd share some (if not all plz) of your domains you have block listed? I just got my pihole setup, and I'm looking for this style of setup.",pihole,1648016382.0
7572,comment,-2,i12hfne,,up,pihole,1647550603.0
7573,comment,0,i12hgsv,,up,pihole,1647550615.0
7574,comment,9,i12l3p5,,"Now for fun, go to http://pi.hole/admin/api.php and tell us how many unique domains you've seen so far so we can work out how many orders of magnitude you've overkilled this by.",pihole,1647552014.0
7575,comment,2,i15hkem,,[..numbers?](https://imgur.com/a/TvVW0G9),pihole,1647611136.0
7576,comment,1,i14ao9w,,[deleted],pihole,1647580956.0
7577,comment,5,i12d7ds,,You should try to configure unbound as a DNS resolver in the same host as pinhole. It speeds a lot the responses to DNS queries if you have lots of repeated requests to same host. I am using a similar setup for my home lab with 26 clients.,pihole,1647548985.0
7578,comment,1,i14o0kg,,"Your system când handle so many more clients 😂

Thanks for taking the time to share additional info.",pihole,1647591541.0
7579,comment,2,i158qyu,,"Thank you for the information. Yeah no idea for the downvote, I'm not a anti-cisco, just always looking for a better way(different options) and help improve at my work. This is still a raspberry pihole forum still right? Lol.",pihole,1647606841.0
7580,comment,26,i1295dr,,"And back up th….

We almost got distracted by somebody doin' the 'Repeater.'",pihole,1647547448.0
7581,comment,3,i128otl,,"ah yes, I too am a fan of Juveniles music",pihole,1647547272.0
7582,comment,0,i12dj0l,,Happy cake day!,pihole,1647549109.0
7583,comment,4,i13w64k,,"Si su empresa se quema, el servidor DNS es el menor de los problemas.",pihole,1647572764.0
7584,comment,6,i12de8e,,"That’s correct, router is handling DHCP. Thanks!",pihole,1647549058.0
7585,comment,2,i15mw1i,,I would expect a lot more powerful hardware. Is pihole the only service you run on these servers?,pihole,1647613406.0
7586,comment,1,i12s8a8,,😁,pihole,1647554812.0
7587,comment,1,i4xqn8x,,"Yes, if you have Discord can you add me on it Big Flubba#3494. It is easier to do it on Discord then it is Reddit. 

I am very sorry for not replying earlier. I was meaning to but I was too busy to remember do reply back.",pihole,1650098510.0
7588,comment,1,i13ybhm,,Is there a file or something similar where the blocked domains are saved? Because I want to create my own block list as recorded by Pi-hole or AdGuardHome for a while.,pihole,1647573850.0
7589,comment,1,i16xy7v,,[deleted],pihole,1647632070.0
7590,comment,0,i12oj6t,,"""unique\_domains"":11095   
but it has been a slow day, and it's early still.",pihole,1647553344.0
7591,comment,0,i15hxsq,,Nice 😎,pihole,1647611298.0
7592,comment,1,i15sk2j,,I whitelisted googleadsservices to get them to work.,pihole,1647615720.0
7593,comment,3,i144mbe,,"nope, this is a working environment it would be better to keep the number of fail points to 1 instead of doing a unbound setup.",pihole,1647577212.0
7594,comment,3,i13yfpn,,I disagree. Unbound is not as fast as they would have you believe.,pihole,1647573910.0
7595,comment,1,i12eetp,,Also setup keepalived for VRRP-like failover.  Your windows hosts will thank you during failover!,pihole,1647549444.0
7596,comment,-1,i13x2ki,,That'll happen.,pihole,1647573222.0
7597,comment,2,i128stb,,"Shucks, was hoping you would link a Dropbox file with a note ""back up off site""",pihole,1647547315.0
7598,comment,1,i12epgj,,Every day is cake day ;),pihole,1647549557.0
7599,comment,3,i12dgc3,,"No problem, glad to help",pihole,1647549081.0
7600,comment,1,i179odk,,yes,pihole,1647636767.0
7601,comment,1,i17sq2v,,"The total queries isn't particularly interesting. For all you know that's just majority 750k of the same domain being queried repeatedly.

The interesting bit in context is unique domains.",pihole,1647645015.0
7602,comment,1,i14y33p,,"I'm planning another pihole, I can add it as a secondary dns(Currently I can add up to 4), and I can sync configs with gravity if I'm correct. There are other DNS alternatives, but  first I will play with them on my homeserver. Maybe I will add one of them as a 3rd DNS, as we have 3 ESXI server.",pihole,1647600049.0
7603,post,14,tgdm3c,Help me identify the cause of this: Huge Spike in TP-Link request caused DNS queries to max,,pihole,1647533125.0
7604,comment,6,i118ifn,,I get similar activity when I lose internet connectivity. All my TP Link devices Spaz out and send as manager requests as possible per second.,pihole,1647533452.0
7605,comment,2,i118wcb,,Check to see if it was attempting a firmware update.,pihole,1647533600.0
7606,comment,0,i118bd3,,"Werid thing happened this morning, devices that normally aren't too chatty in the logs began to go parabolic. 10x the normal amount of login. It caused my network to go down (from my udm you can see the experience tanks while this is happening) as pihole reached the 150 max. I understand this can be increased however that's only allowing the problem to continue to exist.

Rebooting my pihole container fixed the issue, but I don't really know why. I'm not sure why tplink did this or if it'll happen again

Thanks for your help.",pihole,1647533377.0
7607,comment,0,i1194et,,"It's very strange, it's like they requested non stop brute force like until it was satisfied. 

What is weird, I noticed last night before I went to bed tp link smart plugs started to do some weird things. My Alexa routines has it turn off a certain device/ back on at a certain time. But it didn't it at a very random time.

Not sure if this is related to what we see but it seems to be some correlation. Usually tp link devices work great for me, but I've never really monitored what it's doing on the back end


How often has this occured for you? For me it's my first time noticing since I've installed pihole (about 2 weeks).

Makes me think maybe any other time I've had an internet outage it could be because of this .. idk",pihole,1647533686.0
7608,comment,1,i11avw2,,"It doesn't look like it was attempting from what I can see.

Just a Ton of calls to various tplink services/ cloud calls. No real rhyme or reason why it jumped but a update does seem feasible as all devices likely may see the firmware available at the same time. Idk",pihole,1647534357.0
7609,comment,2,i11sop1,,"Id check this out. Find it out myself as a Deco Pihole User

https://www.notebookcheck.net/TP-Link-routers-and-Deco-Wi-Fi-mesh-systems-caught-sharing-traffic-with-third-party-vendors.608347.0.html",pihole,1647541139.0
7610,comment,1,i11cdoi,,So I’ve got 37 TP Kasa devices and anytime my internet has a hiccup they all go crazy. PiHole goes crazy every time this happens which unfortunately my internet goes up and down frequently. I’ve noticed Alexa will detect any extended disconnect from the Kasa API and say it was offline and mine also has trouble fixing itself same day.,pihole,1647534928.0
7611,comment,2,i11b29x,,Only reason I say that is because I got some updates this morning.,pihole,1647534424.0
7612,comment,1,i11i35h,,"For me, it wasn't a total outage. Some things worked but a lot didn't. Definitely being bottlenecked.

My question is did .. are the requests the cause of the internet issues or is the internet issues the cause of the parabolic amount of request.

I will say hs200 devices don't even show I'm my query view under normal circumstances. It may have very well been an issue with my ISP or router... But what's crazy is they point to pihole for DNS, so it kinda points back to pinole DNS service.

Also when I rebooted the pihole server everything went back to normal.",pihole,1647537102.0
7613,comment,1,i11iu9u,,"Currently only have 11 TP-Link devices. Most have been converted to a ZigBee plug or light. Just amazing to me all 11 we're 10x more request than normal.

I'm thinking I should be able to reproduce. Maybe unplug my ISP modem to see if tplink goes nuts.. idk",pihole,1647537392.0
7614,comment,0,i11mjl8,,"I hear ya. I don’t think it’s a bottle neck at least with mine. I have piHole on a Rpi 4/4gb and haven’t had any issues ever and that’s with over 110 devices. My internet drops often but briefly and your pics match exactly what I see on my end. Even my Unifi AVg drops but I take that with a grain of salt. Pihole does have built in limiters to prevent crashing and slow downs from too many requests.  The alerts tab tells you what rule was active and it just drops those requests. I’ve had close to 80k/min reqs hitting it and being dropped and the pi fan didn’t even kick on lol 

Unplugging your modem will definitely produce similar results faster. Smart devices just seem to act on their own sometimes. Often they will reconnect right back up and sometimes it takes 5+ minutes. My google hubs will notice no internet before any other device. My echo show/dots just get the memo randomly. 

FWIW, the Kasa wall switches, outlets, plugs, and power strips have been the most reliable devices I’ve ever owned.",pihole,1647538806.0
7615,post,1,tgd3fj,Dual Pihole server control panel,"I have 2 pihole servers and would like to control them,  ad lists and log displays through a single web interface.  Does anyone know how I can do this?",pihole,1647531741.0
7616,comment,4,i11cmgg,,"If you have any clients running IOS, Pi-hole Remote is quite good. Shows up to 4 Pi-holes.",pihole,1647535019.0
7617,comment,2,i119lzd,,In my experience that's not possible. Now you could make a sync between the two config files so that they match (rsync?). And then setup a loadbalancer in front to distribute requests between both dns servers.,pihole,1647533873.0
7618,comment,1,i11y5su,,"Depends on your actual task goals. Pi-Hole Remote is great for remote access to logs, adding a site to a whitelist or blocklist. It does have its limits. There is also a manual sync selection too & has a very handy Mac OS version running widgets: [https://apps.apple.com/us/app/pi-hole-remote/id1515445551](https://apps.apple.com/us/app/pi-hole-remote/id1515445551)

However I have been using this tool to sync my pi-holes [https://github.com/vmstan/gravity-sync](https://github.com/vmstan/gravity-sync) automatically.",pihole,1647543228.0
7619,comment,1,i125883,,"I went with this approach and works great - 

https://www.google.com/url?sa=t&source=web&rct=j&url=https://www.reddit.com/r/pihole/comments/d5056q/tutorial_v2_how_to_run_2_pihole_servers_in_ha/&ved=2ahUKEwijgtHH8s32AhVKTWwGHY1NCTgQrAIoAHoECDgQAQ&usg=AOvVaw0nEuaTYh7YUQ0c2BhbLxgO",pihole,1647545973.0
7620,comment,1,i12aq8h,,"Gravity sync looks like the ticket but when I tried to install it,  its asking me for the other pihole ip address and when supplied seems to fail and I have no idea why.  Still reading the docs rn.",pihole,1647548048.0
7621,comment,1,i12buhu,,"I may try this,  thanks a bunch.",pihole,1647548469.0
7622,comment,1,i13evsh,,Did you run the pre-flight script on the primary?,pihole,1647564668.0
7623,comment,1,i13g02n,,yes and that seemed to work fine.  The script on the secondary is the one which bombs out after it asks for the ip.  Any idea what its doing on that step?,pihole,1647565180.0
7624,comment,1,i13h1qk,,"I am assuming they are both hard-wired and on the same subnet/vlan.

Is there a specific error it is reporting back? Are your instances native or in Docker?

What version of Raspbean are you running?",pihole,1647565662.0
7625,comment,1,i13jqg5,,"Both machines are Ubuntu virtual machines.  
Instances are native. No docker.    
No Error message,  It says""✗ Testing network connection to <ip of remote host>"" and then I'm back at the shell prompt.",pihole,1647566902.0
7626,comment,1,i1409fu,,"Does Ubuntu have an active firewall running that may prevent the connection from the secondary? Can you issue commands to check to see if the UFW is active/inactive? If active, can you disable it temporarily and test again?

(Not an Ubuntu guys but I found this): [https://linuxconfig.org/how-to-enable-disable-firewall-on-ubuntu-20-04-lts-focal-fossa-linux](https://linuxconfig.org/how-to-enable-disable-firewall-on-ubuntu-20-04-lts-focal-fossa-linux)

[https://www.configserverfirewall.com/ufw-ubuntu-firewall/ubuntu-check-firewall-status-ufw/](https://www.configserverfirewall.com/ufw-ubuntu-firewall/ubuntu-check-firewall-status-ufw/)",pihole,1647574849.0
7627,comment,1,i14hinn,,"sudo ufw status
Status: inactive",pihole,1647586067.0
7628,comment,1,i16l5a2,,"I'm sure you may have read them but has any of these steps made a difference? (Manual SSH Configuration)

[https://github.com/vmstan/gravity-sync/wiki/Under-The-Covers](https://github.com/vmstan/gravity-sync/wiki/Under-The-Covers)

Also, have you implemented passwordless sudo, as defined in the system requirements, for the user accounts on both the local and remote systems.

[https://linuxize.com/post/how-to-run-sudo-command-without-password/](https://linuxize.com/post/how-to-run-sudo-command-without-password/)",pihole,1647626879.0
7629,post,1,tgcks9,Pi Hole vs. Android App Ads,How well is the Pi Hole against ads on Apps for Android Phones? And I mean also the ones that play a Video on your screen and force you to watch the whole thing. Does the Pi Hole skip the whole process?,pihole,1647530342.0
7630,comment,3,i111jl3,,"It depends how the app was written. There are some that just show a black screen for 30secinds. The add is blocked, but the mechanism that displays it is embedded in the app and still running. Each is different.",pihole,1647530743.0
7631,comment,1,i119b43,,All ads are blocked on VooDoo games (the spammiest of the spammers).,pihole,1647533758.0
7632,comment,1,i113i6o,,"Could the Pi Hole in theory break an app,  because it can't play the add, so you won't be able to continue?",pihole,1647531516.0
7633,comment,2,i113ohe,,"If the programmer made a required positive feedback loop in the application, yes.",pihole,1647531585.0
7634,comment,1,i114qgu,,"Okay, thank you.

Edit: Do you know examples of some apps that don't work well with a pi hole?",pihole,1647531996.0
7635,comment,1,i1164im,,Nope. I am not a regular android user. I run BlueStacks,pihole,1647532530.0
7636,comment,1,i118kyn,,"JustWatch depending on how strict you are, Twitter and Facebook",pihole,1647533479.0
7637,post,6,tgbakh,pihole vpn setup,"I'm a bit confused by the whole vpn setup for wireguard, would really appreciate some clarification on this..

>[Link](https://docs.pi-hole.net/guides/vpn/wireguard/server/)  
>  
>\[Interface\]  
>  
>Address = 10.100.0.1/24, fd08:4711::1/64  
>  
>ListenPort = 47111 

While installing the server, in the ""address"" field, do I put my own router address, my pihole local ipv4 address or do I leave it as it is? And next to the comma, is that the ipv6?

And later on in the ""add client"" section of the documentation for the wireguard setup:

>[Link](https://docs.pi-hole.net/guides/vpn/wireguard/client/)  
>  
>echo ""\[Peer\]"" >> /etc/wireguard/wg0.conf  
>  
>echo ""PublicKey = $(cat ""${name}.pub"")"" >> /etc/wireguard/wg0.conf  
>  
>echo ""PresharedKey = $(cat ""${name}.psk"")"" >> /etc/wireguard/wg0.conf  
>  
>echo ""AllowedIPs = [10.100.0.2/32](https://10.100.0.2/32), fd08:4711::2/128"" >> /etc/wireguard/wg0.conf

In the ""AllowedIPs"" field, do I put the IP for every client that I want to use? What if I wanted to give it to some of my friends but I didn't know their IP address (or didn't want to ask them for it), can I leave AllowedIPs blank or remove it entirely to allow every IP to connect?",pihole,1647526716.0
7638,comment,3,i10ylx2,,"The Allowed IPs are the addresses that will be tunneled through the VPN. In this example, it's only allowing the address [10.100.0.2](https://10.100.0.2) to be tunneled, which is likely the internal IP of your Pihole. It wouldn't matter what your friend's external or internal IPs are (so as long as they don't overlap the [10.100.0.0](https://10.100.0.0)/24 subnet).

This configuration is known as a split tunnel. Only IP destinations matching the AllowedIPs directive will go over the VPN while everything else will go through your normal interface.",pihole,1647529561.0
7639,comment,1,i1100at,,"Sorry if this is a bit repetitive but I'm somewhat confused again.


>This configuration is known as a split tunnel. Only IP destinations matching the AllowedIPs directive will go over the VPN while everything else will go through your normal interface.

Does this mean I'll have to set up the allowedIPs to match exactly what my friend's IP is? The first and last paragraph of your comments seems a bit contradictory to me..",pihole,1647530132.0
7640,comment,2,i110nx4,,"No. It only needs to match what devices you want them to have access to (such as Pihole) on your secured network.

Think of it from their computer's perspective: They have devices on their internal network and there's stuff out on the internet. What this directive tells Wireguard is what traffic should be selected to go over the VPN tunnel. In this example, only the IP address [10.100.0.2](https://10.100.0.2) will be allowed to go over the tunnel. All traffic to other IP addresses will not use the tunnel.",pihole,1647530395.0
7641,comment,1,i111awj,,ohhhh so I can't actually use this wireguard setup (or at least the one provided on their documentations) as a network wide VPN that routes traffic through the pi? Its just for connecting to the pihole admin interface?,pihole,1647530648.0
7642,comment,2,i112wkk,,"Yes, you can use this as a VPN for pretty much anything. You can edit the allowedIPs on different profiles to allow access to other devices on your network as well. Maybe you want to remote desktop to your home computer, just put its IP address in the AllowedIPs and it will allow it through. Just as long as your VPN device can ""talk"" to it. Some configurations like this may require more advanced configuration such as adding iptables rules for different situations, but it's fully customizable.",pihole,1647531278.0
7643,comment,1,i113eze,,"Great, thanks a lot man. Appreciate your info on this.",pihole,1647531481.0
7644,comment,2,i113p8o,,You're welcome!,pihole,1647531593.0
7645,post,0,tgawo9,Pi Hole randomly crashes,"Hello,

I have 2 pi hole on my network, one of them keeps crashing after a couple of days. Both are installed on raspberry pi. I'm suspecting an hardware (sd card?) issue, but it's hard to tell. If I reboot or restart FTL, it works again... until it crashes again later.
Any idea what could be wrong? My other pi hole is working like a charm.

Here is the debug token: https://tricorder.pi-hole.net/UFjzSF2s/

Thanks!",pihole,1647525616.0
7646,post,0,tg9ehf,Again...Coinbase is blocked by PiHole...for a reason and I hope you have workaround.,"Hi guys! I diggin into pihole and it's incredible. It's running on my Synology in a Docker Container. 
I got a pretty extensive blocklist from DeathbyBandAid. I come across more and more apps which are blocked through this but this is solved pretty quickly (checking the query log and whitelist most services) 

Now I didn't reached Coinbase yesterday. I added the known domains to the whitelist but still not reachable. I checked the query log and found out, that these services are required to access Coinbase:

clients3.google.com
firebaselogging-pa.googleapis.com

I whitelisted the two yesterday but realized that the blocked queries declined. After blocking these services my blocked queries are going up again. 

Does anyone have an idea or solution how I can access Coinbase without permitting these services? 

Thanks for your help",pihole,1647521108.0
7647,comment,3,i10ha82,,Sounds like coinbase uses those urls for resolution. You could setup a group and whitelist them for only the devices you want to access coinbase.,pihole,1647521909.0
7648,comment,0,i10hfam,,Ahh perfect! Didn't knew this was possible. Thank you!,pihole,1647521980.0
7649,comment,1,i10w1xx,,Your welcome,pihole,1647528525.0
7650,post,1,tg6pwa,Unable to start Caddy because port 443 is occupied by lighttpd,"I have two Raspberry Pi devices running pihole. One of the two devices has lighttpd process is running on port 443:

```
pi@raspberrypi:~ $ sudo netstat -tulpn | grep 443
tcp        0      0 0.0.0.0:443             0.0.0.0:*               LISTEN      13005/lighttpd
tcp6       0      0 :::443                  :::*                    LISTEN      13005/lighttpd
```

I am a bit unclear on why the other Raspberry Pi device does not show the same behavior:

```
pi@raspberrypi:~ $ sudo netstat -tulpn | grep 443
tcp        0      0 100.78.96.64:54255      0.0.0.0:*               LISTEN      24443/tailscaled
tcp6       0      0 fd7a:115c:a1e0:ab:54255 :::*                    LISTEN      24443/tailscaled
tcp6       0      0 :::443                  :::*                    LISTEN      19140/caddy
udp        0      0 0.0.0.0:41641           0.0.0.0:*                           24443/tailscaled
udp6       0      0 :::41641                :::*                                24443/tailscaled
```

Does anyone have any insights on why there's a difference? I am hoping to run Caddy on the first Raspberry Pi, which requires port 443 to be available. 

I don't remember changing anything about lighttpd on the second Raspberry Pi. The only change that I made on both Raspberry Pi is the `server.port` change from 80 to 1080 as outlined here:

https://docs.pi-hole.net/guides/webserver/caddy/

Thanks for taking a look.",pihole,1647511340.0
7651,comment,1,i10d07d,,">	I am a bit unclear on why the other Raspberry Pi device does not show the same behavior:

The default behavior for lighttpd is not occupying port 443.  If your install is using port 443, this is a local change. Have you ever set up an encrypted connection to the web admin GUI on the first Pi?

https://docs.pi-hole.net/main/prerequisites/#ports",pihole,1647519623.0
7652,comment,1,i10e44q,,"Thanks for the link to that page. I remember making some modifications when Tailscale announced support for LetsEncrypt certificates:

https://tailscale.com/blog/tls-certs/

That's likely how lighttpd is occupying 443 now. Unfortunately, I don't remember the changes I made back then.

Is there an easy way to reset lighttpd to default configuration/ports, besides reinstalling pihole?",pihole,1647520238.0
7653,comment,1,i10my6r,,"As a quick followup, I deleted the `external.conf` file and restarted lighttpd using `systemctl restart lighttpd`. lighttpd now runs on 1080 as expected, and 443 is now used by Caddy. I am all set now. cc u/jfb-pihole",pihole,1647524633.0
7654,post,1,tg6d5z,Local list? doesnt work in www/html or file:///,"Hello!

Is there an elegant way to include a locally stored blocklist? Not via /var/www/html? My PiHole cannot access the /www/html-folder variant to load my local list. Or am I using the wrong directory? Wrong permissions?

I have a Raspi and PiHole + unbound running in Docker.

file:///localfolder/list.txt doesn't seem to work.",pihole,1647509871.0
7655,comment,2,i0zzhpv,,"Have you tried command line? 

cat list.txt >> /path/to/files/blocklist",pihole,1647510223.0
7656,comment,2,i101ea2,,So you can not access your Pihole‘s web Gui? Why? If you are uncomfortable with the commandline I would try to get the Gui to work. There you find a menu item to add domains to your blacklist. You could also add an URL containing a list if such URLs to your gravity list.,pihole,1647511786.0
7657,comment,1,i10062a,,"No. I haven't. I just got ""cat var/www/html/myblocklist.txt"" in terminal. All fine. that cat-command works.I don't really want to append anything. I just want to be able to include the list in piHole like all block/ads lists. Or did I get something wrong with your cat? I'm a Linux newbie.",pihole,1647510790.0
7658,comment,0,i10271x,,"GUI is running. ive tried to add the list via gui. ... 

last try: now pihole finds the list, i think. But gravity adds no entries. Maybe all urls are in other block-lists. I ll check this. thanx!",pihole,1647512404.0
7659,comment,1,i100cxx,,"No. Its not a valid command.

Fire up your own webbserver? A local ip should be fine to use..",pihole,1647510951.0
7660,comment,1,i102dbd,,You can query the database for an URL. The response tells you if it‘s on the compund list and which sources provided it.,pihole,1647512538.0
7661,comment,1,i101qsm,,"Okay. I tried once moore. I have changed the ip in Pihole for the list again: http://192.x.x.x/bigcombo.txt

And now it seems to find the list.

However, it doesn't add anything? Because all addresses are already in the database?

That would be nice. Am I right?

gravity says:

\[i\] Target: http://192.x.x.x/bigcombo.txt

\[✓\] Status: Retrieval successful

\[i\] Analyzed 0 domains",pihole,1647512056.0
7662,comment,2,i103h2j,,"Okay. Thank you. I think I managed to get pihole to find the local list in var/www/html. However, it is probably formatted incorrectly (former addguard list). But the problem is solved thanks to you guys! THANX!",pihole,1647513377.0
7663,comment,1,i10274e,,"If your domains are already mentioned in other lists they are not added again.

Or your file isn't in the correct format.",pihole,1647512405.0
7664,comment,1,i102bc0,,okay! Thanx a lot! I’ll check the format etc. Thanx!,pihole,1647512495.0
7665,comment,1,i102loj,,"Sorry. just one more question... 

Its an list i used in adguard. The urls are like

||youramigo.com\^

okay for PiHole or i’ve to change it?",pihole,1647512717.0
7666,comment,1,i10ccwt,,">	If your domains are already mentioned in other lists they are not added again.

This is not correct. All adlists are imported entirely, including any duplicates from other lists. This allows individual lists to be applied to management groups.",pihole,1647519252.0
7667,comment,2,i102v21,,"No, that a different format.

You should check out the other lists you have and how they are structured.",pihole,1647512920.0
7668,comment,1,i10359q,,THANKS once again! Have a nice day!,pihole,1647513136.0
7669,comment,1,i103hne,,"You too, and good luck.",pihole,1647513388.0
7670,post,3,tg3m37,Pihole + Unbound w Docker Compose,"A noob here with linux/pihole/unbound. I am trying to setup  Pihole & Unbound on a Ubuntu Desktop.

1. I have setup Portainer
2. I have setup Pihole using Portainer stack and routed to Pihole for DNS in my router. This setup is tested to be working as expected.
3. I would like to update docker compose in Portainer stack to add unbound. I have added a new Service for unbound in the same compose file and updated the upstream dns server in pihole to point to <Docker\_Host\_IP>#5335. After this change, i am unable to connect to the internet from the Docker host.

I have tried to google and found some examples of a bridge but I couldn't find an example that explains the setup. Can I get some help in reviewing the setup below and explaining what part I am missing to complete this?

Below is my compose file:

    version: ""3""
    
    # More info at https://github.com/pi-hole/docker-pi-hole/ and https://docs.pi-hole.net/
    services:
      pihole:
        container_name: pihole
        image: pihole/pihole:latest
        # For DHCP it is recommended to remove these ports and instead add: network_mode: ""host""
        ports:
          - ""53:53/tcp""
          - ""53:53/udp""
          - ""67:67/udp"" # Only required if you are using Pi-hole as your DHCP server
          - ""9554:80/tcp""
        environment:
          TZ: ${PIHOLE_TIMEZONE}
          WEBPASSWORD: ${PIHOLE_PASSWORD}
    
        # Volumes store your data between container upgrades
        volumes:
          - ""/home/user1/docker/pihole/etc-pihole:/etc/pihole""
          - ""/home/user1/docker/pihole/etc-dnsmasq.d:/etc/dnsmasq.d""    
        #   https://github.com/pi-hole/docker-pi-hole#note-on-capabilities
        cap_add:
          - NET_ADMIN # Recommended but not required (DHCP needs NET_ADMIN)
        restart: unless-stopped
      unbound:
        container_name: unbound
        image: mvance/unbound:latest
        restart: unless-stopped
        ports:
          - ""5335:53/tcp""
          - ""5335:53/udp""",pihole,1647497963.0
7671,comment,1,i10tacp,,"So if they are the same compose file that means they are on the same bridged network so that means they connect via the INTERNAL port so that means you have a conflict of port `53`.

So change:
```
- ""5335:53/tcp""
- ""5335:53/udp""
to
- ""5335:5335/tcp""
- ""5335:5335/udp""
```",pihole,1647527377.0
7672,comment,2,i14dfhg,,I made the suggested change and updated the stack. I am still having the same issue. Pihole logs show the updated redirection to port 5335 but the computer still cannot connect to anything on the internet.,pihole,1647582912.0
7673,post,2,tg1jj9,I've knocked most of my devices off the wifi,"A few days ago I installed Ubuntu on a secondary machine with the intent of creating a network wide adblocker and deployed Pi-hole successfully to the router and its worked since until now.
I had to restart the machine it was running on and since it came back online no device gotten passed connected, no internet. 
I'm not super familiar with the environment I'm doing this in and any help would be appreciated. Sent from my yard where my phone gets service",pihole,1647490056.0
7674,comment,3,i0z8p8o,,"Did you make sure your pie hole was a static IP? It may have got a new network address, so all your DNS queries are being sent to a non-existent IP

Edit for dictation errors",pihole,1647490161.0
7675,comment,2,i0zi60p,,"Forget all the devices, focus on the Ubuntu running Pi-Hole:

* can it ping `google.com`?
* does it have static ip? If the IP changed AFTER Pi-Hole was running, it was easy to setup everything again coz Pi-Hole got lost even after setting the IP back. I set the whole VM, static IP and then Pi-Hole install
* what your `/etc/resolvconf/` looks like?? Point it to 1.1.1.1 and see if if pings outside
* network setup on Ubuntu has changed, now is a different file managing it which is nuts

Long story short, make Pi-Hole VM to have internet access, then you move to the clients.

Personally, if I spend 1 minute figuring out what is wrong (this hasn't happened in ages), I reinstall everything.

I have a Ansible playbook that setup Pi-Hole + Unbound server within 30 seconds so why I don't bother reinstalling everything.",pihole,1647495934.0
7676,comment,1,i0zmkaz,,Just to be sure: since a DNS server is unlikely to knock clients off the Wifi and Internet: from a client: can you ping the router? Can you ping 8.8.8.8? If that works (but ping google.com does not) DNS is a good idea where to search the problem.,pihole,1647499213.0
7677,comment,1,i0z9ulr,,"You were correct, it had forgotten which IP address to use as a DNS. I've corrected and applied but I haven't seen changes yet",pihole,1647490777.0
7678,comment,1,i0z9y2s,,"It would take logging into the machine, finding the new IP, logging into router and entering that IP as DNS server",pihole,1647490828.0
7679,comment,1,i0zmtg4,,"Cannot ping google.com
Set the static IP accordingly 

I think a clean reinstall is definitely the right move but I'm not familiar with how to do so. Is there an uninstall command to run or do I just rerun the installer",pihole,1647499415.0
7680,comment,1,i0zablb,,"So the router ""forgot"" the IP of your machine? I would set your router to use the Mac address of that machine (pihole) to a static IP. So it doesn't happen again.",pihole,1647491031.0
7681,comment,2,i0zncmm,,Just rerun the installer should do it.,pihole,1647499829.0
7682,comment,1,i0zc76k,,The machine itself with the Ubuntu install didn't remember the manual DNS and switched back to automatic. It has been returned to manual and the IP reentered. Traffic still hasn't returned,pihole,1647492085.0
7683,comment,1,i111z9f,,Thank you!,pihole,1647530915.0
7684,post,1,tfyazu,Why can Ethernet not work?,"[SOLVED]

Whenever I start the Pi it goes to my network connection but doesn't connect to Ethernet.

Oh also, now it only works if It's connected to my 2.4GHZ connection. Tried changing to 5 so It would be faster

(Raspberry Pi Zero 2 W)

EDIT: I think I figured it out, thanks for the help everyone!",pihole,1647479549.0
7685,comment,5,i0yo3s2,,"It would be helpful if you told us what hardware you have.  Not all Pi's support 5GHz.

Also, you say ""connect to Ethernet"" as if the RPI is wired, yet you are talking about a WiFi connection of 2.4 and 5GHz.

In short...need more info to help.",pihole,1647480319.0
7686,comment,3,i0yotg5,,"How do you know it's not connecting to Eth0? Do you not have an IP address? How are you determining the IP of the wired interface?

All of my Pis are wire-only and wifi / BT stacks are disabled on boot. 

I agree, need more info.",pihole,1647480643.0
7687,comment,1,i0yp2nx,,on LTT it said I have to change the default to eth0 or something? how do I do that?,pihole,1647480757.0
7688,comment,0,i0you32,,"I have a raspberry pi zero 2 w, why doesn't the ethernet work when plugged in?",pihole,1647480651.0
7689,comment,2,i0yp6ws,,because it is orange on router,pihole,1647480810.0
7690,comment,6,i0yvaif,,"Cause like, reasons. 

Seriously. You'll need to give more details. How do you know it's not working? What have you done so far? Has it ever worked? What hardware are you using?",pihole,1647483563.0
7691,comment,3,i0z2jpl,,">	I have a raspberry pi zero 2 w, why doesn’t the ethernet work when plugged in?

That device doesn't have an ethernet port.",pihole,1647487034.0
7692,comment,3,i0ysk59,,"Do you use a DHCP service on the modem/router? Does it have a GUI page you can see to allow access to the modem/router page? Sometimes the ISP will block access to those spare ports.

What model router is it?",pihole,1647482321.0
7693,comment,0,i0z4475,,"I figured it out, thanks",pihole,1647487812.0
7694,comment,1,i0z49x8,,"Lol. I bought an adapter Ethernet to micro usb before this. I ended up fixing it tho, Ethernet now works!",pihole,1647487892.0
7695,comment,2,i0z41qy,,I figured everything out thanks tho,pihole,1647487778.0
7696,comment,3,i0z8iz4,,What did you do to fix it?,pihole,1647490067.0
7697,comment,1,i0zb918,,"I edited a file (forgot which it was) that enabled eth0 as default and I un commented it (was not config.txt), then I restarted system, did an ip test, found which ip was the new Ethernet one, and used that as the DNS server along with reserving it.",pihole,1647491549.0
7698,post,1,tfw582,Pihole Stops Responding to Queries,"I have been running Pihole successfully in a CentOS VM for several years now, but in the last month I have repeatedly (about once a week) had an issue where it will stop responding to queries and essentially hang. The base OS is completely responsive, but the web interface doesn't work properly and no queries are answered. When I check pihole.log, it shows the last query that it returned and then nothing. The latest log entry in pihole-FTL.log is something like this:

```[2022-03-16 18:00:00.334 6051/T6055] Notice: Database size is 1999.99 MB, deleted 1478 rows```

The only way to get it to respond to queries again is to restart the pihole-FTL service. The stop service portion of that doesn't appear to work correctly. This is the before and after of the service status:

    systemctl status pihole-FTL
    ● pihole-FTL.service - LSB: pihole-FTL daemon
       Loaded: loaded (/etc/rc.d/init.d/pihole-FTL; bad; vendor preset: disabled)
       Active: active (exited) since Wed 2022-03-09 17:35:44 CST; 6 days ago
         Docs: man:systemd-sysv-generator(8)
      Process: 6024 ExecStop=/etc/rc.d/init.d/pihole-FTL stop (code=exited, status=0/SUCCESS)
      Process: 6034 ExecStart=/etc/rc.d/init.d/pihole-FTL start (code=exited, status=0/SUCCESS)
    
    systemctl status pihole-FTL
    ● pihole-FTL.service - LSB: pihole-FTL daemon
       Loaded: loaded (/etc/rc.d/init.d/pihole-FTL; bad; vendor preset: disabled)
       Active: active (exited) since Wed 2022-03-16 18:12:48 CDT; 4s ago
         Docs: man:systemd-sysv-generator(8)
      Process: 15333 ExecStop=/etc/rc.d/init.d/pihole-FTL stop (code=exited, status=1/FAILURE)
      Process: 15372 ExecStart=/etc/rc.d/init.d/pihole-FTL
    
    Mar 16 18:12:01 pihole systemd[1]: Stopped LSB: pihole-FTL daemon.
    Mar 16 18:12:01 pihole systemd[1]: Unit pihole-FTL.service entered failed state.
    Mar 16 18:12:01 pihole systemd[1]: pihole-FTL.service failed.
    Mar 16 18:12:01 pihole systemd[1]: Starting LSB: pihole-FTL daemon...
    Mar 16 18:12:06 pihole pihole-FTL[15348]: .....
    Mar 16 18:12:06 pihole pihole-FTL[15348]: Not stopped; may still be shutting down or shutdown may have failed, killing now
    Mar 16 18:12:06 pihole systemd[1]: pihole-FTL.service: control process exited, code=exited status=1
    Mar 16 18:12:06 pihole systemd[1]: Failed to start LSB: pihole-FTL daemon.
    Mar 16 18:12:06 pihole systemd[1]: Unit pihole-FTL.service entered failed state.
    Mar 16 18:12:06 pihole systemd[1]: pihole-FTL.service failed.

```pihole -up``` reports that everything is up to date, though the admin webpage shows:

```Pi-hole v5.8.1 · Update available! FTL v5.14 Web Interface v5.10.1 · Update available!```

Here is my debug link: https://tricorder.pi-hole.net/j6KbP5Rm/

My VM has plenty of disk space available and isn't used for anything other than pihole. Any ideas what could be happening to cause it to stop answering queries about once a week?",pihole,1647472986.0
7699,post,1,tfteq8,Weird Client Hostnames on Pihole hosted on Vultr,"Hello. I have PiHole set up on Vultr cloud [https://www.vultr.com/](https://www.vultr.com/)

Today I noticed some strange client hostnames. for example:

&#x200B;

https://preview.redd.it/vk0l4157atn81.png?width=988&format=png&auto=webp&s=30141d6b26c100a845bb7864413e64acf0485ed8

&#x200B;

https://preview.redd.it/cjarvkkiatn81.png?width=558&format=png&auto=webp&s=700e6d6bd6c03e4183de30feb283753668f9449f

&#x200B;

https://preview.redd.it/xxtyllgpatn81.png?width=1000&format=png&auto=webp&s=44dcb7b2d56588becc39ecf52ffa6fc31211b3e5

I definitely know that those aren't from my network. Also as I have it hosted in cloud I am connecting it with my public IP, so there must be only one client (my public ip).

Does anyone have an idea what those are? I think they are related to Vultr. Should i be scared about privacy? Or should I ask Vultr support?",pihole,1647465444.0
7700,comment,5,i0yio8e,,"You're running an open resolver, aren't you?",pihole,1647477897.0
7701,comment,1,i0xv25x,,"Censys Scanner is a search engine scanner that scans IP blocks collecting data. 

Google is… Google. 

Looks to mostly be random IP scanners and some other shady third parties. Nothing your host would be doing themselves.",pihole,1647467761.0
7702,comment,1,i17si6s,,">open resolver

Yep. It was. Now it's not",pihole,1647644913.0
7703,post,1,tfta7e,"Can't add UFW rules, can someone help me with these outputs?","Hello guys

I want to add a rule, that only from my notebook I can access SSH (local IP [192.168.0.103](https://192.168.0.103), only ipv4). SSH is on port 2121. I tried it with this command:

    sudo ufw allow from 192.168.0.103 port 2121

I get this output:

    WARN: initcaps
    [Errno 2] iptables v1.8.7 (nf_tables): Could not fetch rule set generation id: Invalid argument
    
    
    Rules updated

I also tried to reinstall `netfilter-persistent` and `iptables-persistent` because I read that this can help. Installing `iptables-persistent`, this was an output:

    # Warning: iptables-legacy tables present, use iptables-legacy to see them
    iptables v1.8.7 (nf_tables): Could not fetch rule set generation id: Invalid argument
    
    IPv4: Unable to save (table filter isn't available or module not loadable)
    # Warning: ip6tables-legacy tables present, use ip6tables-legacy to see them

Was does this mean for me?

Also the file `/etc/iptables/rules.v4` doesn't exists.

Pi: OrangePi Zero 2 with Armbian Bullseye (Legacy Kernel)",pihole,1647465088.0
7704,comment,1,i0ybs1n,,I personally use firewalld for this type of filtering. I have had a way better experience than with IPtables. currently I use firewalld and have a  ubiquiti FW policy restricting it as well.,pihole,1647474731.0
7705,comment,1,i0zmwxt,,"Thanks for the suggestion. I installed it now.

To allow ssh only from my IP. Is this the command?

`sudo firewall-cmd --add-rich-rule 'rule family=""ipv4"" service name=""ssh"" \source address=""192.168.0.103/24"" accept' --permanent`

My ssh isn't on port 22, will this still work?

Are other connections automatical refused, if I use this rule?",pihole,1647499490.0
7706,comment,1,i0zoyh7,,"This page has some example ssh configs. I have links bookmarked so I assume I needed them in the past.

[https://computingforgeeks.com/how-to-install-and-configure-firewalld-on-debian/](https://computingforgeeks.com/how-to-install-and-configure-firewalld-on-debian/)

you will want to designate a /32 if you want only one IP to have access. change service to port.

`sudo firewall-cmd --add-rich-rule 'rule family=""ipv4"" port port=2222 \source address=""192.168.0.103/32"" accept' --permanent`

but now you would need to add a reject or drop statement as well for the other IPs(could be wrong. i configure a lot of access list based devices so i mix them up sometimes. might want to google this or someone can help in the comments.)   
Drop is better, IMO, bc it doesn't tell a scanner it was rejected.

another way is

`firewall-cmd --zone=internal --add-port=2222 --permanent`  
`firewall-cmd --zone=internal --add-source=`[`192.168.0.103/32`](https://192.168.0.103/32) `--permanent`   
`firewall-cmd --zone=public --remove-port=2222 --permanent`

I had this page bookmarked for it as well

[https://serverfault.com/questions/680780/block-all-but-a-few-ips-with-firewalld](https://serverfault.com/questions/680780/block-all-but-a-few-ips-with-firewalld)

you may need to do some tinkering as I cant remember what the default zones are called.",pihole,1647501135.0
7707,comment,1,i14vgnn,,"Could it be that a service is missing in my setup to use firewalls?

With `sudo firewall-cmd --state` I get `failed` as the output.

`sudo firewall-cmd --reload` results in:  
`Error: COMMAND_FAILED: 'python-nftables' failed:`  
`JSON blob:...`

I think I will use SSH keys for login instead of a password and disable root user login and make sudo require a password. What do you think? That should be enough security for a pihole, right?

I already chanced the ssh-port and installed fail2ban.",pihole,1647597993.0
7708,comment,1,i15xa6z,,"I use key pairs for login as well 
Try
Sudo service firewalld start 
Also might be missing some dependencies",pihole,1647617592.0
7709,post,4,tft7um,Trying to setup ExpressVPN with Pihole.....Need help!,"My networking skills are limited even though I managed to successfully setup Pihole on my Raspberry Pi Zero 2 W. I figured out, through trail/error, that my VPN is overriding my Pihole DNS on my PC. So for now, I have my VPN disabled on my PC in order to use Pihole effectively. 

I manually input Raspberry Pi's static IP as DNS server in iPV4 network settings. I do not have my Pihole setup on my network, yet.  

I am trying to figure out a way to use ExpressVPN at the same time as Pihole and I am running out of ideas. I have found a few forums around the internet but none seem to have a solid answer. My only idea is to setup ExressVPN on the Raspberry Pi, but I'm not sure if that would even work. 

I am newer to networking and am struggling, really don't want to abandon my VPN all together. 

&#x200B;

I would really appreciate any tips or suggestions in order for me to get this to work. I'm sure someone has done it before! Thank you all.",pihole,1647464911.0
7710,comment,4,i0xuhnu,,"A few points to consider:

1. You want the VPN DNS servers to override a local pihole instance to prevent leaking of DNS queries
2. If you want \_all\_ things to go through the VPN, consider setting the VPN client up on the router.  That way you can run through pihole first.
3. Check if you VPN provider has an ad-blocking setting (several do) and you can deploy that while on the VPN

Good luck.",pihole,1647467536.0
7711,comment,1,i11bmtb,,"Thanks for the suggestions! I think the easiest way would be to purchase a router that is VPN compatible and go from there. Unfortunately, I am using my ISP's router/modem combo. 

If you have any suggestions as to which router would be a good purchase, I would love to hear them. 

Also to summarize your points in my own thoughts together so I know we are on the same page.

1. Setup VPN on viable router.
2. Set my devices to connect to Pihole through DNS.
3. Connect Pihole to new router.
4. Good to go?

From my understanding, this will give me all of the benefits of a VPN, like ExpressVPN, and Pihole? I really only need a viable router that isn't from my ISP?",pihole,1647534645.0
7712,comment,2,i11hutd,,"Re: VPN - check routers in your price range to make sure they can run a VPN client (check their specs)

Any modern decent router with that capability can do the rest of your list :)",pihole,1647537013.0
7713,post,1,tfrnav,host saying unknown,"I cant find this problem anywhere else but on pi-hole web gui all of the client name is unknown but in the active DHCP lease page it shows the hostnames and if I go to add new client the name still doesn't show up.\`

Any help would be appreciated thanks

https://preview.redd.it/3cku2q1svsn81.png?width=1007&format=png&auto=webp&s=f773d704f227d64b912f3e23c9e2b963f7a0e6f1

https://preview.redd.it/rivqz08cwsn81.png?width=768&format=png&auto=webp&s=0a4fdb0e3534b9e16fa85a34d030a8ab9d68087d",pihole,1647460674.0
7714,post,89,tfovqq,why is this happening?,,pihole,1647455829.0
7715,comment,38,i0x2eg2,,"Your designated nameserver (Google) is rejecting some packets larger than 1232 bytes. This is happening very infrequently, so it should not be a concern.  If you desire to change your maximum packet size, see this thread:

https://discourse.pi-hole.net/t/dnsmasq-warn-reducing-dns-packet-size/51803/9",pihole,1647456502.0
7716,comment,19,i0x5389,,"Malformed/unexpected dns packet size to your upstream dns server.
Click on the doc file below the log entry, the help link will show you how to modify your conf file so that you don’t see these errors.",pihole,1647457565.0
7717,comment,1,i104ib1,,"Are these warnings logged anywhere else except in /var/log/pihole.log ?

The Pi-hole diagnosis system seems to store / get the warnings elsewhere?",pihole,1647514137.0
7718,comment,4,i0xlv8d,,"If it's not a concern, why does it continue to flood the notification section of the admin page by default?",pihole,1647464175.0
7719,comment,18,i0xm8bm,,Cause it would be a concern if it were happening more often. It’s a warning.,pihole,1647464318.0
7720,comment,16,i0y4x8e,,">	why does it continue to flood the notification section of the admin page by default?

In the specific case of the OP, the warnings are very infrequent.  10 warnings in 2 weeks.",pihole,1647471782.0
7721,comment,6,i0xzo08,,Actually it also started happening to me and I get dozens of notifications each week… I feel this being a concern,pihole,1647469609.0
7722,comment,3,i0zcbel,,Yup. Hardly flooding the home screen,pihole,1647492152.0
7723,comment,6,i0y7gkx,,"It happens to me whenever I restart Pi-hole, but only once. 

You can ignore it, as your Pi-hole will send a re-request or you can set max size per the link above.",pihole,1647472865.0
7724,comment,2,i0y0srp,,Recently started happening to me and I use cloudflared DOH.,pihole,1647470066.0
7725,post,7,tfopxm,reCAPTCHA is blocked on every website for me now.,"I've read all the previous threads on this, and not getting much clarity or success from any of them.   I think this has only happened recently, since the most recent update (5.9 w/ 5/14 FTL).   Any suggestions?   Disabling pihole for 30 seconds seems to have zero effect on this issue.

&#x200B;

EDIT: typo.  I hate seeing 'pinhole' there.",pihole,1647455398.0
7726,comment,33,i0x0gcg,,">Disabling pinhole for 30 seconds seems to have zero effect on this issue.

This would indicate that Pi-hole is not the source of the problem.",pihole,1647455733.0
7727,comment,2,i0yttav,,Are you using NoScript at all?,pihole,1647482874.0
7728,comment,2,i0z0t7f,,Some Vpns mess with captcha too,pihole,1647486189.0
7729,comment,2,i0zguia,,windows has a local DNS cache that will even save NXDOMAIN for a certain period of time,pihole,1647495023.0
7730,comment,1,i1prhdd,,">This would indicate that Pi-hole is not the source of the problem.

Unless I'm off here (perfectly possible), this can't be true, because:

1. Using the pihole GUI dashboard, I disabled pihole - no change, reCAPTCHA on any site doesn't work - just get the circling arrow.
2. My DNS had three records - A & B were both the pihole's local IP, and C was [1.1.1.1](https://1.1.1.1).
3. I reconfigured my DNS to only point to [1.1.1.1](https://1.1.1.1) and 1.0.0.1 , and reCAPTCHA on every website immediately worked again.

From this, am I meant to surmise that pihole's 'Disable' command isn't actually a full disable?  Or is it something else?   Because it definitely has something to do with the pihole.",pihole,1647984862.0
7731,comment,1,i1qhr7g,,No use of NoScript.,pihole,1647996058.0
7732,comment,1,i1qhrz6,,No VPNs,pihole,1647996068.0
7733,comment,1,i0zzn0z,,"By default, Pihole's refusal have a TTL of 2 seconds I think? If Windows cache results longer than the TTL, there's a major issue somewhere.",pihole,1647510347.0
7734,comment,1,i1q4shw,,">	My DNS had three records - A & B were both the pihole’s local IP, and C was 1.1.1.1.

Why?  Your Pi-hole should be the only DNS server available to clients. Additional DNS servers allow some of your DNS traffic to bypass Pi-hole. 

What upstream DNS server is Pi-hole using?",pihole,1647990338.0
7735,comment,0,i1qqzjl,,Are there any reCAPTCHA entries in your blacklist or block lists?,pihole,1648000238.0
7736,comment,1,i1qjjnw,,">	Pihole’s refusal have a TTL of 2 seconds I think?

NXDOMAIN is not returned by default when Pi-hole blocks a domain.",pihole,1647996869.0
7737,comment,1,i1qh7zv,,"Why?  I figured I would let Google be the ultimate backup in case my pihole fell over?  Is that a mistake?

As to its upstream DNS, the Raspberry Pi is set to use both standard OpenDNS servers, and nothing else - just the two records.",pihole,1647995819.0
7738,comment,1,i1qssb5,,The problem was with their upstream DNS server.,pihole,1648001068.0
7739,comment,1,i1qj889,,">	Is that a mistake?

Yes. DNS servers are typically not used in the order presented. It's not so much ""use this DNS only if the first two are not available"". It's more like ""here are three DNS servers you can use any time you want to and in any order you choose"".

Pi-hole is using different upstream DNS servers than the DNS you used when you tested without Pi-hole. The problem can be the IP's returned by Open DNS.",pihole,1647996725.0
7740,comment,2,i1qzhpy,,Yeah I went and saw the whole conversation after I commented.,pihole,1648004304.0
7741,comment,2,i1qnsr0,,"OK, thanks for that info.   It looks like OpenDNS is not liking reCAPTCHA for whatever reason.   Changing my DNS to Google instead makes reCAPTCHA work again.   Which, it has to be said, is both weird and unsurprising.   Wonder why OpenDNS is blocking it?

Sorry to blame pihole, the problem does indeed lie elsewhere.

&#x200B;

EDIT:  [Seems I'm not the first to come across this..](https://support.opendns.com/hc/en-us/community/posts/360076823331-reCAPTCHA)",pihole,1647998798.0
7742,post,2,tfnkvg,CA Certificate for pihole -up through Firewall with SSL Inspection,"Tl;dr: Do I need to add my CA certificate somewhere in particular for pihole?

I'm running pihole through a firewall with SSL inspection. The CA certificate of my firewall was added to the Raspberry Pi. However, if SSL inspection is active for the raspberry, `pihole -up` results in:

      [✓] Update local cache of available packages
      [i] Existing PHP installation detected : PHP version 7.4.28
      [✓] Checking for git
      [✓] Checking for iproute2
      [✓] Checking for whiptail
      [✓] Checking for ca-certificates
    
      [i] Checking for updates...
    fatal: unable to access 'https://github.com/pi-hole/pi-hole.git/': server certificate verification failed. CAfile: none CRLfile: none
      [i] Pi-hole Core:     up to date
    fatal: unable to access 'https://github.com/pi-hole/AdminLTE.git/': server certificate verification failed. CAfile: none CRLfile: none
      [i] Web Interface:    up to date
      [i] FTL:              update available
    
      [i] FTL out of date, it will be updated by the installer.
    
      [✓] Root user check
    
            .;;,.
            .ccccc:,.
             :cccclll:.      ..,,
              :ccccclll.   ;ooodc
               'ccll:;ll .oooodc
                 .;cll.;;looo:.
                     .. ','.
                    .',,,,,,'.
                  .',,,,,,,,,,.
                .',,,,,,,,,,,,....
              ....''',,,,,,,'.......
            .........  ....  .........
            ..........      ..........
            ..........      ..........
            .........  ....  .........
              ........,,,,,,,'......
                ....',,,,,,,,,,,,.
                   .',,,,,,,,,'.
                    .',,,,,,'.
                      ..'''.
    
      [✓] Update local cache of available packages
      [i] Existing PHP installation detected : PHP version 7.4.28
    
      [✓] Checking apt-get for upgraded packages... up to date!
    
      [i] Checking for / installing Required dependencies for OS Check...
      [✓] Checking for grep
      [✓] Checking for dnsutils
    
      [✓] Supported OS detected
      [i] Checking for / installing Required dependencies for this install script...
      [✓] Checking for git
      [✓] Checking for iproute2
      [✓] Checking for whiptail
      [✓] Checking for ca-certificates
    
      [i] SELinux not detected
      [i] Performing unattended setup, no whiptail dialogs will be displayed
      [i] Performing reconfiguration, skipping download of local repos
      [✓] Resetting repository within /etc/.pihole...
      [✓] Resetting repository within /var/www/html/admin...
      [i] Checking for / installing Required dependencies for Pi-hole software...
      [✓] Checking for cron
      [✓] Checking for curl
      [✓] Checking for iputils-ping
      [✓] Checking for psmisc
      [✓] Checking for sudo
      [✓] Checking for unzip
      [✓] Checking for idn2
      [✓] Checking for libcap2-bin
      [✓] Checking for dns-root-data
      [✓] Checking for libcap2
      [✓] Checking for netcat-openbsd
      [✓] Checking for lighttpd
      [✓] Checking for php7.4-common
      [✓] Checking for php7.4-cgi
      [✓] Checking for php7.4-sqlite3
      [✓] Checking for php7.4-xml
      [✓] Checking for php7.4-intl
      [✓] Checking for php7.4-json
    
      [✓] Enabling lighttpd service to start on reboot...
      [✓] Checking for user 'pihole'
    
      [i] FTL Checks...
    
      [✓] Detected AArch64 (64 Bit ARM) processor
      [i] Checking for existing FTL binary...
      [i] Downloading and Installing FTL...curl: (60) SSL certificate problem: unable to get local issuer certificate
    More details here: https://curl.se/docs/sslcerts.html
    
    curl failed to verify the legitimacy of the server and therefore could not
    establish a secure connection to it. To learn more about this situation and
    how to fix it, please visit the web page mentioned above.
      [✗] Downloading and Installing FTL
      Error: URL https://github.com/pi-hole/ftl/releases/latest/download/pihole-FTL-aarch64-linux-gnu not found
      [✗] FTL Engine not installed
    
      Unable to complete update, please contact Pi-hole Support

After that, I excluded the raspberry from SSL inspection and ran `pihole -up` again:

      [✓] Update local cache of available packages
      [i] Existing PHP installation detected : PHP version 7.4.28
      [✓] Checking for git
      [✓] Checking for iproute2
      [✓] Checking for whiptail
      [✓] Checking for ca-certificates
    
      [i] Checking for updates...
      [i] Pi-hole Core:     up to date
      [i] Web Interface:    up to date
      [i] FTL:              up to date
    
      [✓] Everything is up to date!

Do I need to add my CA certificate somewhere in particular for pihole?",pihole,1647452318.0
7743,comment,1,i0wubrb,,">Do I need to add my CA certificate somewhere in particular for pihole?

To the best of my knowledge, our certificate is valid.  

    curl https://github.com/pi-hole/pi-hole.git/
    <html>
    <head><title>301 Moved Permanently</title></head>
    <body>
    <center><h1>301 Moved Permanently</h1></center>
    <hr><center>nginx</center>
    </body>
    </html>

You will need to check your firewall settings, as that appears to be the source of your problem.",pihole,1647453316.0
7744,comment,1,i0wwdvg,,"I wouldn't doubt that your cert is valid! Furthermore, it worked after I didn't SSL inspect the connection. My question is rather: Do I have to put MY CA cert somewhere special such that pihole does not complain about an insecure connection. I added my CA cert to `/usr/local/share/ca-certificates/` and run `sudo update-ca-certificates`. Maybe pihole looks into another folder or something?",pihole,1647454137.0
7745,comment,1,i0wy4gk,,">Do I have to put MY CA cert somewhere special such that pihole does not complain about an insecure connection.

Pi-hole isn't complaining about an insecure connection.  Here is an update start from my Pi-hole running the development branch:

    pihole -up
    [✓] Update local cache of available packages
    [i] Existing PHP installation detected : PHP version 7.4.28
    [✓] Checking for git
    [✓] Checking for iproute2
    [✓] Checking for whiptail
    [✓] Checking for ca-certificates
    
    [i] Checking for updates...
    [i] Pi-hole Core:	update available
    [i] Web Interface:	update available
    [i] FTL:		up to date

    [i] Pi-hole core files out of date, updating local repo.
    [✓] Check for existing repository in /etc/.pihole
    [✓] Update repo in /etc/.pihole
     
    [i] If you had made any changes in '/etc/.pihole/', they have been stashed using 'git stash'
    
    [i] Pi-hole Web Admin files out of date, updating local repo.
    [✓] Check for existing repository in /var/www/html/admin
    [✓] Update repo in /var/www/html/admin

Your firewall is complaining.  That's where you need to fix the certificate issue.",pihole,1647454826.0
7746,post,4,tfmn41,Looking for a good router,"I am looking for a good router to work with pi-hole. I have some smart home things that kinda failed when I had everything DNS through the pi. Philips hue lights, Schlange lock, some ai ATF tower things for Ms flight simulator.

I think I want the ability to have group rules for DNS.",pihole,1647449863.0
7747,comment,6,i0x6mk3,,Mikrotik router works really well. Cheap as anything at 50 bucks. Just pair it with a good mesh wifi and your good to go!,pihole,1647458182.0
7748,comment,4,i0wqswa,,"Ubiquiti Edgerouter X best $50 you can spend.

I have the Edgerouter X run all of the DNS through the PiHole but on the pihole i have separate DNS groups.",pihole,1647451917.0
7749,comment,3,i0ww754,,Any one of these (https://protectli.com/) with https://opnsense.org/ and you are golden. You can NAT DNS to your pihole and block DoHS and TLS DNS. It is what I did and its magical.,pihole,1647454063.0
7750,comment,3,i0wmgxp,,"I use an ASUS AX88U, pretty good router with WiFi 6 (and I use Merlin-WRT). But honestly, next router I'll use will be custom pfsense or Open-WRT.   


What you decide to buy now will depend on your budget, and if you care about free software.",pihole,1647450168.0
7751,comment,2,i0wmvo0,,"Rpi4 works awesome with openwrt

Go here: https://www.reddit.com/r/openwrt/comments/l1m801/rpi4_openwrt_tips/",pihole,1647450333.0
7752,comment,2,i10rt6y,,I’m partial to Ubiquiti. I have a UDM PRO SE. it’s a little pricy but worth all the features. Software/firmware updates are free and you get more than just a router if you plan to add more options down the road.,pihole,1647526757.0
7753,comment,1,i0xtrm4,,"Mikrotik my friend, all the way.
You will learn aton plus 😉",pihole,1647467251.0
7754,comment,1,i0yaivo,,"If you're looking for a platform on which to run pi-hole, I've been running my instance in a VM for about 6 months now and it works great. I use Proxmox as my hypervisor (free) on an old desktop. I've built a whole homelab on Proxmox, I highly recommend it.",pihole,1647474184.0
7755,comment,1,i0yh4qe,,"I have an Asus AX88U and AX89X which are both quite capable. My pihole is running on Ubuntu Server in a VM which has a 2Gbps hardwired to the 89X and the 88U is for my AiMesh. It’s a great setup, I support a pihole instance for my family to use which is on wireguard mesh … all in all it’s a nice setup and I’d recommend either router but the 88U is my first choice because you can put Merlin on it but the 89x has the multigig ports too so it’s a balance",pihole,1647477174.0
7756,comment,2,i0xdbju,,I just got an RB5009 and love it.,pihole,1647460845.0
7757,comment,1,i0x8tup,,"While Mikrotik is an alternative, RouterOS has a rather steep learning curve its not really a beginner friendly in product.",pihole,1647459061.0
7758,comment,3,i0wzp93,,What do you use for Wi-Fi?,pihole,1647455440.0
7759,comment,2,i0x4bd1,,"+1 for the AX88U.

The AX58U (aka AX3000) is also a good router, at least for an AiMesh node.",pihole,1647457256.0
7760,comment,1,i0ydcjo,,I've had a few ASUS with Merlin code on them. Router blocks all DNS requests except the PiHole boxes. I also block 8.8.8.8 and other Googly DNS address so my phone/tv/... are forced to use local DNS handed out by router's DHCP leases.,pihole,1647475425.0
7761,comment,1,i0xrlmb,,Absolutely true. I fiddled with it for a couple days before getting routing to the pihole working correctly. Though I was being a dunce and realized I had to put the server IP and not the kubernetes pod IP (even though it was on the same subnet). Fortunately you don’t need to do NAT rules to forward everything. You can do it via the UI in routerOS.,pihole,1647466414.0
7762,comment,2,i0x729r,,I have some Orbis that I run in Wireless Access point mode. I also have some 8 port Netgear switches that I connect to it for ethernet connections.,pihole,1647458356.0
7763,post,3,tflupt,"PiHole hostname is now showing in red, should I be worried?","Hi all,

I successfully managed to install PiHole on my Synology NAS on Monday, it is purely for my smart devices (like LG and Philips smart TVs and Nvidia Shield) to block all the ad crap and popup screen messages that beg me to buy an Apple+ TV subscription... tired of it!

Anyway I got loads of: `sudo: unable to resolve host PiHole: Name or service not known`

error messages, which I managed to fix by adding PiHole as a host name in the Synology HOSTS file (which I apparently have to re-add after every DSM firmware update). 

I tried various things, also creating a custom hosts .conf file in the Docker > PiHole > dnsmasq.d directory which did not seem to take the PiHole custom hostname.

[Red hostname?](https://preview.redd.it/alr4a5gdsrn81.png?width=299&format=png&auto=webp&s=e7b79e41989633cfb2e1f4fc114f670f4f45e6fb)

Anyway, now my hostname is showing in red? (it wasn't before) does this mean anything in particulier?

[unable to resolve host, ya... WE KNOW!](https://preview.redd.it/azm7cew0urn81.png?width=937&format=png&auto=webp&s=7a48ddb4ad5551f2e7ea45231263d459b72f58f0)

[No error messages, Yay!](https://preview.redd.it/1tdduycitrn81.png?width=949&format=png&auto=webp&s=06b892074f385fa84f3fe0369fdbaf7c43e641e0)

Also look, no error messages for two days 😁 The thousands of other messages are about the hostname not being known.",pihole,1647447719.0
7764,comment,2,i0x1t46,,"I gave up running pihole using DSM 7 Docker and spun up a Virtual Machine running Debian, then installed Pihole on that instead. Solves all the issues.",pihole,1647456267.0
7765,comment,1,i0wj1ao,,"Please generate a debug log, upload the log when prompted and post the token URL here.",pihole,1647448774.0
7766,comment,1,i0wryio,,">PiHole hostname is now showing in red, should I be worried?

No.",pihole,1647452378.0
7767,comment,1,i0wz6v2,,"OP, please tell me more about viewing logs like that!! 🤞🏻",pihole,1647455241.0
7768,comment,1,i0x3g29,,I have the exact same issue on my new synology nas. I'm trying to access and edit the HOST file but for some reason it just won't let me SSH into my NAS. I enables everything needed but nothing wants to work. How did you access your hosts file?,pihole,1647456912.0
7769,comment,0,i0xjwag,,"Those messages are not related to hostname color.

The hostname is always red if you are using ***deep-midnight*** theme.

If you select another theme (***light***, ***midnight*** or ***lcars***) in settings page, the hostname will change its color.",pihole,1647463422.0
7770,comment,2,i0x3kms,,"Sure!

Open Docker > double click the pi.hole container > in the new window, switch to the Log tab (default view is ""Overview"") I dragged the window to be bigger for the screenshot.",pihole,1647456962.0
7771,comment,1,i0x6w2i,,"this is the problem with running pihole using Docker - you shouldn’t need to, or even have to edit DiskStation files. I’d suggest, if you really must use Docker, point the upstream server to the DNS server package within DSM itself, then you can add a reference to pihole in the zone configuration. Since DSM DNS is a recursive server, this is the same as running pihole + unbound

Edit: Actually scrap that. I was convinced that you can change the port that DSM DNS runs on, but you can’t (without editing files) so not a solution. 

I’m therefore sticking with “Don’t use Docker. Use a VM instead”",pihole,1647458287.0
7772,comment,1,i0x3sfh,,"Crap, not running docker! I'll still tool around though. I was expecting a plug-in or other viewer; seems straight forward though 

Thanks!",pihole,1647457048.0
7773,post,3,tfccq7,'Apple News' app Ad from Amazon,"Hello all. I would like to ask what I need to enable in order to block the Amazon Deals on Apple News.

The link: [https://apple.news/Am8fY2Ka0SPKg1AmKUE0JWQ](https://apple.news/Am8fY2Ka0SPKg1AmKUE0JWQ)

and this is how it looks: 

https://preview.redd.it/tpifdwx3cpn81.png?width=1766&format=png&auto=webp&s=806ead5c2be794c75d444733e3fbcdd71b7bbee2

Thank you all! Amazing community!!!",pihole,1647417381.0
7774,comment,2,i0wlgub,,"These are the domains that are requested when you load that page in a browser:

    apple.news
    www.apple.com
    www.hollywoodreporter.com
    p.typekit.net
    iabusprivacy.pmc.com
    content.jwplatform.com
    connect.facebook.net
    secure.quantserve.com
    use.typekit.net
    ssl.p.jwpcdn.com
    www.youtube.com
    widgets.outbrain.com
    s3-us-west-2.amazonaws.com
    sb.scorecardresearch.com
    cdn.cookielaw.org
    geolocation.onetrust.com
    cc.swiftype.com
    fonts.gstatic.com
    googleads.g.doubleclick.net
    static.doubleclick.net
    assets-jpcust.jwpsrv.com
    jnn-pa.googleapis.com
    www.gstatic.com
    www.google.com
    www.lightboxcdn.com
    yt3.ggpht.com
    i.ytimg.com
    videos-fms.jwpsrv.com
    cdn.jwplayer.com
    prd.jwpltx.com
    cdn.ampproject.org

One of the ads contains this line:

    <img src=""https://tpc.googlesyndication.com/simgad/16043369956531202746"" border=""0"" width=""300"" height=""250"" alt="""" class=""img_ad"">

The link itself is provided by the domain that serves the rest of the content, which means you can't eliminate the link using Pi-hole alone.  Pi-hole can block the link content when you click it, since it is a different domain than the content domain.

To eliminate the ad links completely, you need a browser ad blocker such as uBlock Origin, which can inspect the html code and modify it so the links are not shown.",pihole,1647449759.0
7775,comment,1,i3x1bf5,,I only wish I had an Amazon ad and one that small . I get huge ads from a knee brace company and sometimes 3 times in one article . I never had ads before I upgraded to iOs 15.4 . which I only just did a week ago . How can I get rid of these ads ?,pihole,1649434433.0
7776,comment,1,i0wydrk,,"Thanks for the analysis. However, I am talking about the app instead of the site. This ad doesn’t load on the website based on what I have seen.",pihole,1647454926.0
7777,comment,2,i0wz3he,,"The app should be the same as the website from a Pi-hole perspective.  If the ad links are served from the same domain as the content, Pi-hole cannot block them.

Edit - these tools can be helpful:

https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522",pihole,1647455204.0
7778,comment,2,i0x0t8w,,"Thanks. Is this true in this case? Is it from the same domain?
If yes, how is that so? Since it’s from Amazon?

Can you identify which is it since it’s from Amazon?",pihole,1647455873.0
7779,comment,2,i0x2ij8,,"The link points to an Amazon domain.  But, the link itself is hosted on the Apple News domain.",pihole,1647456546.0
7780,comment,1,i0x632q,,So impossible to block for the app?,pihole,1647457964.0
7781,comment,1,i0y4s1i,,That appears to be the case.,pihole,1647471720.0
7782,post,1,tf3zch,(Android) Private DNS via PiHole,"I have seen many posts that vaguely refer to what I'm trying to do, but none of them seem to have a definitively working approach... most people seem to give up and stick to using a VPN.

**Background:** I currently have a cloud-hosted / globally available private pihole instance which I send DNS traffic to from all of my devices. Here's a crappy diagram depicting this...

Client -> Wireguard 10.8.0.X with DNS#1 of 10.8.0.1 ([my.ddns.net:51820](https://my.ddns.net:51820) with only 10.8.0.1:53 traffic) --> Cloud VM (Docker container binding 10.8.0.1:53:53 tcp & udp -> running pihole)

This all works fine.

**Goal:** I'm attempting to set this up as a Private DNS server (basically a publicly-accessible DNS resolver that internally forwards secure DNS requests through the aforementioned pihole).

**Why:** Android Auto Wireless cannot coexist with a VPN... this is undoubtedly just laziness on behalf of the Google devs, but it is what it is until they improve their networking hack, and I'd like to maintain my access to pihole until then. There's also the occasional hiccups with Wireguard clients needing a restart and I'm hoping that a Private DNS solution would also improve stability, but this is secondary.

**Contemplated Design:** Android Client configured for Private DNS: my.ddns.net -> Cloud VM -> nginx with my.ddns.net certs listening on :853 -> 10.8.0.1:53 to reach existing docker pihole

Right now, ufw, iptables, security rules are allowing all inbound traffic.

/etc/*nginx/nginx.conf*

    stream {
            include /etc/nginx/streams/*;
    }

*/etc/nginx/streams/dns-over-tls*

    upstream dns-server {
        server    10.8.0.1:53;
    }
    server {
      listen 853 ssl;
      (... ssl_certificate stuff ...)
      proxy_pass dns-server;
    }
    

**Problem:** The Android Private DNS is failing to connect and provides virtually no helpful information, nor do I have any sort of debugging chain to see where it's failing. I feel like I'm beating my head against a wall at this point.

Surely others have had similar ideas; has anyone successfully done this and have a reliable setup to point to? Or any other sage advice?

Thanks in advance for reading all of this.",pihole,1647388298.0
7783,comment,1,i0wthmu,,Sorry to ask (maybe it is my lack of Android knowledge): what is the difference between what you want to achieve and a Pihole. Both seem to have the function to receive DNS queries and send back the IP.,pihole,1647452988.0
7784,comment,1,i0ze5tc,,"If you're using a letsencrypt cert, Google about x3 root expiry.",pihole,1647493271.0
7785,comment,1,i0xjeg2,,"No worries.

The Pihole is a DNS filterer and forwarder which lives in a totally isolated network within this VM -- only accessible from traffic on my Wireguard network. It is ""private"" in the literal sense of the word, but it is only accessible to my devices when they are connected to my VPN.

""Private DNS"" is a specific thing that allows you to specify an secure (via TLS) DNS provider, either a publicly available Private DNS (i.e. Cloudflare) or any other destination which will accept your secure DNS requests. What I am attempting to do is create a private Private DNS provider (it is technically accessible to anyone who knows the identity of my VM) which will accept my secure DNS traffic, and forward it on internally to my walled-off pihole instance for filtering and further forwarding to public secure DNS providers.

Sorry, I know that's a lot... it's inherently complicated.",pihole,1647463230.0
7786,comment,1,i111gey,,"Unbelievable. This was exactly the problem. Thanks for bringing this to my attention.

For anyone in the future who comes across this with a similar plight...

A root certificate that LetsEncrypt uses expired in Sep 2021. New Android versions enforce strict certificate expiry throughout the entire chain so the cert created by certbot was rejected upon connection. As u/saint-lascivious also mentions elsewhere in this thread, you need to pass `--preferred-chain ""ISRG Root X1""` to certbot to recreate your keys.",pihole,1647530708.0
7787,comment,1,i0xo2bb,,So the difference is not in functionality but in accessibility?,pihole,1647465033.0
7788,comment,1,i0xow8i,,"Both. The functionality is inherently different; Pihole cannot support DNS-over-TLS. Accessibility happens to be my motivation for creating this second route for accessing my Pihole from the internet.

If you have a standard installation of Pihole somewhere, all it's doing is providing an insecure DNS (port 53) endpoint and filtering and forwarding any DNS requests that come into it (unsecure, on port 53... the same way DNS has worked since the dawn of the internet).

I'm attempting to put a secure (port 853) DNS-over-TLS endpoint up in front of the Pihole, then forward that to the Pihole internally via insecure (port 53) DNS.",pihole,1647465364.0
7789,comment,1,i0xp90f,,What am I missing: the only difference is a TLS secured connection?,pihole,1647465504.0
7790,comment,1,i0xpsml,,"I'm not sure at what level you're really asking this question, as it could be...

Yes, the presence of TLS is the difference between DNS and DNS-over-TLS.  
or  
No, it also expects a service to be available on a different port.

If you're still confused, maybe elaborate",pihole,1647465716.0
7791,comment,1,i0xrc92,,"No I am not confused any more. What my final understanding is, you want to offer a DNS over TLS service on your host under a public IP (under the appropriate port of course).

I haven‘t investigated if you could do this on top of dnsmasq or if you need another server which does the DNS via TLS and then locally asks Pihole.

Sounds not so complicated, but I haven‘t done it yet.",pihole,1647466313.0
7792,comment,1,i0xrl7x,,… similar to put a reverse proxy in front of a http web server to do the https stuff.,pihole,1647466410.0
7793,comment,1,i0xsati,,"Yes, that was exactly my thought process. Since I was doing this anyways, I was actually considering also putting up an HTTPS endpoint to be able to access the Pihole admin webserver, but I'm a little less thrilled about exposing that web server to the internet, even behind HTTPS.

Since dnsmasq is oriented towards servicing UDP DNS requests, I don't think it supports DoT since that's inherently over TCP... but I could be mistaken.",pihole,1647466682.0
7794,comment,1,i0ymtta,,"I use AdGuard's dnsproxy for this purpose.

There's a basic overview [here](https://github.com/saint-lascivious/dnsproxy-config), but I haven't touched it for a while and the documentation may be slightly broken surrounding exec permissions on some files.

Message me directly if you have any concerns or queries. Note that supplying a certificate and public FQDN is not covered in the documentation. APDNS must be accessed via certified FQDN.

Note you must also use the `--preferred-chain ""isrg root x1"" for best Android compatibility.",pihole,1647479753.0
7795,comment,1,i111q41,,"Thank you for this.

Note for others, it's not a matter of best Android compatibility; my Pixel 5 will completely fail to connect without any meaningful warning if you are not using the aforementioned flag.",pihole,1647530815.0
7796,post,2,tfjm0h,How to install pihole on a RPi 4 already running OMV,"Hello!

I have a RasPi 4 running my NAS via OpenMediaVault currently. I have previously used a pihole running on an older RasPi 3B+ back at my old place, but ended up dropping it completely due to my SO getting annoyed that it would brick functionality (was in the process of tweaking the blocklist, but she wasn't having it at the time, so I just said screw it).

This time around, I'm going to just have my desktop computer run through the pihole rather than the whole network. However, rather than setting up a second Pi (and since they are rare and expensive to come by now apparently and that older 3B+ is now running Octoprint for my 3D printer), I would love to know whether I could run it on the already going 4 that has my NAS on it. In terms of the hardware's ability to run it effectively, I'm not too concerned with that as it seems more than capable.

What I DON'T know is how I would access the admin pages for both OpenMediaVault and Pihole if they are both hosted at the same IP address as that is the one held open and static for the RasPi 4.

Any help would be appreciated!",pihole,1647442862.0
7797,comment,1,i0w5546,,"Run pihole in docker (omv has a plug-in) with macvlan

https://blog.ivansmirnov.name/set-up-pihole-using-docker-macvlan-network/",pihole,1647443135.0
7798,comment,1,i0w62ag,,"Ok, so I have to figure out how to install Docker onto the pi via the OMV plugin, then docker will create a separate IP essentially where the pihole will live via macvlan?

I'm a little new to this, so I'm struggling a bit to understand all the particulars.",pihole,1647443508.0
7799,comment,1,i0w7br7,,"I'm not at my computer right now so I can't tell you the exact key strokes but it is fairly easy.

Omv plug-ins are in a menu option. After that you will have to learn a bit about docker and docker-compose.

You are basically setting up a new ip (virtual) address for the pihole which will use its own port 80.

You could have also changed omv's ssh port from the default 80 port to something else, like 81 but that's not how I have done it in the past. I can't help you with omv cause I haven't used it in a while.

Good luck.",pihole,1647444023.0
7800,comment,1,i0w8blc,,"Ok, that certainly gives me enough to go on.

If it ends up being something that’s too much of a hassle, I do have a RasPi Zero 2W that I could get an Ethernet hat for or something and use as a Pihole instead, but we shall see.

Thanks!",pihole,1647444426.0
7801,post,1,tfhl9o,Unbound as a recursive resolver question,"Hello.

I have a raspberry with pihole and unbound, which I installed according to this guide: [https://docs.pi-hole.net/guides/dns/unbound/](https://docs.pi-hole.net/guides/dns/unbound/)

I also have many other services on this raspberry and other devices in my local network.  
Now I want to get something like this:

    192.168.0.194:8112 service1.home
    192.168.0.194:8092 service2.home

etc

I know that I need a recursive resolver for this, and I installed unbound especially for this, but I don't know how to configure it for my purpose.

I also added dns records in the pihole ""Local DNS -> DNS records"" section:

    main.home 	192.168.0.194
    nas.home 	192.168.0.213

Thanks.",pihole,1647437042.0
7802,comment,1,i0vrd74,,You can't map different ports and same ip to different host names if that's the requirement,pihole,1647437202.0
7803,comment,1,i0vyyz3,,">	I know that I need a recursive resolver for this

Why do you think a recursive resolver is needed or can do this?",pihole,1647440591.0
7804,comment,1,i0vzgx5,,You need something like a reverse proxy to serve different ports (for webtraffic). Nginx or such,pihole,1647440802.0
7805,post,0,tfg89a,Reuters has defeated my pihole!,,pihole,1647432707.0
7806,comment,6,i0vnyp7,,"Noooo how could they get through that tiny… Uhm, maybe it’s time to make your own Reuters adlist with blackjack and.. 
What I want to say is, maybe you need to update your adlists, or add one that has some decent Reuters blocking.",pihole,1647435529.0
7807,comment,2,i0vs5d6,,"I just roamed around Reuters a bit and saw zero ads. Tests done in Chrome for Android with zero ad blocking other than Pi-Hole. (I assume yours is from Mobile due to the layout)

Make sure your device isn't circumventing the Pi-Hole somehow. (Android likes to use 8.8.8.8 as an alt DNS server if DHCP only gives it one)",pihole,1647437571.0
7808,comment,2,i0wcp5q,,It's ok now. Maybe my pivpn slipped up for a while ..,pihole,1647446195.0
7809,comment,1,i0wclbw,,Hmm thanks not sure what happened but now it's ok. Strange ...,pihole,1647446152.0
7810,comment,1,i0whdz1,,"From my experience, I’d also say pivpn does that from time to time.",pihole,1647448103.0
7811,comment,1,i0ylg35,,Good to know I'm not alone!  ;-),pihole,1647479127.0
7812,post,0,tf8a9m,Unbound On MacOS Docker Pi-Hole,"Hi, so I recently made a pi-hole in a docker container on my MacBook pro. I have all the initial setup done but I tried to use unbound to set up docker as a recursive DNS server. Installing unbound through ""sudo apt install unbound"" went smoothly but starting the service ended up with the terminal saying ""service not found for unbound, exiting..."" I'm unsure how to fix this, anyone know how to?",pihole,1647401536.0
7813,comment,1,i0vz5dp,,"Hey there! You actually can’t install pi-hole in a docker container and then install unbound. At least I could never get unbound to work with Pi-hole that way. I believe this is a result of how docker containers run “contained” in some ways. However, you can find a few different containers that people have put together that include both Pi-hole and unbound. [Here](https://github.com/chriscrowe/docker-pihole-unbound) is an example. I believe this works because they are contained together. Cheers",pihole,1647440666.0
7814,comment,1,i0wbdlq,,">Here

Thanks! I tried it out and it seemed to work, except now, blocked ads seem to be getting through anyway. I think I'll wait now until I can get my hands on an actual raspberry pi and then I'll deploy pihole along with unbound on there.",pihole,1647445661.0
7815,comment,1,i0wc7l9,,"Glad you got it running! If you are seeing ads still, there are a number of things that could be causing it. 1) is of course that you aren’t actually blocking the ad in your blocklist 2) is that the device may actually be using a different dns server. You may need to manually choose the dns, if you aren’t forcing it at the router. If you’ve done all that and are still seeing certain ads, then it’s likely a different, more complex issue",pihole,1647445996.0
7816,post,1,tf5xel,Pi-hole lists not seeming to be working,"I know, I know, another one of these, but I haven't found a solution to what I am seeing yet.

Does this site actually show correct results for pi-hole? https://d3ward.github.io/toolz/adblock.html

nslookup shows pi.hole as my default server and the right ip for it. The logs on pi.hole don't show many blocks when I visit that site but when I query the lists for the urls it says aren't blocked, they are 100% on the losts I have used and have updated gravity. I have unbound running in a separate docker container and it is upstream of my pi.hole container. I copied a list out of ublock and added it to pi.hole since it is blocking significantly more than pi-hole. 

Note that for the same host, I do see occasional blocks in the pi.hole query log, but not nearly what I would expect (especially when testing that site above). Any help would be appreciated.

EDIT: with ublock disabled, I am getting 16% blockage according to that site. With ublock, it is well over 80%",pihole,1647394083.0
7817,comment,3,i0u3yre,,">	Does this site actually show correct results for pi-hole?

That site is of limited value with Pi-hole. The tests are partially for domains you may never visit. Skip that site. The real test - do you see ads in daily browsing?

>	I copied a list out of ublock and added it to pi.hole since it is blocking significantly more than pi-hole.

Don't do this. UBlock formatted lists are fundamentally incompatible with Pi-hole and will cause many false positives.",pihole,1647398171.0
7818,comment,1,i0u3n0b,,">Does this site actually show correct results for pi-hole? https://d3ward.github.io/toolz/adblock.html

Yes. It's not particularly complex. It's just checking a list of domains. You could have zero blocklists realistically and just blacklist the few domains it checks and get 100% coverage.",pihole,1647398021.0
7819,comment,1,i0w7jsr,,"Well, I can't upload an image, but I ran that URL, and I see 77% block rate. The ones that aren't being blocked are generally ones I want to see anyway. Now, there are going to be some for Amazon that get through or any other big provider since they can cycle their domains and IP easily.

If your rate is that low I am guessing you are having split dns issues, and not all of your traffic is hitting just the pi-hole server.

I have also found that depending on your router, you might see better results letting pihole handle dhcp as well. I have a pretty high-end router, but due to my home network size I was having issues with it randomly restarting as IP leases filled up memory. I moved dhcp to my pihole, which has 8gb of ram, and actually noticed better results on mobile devices (which can have hard-coded dns in apps, etc)",pihole,1647444113.0
7820,comment,0,i0uzfvh,,"If you really want to pass that test all you have to do is create a regex

.\*

You will pass with flying colors, Ok seriously although you can block everything domains and block lists can and will change every minute  just get on with your life and worry about the more important stuff like cat videos

You are literally trying to out fox a trillion dollar industry, who do you think is gonna win",pihole,1647418118.0
7821,comment,1,i0vtsv3,,"> The real test - do you see ads in daily browsing?

Unless I also have UBlock running, yes

> UBlock formatted lists are fundamentally incompatible with Pi-hole and will cause many false positives.

To clarify, I found a version of the same list that is compatible with pi-hole, I didn't just straight copy it out. I verified that the list works in the admin page as well",pihole,1647438323.0
7822,comment,1,i0vtxky,,That is what I thought. I verified by hand that the domains were already on lists and it did not appear to be blocking even though DNS was being run through pihole,pihole,1647438382.0
7823,comment,1,i0w8q8r,,I have a UDM-Pro and it is pointing DNS to only my pi-hole with no secondary and pihole is also its DHCP DNS server. Any ideas on how to check for DNS being split somehow? I double checked DNS in unifi. I also did a flush dns on my local machine just to make sure nothing was cached,pihole,1647444594.0
7824,comment,1,i0vu2ka,,"I'm not saying I'm trying to block everything, but looking through that list, and only getting 16% makes me think something is wrong in my pihole setup.",pihole,1647438446.0
7825,comment,1,i0wgxh4,,"> I found a version of the same list that is compatible with pi-hole, I didn't just straight copy it out. 

Adding these domains won't make Pi-hole behave like uBlock.  Web based adblockers such as uBlock Origin are able to examine html code and javascript and block at the element level.  Pi-hole works at the domain level.  Adding the domains from the uBlock lists typically doesn't improve your ad blocking in Pi-hole.  

Example  - this is a single entry from an easylist blocklist.

    /banners/affiliate/*

What part of this can be directly imported into a Pi-hole blocklist?",pihole,1647447916.0
7826,comment,1,i0wlfqf,,"> What part of this can be directly imported into a Pi-hole blocklist?

I didn't add one of those lists? I literally followed a link to a list provider from UBlock and selected a plaintext list from that and added it like I would any other list. I can query the list in pihole and it shows the matches? I don't understand what issue you are having with this? 

List for reference - https://pgl.yoyo.org/adservers/serverlist.php?hostformat=plain",pihole,1647449746.0
7827,comment,1,i0wmp6i,,"My point is - you can't directly convert a uBlock Origin list (same format as easylist) into anything meaningful in Pi-hole, due to the fundamental difference in how the two programs work.  Pi-hole works at the domain level, uBlock works at the element level.

If uBlock blocks a specific element on [reddit.com](https://reddit.com), you can't just take the reddit domain from the uBlock list and add it to Pi-hole.

Many of the domains scraped from the uBlock list are domains that already exist on other blocklists.  Here is a single example from the list you provided:

[https://blocklist-tools.developerdan.com/entries/search?q=ads.guardian.co.uk](https://blocklist-tools.developerdan.com/entries/search?q=ads.guardian.co.uk)

Summary - adding a text list based on a uBlock list won't make Pi-hole act like uBlock.",pihole,1647450260.0
7828,comment,1,i0wtqhe,,Try adding `&mimetype=plaintext` to the URL.,pihole,1647453083.0
7829,comment,1,i0womsw,,"I think I pointed out that I was seeing the entries on both lists. I simply added the list I found from ublock as a testing step to see if there was potentially something missing iin my original pihole list. That's all. 

It sounds like from other comments here that I should be getting a higher percentage block with my other list anyway so going down this rabbit trail isn't actually helping solve my original post's main question which was essentially:
**Should I have a higher percentage blocking with pihole and if so, what is potentially wrong with my setup that is causing my low percentage?** 

You've stated that there is limited use for that site, but other users are clearly getting good blocking so that leaves something misconfigured in my setup. That is what I am now trying to find. I don't think that site is using much by way of element testing since they literally recommend adguard setup which is a custom dns in the same way pihole is (obviously with different configs, customization, etc but for our intents and purposes here can be spoken of interchangeably). That would make it seem to me that if pihole is working, I shouldn't have such a low success rate.

For example, a site they test is https[:]//pagead2[.]googlesyndication[.]com which I have confirmed is in my active lists but its not being blocked and I don't see it get queried but https[:]//fastclick[.]com is tested by that page in the same way and I see it in my query log and see that it gets dumped by gravity",pihole,1647451055.0
7830,comment,1,i0wwe01,,"I'll try that, thanks. Though most of the ads I'm seeing get through are already on the default list so I think its a different issue. But this will help cover some bases",pihole,1647454139.0
7831,comment,1,i0wq6ts,,">Should I have a higher percentage blocking with pihole

Maybe.  The test site has specific domains that the site maintainer has chosen.

>and if so, what is potentially wrong with my setup that is causing my low percentage?

If your Pi-hole blocklists contain those domains, you get a higher block rate.  If not, the rate is lower.  As I noted, random test sites like this are of limited value, because they may not match your browsing habits.  If you simply blacklist all the domains that are serving ads on that site, you will score 100% but this may not change the number of ads you see in real life.  What you see in real life is what matters, not the score on some arbitrary test site.

For a good test of Pi-hole, visit [cnn.com](https://cnn.com), which is crawling with ads.  If you don't see any, Pi-hole is doing its job.  Edit - it appears that cnn is now hosting links from their own domain, and you will see ad links if you use only Pi-hole.

>a site they test is https\[:\]//pagead2\[.\]googlesyndication\[.\]com

From your Pi terminal, what is the output of the following commands:

`pihole -q` `pagead2.googlesyndication.com`

`nslookup` `pagead2.googlesyndication.com` `127.0.0.1`",pihole,1647451674.0
7832,comment,1,i0wvu6j,,"I've done the cnn thing. Just tried again, most of the ads are there (UBlock extension is disabled so I am only testing pi-hole). I clicked the banner ad and saw that it went through adclick[.]g[.]doubleclick[.]net since on that new page, UBlock gave the warning that it was blocked and showed the offending url. Disabled temorarily which causes the page to reload and it went straight through. Typically if pihole is working correctly, it just doesn't reslolve an FF shows a unable to connect page. 

Results of each command you suggested:

       pihole -q pagead2.googlesyndication.com
        Match found in https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts:
           pagead2.googlesyndication.com    

and: 


    # nslookup pagead2.googlesyndication.com 127.0.0.1
    Server:         127.0.0.1
    Address:        127.0.0.1#53
    
    Name:   pagead2.googlesyndication.com
    Address: 0.0.0.0
    Name:   pagead2.googlesyndication.com
    Address: ::",pihole,1647453918.0
7833,comment,1,i0wwzdq,,"> most of the ads are there (UBlock extension is disabled so I am only testing pi-hole)

CNN is serving the ad links from their own domain, so you can't block the links solely with Pi-hole.  If you click on the links, you will not be open them since they lead to domains blocked by Pi-hole.

To eliminate the links (and clean up the page to account for the missing links), you need a browser based web blocker such as uBlock Origin.

Importing any uBlock blocklists won't change this.",pihole,1647454377.0
7834,comment,1,i0x14s9,,"I know that - I am simply providing info on what is happening and giving context around it. 

You have seemingly ignored the fact that I said that I could still click through the links, establishing that pi-hole is not working as expected. (considering that the url is verified as on a block list I have active) Thus that is the thing I am trying to figure out. 

Again, UBlock was only included in the words I typed as it is relevant to the test conditions only.",pihole,1647456001.0
7835,comment,1,i0x2ug8,,">establishing that pi-hole is not working as expected

You posted an output showing that Pi-hole is blocking the domain as desired, which indicates that Pi-hole is working properly.

If your browser can still load that domain, then the browser (or the client on which the browser is running) is not using Pi-hole for DNS.

Do you have any secure or private DNS enabled on the browser?  Any VPN running on that client?  Windows Avast software running?  Apple iCloud Private Relay running on that client?

From the client in question, and from the terminal or command prompt on that client (and not via ssh to the Pi terminal), what is the output of:

`nslookup pagead2.googlesyndication.com`",pihole,1647456676.0
7836,comment,1,i0x3g8s,,"Output from nslookup on pc

    Default Server:  pi.hole
    Address:  x.x.x.x

No VPN on - will check FF settings",pihole,1647456914.0
7837,comment,1,i0x3wkz,,">Output from nslookup on pc  
>  
>Default Server:  pi.hole  
Address:  x.x.x.x

This is the exact output?  With the x.x.x.x?",pihole,1647457093.0
7838,comment,1,i0x4sae,,"No, it has my pi-hole's IP",pihole,1647457445.0
7839,comment,1,i0x58tl,,"Please generate a debug log, upload the log when prompted and post the token URL here.  Also, what is the IP of the requesting client?",pihole,1647457629.0
7840,comment,2,i0y85p0,,"Did some digging after work, tested the site on chrome and things changed so upon further review in Firefox which is my main browser and digging through settings, DNS over HTTPS was enabled and that seemed to bypass some of the Pihole blocks but not all. Haven't looked further to determine why it was only partial but that seems to have ""fixed"" the issue.",pihole,1647473162.0
7841,post,0,tf5cyk,PiHole Blocking Some Devices,"Set up a pihole a couple months ago, a few weeks ago i added iptables to my router that would force the dns connections through the pihole.  then, my roku tv stopped working, and a friends laptop couldn't connect to my internet. I have removed them for the time being. Should I even be using a Roku TV if they're going to do this shit? Anyways, does anyone have a solution? I'm sure it's an easy fix. I'd like to force devices to use the pihole but some devices seem to just refuse. 

also any recommended lists or dns for the pihole?

In hindsight, I should have chosen a better title. It implies this is the fault of the pihole and it isn't.",pihole,1647392370.0
7842,comment,1,i0ugqrw,,Exclude your roku device from the restricted DNS if you like. Manage devices separately or place them in groups.,pihole,1647404558.0
7843,comment,1,i0vxa6v,,please post the iptable rules you are using.   I am using some rules to redirect traffic to my pihole and my sons roku tv works fine.,pihole,1647439873.0
7844,comment,1,i0ztuhp,,"I guess i'm basically asking what rules to setup to make that happen or a way to possibly make the Roku tv cooperate with the DNS. 

What do you mean aout the manage devices separately or place them in groups? I know what that means, but how doe sthat apply here? The iptable rules were set to my entire router and that's the way that I want it.",pihole,1647505293.0
7845,comment,1,i0ztn9g,,"iptables -t nat -A PREROUTING -s 192.168.1.0/24 -p udp --dport 53 -j DNAT --to 192.168.1.xxx
  

iptables -t nat -A PREROUTING -s 192.168.1.0/24 -p tcp --dport 53 -j DNAT --to 192.168.1.xxx",pihole,1647505121.0
7846,comment,1,i102mqa,,You do that in the pihole admin page. Not on your router.,pihole,1647512740.0
7847,comment,1,i1185ij,,"You could try these instead:

    iptables -t nat -A PREROUTING ! -s piholeaddress -p udp --dport 53 -j DNAT --to piholeaddress
    iptables -t nat -A PREROUTING ! -s piholeaddress -p tcp --dport 53 -j DNAT --to piholeaddress
    iptables -t nat -A POSTROUTING -j MASQUERADE

Be sure to replace ""piholeaddress"" with your pihole's address in all 4 instances.",pihole,1647533313.0
7848,post,1,tf4c20,DNS/FQDN Works but PiHole Blocks GUI since I can't Add /admin...,"Hello! I'm currently playing around with the PiHoles that are within my network and wanted to give them a DNS if I ever decided to write out the full FQDN but I am coming across this obstacle that stumps me a bit or maybe I am doing this wrong <<<probably this! 

So in the local DNS settings, when I try to input [pihole1.xxx.xxx/admin](https://pihole1.xxx.xxx/admin) and then the IP I have it tied to, it won't accept it but when I just put [pihole1.xxx.xxx](https://pihole1.xxx.xxx) and the IP, it accepts it but then when I use the FQDN to get to it, PiHole tells me that it blocks it. Since you need to add the /admin at the end of the IP or FQDN to get to the web GUI, how can I get it to work with [pihole1.xxx.xxx/admin](https://pihole1.xxx.xxx/admin) from within the local DNS settings?",pihole,1647389301.0
7849,comment,1,i0tncva,,"The FQDN is the thing before the slash.  

More info here:

https://www.lifewire.com/what-does-fqdn-mean-2625883",pihole,1647390787.0
7850,comment,1,i0tnkwb,,I understand but why can't I add the /admin within the DNS setting in Pihole?,pihole,1647390885.0
7851,comment,3,i0tnyx8,,"Because that's not how DNS works.

DNS ties an IP address to a hostname (or an FQDN).  The /xyz specifies a resource on the webserver and has nothing to do with DNS",pihole,1647391058.0
7852,comment,2,i0tuner,,Got it. Thank you,pihole,1647394015.0
7853,post,2,tf3zl9,Trouble switching to old pihole after new router setup,"Hi Folks,

I installed a new router that I've been using for a while now and I am now wanting to use my pihole (running on Zero W with PADD) that I had set up previously on my prior router. When I power on the pihole, however, most of my gadgets are using it as a DHCP and DNS server (both are turned on within pihole) and can not access the internet. I am trying to access the pihole via the pihole admin browser and can not. I want to change the DHCP and DNS settings to connect with the router. I do have a PADD with screen attached and if I try plugging in the raspberrypi into a monitor I can not see anything so I cant seem to access anything that way either. My router's address is 192.168.50.1 and not 0.1 as it was before. Nor do I remember the MAC address so I can assign the pi a static IP within the router to get around this. 

I am now trying to access config settings within the SD card itself mounted to my Macbook and can not find the file that will enable me to edit the DHCP settings and such. Any idea where I can edit that? Or do you have input as to how I can change my settings on the pihole without having to mess with the SD? 

&#x200B;

Thank you",pihole,1647388318.0
7854,post,3,tf2daj,My router is forcing some IPv6 DNS servers,"I have pi hole running in an orange pi zero with a static IP. My previous router had configured the pi hole IP as the only DNS record for DHCP. I changed my ISP and the new router works with IPv4 and IPv6. If I configure it the same way the clients are assigned 5 DNS ips. The pi hole, the router, two ipv6 ips that match the ISP DNS and another ipv6 that is not running a DNS server in port 53.

At this point I assumed my router can have tricky firmware and decided to enable DHCP in the pi hole and disable it in the router. When I do this, with ipv6 enabled the clients are still assigned 5 ips, pi hole v4 and v6, the two v6 ips for the ISP DNS and the other v6 that is not running DNS.

In addition to this, if I set a static IP (v4) in my android phone and set the DNS to the pi hole... I am still seeing the V6 IPs configured by the ISP. I am quite puzzled at this time, I would appreciate any help or explanation.",pihole,1647383777.0
7855,comment,1,i0tdj3c,,"IPv6 is autoconfiguring itself. Technically I know of two ways to advertise another DNS to the clients. One is an option as part of the router advertising. The other is DHCPv6 (often only used for helper addresses, like DNS, while leaving the IPs to autoconf).

Another option would be to leave the clients in the standard state to ask the router for DNS. But then configure the router to use the Pi ad upstream DNS instead of the ISP. You will not see the client statistics anymore or build group policies.",pihole,1647386478.0
7856,comment,1,i0x09d1,,"With IPv6 the router advertises the DNS server(s) to all clients. Most routers allow you to configure what DNS server that is (the one that the ISP advertises, or your own custom one), but some ISP-supplied routers are locked down so you cannot set custom ones.

If you want your devices to not use the advertised ISP DNS servers, one solution is to go into the IPv6 firewall of your router and blacklist those IP addresses. Clients then cant reach them anymore.",pihole,1647455659.0
7857,comment,1,i121xl7,,Can you disable RA on your router? that may  help.,pihole,1647544699.0
7858,comment,1,i0tiluj,,"Thank you, I was not familiar with how IPv6 works. I [read](https://www.cisco.com/assets/sol/sb/RV320_Emulators/RV320_Emulator_v1.0.1.01/help/DHCP7.html) about router advertisement and that seems to be exactly my case. Plus I also read that this advertisements are sent periodically to ensure that all the network hosts have the updated configuration. I am afraid that without being able to change my router RA configuration (My ISP restricts that)  there is nothing I can do.",pihole,1647388722.0
7859,comment,1,i0x0n99,,"Yes, that is my case, my router had that config blocked",pihole,1647455807.0
7860,comment,1,i129yg1,,"No, I can't. I asked my ISP to disable IPv6 remotely. I hope they can, but still not sure",pihole,1647547753.0
7861,comment,1,i0tnme6,,"There is nothing \_free\_ you can do.

People are too accepting of their ISP locking them to setting they don't like.  You can always go buy your own router.  Then either ask the ISP to change theirs to bridge mode, or just run Double Nat (or put your own router in the DMZ of the ISP router, whichever works).

&#x200B;

Good luck :)",pihole,1647390904.0
7862,comment,1,i0uw4ha,,"You should be able to override advertising with DHCPv6. I have no personal experience in fighting against autoconf but if a client would be doomed to listen to every advertising it would imply a huge risk a network. 

You could also consider turning off IPv6 in certain places to kill the chain.",pihole,1647415324.0
7863,comment,1,i0uw3bh,,"Thank you, buying my own router is something I am considering. My ISP provides the pppoe credentials so that wouldn't be a problem.",pihole,1647415297.0
7864,comment,1,i0w1wwl,,"That would address your issue then, once you have your own equipment, you can fully configure it :)",pihole,1647441820.0
7865,post,1,tf1zlq,Can't resolve from other containers,"I can't make resolving work from other containers on the same host

My pihole is configured to work on host mode, works perfectly for anything, including the host, but won't work for other containers.

Oddly, it's working fine for TCP request, but fail for UDP

docker run --rm ngayall/dnstools dig [google.com](https://google.com) @192.168.192.105  
; <<>> DiG 9.12.3-P4 <<>> [google.com](https://google.com) @192.168.192.105  
;; connection timed out; no servers could be reached

dig [google.com](https://google.com) @192.168.192.105  
; <<>> DiG 9.11.5-P4-5.1+deb10u6-Debian <<>> [google.com](https://google.com) @192.168.192.105  
;; Got answer:

I've tried: Listed on [172.17.0.1](https://172.17.0.1) (docker0), listening on different IP assigned as sub interface.

Any Idea ?",pihole,1647382745.0
7866,comment,1,i0t8jdz,,">	My pihole is configured to work on host mode

Please explain/clarify.",pihole,1647384360.0
7867,comment,1,i0uphvs,,"  pihole:  
container\_name: pihole  
image: pihole/pihole:latest  
**network\_mode: host   <-----------------------**  
environment:  
TZ: 'Asia/Jerusalem'  
volumes:  
\- pihole-conf:/etc/pihole  
restart: unless-stopped  
logging:  
options:  
max-file: ""5""  
max-size: ""10m""",pihole,1647410170.0
7868,post,1,teyz04,ESPN APP.,"My ESPN app keeps crashing. When I disable PiHole the app behaves as expected. I have tried whitelisting some of the request from ESPN, but I haven't been able to find a solution, anyone dealt with this?",pihole,1647374838.0
7869,comment,1,i0sl4n3,,"Is it on your TV, or phone or tablet? 

I haven’t seen this kind of issue on iOS or iPad OS.",pihole,1647375255.0
7870,comment,1,i0sn44r,,espncdn.com,pihole,1647376012.0
7871,comment,1,i1ocn9g,,Also dealing with this and trying to find the issue,pihole,1647965203.0
7872,comment,1,i0sy5ud,,iPhone and iPad.,pihole,1647380250.0
7873,comment,1,i1ol8ul,,No luck as of yet.,pihole,1647968483.0
7874,comment,1,i1olfyb,,The two problem domains I saw might be sw88.espn.com or dcf.espn.com,pihole,1647968558.0
7875,comment,1,i60u3v7,,"I also have this issue and this didn’t help :/

Update: allowing vision.rn-pz.com seems to have fixed it",pihole,1650820748.0
7876,post,1,teycbi,localdns back to pi-hole?,"Hey all.

New to the Pi-Hole community - thanks for this wealth of information. I'm working through my config on my localhost, and am trying to use a local DNS config to point ""pihole.lan"" to my ServerIP:

https://preview.redd.it/rh3ckrxeqln81.png?width=2298&format=png&auto=webp&s=b0dd56cd280daa69667086d5999e6b4025a66bb4

When typing [http://pihole.lan](http://pihole.lan) \- this does not resolve to the pihole GUI. I've confirmed that I'm using the right DNS etc etc... Am I missing something obvious?

My router localdns option works... just can't get the pihole.lan one to. pi.hole resolves appropriately.

&#x200B;

edit: i know this is a bit ridiculous - ""why not just use http://pi.hole"". I think it's a principles thing - trying to figure out why this isn't working.... ",pihole,1647373795.0
7877,comment,1,i0sksyx,,Only http://pi.hole will automatically redirect to the admin page. If you use a domain other than pi.hole then you’ll need to go directly to ***http://<custom-domain-name>/admin/***.,pihole,1647375129.0
7878,post,1,tewhwk,Wireless AP won't reconnect to Pihole after working for 24 hours,"The PiHole is set up as the DHCP server AND DHCP is disabled on the gateway.  After my DHCP lease expires, the wireless access point won't renew through the PiHole.  I have to turn DHCP back on in the gateway settings, restart the AP, then turn DHCP back off on the gateway.  Both the AP and pihole are connected directly to the gateway.  Any ideas?",pihole,1647369707.0
7879,comment,1,i0sp8d6,,why not give the AP a static ip?,pihole,1647376819.0
7880,comment,1,i0t4ang,,I did.  It was already static when this issue started.,pihole,1647382610.0
7881,post,737,terw6b,Microsoft could be bringing ads to the Windows 11 File Explorer - Yet another reason ad blocking need to cover the entire system not just the browser,,pihole,1647358965.0
7882,comment,144,i0rrfgb,,Microsoft so poor they have to put ads in Windows.,pihole,1647363748.0
7883,comment,76,i0s6r08,,"Just fyi - if this got implemented the way it was tested, pihole wouldn't save you. This was a notification that came from the os which would have been downloaded from Microsoft update servers. Nothing that pihole does will prevent this, unless you intend to disable a whole host of other things aside from ads.",pihole,1647369686.0
7884,comment,25,i0s7r65,,"They can bring ads, but not tabs?",pihole,1647370075.0
7885,comment,16,i0sw7np,,"Yeah, I can’t stand the “interests” tab in Win10.   I don’t want my machine trying to influence me.  They’re making technology repulsive.",pihole,1647379490.0
7886,comment,247,i0riyqj,,"I love Pi-hole, but I have to disagree.
That’s just another reason not to be using Win11.
Ideally not using Windows whatsoever (but I know, it’s better for gaming)",pihole,1647360487.0
7887,comment,35,i0rwo8u,,[deleted],pihole,1647365778.0
7888,comment,53,i0rk8hw,,You gotta be fucking shitting me.,pihole,1647360984.0
7889,comment,22,i0sf5xr,,"God, why? Microsoft is earning massive amounts of cash from azure, and have been fighting Google forever, and now you force ads to the desktop? Jesus Christ. They don’t need the money, and they destroy the desktop. 

Use Linux or MacBooks people. This is just too stupid. Almost unbelievably stupid.

Edit: apparently, it is not ads, it is recommendations, and that is great. This is a misleading title.",pihole,1647372957.0
7890,comment,4,i0ui9f1,,"They pulled back on it and said they weren't doing this.

Of course they have gone back on their word before.

Luckily windows is still governed by a registry and group policy editor.  Just make sure you have the pro version and you always be able to forcefully turn these things off.",pihole,1647405440.0
7891,comment,11,i0t3g67,,And people wonder why I'm a Mac user,pihole,1647382273.0
7892,comment,3,i0ukq7q,,"Ah, the old good windows, shit windows alteration.

Before windows 10 we had the shit one (win 8) so now it's  time for a shit one again,  
Windows 11 it is.",pihole,1647406944.0
7893,comment,24,i0rzuxt,,">Yet another reason *Microsoft is a malware company*

fixed",pihole,1647367010.0
7894,comment,18,i0scdah,,"I really dont want to advertise Linux, i really dont. Believe me.

But people. PLEASE move away from Windows when they do shit like that.
Move to FreeBSD, Linux, Android, ChromeOS I really don't care, but do NOT play Microsoft's game.",pihole,1647371874.0
7895,comment,6,i0u0ity,,"Could. Operative word here is could. 

They could also make the default interface color scheme bright pink and green.  
They could change the Recycle Bin icon to a picture of bare breasts.  
They could add a sound event to the system every time an update installs that sounds like a train whistle. 

Could happen. Doesn’t mean it will.",pihole,1647396592.0
7896,comment,2,i0s9xo2,,What ever happened to tools like 98lite? Why isn't there an 11lite that you could trim out pieces of the OS you don't want?,pihole,1647370920.0
7897,comment,11,i0rlzx7,,[deleted],pihole,1647361658.0
7898,comment,5,i0ruvwv,,"i feel like my migration to 100% linux must go quicker, i must not be dependent on microsoft in a few years, shits gonna blow real hard once they require you to have a cloud sign in and force bing ads on the startmenu/explorer, ya'll know its coming.",pihole,1647365084.0
7899,comment,4,i0rnxyq,,"Nothing to worry abt. Just debloat the system, block microsoft ip's in firewall. Disable the services that gives the adds. Or just use filesV2 instead of file explorer. We had adds in the search bar in win10 and still have but that is easy to remove with winaerotweaker.",pihole,1647362410.0
7900,comment,3,i0rod59,,man this makes me glad i use linux,pihole,1647362570.0
7901,comment,1,i0sllzz,,"I don't think they'll ever put ads in the paid for version of Windows.  I think they are going to make  all windows free to use and if you don't pay for it then you'll get ads.  Its going to be like free streaming apps, free gets you ads, paid is ad free.  If they make the paid version with ads, well, hello any other operating system except M$. Bye bye any and all Microsoft products plus subscriptions to their products.  No business will tolerate that crap.",pihole,1647375442.0
7902,comment,1,i0u0w2l,,"And people wonder why I'm a Linux user.

My current job tho requires a Windows laptop or Mac.  
Apple?? Never!!! 

So I downgraded its Windows 11 which is a total breach of privacy, Windows 10 can always work things out either via script, powershell, local group policy or regedit,",pihole,1647396761.0
7903,comment,-1,i0svxn6,,"""Could"", of course they could, they could bring childporn to windows 11, but will they?

Currently it's just suggesting microsoft apps that you might find usefull for work.",pihole,1647379381.0
7904,comment,1,i0sek0k,,"Fuck that, glad I stopped using it",pihole,1647372721.0
7905,comment,1,i0swrz8,,Total Commander,pihole,1647379707.0
7906,comment,1,i0u4i2d,,what does windows do today that Ubuntu can't?,pihole,1647398419.0
7907,comment,1,i0vc6my,,"Oh Microsoft. I like you so much... just not like that any more.  I mean, you're still really good looking and you clever and stuff but you're changed since Google has come onto the scene and you're kind of acting like him - and he's a user.

I'm getting fed-up to shit of everything becoming infested with adverts to the point I think the internet has given all connected devices serious Cat AIDS.

I like Phillips, I like Microsoft. I like many brands but if they put adverts in things I've paid for then they're basically calling me a cunt instead of a customer by trying to sell me shareware at premium prices -  and that makes me look elsewhere.",pihole,1647428529.0
7908,comment,1,i0veekc,,"I could of sworn this same subject came up in Windows 10. None the less Microsoft did put ads on the Lock Screen so I can see this happening. However, I can see Microsoft doing this for only the Professional & Home version. I doubt they will do this for the Enterprise and Education version just like they didn’t allow ads on the Lock Screen for the Enterprise and Educational versions of Windows 10.",pihole,1647430073.0
7909,comment,1,i0vji42,,"It's time to get people to move to Linux Mint, let alone Pihole.",pihole,1647433165.0
7910,comment,1,i0vurp5,,"there seems to be a fundamental misunderstanding of what pihole does

it just blocks domains. Not ads",pihole,1647438758.0
7911,comment,1,i0w72u3,,Yet another reason to use Linux.,pihole,1647443925.0
7912,comment,1,i0xu813,,As I was reading the title I said thats what pihole is for then I saw it was posted in r/pihole lol,pihole,1647467428.0
7913,comment,1,i1bzst1,,https://www.youtube.com/watch?v=tHEOGrkhDp0,pihole,1647727603.0
7914,comment,1,i1c08za,,Next on (Bill Gate-less) Microsoft's agenda: Build SkyNet.,pihole,1647727800.0
7915,comment,1,i271ovb,,I really would pay more for a license instead of having ads in the explorer.,pihole,1648304842.0
7916,comment,1,i3bcsyz,,"Im currently on insiders pre-release builds at the moment, no such feature exists (yet), wil let you all know if it does!",pihole,1649047368.0
7917,comment,0,i0uw3bi,,"Gonna be hated by Microsoft fanboys and people who deliberately lock themselves into some proprietary eco systems, but I'm just gonna say it:

There are better, free and open source operating systems available.",pihole,1647415297.0
7918,comment,0,i0uy63a,,or don’t use Windows.,pihole,1647417031.0
7919,comment,0,i0vp2id,,"Windows 10 is ALL spyware bro!

&#x200B;

https://www.majorgeeks.com/files/details/destroy\_windows\_10\_spying.html",pihole,1647436084.0
7920,comment,0,i0vvwz7,,"Serious question: why would anyone still want to use windows? You can have Linux legally for free, no ads, no bloat, no bull crap. Beyond Photoshop maybe, most software is either there or will run with wine, and from what I gather, games have reasonably good support as well. Most hardware after 6 months old works out of the box..

I see posts like this and i seriously have a hard time understanding why people put up with this shit when better solutions are right there.",pihole,1647439270.0
7921,comment,0,i0vw4yu,,Moving to macOS in 2018 was life changing. I’ll miss you Win7 and I feel comfortable knowing you’ll boot on my stored Lenovo R400 when I need you.,pihole,1647439369.0
7922,comment,64,i0t2g23,,I'm clinging on to windows 10 until the very last second it's supported due to shit like this.,pihole,1647381883.0
7923,comment,2,i0w6upf,,"I saw this coming when they announced win 11 as another free upgrade. Win 8 to 8.1 to 10 now 11 has been free, where xp vista and 7 all cost about $1-300 depending on the license.

They have to make money somehow and pc sales are going to drop with more tablet users and systems having more longevity.

Edit: not saying that I support the move, but we should have seen this coming. Every facet of our lives will have ads or product as a service.",pihole,1647443832.0
7924,comment,12,i0v3a9f,,"Tabs in Explorer is a hidden feature in one of the latest public preview builds for Windows 11.

Microsoft haven't officially announced this, however people in the Windows Insiders program recently found it.

It's definitely overdue, but at least it's a step in the right direction.",pihole,1647421450.0
7925,comment,99,i0rkncx,,Gaming might disappear as an advantage if proton keeps getting better.,pihole,1647361144.0
7926,comment,45,i0rne6q,,"> ...another reason not to be using Win11

I don't disagree but not using Windows (any version) isn't an option for many people be that for technical reasons such as an application that doesn't work on a non Windows PC and doesn't have a viable non Windows alternative and\or a lack of knowledge that alternatives exist and\or a lack of knowledge about how to get those alternatives installed and working",pihole,1647362197.0
7927,comment,16,i0ruxka,,SteamOS is based on Arch-linux should help shift gaming away from the much bloated windowsOS.,pihole,1647365102.0
7928,comment,37,i0rkt35,,Check out Linux gaming with proton. Steam is using it and performance seems to be marginally better than Win.,pihole,1647361204.0
7929,comment,5,i0sco8q,,"I switched to Linux half a year ago, and I gotta say...

With steam proton and Lutris I almost have zero games that don't run on my kubuntu install.

Also, they run actually way better on my Linux, than they ever did on my windows. Its just insane.",pihole,1647371993.0
7930,comment,3,i0rx2ci,,I've been dual booting Win10 and Pop!Os for about 3 years. In the beginning I used Windows for Gaming and Linux for everything else. I slowly moved gaming to Linux aswell and now I think it's been almost a year since I bottled into Wkndows.,pihole,1647365932.0
7931,comment,3,i0uhgwb,,"There's only one game in my current rotation that I can't play on Ubuntu right now; Escape from Tarkov. And I'm working on that, lol.",pihole,1647404975.0
7932,comment,2,i0smy2a,,I’m not a gamer and if I am I am a console gamer so yea Linux is where to be!,pihole,1647375949.0
7933,comment,1,i0rkguv,,What do you mean?,pihole,1647361076.0
7934,comment,1,i0w3bd8,,"I get what you’re saying, but just not using the latest version of Windows is only sustainable for so long (or not at all) for those of us who get employer-issued PCs",pihole,1647442390.0
7935,comment,28,i0s89tw,,"To be honest it's gotten far easier to game on Linux compared to several years ago. With the introduction of Proton compatibility layer, released by Valve, it's given the gaming community a genuine alternative to Windows. Granted, games that have kernel-level anti-cheat like Genshin Impact or PUBG can't be played on Linux, but the majority of them work flawlessly.

And although Steam mainly uses Proton, there are independent launchers that install the necessary components for Windows games, a notable one is called ""Lutris"". Honestly, some of the games on Linux are just ""Download, Install, Run"".",pihole,1647370277.0
7936,comment,-21,i0s8vyo,,"Most reddit people could probably handle Linux ok.  But the other 99% of the population would be completely a mess.
Linux needs to fully get rid of the command line bulshit, like windows.  Until that happens, Linux is a no go for most people.",pihole,1647370515.0
7937,comment,1,i12wpa2,,"It already is, at least some distros (flavors), for example Kubuntu.",pihole,1647556666.0
7938,comment,8,i0u9tzn,,"Why?

Because they want to earn even MORE. 

No publicly traded company can ever be satisfied with a ton of profit, they need the MAXIMUM.",pihole,1647400929.0
7939,comment,4,i0sv79a,,"It's not really ads, you won't see an ad for Nike or whatever. It's more like ""hey did you know you can backup all your files with onedrive"" it's still an ad but I think ppl are overreacting here.",pihole,1647379095.0
7940,comment,16,i0tib9n,,Username checks... oh,pihole,1647388587.0
7941,comment,2,i12wtdw,,And I a Windows 7 and Linux user,pihole,1647556715.0
7942,comment,9,i0sm28s,,[deleted],pihole,1647375616.0
7943,comment,2,i0tlieb,,There are also other file explorers. You don’t have to use MS FE,pihole,1647389994.0
7944,comment,17,i0rp94l,,"Yeah, but you used to be able to buy a retail copy of Windows and not worry about getting a bunch of bloatware installed, too. I recently installed a retail copy of Win 10 and found Netflix, Disney+, and trials of Office and OneDrive preinstalled. Not to mention that each new Windows version has more data collection than the last.

I've tried Linux as a replacement but I found it to be a pain in the ass to install and configure software sometimes, assuming you could find software that did what you needed and felt polished. In fact, the reason why I recently installed Win 10 was to replace a Linux install that I had spent two weeks trying to get setup for a specific purpose and I couldn't get it to work like I wanted, but with Windows it only took a day, even after running a debloat script.",pihole,1647362911.0
7945,comment,2,i0rw0do,,"After many years of dipping my toe in and out of the Linux camp I finally made the jump last September when my 11 year old Windows PC died and so far I've not had any problems but then again, with the exception of Windows itself, I wasn't making any use of any Microsoft applications\services",pihole,1647365520.0
7946,comment,3,i0s6nd5,,"Files V2 looks interesting, thank you for the recommendation!",pihole,1647369648.0
7947,comment,9,i0rpy0o,,All of which goes way beyond the knowledge level of the vast bulk of general users,pihole,1647363176.0
7948,comment,-1,i0s6y55,,"ah don't worry about it, just *completely reconfigure the OS from the ground up while also blocking everything that microsoft might try to do*

I would like to order my OS without bloat and malware pls",pihole,1647369764.0
7949,comment,1,i0v24g0,,Thank you! it's just better than explorer anyway.,pihole,1647420455.0
7950,comment,1,i0v40w1,,"Last I checked: M365 desktop applications, Visual Studio, Adobe's suite, and about a million proprietary pieces of enterprise software.

Last I checked, Ubuntu also came pre-installed with a shortcut to Amazon right on the dock/sidebar.",pihole,1647422089.0
7951,comment,1,i0we41w,,"From the top of the Pi-Hole website home page

> Pi-hole®    
> Network-wide Ad Blocking

Yes, the way it works is to block the domains that feed ads but that's how it works rather than what its primary purpose is",pihole,1647446768.0
7952,comment,1,i0wfblh,,So you can use a system nothing runs on? 😂 for avg joes who just need a browser sure but for most of us and nerds heck no.,pihole,1647447264.0
7953,comment,2,i0v43e4,,"""Better"" depends entirely on your use case and workflow.",pihole,1647422148.0
7954,comment,24,i0t43zl,,I have a box running Win 7. Old school.,pihole,1647382535.0
7955,comment,10,i0t37du,,LTSC for the win,pihole,1647382178.0
7956,comment,8,i0tp8n8,,"Get yourself an unsupported CPU

MS mad at this simple trick. 



LOL",pihole,1647391620.0
7957,comment,4,i0v9tf2,,There is no way I am going to allow my kids' gaming Windows PC to run Windows 11. Once Windows 10 support runs out it is either going to remain for them to play games offline without Internet connection or I will upgrade it to some Linux version like the other computers in the household.,pihole,1647426762.0
7958,comment,2,i1kn4p2,,May I introduce you to my good friend GNU/Linux?,pihole,1647893245.0
7959,comment,1,i0uda5r,,Still rocking Windows 8 here.,pihole,1647402672.0
7960,comment,1,i0wtea4,,Like tabs instead of new windows kind of tabs?,pihole,1647452952.0
7961,comment,17,i0s8iuf,,I haven't heard of this? What's proton?,pihole,1647370373.0
7962,comment,7,i0sf08k,,"Only if a cross-platform drop in replacement for anti-cheat and DRM come to Linux. 

I’m not holding my breath.",pihole,1647372897.0
7963,comment,28,i0ro29a,,"You are correct... for now, but that is rapidly changing.

Just switched my Laptop to Pop!_os and the usability out of the box is insane.

My keyboard backlight, touchscreen, media keys, even my network printer worked flawlessly without any interaction on my end. Didn't even install drivers.",pihole,1647362455.0
7964,comment,4,i0uyg0p,,"I think /r/GIS (Geographic Informational System) is a good example for this. ESRI is a company that sells (very expensive) licenses for a GIS and many of its users are unhappy (expensive licenses, unstable programs with frequent crashes, proprietory file formats, lobbying) and might even use alternative GIS like /r/QGIS (FOSS), but often they're not allowed, because their workplaces don't allow or support them to do so.

Universities often educate GIS users as if ESRI products and GIS are the same, but that is the result of an industry that is happy to get scammed.

I don't think there is non-Windows compatible ESRI support.",pihole,1647417265.0
7965,comment,15,i0rw6gk,,"It was based on Debian before that. A significant portion of the improvement we've seen in Linux gaming in the last few years has been thanks to Valve, both through their own contributions and the pressure they're able to apply to game studios",pihole,1647365586.0
7966,comment,15,i0rl26l,,"I know, I know, still you can’t say that 100% games are available on Linux (though it moves in the right direction)",pihole,1647361300.0
7967,comment,13,i0tdayr,,"This might actually drive me away from windows for good, even if I have to sacrifice not being able to play certain games. Ads in my OS is fucking hilarious and dumb.",pihole,1647386384.0
7968,comment,14,i0sb5os,,"I think it'd be fine to keep command line stuff and just add more gui support. I'm not the savviest with command line, so I usually go to gui apps first, but now and then I run into issues finding a gui version, or, at least, a full-featured gui version.

For instance, when I was using the noveau graphics driver, the only way I could figure out how to adjust display gamma was through command line. I couldn't figure out digital vibrance at all. Though I did switch to nvidia's driver because I was getting really bad stutter in some games with noveau (skyrim, for instance), and the proprietary driver has a gui for display adjustments. I'd love to be able to use a better open source driver someday, but seems like that's been made more complicated by the recent leaks.",pihole,1647371398.0
7969,comment,12,i0scr82,,"> Linux needs to fully get rid of the command line bulshit, like windows

And yet for the backend\server side of things Microsoft seem to have gone all out to force things back to the command line with powershell now being needed to do many things",pihole,1647372025.0
7970,comment,5,i0sakql,,[deleted],pihole,1647371168.0
7971,comment,-3,i0sdga2,,"Its a no-go for people, because they think Linux users look like this: https://youtu.be/UkoqIlppfhc


They actually don't.

Just install and get used to using the programs.

No need for a CLI (unless you want something VERY specific, but that is mostly requested by people who know they're way around a CLI anyways)",pihole,1647372294.0
7972,comment,10,i0u68he,,"> but I think ppl are overreacting here.

People say this like that isn't always how it starts, every single time. They always start small, then keep pushing more and more intrusive and awful marketing. I've never understood people who defend this bullshit like they haven't seen this cycle again and again.",pihole,1647399221.0
7973,comment,1,i0v35f5,,"> hey did you know you can backup all your files with onedrive

Flashback to five years ago.

https://www.onmsft.com/news/now-microsoft-is-hosting-ads-for-onedrive-in-windows-10-file-explorer",pihole,1647421334.0
7974,comment,3,i0uvcze,,"Same, I deleted all my windows partitions like a week ago, to put my Linux programs on these hard drives.
Am super happy with this decision.",pihole,1647414695.0
7975,comment,3,i0uvklh,,"First of all, happy cake day.


Second, I know this, but the whole Operating System ist slowly turning into bloatware/a privacy nightmare.
They force you to get a Microsoft account to use the OS, they want your credit card to install it, sell your data from WITHIN the OS and now they wanna make even more money with you, by putting ads into the MAIN program of the OS.


This is definitely not something I can tolerate.",pihole,1647414870.0
7976,comment,1,i0rq67q,,I was gonna say... hasn't windows explorer been shipping with ads since they put AOL icons on the desktop?,pihole,1647363263.0
7977,comment,1,i0sctxj,,No worries mate I've used it since it came out i love it!👍🏼👌🏼,pihole,1647372054.0
7978,comment,2,i0rrjqm,,"Yeah true. But then again those ads wont irritate the ""general users"". The ""general user"" always has bloated windows (i work with this see this kind of bloated pc's everyday). Only those who irritates about it want to do something with it. And for the user that want to do something about it its not hard at all.",pihole,1647363794.0
7979,comment,3,i0rqs03,,Right but if it bothers you that much there are ways around it. Not excusing Microsoft but it is what it is,pihole,1647363496.0
7980,comment,1,i0scqb7,,"Sorry, i dont work for microsoft so you would have to ask someone else.",pihole,1647372015.0
7981,comment,1,i0xihdj,,Nothing runs on?? Huh? I'm guessing that you're making a joke. Either that or your idea of what Linux is is about 15 years out of date.,pihole,1647462876.0
7982,comment,9,i0uba3e,,"Not sure that no ads are worth zero security fixes, so I hope you've got access to the ESU.",pihole,1647401649.0
7983,comment,2,i0t3pmd,,?,pihole,1647382378.0
7984,comment,4,i0vf9ov,,... or disable TPM! That's what I did to keep Win10,pihole,1647430637.0
7985,comment,4,i0vkj5r,,"Considering how quickly Steam's Proton compatibility layer for gaming has gotten (and will continue thanks to the Steam deck), Linux gaming is really becoming a true option.

My only problem is Adobe CC and Office 365... I have to use it for work, and I'm unsure of compatibility... at least from what I've seen and read anyway.",pihole,1647433729.0
7986,comment,1,i1ko5k6,,"I'm waiting for the linux gaming scene to become a little more mature first, hopefully things will get better after the steam deck launches. That and my corsair CPU water cooler doesn't play nicely with linux.",pihole,1647893652.0
7987,comment,2,i0wvjqb,,https://youtu.be/d8WC36hlfHw?t=18,pihole,1647453803.0
7988,comment,54,i0s8t4s,,The magic sauce that makes Steam Deck work. Basically it's a fork of Wine.,pihole,1647370485.0
7989,comment,5,i0utk0o,,Steam Deck uses Proton to run games which don't have a native Linux variant and the Steam deck already supports almost 1100 games and increasing. All due to the power of Proton.,pihole,1647413243.0
7990,comment,14,i0saj7t,,[Proton](https://en.wikipedia.org/wiki/Proton_(software\)),pihole,1647371151.0
7991,comment,9,i0uonye,,"DRM hasn't really been an issue. 

Anticheat has, but only Kernel level Anticheat like EAC and BattleEye. There are Linux versions of these but it's up to the devs to allow it for their game.

The latest big / most widely known titles to work on Linux using these are Elden Ring and Apex Legends. Rumor has it that Dead By Daylight is implementing it for Linux really soon as well.",pihole,1647409579.0
7992,comment,17,i0ryaok,,"Yep, all non-corporate laptops in my house are running Mint.  Everyone in the house has no trouble with them",pihole,1647366407.0
7993,comment,2,i0tuoye,,"How's discord streaming if you maybe used that? Sharing your screen/audio from the desktop version? Especially maybe with webgl in browsers since their GPU acceleration seems to mess stuff up the most.

This is the one essential program for me keeping me from switching.",pihole,1647394034.0
7994,comment,1,i0u6xf2,,"Some of it will probly never change, like small software houses that can't afford to throw away resources on a linux port.",pihole,1647399549.0
7995,comment,14,i0rx8m3,,"Gabe Newell is our savior. in his name we praise.

ps: imo the biggest thing is getting nvidia and amd to optimize linux drivers and gaming as much as they have for windows.",pihole,1647366001.0
7996,comment,9,i0scvin,,"I almost have none games that don't run on Linux. Look up lutris. If steam doesn't have the game you wanna play, lutris has it!",pihole,1647372070.0
7997,comment,2,i0v9fhy,,"I wish I had time to play 100% of my games, but I don't, so I basically decided a long time ago to just ignore the games that do not run in Linux and I still have too many games that I want to play and not enough time.",pihole,1647426468.0
7998,comment,2,i0ui5xs,,"Yeah, well you can't play Greed on Windows so that goes in both directions. I can play everything in my game rotation on Ubuntu - save for one, Escape from Tarkov. Good thing you can have two OSes at once...

I just have a 250gb partition set aside for Windows and a couple games that run a bit better in Windows on one of my hard drives. It's not like storage is expensive.",pihole,1647405383.0
7999,comment,4,i0sia7a,,"And that makes sense, not everything needs a GUI. It's easier to write automaton scripts that way. That's how sane application development should work anyway, first you build the command line tools that do all the ""work"", and the GUI part is nothing but a series of buttons that call those commands with special parameters applied.

""Getting away from the command line"" is a weird ask anyway. It's never going to go away. What they really want, is probably more GUI front-ends for existing command line tools.",pihole,1647374156.0
8000,comment,1,i0vzoyt,,Also considering you don’t need to use the command line for most modern distributions assuming people aren’t still trying to use Ubuntu.,pihole,1647440898.0
8001,comment,-3,i0sb68j,,Now imagine your Aunts and uncles trying to do it.,pihole,1647371404.0
8002,comment,-1,i0serql,,"It's never been that easy.  I used to exclusively use dos, and I work a bit in PowerShell azure, Im used to command line stuff.  But I've never had anything but frustration every time I've made an effort to use Linux.   I do it for a week, and then it's ""fucking hell, back to windows""

Apple has done Linux correctly.  Simple, easy, intuitive.  Not a single one of those words apply to Linux distro.  

I mean, just trying to use a file explorer in Linux is a pain in the ass.",pihole,1647372805.0
8003,comment,4,i0uvz7t,,"Yeah I mean you can always point to something and say this is where it started. Some say all the MTX started with all the trash mobile games and then started comming into the PC gaming world. But you can also say it started with Pokemon cards, or any other collectible item. Where it starts doesn't really matter and it's important to not flip the fuck out just because something ""could"" happen when there is no real indication that it will.

I don't think telling users of your software about a new and improved autocorrect feature that is free is something to go ""OOOOOHHH MY GOD IM NEVER USING WINDOWS AGAIN!!"" about. I would call that overreacting.",pihole,1647415203.0
8004,comment,1,i0sbvi6,,"I had forgotten about that. I guess at least those were just shortcuts to a website, but it started with that. 

https://news.microsoft.com/1996/06/04/access-to-compuserve-online-services-to-be-included-in-windows-95-operating-system/

https://www.flickr.com/photos/schill/12806114295",pihole,1647371679.0
8005,comment,-1,i0semlc,,"I disagree? My elderly mother HATES shit like this but fixing it is beyond her. Not everyone is computer savvy, but still hate invasive ads. For people who use the terms “internet” and “chrome” interchangeably, I doubt they’re going to be messing with firewall settings and external adblockers.",pihole,1647372750.0
8006,comment,1,i0xtuba,,"Lmao I mean what normal people use a computer for.. Games hardly run on it especially any game with online\\anti cheat engines. Probably 90% of the software I use either has zero support for Linux or it's pretty piss poor. I mean even it's hardware support is pretty crappy, my $200 Logitech keyboard doesn't even work properly on it and it's a known issue for almost 4 YEARS! Lots of hardware doesn't work out of the box on linux yet on windows it runs just fine even with generic drivers lol.",pihole,1647467280.0
8007,comment,21,i0ubo9y,,"It doesn't connect to the internet, so I'm not too concerned.",pihole,1647401848.0
8008,comment,27,i0t4uhe,,"Windows 10 has a LTSC version, which gives you security updates for much longer at the cost of ""feature"" updates. [You can see here how much longer LTSC versions are supported for compared to the non LTSC versions](https://en.wikipedia.org/wiki/Windows_10_version_history#Channels).",pihole,1647382831.0
8009,comment,1,i0vrgqh,,O365 has a web version at least.,pihole,1647437248.0
8010,comment,17,i0smj4s,,[Proton (working Wikipedia link)](https://en.wikipedia.org/wiki/Proton_(software)),pihole,1647375792.0
8011,comment,8,i0sgmfe,,I have Mint on our media laptop. I showed my wife pictures of various Linux desktops and she liked the Mint colours so we went with that. Both her and my mother have no issue navigating the interface.,pihole,1647373518.0
8012,comment,7,i0t2bm2,,Can I theoretically wipe my windows 10 laptop and start fresh with mint?? Or others that were mentioned here?,pihole,1647381836.0
8013,comment,3,i0uhumn,,"Discord streaming works flawlessly for me, both with desktop streaming and individual apps. Ubuntu 21.10. You can also install a natively compatible OBS for Twitch streaming.

I'll try to answer ""Especially maybe with we go in browsers"" if you can make it make sense, I can't even parse it lol.",pihole,1647405197.0
8014,comment,10,i0sgn9k,,"I was hoping Linus saying ""Fuck you nvidia!"" directly to the camera would've helped move things along more than it did, but I guess valve will pick up the torch from here!",pihole,1647373527.0
8015,comment,2,i0u5231,,they're doing it: https://www.phoronix.com/scan.php?page=news\_item&px=AMDGPU-Closing-4-Million,pihole,1647398674.0
8016,comment,8,i0sinxt,,This uncle grew up with basically every computer being command line.,pihole,1647374304.0
8017,comment,4,i0sia8i,,"Wait, a file explorer?

I've never heard that complaint before, what distro were you using? What were you trying to do?

Basically every DE I've come across bundles a file browser that works.",pihole,1647374156.0
8018,comment,1,i0skmrn,,Ditto on this.,pihole,1647375063.0
8019,comment,0,i0w8ukl,,"Yeah but OneDrive isn’t free, so it’s an ad. One of these things is a feature notification, the other is an ad. The difference is when something costs money.",pihole,1647444642.0
8020,comment,3,i0shwgg,,"Yeah, i see ur point. But my experience is a bit different on this topic. I rarely see someone complain about this kind of stuff at my work and I probably get around 100 pc's a day that i need to fix and never heard anyone say anything about pre installed games, news and weather at the taskbar and search and other bloat stuff. The only people from my experience that want a fully debloated pc is the people that find it really irritating and maybe uses pc for gaming etc.",pihole,1647374007.0
8021,comment,1,i16ywag,,"Absolutely, Microsoft and Apple have the desktop market. However you characterize Linux, there are between 3 and 3.5 Linux users. I totally get wanting the relative simplicity and predictability of Windows.

> $200 Logitech keyboard doesn't even work properly

Those work out of the box because the software is more-or-less bundled with the drivers. The downside to that kind of approach is that you get hugely bloated software installs that are actually marketing & data harvesting tools. And... a native M1/MacOS version of Options only came out about a month ago.

Are you talking about stuff like macro recording, or Unified/Lightspeed pairing, or the silly-but-cool keyboards with the LCD displays?

For pairing, Solaar is the replacement for Logitech. I think there's an LCD display tool for Linux, as well.",pihole,1647632462.0
8022,comment,6,i0tx2sw,,"Just to note, Windows 10 Home, Professional, Education and Enterprise are supported through Oct 14, 2025.  

Also, I wonder if Enterprise or Education Win 11 would get this as well. I can totally seeing stuff like this happen on Home edition.  Hopefully not stuff like Edu/Ent.  Though at least you have more control over your OS where a local policy will be able to turn it off.",pihole,1647395069.0
8023,comment,6,i0t59f7,,Well that's nifty thanks,pihole,1647382999.0
8024,comment,1,i0w8b8r,,Yeah but it’s garbage if you’re a heavy office user. A ton of excel features are missing completely and word is more like wordpad.,pihole,1647444423.0
8025,comment,2,i0smqa9,,"I'm on desktop

My link works for me but yours doesn't",pihole,1647375870.0
8026,comment,12,i0t3iov,,"Yes. You would download the unetbootin app and burn it into a flash drive. 

The cool thing about Linux is most variants have a live USB that let's you test out the OS before you Uninstall windows/ Mac. You can even install software on the thumb drive to make sure you're functional. 

With steam making a concerted effort, games are performing almost as well as windows now in steam.",pihole,1647382301.0
8027,comment,1,i0ungry,,"Webgl* sorry, autocorrect apparently didn't like it. I just heard discord has multiple issues in that regard and that canvas + webgl in browsers is the worst one.

I don't care about OBS since it's only streaming within discord calls for a long distance relationship.",pihole,1647408750.0
8028,comment,1,i0sme5p,,turns out that a private company just wants to make money. weird,pihole,1647375740.0
8029,comment,1,i0sjtht,,Probably just me being dumb.  But I had to edit a settings file for a Minecraft server and it wouldn't let me because I wasn't root and I guess it was in a protected folder.  I didn't want to do it comman line.  I just wanted to open the stupid file and edit it.  Tried for an hour to figure it out.,pihole,1647374747.0
8030,comment,2,i0wdulk,,"Onedrive is free for up to 5gb.
And most users have a m365 license with more storage included. Advertising features you are paying for and not using is good in my opinion.

I understand the concern here that it could become much worse then what we have currently seen. But lets reserve the pitchforks for when that actually happens. I really doubt it will, maybe in some new free version of windows. But I highly doubt ads will make it into pro and enterprise versions of windows.",pihole,1647446660.0
8031,comment,3,i0t75xn,,No problem,pihole,1647383783.0
8032,comment,1,i10f1ob,,I know and don't use it either that way. But this possibility doesn't hurt though.,pihole,1647520745.0
8033,comment,5,i0uocll,,"You're on desktop using New Reddit, which is where the problem arises. 

It's a known bug that they're likely not going to fix because they want people on New Reddit or the official app, not Old Reddit and superior 3rd party apps.",pihole,1647409361.0
8034,comment,13,i0sn12i,,Interesting. I’m on mobile using Apollo… yours shows a broken share link and an article not found error from Wikipedia.,pihole,1647375981.0
8035,comment,3,i0uud8w,,"That's so great to hear☝️I've been telling my friends eventually Linux will be where it's at for years now.

Just got most of them to switch to PC, now I gotta get them into Linux!",pihole,1647413890.0
8036,comment,6,i0srf3x,,"Linux users might actually buy more hardware like video cards from companies supporting the operating systems they wanna use if those companies* actually did support those operating systems. Not a difficult concept to grasp...

*edit for bad phone speech-to-text",pihole,1647377635.0
8037,comment,2,i0sncyn,,"Oh right.

That's unfortunately less of a file browser issue and more about how the permissions system works in Linux vs. Windows.

In Windows if you tried to edit an admin-protected file I imagine (although I haven't tested it) Windows would just prompt you to do the whole admin confirm thingy that pops up when you try to install stuff.

It's not a bad idea to allow file browsers to attempt to spawn the editor/file opener/whatever as root, although I think there's probably a technical limitation with that.

The ""correct"" way to edit that file without opening the CLI would be to open either gedit (or whatever) or the file browser as root then do the edit. This isn't _ideal_ though.

Actually saying that, the ""correct"" way to do it would be to not install the minecraft server files as root, although I can't remember how the server is installed in Linux.",pihole,1647376105.0
8038,comment,3,i0v8mlo,,"I'm on old Reddit

New Reddit is an unmitigated mess",pihole,1647425857.0
8039,comment,6,i0t2prl,,You need to add a backslash before the first close parentheses on your link so that Reddit's markdown doesn't eat one of them.,pihole,1647381987.0
8040,comment,1,i1lr673,,Yes I use my Q2 only for mobile.,pihole,1647910392.0
8041,comment,2,i0szo38,,"more like: someone pointed out to nvidia that they don't have to pay microsoft exorbant fees to run their hardware on linux. also, steamos means someone is being paid (hopefully a team of best devs) to develop gaming on linux including the various software optimizations.

but it's not there yet because the steamdeck would probably run faster and higher resolution on windowsOS.",pihole,1647380832.0
8042,comment,1,i0sonvs,,"Yeah. It auto installed it all as root.  But that might be my fault.  I used CLI to install it, and I was root.  So maybe that's why?",pihole,1647376600.0
8043,comment,2,i0vmn41,,Fuck new reddit. All my homies hate new reddit,pihole,1647434848.0
8044,comment,3,i0t67ru,,We may be saying essentially similar things here. Supporting Linux development is good for business. ;),pihole,1647383393.0
8045,comment,1,i0srxsp,,"Yeah files created by a user (in your case `root`) are created with that user as the owner of the file, plus default permissions for the same group as the user (usually read/write but sometimes read-only depending on a few factors) as well as everyone else (usually read-only).

Usually if you have to install stuff as root then edit it as non-root after the fact you'd want to go in and either change the owner of the files to your user (or a created user for the minecraft server) or update the permissions so ""everyone"" can read/write the files.

Similar things happen with Windows permission systems tbf, it's just Windows is almost always a single-user system so you generally don't need to think about it (especially since the single user is also usually the administrator). Linux was designed for multiple simultaneous users so its permission system has to be a bit different. It can take a minute to get used to if you're coming from a Windows ""single-user"" style setup.

It does have some niceties, like you can set things up so that your minecraft server isn't allowed to do anything with non-minecraft files by giving the server a different user, then adding yourself to the same group so that you can change its files. It also helps prevent people from accidentally borking their system by messing around with files they're not supposed to (it's still possible ofc, but only because people keep trying to do everything as root so they tend to do the dangerous thing with the user that's allowed to do it).

Edit: As an example, I've got restricted permissions for all of my system level directories so I have to know what I'm doing if I want to change any of them, then I have my home directory set to myself as owner, then a network filesystem which has ""everyone can do whatever"" permissions set, since other people need access to it as well. It means I can go about doing whatever in my home directory without having to think about permissions, then if I have to change some system level stuff I can drop into root and make those changes (my CLI changes what it looks like when I'm root so I know when I'm in the ""dangerous"" user).",pihole,1647377836.0
8046,post,0,tej5dj,Pihole no longer blocking Twitch ads after setting up new router,Just recently set up a new router and now pihole isn’t blocking Twitch ads on iPhone when before the new router it did no problem. I set the DNS to the new pihole IP address and restarted both the pihole and iPhone and still no luck. Is there anything I should check in my routers settings?,pihole,1647328015.0
8047,comment,1,i0q1dfl,,"What about other devices? What about other sites? Did you open the Pihole GUI and see that DNS queries hit the pihole when surfing with the client? 

Maybe the phone uses 4G/5G?

Maybe IPv6 is configured differently?",pihole,1647329081.0
8048,comment,1,i0qnwgh,,Is the Pihole having a DHCP reservation in the new router?,pihole,1647346564.0
8049,comment,1,i0qv1qu,,Is your new router using IPV6 and your pihole is only set up for IPV4?,pihole,1647350372.0
8050,comment,1,i0ufy9w,,"Yes same thing on other devices, still getting ads just on Twitch streams (and Youtube videos but they showed on Youtube previously) I am seeing the blocked DNS queries increase on most sites I visit including Twitch. I also turned off my cellular and still am seeing ads. What about IPv6 would you think is configured differently? I checked my routers IPv6 settings and it's actually disabled. Should I try turning it on?",pihole,1647404118.0
8051,comment,1,i0ufo0v,,It does not. It did not have one on the old router/modem as well.,pihole,1647403960.0
8052,comment,1,i0ug1z2,,My new routers IPv6 settings are actually disabled. Should I try enabling it?,pihole,1647404176.0
8053,comment,1,i0uwp5c,,"If IPv6 is off on the router you should be safe against this (unless there is nit a second router in the network; you could double check in the network settings of a client).

Talking about ads in streams: if they are sent out by the same servers the real content from these can not be blocked by DNS. Youtube ads for example are part of the video stream you want to watch, so no chance for Pihole. Maybe Twitch does the same thing (which I would)? See FAQ here in the sub.",pihole,1647415798.0
8054,comment,1,i0ujv33,,"Then you're basically counting on luck here. IPs get reallocated sometimes. Maybe not so much in your old router, maybe it did on your router. Especially when you restart devices or router. Try reserving IP.",pihole,1647406406.0
8055,comment,1,i1aske6,,"I understand the Youtube ads part as it never blocked Youtube ads but it always blocked Twitch ads. I never specifically tried to I just set up PiHole normally and entered my blacklist and it happened to block Twitch ads as well. Seems pretty coincidental that it stopped blocking them after I got the new router so I don't think my blacklist needs to be updated (though not ruling that out). 

I should have also mentioned that my old router was a modem/router combo from my ISP that I have now switched to bridged mode in order to set up my new router",pihole,1647708994.0
8056,comment,1,i0un1cy,,Ok thanks I'll give that a shot. Though the IP of my Pihole never changed on my old router and it has not changed on the new one after setting up the new router if that's when you mean,pihole,1647408464.0
8057,comment,1,i1augpc,,"I have no good idea anymore. Unless the solution finds you, you have to investigate in detail what is going exactly. 
You can get detailed information by adding a debugging proxy into your network. This can be an app (I used to use  Charles) on one of your computers. You tell the client to use this proxy in the network settings. Then you can see exactly each and every request and response. For https it is a bit more complicated.

When you understood how the ads are triggered you can see if it needs more blacklist or if Pihole is circumvented.",pihole,1647709804.0
8058,comment,1,i0usjmg,,We can rule that out as an issue then. Can you open the Pihole dashboard and check if there are any updates available in Pihole? and can you tell me how you have deployed Pihole? Is it a standalone/VM linux installation or a Docker image on windows?,pihole,1647412452.0
8059,comment,1,i1auxnf,,Ok no worries I'll try that at some point. Thanks for the insight,pihole,1647710003.0
8060,comment,1,i1as1mg,,There was updates for PiHole that I noticed after I setup the router and I thought that might have fixed it as well so I updated it and it still did not fix it. It is currently up to date. I have PiHole running on a Pi Zero 2 W that has nothing else on it besides PiHole,pihole,1647708767.0
8061,post,0,tehvqj,How to undo the DNS changes to my router?,"Long story short, I need to stop using my Pi-hole that I set up 2-3 years ago. I figured all I needed to do was remove/undo the setting on my router where it points to the pihole as the DNS server. 

Should be easy, I figured. 

[Turning this off makes it where I get no internet at all.](https://i.imgur.com/yPjjnLm.png) This is the only place where DHCP is mentioned at all in my netgear. 

Well, there is [this part](https://i.imgur.com/jxDPb42.png), but I don't think it's relevant. 

I set the pihole up years ago, I don't remember how to undo it... I'd rather not have to factory reset my router, either. 

Does anyone know what I need to do? For reference, It's a netgear Genie (C3700-100NAS).

Edit: The setting was in ""Internet"" and not in any setting with ""DNS"" in the title. Very cool.",pihole,1647322863.0
8062,comment,2,i0pzmfp,,"Worst case you could always reset router.

Did you use DHCP on your pi?",pihole,1647327673.0
8063,comment,1,i0puxqr,,"Check the manual. Look for the DHCP DNS settings.

Edit: or did you set the router DNS entry to your pihole?",pihole,1647324112.0
8064,comment,1,i0py2e5,,If you made the changes to your router try rebooting all your devices and the router too,pihole,1647326456.0
8065,comment,1,i0r91h7,,Factory reset?,pihole,1647356553.0
8066,comment,1,i0rbmyp,,"I figured it out eventually. I had to comb through every menu to find the correct DNS settings. Were they in the two menus that had DNS in the title? No...it was in ""Internet"". 

""Internet"" had the DNS settings I needed. Swapped off of the Ip for the pihole for a dedicated DNS server, router restarted, and bam. I can finally turn my pihole off and the wifi still works. If I turned the pihole off before, the wifi wouldnt connect to the internet, and only direct connections(LAN) received internet.",pihole,1647357607.0
8067,post,0,ted6bn,Blocklist for anime and manga?,"Hi I'm trying to find blocklists that block anime, manga, manhua, mahwua, etc.... I won't go too much into the reasons why. Like ads and other sites there are a tons of domains that would need to be blocked, the also change very often. I haven't seen any blocklists that attempt to block this type of content. If anyone as any links to lists like this or at least attempts to create lists please post them here :)",pihole,1647307313.0
8068,comment,1,i0pf6do,,"Oh that's simple, just route every query to 0.0.0.0 ....",pihole,1647314717.0
8069,comment,1,i7ffilf,,That would be very nice to have,pihole,1651760238.0
8070,comment,2,i0q0n5r,,I'm not trying to block access to all networks,pihole,1647328486.0
8071,post,2,teclhw,Will pihole work in a docker container even if a VPN is turned on?,"My rpi4 has mullvad running 24/7 for..reasons, and I won't turn it off. Will pihole still work inside a docker container on my local network, even if mullvad is turned on system-wide on the pi? It seems like it would, but wanted to check here. This might be a silly question.

Thanks for the help!",pihole,1647305689.0
8072,comment,1,i0pbx5z,,As long as devices on your network use the pi as DNS and pihole can access the internet for DNS lookups it should work fine I believe.,pihole,1647313158.0
8073,comment,1,i0q48c7,,"Could be tricky, maybe MacVLAN is your friend.",pihole,1647331465.0
8074,comment,1,i0q1p09,,I agree. When connected through VPN the remote client should behave like other locals unless there are special configurations in place (a VPN gateway in general is able to treat the remote client differently but this is not what home setups usually look like).,pihole,1647329348.0
8075,post,0,tec1hu,pi hole trouble,"So I'm looking to make a pi hole to block ads and have many questions,

1. Does it actually block ads? 

2. Does the amount of ram affect how fast it will block the ads? 


Yes the second question is stupid, but I'm the type of person who looks at will this be slow in the future, right now I have a raspberry pi 4 8gb, and was hoping the raspberry pi 3 b+ or the raspberry pi 4 (2gb, 4gb). I just want to make sure which ever I get ot won't be obsolete in the future.",pihole,1647303998.0
8076,comment,3,i0osfn2,,"1.	 Yes, it actually blocks ads.
2.	 The amount of RAM does not affect how fast it will block ads. 8GB is far, far more than needed to run Pi-hole. A very popular platform is a Pi Zero with 512 MB of RAM, and that has plenty of headroom.",pihole,1647304299.0
8077,comment,1,i0osdog,,"It resolves known ad host names to 0.0.0.0 so your browser doesn’t display them. 

The amont of ram won’t change anything. I’ve run DNS servers (which is what this is) on less then 8mb back in the day for an entire ISP. It’ll just make the web interface more snappy. The bottom of the line raspberry pi is more then enough.",pihole,1647304274.0
8078,comment,1,i0xwuwx,,"If you have an old pc, run pihole in a virtual machine (virtualbox or vmware) and it'll cost you nothing more than a little time to set it up.",pihole,1647468480.0
8079,comment,1,i0otjus,,That answers my question thank you so much now if only I could find one that's not expensive,pihole,1647304801.0
8080,comment,2,i0oth0o,,"With the default blocking mode, the response address is 'unspecified address' (`0.0.0.0`), if it returned `127.0.0.1` devices would attempt to query themselves, which would be all kinds of fun for devices that happened to have webservers.

There's various blocking modes, and [none of them should return localhost](https://docs.pi-hole.net/ftldns/blockingmode/).",pihole,1647304766.0
8081,comment,1,i0ou4s2,,"Any not-second-hand Pi you're able to acquire will run Pi-hole equally well for your average home network. DNS isn't particularly resource intensive at all.

The only reason I add the not-second-hand caveat is on the offchance that maybe you managed to get something weird and old like a revision 1 model B 256MB, but that's fairly unlikely. Incidentally that would still run Pi-hole fine provided you weren't using the graphical interface. Using the web UI and long term database would be kinda questionable.

Any recent generation model B or 0 will be fine.",pihole,1647305060.0
8082,comment,2,i0ovl6s,,Your right. I’ll adjust my comment. Idea is same.,pihole,1647305710.0
8083,post,1,te9yjr,Can't access raspberry pi/pihole,I have a pihole that I used to use with my network. It had DHCP and DNS settings enabled. After switching routers I did not turn on the pihole after. Now I'm trying to turn the pi on again but everytime I do it hijacks the network by connecting to my devices on the network because they're all now detecting the pihole as the DHCP and DNS server and I lose internet access and I am not able to access the pihole to change the settings. Anything I can do here or should I reinstall raspberry pi OS and pihole? I'm trying to not format the SD card since I have a screen installed on it showing PADD and that was a little bit of a headache. Thanks for the help.,pihole,1647297937.0
8084,comment,2,i0q2833,,"But when a client receives IP from Pihole, it should be able to access the Pihole!? You might habe no Internet but you can http or ssh into your Pi with this client.",pihole,1647329784.0
8085,comment,1,i0og82r,,You can pop the SD card out and edit the `/etc/pihole/setupVars.conf` file directly if need be. Disable DHCP (or change the range) from there.,pihole,1647298805.0
8086,comment,1,i0q22fb,,If you have a chance to connect monitor and keyboard to the Pi it would be easier.,pihole,1647329653.0
8087,comment,1,i0rfd9i,,I'll try for that. Thought I could access the pihole interface at least but I couldn't do that either,pihole,1647359089.0
8088,comment,2,i0ohi3a,,Thank you for that tip. Im on Mac though (coming from Windows) so I can only access the 'boot' folder. How would I access /etc?,pihole,1647299373.0
8089,comment,1,i0rffqh,,I tried but it's a black screen. My monitor is a 32 inch wide monitor though,pihole,1647359116.0
8090,comment,2,i0rgvkl,,"I usually start an IP scanner to scan the local IPv4 network. In the list you will find IP and some info about the neighbors.

I use LANscan - if you happen to be connected to two networks (WLAN and Ethernet) you have to care for scanning the correct network.",pihole,1647359673.0
8091,comment,2,i0oi4ml,,"Ah. Hmm.

That complicates things somewhat. I'm not entirely familiar with OSX. It's vaguely BSD-ish until it's not.

I think you'll be able to install `ext4fuse` using `brew`, but the exact process for doing so on any given OSX version is something I'll have to defer as an exercise for the reader or other contributor to the discussion.",pihole,1647299653.0
8092,comment,1,i0rh0rz,,Have you hit the enter key? Maybe a couple if times (maybe the top lines are cut off?),pihole,1647359728.0
8093,comment,1,i0ois17,,"Haha, youre right. Googling around found me a way but Ill have to download Ubuntu via Virtual Box and mount the SD card. or shit, could borrow the wife's Windows laptop. Ill try that and report back.",pihole,1647299944.0
8094,comment,2,i0ojinq,,"Yeah I wouldn't bother fucking about with a virtual machine. You should be able to do this all natively on the metal.

 Looks like it should (totally untested by yours truly) be:

`brew cask install osxfuse && brew install ext4fuse`

Then for some reason it'll default to RO, so you'll need to pass `-o allow_other` to it. Like `sudo ext4fuse /dev/path/to/sdcard  /mount/point/here -o allow_other` then you should be able to navigate it and edit it as you would any other filesystem.",pihole,1647300274.0
8095,comment,1,i0tded4,,so. i finally got access into the folder on mac os. now i can not find the setupVars.conf file. I looked in all the folders. any idea? i found a file called dhcpd.conf but it seems to be a sample file.,pihole,1647386423.0
8096,post,2,te9pw6,Edit DHCP config on Pihole running in a docker,"Hi

I have a pihole running on pi 3 and in a docker on a Synology NAS.

The pi 3 is my DHCP server, but as I'm often messing about with stuff, I get complaints when the pi 3 is down and not handing out DHCP addresses, so I want to split the scope across the 2 piholes. 

Thing is, I have a quite a few static IP's set up. I edited 04-pihole-static-dhcp.conf manually to set them up as I had the details in a spreadsheet, so it was just a case of copy and paste.

How to I set this up in the docker instance? Is it just a case of editing the .conf file in the terminal on the docker instance as I did on the pi 3? 

Thanks.",pihole,1647297269.0
8097,comment,2,i0qyzi2,,"I've done it that way, just as you described. And that's worked for me.

But you need to keep in mind where the Docker instance of Pihole is storing data. If you don't have / use an external -- persistent -- volume, mapped to /etc inside the Docker instance, then you may lose the changes on reboot.",pihole,1647352241.0
8098,comment,1,i0rtk2p,,"Thank you, the persistent bit was what I was missing.

I'll have to try and figure that out and how to do it if it's not already set that way.",pihole,1647364571.0
8099,post,131,te9h0t,Pi-hole LCARS Next Generation Theme,"Hi guys,  
I don't know how about you, but for me pi-hole's LCARS theme is the whole new level of nerd :)

And because I like trek, css and tweaking things I wanted to contribute somehow as well, so I decided to make ""version 2.0"".

It's based on the original blue LCARS theme, but heavily customized and refactored (but not everything yet ...).

[Pi-hole LCARS Next Generation Theme](https://preview.redd.it/k3wncbnd9fn81.png?width=1590&format=png&auto=webp&s=f8281ae6e487b1ae7990b8473de96e1edc8e6f00)

[**Installation here.**](https://github.com/MichalSvatos/pi-hole-lcars-next-gen) **ENJOY!**  


(Originally I wanted to try to make PR to the official GH repo, but it's still kind a work in progress and I wasn't so sure about the reactions, so ... maybe I'll try in the future.)",pihole,1647296608.0
8100,comment,9,i0ogwqm,,"Is the button text alignment still kinda wack like the original? I see a few bits there so I'm leaning towards a yes. That kinda put me off, and originally I thought ""hmmm, at doesn't look like it should be so hard to fix"", but then I looked at the page source and...well, holy shit lol. You know. You've seen it.

The original author wanted to keep it all self contained and purely CSS but if you don't want to hold yourself to the same constraints then the world's your oyster I suppose.",pihole,1647299108.0
8101,comment,3,i0qyayv,,"Thank you for this awesome looking theme. I'm kind of a noob at these things. I just followed your steps in the github page but my theme didn't changed. 

Should I first find and install the original blue LCARS theme?

EDIT: I found it from [this comment](https://www.reddit.com/r/pihole/comments/s0tsao/holy_this_is_so_fun_just_found_the_star_trek/hs4en2n/)

All I had to do was go into the Settings > API/Web Interface.

Thank you again I love this theme.",pihole,1647351930.0
8102,comment,3,i0pjneg,,I just love FOSS thanks for making this,pihole,1647317037.0
8103,comment,3,i0q89wu,,"Looks great, think i stumble on a bug, top to the left, there is a black back that do not look like your photo. Its kind off miss-aligned. 

[photo LCARS](https://i.imgur.com/qpMy8j1.png)",pihole,1647334986.0
8104,comment,2,i0pfc2o,,Love it .  Thank you.,pihole,1647314795.0
8105,comment,2,i0rlczq,,"Thank you for your nice work, sir! In this StarTrek rich era it is nice to have this on my Pi-Hole!",pihole,1647361415.0
8106,comment,2,i0ssf51,,That's hot! I like it 🙂,pihole,1647378020.0
8107,comment,2,i3fv121,,Cool!,pihole,1649126015.0
8108,comment,-7,i0pj0nf,,"Whole new level of nerd, but atrocious to look at... That shit lasted about 30 seconds before I shut it off.",pihole,1647316700.0
8109,comment,1,i0r4jk0,,"I didn't think this could get better.

Thank you for proving me wrong.",pihole,1647354696.0
8110,comment,1,i0rk306,,"I really wanna implement lcars theme but my pihole install is perfect and everytime i fuck with it i swear its like a whole day of fixing shit etc.

Need to just make a legit install on this pi4 instead of the quick ""dietpi"" install i did because the normal method kept giving me errors and all kinds of buggy shit and dietpi was up and running in like 5 mins flat no errors.

Plus the first install i had on a pi3 burned up 2 sd cards super quick and this 3rd install using a different method hasn't done that.... granted its a 4gb pi4 only running pihole with a super premium sdcard but still",pihole,1647360924.0
8111,comment,2,i0q45tp,,"Hi, I'm not sure what do you mean by ""wack""? Can you be more specific (maybe screenshot :) )? Thank you.

Also, this **is** still pure CSS.",pihole,1647331407.0
8112,comment,2,i0r9c4l,,"I tried to add this [silly mashup logo I made](https://i.imgur.com/wVrGaRi.png) to the GUI but converting it to a SVG format and replacing it in the img directory with a name of ""logo.svg"" didn't worked out.",pihole,1647356673.0
8113,comment,2,i0q8udn,,Ha! Little bugger :D Thanks. Noted and I'll try to fix it during the weekend :),pihole,1647335476.0
8114,comment,6,i0q49zj,,"Well, in that case it's good that you have a choice, right? ;)",pihole,1647331504.0
8115,comment,5,i0qb3wm,,"There's a good example in your own supplied image on the top right corner. The alignment of the text inside its background for hostname and Pi-hole wordmark is just...odd. There's a few other places scattered around in the menus with similarly weird text alignment in toggles where the text appears to be justified right and/or too low. It would look a lot nicer if that text was centred within its background both horizontally and vertically.

Also, I'm aware. Hence the if.

Edit: My eye also expects the Pi-hole wordmark in the top left corner to be approximately centred within its background also as opposed to justified right, but that's possibly a bit more subjective.",pihole,1647337423.0
8116,comment,2,i0qi0cd,,Always nice to get some feedback and get rid of those bugs :) otherwise nice theme!,pihole,1647342793.0
8117,comment,2,i0qtc7x,,"Ad ""wordmark"" - it's justified right to be in the line of all the other texts in that ""visual"" column (status, buttons).

Ad alignment - right bottom corner is the correct alignment for buttons of the LCARS interface. Nevertheless you are right, that those 3 buttons on the top right corner are bit off. Especially comparing to other buttons, like in ""SETTINGS"" for example. I tried to unified as many buttons as possible. Now I think about it I think that there was a reason why I did it like this. Anyway I'll look into it and I'll try to find a better solution.

Thanks for the feedback.",pihole,1647349510.0
8118,comment,1,i0raenj,,"I agree. 

The alignment is also messed for me and it really bugs my OCD. 
Like the text in some buttons too. It’s not perfectly centre lol",pihole,1647357110.0
8119,comment,1,i0t1pms,,"Fixed :) 
Buttons are unified with the rest.",pihole,1647381604.0
8120,comment,1,i0t1rd6,,Should be fixed.,pihole,1647381622.0
8121,comment,1,i0uvmm3,,Yeah looks better now :) did notice this black [vertical line](https://i.imgur.com/TizbfwR.png) tho but it's not a major thing but it is noticeable.,pihole,1647414917.0
8122,comment,1,i0v27g5,,"Hmm... I'm not able to reproduce it. But I know what you mean - I see it for a fraction of the second during the animation.

Probably some ""half-pixel retina"" issue ... I'll write it down and we'll see what I can do about it :)

EDIT: I take it back - I see it now. It's in mobile browser when you select ""desktop version"". Got it.",pihole,1647420526.0
8123,comment,2,i0v5dga,,Great :) hope the feedback is a little positive at least ^^,pihole,1647423214.0
8124,post,5,te5l9r,VPN by using pihole?,"Is it possible to set up a VPN on my home network so I can connect to it from outside, using a pihole setup?

I plan on using it at my college where almost everything is blocked, including many VPN providers/services like wireguard that are not normally blocked outside of their network. Will this somehow make a difference (by not letting me connect to my home network due to the restrictions)?",pihole,1647286067.0
8125,comment,3,i0nm0r4,,"Yes this is possible, and I am not technical enough to explain the setup to you. You should search up YouTube as there are a lot of tutorials. I suggest using OpenVPN with SSL tunnel. This will wrap your vpn traffic in ssl layer and your school’s firewall will assume it is just web traffic over https, and will not block it. Down side will be that you will have a slow vpn connection.",pihole,1647286224.0
8126,comment,3,i0o4wqf,,Search up piVPN. Used this setup till I got home assistant running,pihole,1647293784.0
8127,comment,2,i0nluwg,,"https://docs.pi-hole.net/guides/vpn/wireguard/overview/

https://docs.pi-hole.net/guides/vpn/openvpn/overview/",pihole,1647286159.0
8128,comment,2,i0r1ib2,,I added pivpn to my pi 4 that has my pihole on it.  I used OpenVPN when I set it up. My daughter is in college and it works for her when connected at school.,pihole,1647353384.0
8129,comment,2,i0r7siu,,"Yes.  Basically, follow this guide

[https://www.wundertech.net/openvpn-raspberry-pi-setup-instructions/](https://www.wundertech.net/openvpn-raspberry-pi-setup-instructions/)

Note that you wont be able to hit the local network if the ip scheme is the same as your source (e.g. if your home network is 192.168.1.x and the remote network is the same).

I also set up duckdns and an updater script so that dynamic ip isn't an issue",pihole,1647356044.0
8130,comment,1,i0o73ow,,"The setup I use is a VPN SSL tunnel to my Vigor, which has the pihole as a DNS server for the DHCP scope.
So:

Router with SSL VPN
10.0.0.1

DHCP scope:
10.0.0.10 - 220 (I'm dreaming big)

DNS
10.0.0.5 pihole with DNSSEC servers.

You could also subnet the VPN to archieve some split of your LAN and VPN, but for most  setups above should suffice.

Please note the Vigor is replacable by anything similar in thuis setup ;)",pihole,1647294839.0
8131,comment,1,i0tsd76,,All of these setups are nice; buuuuut just find yourself over to Tailscale.com and find youself a new level of amazing. I run all my DNS queries over VPN through my pihole for every device including cellular with multiple exits in a mesh. It’s lovely to have LAN on WAN :).,pihole,1647393012.0
8132,comment,2,i0no3ep,,">I suggest using OpenVPN with SSL tunnel.

Thanks for the suggestion. What do you think about wireguard? Is that worth a shot?",pihole,1647287049.0
8133,comment,1,i0o7q78,,This is the way.,pihole,1647295134.0
8134,comment,1,i0pd5m3,,"I just used pivpn this weekend and it is a great tool. Was very simple and gets you up and running immediately. 

I encountered 2 challenges - i use a pi zero w for pihole,  which requires that you build wireguard directly from the source code. Not difficult,  but took some searching around for the correct process. 

Second,  I have 2 routers on my network,  the shitty one from my ISP which connects to the internet,  and a much better one which all my devices (and the pihole) connect to. After setting up wireguard I had to make sure I directed all incoming VPN traffic first to my internal router then to the pi itself. Again,  not hard,  just not obvious if you're unfamiliar with port forwarding.",pihole,1647313727.0
8135,comment,3,i0ns7m9,,Can someone point out advantages/disadvantages between OpenVPN and Wireguard? thanks.,pihole,1647288673.0
8136,comment,1,i0nlxn4,,Thanks!,pihole,1647286189.0
8137,comment,1,i0riyi4,,Awesome thank you! Will do that.,pihole,1647360484.0
8138,comment,1,i0rizv9,,Thanks!!,pihole,1647360500.0
8139,comment,1,i0p2o88,,Thanks!!,pihole,1647308931.0
8140,comment,1,i10mi99,,"I have it set up and it works, I think. Will it route all of my internet traffic over to my pihole when I enable tailscale? Is it just like a normal vpn or different?",pihole,1647524432.0
8141,comment,1,i0o7on8,,"Wireguard is great as well, and some instance, better than OpenVPN, but I don’t have experience with that. OpenVPN is also old and has a lot of documentation and tutorials which I can follow. So I chose to go with OpenVPN. I would give it a shot if you can figure out the setup process. I have not tried it.",pihole,1647295115.0
8142,comment,3,i0nwiub,,"From my understanding, the big difference is WireGuard is much much faster, it’s also newer so it’s supposed to be more secure. I think openVPN is much more widely used so it’s easier to put into use. But a lot of VPN companies are switching to WireGuard.",pihole,1647290393.0
8143,comment,2,i12ch7y,,"It works in multiple layers. So answers will vary by scenario. For example my PiHole is also a subnet router for tailscale so my whole LAN is routable via Tailscale so explore tailscale up —help there are some options to enable it in Linux depending on how your Pi 
hole is setup

edit: if you want more in-depth network explanation just DM me and I’ll fill ya in :)",pihole,1647548708.0
8144,comment,2,i0p2dol,,"Alright, thank you for the advice.",pihole,1647308797.0
8145,post,25,te4djf,Asus aimesh/extender with pihole?,"I have an Asus RT-AX68U with pihole running on my Raspberry. If I add another RT-AX68U as part of AiMesh to extend range:

1. how would I configure the 2nd router so it takes advantage of the pihole?

2. do I need to modify pihole settings in any way to support the additional router?

thanks

mv",pihole,1647282906.0
8146,comment,15,i0ngeq9,,"Assuming your using your router as the DHCP server...

1. You wouldn't. Clients connecting via mesh would still have their DNS assigned via the main router's DHCP server.
2. Nope. The Pihole doesn't need to know about the topology of your network.",pihole,1647284038.0
8147,comment,3,i0npykc,,I have an almost identical setup with a Netgear router and extender and the extender respects the DNS specified in the router so the pihole works in the whole house.,pihole,1647287781.0
8148,comment,3,i0nru37,,"I ran two AC68Us in mesh and you dont have to do anything else. your main router is still your main router, so DNS is unaffected. works great",pihole,1647288522.0
8149,comment,1,i0p7j5t,,"As the others have posted, you get to hit the Easy Button on this one. DNS runs at Layer 3 in the ISO stack. WLAN is like wired Ethernet; it's the Transport Layer - Layer 1.",pihole,1647311119.0
8150,comment,1,i0nof2j,,"Awesome, thanks!",pihole,1647287176.0
8151,post,6,tdzcx1,Looking to move my DHCP from Router to PiHoles but have Questions,"Hello! So I'm currently running two piholes within my home network. I have them set as my main and backup DNS servers running Unbound and Gravity Sync. My current router is running my DHCP but am looking to move this to my main PiHole. So here are my current questions:

1 - If my main PiHole is going to be my DHCP server, I do have static IPs so my IP pool will start from x.x.x.50 to x.x.x.254, with Gravity Sync installed, would my second PiHole give out conflicting IPs if one or the other is down? I'm assuming that I would need to break them up? Main pihole from 50 - 150 and backup PiHole from 151 to 254?

2) If I do the above, then I would need to log into both Piholes to check what device is the IP tied to or would my main Pihole be the centralized location to see everything I need to see?

3) My Router has some port forwarding so would that affect anything? Would I need to set that up on my PiHoles?

Thank you in advanced for all the help or advice!",pihole,1647269795.0
8152,comment,6,i0mmcdc,,"With two Pi-holes and only one of them as the DHCP server, you have created a single point vulnerability.  If the Pi-hole that is serving DHCP goes down, your network won't have a DHCP server.

The best approach (in my opinion) is to have each of the Pi-holes set up as DHCP server. Each Pi-hole passes out the IP of the opposite Pi-hole as an additional DNS resolver, and each Pi-hole provides IP addresses on a different IP range than the opposite Pi-hole.  With this setup, either Pi-hole can fail completely with no impact on your network.

For the DNS server issue, see this thread.  Set up this configuration file on each Pi-hole and put in the correct parameters.

[https://discourse.pi-hole.net/t/secondary-dns-server-for-dhcp/1874](https://discourse.pi-hole.net/t/secondary-dns-server-for-dhcp/1874)

For the IP range, you can have Pi-hole-1 provide IP on the range 100-150, for example.  Then set up Pi-hole-2 on the range 200-250.

DHCP reservations on each Pi-hole can be the same, but put these in a range outside the offered range of either Pi-hole.  In this case, that could be 25-75, as an example.

>would need to log into both Piholes to check what device is the IP tied to or would my main Pihole be the centralized location to see everything I need to see?

Clients will be free to use either of the Pi-holes at any time.

>My Router has some port forwarding so would that affect anything?

Only if you are forwarding a port to a Pi, and the other Pi will also provide that port service.",pihole,1647272383.0
8153,comment,1,i0mmwfa,,Thank you for the replay and knowledge!,pihole,1647272611.0
8154,post,4,tdxu64,Can i use Pi-Hole to access my PC over Remote Desktop (win10pro)?,"Hey,

i would like to use Pi-Hole with VPN and unbound. Is it possible that i can get access remotly to my Network at home through Pi-Hole?

i dont know exactly how the VPN will work. so if i can access the Raspberry with the vpn i should be in the home network right?

Because i want to use my working Laptop to access my pc with remote desktop. Can i use any VPN for Pi-hole without installing software?",pihole,1647265500.0
8155,comment,5,i0m88op,,"You basically just set up a VPN server on the Pi, set up a VPN client on your laptop, do some port forwarding, and connect.

IMO its easier to set up the VPN on your router if that supports it, but the Pi will work.",pihole,1647266232.0
8156,comment,1,i0m8n1n,,"You can. 
Install OpenVPN server
https://docs.pi-hole.net/guides/vpn/openvpn/setup-openvpn-server/

Forward the port (default: UDP 1194) from your router to your Pi

Connect to your OpenVPN from your other device and you can do remote desktop connection to the local IP of your PC",pihole,1647266419.0
8157,comment,1,i0n4127,,"I recommend pivpn, you get the choice for openvpn or wireguard.
Works quite eady and pretty secure",pihole,1647279292.0
8158,comment,1,i0ngr8h,,"yes... 

I setup a RPI3 with Pi-Hole for a customer and also installed Teamviewer (linux version) on it... works since then (3years?). That's the cheap jump-host",pihole,1647284172.0
8159,comment,1,i0nv6ac,,See:  [https://novamostra.com/2021/01/31/raspberry-pi-rdp-thin-client/](https://novamostra.com/2021/01/31/raspberry-pi-rdp-thin-client/) and begin at Step 6,pihole,1647289855.0
8160,comment,1,i0maue3,,"Okay i'll try that. Its good to know thats possible :)
My Fritzbox should bei able",pihole,1647267440.0
8161,comment,1,i0maqrg,,"Okay thats awesome. But ist It possible without any 3d Party Software.
I can Not Install Software one the Laptop.. or If i Forward my Computer im able to Access my PC through IP?",pihole,1647267393.0
8162,comment,1,i0n6wu4,,"But If ibwant to use either wireguard or pivpn i need to Install a Client Software?
I need a VPN which Windows Standard can Login to",pihole,1647280394.0
8163,comment,1,i0maz29,,Fritzbox is harder to configure but yes that will work too,pihole,1647267500.0
8164,comment,1,i0maxrw,,The laptop must be running a VPN client. Full stop.,pihole,1647267484.0
8165,comment,1,i0mb6su,,"You can also do that but then it will be insecure and open to brute force attacks.

Forward remote desktop ports (UDP/ TCP 3389) to your desktop. Then just do remote desktop connection to your external IP. No Pi or software required.",pihole,1647267596.0
8166,comment,1,i0n796g,,"There is no real safe vpn default in windows. (Btw to add an adapter you will also need admin privileges, so not sure what it is you want exactly)",pihole,1647280526.0
8167,comment,1,i0nzyar,,"OpenVPN you can use the built in Windows VPN tool, WireGuard requires a separate client.",pihole,1647291732.0
8168,comment,2,i0mcwh8,,"Fritzbox is quite easy to configurate, isn't it? They even offer their own VPN service",pihole,1647268367.0
8169,comment,1,i0mb2o7,,ohh.. so not working with the built in from windows?,pihole,1647267545.0
8170,comment,1,i0q5wk8,,"thats not true.. 

[https://serverfault.com/questions/830919/connect-to-openvpn-using-windows-10-built-in-vpn](https://serverfault.com/questions/830919/connect-to-openvpn-using-windows-10-built-in-vpn)

Openvpn uses its own protocol and is not supported by windows built in vpn",pihole,1647332913.0
8171,comment,1,i0mbcpc,,Well yeah that should work. It sounds like the laptop is pretty locked down but if it actually lets you configure a VPN using the default windows behavior then yes you can do that.,pihole,1647267669.0
8172,comment,1,i0mceag,,"okay, so for that i have to use something else? I think openvpn is not using any of the windows listed protocols",pihole,1647268137.0
8173,post,4,tdxol4,Hostname contains invalid character \: Warning,"I'm suddenly getting this warning message in my console:  
   
Hostname contains invalid character 

    \

:  

169.254.97.111: Meross\\032air\\032Purifier.local 

&#x200B;

I can delete the entry but it comes back a few hours and is generating an increasing number of log entries. I've confirmed that the actual hostname and the DNS entry don't have a "" \\ "" in the name.",pihole,1647265033.0
8174,comment,5,i0m7807,,"Looks to me like the mDNS hostname might have spaces in it. 32 decimal is the space character.

Wherever you have ""Meross air Purifier"" configured, replace the spaces with underscores.",pihole,1647265754.0
8175,comment,0,i0ma6sg,,"The backslash character is an invalid character in a host name. Replace whatever is in that position with a dash and the problem should clear.

Edit: and post the contents of the hosts file here.",pihole,1647267139.0
8176,comment,0,i0magia,,"Device has this entry in my DHCP reservations: ""Office-Meross\_Air\_Purifier"" No slashes or spaces. Same name in the host file of the Pihole as well.",pihole,1647267264.0
8177,comment,1,i0mfr06,,"a few lines from the host file listed below. no spaces or special characters.

192.168.2.59    Office-Meross\_Air\_Purifier  
192.168.2.60    Den-Meross\_Smart\_Bulb  
192.168.2.61    Bedroom-Meross\_Tall-Light",pihole,1647269615.0
8178,comment,2,i0osni8,,"you are looking in the wrong spot.  look in the actual configuration of the app running on a computer or phone trying to connect to your air purifier.

mDNS isnt like normal dns, pihole doesnt manage mdns at all.

[https://en.wikipedia.org/wiki/Multicast\_DNS#Protocol\_overview](https://en.wikipedia.org/wiki/Multicast_DNS#Protocol_overview)

what is happening is you have a computer or phone trying to discover the air purifer,

it sends out a multicast ping saying 'hey if you are named ""Meross air Purifier.local"" please respond with your ip address so that i can discover you and then start talking to you'

whatever computer or phone is doing the request is errornously asking for a malformed mdns hostname (with spaces in the hostname), which causes mdns to fail, and it to fall back to querying normal dns, hence why pihole is seeing then then the error messages you are seeing.

from the logs, can you discern what computer or phone is making the query, change the app which is making the queries configuration to use either the ip of the air purifier, nothing <thus forcing mdns rediscovery>, or the hostname you have configured within pihole to match the ip

the problem is likely because you have been tinkering with dns and hostnames.

&#x200B;

I think also you have misconfigured your hosts in pihole too
```
192.168.2.59 Office-Meross\_Air\_Purifier
192.168.2.60 Den-Meross\_Smart\_Bulb
192.168.2.61 Bedroom-Meross\_Tall-Light
```

Don't name them like that, youll have grief in the long run and its pretty gross, i suggest:

```
192.168.2.59 office-purifier.local  
192.168.2.60 den-smart-bulb.local
192.168.2.61 bedroom-tall-light.local
```",pihole,1647304397.0
8179,comment,1,i0mwubs,,You can also use dots:      192.168.2.59 Office.Meross.air.purifier,pihole,1647276512.0
8180,comment,1,i0n5sz2,,"and nslookup results:

PS C:\\Users\\\*\*\*\*\*> nslookup 192.168.2.59  
Server:  pi.hole  
Address:  192.168.2.30  
  
Name:    Office-Meross\_Air\_Purifier.local  
Address:  192.168.2.59",pihole,1647279976.0
8181,comment,1,i0ovw97,,"&#x200B;

[https://man7.org/linux/man-pages/man7/hostname.7.html#:\~:text=Valid%20characters%20for%20hostnames%20are,to%20an%20address%20for%20use](https://man7.org/linux/man-pages/man7/hostname.7.html#:~:text=Valid%20characters%20for%20hostnames%20are,to%20an%20address%20for%20use).

technically you can have underscores in names on your own managed dns servers, but not for tlds, only sub domains, and you havent your configured your home network dns properly

[https://www.dynadot.com/community/blog/domain-name-rules.html](https://www.dynadot.com/community/blog/domain-name-rules.html)",pihole,1647305851.0
8182,comment,2,i0qzes2,,"I started with the simple ""fixes"" - updated my hosts to use a "" - "" instead of a "" \_ "". Then restarted the device in question along with DNS on the Pihole and the warning message seems to have gone away.",pihole,1647352434.0
8183,comment,1,i0my2zv,,ok....but why do i suddenly have to change? and why are no other devices generating this warning notice?,pihole,1647276988.0
8184,comment,1,i0ouebz,,"on a home setup it is best not to over engineer it like that.  technically it makes queries slower and worse. keep it simple and clean.

use a .local suffix: 

https://en.wikipedia.org/wiki/.local#:~:text=Using%20the%20.,your%20public%20Internet%20domain%20name.",pihole,1647305177.0
8185,comment,1,i0otn36,,"because you only have one client device doing mdns queries trying to discover your purifier (or other devices that allow discover), then failing back to dns queries",pihole,1647304841.0
8186,post,2,tdtzsb,No graph queries or Long-term data history,"Hello, since update to    

* **Pi-hole** [5.9](https://aur.archlinux.org/packages/pi-hole-server) / **FTL** [v5.14](https://aur.archlinux.org/packages/pi-hole-ftl) / **Web Interface** [5.11](https://aur.archlinux.org/packages/pi-hole-server) my dashboard query and client activity a no longer kept after update/reboot my Raspberry pi 3.

I did not modify anything in conf files or permissions. 

Pi-hole it's working fine, filters lists etc. How can I fix this problem with graphs, it's does populate but after restart all it's lost ? 

Thanks",pihole,1647252072.0
8187,comment,1,i0lp681,,"If in doubt, try repair",pihole,1647254833.0
8188,comment,1,i0lz3lo,,"This indicates a problem with your query database, which is where Pi-hole gets the 24 hour history on restart. 

Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1647261497.0
8189,comment,1,i0ngdy3,,Happening to me too. Looks like a bug in the code. Might need to report it to them.,pihole,1647284029.0
8190,comment,1,i0njs36,,"On the same version as you posted and not having the issue.  I did have something like what you describe in the past and it was when my log files got large.  I don't care about past data so I cleared out the data from them to reset the logs to resolve my issue.

I'm still horrible at understanding why I show more clients than I have using my pi-hole, but somebody walked me through checking for some kind of open or leakage awhile back and I had none and my actual dns query counts are not excessive so not sure what it means.",pihole,1647285357.0
8191,comment,1,i0puhis,,">query database

I solved the problem. The database was corrupt, I delete it and put a fresh one from compiling package to /etc/pihole/pihole-FTL.db and it seems to preserve the query history. Thank You.",pihole,1647323781.0
8192,comment,1,i0nim6z,,">	Happening to me too

What are the specifics of your problem?  We are not aware of any code bugs that result in database problems.",pihole,1647284900.0
8193,post,2,tdq1xv,How to keep comcast out of my network,"Update: In case anyone finds this in the future, my new router, **Linksys Hydra Pro 6e was problematic with pihole**. After switching back to my Netgear R8000, my problems all vanished. The issues were:

1) The weird rDNS requests to the comcast url. I am not a networking expert so I don’t know if the intent of these was tracking my usage, but I know rDNS can be used for that purpose.
2) Using the pihole as a DHCP server didn’t block ads. Some requests simply didn’t go to the pi, and I received ads from blocked URLs. Just pointing to it as the DNS seemed to work though.
3) Unbound was totally broken. Tried a million things, couldn’t get any requests to work. Works completely fine when I use my old router.

I’m not sure if these issues are from malicious intent, or just new features which the pihole setup guide doesn’t cover, but if you like your pihole I’d recommend against this router.

I bought my own router and modem to replace the comcast xfi gateway. Installed pihole and and pointed DNS on my router toward it. STILL I am seeing queries to regular URLs with “.hsd1.ca.comcast.net” appended, and all of my resolv.conf files look like 

search had1.ca.comcast.net
nameserver 127.0.0.1

I am so dumbfounded and just want comcast out of my network.

Edit: I’ve set the pi as my DHCP server and I’m still having the same issue. My understanding is that the DHCP server is responsible for providing the search field in resolv.conf. I’m thinking the key here would be to get the pi to stop filling hsd1.ca.comcast.net in its own search field, then just renew the dhcp lease for all clients on the network. Any ideas on how I can do that?",pihole,1647235739.0
8194,comment,1,i0l3csl,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1647236806.0
8195,comment,1,i0m9g9g,,"That's pretty strange. I also have xfinity and replaced the modem and I dont see this happening.

Do you have IPv6 enabled on your network? Did you configure the Pi for IPv6?",pihole,1647266798.0
8196,comment,1,i0l46ro,,https://tricorder.pi-hole.net/zGBKHFRe/,pihole,1647237415.0
8197,comment,1,i0o33cn,,"I did enable ipv6 support in both. It appears as the setting for “domain name” in my router, and it’s an rdns request. I think the only thing I can really do here is block the rDNS requests with the pihole",pihole,1647293056.0
8198,comment,1,i0l4p2z,,"Debug log is normal.

>	STILL I am seeing queries to regular URLs with “.hsd1.ca.comcast.net” appended

Is this from all clients, or just from some clients?",pihole,1647237792.0
8199,comment,1,i0l5754,,"Looks like all clients. I found this the linked post where a “comcast expert” says it is reverse dns and is “perfectly normal.” Since it’s all my equipment now, there must be some way to stop this.

https://forums.xfinity.com/conversations/your-home-network/my-laptop-has-been-adding-hsd1mocomcastnet-to-my-computer-name-in-my-network-scans-ever-since-the-comcast-installer-was-here-2-days-ago/61513288dc872674e0f7557b?commentId=6151c6b9a6e13d4fb331b57c",pihole,1647238160.0
8200,comment,1,i0l5afu,,"Please post some example queries, forwards and replies from the dnsmasq log at /var/log /pihole.log.",pihole,1647238229.0
8201,comment,1,i0l5x1q,,"Mar 14 05:15:20 dnsmasq\[6744\]: query\[AAAA\] p15-buy.itunes.apple.com.hsd1.ca.comcast.net from [192.168.1.1](https://192.168.1.1)

Mar 14 05:15:20 dnsmasq\[6744\]: forwarded p15-buy.itunes.apple.com.hsd1.ca.comcast.net to 1.1.1.1 Mar 14 05:15:20 dnsmasq\[6744\]: reply p15-buy.itunes.apple.com.hsd1.ca.comcast.net is NXDOMAIN Mar 14 05:15:21 dnsmasq\[6744\]: query\[AAAA\] us-v20.events.data.microsoft.com.hsd1.ca.comcast.net from 192.168.1.1 Mar 14 05:15:21 dnsmasq\[6744\]: forwarded us-v20.events.data.microsoft.com.hsd1.ca.comcast.net to 1.1.1.1 Mar 14 05:15:21 dnsmasq\[6744\]: reply us-v20.events.data.microsoft.com.hsd1.ca.comcast.net is NXDOMAIN Mar 14 05:15:21 dnsmasq\[6744\]: query\[PTR\] lb.\_dns-sd.\_udp.hsd1.ca.comcast.net from 192.168.1.1 Mar 14 05:15:21 dnsmasq\[6744\]: forwarded lb.\_dns-sd.\_udp.hsd1.ca.comcast.net to 1.1.1.1 Mar 14 05:15:21 dnsmasq\[6744\]: reply lb.\_dns-sd.\_udp.hsd1.ca.comcast.net is NXDOMAIN",pihole,1647238700.0
8202,comment,1,i0mnhtx,,">query\[AAAA\] p15-buy.itunes.apple.com.hsd1.ca.comcast.net from   
>  
>192.168.1.1

This particular query is from the router, which is appending that domain to the request.  Visit all the router settings.",pihole,1647272852.0
8203,comment,1,i0nwrjk,,I found the address (hsd1.ca.comcast.net) listed as the domain name under internet settings in my router. No option to change it though,pihole,1647290488.0
8204,comment,1,i0nzejm,,"If you can't change it, then it will continue to be used.",pihole,1647291519.0
8205,comment,1,i0o1cmn,,"I don’t understand what domain name in router settings is though, or how it was set to that in the first place. Moreover, it’s listed under the “optional” heading but there is no option to change",pihole,1647292307.0
8206,post,4,tdnrkf,Does using Unbound reduce anonymity?,"Am I correct in saying that using Unbound as my DNS resolver would improve my privacy by keeping my DNS requests to myself, but that it would reduce my anonymity, as I would be the only person using my DNS?
Or have I misunderstood something here?",pihole,1647227561.0
8207,comment,12,i0kpcu8,,">	Am I correct in saying that using Unbound as my DNS resolver would improve my privacy by keeping my DNS requests to myself

No. Your DNS requests aren't kept to yourself - they are forwarded in clear text to various nameservers. 

Where you improve privacy is by eliminating a third party DNS service which would get all the DNS queries you send out for resolution. They are free to do what they wish with them. 

Unbound by default uses qname minimisation, which sends each level of nameserver the minimum information needed to get to the next lower level nameserver.",pihole,1647228198.0
8208,comment,3,i0l914o,,"I use Unbound with my pi-hole.  I understand the traffic is sent in clear text.  My reasoning was that I thought it would keep my DNS from being hi-jacked.  I have my firewall set up to allow only my pi-hole out of the network to make DNS queries, so no device can get around the Pi-hole.  In addition, I blocked UDP on port 443, as I saw that QUIC used that for DNS queries.  

I want to be sure my network traffic is not being redirected by DNS hijacking or spoofing.  Am I giving myself a false sense of security?  Should I have done something else?  I am in IT, but I am not a network or network security person.  

My network was hijacked a year ago, and I am paranoid now.",pihole,1647241178.0
8209,comment,2,i0kqec6,,"Let's all be real here. All the fancy DNS stuff makes it a little harder to fingerprint your public IP address and yout ISP user behavior, but its not “anonymity”. If someone wants to go digging it's not too hard to track you. TOR is the answer for real anonymity (and even that has it's flaws).",pihole,1647228767.0
8210,comment,1,i0lxk2b,,"Unless you use DOH/DoT, I’m which case your traffic is encrypted between you and the nameserver. You just have to question who you trust more, your ISP or your nameserver.",pihole,1647260584.0
8211,comment,1,i0kqq56,,"Gotcha. That’s sort of what I meant - I know it’s not kept entirely on my network. I meant that I’m not sending all my data to a major DNS provider.

Do you know if I’m correct in my reasoning about why it would reduce anonymity?",pihole,1647228944.0
8212,comment,0,i0ksq5u,,"Is unbound really an improvement if you're running DNS over ssl/tls? If your DNS requests are clear text, then even if you are no longer trusting cloudflare or Google, then you HAVE to trust your upstream network since they will be able to read your dns requests at their leisure. Or is there a way to apply transport layer encryption to that connection as well? 

I honestly trust my upstream provider less than I do cloudflare or Google. But if there was a way to keep both parties out of my DNS requests, I'd be all about it.",pihole,1647230052.0
8213,comment,2,i0l1lvy,,"You did mention some 'issues', but if we are being real, I like to keep in mind the absolutely staggering amount of throughput some of these nodes would be seeing, their physical locality, who in their right mind is paying for that, and what their motives are. There's only something like 8 or 10 authority nodes, potentially even less available to any given user at any given time.

Onion Routing was initially developed by the Naval Research Laboratory, and it's really quite impossible for me to imagine that they or $INSERT_DEFENSE_FORCE_OR_ENTITY_HERE just suddenly lost interest in it.",pihole,1647235562.0
8214,comment,0,i0krnzq,,"True, but that’s beyond my requirements.
I would just like to reduce the amount of data I generate.",pihole,1647229461.0
8215,comment,2,i0kr472,,"Your traffic to the nameservers is mixed with billions of other queries, so I think you lose little.",pihole,1647229158.0
8216,comment,1,i0kr9to,,What he/she said.,pihole,1647229244.0
8217,comment,3,i0kzyr8,,">Is unbound really an improvement if you're running DNS over ssl/tls?

A recursive resolver removes the need to give your full resolution history to any single entity, that's essentially only bound by a pinkie promise to not do anything shady with that information.

I think, perhaps especially in this context, people confuse privacy and security. SSL/TLS is doing very, very little for your privacy. However you resolve a domain to an IP, if you then choose to connect to that IP, that connection is going to be visible to your provider. That's pretty much inescapable. The domain name you're attempting to negotiate a secure session with is broadcast in cleartext in the server name indication payload. Your machine basically needs to say ""Hi, server, I'm a client. I would like to talk to 'some.domain' privately, please"".

Even if it didn't (ESNI/encrypted server name indication exists but isn't widely deployed enough to matter, QUIC is the future but may realistically never be formally standardised or widely deployed if it is), the IPs you're connecting to, and their frequency and clustering, is more than enough information to make an extremely educated guess with very high probability as to the site you're connecting to. Like a fingerprint almost.

You can use a VPN, and *your* provider may not see your traffic, but someone else's will. That's just making the traffic someone else's problem. Effectively just kicking the can down the road.",pihole,1647234440.0
8218,comment,1,i0ks46j,,"Yeah I get that and I do the same (sort of). Something else to keep in mind is fuzzing your data. If you can't outright block the tracking, just mix in a ton of junk data so what is collected becomes less valuable.",pihole,1647229710.0
8219,comment,1,i0ksth9,,"That makes sense.

Though it is technically a unique datapoint, right?

I agree that it’s a minor loss and I think the positives of using Unbound outweigh it. I did want to be sure I knew what was going on, though.",pihole,1647230104.0
8220,comment,2,i0kwd13,,">	Though it is technically a unique datapoint, right?

Yes.",pihole,1647232174.0
8221,comment,2,i0l03ce,,Thanks for the help!,pihole,1647234525.0
8222,post,1,tdnmxz,Removing Logging from one domain?,"I have a bot running on the same raspberry as my pihole, which fills the ""localhost"" domain with logs.

I found a way to stop it from showing in the dashboard. (Settings > API / Web Interface > API Settings > Top clients = Set 127.0.0.1)

I also know how to remove it from the DB (I originally had the **rmclient** from here: [https://discourse.pi-hole.net/t/deleting-a-client-from-the-database/14438](https://discourse.pi-hole.net/t/deleting-a-client-from-the-database/14438) but I found out I had to update the script with a new SQL that I got from here: [https://discourse.pi-hole.net/t/delete-queries-error/53761/2](https://discourse.pi-hole.net/t/delete-queries-error/53761/2) )

So although I guess I could remove the logs, and even make a cron to just remove it from time to time, is there a way to just filter it from logging?

I do understand that in a way, it's an opening for malicious attacks, so there may be little reason to implement something like that, but I ask nonetheless.",pihole,1647227131.0
8223,comment,1,i0ko27j,,"Is this what you are looking for?

https://docs.pi-hole.net/ftldns/configfile/#ignore_localhost",pihole,1647227512.0
8224,comment,1,i0kslo0,,"Check these, might be what you want:

https://www.reddit.com/r/pihole/comments/t2jvuq/help_requst_for_sql_commands/hyqtv8b

https://www.reddit.com/r/pihole/comments/t2jvuq/help_requst_for_sql_commands/",pihole,1647229982.0
8225,comment,1,i0kosnl,,"Hmmm, may just be the case, so there is nothing on the interface for that.

I have set the variable up, but my pihole is currently busy removing all the [127.0.0.1](https://127.0.0.1) logs... I believe it's gonna take a number of hours until it's done and I'm able to confirm, but from the description it seems to be just the case.

&#x200B;

Thank you. :)",pihole,1647227899.0
8226,post,118,tdn162,What are these weird domains my phone is periodically reaching out to?,,pihole,1647225160.0
8227,comment,82,i0kncqn,,These look like the chrome dns detection stuff : https://isc.sans.edu/diary/Google+Chrome+and+weird+DNS+requests/10312/,pihole,1647227139.0
8228,comment,19,i0kjh67,,"I noticed in Pi-hole that my phone periodically has these really strange requests. It's only my iPhone, and it happens even when I'm not doing anything on it. These are very weird domains that I have never seen before on any other device. Does anyone have any idea what this is?

Edit: To add further info, it looks like all these requests are always responded with “NXDOMAIN” by my resolver, so I guess they aren’t real domains? Does that mean nothing is actually being sent from my phone successfully?",pihole,1647225181.0
8229,comment,30,i0knr8i,,"It’s a feature similar to what people are saying about Chrome, but it’s entirely Apple based - nothing to do with Google.  Supposedly will be managed differently in an upcoming release and will have more of an ability to “remember” whether the phone is connected to DNS or not.",pihole,1647227351.0
8230,comment,7,i0l1b8o,,Is that apple private relay? Check if that feature is active on your apple devices.,pihole,1647235352.0
8231,comment,3,i0l1dhd,,"Since PiHole. I have been searching all kinds of weird pings. I’ve blocked to see what program ‘objects’ if nothing seems to change, I’ll search for the root dns. My phone was doing a lot of extra checking in for ads tracking. Many don’t seems to he activated on Cellular Data. Only when I connect to wifi.",pihole,1647235396.0
8232,comment,10,i0krnyv,,"You can search them here to see if they are sketchy.    


[https://www.virustotal.com/gui/home/search](https://www.virustotal.com/gui/home/search)",pihole,1647229461.0
8233,comment,2,i0l6cg4,,Why do people keep saying it is “Chrome”?  The default browser on iPhones and iPads is “Safari”.  I did not see where the user said he was using “Chrome” in the post.,pihole,1647239020.0
8234,comment,1,i0l55d4,,"could be malware, could be a program probing for info about the DNS provider. hard to say without checking out the device sending the requests. chrome is known for this.",pihole,1647238123.0
8235,comment,0,i0knh1f,,Maybe chrome doing its thing,pihole,1647227202.0
8236,comment,0,i0lpgji,,https://urlfiltering.paloaltonetworks.com/query/,pihole,1647255058.0
8237,comment,12,i0lkm5m,,Thanks for that link.  Really great read,pihole,1647251145.0
8238,comment,23,i0kpjfd,,"Seconding this, I assume it's looking for malicious redirects.",pihole,1647228297.0
8239,comment,-17,i0kjslg,,"What kind of phone do you have. 


At first glance I always react malware or spamware. Which might be the case for androids. 

For all phones it could be a specific app you have installed that no one else does.",pihole,1647225337.0
8240,comment,11,i0ksx3m,,"Interesting. If true, I wonder why only one of my iOS devices is generating these weird requests. My other device isn’t doing this and they are both on the latest OS.",pihole,1647230160.0
8241,comment,0,i0m03i5,,Chrome is on iOS.,pihole,1647262064.0
8242,comment,1,i0l3app,,"Unless OP's localdomain is `constantlyupdatedpseudorandomstring.com` (which, I guess, is technically possible) I very much suspect this isn't Chromium or Chrome at all.",pihole,1647236765.0
8243,comment,7,i0kjxam,,"It is an iPhone which I would think makes malware less likely, but who knows",pihole,1647225405.0
8244,comment,7,i0l4xhn,,"I have multiple iPhones, iPads, MacBooks and AppleTVs on the same network and it only comes from my personal iPhone",pihole,1647237963.0
8245,comment,1,i0mvt06,,"I know it can be installed.  On my iOS devices, it is not installed by default.",pihole,1647276110.0
8246,comment,1,i0nitfd,,">	Chrome is on iOS.

Not by default. The user would have to manually install this app.",pihole,1647284978.0
8247,comment,24,i0kmx6x,,"Security through obscurity isn’t a thing when half the worlds population has one. Apple just lets you buy the malware from the App Store, but it’s ok as long as they get their cut. 

Sent from my iPhone",pihole,1647226916.0
8248,comment,-2,i0n7rlp,,Sound very virus like,pihole,1647280722.0
8249,comment,1,i0m0m7f,,"Apple has the most stringent manual app review process of any marketplace. It's honestly hard to get an app published that isn't doing anything malicious. I don't own a single apple device, but I've worked with them enough to know that the premise under which they operate is far from ""security by obscurity"".",pihole,1647262355.0
8250,comment,-16,i0l0j7n,,"Please don’t come in here spewing nonsense propaganda as if it’s fact. If you don’t like Apple or their App Store policies, that’s fine and agreeable. But to say apps in the App Store have malware and Apple is happy to look the other way for money is a lie.",pihole,1647234824.0
8251,comment,2,i0on3lr,,"Another one bites the dust. 

r/woosh",pihole,1647301888.0
8252,comment,7,i0lz630,,Pretty Gadget Squad dropping the facsimile.,pihole,1647261536.0
8253,comment,3,i0luil0,,r/woosh,pihole,1647258647.0
8254,post,2,tdjj00,"Pi-hole installer killed networking on my Pi, what do I do?","In the middle of the installer, right after displaying the IP address, all network connections cut off and even after rebooting the Pi I can no longer access it either through SSH or any other services.  It's still connecting to the network otherwise.  How could the installer possibly do this and how can I fix it?",pihole,1647214092.0
8255,comment,4,i0k7qpe,,"Pi-hole makes no direct changes to the network configuration on the Pi.  Edit - by default. The user still has the option to do so, but this is not the default behavior:

https://github.com/pi-hole/pi-hole/commit/ac4a975be55a3533d6425eac72026d5b94dda5f1

Perhaps one of the dependencies installed is interfering with something that was previously running on your Pi.

Please generate a debug log, upload the log when prompted and post the token URL here.  You can do this from the ***web admin GUI > tools***, or by hooking a monitor and keyboard to the Pi (since you can't ssh into it).",pihole,1647219452.0
8256,comment,1,i0jz7w4,,"hook up a monitor and see, i'm guessing the IP is set to something other than what you think it is, or some other error in the network config.",pihole,1647215405.0
8257,comment,1,i0k8lv8,,"Does the installer not change the network config to use a static IP address?  I would guess that's where things went wrong.  The only other web services installed on this system do not interfere with any of the ports or software mentioned in the Pi-Hole documentation.

But I'll be hooking up a monitor in a bit here since that seems to be my only option...",pihole,1647219869.0
8258,comment,1,i0kq47j,,">Pi-hole makes no direct changes to the network configuration on the Pi

Apparently we're both wrong about this.

I was pretty sure dhcpcd logic was dropped entirely but it seems dhcpcd is (optionally) used when present. I dunno if that's a change that happened after the fact or what. It's not the most convenient for me to look into it at this point.",pihole,1647228614.0
8259,comment,1,i0k3f6b,,"Well it's had the same IP address ever since I set it up a year ago, and that's the same one the installer showed me.  If it got that wrong, then there's something seriously wrong with the installation script.  Time for the nightmare that is Linux troubleshooting...",pihole,1647217386.0
8260,comment,3,i0k9jv5,,">Does the installer not change the network config to use a static IP address?

No.

Edit for the record: It used to, many moons ago now, but it's realistically better for everyone that it doesn't attempt to any longer. Shoehorning dhcpcd5 into every environment was kinda wack, and actually Doing It Right©®™ using the host's preferred network management systems would be a pretty nightmarish chunk of conditional logic.",pihole,1647220318.0
8261,comment,2,i0k9r1g,,"Are you unable to generate the debug log from the web admin GUI, or do you not have access to the web admin GUI?",pihole,1647220416.0
8262,comment,1,i0kqxvz,,https://github.com/pi-hole/pi-hole/commit/ac4a975be55a3533d6425eac72026d5b94dda5f1,pihole,1647229062.0
8263,comment,2,i0k4ba9,,"Ok, you try an IP scanner just to check?

https://www.advanced-ip-scanner.com/

Or check your DHCP and see if it somehow got dropped off the static IP?",pihole,1647217806.0
8264,comment,2,i0kg190,,I do remember the installer specifically saying it was going to do that.  Just out of date text I suppose?,pihole,1647223460.0
8265,comment,1,i0kmu1z,,"Pretty sure the installer still does this. I used the latest installer just barely and checking the dhcpcd logs shows that it is getting a static IP, and my wlan0 interfact shows a static IP is set up as well.

The pihole documentation still mentions using dhcpcd5....

This was from a fresh raspberry pi OS image that was flashed not even a couple hours ago, that had no other config. It's definitely still updating the static IP if you choose to.  


Literally the documentation at [https://docs.pi-hole.net/main/prerequisites/](https://docs.pi-hole.net/main/prerequisites/)  


>As part of our install process, we append some lines to /etc/dhcpcd.conf in order to statically assign an IP address, so take note of this before installing.",pihole,1647226870.0
8266,comment,1,i0kfy74,,"Networking on the Pi is completely nonfunctional, even though it's connected and showing the correct IP address both on the Pi and on the router.  So I have no way to access any sort of GUI without installing an entire desktop environment on the system, only the command line.",pihole,1647223418.0
8267,comment,0,i0kjfbc,,"Thank you for the suggestion but I managed to get the problem figured out.  I was trying to set this up to be used with OpenVPN for remote functionality, and apparently that got the wlan IP address assigned to the VPN tunnel interface (so it was showing on both) and that was breaking networking.",pihole,1647225155.0
8268,comment,2,i0k7o1n,,That tool shows the Pi visible at the correct IP address.  It still refuses all network connections.,pihole,1647219416.0
8269,comment,2,i0kgavz,,"The current installer says something to the effect of a static address being required, but it being your responsibility to do so. Is it possible you've misread?

It's not clear how you would've got your hands on an ancient installer.",pihole,1647223592.0
8270,comment,1,i0knp6u,,">Pretty sure the installer still does this.

It does not. You can see the logic handling notifying the user that this is the case linked [here](https://github.com/pi-hole/pi-hole/blob/master/automated%20install/basic-install.sh#L619).

How the user does so realistically isn't interesting at all, and doesn't matter. It doesn't need to be handled client side, devices on the network just need a consistent address to reference the server at.

For most users the easiest pathway for that is going to be via DHCP MAC address reservation.",pihole,1647227322.0
8271,comment,1,i0kolp6,,"So it looks like we're both right, kinda.

The installer will do so if dhcpcd already exists on the host. This will pretty much only ever be the case in RaspiOS and Raspbian derivatives.

It doesn't do so inherently, on all systems. Nor should it. Installing dhcpcd5 just to set a static address is fucking wack.

Using it if it's there, less wack, I guess. Some form of compromise. Still kinda ugly.",pihole,1647227796.0
8272,comment,1,i0knn8l,,"No, the installer says it can/will set up a static IP, and that these days routers are pretty good about letting devices get the IP that they request, however sometimes this doesn't happen so the setup also mentions that it's a good idea to additionally set a static IP / route in your router congif.",pihole,1647227293.0
8273,comment,0,i0kj91x,,"I could have sworn it was giving me the option to either do it automatically, or have me take care of it later.  Maybe I did misread it.  In any case, I figured out the problem.  Somehow the regular wlan IP address got assigned to the OpenVPN tunnel adapter as well (trying to set up Pi-Hole to be used remotely from a mobile device) and I guess it was directing all network traffic through that interface.

Edit: Running the installer again since it never actually finished the first time, it does first warn you that a static IP address must be set, then a couple steps later asks to select either the installer doing this itself, or you doing it later.",pihole,1647225070.0
8274,comment,1,i0knr1q,,"I've linked you the code itself, so I won't blame you if you end up deleting this.",pihole,1647227348.0
8275,comment,0,i0kna13,,"Yes you were right, you're not crazy. The installer does set a static IP and informs you as such during the setup process. Just ran through the installer and it asked me the same thing.",pihole,1647227100.0
8276,comment,1,i0kov53,,"Mate, literally run one of the commands used on the official install page and direct the output into a file

    curl -sSL https://install.pi-hole.net > install.sh 

explore the file, under the getStaticIPv4Settings() function (lines 769 - 825).  (alternatively just go to [https://install.pi-hole.net](https://install.pi-hole.net) in your browser which redirects to the SAME raw file you linked me used for the setup script, at [https://raw.githubusercontent.com/pi-hole/pi-hole/master/automated%20install/basic-install.sh](https://raw.githubusercontent.com/pi-hole/pi-hole/master/automated%20install/basic-install.sh))

    getStaticIPv4Settings() { 
    # Local, named variables
    local ipSettingsCorrect
    local DHCPChoice
    # Ask if the user wants to use DHCP settings as their static IP
    # This is useful for users that are using DHCP reservations; then we can just use the information gathered via our functions
    DHCPChoice=$(whiptail --backtitle ""Calibrating network interface"" --title ""Static IP Address"" --menu --separate-output ""Do you want to use your current network settings as a static address? \\n
          IP address:    ${IPV4_ADDRESS} \\n
          Gateway:       ${IPv4gw} \\n"" ""${r}"" ""${c}"" 3\
          ""Yes"" ""Set static IP using current values"" \
          ""No"" ""Set static IP using custom values"" \
          ""Skip"" ""I will set a static IP later, or have already done so"" 3>&2 2>&1 1>&3) || \
          { printf ""  %bCancel was selected, exiting installer%b\\n"" ""${COL_LIGHT_RED}"" ""${COL_NC}""; exit 1; }
    case ${DHCPChoice} in
        ""Yes"")
        # If they choose yes, let the user know that the IP address will not be available via DHCP and may cause a conflict.
        whiptail --msgbox --backtitle ""IP information"" --title ""FYI: IP Conflict"" ""It is possible your router could still try to assign this IP to a device, which would cause a conflict.  But in most cases the router is smart enough to not do that.
        If you are worried, either manually set the address, or modify the DHCP reservation pool so it does not include the IP you want.
        It is also possible to use a DHCP reservation, but if you are going to do that, you might as well set a static address."" ""${r}"" ""${c}""
        # Nothing else to do since the variables are already set above
        setDHCPCD
        ;;
    
        ""No"")
        # Otherwise, we need to ask the user to input their desired settings.
        # Start by getting the IPv4 address (pre-filling it with info gathered from DHCP)
        # Start a loop to let the user enter their information with the chance to go back and edit it if necessary
        until [[ ""${ipSettingsCorrect}"" = True ]]; do
    
            # Ask for the IPv4 address
            IPV4_ADDRESS=$(whiptail --backtitle ""Calibrating network interface"" --title ""IPv4 address"" --inputbox ""Enter your desired IPv4 address"" ""${r}"" ""${c}"" ""${IPV4_ADDRESS}"" 3>&1 1>&2 2>&3) || \
            # Canceling IPv4 settings window
            { ipSettingsCorrect=False; echo -e ""  ${COL_LIGHT_RED}Cancel was selected, exiting installer${COL_NC}""; exit 1; }
            printf ""  %b Your static IPv4 address: %s\\n"" ""${INFO}"" ""${IPV4_ADDRESS}""
    
            # Ask for the gateway
            IPv4gw=$(whiptail --backtitle ""Calibrating network interface"" --title ""IPv4 gateway (router)"" --inputbox ""Enter your desired IPv4 default gateway"" ""${r}"" ""${c}"" ""${IPv4gw}"" 3>&1 1>&2 2>&3) || \
            # Canceling gateway settings window
            { ipSettingsCorrect=False; echo -e ""  ${COL_LIGHT_RED}Cancel was selected, exiting installer${COL_NC}""; exit 1; }
            printf ""  %b Your static IPv4 gateway: %s\\n"" ""${INFO}"" ""${IPv4gw}""
    
            # Give the user a chance to review their settings before moving on
            if whiptail --backtitle ""Calibrating network interface"" --title ""Static IP Address"" --yesno ""Are these settings correct?
                IP address: ${IPV4_ADDRESS}
                Gateway:    ${IPv4gw}"" ""${r}"" ""${c}""; then
                    # After that's done, the loop ends and we move on
                    ipSettingsCorrect=True
                else
                    # If the settings are wrong, the loop continues
                    ipSettingsCorrect=False
                fi
            done
        setDHCPCD
        ;;
    esac

}

The prompts literally ask if you want to set a static IP.",pihole,1647227934.0
8277,comment,1,i0kp0bj,,"Looking at the whole process again, that step is what broke it, because I hadn't typed in the VPN IP address in (my fault, missed that part on the instructions,) so the current wlan IP address got set as a static IP on the VPN network adapter.",pihole,1647228010.0
8278,comment,1,i0kp5ua,,"Maybe pick up the fight with u/jfb-pihole as well then, as they're also apparently under the mistaken impression that the network configuration is not modified.

I distinctly recall Pi-hole dropping dhcpcd5 as a dependency yonks ago",pihole,1647228093.0
8279,comment,1,i0krutw,,"After looking through, I don't see anywhere that explicitly installs that as a dependency. However, since (supposedly) most pihole installs go on an rpi, it seems fitting that this option is still there for configuration",pihole,1647229567.0
8280,comment,1,i0kvp0p,,"Yeah, dhcpcd *was* a hard requirement some time ago, but was dropped. Apparently this area of config moved quite a lot more than I thought, and the dhcpcd flow appears to now be both opportunistic, and entirely optional. There's some really quite weird edge cases referenced in some related issues and I'm not entirely sure it's worth it, but it is what it is.

Using a RPi board doesn't imply one is using RaspiOS or Raspbian, for what it's worth.

I'm not personally immediately sure why anyone would use it besides new users thinking it's required, or assuming it's inherently better in some way. It's not clear at all why RaspiOS and Raspbian before it actually uses dhcpcd. That and other weird hills that the OS appears to be willing to die on, like not defaulting to predictable interface naming schema, are kinda weird to me.

There's a new wave of people using it now it finally has a full 64bit kernel and userspace, but they're rather behind the times there. I've been using Ubuntu Server 64 on the 3+ boards for several years. It's quite light, perhaps especially compared to RaspiOS ""Lite"", and at least I know what I'm getting myself into. With Raspbian/RaspiOS I would consistently find myself asking why X, Y, or Z wasn't done in a Debian-esque fashion.",pihole,1647231773.0
8281,post,3,tdjecf,DHCP clients not showing up,"I disabled DHCP on my router and enabled it on my pi-hole. In the ""Router (gateway) IP address"" I typed in [192.168.1.1](https://192.168.1.1) and the range of IP addresses to hand out is [192.168.1.2](https://192.168.1.2) \- [192.168.1.255](https://192.168.1.255). I have 3 static DHCP leases for my PC, laptop, and the Pi itself.

My problem is that I don't see any active DHCP leases on my pi, I'm not getting any queries, and I'm getting a DNSMASQ\_WARN error stating ""no address range available for DHCP request via eth0"".

What did I do wrong? Should I not have changed the ""Router (gateway) IP address"" to [192.168.1.1](https://192.168.1.1)?",pihole,1647213697.0
8282,comment,2,i0k6c56,,"This link might help: https://redd.it/jyw7v5
Also depending on what subnet is being used .255 is not a valid IP for a client device.
https://www.calculator.net/ip-subnet-calculator.html",pihole,1647218772.0
8283,comment,1,i0ksz6e,,"As u/Thirs already said: .255 is the broadcast address, so you can't use it for your DHCP pool.",pihole,1647230193.0
8284,comment,1,i0ky5ia,,"Thank you, I’ll try this tomorrow!",pihole,1647233273.0
8285,comment,1,i0ky63i,,Thank you!,pihole,1647233284.0
8286,post,4,tdgmuk,Changing caching duration for specific domains?,"Greetings,

&#x200B;

I've put my PiHole servers in front of my Windows DNS servers so that I have better visibility over queries, blocked traffic, etc.

The query flow goes like this.

PiHole >> Windows DNS Servers > OpenDNS

&#x200B;

Everything works great with the minor nuisance that I'm having to either wait a period of time or manually flush the DNS cache on the PiHoles when I've updated a host record on the Windows DNS server.

&#x200B;

Is there a way it can change the duration requests are cached for (Ideally for a specific list of domains?)",pihole,1647205855.0
8287,comment,1,i0k088x,,"Caching DNS servers (including FTL on PiHole, I think) cache entries for the TTL of the result returned from upstream. You can change the TTL of the zones served by your windows DNS server to have them cached for less time.

Edit: for clarity, this is a change you would make in Windows DNS Server, not PiHole.",pihole,1647215876.0
8288,comment,1,i0oxt2q,,"as someone else said reduce the ttl on your dns entries in your windows dns server, this should make the problem occur less often

you could be experiencing negative caching though, which comes in a couple variants and is talked about here: https://serverfault.com/a/824873",pihole,1647306719.0
8289,comment,1,i0ozslx,,Yeah. They're set to like 3600 so that should help.,pihole,1647307628.0
8290,post,1,tdets5,PSA: Website sending background requests to .ru domains without consent brought down my Pihole,"While working on a project this afternoon, my research brought me to a normal seeming blog. However after being on the site for a couple of minutes, I began to have DNS issues on the device I was using. Other pages wouldn't load, and my whole network seemed to be acting more sluggish than usual. After further investigation, my Pihole console reported errors for ""Maximum number of concurrent DNS queries reached"".

Upon pulling up the logs, I found thousands of requests to
    `zakupki.gov.ru`.
Which, given the current events, caused me a bit of concern. 

After doing some further investigation, I found the following script running on the site:
https://sudonull.com/stop-ru.js
Archive.org link in case the original is removed:
https://web.archive.org/web/20220310165814/https://sudonull.com/stop-ru.js

To me this seems like this was designed to try to waste resources on Russian owned websites. While personally I fully back Ukraine, this kind of thing is a dark pattern, and totally unacceptable.

 Especially given that:
* The link to the site was served from Google, and was one of the top results for the query. Meaning less tech savvy users would have no idea that their browser was being hijacked for such a purpose.
* At no point was I warned that my browser, IP address, and system resources were being used for such a cause. 

Wanted to get the word out that this type of stuff is happening, and to be on the lookout.",pihole,1647200933.0
8291,comment,3,i0nif9h,,"This website seems like it runs on an outdated version of Wordpress which has many security vulnerabilities. A bad actor clearly planted that script in the root directory to serve as an amplification attack on the sites in the source array. Since this is most likely the work of a bad actor, you should not expect warnings that the site is now acting maliciously. Additionally, Google is simply returning the highest match website from its search algorithm and the available crawl data it has for the site. It has no responsibility to report that there are malicious actions occurring on the site and is most likely unaware as the only interaction Google has with the site is through their spider.",pihole,1647284822.0
8292,comment,2,i0nhoyf,,">	The link to the site was served from Google

Google will link virtually anything.  They don't vouch for any of the content on the linked site. 

>	At no point was I warned that my browser, IP address, and system resources were being used for such a cause.

And you likely never will be.  Similar to crypto miners - they also don't tell you what they are doing with your resources. Your Pi-hole showed the activity though, and you were aware of the behavior.",pihole,1647284537.0
8293,comment,1,i0pwp46,,"I wounder if the owner of the web site did this or is it someone hacking web sites.

I got a feeling that this is just the start and there will be more sites doing this

I have a regex that blocks ,ru domains so most of the queries were blocked",pihole,1647325426.0
8294,post,0,tdcxrb,Seren Playback Issue (Kodi) - Pihole-Related?,"I posted this in r/Addons4Kodi and am searching for a solution here as well:

  
First let me say that I checked the log for errors and nothing jumped out. I would share the log file but I am not sure how to do that from the Fire TV stick. 

If I pause a program for more than a few minutes, when I attempt to start watching again it will freeze, then the blue wheel pops up. Sometimes it freezes and I have to restart the Fire TV, sometimes it will start playing the next episode on the playlist.   


Is there a setting or something that I am missing? I've cleared the cache and reinstalled etc. Side note (maybe of note) this occurs on both my Fire TV sticks (albeit only recently on the newest one) and only on my home network. I am running Pihole. Anyone with experience using Pihole have any light they can shed on the problem?",pihole,1647195670.0
8295,post,17,td867m,Guide - Pi-hole using Docker on Windows 11,"A few years back I created a guide to getting Pi-Hole running on Windows 10 using Docker. Anyway, Windows, Docker and Pi-hole have all changed since then, so I've created a new guide for Windows 11. It was the perfect first project for a new PC running Windows 11!

Last time around I got a ton of useful feedback and comments from Reddit and the comments - so here's the guide. Let me know if I've missed anything! I really hope people find this useful :-) 

[https://www.andrewdenty.com/blog/2022/03/13/installing-pi-hole-on-windows-11.html](https://www.andrewdenty.com/blog/2022/03/13/installing-pi-hole-on-windows-11.html)",pihole,1647182050.0
8296,comment,1,i7kv1gp,,when i try to run docker it says failed to open dlllist.txt how do i fix this,pihole,1651858243.0
8297,post,134,td5fqh,Is this normal behavior with Roku?,,pihole,1647172662.0
8298,comment,78,i0hevn6,,"Yes, same happened with mine I did block it and it had no adverse effects. I'm guessing it's for some kind of monitoring",pihole,1647172829.0
8299,comment,31,i0hetrt,,"I just bough 2 new Roku devices to upgrade my dumb TV. I used some generic block list which appears to be very aggressive against Roku. I am hitting about 70-80% block rate mostly because my very pregnant wife has nothing else to do except binge watch every single shows on Netflix until we get our baby.


Just surprised to have such high hit rate and high traffic out of these 2 devices.",pihole,1647172790.0
8300,comment,19,i0hgd8o,,"Yeah, my Roku is always #1… far and away above others.  The second is our Firestick.  In the last couple of months, Pluto will no longer work if I keep my Roku blocked.",pihole,1647173916.0
8301,comment,12,i0hu7ne,,"It's normal behavior with a lot of devices. If they can't connect to a domain, then they'll just keep trying until they get through.",pihole,1647182095.0
8302,comment,9,i0hgkx3,,"You can safely block the scribe.logs.roku.com domain with no ill effects, however I have learned that for Disney to work you will have to whitelist disney.playback.edge.bamgrid.com.  This whitelisting seems to be unique to Roku, as our Apple TV never had a problem while it was blocked.",pihole,1647174069.0
8303,comment,6,i0hfokw,,Looks right. I had the same hits all the time from my rokus. Just there telemetry collecting I'm sure. I never had any issues at least with it.,pihole,1647173422.0
8304,comment,4,i0hyji0,,"Absolutely. I have 3 Rokus and they are incessant in their attempts to call home. 

My cheapest one (a Roku Express) often gets throttled attempting to exceed 1000 requests per hour.",pihole,1647184169.0
8305,comment,4,i0iawi1,,"Completely normal. Your Roku tries to send all your viewing habits and usage data (what you watch, what you search for and so on) back to the mother ship along with whatever else it can gather about you and your home network, for profiling and advertising purposes.

Since that's kind of awful from a privacy perspective, Roku's log-slurping servers are blocked by a lot of privacy-focused blocklists.",pihole,1647189554.0
8306,comment,4,i0j3rmj,,Wait till you get a Ring doorbell.,pihole,1647201693.0
8307,comment,8,i0hwsl8,,"I have a theory about pihole and Roku.  I tried posting it in the Roku subreddit, but the post was deleted.

I think when you block this Roku traffic, it queues up in the Roku storage waiting for the network connection to become available, and the OS does not effectively manage the storage to keep the backlog of tracking data from becoming too large, which affects the system.

I've had a few different Rokus that over time start running slow and make me constantly reload apps that I use frequently.  If I factory reset the units, the problem goes away.",pihole,1647183343.0
8308,comment,3,i0j1t4j,,"I thought Roku was bad until I installed the Next Door app on my phone, that thing got uninstalled right quick[](https://imgur.com/OoDfbfB).",pihole,1647200833.0
8309,comment,2,i0hq5ff,,"Yep lol one (both? Can’t remember) of those domains can be safely blocked….with no adverse affect lol. Just can’t remember which one (not at home right now).

I’m tempted To just add the offending domain to my /etc/hosts file on my raspberry pi as I’ve heard that will quiet down the logs a bit",pihole,1647179968.0
8310,comment,2,i0iaqz8,,I noticed sometimes my 5 Rokus would slow the network down substantially. Since pulling all them out service I have not had any issues.,pihole,1647189489.0
8311,comment,1,i0iledp,,yep. noisy little bastards.,pihole,1647193895.0
8312,comment,1,i0j1ldh,,There's a [two-year-old thread](https://community.roku.com/t5/Discussions/Roku-TCL-TV-making-too-many-calls-to-scribe-logs-roku-com/td-p/546571) on the Roku forums about this that they've never responded to.,pihole,1647200737.0
8313,comment,1,i0j3oht,,"User clicked a button on the remote, logged, user exited channel, logged, user installed update, logged.

My Roku does the same",pihole,1647201655.0
8314,comment,1,i0jf486,,Yes. I observed the same.  It's unnerving and crazy.,pihole,1647206596.0
8315,comment,1,i0jgor1,,Yes.,pihole,1647207269.0
8316,comment,1,i0ji29v,,That's what looks like,pihole,1647207861.0
8317,comment,1,i0jja1f,,"Only looked at a few comments as I am half asleep so forgive me if someone said this already. But from what I have seen elsewhere, apparently some devices will attempt to reach home more of they fail to get the response they expected so maybe something is already blocked? Again half asleep brain so that could he totally wrong.",pihole,1647208377.0
8318,comment,1,i0jstst,,Yes.,pihole,1647212495.0
8319,comment,1,i0jv31w,,Par for the course.,pihole,1647213517.0
8320,comment,1,i0k3ebf,,"I added <cloudservices.roku.com> to my whitelist.

Because I use the Roku app on my phone. I use it as a remote control for my TV. I like to be able to use my phone to turn it on.

I have been troubleshooting it. And it works better for me after this whitelist change.

The reset looks normal to me.",pihole,1647217374.0
8321,comment,1,i0kgyn0,,Yeah. even if it is not used I get a couple of thousand Roku attempts blocked a day and once SWMBO starts watching stuff it jumps right up.,pihole,1647223922.0
8322,comment,1,i0kpzuw,,MyFireTV is probably the ost blocked device on our network.,pihole,1647228548.0
8323,comment,1,i1g0p28,,How do you force roku to use the pi-hole as a DNS server?,pihole,1647807158.0
8324,comment,-1,i0itvp7,,You must be new here.,pihole,1647197412.0
8325,comment,25,i0hg5zq,,That what I figured just that upgrading from a Chromecast to a Roku made my block rate jump by 50% which is strangely odd.,pihole,1647173772.0
8326,comment,16,i0j7u3g,,You shouldn’t be too surprised: Roku makes their money off selling your data and not the hardware. This is an excellent use of r/pihole to protect yourself from their shitty business practices.,pihole,1647203459.0
8327,comment,9,i0jcwjs,,"All perfectly fine. 

Keep in mind that a 'block rate' is not a good/bad indicator. Mainly because if a device cannot get a good response, it tries again and again quickly. It's behavior is different if it's able to accomplish what it wants. 

Having a high block rate is not a bad thing.",pihole,1647205653.0
8328,comment,2,i0j6z5q,,"Maybe this explains why I have to periodically reset mine or everything on them starts to drag.  Sometimes it presents as only playing things in a low bit rate.  Cycle power, all good.",pihole,1647203086.0
8329,comment,0,i0jdad4,,"Not really. If a system tried to do something, and gets a bad response, it's reasonable for it to try again. 

It's not that there's some kind of log backup. It's time.",pihole,1647205820.0
8330,comment,3,i0ichc7,,This happened to me yesterday. Network was slow and I checked what was going on. Roku made 1000 requests within 60 seconds. Going to find alternative. Or unplugging it,pihole,1647190211.0
8331,comment,3,i0iwojm,,"Not new to pihole, being using for a while just new to Roku. It insane the amount of request and queries. I picked those device for the ease of use for grandparents when babysitting but wasn't expecting boxes to be that chatty.",pihole,1647198611.0
8332,comment,28,i0hqav4,,Gotta realize chromecast is very simple. Whereas roku is pre loaded with so much content. That’s where it stems from I’m sure. But yes it is funny cause you’d think google to be far “chattier” lol,pihole,1647180051.0
8333,comment,3,i0jlws5,,"Come on its Amazon. Would you expect anything less? 

They even monitor on Kindles of all devices.",pihole,1647209498.0
8334,comment,1,i0jd45c,,"No, this is not why. I never reboot and they've always been blocked.",pihole,1647205745.0
8335,comment,4,i0if10d,,I was really surprised how it affected my network. Before Pihole and it wasn’t a issue. After pihole it definitely was. I’d rather have pihole then Roku.,pihole,1647191272.0
8336,comment,2,i0iz8o4,,Yeah my roku spams my pihole like nobodys business.,pihole,1647199717.0
8337,comment,10,i0hylyx,,[deleted],pihole,1647184202.0
8338,comment,4,i0idhlh,,"There's still over 4000 queries per day coming from a chromecast though. But if your router doesn't force all traffic to go through the pihole, you won't even see it.",pihole,1647190634.0
8339,comment,1,i0k422z,,Which is why you have wifi in airplane mode on your kindle after the initial setup.,pihole,1647217686.0
8340,comment,2,i0jqxyf,,"If I whitelist my rokus they run without needing power cycled.  Blocked, I have to reset them periodically.  Whatever it is, it doesn't seem like the roku is handling the situation well.",pihole,1647211659.0
8341,comment,3,i0j19vi,,">spam my pihole


I hope this gets treated as innuendo at some point.",pihole,1647200597.0
8342,comment,7,i0jh4tt,,Chrome cast probably hard coded to 8.8.8.8 so you won’t see it unless you’re forcing all port 53 traffic to Pihole.,pihole,1647207462.0
8343,comment,1,i0k4d0t,,The Kindle only makes like 40 requests a day. And most is intercepted by the Pi-Hole. So I don't really see the need to disable WiFi. I have far more aggressive devices on my network than the Kindle. The Kindle is the device there's the least of my worries to be honest.,pihole,1647217829.0
8344,comment,2,i0jfsqd,,innuendo and out the other?,pihole,1647206888.0
8345,comment,4,i0jlwn6,,[deleted],pihole,1647209496.0
8346,comment,2,i0jxpyq,,I block Google dns at the router to avoid this.,pihole,1647214714.0
8347,comment,1,i0kcs5t,,"I’m not sure about that. My wife’s Kindle seems to get quite busy when she’s using it. She uses Kindle Unlimited though, and that could legitimately make a few calls. 

I don’t remember seeing anything blocked by PiHole.",pihole,1647221877.0
8348,comment,2,i0kwz3n,,Touche!,pihole,1647232541.0
8349,comment,2,i0kh3rv,,I Hijack all DNS and  see very little blocked from my Chromecast.,pihole,1647223993.0
8350,comment,1,i0kfx7t,,"I've only got 3 queries and they're all blocked

device-metrics-us.amazon.com is what is being blocked. 

This url is in the Steven Black and Developer Dan lists.",pihole,1647223406.0
8351,comment,1,i0kjzct,,That domain looks familiar. I might blacklist it.,pihole,1647225432.0
8352,post,1,td5d3d,another pihole-youtube question,"Hi everyone

I now it is currently not possible to block ads on youtube with pihole. This gets confirmed by looking around online but there is one thing I don't understand: So i live in Europe and when i watch a video, it comes form the youtube servers in us, I guess. The ads however are in my native language and of local companies. Is it so wrong to assume that there are multiple ad servers around the world?",pihole,1647172356.0
8353,comment,1,i0hf0yh,,I imagine Youtube is delivered by A CDN - Content Delivery network where localised caches serve content to nearby users - to reduce latency and bandwidth used.,pihole,1647172942.0
8354,comment,1,i0hfg1s,,"Youtube (and also google) use CDNs to serve ads, not all traffic goes through the [same server](https://storage.googleapis.com/gweb-cloudblog-publish/images/GCP_subsea_cables_1.max-1700x1700.png). You watch a video, the server sends back a video and an ad. The ad depends on who you are and where you at, based on your viewing habbit, your browsing history (maybe the website have to use google ads), your seaeching history, and a buntch of things you dont know how they are collected but quite accurately represents you. They serve ads based on those info..",pihole,1647173247.0
8355,comment,1,i0hgf6k,,"so the ads come from a different server, is that one possible to filter out?",pihole,1647173954.0
8356,comment,1,i0hgjrk,,"They are from the same server. Youtube which belongs to google, has server all over the world. None of them are ad-specific.",pihole,1647174046.0
8357,comment,1,i0hhyh0,,Thanks for the explanation,pihole,1647175031.0
8358,post,27,td4avb,Properly configuring pfsense to use pihole,"I've seen a few posts on this, but most of them are more discussions than guides, and it seems difficult to find a definitive answer. I've heard people say that you do not want to enter anything in the `System > General Settings > DNS Servers`, and to only put the PiHole address in `Services > DHCP Server > DNS Servers` and vice versa. 

My network has a few VLANs, some of which I want to use normal DNS (cloudflare), another uses a VPN's DNS and the rest use my PiHoles (I have 2).


Right now I have my PiHole's DNS' set in  `General Settings > DNS Servers` and in each of the VLANs `DHCP Servers` I also specify the desired DNS servers


Setup:
`Modem -> PFSense Box (DHCP) -> Router (AP) -> Rest of network`

* [General Settings](https://i.imgur.com/d085DPI.png)
* [DHCP Settings \(LAN\)](https://i.imgur.com/0F84UUx.png)
* [DHCP Settings \(Guest\)](https://i.imgur.com/WVj67Rw.png)
* [DHCP Settings \(Work\)](https://i.imgur.com/rEORUSq.png)
* [PiHole Settings](https://i.imgur.com/5v9mDZi.png)

I am worried that I may have some looping going on right now, so I wanted to get some clarification. Am I supposed to enable conditional forwarding from the PiHole? Should I have the PiHole DNS in General Settings, or nothing at all? Pls halp.",pihole,1647167925.0
8359,comment,6,i0hps2a,,"Hello OP,

Entering the Piholes in System > General Settings > DNS Servers will do two things in pfSense.  First, it will cause the firewall to use the piholes for resolution \*itself\*.  Two, the built in DNS Resolver and DNS Forwarder services will use the piholes as their upstream resolvers.  If you are using either of these services on any of your networks be aware of that.  If you are not using either of those services, and do not want your firewall itself to be filtered by the piholes, you can put whatever into the DNS fields in the General tab.

Looks like you're good with your DHCP settings.  Clients on the various networks will get the specified DNS servers to resolve with and, as long as you are allowing traffic to the resolvers from that network, you should be fine.  It didn't look like there would be any sort of ""looping"" that you're worried about.

Note that modern browsers have ""private dns"" built-in now, which is essentially either DNS over HTTPS or DNS over TLS, so clients \*might\* get around your piholes this way.  I would suggest the following to prevent as much of it as possible.  Unfortunately, with regards to DNS over HTTPS, it's much more difficult to stop, as it uses standard 443/TCP.  I  do the following on my own network to \*mostly\* account for this:

* Use the following list in your pihole to prevent resolution of DoH resolvers:
   * [https://raw.githubusercontent.com/oneoffdallas/dohservers/master/list.txt](https://raw.githubusercontent.com/oneoffdallas/dohservers/master/list.txt)
   * As always, look through the list before blindly using it so you know what's getting blocked.
   * This is not a definitive list and there's still room for a rouge device to use DNS over HTTPS by using a direct IP address.  But, this will cover most public DoH servers.
* Block TCP/853 out from your filtered networks.  This prevents DoT (DNS over TLS) from working, as it uses that port.
* Lastly, consider leaving your piholes as your resolvers in pfSense and enable the DNS forwarder service on your filtered network and do the following:
   * Ensure port 53 is open on your firewall's interface on that network.
   * Create a Port Forward NAT rule on the firewall interface attached to your filtered network that re-routes any UDP/TCP port 53 traffic not destined for your piholes to port 53 in your firewall's interface.  This will force standard DNS resolution to be filtered even if they're trying to hit another DNS resolver.  Unfortunately, NAT rules can only target a single IP so you can't just force it to your piholes directly.  NOTE: that you lose some visibility as to what devices are trying to bypass your DHCP-assigned DNS resolvers, as that traffic will look like it's coming from your firewall.  However, you can probably look in the firewall logs if you're really curious.

I have this setup on my network and it works well.  Let me know if you have any questions and I can answer them and/or provide screenshots if needed.",pihole,1647179769.0
8360,comment,1,i0hcu6a,,Whats wrong with the built in pfblockerng? Why don’t you just use that?,pihole,1647171238.0
8361,comment,1,i0ho7ft,,"Conditional forwarding is used if pihole isn't the dhcp. If I understand correctly, the dhcp here is pfsense. It's only usage is to have device name in the network list instead of ip for your device.

As for the DNS settings, there's different approach to do. The way you did work, your pihole goes to the internet for dns, your pfsense use pihole as dns and you vlan use either pfsense or cloud fare. Note that when you put more then 1 DNS, your computer use them randomly, it's not use the first one then the second.

If for any reason your pihole stop working, you can simply change your clear your pfsense DNS server so it used your isp DNS server and you still have internet.

On a side note, be sure to not check the box in the settings where it says to add the isp DNS server. Else, pfsense will have both the DNS server you input and the one from your isp as resolver. Doing so will make him use more then one at random (it's not sequential), meaning some stuff will pass to other DNS. It's the checkbox below saying to override DNS from WAN.",pihole,1647178907.0
8362,comment,1,i0hy38u,,"this wouldn't catch devices that use hard coded DNS servers though

Some devices will always use 8.8.8.8 for example, no matter what the DHCP server sends and local DNS servers

I have my pfsense box setup to intercept that traffic and reroute it to my pihole",pihole,1647183957.0
8363,comment,1,i0hqzjg,,"One more note on using the DNS forwarding service.  If you're keeping it confined to your filtered network, you can select just that interface in the configuration for the service, but BE SURE TO ALSO KEEP THE LOCALHOST ADDRESS SELECTED, otherwise the firewall will not be able to resolve DNS.  I believe it does throw a warning if it isn't selected and you try to save the config.  But just wanted to throw that out there.",pihole,1647180420.0
8364,comment,1,i0j3fmv,,"Thank you very much for the detailed response! I did not have either DNS Forwarding or DNS Resolver services enabled when I posted this, however I made some changes since then

* Set Cloudflare as DNS in General Settings
* Point PiHole to pfsense (192.168.1.1#53)
* Enabled DNS Forwarding service on all VLANs (without this, nothing would load)

My understanding is that now, devices will use the DNS assigned from DHCP. If they are assigned, say Googles DNS, those will go through without being filtered. Otherwise if the DNS (from DHCP) is set to one of my PiHoles, the request will go there and if it is not blocked, pfsense will use the DNS address from General settings to complete the lookup (I think that's right?).

* [New PiHole settings](https://i.imgur.com/8Qoz1YW.png)
* [DNS Resolver \(pfsense\)](https://i.imgur.com/JG8fZFG.png)
* [General DNS settings](https://i.imgur.com/PsXkZvI.png)

Everything seems to be working fine, but I guess these are my remaining questions.

* Does this seem like a correct implementation?
* Should I have all VLAN interfaces selected in the DNS Forwarding service as I currently do?
* Would this setup allow me to do something like unbound with my PiHoles later? I know for that you need to set the DNS in PiHoles settings to 127.0.0.1, which would then no longer be pointing at pfsense.",pihole,1647201546.0
8365,comment,6,i0hf2en,,"As a person in this same situation I find that the interface for seeing what is blocked and what machines are being blocked the most is much better with Pi-hole. 
If your having an issue with a website you can very quickly figure it out and whitelist if needed. 
I realize you can do all of that with pfblocker but sometimes pretty graphics are nice.",pihole,1647172971.0
8366,comment,1,i0hrk47,,"Oh, good point. If you use the NAT option, be sure to set a rule before the NAT rule to allow the pihole to bypass the forced redirect, otherwise you *will* have a loop.

You can also use ""if not from"" your pinholes in the NAT rule as well.",pihole,1647180726.0
8367,post,1,tczvja,"Is there a way to comment CNAME, Host entries in pihole files ?","I am trying to comment out some of the cname entries which I can uncomment later,   
Is there a way to do it ?",pihole,1647149144.0
8368,comment,2,i0gq6pz,,"Not sure what you’re trying to do, but I think you’re trying to disable CNAME entries to enable them later?

If so, I don’t believe you can do it in the GUI, and I’m not sure if the local.list file in the pihole directory supports it.

You can create a file in the dnsmasq directory at `/etc/dnsmasq.d` and name it something like `99-cnames.conf`

The syntax for it is `cname=cname,host`",pihole,1647152884.0
8369,comment,2,i0ia25g,,"You might be able to save a Teleporter backup and delete entries you want to disable. Then restore when you are done. I am not sure how complicated your edits will get, but this might work for you.",pihole,1647189195.0
8370,comment,1,i0pxc74,,Pihole already notices if a domain is a cname so if it's in your blacklist it will be blocked and the logs will say it's a cname.,pihole,1647325909.0
8371,comment,2,i0hjn3f,,"Right,
I think comments work without problem but the UI is displaying the Local CNAME despite them being commented 

I am trying to see if I can mask them some how or the entries with # are anyway not in use, so can leave as is. 

Thank you",pihole,1647176149.0
8372,comment,1,i0iqm65,,I think I will just create a separate conf file and move it to .bak and .conf,pihole,1647196041.0
8373,post,2,tczepl,Nextdoor mobile app and 'us-tracking.nextdoor.com',"The url on the subject line has lept to the top blocked item on my pihole.  Requests are coming from my mobile phone (android).   I've had their app installed for some time now and never have see this behavior.  Anyone know if something changed or their end or maybe is seeing the same thing?

Screenshot:  https://i.imgur.com/1673iwr.jpg",pihole,1647147409.0
8374,comment,3,i0gi0xp,,Probably was added to a block list you use.,pihole,1647147572.0
8375,comment,3,i0mhtsr,,"I also have this happening, at all random hours. Glad it's blocked. Will have to delete the app, it's going on when I'm not even using it or haven't used it.",pihole,1647270494.0
8376,comment,2,i0gipsw,,"Good point.  I searched my lists and get this

    Match found in https://raw.githubusercontent.com/StevenBlack/hosts/master    /hosts:  us-tracking.nextdoor.com

I haven't requested a list update for a while...do they auto refresh?",pihole,1647147993.0
8377,comment,1,i0ogqmq,,"I noticed it a while ago, too. In my case, it seemed to happen on a schedule and usually in the middle of the night. Deleted the app, and the query spam went away.

Good riddance. It was mostly a bunch of NIMBYs in my area, anyhow.",pihole,1647299032.0
8378,comment,1,i0ovj5l,,"Yeah, I noticed that too.  Was attempting to connect even when the app wasn't in use.  Eff that. Persistent little bastard as well.   Wish I could inspect what it's phoning home.",pihole,1647305684.0
8379,comment,3,i0giyu1,,"Usually it will auto refresh time to time yes. If you don't want it blocked, I'd add that domain to your whitelist.",pihole,1647148148.0
8380,comment,2,i0gpdw4,,">	do they auto refresh?

Gravity is updated from the latest copy of your adlists every Sunday between 0300 and 0500 your local time.",pihole,1647152316.0
8381,comment,4,i0gjb6g,,"lol...no, I think I want it blocked.  Lord knows what it's trying to phone home to the mother ship.",pihole,1647148361.0
8382,comment,1,i0jz8fx,,"Not so much time to time. Every week, Sunday morning, by design.",pihole,1647215412.0
8383,comment,3,i0gkx4r,,Your gravity lists get updated once a week. There is a cron job that is configured for it,pihole,1647149364.0
8384,comment,3,i0gl0da,,Helpful.  Thank you.,pihole,1647149422.0
8385,post,27,tcxiaq,Rebuilding a pi-hole,"If I wanted to rebuild by pi-hole, it is as simple as teleport backup, rebuilt the pi and then teleport restore?",pihole,1647140415.0
8386,comment,18,i0g5tl8,,Yes,pihole,1647140661.0
8387,comment,7,i0g7qir,,"Mostly. Depends on what customizations you’ve put in place. Teleporter doesn’t include things like additional conf files you add to dnsmasq.d, dhcp settings, and a few other things.",pihole,1647141704.0
8388,comment,3,i0hcnp8,,"Pi-Holes teleport only backups the pi-hole settings but not all the adaptations made to the underlying OS.

I use tar to regulary backup images of the whole installation which than can be restored to a SD-card e.g.

You just need to build the partitions (256MB boot, type 'c' / remaining space 'rootfs', type 'linux'), format them with the needed file-systems (vfat for boot / ext4 for rootfs) and tar the backup back to rootfs / boot.

After setting the correct PARTUUID in /boot/cmdline.txt and /etc/fstab you'll have a new working pi-hole every time you need it.",pihole,1647171096.0
8389,comment,1,i0ku6f7,,"No. The gets the app settings, but nothing else. 


Let’s say you installed Unbound and customized the dns setting in the dnsmasq.d folder conf files. Teleporter is unaware of those items. 

How you back those items up depends on where/how you run pi-hole.

I recently moved pi-hole to a linux container (lxc) and I use the backup feature of my hypervisor to back up all of my vm’s and containters

for docker backup the conf folder(s)

for a physical host, like a raspberry pi, you could use backup utilities.",pihole,1647230883.0
8390,comment,4,i0g650i,,I have my Job for tomorrow morning.,pihole,1647140832.0
8391,comment,4,i0h7r40,,[deleted],pihole,1647167058.0
8392,comment,2,i0hvrp9,,Not having DHCP settings is a problem.  I used my pi-hole as my DHCP server.  I want a pain free upgrade from 32-bit Raspberry Pi OS to 64-bit Raspberry Pi OS.,pihole,1647182856.0
8393,comment,3,i0hgb27,,That last part is especially important if the clone sits on the same LAN,pihole,1647173873.0
8394,comment,1,i0huym1,,"I think I just want the Pi-Hole settings.  I just want to upgrade my Pi-Hole to to 64 bit Raspbian from 32-bit.

If I can install 64-bit, install pi-hole and import my teleporter export and be back to the where I was when this started, that's all I need.",pihole,1647182464.0
8395,comment,1,i0kwj4g,,">	customized the dns setting in the dnsmasq.d folder conf files. Teleporter is unaware of those items.

The exporter is aware of all files in this directory and exports them.  Here's an example of the dnsmasq.d folder from a teleporter export:

https://i.imgur.com/Rn7iorc.jpg",pihole,1647232276.0
8396,comment,1,i0lzksb,,"So, if I turned on DHCP inside of ph-hole and set up static leases, all that stuff WILL get backed up?  I have done nothing outside of the pi-hole UI in my config.",pihole,1647261768.0
8397,comment,2,i0g7i0t,,I rebuilt my pihole probably 3 times before I knew about teleport….so easy with teleport,pihole,1647141577.0
8398,comment,1,i0hctet,,"Semi-related, can recommend both dietpi and Docker",pihole,1647171222.0
8399,comment,2,i0h9u2r,,"Same, I use unbound and SSH on a CLI barbones distro so it's always a fun time to get it all going. Sounds simple but something always messes up 🤣 

Wish there was a card cloner that worked somewhere!",pihole,1647168785.0
8400,comment,1,i0h9vu9,,"Yeah there's always a bunch of stuff to do
for me it's dnscrypt-proxy, RTC module, log2ram, shutdown button and some other stuff

Also once I didnt use teleporter when wiping cause my pi hole install was already corrupted by the time I decided to wipe and start over with weird not blocking issues and db errors. So I just nuked and started over",pihole,1647168827.0
8401,comment,1,i0i4lo5,,"I did the same thing. Honestly, just took me an hour, and that also included things like re-installing Zerotier and Tailscale that I use the pi as a vpn gateway for as well, setting up remote share mounts for backups, etc.

I didn’t mention those things as to try and out you off from doings it, but rather as to help give you a check list of things to take note of beforehand/afterwards.",pihole,1647186867.0
8402,comment,1,i0m2qbz,,"That odd that mine missed importing my custom file last week then.  I’m not at my computer at the moment, but it’s named 03-something.conf and that’s where I put custom dns settings.

I build 3 virtualized pi-hole’s last week by creating the teleporter file on the first , and importing it on the other two . I had to manually create the custom conf file on each one.

I’ll check the contents of teleporter file that I used to see what is there. I wonder if the file wad exported but not imported.",pihole,1647263497.0
8403,comment,1,i13qyad,,"The easiest way to know what is being backed up , it to make a teleporter backup file, and examine the contents. 

Here is a picture I found of the contents

[Contents of teleporter backup](https://imgur.com/E0Aewoy)",pihole,1647570240.0
8404,post,0,tcru51,ERR_NAME_NOT_RESOLVED Problem on Windows machines,"Hi pi-hole experts, 

I use my pi-hole as a first dns for every devices on network if not manually changed by per device. For some reason when PCs on startup they can not access internet for several minutes. Pihole diagnosis does not show any error or anormalty and pihole works great on every phone, tablet and tv, is there any suggestions to fix this issue ?

Thanks,

&#x200B;

Router:  Archer VR300 and pi hole sets default dns server.",pihole,1647122074.0
8405,comment,0,i0fakwg,,">	I use my pi-hole as a first dns for every devices on network

What are the second and third DNS assignments?",pihole,1647125036.0
8406,comment,1,i0grnkp,,"I left it blank, i though pi hole get its dns master server cloudflare it get every dns query for sure.",pihole,1647153942.0
8407,comment,1,i0gu53c,,">hole get its dns master server

Update: Even filling second dns with pi-hole does not make any different",pihole,1647155845.0
8408,post,1,tcqbnl,Percentage Blocked Keeps Dropping,"I've had my Pi-hole up and running for about two years now, and it's been great.  A couple months ago I removed some adlists and added some new ones.  Prior to doing that I was seeing about 6-ish percent blocked, and after I was seeing about 17-ish percent blocked.  It stayed there for a while, and then started dropping.  It got down to 2.4% blocked (which I saw as recently as list night), and now today I see it's showing 2.2% blocked - so it's continuing to drop.

The only thing that changed about the same time this drop in percent blocked started happening is that I replaced my TP-Link mesh router system with an Eero Pro 6 mesh router system.  I switched to the Eero about 3 weeks ago, and that's when I started seeing this drop in percent blocked.  I'm not using Eero Secure, which I know overrides things like DNS.  I can't even turn Eero Secure on if I wanted to because I'm running it in bridge mode, which was how I also had the TP-Link set up.

Absolutely nothing else has changed other than replacing the TP-Link with the Eero.  I have a Ubiquiti USG that's handing out IP addresses and whatnot, and I didn't make any changes to that or anything else about my network - so I'm thinking it has something to do with the Eero, but I don't know what.

Anyone have any ideas what might be going on?",pihole,1647117565.0
8409,comment,3,i0euo5i,,Check your absolute numbers.,pihole,1647117812.0
8410,comment,2,i0g1hoz,,Did you configure your pi for IPv6?,pihole,1647138376.0
8411,comment,2,i0giupr,,Maybe check the DNS on your devices. Are they using the pihole? Could be your major offenders are defaulting to not use pihole like your phone. But other non-offenders are still using it. Like an Apple TV.,pihole,1647148077.0
8412,comment,1,i0euup5,,"First troubleshooting step is putting the TP-Link router back and seeing if the blacklist percentage goes back up. 

Second, have a look at the top blocked domains. It’s something that used to be there missing? TO-Link equipment will phone home a lot, so that could be part of it.",pihole,1647117893.0
8413,comment,1,i0f1m1g,,Have you been updating your pi-hole software and updating your gravity regularly? I’m blocking about 175k domains and running about a 20% block rate.,pihole,1647120924.0
8414,comment,1,i0eze1n,,"Sorry for my ignorance - what are ""absolute numbers?""",pihole,1647119933.0
8415,comment,1,i0p7q0n,,"Looks like IPv6 was the culprit.  Added the IPv6 of my pi-hole, and the percent has been going back up.  It's at 9% now.",pihole,1647311209.0
8416,comment,1,i0eyfhg,,"Well, I can't put the TP-Link back.  It's been three weeks since I replaced it with the Eero, and I got rid of the TP-Link shortly after I replaced it because I was having problems with it.

As far as top blocked domains - the #1 device was always my spouse's work laptop, and the #1 domain was always something related to the VoIP software that their work uses (I can't remember the name of it) although whatever was being blocked never seemed to cause any issues with it.  Neither one is anywhere on the blocked device or blocked domain list anymore, but both are still on the network.  They were always the #1 things before I made changes to the adlists, and for over a month after I made changes to the adlists - up until I installed the Eero.

Edit: I take that back - my spouse's work laptop is still on the blocked client list, but it's dropped to the very bottom and only showing 4 requests.  It used to be at the top with several thousand requests.  The top client now is one of our LG TVs, and only showing 942 requests.",pihole,1647119503.0
8417,comment,2,i0f4weu,,"I've always kept my pi-hole updated.  It's on the latest version.  I started an update of Gravity after I saw your reply - but I thought it updated on its own on some sort of regular basis.  Is that not the case?

My percent blocked is continuing to drop today.  Last night it was 2.4%, the first time I looked at it today it had dropped to 2.2%, then it dropped to 2.1%, and just now after Gravity finished updating it dropped to 1.9%.",pihole,1647122419.0
8418,comment,-1,i0f6kf7,,"You divide one number by another to get a percentage. What are those numbers?

Could be that the new equipment makes a lot of requests somewhere that aren't being blocked and maybe that's fine. But it would increase the number of total requests, so your percentage drops.

If it's instead the number of blocked requests that's dropping while the total number stays the same, maybe something is going on.",pihole,1647123185.0
8419,comment,1,i0f5rqw,,Well it would seem that these devices are somehow bypassing your pihole then. No idea how without knowing more information.,pihole,1647122817.0
8420,comment,1,i0f59e3,,As far as I know gravity doesn’t update on its own. There maybe someway I’m not aware of. How many lists do you have? I run 15 lists and update a few times a week.,pihole,1647122585.0
8421,comment,1,i0f9d2c,,"Right now I have 82,673 queries with 1,569 blocked.  In the past I've had approximately the same number of queries with a lot more blocked - like 10,000+ blocked.",pihole,1647124479.0
8422,comment,3,i0fb87z,,">	As far as I know gravity doesn’t update on its own.

It does.  Every Sunday morning between 0300 and 0500 your local time, via a cron script put in place during install.",pihole,1647125339.0
8423,comment,2,i0f5q7b,,"I've got 31 at the moment.  Pi-hole is showing 1,250,975 domains total on the adlists.",pihole,1647122798.0
8424,comment,1,i0fnr2s,,"Thats cool, I never knew that. I always update it 2-3 times a week and notice the domains update so I just assumed.",pihole,1647131338.0
8425,comment,0,i0f6chx,,"Ok wow! I would say just update it a few times a week and monitor the blockage rate. Only other thing is on the Dashboard at the very bottom look for Top Client and make sure the IP address for your router is there, make sure its using it?",pihole,1647123085.0
8426,post,0,tcq48b,Am I Doing This Correctly?,"I just installed Pi-hole in Docker Desktop. I have it up and running and I can access the dashboard. I went into my Asus router and told it to assign the IP of the machine running Pi-hole as DNS for all DHCP clients. I then released and renewed the IP of my desktop (the same machine that runs Docker) and used `ipconfig /all` to check its DNS servers. It lists the Pi-hole IP first and then the router IP (no way to stop the router from also sending its own IP as a DNS server that I can see). I left the router WAN DNS set to Cloudflare. 

So... I then went back to the Pi-hole dashboard and noticed that the only clients listed are localhost and the IP of the Pi-hole container. All traffic in the logs shows as coming from the Pi-hole container. I was expecting the dashboard to list clients by host name or IP but that's not what I'm seeing and after  a whole bunch of (ad-free) Googling I've come to the conclusion that this is just the way it's going to work. I did see some people suggest using the Pi-Hole's DHCP server but I also saw just as many people say that this would cause its own headaches. 

Is there anything I'm overlooking? Is everything set up correctly? Is there anything I could change or do differently to get clients to show up?",pihole,1647116962.0
8427,comment,1,i0g1y03,,"Like other people said use the pi for DHCP.

What issue are you worried about?",pihole,1647138618.0
8428,comment,1,i0hh75w,,I read of a lot of people having issues with a DHCP server running inside Docker with everything else outside of Docker.,pihole,1647174509.0
8429,post,1,tcpluq,Pihole working but one device is getting a free pass,"As the title reads, I’ve had Pihole setup and running for several months now, and I see little to no ads on phones and tablets. 

However, last night I noticed that my desktop PC is still seeing ads. The reason I didn’t notice before is because uBlock Origin was on all the time. 

What could be the reason that this specific device is allowed to connect to blacklisted domains, while the rest of my devices aren’t? 

For example, last night I was getting served ads from the domain moatads.com (I checked the blacklist and it is blacklisted). I see the entry in the Pihole log as “allowed” for the PC, which leads me to believe the traffic is going through the Pihole and being allowed. If I try to access the same domain from my phone, it cannot reach it; when I look at the logs, it appears as blocked. 

Any ideas? 

I tried troubleshooting last night but was too tired to find anything. The one thing I read which made me think was something about IPv6,  but I’m not sure.

EDIT: I figured it out (I feel like an idiot). I had created a group for this one device and hadn't assigned the group to the adlist; hence, PiHole was not applying the adlist filter for that one device only. Thanks for your time everyone!",pihole,1647115454.0
8430,comment,2,i0f9m5m,,Check the browser DNS setting on the PC to see if it's using DoH,pihole,1647124593.0
8431,comment,1,i0esy4x,,What is the PC's DNS set for? I'll bet it has a DNS entry and it is bypassing the PiHole.,pihole,1647117033.0
8432,comment,1,i0f5uo4,,"From the client where you are seeing ads (and from the command prompt or terminal in that client and not via ssh to the Pi), what is the output of

`nslookup pi.hole`",pihole,1647122856.0
8433,comment,1,i0fcxkd,,I've never seen this setting. Is it browser-specific or system-wide?,pihole,1647126137.0
8434,comment,1,i0felhr,,"I looked in Edge and secure DNS was enabled. I disabled it, restarted the browser, and ads are still showing.",pihole,1647126925.0
8435,comment,1,i0et727,,"No, PC’s DNS is the PiHole’s IP address. 
Would the allowed connection still be logged on the PiHole if it were bypassing it altogether?",pihole,1647117144.0
8436,comment,1,i0fb2xj,,"Just tested it. I get the PiHole's IP address, which is the same as the DNS address I see when doing 

`ipconfig -all`

One thing I notice and don't know if it's odd, I get two addresses. An IPv4 and an IPv6 address",pihole,1647125272.0
8437,comment,1,i0ibofs,,"That was definitely one of your issues (having DoH enabled) as that would have bypassed phiole.

&#x200B;

I'm not sure if the results would have been cached.  Try clearing the cache or running in incognito mode to see if that makes a difference.",pihole,1647189878.0
8438,comment,1,i0fbdcn,,What device is at the Ipv6 address?  The client is free to use this DNS whenever it decides to.,pihole,1647125405.0
8439,comment,1,i0ihij8,,"Strange.
Do you think traffic would’ve nevertheless been logged in the PiHole log? Because I do see the traffic from the device being allowed, whereas the same domain for other devices is blocked.",pihole,1647192313.0
8440,comment,1,i0fcmru,,"The IPv6 address is the PiHole's (or rather the Raspberry Pi hosting it). 

I get the same when running 

`ip addr`",pihole,1647125995.0
8441,comment,1,i0fddlp,,"Is the browser in use on the client using secure or private DNS (essentially DNS over https),  which bypasses Pi-hole?

Any Avast software on the PC?

Running a VPN on the PC?",pihole,1647126344.0
8442,comment,1,i0fdlwe,,"I haven't configured any private DNS on the browser or PC.   
No Avast, no VPN. 

If any of the above were used, would the client's activity still show up in the PiHole's logs?",pihole,1647126452.0
8443,comment,1,i0fehh7,,"I checked in Edge (which is not my main browser but doesn't have uBlock). Secure DNS was enabled; I disabled it, restarted the browser but ads are still visible",pihole,1647126873.0
8444,comment,1,i0fkn1v,,">	If any of the above were used, would the client’s activity still show up in the PiHole’s logs?

No.

Please generate a debug log, upload it when prompted and post the token URL here.  And, what is the domain of interest here?",pihole,1647129804.0
8445,comment,2,i0j68gy,,"I figured it out, I'm an idiot. 

The reason was because of a group that I hadn't activated for the adlist. 

Sorry for wasting your time.",pihole,1647202767.0
8446,comment,1,i0fmaxa,,"Will do that. 
It’s not a specific domain because I’m getting lots of ads on that specific device only. 
An example domain is the one I mentioned in the original post, moatads.com

Thanks for the help!",pihole,1647130619.0
8447,comment,1,i0i07iv,,"Done. 
Here is the URL with the token 

https://tricorder.pi-hole.net/YSqe0DEo/

Thanks",pihole,1647184924.0
8448,comment,2,i0jc0jx,,Not a problem. That's an easy mistake to make. Glad it's sorted.,pihole,1647205270.0
8449,post,5,tcop22,Guide to set up Pihole (docker) with Pivpn and Wireguard including UFW and IpTables,"Hi everyone, I have been trying to figure out how to set up a vpn to access my pihole when I am out of my home network. I believe I managed to get the set up working and wanted to share my findings as I could not find much documentation online on how to set it up.

&#x200B;

First I installed pihole via docker-compose:

    version: ""3.8""
    
    services:
      pihole:
        container_name: pihole
        image: pihole/pihole:latest
        restart: always
    
        environment:
          TZ: '[put your location here]' # Put your own timezone here.
          WEBPASSWORD: '[Put a strong password here]' # Put a strong password here.
    
        # We'll use host networking simply because it is way easier to setup.
        network_mode: host
    
        # Volumes store your data between container upgrades
        volumes:
          - './etc-pihole/:/etc/pihole/'
          - './etc-dnsmasq.d/:/etc/dnsmasq.d/'
    
        # Required for the DHCP server
        cap_add:
          - NET_ADMIN

This worked great for my local network, as long as I added the assigned static ip of my pihole as the dns server on my devices. I opted to individually assign by device verses by my router.

&#x200B;

Next I installed the pivpn installer via the curl, I am on the PiOS lite so pivpn assumed I was not using raspberian for some reason. Go through all the settings and select custom for DNS and put the dns of your pihole, and continue through with wireguard, go ahead and reboot!

&#x200B;

then you can `pivpn add` followed by the name of your profile so say ""`pihole`""

then run `pivpn -qr` and scan on your wireguard app for iPhone or Android.

&#x200B;

If you dont have ufw this should be working great, however if you do have ufw you may run into issues like I did! Here is how i fixed it:

Here is my ufw rules with IP removed:

    To                         Action      From
    --                         ------      ----
    51820/udp                  ALLOW IN    Anywhere                   # allow-wireguard
    22/tcp                     ALLOW IN    [router IP]/24
    80/tcp                     ALLOW IN    [router IP]/24
    53/tcp                     ALLOW IN    [router IP]/24
    53/udp                     ALLOW IN    [router IP]/24
    4711/tcp                   ALLOW IN    127.0.0.0/8
    51820/udp (v6)             ALLOW IN    Anywhere (v6)              # allow-wireguard
    
    Anywhere on eth0           ALLOW FWD   10.6.0.0/24 on wg0

Now for some reason this still did not work, very interesting! After some digging through forums it looked like I needed to mess with Iptables.

run : `sudo apt install iptables-persistant` agree to the prompts by pressing yes a few times

then run: `sudo iptables -I INPUT -i wg0 -j ACCEPT`

In complete honesty I am not sure how to iptable works and what exactly it is doing. Maybe someone much smarter than me can help explain it.

&#x200B;

As a result, when on data or another wifi network you can enable the vpn and all traffic is routed through pihole, you can also access the pihole admin page.

&#x200B;

Interesting enough this is currently working with Pihole set to ""allow only local requests"".

&#x200B;

If anyone has any suggestions to improve this or make it more secure please let me know if I messed up anywhere!

&#x200B;

I was also able to get unbound running in it's owner docker container if anyone was curious how to do that. So currently only pivpn with wireguard is running on the system and unbound and pihole are running in docker containers",pihole,1647112856.0
8450,comment,1,i0hblik,,"ummm.... have you tried pihole - unbound - wgeasy in docker entirely with ufw on host???  


i didnt have success.",pihole,1647170245.0
8451,comment,1,i0kpm7g,,"I’ve got all but pivpn instead of wgeasy, however pivpn is not in docker",pihole,1647228340.0
8452,post,1,tco1bf,Pivpn and docker pihole,"In order for my vpn to work I have to run `sudo iptables -I INPUT -i wg0 -j ACCEPT.`

Is this safe and why do I need to run this everytime for my vpn to work via pihole in a docker container?

51820/udp                  ALLOW IN    Anywhere                   # allow-wireguard

22/tcp                     ALLOW IN    (router IP)/24

80/tcp                     ALLOW IN    (router IP)/24

53/tcp                     ALLOW IN    (router IP)/24

53/udp                     ALLOW IN    (router IP)/24

4711/tcp                   ALLOW IN    [127.0.0.0/8](https://127.0.0.0/8)

51820/udp (v6)             ALLOW IN    Anywhere (v6)              # allow-wireguard

&#x200B;

does anyone have any solutions. If I disable ufw it works, or if I run the iptable command it works, is this safe and something I need to run on boot?

&#x200B;

I've got it working with persistant-iptables, however I just want to make sure my network is safe",pihole,1647110923.0
8453,post,3,tclkh7,PiHole randomly goes down until reboot,"Has anyone had this happen to them? There is no pattern that I have found for when this happens but yesterday, 3/11/22), my PiHole just randomly stops working and I have to reboot it either through the web GUI or unplug it from the power supply. It happened twice yesterday and at the least once a week on random days.",pihole,1647105799.0
8454,comment,0,i0eo8uf,,"If you're willing, try Adguard Home. I find it to be more reliable than my previous pi-hole install.",pihole,1647114939.0
8455,comment,1,i0e21o8,,https://imgur.com/a/czT5ThV/ Here are the graphs and times it stopped working.,pihole,1647105924.0
8456,comment,1,i0e4h3s,,"I think I have seen such problem before... Wait a sec, let me see if I could find that post",pihole,1647106751.0
8457,comment,1,i0e5svv,,"https://www.reddit.com/r/pihole/comments/lbkjgc/if_a_device_keep_asking_for_a_blocked_domain_try/?utm_medium=android_app&utm_source=share

https://www.reddit.com/r/pihole/comments/mctnjb/a_script_to_restart_pihole_if_it_is_down_for/?utm_medium=android_app&utm_source=share",pihole,1647107216.0
8458,post,1,tcjzx3,Anyone using pihole with VilfoOS?,Hello. I am currently using pfSense with pihole. Now considering trying VilfoOS. Is it possible to use pihole running on a raspberry pi 4 in conjunction with VilfoOS? Thanks for any info!,pihole,1647102592.0
8459,post,0,tciyyo,No ads are being blocked after configuring it with Synology. What can I try to fix it?,,pihole,1647099653.0
8460,comment,2,i0e89yu,,"Pi-hole is apparently blocking any because it has not received many DNS requests. 

Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1647108245.0
8461,comment,1,i0fax6p,,Could the NAS be configured as a DNS?,pihole,1647125197.0
8462,comment,-2,i0e2g9n,,"Obviously, you can access PiHole via your browser but try to SSH to the IP address just to be safe. Is your router pointing the DNS requests to the PiHole IP address? That in itself should force all network DNS requests to the PhHole.",pihole,1647106061.0
8463,post,0,tcissg,I have about ~10000 requests a day from my Roku stick. Should I keep these domains blocked?,,pihole,1647099151.0
8464,comment,9,i0dlu3c,,"Is anything broken? If not, keep it blocked.",pihole,1647099220.0
8465,comment,8,i0dol0j,,"Just FYI for a lot of IoT things including ""smart"" devices, they tend to scream more when they cant call home.",pihole,1647100440.0
8466,comment,6,i0dnuye,,Roku is consistently about my top blocked domain.,pihole,1647100127.0
8467,comment,2,i0hcz93,,"I have one particular Roku that's spams the same url scribes whatever, just a tons of times while it's on.

3 other rokus that don't even come close to the same amount",pihole,1647171347.0
8468,comment,1,i0dodmx,,"Yeah, recently Pluto stopped working on my Roku Ultra.  I tried parsing and blacklisting just the Pluto DNS, but my Kung Fu must be weak.",pihole,1647100352.0
8469,comment,1,i0dw6i5,,On my Amazon Stick I have up to 5k a day too I keep everything blocked and it works fine,pihole,1647103704.0
8470,comment,1,i0dzy8g,,I just got some warning that my roku attempted 1000 dns lookups in 60 seconds. I really should just unplug it.,pihole,1647105208.0
8471,comment,1,i0e47b7,,This might help: https://www.reddit.com/r/pihole/comments/lbkjgc/if_a_device_keep_asking_for_a_blocked_domain_try/,pihole,1647106658.0
8472,post,0,tchcbt,Raspberry Pi 3 Model A+ 64-bit 512MB RAM for Pi-hole,"Hi, would the Raspberry Pi 3 Model A+ 64-bit 512MB RAM be sufficient to be used as a Pi-hole? It's the only model that I can purchase given the current shortage.",pihole,1647094774.0
8473,comment,2,i0dcsit,,yes. unless you plan to use it for hundreds of clients.,pihole,1647094874.0
8474,comment,1,i0dd3zb,,Yes but will need an adapter as it does not have ethernet port.,pihole,1647095038.0
8475,comment,1,i0dkl4e,,"[https://www.axagon.eu/en/produkty/ade-xr](https://www.axagon.eu/en/produkty/ade-xr)

would this do the job as an ethernet adapter?",pihole,1647098642.0
8476,comment,1,i0dyi4i,,"If you  can get a Pi 4, that will solve your problem.",pihole,1647104666.0
8477,comment,2,i0dfwoo,,The Pi can connect to the network via the built in dual band WiFi.  This should work just fine unless the network has very poor WiFi.,pihole,1647096442.0
8478,comment,2,i0dlhg8,,"[https://www.axagon.eu/en/produkty/ade-xr](https://www.axagon.eu/en/produkty/ade-xr)

would this suffice?",pihole,1647099059.0
8479,comment,1,i0ddttx,,That's not going to be easy for me to find since I'm completely new to this. Do you know of any that would work with this model?,pihole,1647095405.0
8480,comment,1,i0dzayr,,"The thing is, I can't.",pihole,1647104984.0
8481,comment,2,i0dg4aj,,Run the Pi on wireless.,pihole,1647096544.0
8482,comment,1,i0e069l,,"Okay, use the Pi 3 in WiFi for now then when a Pi 4 is available, get one so you can connect to the LAN.",pihole,1647105284.0
8483,comment,1,i0dttwp,,It will work. I guess I should have suggested an adapter versus saying tou need one. I said that because I had horrible results running it wireless but great with wired ethernet.,pihole,1647102716.0
8484,comment,1,i0e0hyj,,Can't I just use this? https://www.axagon.eu/en/produkty/ade-xr,pihole,1647105395.0
8485,comment,1,i0e1kfk,,"I've never attempted to use one of these with a Pi but what could it hurt? If it doesn't work, you still have the WiFi.",pihole,1647105760.0
8486,comment,1,i199pqv,,Ok I was able to get it to run.,pihole,1647675482.0
8487,post,0,tcgk0f,"If I use brave to block ads in the computer, is it still worth installing pihole in a NAS?","For example, if you install a program, maybe pihole blocks those ads?",pihole,1647092262.0
8488,comment,5,i0d9eat,,Pihole will block ads on your entire network. Not just in your browser.,pihole,1647093062.0
8489,comment,2,i0dyv5r,,"Nobody mentioned telemetry blocking yet.  Pihole also blocks trackers, which is a great benefit.  Even if you have an ad blocker in the browser, apps and operating systems can send all kinds of data about you, and pihole can help reduce that.

I run pihole, for the network, then ublock, disconnect and privacy badger in the browser.  

&#x200B;

YMMV of course :)",pihole,1647104818.0
8490,comment,1,i0ddjji,,With the Pi-Hole you can also block advertising on your smartphone when connected to your home Wi-Fi. That's quite valuable if you don't want to buy all the ad-free versions of games and other apps.,pihole,1647095258.0
8491,comment,1,i0dybai,,"I use both. Neither, individually blocks all ads. Together, I get zero ads including YT.",pihole,1647104588.0
8492,comment,1,i0d9spj,,Pihole will block ads coming into your phone's browser too.,pihole,1647093279.0
8493,comment,1,i0dmzoa,,Also works blocking Instagram ads?,pihole,1647099741.0
8494,comment,1,i0db5vg,,"Besides the browser, what other parts pihole can block ads, can you give me an example?",pihole,1647094014.0
8495,comment,1,i0dnq8p,,"No. Instagram feeds the ads from the same servers as the content, so you cannot block their ads. It's the same for Youtube ads, for example.

The solution for those cases is to use an extension in your browser. For example, I use uBlock Origin.",pihole,1647100070.0
8496,comment,1,i0l4dni,,You can use unofficial Instagram app barinsta,pihole,1647237558.0
8497,comment,2,i0dbcs0,,"You’re tv, your phone, everything",pihole,1647094117.0
8498,comment,1,i0dbi1l,,"Some of the newer smart TVs display ads. Quite a few of them can be blocked.

IoT devices send telemetry back to the cloud and you can block those if there is no option to disable and it's not going to affect the device's function. 

Many apps on your phone, especially free ones, are displaying ads. Those have the potential to be blocked.",pihole,1647094196.0
8499,comment,1,i0e00fs,,"If set up right any devices. smart devices, tvs, phones, ipads, computers, consoles etc. If it can display ads or tracks your data the pihole will block it. 

I recently set my pihole up again, and its not working right gotta change its ip address after going to ddwrt on router but it had blocked 6031 queries in 5 days admittedly alot were malewarebytes telemetry and geo yahoo but still ads up.",pihole,1647105228.0
8500,post,0,tcg3ps,Google ads are partially blocked,"Pi-hole seems only to partially block the ads on Google. I can still [see](https://imgur.com/pJuoqhm) the ads but when I [click](https://imgur.com/4hL358B) on them, then I get the message that they are blocked. Is there anyway the also block them completely?",pihole,1647090665.0
8501,comment,2,i0dbegh,,">	Is there anyway the also block them completely?

Not with Pi-hole. The links are served from the same domain as the search results. You can't open the links because they lead to blocked domains. 

A browser solution such as uBlock Origin can remove the links because it can inspect and alter the html code.",pihole,1647094142.0
8502,comment,1,i0d6knt,,"I am not sure if blocking the following would help:

```
adservice.google.com
www.googleadservices.com
googleads.g.doubleclick.net	
static.doubleclick.net
```",pihole,1647091438.0
8503,post,0,tcfpxr,Is there any pihole like thing for phones?,"I’m looking for something that I can install on an android phone (rooted) to block ads like pihole. Or is there a way to install pihole on android phone maybe with termux or something?

P.S - I’m looking to make my android phone as dns server for the network",pihole,1647089301.0
8504,comment,3,i0d6oi1,,"You can install pihole on a phone, I saw that somwhere and thats on my bucket list, wait a sec...

Edit: there you go!

https://www.reddit.com/r/pihole/comments/czz7z8/next_level_poor_pi_hole_setup/ez4qa6c?context=3

https://www.reddit.com/r/pihole/comments/czz7z8/next_level_poor_pi_hole_setup/",pihole,1647091501.0
8505,comment,2,i0pc3tu,,"Sounds like this is what you're looking for:

[Pi-hole for ARMv7 (2011 and newer) Android devices.](https://github.com/DesktopECHO/Pi-hole-for-Android)",pihole,1647313244.0
8506,comment,1,i0d3fp3,,"AD guard comes to mind as an option.

https://adguard.com/en/adguard-android/overview.html

And then set your device dns servers as well",pihole,1647089470.0
8507,comment,1,i0d5em0,,I use Adaway on my phone. It's also hosts based sink hole for rooted phones. Most lists will have an Adaway equivalent.,pihole,1647090720.0
8508,comment,1,i0dgl9a,,nextdns.io,pihole,1647096766.0
8509,comment,0,i0d6ile,,"You're rooted so you can modify your hosts file to your needs.

Give AdAway a try, it's pretty good.


Another solution would be to use AdGuard just like this:

[https://i.imgur.com/q4v7JNL.jpg](https://i.imgur.com/q4v7JNL.jpg)",pihole,1647091403.0
8510,comment,2,i0d3i0t,,I want my android phone to block ads for the network not just the phone.,pihole,1647089510.0
8511,comment,1,i0dh47e,,Latency to next dns is too high from my network,pihole,1647097020.0
8512,comment,1,i0dhe08,,How to use it as dns server? Editing host file or adaway or similar will only work for the phone not other devices on the network,pihole,1647097149.0
8513,comment,1,i0dhfdw,,How to use it as dns server? Editing host file or adaway or similar will only work for the phone not other devices on the network,pihole,1647097168.0
8514,comment,2,i0d3ls4,,Ah. So that’s a fair bit more complex. You want you phone to be a dns server for a network - I would think you would see some pretty serious performance issues due to latency.,pihole,1647089574.0
8515,comment,1,i0d3ujm,,It should be able to serve dns requests fine I think. Not sure though. Will update if I’m able to run,pihole,1647089727.0
8516,post,1,tcfdda,Any way to show individual client data on 2nd pihole?,"I have 2 piholes running, each with unbound setup. The first pi is also my DHCP server and its secondary DNS is set to the IP of my 2nd pi.

I was wondering if there is any way to show individual client data on the 2nd pihole instead of it just showing me my first pi as a client.",pihole,1647087979.0
8517,comment,2,i0d8b8z,,"I propose you configure DHCP to send out two DNS addresses to DHCP clients (both PIs).
Clients use the one the other randomly.

I would not configure one PI to use the other as DNS but both use the same set of external resolvers. (So not chaining DNS flow)",pihole,1647092465.0
8518,comment,1,i0d2fux,,"You want both DNS server for backup? If so use [this](https://discourse.pi-hole.net/t/can-the-pi-hole-dhcp-send-out-a-second-dns-server-address-to-clients/18112/6) instead. If not, then pretend I have said nothing.",pihole,1647088807.0
8519,comment,2,i0d9ue0,,"So instead of telling pi1 to use pi2 as a backup DNS, just send both pis IPS with DHCP?",pihole,1647093305.0
8520,comment,1,i0d59rd,,"I think this is exactly what I'm looking for, thanks!  
Quick question in case you know, any idea why there is a ""6"" as the first DHCP option?",pihole,1647090635.0
8521,comment,3,i0daoa2,,"Yes. 

The clients have two options. And for failover you don‘t want a chain which can break with single point of failure.

And you will see the client names in both dashboards. I am not sure how often a client will use the one or the other, but you will find out.",pihole,1647093756.0
8522,comment,1,i0d67ku,,Great question. I dont know.,pihole,1647091217.0
8523,comment,1,i0dekjo,,"Makes sense.

I've set each pihole to only have 1 DNS server which is itself at port 5335 for unbound.

I then created a config file inside of /etc/dnsmasq.d called 02-pihole-dhcp-DNS.conf with:

`#PiHole DNS server IP's`  
`dhcp-option=6,192.168.1.pi1,` [`192.168.1.`](https://192.168.1.33)`pi2`

Where pi1 is the local ip of my first pi and pi2 is the local ip of my 2nd pi. So in theory this should work right?",pihole,1647095777.0
8524,comment,1,i0d70og,,"No worries, I actually managed to find some information about it from [this](https://www.reddit.com/r/pihole/comments/mpjm09/custom_dhcp_options_with_pihole/) reddit post. Which links [this](https://etherarp.net/dnsmasq/) cheat sheet.

Seems that option 6 is just what it says, an option, and option 6 is responsible for selecting which DNS(s) will be sent to clients. I'm probably wrong but that's how I interpreted it.",pihole,1647091705.0
8525,post,254,tcess5,A letter from a user,"Hi, Everyone who uses pi-hole. 

I would like to express my most sincere thanks to the developers of Pi-Hole as without it, I would have never learnt to use all the different linux distros, from Raspian to Fedore linux.

Everyday we are winning a uphill battle with ads and without pi-hole, I probably would still be thinking that there are horny singles in my area. Without Vanced,tomatoftw and pihole, my life would have been more miserable than it is.

 For helping everyone keep sane, thank you pi-hole development team. 

Sincerely, a pi-hole user.",pihole,1647085739.0
8526,comment,136,i0d5w6v,,https://pi-hole.net/donate/,pihole,1647091027.0
8527,comment,11,i0d9rdp,,Nice letter of appreciation. I have tested pi-hole earlier and just made a move from pfsense with pfblockerng to UniFi with pi-hole. If I will stay with pi-hole then I will definitely donate.,pihole,1647093259.0
8528,comment,10,i0e7p2f,,#I FIGHT FOR THE USERS,pihole,1647108005.0
8529,comment,21,i0da4uk,,"Sad for those horny singles in your area :(, jk im sure the devs really appreciate it",pihole,1647093465.0
8530,comment,45,i0d17g8,,Lol… Donate!,pihole,1647087934.0
8531,comment,27,i0do8bm,,Show your appreciation by donating.,pihole,1647100287.0
8532,comment,4,i0eke55,,[You gotta give! ](https://giphy.com/gifs/thelonelyisland-the-lonely-island-i-think-you-should-leave-itysl-H6N2wC2JqgrRVLdTu4),pihole,1647113270.0
8533,comment,3,i0g4i3w,,There really are horny singles in your area.  Just they don't look quite like the ads.,pihole,1647139954.0
8534,comment,2,i0h2xba,,">without it, I would have never learnt to use all the different linux distros

I totally feel the same. I always wanted to start in homenetworking, but could have never persuaded my wife from letting me try some changes.  
Saying ""we could block some ads automatically"" was a good end-user effect. Now we have adblocking, VPN, free local domains for gaming servers in the cloud.",pihole,1647163036.0
8535,comment,7,i0fstu2,,"
Whole family getting money, thank god for Ye

Whole family blocking ads, thank god for Pe",pihole,1647133893.0
8536,comment,14,i0di617,,Devs do appreciate the horny singles,pihole,1647097514.0
8537,comment,3,i0gagwf,,Maaaaaaan.. Even the ones in the ads look weird..,pihole,1647143188.0
8538,comment,1,i0jmhoq,,Same here. I blocked WhatsApp and made her switch to signal. Or else she would have never even considered switching to signal app,pihole,1647209749.0
8539,comment,6,i0dyhq2,,Do all the horny singles ads get forwarded to them?,pihole,1647104661.0
8540,comment,4,i0dyomw,,i would hope,pihole,1647104742.0
8541,comment,1,i0jmpog,,"Ford about mass production of automobiles : ""if I made what people told me they wanted, I would've bred faster horses""",pihole,1647209845.0
8542,comment,1,i0gdcfa,,I believe that's a secret gravity setting in the advanced configuration.,pihole,1647144803.0
8543,comment,2,i0i9859,,"shhh, don't tell everyone!",pihole,1647188840.0
8544,post,2,tc7fh4,Pivpn cant see docker instance of pihole?,"Hi I set up pihole within a docker container and it works great if i set my dns to the ip of my pi. I wanted to set up a vpn to access my pihole dns from outside the network. 

I set up Pivpn with wireguard and it works with cloudfare, however when I change the dns to the ip of my pi it does not work and loads for ever. Nothing shows up in the logs. It is almost as if pivpn cannot see the ip of my docker container.

&#x200B;

Has anyone run into this/know how to work around it? I would really like to be able to use mobile data/other wifi networks and be protected?",pihole,1647055834.0
8545,comment,2,i0c29zo,,[deleted],pihole,1647060956.0
8546,comment,1,i0c7dqw,,"So if I run the pivpn curl, and within custom dns input my pivpn dns, where do i do the PEERDNS, I guess I'm just trying to figure out steps as in run the pivpn installer, custom dns, run through and then how do I make sure it is on the same docker network. I only have pihole running on docker and pivpn running from the curl. I really appreciate your help. Or how do i figure out docker ip, is it not the same as the raspberry pi ip? currently it works for only local network",pihole,1647064142.0
8547,comment,1,i0c91fs,,[deleted],pihole,1647065258.0
8548,comment,1,i0c97b4,,I put the pihole rasperberry pi dns in that section originally but when i try to connect on my phone via wireguard app and qr it loads for ever and loses connection. the device does not show up on pihole either. Been at it for a few hours so i really appreciate the help,pihole,1647065370.0
8549,post,2,tc0mhq,Web Interface only reachable via IP-Address,"As the title says, I can't reach the web interface by using ""[http://pi.hole/admin](http://pi.hole/admin)"". I always get "" DNS\_PROBE\_FINISHED\_NXDOMAIN"" as an error. The only way is for me to use the IP-Address: ""192.168.xxx.10/Admin"".

I searched a lot but don't know whats wrong. Someone got an idea?",pihole,1647034195.0
8550,comment,1,i0amr1i,,"This is typically caused by the client device not using Pi-hole for DNS.  Only the Pi-hole software can resolve the domain name pi.hole to the IP of the Pi-hole so the web page will load from that URL.  When the IP is used, no DNS resolution is required and the page loads.

From the client in question, and from the command prompt or terminal on that client (and not via ssh session to the Pi terminal), what is the output of the following:

`nslookup pi.hole`",pihole,1647035544.0
8551,comment,1,i0b7acl,,"Log into your PiHole with the IP address and go to Local DNS - DNS Records. In the ""Domain box"" add pi.hole.localdomain and in the IP Address insert your PiHole's IP address. Click ADD and your DNS record will be added to PiHole. Now you should be able to access the PiHole by simply typing :  

pi.hole/",pihole,1647044759.0
8552,comment,1,i0antu2,,"This is what I got as a reply:

`C:\Users\Name>nslookup pi.hole`  
`Server:  fritz.box`  
`Address:  fd00::4e1a:fdff:xxxx:54e6`  
`*** pi.hole wurde von fritz.box nicht gefunden: Non-existent domain.`",pihole,1647035987.0
8553,comment,1,i0avkk2,,I had set up pihole with docker and it is the same. Everything is being blocked when I set my devices to use pihole dns. But have to use the ip of the pi to connect,pihole,1647039333.0
8554,comment,1,i0b9r7y,,Appreciate the help but it's not working. Still the same error message. I will just use the IP-Adress instead.,pihole,1647045972.0
8555,comment,1,i0ao36y,,The client is not using Pi-hole for DNS. It is using the Fritz Box on an IPv6 address.,pihole,1647036097.0
8556,comment,1,i0bir3m,,"On your computer, set the default DNS to the pihole.",pihole,1647050450.0
8557,comment,1,i0aojmy,,"So the pi-hole is not blocking anything, if I understand you correct? How do I solve this problem?

Edit: I followed a guide on Youtube. That's why I put the IP-Adress of the Pihole as a DNS Adress into my Router. So all my devices are blocking ads, the only problem is that I can't reach the webinterface with pi.hole.",pihole,1647036288.0
8558,comment,1,i0bjq8m,,"This thread may be of interest. 

https://discourse.pi-hole.net/t/pihole-not-blocking-anymore/54135/10",pihole,1647050943.0
8559,comment,1,i0bjxgj,,">  So all my devices are blocking ads

Is the blocking successful?

If it is, sounds like IPv6 vs IPv4 issue. If your computer is using IPv6 and is preferring IPv6 for DNS resolution, then this could be the issue. 

An easy test would be to disable IPv6 on your computer, and then see if you can resolve pi.hole correctly.

Can you edit the DHCPv6 scope on the router to add the IPv6 address of the PiHole? Or to add the address to IPv6 SAAC settings on the router? (IPv6 has a few ""autoconfig"" options) Alternatively, disable IPv6 on the router entirely.",pihole,1647051044.0
8560,comment,1,i0euf95,,"Yikes, no need to disable IPv6! Just set up the pihole as the upstream IPv6 DNS resolver on your router.",pihole,1647117700.0
8561,post,0,tbyvwc,Russian Misinformation Sites?,"Does anyone have a reliable list of sites to block that are misinformation outlets for the Russian government, specifically sites that are known to be funded or backed by the government? I found a reference online to some identified sites that were tied back to the government but weren't sure if a compiled list for PiHole had been created by anyone yet?",pihole,1647029319.0
8562,comment,10,i0a7jka,,www.facebook.com :),pihole,1647029356.0
8563,comment,8,i0a88oa,,"This is a fairly fruitless endeavor with Pi-hole.

(1) Who defines disinformation?  You can see quickly on a web page  if the information appears legit, but a blocklist can't do this.  If you get to a page you choose not to read on the internet, use the back button. 

(2) For whom are you trying to filter this?  Yourself?  See item 1 above. Someone else?  Why are you censoring their access to whatever information they choose to access?",pihole,1647029645.0
8564,comment,2,i0b0tjo,,So you prefer only one sided propaganda?,pihole,1647041699.0
8565,comment,4,i0a7qfe,,"LOL, so very true! Someday I hope to convince my better half that facebook is evil enough to add to the blocklist!",pihole,1647029437.0
8566,comment,-2,i0a9dw2,,"Perhaps ""disinformation"" is the wrong adjective here. A list of state-sponsored or backed sites is likely more appropriate for my request.

In my case, Russian backed, but I could see a use-case for lists in an attempt to block sites/domains for any number of government backed websites, pick your country...

What I find odd about your comment is that the whole premise of Pihole is to block sites. Tracking sites, malware sites, ad sites, foreign IOT sites, etc. 

Why would I want to block targeted ads for someone else that may use my internet, maybe they like the ads....why would I not want my TV to phone home to China...the whole point of PiHole is to ""censor"" what is and is not allowed to be viewed/access from my network....",pihole,1647030114.0
8567,comment,1,i0v75rt,,"You imply there's nothing but propaganda out there which is as wrong as cynical.

If I subscribe to such a list, it's my sensible choice. I don't want to waste time identifying BS and having to scroll and look over every time. Carefully choose a filter once and done. And it's nothing permanent if you feel like investigating further in some topic.

Likewise, I blocked quora.com from my search results for example.",pihole,1647424695.0
8568,comment,-1,i0b6lah,,"By definition, propaganda is one-sided and self-serving. In this case, it would be quite easy to identify those domains that publish or amplify the government propaganda of any given country. Clearly Meta and others have identified those agents and domains, at least with an open source list, we could easily vet domains/sites that meet this criteria.

Given the horrific actions of the Russian government, seems like a prudent place to start, but surely not limited to that government...",pihole,1647044425.0
8569,comment,1,i0av9la,,"You can add it to the blocklist, create different groups with your devices and one with theirs. Then you can allow it for X group.",pihole,1647039196.0
8570,comment,1,i0alx23,,"Blocking a specific set of domains is a different issue then generic ""misinformation"".

I am not aware of any public blocklists that contain the specific parameters you seek.  That doesn't mean they don't exist, I just don't know of any.

As a very rough first step, you could block the RU TLD with the following regex:

    \.(ru)$

But, this only blocks domains with that specific TLD, and much of what you want to block may be from other TLDs.

If you can't find such a public blocklist, perhaps you can create one and host it on Github so others can benefit from your research.",pihole,1647035203.0
8571,comment,1,i0wm2ay,,"You may be surprised, comrade, but there’s no true independent press. Absolutely none. It’s very sad and heartbreaking but that’s the world we live in.",pihole,1647450001.0
8572,comment,2,i0bcgv7,,"Perhaps as an alternative - don't visit those sites.   Problem solved and no blocklist required.

If you can vet a public list as containing what you consider to be proganda, surely you can recognize the propaganda on a web page.",pihole,1647047322.0
8573,comment,2,i0bho0s,,You know what I meant ;) There are always at least two sides of propaganda.,pihole,1647049908.0
8574,comment,1,i0wztb2,,"That's true. I think even in theory there can't be 100% neutral news.
News are always pre-filtered information. Concealing or checking facts.

Nevertheless it's a difference if you spread facts or lies or unmarked opinions or plural views and if you even try to be neutral.

Here in Germany there are good news stations that I trust in general and it's always important to check multiple news / sources or listen to press reviews (giving you press articles from all over the world for the same topic).  
Some I distrust in general and they may be blocked in my network.",pihole,1647455483.0
8575,comment,1,i0be6hw,,"I think an open source and openly vetted list of known mouthpieces for governments, by country perhaps, would be incredibly valuable for the average person who may not have the time or means to easily identify bad actors in the news/information space online.

I can think of quite a few for my country, after research today, I have a respectable start for Russia. Imagine how great it would be if Russians could help identify the fair and independent sources of information from those controlled by the government and known propaganda mouthpieces. Just one more small way to help everyone filter out misinformation online and make the waters of information online clearer...

Just like phishing and malware sites, I see no reason for government propaganda mouthpieces to not be blocked, in my view, they are no better than malware or phishing sites.",pihole,1647048178.0
8576,comment,1,i0v96bm,,"> Perhaps as an alternative - don't visit those sites.

That's the equivalent to ""Just don't look if I walk naked on the streets"".

What about helping others so they don't need to identify it as propaganda by themselves? E.g. elderly parents? It costs time, effort, knowledge, attention, memory.

I'm trying to protect them from scams. What is propaganda other than information scam? Yes, there's a fluent transition but if a site spreads made up information I think it's legit to block it for yourself and your fosterlings. Of course everyone may have a different threshold but everyone in my piholed networks agreed to cut the tip of the iceberg.

Never had any requests to unblock something.  
If you don't trust the list maker -  don't subscribe.

Nothing speaks against publicly available personal blocklists. It's not a death list. In case of doubt it's a disadvantage for the list makers who provide insights of their opinion.",pihole,1647426274.0
8577,comment,1,i0bew6y,,"When you get your list completed and posted on Github (or wherever you choose) post the link here. 

If like thinkers choose to use it, they can do so.",pihole,1647048534.0
8578,post,1,tbuit6,Pihole - Mikrotik - TPLink Mesh,"Anyone ever run these 3?
I’m having a weird issue where the tplink mesh devices (in access point mode ) are not seeming to route traffic to the pihole even with the mikrotik router pointing to the pihole for dns. Wired connections work fine with traffic being filtered, but no wireless devices connected to the tplinks are able to connect to it or the internet. I can ping wired devices, but not the pihole. Pihole is also running on a kubernetes cluster. Not that it should matter. 
I also didn’t do the NATing that most people suggest doing for Mikrotik. I found that disabling the peer DNS (IP DNS) and manually setting to pihole worked (well half worked). Maybe there are some NAT rules I need to put in place for traffic to route properly from the wireless side? Kinda a weird issue.",pihole,1647017940.0
8579,post,161,tbtsxt,Millions of hits to a random IP lookup from my router at 3AM. Happened on both my PiHoles. Ideas?,,pihole,1647015956.0
8580,comment,171,i09ka2x,,"This is not a random IP lookup.  It is a PTR (reverse IP) looking.  A client on your network  (the router in this case) is asking ""what is the name of the client at IP [192.168.1.15](https://192.168.1.15)""?

How has Pi-hole answered that request?  If it sent it back to the router for an answer, you have a DNS loop.  This is most commonly caused by conditional forwarding.",pihole,1647020306.0
8581,comment,31,i09b7be,,"[192.168.1.15](https://192.168.1.15) is being looked up, who did the look up?  That is where the answer is at.",pihole,1647016805.0
8582,comment,19,i0ab3xf,,My piholes do this when the internet temporarily goes down.  Lots of screaming from devices on the network.,pihole,1647030821.0
8583,comment,9,i09o75o,,What device has IP of 192.168.1.15?,pihole,1647021781.0
8584,comment,3,i099crz,,What is your router?,pihole,1647016092.0
8585,comment,2,i0atfz6,,"I've got a Linksys velop mesh network that does this, but all the time.

One thing I noticed is, of my three APs, it was always coming from the one that was linked wirelessly, my main AP and the one it was connected to via lan didn't do it . May be coincidence tho.

Everything I looked up on it blamed Linksys so I gave up on it.",pihole,1647038398.0
8586,comment,3,i09rs23,,"Dumb question, but how do you get this information from PiHole? Both interfaces (SSH and PC Web) seem to provide very, very limited information.",pihole,1647023128.0
8587,comment,1,i09hnnd,,That looks like a reverse lookup.,pihole,1647019318.0
8588,comment,1,i0bypg9,,Some router/wifi like my Padavan have network discovery feature which scan whole subnet like that.,pihole,1647058883.0
8589,comment,0,i0agpaa,,[https://discourse.pi-hole.net/t/how-to-stop-hourly-reverse-dns-queries-ptr-in-query-log/50088](https://discourse.pi-hole.net/t/how-to-stop-hourly-reverse-dns-queries-ptr-in-query-log/50088),pihole,1647033069.0
8590,comment,43,i09qh1v,,"Interesting, [192.168.1.15](https://192.168.1.15) is a UniFi outdoor AP, but I have another identical model and two indoor units.  I have a UniFi controller that is on [192.168.1.10](https://192.168.1.10)  I just turned off conditional forwarding in case that was the cause",pihole,1647022647.0
8591,comment,9,i09qmp4,,"Unfortunately I don't know, it's coming from the router IP and AFAIK I can't get those logs to see who requested it from the router.  I'm giving out my PiHole IP's via DHCP so most should be using that.  [192.168.1.15](https://192.168.1.15) is my UniFi outdoor AP.",pihole,1647022703.0
8592,comment,8,i0awnx1,,This was my thought as well.,pihole,1647039818.0
8593,comment,6,i09qczb,,"It's one of my UniFi AP's, so that's odd",pihole,1647022604.0
8594,comment,5,i09axvn,,EdgeRouter 4.  Typically the only traffic I see from the router itself are some of my Google devices.,pihole,1647016700.0
8595,comment,11,i09tabw,,This is the default Web UI you get when you install PiHole.  Type in your devices IP address in the browser.,pihole,1647023714.0
8596,comment,5,i0a14mj,,"http://pi.hole/admin/index.php

Log in, scroll down to the bottom. 

*Replace pi.hole with your IP/domain*",pihole,1647026816.0
8597,comment,3,i0a9ojq,,"It's just in the default web UI. All you have to do is login, click Dashboard, and scroll down. If you're not logged in it only provides you with some basic information.",pihole,1647030238.0
8598,comment,2,i0avh01,,There doesn’t appear to be a conclusion to that topic.,pihole,1647039288.0
8599,comment,2,i0avhpq,,There doesn’t appear to be a conclusion to that topic.,pihole,1647039297.0
8600,comment,11,i0b1lru,,Is your outdoor AP connected via hardwire or mesh?,pihole,1647042061.0
8601,comment,2,i0cl7fn,,"Do you have the auto channel balancing turned on? If so, that probably happens at about that time and plausible that the AP had its channel switched which caused some other device to go a bit crazy trying to find it whilst it was temporarily unavailable.",pihole,1647074609.0
8602,comment,1,i0dsw6g,,Do you have radio optimization turned on? On the wifi tab of the unifi controller. By default it runs at 3am.,pihole,1647102311.0
8603,comment,8,i09tpzk,,There are forums for the router and instructions.  You can SSH into the EdgeRouter and get to the logs.  Perhaps someone with good knowledge of your router can help.,pihole,1647023883.0
8604,comment,2,i0clf40,,If you have Pi-hole set up for conditional forwarding and pointing back to your Unifi doing the DHCP handling then you should be able to see which clients those requests are coming from? At least that’s how it is on my setup.,pihole,1647074785.0
8605,comment,6,i09ro1l,,Whats the response of the PTR?,pihole,1647023086.0
8606,comment,3,i0a6lq2,,Realized I wasn't logged in. Thanks.,pihole,1647028966.0
8607,comment,6,i0akzps,,">Replace pi.hole with your IP/domain   
    
Oh, oops. I just clicked the link to your Pihole. No wonder I didn't recognize any of the addresses. What's ""Grindr""?",pihole,1647034820.0
8608,comment,13,i0b36cc,,Hardwire,pihole,1647042796.0
8609,comment,1,i0ey5wc,,I have that turned off,pihole,1647119383.0
8610,comment,6,i0b26te,,lol gottem.,pihole,1647042335.0
8611,comment,1,i0anscu,,http://pihole.local works under mDNS,pihole,1647035970.0
8612,comment,0,i0c9gcg,,😂,pihole,1647065544.0
8613,comment,1,i3bbqbm,,It’s a Disney network. Nothing to see there.,pihole,1649046708.0
8614,post,2,tbshgt,Pi-hole Warnings,"I have the bouncing ⚠ on the web UI. Under the Pi-hole Diagnostics, I see what I pasted below. The top line: I have no idea what it means at all (the IP address, btw, is an internet IP, not my netowrk). The second and third are both the domain for my work laptop (which VPN's itself directly to its network) and shows the laptop's name on my network.

Are these cause for concern? If not, is there a way I can permanently remove them? The second and third lines come back daily, even if I clear the alert.

&#x200B;

https://preview.redd.it/brawccnlvrm81.png?width=695&format=png&auto=webp&s=54f020de6fac6e8b1a03b84553fdd923a3198c67",pihole,1647012302.0
8615,comment,5,i09jxwu,,"Have you read the documentation linked under each warning?

>is there a way I can permanently remove them?

Yes.  Correct the issues that are generating the warnings.

>The second and third are both the domain for my work laptop (which VPN's itself directly to its network) and shows the laptop's name on my network.

[https://discourse.pi-hole.net/t/ignoring-domain-config-domain-for-dhcp-host-name-hostname/52027/3](https://discourse.pi-hole.net/t/ignoring-domain-config-domain-for-dhcp-host-name-hostname/52027/3)

>The top line: I have no idea what it means at all (the IP address, btw, is an internet IP, not my netowrk). 

The documentation explains this.  dnsmasq is reducing the packet size being sent to your upstream DNS server.  You can permanently change your maximum packet size if the warning is of concern (it should not be, though).

https://discourse.pi-hole.net/t/dnsmasq-warn-reducing-dns-packet-size/51803/10",pihole,1647020178.0
8616,comment,2,i09m3qt,,"Awesome, thanks for the help! I'll admit, there are times that the docs overwhelm me (I know just enough to sound intelligent lol), and this is one of them 😂.

But again, thank you, and for the quick response",pihole,1647021005.0
8617,comment,1,i0czz5g,,"> Correct the issues that are generating the warnings.

  


and

  


> You can permanently change your maximum packet size if the warning is of concern (it should not be, though).

  


Pi-hole is notifying for warnings which should not be of concern. Do you think this is a problem?",pihole,1647087022.0
8618,comment,1,i0dambj,,">	Do you think this is a problem?

No, I don't.  In the specific case of the packet size change, our documentation says:

""When receiving answers from upstream only with a smaller maximum DNS packet size, dnsmasq warns about this and remembers this decision per server for some time (defaulting to 60 seconds).

If you see this message continuously, you are affected by some unusual truncation on the path from your Pi-hole to the configured upstream server. You can get rid of the warning by adding a config file like /etc/dnsmasq.d/99-edns.conf and adding

    edns-packet-max=1232

After running `pihole restartdns` your Pi-hole will not even try larger packet sizes (the default is 4096). Check out our unbound guide for a comment about the particular value of 1232.""

If you receive the warning, you are aware of the condition and can evaluate if any action should be taken.  In the specific case of the OP, it appears the warning for this was sporadic, not continuous. 

Having information about an ongoing condition is preferable to not having the information, in my opinion.",pihole,1647093727.0
8619,post,23,tbmby0,Pihole locking up after auto reboot,"Hey all,

Bit of an odd issue, but I am a noob at this stuff, help welcomed!

Sometimes after a nightly reboot using  ""0 4 \* \* \* /sbin/shutdown -r now"" the pihole starts, but seems to be locked up (see image), and stops all internet traffic till a manual reboot.

Any thoughts on what might cause this? It is rare but annoying when it happens.

https://preview.redd.it/0pz7dxnx2qm81.png?width=1163&format=png&auto=webp&s=899064debf051637311d3062d0daa829f399d305",pihole,1646990506.0
8620,comment,15,i080br8,,"Why are you rebooting the pi nightly,  think I maybe reboot mine every couple month, maybe more.

Unless I read your post incorrectly.",pihole,1646991260.0
8621,comment,3,i08vuss,,"SD card could be going bad, if one is being used. They typically go into read mode as protection.",pihole,1647010647.0
8622,comment,1,i085a78,,"1) why are you rebooting daily?

by looking at the image:

2) does pihole only show 1 client? (only router)

3) when ""locked up"" you can access pihole web interface and ssh (via IP) without problem, but you do not get any dns response - so internet stops working?

4) in locked up state what is output of (on PC):

* a) nslookup google.com
* b) nslookup google.com PIHOLE_IP
* c) nslookup google.com ROUTER_IP

5) it looks like after rpi reboots some client is just bombarding pihole with request and is being rate-limited. And if your only shown client is router - then everything is rate-limited, in this case command in 4b should be still working while others not

If this is your case, you can increase rate-limit (or disable it) [Docs](https://docs.pi-hole.net/ftldns/configfile/#rate_limit)

Or even better you will need to reconfigure you router DHCP so your client will ask pihole directly without asking thru router [Why do all my DNS queries appear to come from my router, and not from individual clients?](https://discourse.pi-hole.net/t/why-do-i-only-see-my-routers-ip-address-instead-of-individual-devices-in-the-top-clients-section-and-query-log/3653)",pihole,1646995468.0
8623,comment,1,i08gu1i,,I wouldn't recommend rebooting a pihole server nightly. Stop doing that. Linux can run for months without the need for reboots.,pihole,1647003395.0
8624,comment,1,i080g0a,,"It is nightly, maybe I shouldn't?
The danger of following guides. It is an old Pi2b so for ""memory issues"" I have the reboot command in. 
Maybe its not needed at all.",pihole,1646991358.0
8625,comment,1,i08wzhk,,"Worth keeping an eye on that too, thanks.",pihole,1647011121.0
8626,comment,1,i085lb7,,"Thanks for the detailed responce. 

1: I had thought it was needed, have since removed the command. 

2: The routers DNS is pointing at the PI hole, so it only had one client, the router.

3: I cant access it at the time, that is when its back, after a reboot. 

4: Worth a check if it happens again.

5: If it happens again ill look into this for sure .

Thanks :)",pihole,1646995723.0
8627,comment,2,i08h57o,,"Yeah getting that impression heh. My bad. 

Hopefully that stops the issue!",pihole,1647003573.0
8628,comment,5,i08anbo,,"The only time I reboot mine is after a kernel upgrade or other upgrade that needs it, and then it’s just sudo reboot.

Run diet-pi on mine. So headless and  use putty to connect to it.",pihole,1646999537.0
8629,comment,3,i08y91y,,"Linux runs so well, you arguably don't need to reboot it until it starts acting up. The only time I found myself rebooting my pihole is when it locks up. That might be due to my SD card getting older and not the pihole itself, but I can't say for sure.

In fact, I find that the fewer times you reboot a Linux device, the better it seems to run. Windows is inefficient so it needs more frequent reboots, but not Linux based OSs",pihole,1647011650.0
8630,comment,1,i08l8zj,,"You should have the router assign the Pihole IP for the clients DNS via DHCP. That way the log will show the requests as coming from the actual devices, that’s helpful to see what’s going on in your network plus it will take work off your router.",pihole,1647005767.0
8631,comment,1,i08d741,,"I think for sure I might be over doing it with the reboots. 
I've remove the reboot line, see if that stops the issue!

Thanks for the help :)",pihole,1647001237.0
8632,comment,2,i08od4m,,"Ah ha!  Had the WAN DNS set to the PiHole, but I see now in the LAN DHCP I can assign the DNS as well, never spotted that. 
Now I am seeing 9 connections. 

I wonder if the WAN needs to be set as well?",pihole,1647007293.0
8633,comment,3,i08kzal,,"I’m running on the original raspberry pi (rev A I think?) and I also run on a pi zero for a while. Never had a need to reboot unless it was for an update. 
What I do recommend is you install log2ram to lower the amount of writes to your SD card but this nightly reboot seems totally unnecessary.",pihole,1647005631.0
8634,comment,1,i08qrl2,,"Not sure what the WAN setting will do now, probably only respond to queries coming from the router itself? Since the clients will ask the Pihole directly.",pihole,1647008418.0
8635,comment,1,i08oheu,,I think where my idea of the reboots came from was an old torrent app i used that must have had a memory leak as id have to constantly reboot it for using up all its ram.,pihole,1647007350.0
8636,comment,1,i08rle7,,"I've set the WAN to OpenDNS, and the LAN to the Pihole, i'll see how that goes, thanks for the tip, clearly I missed that setting.",pihole,1647008790.0
8637,comment,1,i08qywz,,That used to happen to me as well with Docker Desktop for macOS. It had a memory leak and would crash the whole system after a couple days. It was easier for me to restart Docker in that case since the Mac mini was a server for other services as well.,pihole,1647008510.0
8638,post,0,tbiu2l,Installing PADD,"I’ve tried running the commands to install PADD but can’t seem to get it to start after a reboot. I started with a fresh install of the raspbian OS and Pi-Hole which works.

Here is the tutorial I followed:

https://github.com/pi-hole/PADD

Have any other users had trouble installing PADD?",pihole,1646976435.0
8639,comment,3,i07qbon,,"It is a script. How did you:

* plan to use it?
* installed it?
* tried to use it?
* after you tried to use it, what does it do? Respond with a error message?

But the most important thing is, did you chmod it and run it in the correct directory?

for example, you have downloaded it to /home/pi. you need to cd to /home/pi then execute it by ./padd.sh",pihole,1646983165.0
8640,comment,1,i093vot,,"I found this post on Reddit and it seems to be my exact situation:

https://www.reddit.com/r/pihole/comments/mhdfgh/help_with_padd_install_bash_homepibashrc_line_115/

So PADD is installed but won’t go into full screen mode at startup.",pihole,1647013931.0
8641,comment,1,i09hfiz,,"Saying ""it wont go into full screen mode"" instead of ""not working"" next time, give accurate description so others can be on the same ground with you, or they cannot help even if they want.",pihole,1647019232.0
8642,comment,1,i09lceg,,"I never said “not working” or implied it wasn’t working. What I did say was PADD wasn’t booting directly at startup, I thought that might be a common issue. From the thread I linked it seems I’m not the only one.

I did say I followed the tutorial, might it be possible the tutorial was written without a novice level understanding in mind, assumed too much, etc? Given my understanding I have no idea.

For example, the coding here “if [ ""$TERM"" == ""linux"" ] ; then” maybe assumes the installer is aware they need to change a term or variable.

For users that are not well versed in all things Pi or programming for that matter it’s not easy to necessarily get the description of the issue correct right off the bat. That’s why we ask questions to get to the heart of the issue right?",pihole,1647020711.0
8643,post,0,tbgalf,Review of Pi-hole and AdGuard Home,"Hi Everyone! I recently did a review of Pi-hole and AdGuard Home on my podcast [Level 99](https://anchor.fm/level99/episodes/Pi-hole-VS-AdGuard-Home-e1f4556/a-a7gjrru). I had leveraged both services for a bit of time prior to doing the review. The episode goes into which one is better for what user and more! Feel free to check it out and feedback is always welcomed. In the future, I plan on doing a review with the setup and unbound after letting it run for a bit longer.

Can listen to the episode on [Spotify](https://open.spotify.com/episode/0jdVkfA8IdDjwLqzbiIsSf?si=XdHImr8tQ9u9pzTSN9oCIg)| [Apple](https://podcasts.apple.com/us/podcast/pi-hole-vs-adguard-home/id1583331179?i=1000552675979)| [Anchor](https://anchor.fm/level99/episodes/Pi-hole-VS-AdGuard-Home-e1f4556/a-a7gjrru)",pihole,1646967752.0
8644,comment,1,i0bityu,,[removed],pihole,1647050489.0
8645,comment,1,i0bl0bi,,Removed as a violation of rule 5 - always be civil.  Please review this rule prior to further posting.,pihole,1647051599.0
8646,comment,3,i0ddeft,,"Appreciate the overall sentiment of the comment though. For those that can't see it... it's basically:

> Use the one you like, they’re both very sexy and do a good job of it.

The other 50 words were not needed - nobody likes a flame war",pihole,1647095185.0
8647,post,6,tbel1o,Can't get wireguard to work with pi hole,"I setup pi hole on my raspberry pi, and it is working on my pc. But, I can't get it working on my android phone, because it won't let me change my ipv6 dns address. I can't change dns settings or disable dhcp on my router. After doing some research, I found someone say that setting up a vpn might make it work, and I wanted to try that later anyway, so I could use pi hole away from home. I used this guide to set it up [https://medium.com/@timebarrier/install-pivpn-with-wireguard-on-a-raspberry-pi-with-pihole-19d95ba8d206](https://medium.com/@timebarrier/install-pivpn-with-wireguard-on-a-raspberry-pi-with-pihole-19d95ba8d206). However, when I connect my pc or phone to the vpn, all websites fail to load with the error dns\_probe\_finished\_no\_internet. I tried searching, but wasn't able to find anything that helped me. I double checked my port forwarding settings, and I had a message that it blocked a malious ip from australia (193.46.255.11) from accessing my forwarded port. Should I be concerned about this? Do I need to change any settings to prevent attacks? I also noticed in my client config file that my dns is listed as 10.6.0.1, but my pi hole is [10.0.0.10](https://10.0.0.10). I tried changing that on my client, but it didn't work either.

\[Interface\]

PrivateKey = redacted

Address = 10.6.0.2/24

DNS = 10.6.0.1

&#x200B;

\[Peer\]

PublicKey = redacted

PresharedKey = redacted

Endpoint = publicIP:51820

AllowedIPs = 0.0.0.0/0, ::0/0

&#x200B;

Edit: The solution is to use tailscale instead of PiVPN. Tailscale uses Wireguard protocall and is super easy to setup. Once it is installed on both devices go to dns settings, enter your ipv4 and ipv6 dns addresses, and check ignore local dns settings. One downside is that the free version of tailscale only supports one user (20 devices).

Edit2: I thought it was working, but it was only working on my home wifi. This allowed me to change my IPV6 settings at home, but not to use it away from home. It took me a while to figure out the solution, because I had to make 2 changes. When you add devices to tailscale vpn, it gives each device a new ip address that you have to use to comunitate with if you are outside your home network. So on the dns settings page on tailscale, you have to put the tailscale ip addresses for the device you have pi hole installed on not the ip address from your local network. The second change is that you have to go to the web admin of your pi hole server and go to settings then dns. Under interface settings change it to Permit all origins and then scroll down and save. You might have to reboot your device. Please read the following disclaimer to make sure you do not have anything setup that would cause a security issue when using this option. 

 ""These options are dangerous on devices directly connected to the Internet such as cloud instances and are only safe if your Pi-hole is properly firewalled. In a typical at-home setup where your Pi-hole is located within your local network (and you have **not** forwarded port 53 in your router!) they are safe to use.""

It is possible that this last setting I changed is the reason wireguard did not work in the first place. I may test this later, but right now it is working, so I will leave it alone for now.",pihole,1646962252.0
8648,comment,6,i06oxcl,,"In my opinion it would probably be best to purge/strip any Wireguard configuration you've made yourself, and have [PiVPN](https://www.pivpn.io/) handle setup and user management.

You'll just have to do a tiny wee edit to the profile allowedips manually if you want to convert a full tunnel to split tunnel (for split tunnel enter only the DNS endpoint in allowedips - for a split-*ish* tunnel that allows remote access to other machines in your network you can include your local range).",pihole,1646962670.0
8649,comment,2,i07e7ka,,"I've gotten it working on diet-pi with their software packages- it's much easier than setting it up on stock raspbian.

Currently I'm using tailscale, which does use wireguard and may solve your issue.",pihole,1646975236.0
8650,comment,1,i07anaq,,Following because I also ran into this issue due to ipv6 on Android.,pihole,1646973189.0
8651,comment,1,i07c0ed,,Following this as I can never get wg working under wifi.,pihole,1646973964.0
8652,comment,1,i098s4z,,"Take a look at  [https://it.playswellwithflavors.com/2020/04/09/remove-pivpn-user-client/](https://it.playswellwithflavors.com/2020/04/09/remove-pivpn-user-client/) which is what I followed and it works. It appears you are using a full tunnel when I used a split tunnel to only do DNS lookups via my pihole. In this case it has the comment:

\*Note: It’s been mentioned in the comments that for this split tunnel to work correctly, folks have had to also add the VPN network’s range to the allowed networks for things and work as expected. That updated line is:  
Allowed IP addresses: 10.6.0.0/24, 192.168.1.0/24",pihole,1647015869.0
8653,comment,1,i0bugwu,,pivpn on top of pihole. The installer even finds your pihole installation and connects to it for dns. I used to roll my own until pivpn added wg support. It's like a 2 minute job now,pihole,1647056556.0
8654,comment,1,i07s8u5,,"Agree. This problem has already been solved very well. No need to waste time redoing it. 

If you just want to play and/or learn, by all means carry on. But if you just want it to work, PiVPN. Job done.",pihole,1646984580.0
8655,comment,1,i08q1a3,,"Another option if you’re able to deploy a docker container is to use wg-easy, it’s super simple to setup and has a nice UI.",pihole,1647008080.0
8656,comment,1,i0by82z,,"PiVPN is what I used to set it up. I just tried reflashing raspberry pi os on my sd card, and reinstalling Pi Hole + PiVPN (Wireguard) using the guide linked by mlc1703. Just followed the basic guide exactly without making any extra tweaks like i made to Pi Hole before. Still having the same problem with both full and split tunnel. Split tunnel sometimes gives the error dns\_probe\_finished\_bad\_config instead of dns\_probe\_finished\_no\_internet.",pihole,1647058616.0
8657,comment,2,i0fcxav,,Tailscale fixed the problem. Not sure why PiVPN didn't work. I didn't have to try diet-pi because tailscale was easy to setup on Raspberry Pi OS. Thanks!,pihole,1647126134.0
8658,comment,1,i0bydvz,,"I just tried reflashing raspberry pi os on my sd card, and reinstalling Pi Hole + PiVPN (Wireguard) using this guide. Just followed the basic guide exactly without making any extra tweaks like i made to Pi Hole before. Still having the same problem with both full and split tunnel. Split tunnel sometimes gives the error dns\_probe\_finished\_bad\_config instead of dns\_probe\_finished\_no\_internet.",pihole,1647058705.0
8659,comment,1,i0byh5b,,"PiVPN is what I used to set it up. I just tried reflashing raspberry pi os on my sd card, and reinstalling Pi Hole + PiVPN (Wireguard) using the guide linked by mlc1703. Just followed the basic guide exactly without making any extra tweaks like i made to Pi Hole before. Still having the same problem with both full and split tunnel. Split tunnel sometimes gives the error dns\_probe\_finished\_bad\_config instead of dns\_probe\_finished\_no\_internet.",pihole,1647058754.0
8660,comment,3,i0atkp7,,">it’s super simple to setup and has a nice UI

The same is true of PiVPN, and it works without adding the additional overhead of docker for as near as I can tell absolutely no good reason at all.",pihole,1647038457.0
8661,comment,1,i0bzg46,,"~~I'm not sure where you're stumbling but you don't really need a guide. The pihole installer walks you through it and so does pivpn. I'm pretty sure you can hit enter enter enter etc through everything and have it working. Then pivpn -a to create a user.~~

`curl -sSL` [`https://install.pi-hole.net`](https://install.pi-hole.net) `| bash`

`curl -L` [`https://install.pivpn.io`](https://install.pivpn.io) `| bash`

Just saw split tunnel. That might need more tweaks. I just use as road warrior mode.

Yours is also a common scenario though so I'm sure it's just something small you're missing",pihole,1647059299.0
8662,comment,1,i0c09ne,,"Have you added `::0/0` to Allowed IPs?

Without that, I've had issues on cell data using IPv6 before",pihole,1647059762.0
8663,comment,1,i0c7066,,"Yeah, the setup seems super simple. That's part of the reason why I'm confused that it is not working. I don't really care if it is full tunnel or split tunnel as long as it works. Is road warror mode the same as full tunnel?",pihole,1647063893.0
8664,comment,1,i0c4lv9,,"I have that on my full tunnel settings I tried. For split tunnel changed it to 10.6.0.0/24, 10.0.0.0/24 because a guide told me to. Neither are working for me.",pihole,1647062378.0
8665,post,0,tb86xi,Enforce Use of Pi Hole for All LAN DNS,"&#x200B;

[Upstream Servers](https://preview.redd.it/xmzcqeen9mm81.png?width=458&format=png&auto=webp&s=06f8595e963b45ea58b99d34a59a9afb4a1851f6)

Using current Pi-Hole version. Pi-Hole is not running as DHCP. This is a three part Q:

1. ~~The blurred DNS resolver in the image above is my ISP's. Does this mean that none of the devices in the LAN (which includes a smart TV and multiple Chromecasts)~~ **~~are misbehaving and using their hardcoded DNS resolver~~**~~?~~
2. ~~How would I filter to~~ **~~find out which devices are using the ISP's DNS resolvers~~**~~?~~
3. **Is** [this](https://labzilla.io/blog/force-dns-pihole) **the recommended way to enforce PI-Hole only for DNS**? It would be trivial to do this, the router runs EdgeOS. I might resort to this if I can't find out which devices are not using Pi-Hole or I cannot get them to comply.

**UPDATE**: The blurred resolver does not belong to the ISP. It's \*.rrdns.PCH.net, but the *rrdns* it made me think it was [RoadRunner](http://www.dslreports.com/shownews/Time-Warner-Cable-Kills-the-Roadrunner-119519) infra (some of Spectrum's presence points remain, to this date, using Roadrunner related domain names)

**UPDATE to #3:** I used [this guide](https://www.derekseaman.com/2019/10/redirect-hard-coded-dns-to-pi-hole-using-ubiquiti-edgerouter.html) instead for EdgeOS settings.",pihole,1646944669.0
8666,comment,3,i05lhzs,,"That is the resolver that PiHole used, not the client.  PiHole cannot report on systems that do not use it.

I do force all of my clients to use PiHole.  When I had an EdgeRouter I used your linked method.",pihole,1646945765.0
8667,comment,2,i07cal9,,"The rrdns server is how the reverse lookup for the Quad9 secondary server comes up. I don't know why it doesn't follow the [quad9.net](https://quad9.net) convention, but that's how it is.",pihole,1646974126.0
8668,comment,1,i05vbpr,,">Does this mean that none of the devices in the LAN (which includes a smart TV and multiple Chromecasts) are misbehaving and using their hardcoded DNS resolver?

No, it does not.  This graph shows the upstream DNS servers used by Pi-hole, not any DNS servers that may be used by clients.",pihole,1646949683.0
8669,comment,0,i05k9me,,"The devices that are not using Pihole do not have Pihole's address, either hardcoded or set via DHCP. Simple as that.",pihole,1646945283.0
8670,comment,2,i05qmis,,So PiHole couldn't reach Quad9 and resorted to the ISP's? How can I make it use Cloudflare when Quad9 is unreachable?,pihole,1646947815.0
8671,comment,1,i05kz8g,,"Yes, that is the obvious part, hence why I am trying to track them down and enforce it.

Note that it is impossible for those devices to be using a hardcoded resolver, because no manufacturer would hardcode it to the DNS resolver of my ISP in my city.

It is not set by DHCP either, as DHCP points to PI-Hole as resolver.",pihole,1646945561.0
8672,comment,3,i05vv5s,,">So PiHole couldn't reach Quad9 and resorted to the ISP's?

Pi-hole uses the DNS servers you have told it to use.  Unless the ISP is hijacking DNS queries, no other DNS resolvers should be in use by Pi-hole.",pihole,1646949895.0
8673,comment,1,i05tjuw,,"You configure what DNS servers you forward to.  When you look at that screen you should see your ISP.  If it is not there then it must be one the OS knows about.

For those DNS providers, unreachable usually has to do with latency and PiHole sending the request to the next in the list due to time.  PiHole will use the first one that returns.",pihole,1646948984.0
8674,comment,2,i05oz4w,,"Some devices, like smart TVs and things, will just ignore your settings (hardcoded and DHCP) anyway.  If you have an advanced router, you can block them all from getting out and/or redirect them to your pihole.  I did this in PFsense and nearly 25% of my queries are from clients that ignore the settings and appear in pihole as queries from my router's IP.",pihole,1646947159.0
8675,comment,2,i05vhht,,">Note that it is impossible for those devices to be using a hardcoded resolver, because no manufacturer would hardcode it to the DNS resolver of my ISP in my city.

This has no bearing.  If a client has a hardcoded DNS, they use that DNS and you would not see their queries in Pi-hole.  The graph you are showing is not the DNS servers used by clients; it is the DNS servers used by Pi-hole.",pihole,1646949746.0
8676,comment,1,i05u62a,,"hmmm, absolutely nowhere it is set to use the ISPs. This is the box where PH runs: [https://i.imgur.com/RdNOJ3m.png](https://i.imgur.com/RdNOJ3m.png)

EdgeOS router itself DNS resolvers: [https://i.imgur.com/pbY3pMH.png](https://i.imgur.com/pbY3pMH.png)

EdgeOS DHCP DNS resolvers: [https://i.imgur.com/DviId0H.png](https://i.imgur.com/DviId0H.png)",pihole,1646949232.0
8677,comment,2,i075yae,,"^^ This is the answer. The quick way is to write a firewall rule that blocks outgoing traffic on port 53 from any LAN IP address except the pihole address. However, this may cause a number of devices with hard coded DNS entries to fail.

Better is to write a firewall rule that redirects all outgoing  LAN traffic on port 53 back through the pihole. The hard coded devices will get a response to their DNS request and be none the wiser. Unless your pihole is blocking their request to a forbidden domain, which is exactly what you want.",pihole,1646970699.0
8678,comment,1,i06m4bp,,Gotcha!,pihole,1646961415.0
8679,comment,3,i05w96m,,">This is the box where PH runs: [https://i.imgur.com/RdNOJ3m.png](https://i.imgur.com/RdNOJ3m.png)

These are not Pi-hole settings.  The settings shown are the resolvers used by the Pi-hole host device, not Pi-hole.

If you look in file ***/etc/pihole/setupVars.conf***, this will show the upstream DNS servers configured in Pi-hole.",pihole,1646950050.0
8680,comment,1,i0w33zu,,"And of course, there's also the need to block 853 (DoT port), and if possible IP addresses known to host a DoH resolver. A DoH resolver can't provide a website to the same address.",pihole,1647442306.0
8681,comment,1,i06m13l,,"and it is, as expected

`PIHOLE_DNS_1=`[`9.9.9.9`](https://9.9.9.9)

`PIHOLE_DNS_2=`[`149.112.112.112`](https://149.112.112.112)",pihole,1646961375.0
8682,post,10,tb5oc2,Regex for long randomized domains?,"Namely, these lame AppoDeal randomly generated domains. Easy part is they all start with a., so that part is easy, but is there some better regex to block these gibberish domains? They're exactly 56 characters long and seem to stay within the hex code range (0-9, a-f), and are .com addresses.",pihole,1646938188.0
8683,comment,13,i056v9t,,"`^a\.?[A-Fa-f0-9]+\.com.*`

The `.*` and the end catches any sub pages ( .com/SomePage)

Also, test with regex101.com",pihole,1646939994.0
8684,comment,3,i052u3n,,"Here is a brief regex tutorial that may help:

https://docs.pi-hole.net/regex/tutorial/",pihole,1646938475.0
8685,comment,2,i060slb,,"A lot of work has gone into this. What you are looking for is called DGA.

research: [https://www.hindawi.com/journals/jcnc/2021/4767388/](https://www.hindawi.com/journals/jcnc/2021/4767388/)

behind a possible paywall: [https://splunkbase.splunk.com/app/3435/](https://splunkbase.splunk.com/app/3435/) ( I am thinking about 'stealing' it from work)

probably best source for developing regex. bunch of examples at the bottom of the page: [https://cyber.wtf/2017/08/30/dga-classification-and-detection-for-automated-malware-analysis/](https://cyber.wtf/2017/08/30/dga-classification-and-detection-for-automated-malware-analysis/)",pihole,1646951900.0
8686,comment,1,i054j94,,"I was also thinking the same, But isn't regex processor intensive?",pihole,1646939111.0
8687,comment,1,i5v9rau,,"\^\[0-9a-f\]{4,}

you can change the 4 to whatever you need but i would recommend keeping it at 4 to catch other similar domains as well",pihole,1650715223.0
8688,comment,4,i05au58,,"> regex101.com

Definitely bookmarking this, thanks! Also thanks for the Regex!",pihole,1646941560.0
8689,comment,2,i0599rl,,"Upvoted for the usage of that site.

Ive used it many times and kearnt a lot doing so. The immediate feedback and easy test cases just make it so easy to use!",pihole,1646940940.0
8690,comment,2,i09eqbj,,"> The `.*` and the end catches any sub pages ( .com/SomePage)

Not necessary with Pi-hole, as it will never come to know the full requested URL, only the domain",pihole,1647018186.0
8691,comment,1,i05vdp6,,Yea anytime I have any regex issue it’s my Go-to site.,pihole,1646949705.0
8692,comment,2,i09jv4j,,"I wasn’t sure about Pihole regex, do I just submitted it to ensure it matches",pihole,1647020148.0
8693,comment,1,i09wpnt,,"No worries, just figured I'd point it out. Someone reported your comment for ""invalid regex"", although I tested it myself and it works, so... lord knows what upset them about your comment 🤷",pihole,1647025049.0
8694,post,0,tb46tc,Password,I had trouble getting on the web ui last day and I forgot the password it gave me how can I get a new one or find it I am on AWS Ubuntu docker and portainer,pihole,1646934198.0
8695,comment,4,i04sndi,,"ssh to it, then reset the pw

I dont advice starting a private DNS on AWS.",pihole,1646934544.0
8696,comment,1,i04v32r,,In docker you'll have to set an ENV variable in the docker compose file or the command you ran to bring up the container.,pihole,1646935486.0
8697,comment,1,i04sya9,,Why’s that,pihole,1646934661.0
8698,comment,5,i04tl9u,,"Unless you are using a VPN to connect to it and lookup DNS. That way it is encrypted and you are not opening ports other than the VPN port. Opening port 53 can result in a DNS amplification attack, opening port 80 could result in possible XSS and RCE. Using a VPN to connect to it wont have said problems as unauthorized users wont even be able to connecg.",pihole,1646934905.0
8699,comment,1,i04trwe,,I was going to use unbound?,pihole,1646934974.0
8700,comment,4,i04u3ck,,"That does not matter. And if you use unbound and oped port 53, the DNS amplification attack would grow even bigger.",pihole,1646935097.0
8701,comment,1,i04u9q6,,What about engix proxy,pihole,1646935166.0
8702,comment,1,i04up20,,Better dont. The fewer ports opened the lower the risk. VPN is just better,pihole,1646935332.0
8703,comment,1,i04utyq,,So open vpn ?,pihole,1646935387.0
8704,comment,1,i04v6qo,,"https://skerritt.blog/pihole-vpn/

Wireguard is more modern and easier to setup, but i dont have good experience with it.",pihole,1646935526.0
8705,comment,1,i04vb5r,,Ok,pihole,1646935573.0
8706,comment,1,i04x3zx,,I get. A screen with 5 different interfaces witch one do I pick,pihole,1646936274.0
8707,post,77,tb42zi,Use Plash to see Pi-Hole Dashboard as MacOS wallpaper,"Download Plash in the Mac App Store: 

[https://www.reddit.com/user/Haymoose/comments/tb44pm/using\_plash\_as\_wallpaper\_pihole\_dashboard/?utm\_source=share&utm\_medium=web2x&context=3](https://www.reddit.com/user/Haymoose/comments/tb44pm/using_plash_as_wallpaper_pihole_dashboard/?utm_source=share&utm_medium=web2x&context=3)

[https://apps.apple.com/us/app/plash/id1494023538?mt=12](https://apps.apple.com/us/app/plash/id1494023538?mt=12)",pihole,1646933915.0
8708,comment,21,i06tv5n,,this is kinda neat but im not sure i give a damn enough to stare at my pihole stats all day,pihole,1646964917.0
8709,comment,10,i05xzn1,,Whoa reminds me of Windows 98 and its Active Desktop feature.,pihole,1646950747.0
8710,comment,7,i05ttus,,I might be interested in a widget with some key stats but not the whole dashboard,pihole,1646949095.0
8711,comment,3,i04v4zj,,Lmao nice.,pihole,1646935507.0
8712,comment,2,i05o7q3,,Very cool,pihole,1646946844.0
8713,comment,2,i084xax,,"this would probably distract me more than helping me 

but cool anyways, didn't know this exists",pihole,1646995177.0
8714,comment,1,i08ttrm,,Windows??,pihole,1647009782.0
8715,comment,2,i08rs1i,,"It doesn't turn on at launch and is certainly filed under ""Just because you can, doesn't mean you should."" For awhile I would kick it on and watch the cyber attack ""live map"" sites. It really needs a ""screensaver only"" mode option.",pihole,1647008875.0
8716,post,7,tb1zr4,Is this normal behavior? Cant load sites after whitelisting.,"If I go to a site that is blocked, I see This site can't be reached -ERR CONNECTION REFUSED.  I'm using pihole as dns but not dhcp, and DNS over HTTPS.

Then, I whitelist a site, but I can't get it to load for another 15 or 30 mins. I'm guessing the dns is cached locally on my client computer, but not sure how to get it to requery the pihole for the dns......

Any way to get sites to load without having to wait?  I used to get a screen that said this site has been blocked by pihole click to allow.",pihole,1646928344.0
8717,comment,1,i04em37,,"> I whitelist a site, but I can't get it to load for another 15 or 30 mins. I'm guessing the dns is cached locally on my client computer,

This would be unusual.  When Pi-hole blocks a site, the default TTL (time to live) provided by Pi-hole for that domain is 2 seconds.  This is deliberately small so that when you whitelist a site the effect is immediate.

There is an option to set a TTL for blocked domains to something different.  If you have used this to change the TTL, that could be your problem.

https://docs.pi-hole.net/ftldns/configfile/#block\_ttl

>I used to get a screen that said this site has been blocked by pihole click to allow.

This has not been the default Pi-hole behavior for several years now.

https://docs.pi-hole.net/ftldns/blockingmode/",pihole,1646929157.0
8718,comment,1,i04t1w3,,"Sometimes turning off and on wifi could help, assuming you are on wifi

Also the site in question might also be connection refused without pihole. Whats the site? Maybe use https://urlscan.io to scan it and see what you get",pihole,1646934699.0
8719,comment,1,i04trfp,,"I've been having really laggy DNS resolving with unbound as well as with [1.1.1.1](https://1.1.1.1) and [1.0.0.1](https://1.0.0.1)   


I dunno what's going on",pihole,1646934969.0
8720,comment,1,i04iy0q,,"Thank you, I appreciate the answers.I added TTl 2 to the conf as there wasn't anything in there referencing ttl.",pihole,1646930829.0
8721,comment,1,i04m595,,The 2 sec TTL is already baked in as a default.,pihole,1646932055.0
8722,comment,1,i04sg95,,"Should it have been in the conf file, and, is there an override in the gui? I can't find it.",pihole,1646934468.0
8723,comment,1,i050ccf,,">Should it have been in the conf file

No.  Default parameters don't appear in the config file.  They are baked into the code and only overwritten if you have a matching configuration parameter in the configuration file.

>is there an override in the gui?

No.",pihole,1646937504.0
8724,post,8,tb1xcq,Pi hole issue,"Hello all,

I have a pi-hole on my network and use clover to take payments. Up till to day I haven't had an issue and now its says I need to disable my pop up blocker so I can access the virtual terminal. 

The pop up blocker is disabled in my browser.

I have not updated my browser or any thing else recently.

Yesterday it was fine and today it doesn't work.

I **HAVE** whitelisted all of the clover web pages in the pi hole to prevent this issue. 

The only short term solution that works is setting my DNS on my local computer to use 8.8.8.8 by default. 

Is there anything I am missing on the pi hole or is there anything else I can do to fix the issue?",pihole,1646928163.0
8725,comment,2,i04cqc3,,Have a look at the pi-hole query log to see what is being blocked. These web services do sometimes add additional trackers or analytics which can cause them to barf when pi-hole blocks them.,pihole,1646928407.0
8726,comment,1,i052amn,,I looked through that and couldn't find anything that was blocked.,pihole,1646938264.0
8727,comment,1,i05pym1,,"Then pi hole isn't blocking it and the problem lies elsewhere, perhaps at the forwarder your pi is using? Or maybe you've got DNSSEC enabled?",pihole,1646947549.0
8728,post,1,tb1nvx,My pihole stops responding frequently,"Like the title says, I have a pihole which just stops responding. 

It is a Raspberry Pi Zero W. It used to work fine, then the SD card failed so I put it away and forgot about it until recently. I have a 32Gb card spare and so I set it back up yesterday and since then, there have been problems with uptime. Seemingly random too. I have only just finished rebooting it and upon leaving the ssh for 30 minutes whilst I was busy, I returned to find that it had stopped responding completely again. Last night it lasted for a few hours, then unbeknownst to me, only started making NTP server requests until I realised it wasn't working correctly, which I realised at 2:30pm today. I've uploaded a screenshot here: https://imgur.com/a/c0pJUUh

I have an OLED screen attached which periodically shows data, and this remains working whilst this happens but I'm unable to ssh into it, nor access the admin panel until the power source is removed an reinserted. 

I have uploaded diagnostic here: https://tricorder.pi-hole.net/aal6N15X/

Any help would be appreciated.",pihole,1646927461.0
8729,comment,4,i063ejt,,"Your screen shot shows that Pi-hole continued to run normally during the entire period (as evidenced by the hourly spikes of activity), but does not appear to have received any DNS queries from clients other than the Pi-hole host (or Pi-hole itself) for significant periods.

This may be related to the DNS server published by your router.  The route is publishing its own IP, not the IP of Pi-hole.

    *** [ DIAGNOSING ]: Discovering active DHCP servers (takes 10 seconds)
    ...
     DHCP options:
      ...
      router: 192.168.1.1
      dns-server: 192.168.1.1

> I'm unable to ssh into it, nor access the admin panel until the power source is removed an reinserted.

Inability to ssh is typically a problem at the OS level.  This, combined with the failure of the Pi-hole to receive DNS queries from LAN clients, tends to point to an OS problem or hardware problem.  Here is some other evidence of that from your debug log:

    *** [ DIAGNOSING ]: Pi-hole log
    -rw-r--r-- 1 pihole pihole 292K Mar 10 15:29 /var/log/pihole.log
    -----head of pihole.log------
    Mar 10 00:01:34 dnsmasq[579]: query[A] 0.debian.pool.ntp.org from 127.0.0.1
    Mar 10 00:01:34 dnsmasq[579]: config error is REFUSED (EDE: network error)",pihole,1646952987.0
8730,comment,3,i04qghp,,"I'm having a very similar problem. Replaced my SD card a few months back because PiHole had become almost useless, not responding most of the time and wouldn't stay up for more than a couple of minutes at a time.

Everything worked perfectly after replacing the card. I even bought a high endurance card to give it the best shot.

Recently I started having problems again where it stops responding. But now it is not consistent like before. Seems to happen at random, last a few minutes than works until it randomly stops again (hours, minutes or days later).

I can't imagine it being the SD card again.",pihole,1646933701.0
8731,comment,1,i05fpk8,,"Have you upgraded your PiHole to:

Pi-hole v5.9

FTL v5.14

Web Interface v5.11",pihole,1646943492.0
8732,comment,2,i069rye,,Thank you for the answers! Maybe it could be a power supply issue or maybe my SD card. Glad to know that pihole is running fine! I'll definitely try some hardware troubleshooting first as I have changed from my usual power supply. I'll reset the router and do some network diagnostics in the meantime. Thanks again for the help.,pihole,1646955802.0
8733,comment,1,i05nk8x,,Yea these are all the values I see on the admin panel.,pihole,1646946573.0
8734,post,0,tb1n9r,Pi-hole on AWS,I am trying to run pi-hole in docker on AWS but not able to connect to the web ui I open ports for pi-hole,pihole,1646927411.0
8735,comment,6,i05f0yg,,"Why would you want to run a DNS server in the cloud? YOu will be dependent on an ""always-on"" connection to a remote location that requires payment every month for usage. PiHole is better housed locally where you have complete control. A Raspberry Pi can handle the job with very little power consumption and fewer headaches than AWS. Also, last year, AWS went down quite a few times so ask yourself, what happens when your ""paid for"" service defecates in the bed?",pihole,1646943222.0
8736,comment,1,i04dp7x,,Add the specified port on the firewall rules. AWS default firewall is only allow port 22/tcp and 443/tcp.,pihole,1646928796.0
8737,comment,1,i04fetq,,I don’t remember setting one up,pihole,1646929467.0
8738,comment,1,i04ijk6,,"Fixed 
  Some how it got mapped to my AWS local ip mapped to port 80 
  I’m not sure why when I tryed ten million times since last night it decided to work",pihole,1646930677.0
8739,comment,-4,i04itjy,,But I have a new problem I forgot the password it gave me,pihole,1646930783.0
8740,comment,-2,i05f9bv,,One year free after that I’ll put it on a pi,pihole,1646943315.0
8741,comment,-1,i04evj5,,How do I find the firewall and what do I need to add?,pihole,1646929259.0
8742,comment,0,i04f8w4,,I don’t think I am useing a firewall,pihole,1646929403.0
8743,comment,0,i04ft1n,,"I recommend you to use aws lightsail instead, it is more simpler than complete aws. And their firewall rules is also much simpler.
https://lightsail.aws.amazon.com/ls/docs/en_us/articles/understanding-firewall-and-port-mappings-in-amazon-lightsail#understanding-firewalls",pihole,1646929619.0
8744,comment,3,i04isws,,Be sure to restrict port 53 to a very narrow ip subnet or you breaks aws's terms of use,pihole,1646930776.0
8745,comment,1,i08mcpi,,This is a terrible idea. If you don’t know what you are doing your DNS server will be abused for Denial of Service attacks. Hopefully if that happens Amazon will suspend the account after the IP is reported.,pihole,1647006319.0
8746,comment,1,i04j5rh,,What you mean,pihole,1646930911.0
8747,comment,1,i04jy17,,"All I have in subnet is the default 10.z.z.z/16
0.0.0.0/0",pihole,1646931211.0
8748,comment,6,i04lm7y,,"Running a public facing service is a great responsibility. You need to take very good care to make sure it's protected and secure. You do not want it open to the general internet. 

It can and will be abused. 

Generally I don't recommend running PiHole on a cloud service. It's best run locally anyway.",pihole,1646931850.0
8749,comment,1,i08mo3g,,So basically 65.534 clients? I doubt you need that.,pihole,1647006475.0
8750,comment,0,i04nwx7,,Think it be fine with something in front of it like a proxy?,pihole,1646932734.0
8751,post,5,tazsp6,Working on vLAN but not LAN?,"I have my main LAN setup on 192.168.1.X and I have my vLAN setup on 192.168.20.X 

Pihole is up and running and is working on my vLAN but completely ignoring my LAN network. Accessing the pihole GUI from my main pc (on LAN), the query log shows pihole.local registering but that’s about it. 

Happy to provide more detail, but not sure what will help.",pihole,1646922199.0
8752,comment,2,i040ibs,,"What are clients in the 192.168.1.x and 20.x reporting as their DNS server?

And can you ping the pihole from either network?",pihole,1646923375.0
8753,comment,2,i0422cj,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1646924043.0
8754,comment,2,i04uj81,,"Lets see, assuming you havent port forwarded port 53 (You should never do that), select permit all origins under pihole admin page > settings > DNS > Interface settings > potentially dangerous options?",pihole,1646935268.0
8755,comment,1,i03ywzd,,"My pihole is on the main LAN. 
I am using a UDM Pro as my router/firewall.",pihole,1646922670.0
8756,comment,1,i05gk6x,,"Who is running the DHCP, UDM, or PiHole? My USG runs the DHCP and PiHole is on the LAN and the USG points all DNS requests to the PiHole. My VLANS work fine.",pihole,1646943816.0
8757,comment,1,i0445p7,,"both are pointing to [192.168.1.119](https://192.168.1.119) (pihole).

I can indeed.",pihole,1646924933.0
8758,comment,1,i0451ni,,rKqyWYgO - Is that what you require?,pihole,1646925306.0
8759,comment,1,i04yfa8,,"I’ve not port forwarded. 
Sorry, what do you mean potentially dangerous option?",pihole,1646936774.0
8760,comment,1,i06gfyn,,"Yep, exactly the same as you. My vlans are working. It’s my lan that’s not ad blocking.",pihole,1646958826.0
8761,comment,1,i06dtqm,,They are not dangerous unless you forwarded port 53,pihole,1646957637.0
8762,post,15,tawg60,What does NAN mean?,"Updating my Pihole while the interface was open and saw the Dashboard saying this. Just curious what it means - I know it's related to the update. 

&#x200B;

https://preview.redd.it/qbt87016ijm81.png?width=227&format=png&auto=webp&s=3b61e7ccb93cbfc64e78dcb696ea78b3762ce93f",pihole,1646910912.0
8763,comment,17,i03eexl,,https://en.wikipedia.org/wiki/NaN,pihole,1646911051.0
8764,comment,2,i03u1f5,,"Many languages evaluate certain non-numeric values to 0 or nonzero in automatic casting. This can happen with values like Null, None, false, or undefined. Therefore, It is helpful to have a type that explicitly means undefined but can’t be interpreted numerically.",pihole,1646920393.0
8765,comment,2,i03yha0,,It means grandma in Non-American English.,pihole,1646922475.0
8766,comment,1,i04nk05,,"In JavaScript, NaN is short for ""Not-a-Number"".
[W3 Schools NaN](https://www.w3schools.com/jsref/jsref_number_nan.asp)",pihole,1646932597.0
8767,comment,1,i06f429,,Basically the program expects a variable to be a number type and it's not.,pihole,1646958218.0
8768,comment,1,i081g8z,,"It looks like you don’t have your pi-hole configured.  No blocklist defined.  

There should be a number there telling you how many domains are on the blocklist you are using.

I don’t have that block on mine.  Mine says “Domains on adlist”, value is 100,817.",pihole,1646992230.0
8769,comment,1,i03el99,,Ah thanks. Never saw that one before,pihole,1646911183.0
8770,comment,1,i04v2zn,,"Made me giggle, but ""Non-American English""? So just normal English hehe :D",pihole,1646935485.0
8771,comment,3,i052346,,"Not only javascript, it's part of the floating point standard",pihole,1646938184.0
8772,comment,1,i082nbe,,I was updating pihole so the DB was down temporarily. That's what caused it. My question was just about what the acronym meant and that's been answered.,pihole,1646993244.0
8773,comment,3,i03f69q,,Most likely the web interface trying to display a number that doesn't exist during the update process.,pihole,1646911614.0
8774,comment,1,i03flri,,Oh I got that alright - it was just the acronym I hadn't seen before.,pihole,1646911928.0
8775,comment,1,i05k71r,,Unless you’ve learnt about how floating point numbers are represented in binary (really interesting btw) you wouldn’t have come across the acronym.,pihole,1646945254.0
8776,post,0,tap8fw,Warning - ignoring nameserver 127.0.0.1 - local interface,"I started getting this error after a power outage. Could something have changed on my server that messes up pihole? I am running pihole in a docker-compose in Ubuntu. 

The link to my pihole -d >>>  [https://tricorder.pi-hole.net/1DzwLUPa/](https://tricorder.pi-hole.net/1DzwLUPa/)",pihole,1646882405.0
8777,post,1,takxwg,"Pi-hole blocks my LG TV from accessing the content store, but I can't figure out what is being blocked to cause it.","I only know that disabling the pi-hole functionality for about 10 minutes allowed me to access the content store and download the app I needed.

I've googled and found similar issues, but when I check the blocked domains against the queries in my pi-hole logs, they're all let through :/",pihole,1646869288.0
8778,comment,4,i01q1g3,,"Just ssh into your pihole and do 

`tail -f /var/log/pihole.log | grep '0.0.0.0'`


Watch it right when you try to access the content store.",pihole,1646873892.0
8779,comment,1,i01h6wo,,"I have it blocked on purpose lol
Try looking though my block list and see if white listing some of those LG domains foxes it.
[my block list is here](https://github.com/jmcglock/pihole/blob/main/jmcglock-blocklist.txt)",pihole,1646869888.0
8780,comment,1,i01h982,,I had a similar issue with Discovery+ via my SkyQ box and the only way around it was to set the DNS for the Sky Q Box to a 3rd party,pihole,1646869915.0
8781,comment,1,i02zmc0,,Whitelist this ad.lgappstv.com #pictures in app store us.ibs.lgappstv.com #available app aic-ngfts.lge.com #app updates us.lgtvsdp.com idk may be system updates ibis.lgappstv.com #us store us.rdx2.lgtvsdp.com #idk may be system updates pl.lgtvsdp.com Us.lgtvsdp.com #downloads pl-lgtvsdp-com.aws-prd.net * lgtvonline.lge.com #like gstatic connect test snu.lge.com #more update,pihole,1646898841.0
8782,comment,1,i6nrexy,,I'm getting an error accessing the lg tv app store caused by pihole as well. Were you able to solve it?,pihole,1651236503.0
8783,comment,3,i01ix3n,,"Well I may end up doing that, but for now I'll consider that a last resort",pihole,1646870636.0
8784,post,2,taibas,PiHole DHCP Does Not Like WyzeCam V2,"Not sure what Wyze changed, but after a few days of painters painting, where the Wyze cams were in a box, I simply could not get any of my 3 Wyze V2 cams to connect to WiFi until I turned off the PiHole DHCP server, and went back to using the router (Linksys WRT1200AC ) DHCP.

The only reason I use the PiHole DHCP is to get the correct devices named in the PiHole logs, so I can assign the Wyze Cams to the DHCP range of the router, and have the rest of the network handled by the piHole DHCP, but this seems silly, as I can't imagine how Wyze might break this.  

Is there a log of attempts and failures to complete the DHCP process? 

Has anyone else noticed this issue?

I don't really worry about the traffic from the Wyze Cams, as there is no ""ad content"", and the privacy implications of sending live video to someone else's server is such a horrible breach, all we can do is hope that the encryption is good, and access controlled well.",pihole,1646861912.0
8785,post,1,tag3v4,"Pi Hole runs, but web interface is black screen with HTML 1.0 links down the left.","This seems to come and go and I can't figure out why. I did an update a few days ago and at first I got the proper interface but it wasn't showing any details other than the stats on the top. No query logs at all.  The server is definitely responding to DNS requests though.

Where should I look to solve this?",pihole,1646855843.0
8786,comment,1,i02j9tm,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1646887886.0
8787,comment,1,i03olbz,,"Done!

https://tricorder.pi-hole.net/bxuCPV0t/",pihole,1646917598.0
8788,comment,1,i2pnvzw,,"Find anything?  Interface is still messed up.  

[Screenshot](https://imgur.com/a/W8S84mw)",pihole,1648647017.0
8789,comment,1,i2pphje,,Apologies; I missed your debug log post and it has now expired.  Please post a new token URL.,pihole,1648647748.0
8790,comment,1,i2pywjo,,"No problem. Here's the new one.

https://tricorder.pi-hole.net/JBkV7NJy",pihole,1648651729.0
8791,comment,1,i2pzsrm,,"I don't see anything out of the ordinary in your debug log.

Is this behavior consistent across different browsers?",pihole,1648652085.0
8792,comment,1,i2q5i1v,,"Yes. Same UI across Firefox, Edge and Chrome.  This happened after doing an update.  :(",pihole,1648654374.0
8793,comment,1,i2q8j7x,,"I have two Pi-hole VM's on my network.  Both chugging along fine. This one experience UI issues after the upgrade, so I left the other one alone.  The other one looks fine.  I just verified if there were any browser plugins (adblock, etc) that may be interfering.  Everything is disabled for this instance's IP.  Oddly enough, months ago, I had the same UI issue, but it went away on its own a day later.  FWIW, this VM still resolves DNS despite UI issue.",pihole,1648655596.0
8794,comment,1,i2q8wkg,,Run `pihole -r` and select the **repair** option. This *may* resolve the problem.,pihole,1648655747.0
8795,comment,1,i2qo8bj,,"Yeah.  Repair and reconfigure didn't change a thing. :(  Possible disk space issues perhaps?  

/dev/sda1 has 14% disk space free (6.9G/5.6G).  Could that be an issue?",pihole,1648661816.0
8796,comment,2,i2qu2ma,,">	Could that be an issue?

Unlikely. You still have 1.4 GB free space.",pihole,1648664110.0
8797,comment,1,i2qvyiz,,"OK. I'll do some extra googling and see if anyone experienced something similar.  The core services work, which is key.  Thanks for the assistance.",pihole,1648664855.0
8798,post,2,taenws,[Enhancement] Add local storage stats to web ui,"Right now this is missing. For us peasants who use a raspberry pi and cheap microSD card, it would be helpful to know the current storage status in case logs/db increase so it can stay running. Thoughts on adding the request for the web ui?",pihole,1646851861.0
8799,comment,2,i007xqs,,Would be nice to see in the dashboard,pihole,1646852030.0
8800,comment,2,i0455u9,,"Would be nice, ended up filling my SD card after leaving pihole running for several months, didn't realize it until I went to update it.",pihole,1646925355.0
8801,comment,1,i04dh16,,"These are in the web GUI indirectly through the diagnosis log.  If you get to less than 10% available space (the default setting), you will get a warning at the top of the dashboard and the diagnosis log will show the warning.

[https://docs.pi-hole.net/ftldns/configfile/#check\_disk](https://docs.pi-hole.net/ftldns/configfile/#check_shmem)",pihole,1646928704.0
8802,comment,2,i04f1ns,,So can this be added to the json for web ui under the temp or other data?,pihole,1646929324.0
8803,comment,1,i04py0t,,"It can be, but we have no plans to do so.",pihole,1646933504.0
8804,post,329,tae60g,My new 1.3 in screen to monitor pihole...,,pihole,1646850560.0
8805,comment,19,i008fjo,,I've been wanting to do something like this but I don't have the technical skills to pull it off,pihole,1646852220.0
8806,comment,6,i00nkja,,"Link to the screen? Both my pi are in clear cases, would love to see stats when I'm near them 😁",pihole,1646858134.0
8807,comment,3,i00car4,,I need this. Any cases it would work well with?,pihole,1646853718.0
8808,comment,3,i00d028,,"this is cool, did you buy the screen or repurpose?",pihole,1646853989.0
8809,comment,3,i00pntz,,"This is awesome, GitHub link for script?",pihole,1646858932.0
8810,comment,3,i00u230,,"Great work!

&#x200B;

Is that a 7789 (1.3in) board?

As another person posted, I'd love the code/git if you were willing to share.

This would be awesome to add to my pihole setup.",pihole,1646860600.0
8811,comment,2,i00p7ov,,That's cool as hell.,pihole,1646858760.0
8812,comment,2,i01q1hy,,"What interface are you using to display those details on the screen - Framebuffer, pygame, SPIM?

Is it python with RPi or the micropython or a smaller ff?

I'm struggling to update screen via SPI with PIL. After some couple of hours the screen goes blank. I think the memory gets corrupted or something and the display needs to be reinitialized/reset.

Would love to hear your pain points... 
Thanks for posting.",pihole,1646873893.0
8813,comment,1,i01cnz8,,"Easy trick I use:

' is feet

"" is inches

So think there's more inches in a foot therefor "" is 2 and ' has 1.",pihole,1646867937.0
8814,comment,1,i05807c,,So... Whats the script to make it display?,pihole,1646940425.0
8815,comment,62,i00b7yv,,"You absolutely do. You have Reddit, you have Google, and you’re the most advanced fucking species in the entire history of earth. You can do it. Order the parts and fuck with it until it works and or makes sense.

Edit: everyone starts from somewhere. The fact that you’re on this Reddit alone means you have enough interest in it and that’s enough to get started. Do it.",pihole,1646853302.0
8816,comment,3,i00sspm,,">but I don't have the technical skills to pull it off

I think some of the 7789 boards like these are even pre-soldered w/pins.

So you can plug this in to pi w/o even solder skills! :)

Rest is just follow tutorial on code size. Quick google / reddit forum search & you'll find this kind'a build very common w/rpi & embedded micros.",pihole,1646860118.0
8817,comment,4,i00liua,,"Yep, very easy to do, I could help if any of you need it...",pihole,1646857334.0
8818,comment,3,i00jvuj,,I bought it to use it exclusively as multi sensor monitor...,pihole,1646856691.0
8819,comment,7,i00t182,,">This is awesome, GitHub link for script?

I'll second this request.

It's great little interface & use of what I think is an st7789 board (I use them a lot & great little boards).

Perfect for mico pi-hole display. Tiny & decent amt of pixels for size.",pihole,1646860208.0
8820,comment,6,i01osx0,,"Yes, after I finish debugging...",pihole,1646873320.0
8821,comment,4,i01ok95,,ST7789 1.3in,pihole,1646873209.0
8822,comment,16,i00bph9,,I should have said yet.  I've been reading and doing some testing but I'm not there quite yet.,pihole,1646853490.0
8823,comment,3,i00f6i2,,I wanna print this out and put it up at my shop. TY,pihole,1646854838.0
8824,comment,2,i01fqi9,,most advanced species that we know of to be correct,pihole,1646869254.0
8825,comment,1,i01n0mq,,Can I pay you to get shouted at?,pihole,1646872491.0
8826,comment,1,i0rrqrz,,"if you push it to github you’ll no longer have to debug alone :)
don’t be shy",pihole,1647363869.0
8827,comment,2,i02jcxj,,"The above redditor's great comment reminded me of this quote with the same sentiment. Remember it whenever you doubt yourself:

>	Like every other creature on the face of the earth, Godfrey was, by birthright, a stupendous badass, albeit in the somewhat narrow technical sense that he could trace his ancestry back up a long line of slightly less highly evolved stupendous badasses to that first self-replicating gizmo---which, given the number and variety of its descendants, might justifiably be described as the most stupendous badass of all time. Everyone and everything that wasn't a stupendous badass was dead.

*Cryptonomicon* by Neal Stephenson",pihole,1646887935.0
8828,post,3,tad586,Transfer Adlists without GUI,"Hej, 

I added a pi-hole on GCP with WireGuard to my IT zoo. I want to transfer all my local-pi-hole Adlists to the GCP pi-hole. Unfortunatly, I don't have any GUI on the GCP pi-hole.

What is the best approach to insert a lot of Adlists via command line?",pihole,1646847598.0
8829,comment,3,hzzxag4,,"Copy this file to the new install:

    /etc/pihole/gravity.db

Then restart FTL with `pihole restartdns reload-lists`",pihole,1646847767.0
8830,comment,1,i0338rw,,Thanks u/jfb-pihole,pihole,1646901800.0
8831,post,2,tabauf,"Pihole DNS ""No servers could be reached""","I'm having some issues with Pihole DNS not resolving addresses after updating my network this weekend (to isolate some work devices from the home network with vlans). I'm not sure if the changes are related to the issue or not.

I have a Ubiquiti Unifi Dream Machine Pro and I'm running pihole as a podman container according to these instructions: https://github.com/boostchicken-dev/udm-utilities/tree/master/run-pihole.

The container is running successfully on the router and I can ping it from my desktop computer which is in my LAN successfully (the pihole is on it's own VLAN, but there are no firewall rules isolating it from the default LAN). I can also connect to port 53 with netcat:

```
❯ nc -zv 192.168.5.3 53
pi.hole [192.168.5.3] 53 (domain) open
```

But trying to resolve a common address such as google.com:
```
❯ dig google.com
; <<>> DiG 9.18.0 <<>> google.com
;; global options: +cmd
;; connection timed out; no servers could be reached
```

My `/etc/resolv.conf` from DHCP on the router is below, if I move `192.168.5.3` down in the list of nameservers the name resolution works right away, so there is definitely something wrong with the pihole setup specifically.
```
domain mydomain.sh
nameserver 192.168.5.3
nameserver 1.1.1.1
nameserver 1.0.0.1
```

Checking the container I can verify that pihole is listening on port 53:
```
# ss -ltnp
State                          Recv-Q                         Send-Q                                                   Local Address:Port                                                   Peer Address:Port
LISTEN                         0                              0                                                            127.0.0.1:4711                                                        0.0.0.0:*
LISTEN                         0                              0                                                              0.0.0.0:80                                                          0.0.0.0:*
LISTEN                         0                              0                                                              0.0.0.0:53                                                          0.0.0.0:*
LISTEN                         0                              0                                                                [::1]:4711                                                              *:*
LISTEN                         0                              0                                                                    *:80                                                                *:*
LISTEN                         0                              0                                                                    *:53                                                                *:*
```

Pihole is configured to use macvlan with ip `192.168.5.3`:
```
{
  ""cniVersion"": ""0.4.0"",
  ""name"": ""dns"",
  ""plugins"": [
    {
      ""type"": ""macvlan"",
      ""mode"": ""bridge"",
      ""master"": ""br5"",
      ""mac"": ""d4:c7:63:e9:5d:e7"",
      ""ipam"": {
        ""type"": ""static"",
        ""addresses"": [
          {
            ""address"": ""192.168.5.3/24"",
            ""gateway"": ""192.168.5.1""
          }
        ],
        ""routes"": [
          {""dst"": ""0.0.0.0/0""}
        ]
      }
    }
  ]
}
```

I can't see the macvlan address in my network clients in the Unifi UI, though I'm not sure if I'm supposed to.

I'm not sure why I'm able to ping and netcat to the container, but when I try to do name resolution it just times out. The web ui also works perfectly and I can reach it on both `192.168.5.3` and `pi.hole` Any ideas much appreciated, I'm sure someone must have had the same issue before.",pihole,1646842629.0
8832,comment,1,hzzke2g,,">the pihole is on it's own VLAN, but there are no firewall rules isolating it from the default LAN

What about rules allowing the Pi-hole to reach the internet?",pihole,1646842836.0
8833,comment,1,i055b92,,"I have no rules preventing the pihole from reaching the internet, now I tried looking up google.com from inside the pihole container and it works, though it uses `1.1.1.1` which is the second entry in resolv.conf, but I'm not sure if that's wrong for pihole itself to do that. Curling google.com from inside the container also works, so connectivity is not an issue there is seems.

```
root@pi:/# cat /etc/resolv.conf
nameserver 127.0.0.1
nameserver 1.1.1.1
root@pi:/# dig google.com

; <<>> DiG 9.11.5-P4-5.1+deb10u6-Debian <<>> google.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 22024
;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 1232
;; QUESTION SECTION:
;google.com.                    IN      A

;; ANSWER SECTION:
google.com.             89      IN      A       142.250.74.142

;; Query time: 13 msec
;; SERVER: 1.1.1.1#53(1.1.1.1)
;; WHEN: Thu Mar 10 20:06:58 CET 2022
;; MSG SIZE  rcvd: 55

root@pi:/# curl google.com
<HTML><HEAD><meta http-equiv=""content-type"" content=""text/html;charset=utf-8"">
<TITLE>301 Moved</TITLE></HEAD><BODY>
<H1>301 Moved</H1>
The document has moved
<A HREF=""http://www.google.com/"">here</A>.
</BODY></HTML>

```",pihole,1646939405.0
8834,comment,1,i05g9ms,,"What setting are you using under Settings>DNS>Interface settings? The recommended setting to ""Allow only local requests"" won't work because the Pi-hole is in its own VLAN.",pihole,1646943703.0
8835,comment,1,i060ler,,"I don't have `Allow only local requests` enabled, but looking at the settings I saw that there were no upstream DNS servers enabled at all, so I checked a few of the boxes and saved - immediately `dig google.com` starts resolving properly. That's really weird, I have DNS servers set in the docker/podman command running the container, but it seems that they don't actually do what they're supposed to.

When checking the upstream dns servers in the UI, is there any way to determine the order in which they're used?",pihole,1646951817.0
8836,post,6,taajgt,"School Chromebooks and ""Maximum number of concurrent DNS queries reached"" Error","Every day just after dinnertime in our house, I have been seeing the following error in the logs:

>Warning in dnsmasq core:  
Maximum number of concurrent DNS queries reached (max: 150)

When I checked the logs I found that it is my daughter's school-issued Chromebook. It is spamming DNS looking for domains - Amazon, Google, and the school. Those are to be expected. The requests that are doing the spamming, however, are to relay-autodetect.lsfilter.com,    
internet-up.ably-realtime.com, and such. 

What should I do? Just ignore the errors? Everything appears to be working on the Chromebook - my daughter is able to get her homework done.",pihole,1646840544.0
8837,comment,6,hzzfj10,,I ignore it. Sometimes I'll get a TV that does a huge DNS flood. Wheel of Fortune keeps playing so I ignore it.,pihole,1646840912.0
8838,comment,5,hzznsed,,"Given that everything is working, I would ignore this warning (it is not an error).

[https://docs.pi-hole.net/ftldns/dnsmasq\_warn/](https://docs.pi-hole.net/ftldns/dnsmasq_warn/)

""The configured maximum number of concurrent DNS queries for a given server is reached. The system is either very busy at the moment or not receiving queries from the configured upstream. Check your connectivity or the upstream DNS server status.

The warning can also be printed when being spammed with an excessive amount of duplicates or when the upstream server never replies for specific domains. Check your logs and try to identify similarities between the query directly preceding this warning and earlier queries in /var/log/pihole.log. Try to find out if your upstream does maybe never reply to specific domains and fix this.

This warning is printed at most once every five seconds (per upstream server) to help mitigate unlimited log file growth.""",pihole,1646844161.0
8839,comment,3,hzzprvj,,"> If its fine dont touch it

This is the thing I learned when messing around with computers. Nothing broke so dont (attempt to) fix it.",pihole,1646844915.0
8840,comment,1,hzzqisq,,"Thank you, everyone",pihole,1646845199.0
8841,post,12,ta9i0s,Pi-hole not showing clients,"I have my pi-hole connected to a verizon FIOS router which is also connected to UDM pro which is connected to multiple switches and VLANs (pi-hole is not acting as a DHCP).  I adjusted the FIOS DNS to point to the pi-hole and everything is working well.  Except, the pi-hole is not showing the many clients in any of the reports.  Is it possible to get the clients in this type of configuration?",pihole,1646837613.0
8842,comment,4,hzzgzjp,,"If your FIOS router is anything like mine, it proxies all DNS requests, so even with your pihole configured as the DNS source, it will *only* see the FIOS router as producing requests. Unfortunately, there is no configuration option for this. Thankfully, an off-the-shelf Netgear router worked just fine, and I had no need for the Verizon-provided router.",pihole,1646841486.0
8843,comment,3,hzzt8rf,,"You have to set your piHole as the DHCP controller for your network and turn that feature off on your router. Then your piHole will know what all the clients are, BUT unlike many routers the piHole won’t let you edit the names of the devices to something you can remember. Or at least I haven’t figured out how to map names to MAC addresses, just ip addresses. 

Allegedly Conditional Forwarding is supposed to help with this but I haven’t had luck with it yet.",pihole,1646846239.0
8844,comment,2,hzznixt,,https://discourse.pi-hole.net/t/why-do-i-only-see-my-routers-ip-address-instead-of-individual-devices-in-the-top-clients-section-and-query-log/3653,pihole,1646844059.0
8845,comment,-2,hzzuokm,,"As other said, in the network config on your router, set the Pi as DNS Server, then on the client page you will see all clients",pihole,1646846786.0
8846,comment,1,i5f8ojk,,"Does the netgear off-the-shelf have an option to allow individual clients? I am using netgear and have changed the DNS to be Pi-Hole but left the router as the DHCP server, IS the only way to make Pi-Hole the DHCP server?",pihole,1650417251.0
8847,post,26,ta2kv8,How can i enable both ethernet and wifi?,"I have a Synology router and have two separate networks (192.168.1.xx & 192.168.2.xx Guest network) and wanted to also enable wifi so I can use the pihole on the guest network 192.168.2.xx but I'm not sure how. I went into sudo pihole -r and it only allowed me to pick one, not both.   also on the guest network 192.168.2.xx  would I just point in router settings for primary dns  to the static ip of the pihole that is set on my main network 192.168.1.xx

https://preview.redd.it/pc0rks6agbm81.png?width=410&format=png&auto=webp&s=14ee945858891014919ceecaed0a56825fee98f1",pihole,1646811331.0
8848,comment,11,hzyu2zp,,You need to remove the secondary DNS because it's allowing DNS to bypass your pihole.,pihole,1646831104.0
8849,comment,3,hzyw4xo,,"Most guest networks are segregated from your primary network specifically to isolate guest clients. The guest clients may have no connection, visibility, or route  to any clients not on the guest network. As a result, they may not see the Pi-hole and cannot use it.",pihole,1646832212.0
8850,comment,3,hzzcy3c,,I would do this at the firewall level (which I currently do). The pihole is on my LAN and guest wifi can access the pihole for DNS lookups. I manage this with a firewall rule. LAN to Guest wifi and Guest wifi to LAN is full deny except port 53 which is allowed for DNS lookups.,pihole,1646839867.0
8851,comment,2,hzy9689,,"On a local Pihole you could allow queries from everywhere.
But you also could try to set a route on the router to the PI‘s eth0 address (from the other network). Then you save the WLAN part (which would not work if you want to use client isolation).",pihole,1646815469.0
8852,comment,1,hzyvvl7,,"Easiest way to do this is to connect your pi to both networks. Connect over Ethernet to the main network and over Wi-Fi to the guest network. I think you may need to enable the pi to “listen on all interfaces”.  From there, just set the dns appropriately.",pihole,1646832075.0
8853,comment,1,hzy4gaz,,"You mean listening on both wlan0 and eth0? Or enp4s0 (something along those lines)? Go to pihole web admin page > settings > DNS > Allow only local queries. You may also try other options, but make sure you NEVER OPEN PORT 53.",pihole,1646811642.0
8854,comment,1,hzyqhya,,I ran into the same issue when I was setting up my PiHole. My solution was to have my router handle the DHCP. I point the DNS requests from all the VLANs to the router which sends the DNS to PiHole. This way the ethernet and WiFi DNS goes through the router to the PiHole.,pihole,1646829010.0
8855,comment,1,hzyz9w1,,"If youre using any static IP's, you should shorten those DHCP ranges and only use static IP's outside of the DHCP pool range.

Also, whatever OS you're using on the pihole, that's where you configure you're networks.

Then on the pibe Web GUI, go to settings and use the option ""listen on all interfaces"", so it should take requests from both.

Alternatively, if you're router has firewall rules, you could allow traffic from the guest network to ONLY the IP of the pihole server.",pihole,1646833806.0
8856,comment,1,hzz3zia,,Instead of trying to do this from your synology Nas why not set this up on your router? Depending on what you have you can setup vlans/ firewall rules to allow access to pihole for all subnets you manage.,pihole,1646836024.0
8857,comment,6,hzyyb28,,"I was going to mention that. The secondary DNS can be used at any time. Additionally, having different results from the two servers can result in some weird, unreproducible behavior.",pihole,1646833330.0
8858,comment,1,i00q4z6,,thanks for the tip!,pihole,1646859110.0
8859,comment,2,hzy533h,,yeah i want both wlan0 and eth0.   my second guest network is on 192.168.2.x . but on the dns settings for the guest network im sure i cant just point it to the static address of the pihole  that is on 192.168.1.xx or can i?,pihole,1646812132.0
8860,comment,1,hzy5dzh,,"It depends on your router settings. Just give it a try and you would found out. Since i dont know your situation well enough I cannot give you more than trying it out. Is the main router giving two wifi signals, one for guest and one for main network? Or is the main network provided by the router and the guest network provided by the pi? Who has the DHCP server?",pihole,1646812367.0
8861,comment,0,hzy6k1h,,The main network is giving out two wifi signals one for my main network 192.168.1.x and the other for the guest network 192.168.2.x . And the main router has two dhcp servers 1 for the main one and one for the guest.,pihole,1646813297.0
8862,comment,2,hzyeelc,,"The easiest way to do things is to connect eth0 to the router and wlan0 to guest WiFi. Ser static IP on the pi for BOTH of the interfaces, which means TWO IP and use the corresponding one on each of the DHCP server.",pihole,1646819901.0
8863,post,0,ta17zs,FYI,FYI ktpx.amazon.com blocks menu on FireStick,pihole,1646805932.0
8864,post,19,t9w6s2,Trouble setting up pihole rate-limited (current config allows up to 1000 queries in 60 seconds),"I've run pihole for awhile. One for my network and a backup. I've decided I'd like to use one of the pis for a different wifi project. and since I don't understand linux at all I fresh started everything.  I've attempted doing this on a raspi2 and now a raspi4, and I get the same result.

I've done the following:

Install pihole

install unbound

follow unbound instructions, seems to be working fine per instructions.

set upstream dns server per pihole instructions

install pivpn/wireguard.

Go into modem and set the pihole for DNS

Test some stuff, works fine at first, then the problems start. From my untrained eyes it seems like the pihole device itself seems to be generating too many DNS lookups, and then stops doing DNS lookups, and my network crashes. I generated a debug token, but since I can't reach out anymore it didn't post. I've posted it on paste.bin, I hope this is ok?

&#x200B;

Additional info if it helps, I thought I had permit all origins checked under interface settings due to different vlans, but I didn't. However I did enable it properly and the problem persists.

&#x200B;

&#x200B;

&#x200B;

Thank you for this amazing software and any help you can provide.",pihole,1646789012.0
8865,comment,6,hzxey4a,,"This indicates a problem with the Pi being able to get out to the internet.

    [i] dig response:  dig: couldn't get address for 'ns1.pi-hole.net': failure

Edit file ***/etc/resolv.conf***, change the nameserver from loopback IP to a third party DNS server, save the file, and re-run the debug log.  Then post the URL token here.",pihole,1646796353.0
8866,comment,10,hzxymgf,,I’m just a passerby and wanted to say thanks for all your hard work. I see you commenting a lot in this subreddit and you offer a lot of help for free. It’s appreciated and doesn’t go unnoticed. I hope you have a great week.,pihole,1646807385.0
8867,comment,1,i0162zi,,"Thanks for your response,

&#x200B;

[https://tricorder.pi-hole.net/MLJYOHtJ/](https://tricorder.pi-hole.net/MLJYOHtJ/)",pihole,1646865210.0
8868,comment,5,hzy03mn,,Thanks.,pihole,1646808406.0
8869,post,2,t9w4ud,Issues with local DNS resolver,"Howdy!  I'm using a pihole as my local DNS server on my network.  It looks something like this:

Network Clients > Configured to use Pi Hole for DNS > With an upstream of 1.1.1.1

I've got a bit of an oddity though, because my clients won't resolve DNS until I ping the Pihole:

Before Pinging:

    [root@esxi8:~] nslookup vcenter01.internaldomain.com
    ;; connection timed out; no servers could be reached

After Pinging:

    [root@esxi8:~] ping -c 1 10.20.0.152
    PING 10.20.0.152 (10.20.0.152): 56 data bytes
    64 bytes from 10.20.0.152: icmp_seq=0 ttl=64 time=0.348 ms

    --- 10.20.0.152 ping statistics ---
    1 packets transmitted, 1 packets received, 0% packet loss
    round-trip min/avg/max = 0.348/0.348/0.348 ms

    [root@esxi8:~] nslookup vcenter01.internaldomain.com
    Server:         10.20.0.152
    Address:        10.20.0.152:53

    Name:   vcenter01.internaldomain.com
    Address: 10.20.0.21

Anyone have any thoughts?  I've been up and down Google, and I'm still not sure what's causing this issue.  I'm thinking I may just be using Pi-Hole wrong, and I need an internal DNS server in front of it, with Pi-Hole acting as an upstream, but I'd rather not do that if I don't have to.  

Tricorder link: https://tricorder.pi-hole.net/7DcoLpe9/

Thanks for reading!",pihole,1646788841.0
8870,comment,1,hzybuvb,,"My first thought went into the direction: virtual networking, NSX or so, which needs a second after first request to discover? All in the same L2? Some ARP issue?

What if you call nslookup twice? nslookup with a defined nameserver?",pihole,1646817739.0
8871,post,1,t9sk8r,Adlist wanished,"Hello, I used to have nearly 5 million domains on my adlist but upon checking today I can see 775,000 domains being blocked. How come that number shrinked?",pihole,1646778315.0
8872,comment,3,hzwbdjy,,Look at the output of `pihole -g` and see which lists are not loading.,pihole,1646778645.0
8873,comment,1,hzy4l71,,Or web admin page > group management > adlist.,pihole,1646811747.0
8874,post,1,t9qoik,Blocking traffic to my work laptop,"I set up PiHole yesterday, and so far it's been nice.  I already have a number of ad-blocking plugins, so not seeing much of a difference there, but this morning when I hopped on my work's vpn, I started getting weird behavior on my work laptop.  Certain sites like google or duck duck go just sit there trying to load, while others like Dell.com load up in an instant.  No real issue for Teams either, or connections to other systems on my VPN.  I'm assuming pihole is denying traffic for my laptop, while on VPN, and I did get an alert in the admin UI: ""Ignoring domain CONFIG_DOMAIN for DHCP host name HOSTNAME"" (using the generic alert from the pihole docs).  the doc explaination is: ""A DHCP client is not allowed to claim name HOSTNAME in the current DHCP configuration.""

Am i able to create a group for my work laptop, which doesn't filter anything?  Or if the issue is more related to the domain issue based on the error, is there a way to allow the laptop to claim the domain name?",pihole,1646772960.0
8875,comment,3,hzvyy8a,,"Typically when a client computer is on a VPN service, all of the DNS traffic from that client goes into the VPN tunnel and bypasses Pi-hole.

>Am i able to create a group for my work laptop, which doesn't filter anything?

Yes, but if the DNS traffic isn't going to Pi-hole that won't have an effect.

>""Ignoring domain CONFIG\_DOMAIN for DHCP host name HOSTNAME""

You can fix this:

[https://discourse.pi-hole.net/t/ignoring-domain-config-domain-for-dhcp-host-name-hostname/52027/3](https://discourse.pi-hole.net/t/ignoring-domain-config-domain-for-dhcp-host-name-hostname/52027/3)",pihole,1646773230.0
8876,comment,1,hzwmnk0,,"This will also depend on the Split Tunneling and how it is configured.

You may be better served creating a vlan for your work systems and or separate wifi SSD",pihole,1646783502.0
8877,comment,1,i0ch2eu,,"You can add your PiHole to your router DNS settings, this way all your home traffic will be Monitorized. While tunneling with VPN it's a bypass to PiHole, the best way is to add a copy of the domains to your Host file.",pihole,1647071238.0
8878,comment,1,hzwnw8a,,"VLAN segmentation and separation is on the agenda, just didn't think I'd need to do that first.  Looking to build it out with a refurbished juniper as part of my homelab, but probably going to have to wait for next paycheck unless there's a dirt cheap option I can implement.
 It is a split tunnel VPN, and I figured that might come into play since the laptop seems fine when off the VPN, don't want to break things while I need to be able to work remote, so I'll take another swing at it over the weekend.  Thanks!",pihole,1646784063.0
8879,post,0,t9o1k9,How do I block YouTube shorts.,I recently set up my pihole and would be great full if anyone knew how to specifically block YouTube shorts. Thanks,pihole,1646765845.0
8880,comment,13,hzvixx0,,"You can’t block the cancer that is YoutTube Shorts as they are served from the same domain as regular YouTube videos.

However, you can use a YouTube alternative interface (like NewPipe) which doesn’t support YouTube Shorts.",pihole,1646767218.0
8881,comment,5,hzvkd1v,,Close your eyes,pihole,1646767738.0
8882,comment,1,hzvfz0x,,You can‘t block YT ads with DNS filters. Some browser extensions claim to be able.,pihole,1646766141.0
8883,comment,1,hzvsf77,,I've never heard of Lingpipe...do you have a link to share?,pihole,1646770781.0
8884,comment,3,hzwp8e2,,YouTube shorts are basically Tik Tok. You must not have used YouTube in the last year or so.,pihole,1646784665.0
8885,comment,3,hzvjdos,,I’m not after blocking YouTube ads. I want to block YouTube shorts to prevent them being viewed.,pihole,1646767378.0
8886,comment,5,hzvsunu,,"I meant NewPipe, sorry.

https://newpipe.net",pihole,1646770941.0
8887,comment,1,hzy6t3q,,"I use YT every day. I have never used TikTok (but I know basically what is is - never seen something like this in YT - when should this appear? Where? on the rectangle where normal videos appear? Is it cut into the normal videos is it seperate?)

You could analyse where these videos originate. If the come from an URL which has a unique part, you could block it with DNS. If not, then not.",pihole,1646813498.0
8888,comment,1,hzvkrc9,,"Sry, I don‘t know what shorts are.",pihole,1646767884.0
8889,comment,1,i0u0xca,,"same idea - afaik pihole blocks at network level, it doesn't know if a resource is a long video or short video or a short, etc",pihole,1647396778.0
8890,comment,2,hzy6y58,,"YouTube shorts are all over the mobile app. So if you only use desktop, then probably wouldn’t have seen them.",pihole,1646813610.0
8891,comment,2,hzw7zo0,,Me neither,pihole,1646777000.0
8892,comment,1,hzy7aiv,,"No, I just tried to find one - not one. I scrolled through my timeline („start“) - nothing identified. 
But according to Google it exists even in Germany.",pihole,1646813891.0
8893,post,49,t9kkl7,PiHole with VPN,Can I install OpenVPN after installing PiHole? Every tutorial or guide does it before. And if yes can someone say how? I am new to this and i havent got this much experience,pihole,1646756743.0
8894,comment,37,hzus01a,,https://pivpn.io/,pihole,1646757352.0
8895,comment,17,hzusnn7,,"Install Pivpn and select WireGuard, much easier and better honestly",pihole,1646757596.0
8896,comment,7,hzurr18,,"Sure just follow the documentation

https://docs.pi-hole.net/guides/vpn/openvpn/setup-openvpn-server/",pihole,1646757257.0
8897,comment,5,hzvms3k,,"I think you have to install pi hole first, for the pivpn installer to detect it for its dns.
As above, I switched from open vpn to wireguard.. It's miles better.",pihole,1646768632.0
8898,comment,1,hzygl9u,,"Yes, and I would use Wireguard, not OpenVPN.  It seems to work much faster and better.",pihole,1646821758.0
8899,comment,19,hzut5lb,,"This is the way. 

PiVPN's install process will see that you have Pihole installed and update its DNS settings. You can install PiVPN with either OpenVPN or Wireguard protocols. 

(Connected to my PiVPN from Europe to the USA right now)",pihole,1646757779.0
8900,comment,1,hzx7iio,,i reinstalled pivpn to switch over to Wireguard but when I make my profiles it still makes .ovpn files,pihole,1646792915.0
8901,comment,0,hzvo0bz,,[deleted],pihole,1646769092.0
8902,comment,3,hzwevct,,"This is what I do as well. I didn't used to have the VPN aspect installed, but my cheap-ass SD card shit the bed a year ago or so, and so I went this route instead. Using Wireguard, I have whole-phone adblocking no matter where I am. Plus, I always know when PiHole is having issues, even if I'm not at home!",pihole,1646780130.0
8903,comment,2,hzvoj8o,,"I have the same speed as if I just open a port to my media files. It's completely transparent, with the added security of only one udp open port on my router.",pihole,1646769291.0
8904,post,1,t9ivvx,500 Internal Server Error,"It happened already twice today, I try to reach the dashboard and I get ""500 Internal Server Error""; I can ping the raspberry but SSH does not work.

I am using lighttpd.

Here the logs:

[https://tricorder.pi-hole.net/pww0kkKy/](https://tricorder.pi-hole.net/pww0kkKy/)

Any ideas?",pihole,1646752250.0
8905,comment,1,hzw018b,,"       2022-03-08 13:20:47: mod_fastcgi.c.487) FastCGI-stderr:PHP Warning:  SQLite3Stmt::execute(): Unable to execute statement: database disk image is malformed in /var/www/html/admin/api_db.php on line 335

Your query database appears to be malformed.  Use these commands to store the current database and make a fresh database.

    sudo service pihole-FTL stop
    sudo mv /etc/pihole/pihole-FTL.db /etc/pihole/pihole-FTL-old.db
    sudo service pihole-FTL start",pihole,1646773636.0
8906,post,6,t9hsyr,PiHole Cloudflared Installation and Set Up,"PiHole is setup and working great! Currently installing Cloudflared on PiHole running on DietPi v8.2.2 on a Rasp Pi 3 Model B. Router is still configured to act as DHCP server. 

Trying to Install CloudFlared armhf architecture (32-bit Raspberry Pi)

&#x200B;

Following this [guide](https://docs.pi-hole.net/guides/dns/cloudflared/) here until this step:

sudo cloudflared service install --legacy

&#x200B;

Which gives the following message with [screenshot](https://imgur.com/8pypA5Y):

 Incorrect Usage: flag provided but not defined: -legacy

&#x200B;

Is there any reason why the Cloudflared service install cannot be flagged as legacy?

&#x200B;

Thank you!",pihole,1646749168.0
8907,comment,3,hzu9o1r,,Does DietPi have a Cloudflared installer in DietPi-config?,pihole,1646749875.0
8908,comment,1,hzua82f,,I do not see anything like that,pihole,1646750118.0
8909,comment,1,i1vzw3p,,I ran into this same issue on DietPi. I ended up doing the manual way instead of the automated way that you're doing. No issue that way,pihole,1648093144.0
8910,post,5,t9hdob,Explicit approval before responding to DHCP requests?,"I am using PiHole as my DHCP server for my home LAN. I want to lockdown the LAN. I do not expect any new devices so I would like a high-security workflow that would be stupid in a normal production environment.

When a new device makes a DHCP Client request to the PiHole DHCP server, I would like to be contacted. I do not want an IP Address assigned to the new device until I, the Admin, explicitly approve the request. Is there a way to do that?",pihole,1646747903.0
8911,comment,9,hzu6m09,,Why not just turn off DHCP and use static addressing? You could also set up VLANs with a trusted and untrusted network. You can isolate the untrusted systems from other devices and the internet.,pihole,1646748484.0
8912,comment,5,hzu8rpe,,"This is not something you can do with Pi-hole. 

On many routers, you can exclude all except clients for which you have entered the MAC ID. That may be your best option.

You can also turn off SSID broadcast, so clients won't see the network as available until you provide them the credentials.",pihole,1646749472.0
8913,comment,2,hzuhthq,,This is less of a dhcp issue and more of a zero trust networking issue.,pihole,1646753358.0
8914,comment,1,hzuii74,,"You could check out Pi.Alert. I used it for awhile before getting annoyed with the bugs (I didn’t have Pi-Hole doing my DHCP which reduced its accuracy). It doesn’t seem to be maintained anymore though. 

https://github.com/pucherot/Pi.Alert",pihole,1646753641.0
8915,comment,1,hzwp7as,,Thats not the way to do it. Use MAC based allow list for your WiFi. I would be able to assign myself a IP using your method,pihole,1646784652.0
8916,comment,0,hzub12p,,"I know that I have an unusual use case. I am always home so an Admin is always present. If someone or something is trying to connect to my network then I want to know. If I just use static addresses then a new static address would just blend in.

Sure, a device could just show up with a static address anyway even if I have alerting on DHCP requests - but at least it would be something.

Also, if I move to static addressing then I lose all the convenience and automation while adding to my manual Admin workload.",pihole,1646750472.0
8917,comment,1,hzubmos,,"OK, thanks.

If I can't get ""in front"" of the request then I wonder if I can follow it closely. Maybe there is an opportunity for scripting. Trigger a script on DHCP request or have a Cron job that checks for new assignments. I might look into Home Assistant integration. Having an alert go out via SMS or to the Home Assistant app might be good enough.",pihole,1646750731.0
8918,comment,1,hzuhxme,,True. I have rethought my approach.,pihole,1646753406.0
8919,comment,2,hzubiaz,,Do you have MAC address filtering enabled?,pihole,1646750679.0
8920,comment,2,hzucezg,,"If you don't expect any new devices, turn off SSID broadcast.",pihole,1646751066.0
8921,comment,1,hzunm0h,,"This looks like it might be similar to what youre trying to do

https://serverfault.com/questions/550653/windows-dhcp-server-get-notification-when-a-non-ad-joined-device-gets-an-ip-ad",pihole,1646755673.0
8922,comment,1,hzudfl0,,"No - same issue. If I fire up a new VM on the ProxMox server then I want it to just work. I'm too lazy to force myself to manually add each MAC to the whitelist.

But you make a good point. I could turn it on and find a way to automate the adding of the MAC address.",pihole,1646751495.0
8923,comment,0,hzudmo3,,"That would help give me obscurity ... but not much security. Still, it would reduce my attack surface.",pihole,1646751578.0
8924,comment,4,hzueqdb,,"DHCP and IP addressing isn't going to add security. When a device connects to the network (wifi or ethernet) if it isn't given an IP through DHCP it reverts to an APIPA address. So really, what you are trying to do is stop systems from connecting, or isolate them when they do. 

Also keep in mind, if an attack system does enter your network it doesn't need an IP to do monitoring and network fingerprinting. It may never send any packets.",pihole,1646752039.0
8925,comment,1,hzugcmq,,"True ... I guess it really depends how far down the rabbit hole I am willing to go. 

I should take a step back to redo my threat model. I don't want to add significant overhead each time I fire up a new VM, add a Pi, etc. When I am in flow, don't disrupt it. Having just typed that, adding a step to force myself to approve each device doesn't work.

Let me rethink and form Plan B. My thoughts are now going towards monitoring and alerting. Instead of adding manual breaks into the normal networking workflow or adding more technology into the network stack (that I honestly just want to work without fiddling), I should watch the traffic and alert on deviations from the known good baseline. Yep - whole new thought process growing now.

Sorry, everyone. Thank you for your time and input. I will come at this from the monitoring angle.",pihole,1646752770.0
8926,comment,1,hzugd20,,"True ... I guess it really depends how far down the rabbit hole I am willing to go. 

I should take a step back to redo my threat model. I don't want to add significant overhead each time I fire up a new VM, add a Pi, etc. When I am in flow, don't disrupt it. Having just typed that, adding a step to force myself to approve each device doesn't work.

Let me rethink and form Plan B. My thoughts are now going towards monitoring and alerting. Instead of adding manual breaks into the normal networking workflow or adding more technology into the network stack (that I honestly just want to work without fiddling), I should watch the traffic and alert on deviations from the known good baseline. Yep - whole new thought process growing now.

Sorry, everyone. Thank you for your time and input. I will come at this from the monitoring angle.",pihole,1646752783.0
8927,post,5,t9g7hz,Both my piholes have stopped working...,"Apparently apropros of nothing, both of my piholes have suddenly failed. Both show ""DNS service not running"". Neither comes up again after a cold reboot.

FTL won't start on either, filling the log with:

    [2022-03-08 12:53:34.880 2956M] Resizing ""FTL-queries"" from 596180992 to (13553664 * 44) == 596361216 (/dev/shm: 597.3MB used, 981.6MB total, FTL uses 597.3MB)
    [2022-03-08 12:53:35.018 2956M] Resizing ""FTL-queries"" from 596361216 to (13557760 * 44) == 596541440 (/dev/shm: 597.4MB used, 981.6MB total, FTL uses 597.4MB)

So, what's suddenly gone wrong *on both of my pi's*?!

EDIT: Debug token:  QhSG43ua

EDIT2: FIXED by deleting the long-term data and restarting. But in my mind, not SOLVED as pihole should handling something like that more gracefully, imo.",pihole,1646744121.0
8928,comment,2,hzu6ewh,,"Just from looking at the size of /dev/shm, I would start by making sure you're not running out of memory.   On my 2 year old raspberry-pi-4-b pihole, with around 60 clients, my log looks like:

    [2022-03-08 04:46:29.118 602M] Resizing ""FTL-domains"" from 487424 
    to (30720 * 16) == 491520 (/dev/shm: 7.5MB used, 449.5MB total, 
    FTL uses 7.5MB)

and that's the only line in the log.  I don't have any for FTL-queries.

And my gravity.db is 7MB, while my pihole-FTL is 778MB.  (both in /etc/pihole)

Is there anything useful from systemctl?

    systemctl status pihole-FTL

or

    journalctl -x -u pihole-FTL

Even if it's failing, there will often be a reason.",pihole,1646748390.0
8929,comment,1,hzu3y7e,,"Not an expert by any means but I remember seeing something about this in another thread. Memory is full?  The other person had turned on conditional forwarding and it was causing some kind of loop filling the database.  Have you made any changes anywhere else on your network?  Changed any router settings?  New devices?  To me, this doesnt seem like a pihole issue, but pihole being affected by something else...especially if both of them broke at the same time. Again, not an expert.",pihole,1646747188.0
8930,comment,3,hzu8u86,,"So yes, last night I did alter the Internet DNS settings on my router, to remove Cloudflare from there for ""tidiness' sake"". When the issues started today I reverted that (always good practise when trouble-shooting) but the damage was already done to the piholes.

Finding [this](https://discourse.pi-hole.net/t/resizing-ftl-queries-heavy-cpu-load-lost-connection-to-api/20516/22) and then [this](https://discourse.pi-hole.net/t/how-to-clear-all-logs-including-long-term-data/39514), I appear to have resurrected them by, effectively, deleting all the long term logs.

So yes, a misconfiguration (and I guess one that's warned against on piholes DNS page, with the dangers of a DNS loop when using Conditional Forwarding - had I understood exactly what I was doing!) but I'd hope that pihole could recover from such a thing more gracefully than it did.

Thanks for yours (and u/gruntbuggly's - who was on the right track too) help.",pihole,1646749505.0
8931,comment,1,hzuk0f1,,Glad to hear you got it solved.,pihole,1646754249.0
8932,post,37,t9foho,Assign Groups based on IP adresses?,"Hi there,  
I'm trying to assign PiHole Groups to devices automatically based on their IP Adress for my default and guest network.

Is that possible and if yes, how?

Thank you all in advance!",pihole,1646742234.0
8933,comment,7,hztxauu,,"You could use CIDR notation, whats your main network and guest network?

For example, my main network is 192.168.1.x and guest network is 192.168.2.x, their CIDR is 192.168.1.0/24 and 192.168.2.0/24 respectively.",pihole,1646743601.0
8934,comment,2,hzvnmxj,,Is this because some devices you have aren't working properly while pointing to pihole? Thanks,pihole,1646768952.0
8935,comment,2,hzu5xo5,,"Group management -> clients. Then enter the respective subnets in [CIDR](https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing) format.

You can figure out this by joining the respective networks, then checking the network mask (e.g. in windows by using ipconfig) and the IP address. IP address of 192.168.1.15 + a network mask of 255.255.255.0 == CIDR format [192.168.1.0/24](https://192.168.1.0/24).

You can also use a ""CIDR calculator"" if you're uncertain.",pihole,1646748158.0
8936,comment,0,hzu0daj,,"How do I implement that into Pi-Hole with my usecase?

Mine will probably also be something around those lines.Why does that matter tho?",pihole,1646745321.0
8937,comment,1,hzvtd0r,,"Hi,
no, this is so I can have specific blocklists on a specific group/type on devices",pihole,1646771130.0
8938,comment,1,hzuav4j,,"Very nice, thank you very much!",pihole,1646750400.0
8939,comment,4,hzu129x,,I am asking that for more info to guide you.,pihole,1646745696.0
8940,comment,2,hzvxulw,,"Oh like parental control or something? 

I edited my windows domain DNS forwarder to point all traffic to pihole and similarly my routers points all traffic to the same local.pihole

Help me understand the benefits, I know my brute force method was just to get it up and running but it can be done better.",pihole,1646772817.0
8941,comment,1,hzub4np,,"Oh, you wanted to give me the exact string I had to enter.

That's very nice!

So assuming my networks were [192.168.3.0/24](https://192.168.3.0/24) and [192.168.178.0/24](https://192.168.178.0/24), I'd just enter that, correct?",pihole,1646750516.0
8942,comment,1,hzwny56,,"Hi, (slr) 
no, it's so I can block specific services or ads on specific devices. Eg. Blocking Microsoft Telemetry on my private PC but not on the work machine.
Or blocking Xiaomi domains on my Smart TV (which is from xiaomi) but not on my laptop, where I'd probably like to access their content.

Or to have my special settings for my guests, to not interfere with their browsing experience. 

Hope this helps!",pihole,1646784087.0
8943,comment,2,hzugfwk,,"Correct :)

*obligatory: not him*",pihole,1646752801.0
8944,comment,2,hzuk8g7,,"I think so. But I havent actually tried that so I cannot confirm you. Then select prefered groups. For example, the 178 one is guest and the other is main network, so you could select group ""default"" for main and select none of the groups for guest, then guest wont have anything blocked. I suggest you add comments on what the groups are for better tracking later.",pihole,1646754338.0
8945,comment,1,hzx16yt,,"It does, I think I'm severely under using pihole as it blocks 20% of request, it's working but on the tough sites overlays pop ups still attack. 

I know pihole is more for advertisement I'm just not sure what else to find tune to lock it down more.

I'll explore the group, thanks for your belp",pihole,1646790089.0
8946,comment,1,hzy4x6f,,"I too have a Xiaomi TV. Did you see DNS spams fron it? Blocking the domain would cause the ""querying until death"" behaviour, so I blocked it using parent control on the router instead.

If you only need to do that for spectific device, just enter the IP, and give it a static IP.",pihole,1646812004.0
8947,comment,1,hzxvvrm,,"So if you need more blocklists have a look at this: https://pypi.org/project/pihole5-list-tool/ and honestly, you can just Google pihole blocklist and there's enough, and will come up.
Also are you using pihole with unbound? If no I recommend it",pihole,1646805569.0
8948,comment,1,hzya3py,,"Hi,
no, not really spams, but the advertisements are getting on my nerves.
Thanks for the advice!",pihole,1646816243.0
8949,comment,1,hzy8rzp,,Yes I'm using pihole with unbound from get. Where I do like the additional block list I'm starting to think pihole won't do what Im looking for .. looking for it to be end all be all solution for negative thing on the internet,pihole,1646815136.0
8950,comment,1,hzya093,,"Idk what you mean by that exactly, but pihole does have malware block lists or maybe have a look into pfsense",pihole,1646816159.0
8951,comment,1,hzyqkr3,,"I understand, but can it help against malicious overlays and the heavier forms of spam seen on some sites. It appears to me pihole is great at blocking most advertisement but when it comes to blocking all pop ups, and overlays that's not what it does.",pihole,1646829057.0
8952,post,1,t97bv6,opnsense + pihole DNSSEC not resolving local DNS help,"I have hit a wall trying to get this working correctly and it could be that i am not understanding something fully. How I have my set up is mostly what is detailed here, [https://pi-hole.net/blog/2021/09/30/pi-hole-and-opnsense/#page-content](https://pi-hole.net/blog/2021/09/30/pi-hole-and-opnsense/#page-content), but i also bring unbound on the opnsense into the fold. So the current why I have it setup so it can still resolve local DNS request are client -> DNSmasq DNS (DNSSEC disabled) -> pihole (DNSSEC enabled) -> Unbound (DNSSEC enabled). The moment I turn on DNSSEC on the DNSmasq DNS, local DNS request fail. When its off they work. Why is that and how do I fix that or is it working already and I don't need DNSSEC turned on the DNSmasq DNS. I just during my best to make sure I have configured it all correctly correctly.",pihole,1646709836.0
8953,post,2,t93cz2,Pihole vpn outside lab,How to easily use pihole as DNS when on the go (like on 5g) - works great at home but not sure where to begin when on cell or if there’s any similar paid service,pihole,1646697640.0
8954,comment,2,hzs4pbd,,"https://docs.pi-hole.net/guides/vpn/wireguard/overview/

https://docs.pi-hole.net/openvpn/overview/",pihole,1646702608.0
8955,comment,1,hzrwbei,,"You basically have 2 options:  
  
Create firewall rules forwarding DNS port from your home external IP to the local IP of the pihole - IE if you manually set your phone to use your home IP as DNS that should work)  
  
\^ I personally wouldn't do this because it's a potential security vulnerability, plus if your like me your public IP at home changes at least once or twice a year and that would require changing it from each device every so often (not that big a deal but the security part is unless you are very careful with how you set up your network).  
  
2) https://www.rahulgaitonde.org/blog/2020/10/09/running-pi-hole-on-google-cloud-for-0/  
  
\^ I honestly have not tried this yet but have seen it work as a cloud instance; I just haven't confirmed whether or not the compute required for pihole would truly fall under the ""free tier"" usage for Google Cloud. Google may not be the best platform but between one of them you should be able to set this up for either free or less than a few bucks a month... Just don't share it with your friends or it could multuply in cost lol  
  
\*I'll try that link sometime soon and follow up in this thread whether or not that article is exaggerating\*",pihole,1646698752.0
8956,comment,0,hzt37a6,,"Since you already run the device at home, it really is worth taking just a little bit of time to learn how to port forward in your router via one firewall rule. If you have already been in the settings to change the DNS in your router to point to the pi hole, you are well on your way to being able to change the firewall rules.

As has been pointed out, the main issue is if your external IP address, assigned by your isp, changes, then you'll have to update your Pi VPN settings. 

All you need to do is create one firewall rule that tells the router that any incoming requests on the VPN to be forwarded to the pi hole internal IP address. 

If you have successfully set up pie hole, you can easily set up pi vpn. Give it a try, just as an experiment and it will walk you through almost the entire process. If you don't like it, just delete it.

I live in the USA and I'm in Europe right now. Connecting to my pi hole via wire guard protocol is nearly instantaneous and works great, especially for a lot of the applications that are geoblocked.",pihole,1646720504.0
8957,comment,1,hzsjzth,,Much thanks sir I did see that but have had issues with open vpn in the past and this looks like something where I’d host it from my house. I’m not against it but if it’s very cheap to host in cloud like others mentioned that seems ideal. Do you think it’s unrealistic for me to exceed GCP’s free tier of resource usage? At least 70% I surf is on wifi at home,pihole,1646709676.0
8958,comment,2,hzs1j7d,,"Perfect! Thx so much for the info

Will prob go with the second due to limited firewall skills. Cheers!",pihole,1646701153.0
8959,comment,2,hzsonf8,,"You already have the device at home, which you can essentially run for free. If you are wary of OpenVPN, choose the Wireguard software.",pihole,1646711961.0
8960,post,51,t92ewe,Just wanted to share my aggressive Regex for Roku,"I have modified Regex I've found online to what I have today. 

`(ads|captive|cloudservices|logs|sr|cs|web|api)\.roku(.admeasurement)*\.com$`

This is like I said, ""aggressive"". I've found that I am unable to move apps, use remote voice search, and of course... block ads within the interface. Which is perfect for me with young kids who like to click on things they should not. Others might enjoy as well.",pihole,1646694900.0
8961,comment,4,hzu2e7y,,"Here's mine:

    (ads|logs|cloudservices|image|images|web|prod.mobile|wwwimg|captive|customer-feedbacks|amoeba|amoeba2|sr|giga.sb).roku(.admeasurement)*.com$    


This will get you through the setup and let you install apps and updates, but you can't change wallpapers.",pihole,1646746398.0
8962,comment,4,hzrzx9t,,Can you add an app or do you need to disable pihole to do that?,pihole,1646700403.0
8963,comment,2,hztzwe2,,Gonna give this a run :),pihole,1646745063.0
8964,comment,1,hzu3oyp,,"Nice. Thanks for sharing.

I haven't tried to figure out what broke the app movement stuff. Comparing ours at a glance it might be ""web"" or ""cs"".",pihole,1646747057.0
8965,comment,1,i322iq9,,"I tried this rule, but the icons for my installed apps go grey - any suggestions?",pihole,1648862465.0
8966,comment,5,hzsah54,,"Correct, you would need to disable pihole or the regex to install an app.",pihole,1646705274.0
8967,comment,3,hzu471o,,"Pretty sure it's ""cs"" and ""api"".

I got this regex through painstaking trial and error and looking at all the traffic in realtime with Ettercap + Wireshark.",pihole,1646747310.0
8968,comment,1,i326cqm,,"remove either images or image


it's one of those",pihole,1648864419.0
8969,comment,1,hzsr4a2,,"If you have a PiHole remote app on your phone, you can easily disable the Pi for 5 minutes or so.",pihole,1646713232.0
8970,comment,1,hzu5crp,,"Oh good to know, ""api"" it's so obvious. Thanks again for that. Currently I'm happy with the kids not being able to mess with the interface, happy accident. I'll remove the ones you mentioned when they grow up a bit.",pihole,1646747877.0
8971,comment,1,hzt49w7,,Which app do you use? I'm trying to find one that is wife-friendly and not geek-friendly so my wife and easily disable the Pihole temporarily if need be.,pihole,1646721249.0
8972,comment,1,hzt4m44,,"I‘m using PiHole Remote:

https://apps.apple.com/de/app/pi-hole-remote/id1515445551

It‘s as simple as it gets. There is a Deactivate button and it comes up with a timer option. Power users can also look at blocking statistics etc.",pihole,1646721484.0
8973,comment,2,hztqq0m,,"is the web interface on mobile not good enough for that? just out of curiosity, i’m not judging",pihole,1646739340.0
8974,comment,2,hztqua7,,"This is easier for me than using a Safari bookmark, and having to login etc. yes.",pihole,1646739424.0
8975,comment,2,hzu0dyw,,"From your local network, you can use a direct api link to disable pihole. 

http://PIHOLE_URL_HERE/admin/api.php?disable=300&auth=API_KEY_HERE

The disable=300 disables it for 300 seconds. You can change it any value you like.

You still have to click a link but no login is required.

Not saying it's a better approach, just an alternative.",pihole,1646745332.0
8976,post,31,t8z1wq,"DHCP, piHole and Static IPs","I recently set up a piHole on a pi Zero W and so far so good.  I was surprised by the 100k+ thousands of queries in less than a day so I tried to track them down. Of course my Dashboard only showed ""[www.routerlogin.com](https://www.routerlogin.com)"" which I assumed was everything filtering through the router so I poked around and discovered that I could let my piHole handle the DHCP duties and then it can break things down by each client. Okay, looks good, now...  


1. I have two static IPs set on the router for a NAS and Home Assistant (three if you count the piHole). Will the router still successfully manage those static IPs now that the piHole has picked up DHCP duties? I would think it has to because how else would you have a static IP for the piHole.
2. I saw a post where someone indicated they didn't want their piHole managing DHCP because if it failed they wouldn't be able to connect to the network. Is this really a concern? If so can it be mitigated?",pihole,1646686039.0
8977,comment,3,hzr4391,,"Hi! Quick answers:
1. You ONLY one one DHCP in a network. If you did not turn it off in your router, then turn it off in PiHole. You can still reach the goal with seeing logs from each host. What you should do is make a setting in your router to distribute the IP Do the PiHole for DNS. 
2. Yes it is a concern. But also you already have that disadvantage since you also need DNS for being able to use Internet properly, and if you only rely on one Pihole for that then it is a single point of failure anyway. My recommendation is to use the router DHCP. What you could do to mitigate SPOF is to use two Piholes for DNS. I would not bother until you are more familiar with networking anyway. One is fine while learning. And you will always have a SPOF since the router is only one. 

Good that you explore and reach out for learning even more. Good for you. Cheers.",pihole,1646687193.0
8978,comment,3,hzrhyuw,,"I do use DHCP server functionality in pi-hole.  The primary reason is local name resolution, but also with pi-hole I have all my configs defined, setup in one place, without having to manually configure via my router via a web browser.

1. All my configs are replicated in Git, so if I make a change and it fails (could happen :). I can just kill the docker container, restore my pi-hole config files and recreate the docker container.  This is much more of a pain with commercial web interfaces available in the routers.
2. If I get a new router (happens) or I want to change my network config, I can easily edit the text files and restart pi-hole (actually I restart the docker container).
3. All ""important"" nodes have static addresses in DHCP. As long as DNS is available via one of the 2 pi-holes I have, everything is cool  I can just turn off DHCP on the client (I actually have a different network profile set for this on my main machine).
4. My secondary pi-hole can act as a backup DHCP server (not hot-standby of course).  If something should happen to the primary (never has) I can easily bring up DHCP on the secondary with the same config files.

None of this solves the single point of failure problem, but it makes it so much easier and faster to recover from a failure.",pihole,1646692545.0
8979,comment,3,hzs9m3p,,"Unless your router is trash, you can configure its DHCP leases to include the Raspberry as DNS server. All your devices will then send their queries directly to the Raspberry and Pi-hole will acknowledge them as clients.

If you then set up Conditional Forwarding in Pi-hole's settings, it will even be able to resolve your devices' names.",pihole,1646704880.0
8980,comment,2,hzsf7gl,,"It's *easier* to have the (local) DNS and the local DHCP server cooperating directly on the same box.  Getting your router to forward to your internal pi-hole works but it is much better to do what u/seromaho suggested; have the router DHCP server tell clients to use the pi-hole directly, not the router.

I use the pi-hole machine as both the local DHCP server and the local DNS source.  I find it much easier than having to mess with two different machines but it depends on how good the router UI is; if it works and you like it why change?

Static addresses are just that; the machine with the static address doesn't rely on anything else so each machine with a static IP has to also be configured with the correct DNS server to use.  I find this a PITA so I don't do it - everything uses DHCP.  When I want a fixed address (necessary for some things) I program the DHCP server to deliver a fixed address for the machine (based on its ethernet hardware address).  You may prefer just to use static addresses, they avoid issues with bootstrapping the system after a power failure, it just means you have to maintain the DNS server and, perhaps, other information on each machine.",pihole,1646707438.0
8981,comment,3,hzr3g7h,,"There are different ways to think about it.  If your router fails you cannot get to the internet.  In my case, I block all out bound DNS so if PiHole or the router fails no internet.

I let my firewall do DHCP, I point my PiHoles (2) at the FW for local resolution so I get name resolution in the logs.  For non-local DNS requests PiHole goes to the internet for the address.",pihole,1646686955.0
8982,comment,1,hzrc1vk,,"DHCP is for assigning IP addresses to devices that request it. Machines that have static IPs don't request it. On the other hand, PiHole has the option to assign static leases, where it always gives the same device the same IP address.

I would recommend using static IPs for your router and your Pi-Hole. Then, if your Pi-Hole goes down you can always connect to your router to change the settings. That said, I have had a Pi-Hole running for years and it has never gone down. I use DHCP on the Pi-Hole (not the router) because I can customize it and because the management on my router is slow and awful, while Pi-Hole is fast, decent interface, and has a command line.",pihole,1646690220.0
8983,comment,1,hzrd0cs,,"I had this same problem of every DNS query showing up as my router. My router happens to be running Fresh Tomato firmware, and I found this solution.

[https://www.reddit.com/r/TomatoFTW/comments/hkutfa/comment/fwyhw6y/?utm\_source=share&utm\_medium=web2x&context=3](https://www.reddit.com/r/TomatoFTW/comments/hkutfa/comment/fwyhw6y/?utm_source=share&utm_medium=web2x&context=3)

Since you aren't running the same router firmware, the solution won't be 1-1. However, the concept is the same. You ultimately need to tell the devices to use your pi-hole for DNS and each router is different and some don't ""just work"" by making your local Pi-hole IP the default DNS.",pihole,1646690592.0
8984,comment,1,hzs37zy,,"for the static IPs, just setup the DHCP server to start assigning in a specific range of IPs, say .100 and up  
Then assign static IPs below .100",pihole,1646701926.0
8985,comment,1,i0c4aid,,"Thanks everyone for the responses.  Through setting this up I've been reminded of things I'd known(and forgotten) and learned quite a few new things.  I had forgotten that clients can set their own static IP which eliminates one of my concerns. Duh! I had a couple static IPs designated by my router and it had been so long since I set it up it completely slipped my mind.

Some things I learned (I think).

1. I was unsure at first what would happen to static IPs set by the router when I turned off DHCP on the router.  I mean, static IPs are the OPPOSITE of dynamic IPs right? Well it appears that turning off DHCP does mean(at least on my network) that the static IPs set by the router are ignored.  The piHole took over all that when I turned on it's DHCP handling.
2. Once the pihole controls DCHP I can get the client names **as defined by the client**.  You can't override this UNLESS you give the client a static IP. Then you can give it a name override. Not worth it to me. It's silly to define everything as static.  I was hoping if I did this and then removed the static designation, the new name would persist, but eventually it would revert back. Oh well, I can live with this.
3. PiHole was nicer than my router in that I can more easily define static IPs. My Netgear router only lets me define static IPs within the DHCP pool which seems backwards.  So I have to define the pool to everything, add the static Ips and then adjust the pool again so the static IPs are outside of it.  Weird.
4. Windows 10 sends a LOT of queries.  Day-um.  Like 10x every other device on the network.
5. Pihole was fairly easy to set up with OpenDNS. I initially just redirected to the FamilySheld DNS servers, but that turned out to block my VPN so I had to set up a custom OpenDNS account to block the rest of the computers on the network . Then I had to learn dnsmasq to force safesearch on the clients and because i have a dynamic IP(I think) I had to set up a ddclient service to make sure OpenDNS knows my current IP.  I'm pretty impressed with everything I was able to do on one $10 computer.

Now I just have to document all this crap so I remember how to fix it in six months!  :D",pihole,1647062180.0
8986,comment,2,hzsz925,,"I don’t understand the logic of two Pi-holes to mitigate single point of failure, but there’s still one gateway on the network",pihole,1646717911.0
8987,comment,1,hzzoklm,,"Theres a lot in here I'll probably sit down and unpack later.  I have a passing understanding of the configs in piHole but not enough to know what to back up. This is going on my list of things to understand better.  I think this will tie in with my current goal of using pihole to force safe search on google, bing, youtube, etc.  I know this involves \*.conf updates of one kind or another.",pihole,1646844459.0
8988,comment,1,hzzmya6,,"I tried Conditional Forwarding and it started bundling everything under my router again so it doesn't seem to work as advertised.  I still have it set up this way to see what it does, but I'll probably switch back.",pihole,1646843838.0
8989,comment,2,hzr8i80,,"I'm not worried about the internet, I just want to know that if my pi fails, I can still connect to the router to turn DHCP back on in the router.  But if the router's DHCP is disabled, and the piHole isn't around to assign an IP, how do I connect to the local network to re-enable the router's DHCP? It seems like it has to work, I just don't understand what that fall back mechanism is.",pihole,1646688862.0
8990,comment,2,i01e97i,,"Maybe we misunderstood eachother? Maybe you combined some network configurations in a non-ideal way? Here's how it's supposed to work:

Conditional Forwarding is not what will make Pi-hole recognize your devices as clients. To achieve that, you have to make your router (meaning its DHCP server) include the Raspberry as DNS server in its DHCP leases, as I already mentioned. (Alternatively you could configure each individual device to use the Raspberry as DNS server.)

Once that is done and the Raspberry is the default DNS server in your network, Pi-hole will list all of your devices as clients, but will only know their local IP addresses, not their hostnames. And that's when you enable Conditional Forwarding in Pi-hole's settings, so that it can get your devices' names from your local DHCP server (your router).",pihole,1646868619.0
8991,comment,2,hzrjip0,,"If the router has a static IP, it will be available if the Pi fails. You may have to set a static IP on whatever device you'll be working on in order to connect to the router if the IP is expired and can't get a new one from the Pi.",pihole,1646693172.0
8992,comment,2,hzu96bd,,"Your router (Default route) will be static and known.  Normally .1  If needed set a static IP on your PC and connect to the router and do what is needed.

There are ways to HA the PiHoles or use 2 DHCP servers.  Those will complicate your life.  In my experience PiHole has lower up-time than my FW (pfSense) so I left DHCP on the FW.  I run 2 PiHoles (not HA) and have had one down for days before I noticed.  There are many ways to set it up, just be sure you have a backup plan.",pihole,1646749654.0
8993,comment,1,i02gtjs,,"Okay I think I did misunderstand.  What I'm probably still not getting is what you mean by ""Include the Raspberry as DNS server in its DHCP leases.""  Is this a step somehow distinct from telling your router to to use the Pi-hole as the DNS server? I've read elsewhere that some routers will let you add an additional DNS server that it will then point clients to directly, but some routers always insert themselves in between the client and the defined DNS which leads the Pi-Hole to not knowing what's on the client side of the router. Is this what you are referring to?",pihole,1646886525.0
8994,comment,1,hzzo1mv,,"I was so used to setting the static IP with the router I had forgotten the client can set it's own static IP.  This means the problem I was worried about shouldn't actually be a problem.  I should always be able to connect to the router if I need to.  

I set up my PiHole as the DHCP and it was working fine. THe only thing I don't like about it is you can't map the clients by MAC address, just IP address.  This make no sense to me.  People online are suggesting you just set static IPs and then name all the devices like this is a perfectly acceptable thing to do.  Uhm no. Even my crappy Netgear router recognizes devices as they move addresses.  I'll prob stick with pihole as DHCP though because I can still go to my regular router to check the current clients and IPs and this setup lets me see which devices are sending the most queries.",pihole,1646844259.0
8995,comment,2,i02zmwl,,"Yes, this is what I'm referring to.

Your DHCP server tells your local devices what DNS server they should use. By default the typical ""all-in-one home router"" will use itself as the DNS server of your local network. It will receive the DNS queries of your devices and send them to the ""real"" DNS server (for example Google's 8.8.8.8); but as far as your local devices are concerned, the router itself is the DNS server.

When you tell your router to use your Raspberry as DNS server, then the Raspberry will replace the ""real"" DNS server (from the perspective of your router), but the rest stays the same: your devices use your router as DNS server, your router uses your Raspberry as DNS server, your Raspberry uses the ""real"" DNS server.

What you want is that your devices stop using your router as DNS server. So you can't just change the DNS server of your router; you have to tell your router (meaning your DHCP server) that it should tell your devices to use your Raspberry as DNS server. So you have to change the DHCP leases that your router sends to your devices to have your Raspberry be used as DNS server.

Should your router not support these kind of changes, you can try to configure each of your devices to use the Raspberry as DNS server, or you can get a new router.",pihole,1646898853.0
8996,comment,2,i0c2p3n,,Thanks! I appreciate you confirming.  I think I actually have it working now. :),pihole,1647061212.0
8997,post,10,t8ucn7,Pi-hole only shows localhost as client + error,"&#x200B;

Hello,

I installed Pi-Hole on a Raspberry Pi running docker, but unfortunately, I only see localhost in the admin-panel; [https://i.imgur.com/Nwsq692.png](https://i.imgur.com/Nwsq692.png)

I set the DNS to my pi's IP in my router settings.

Pihole container settings:

[https://i.imgur.com/hMTD1vF.png](https://i.imgur.com/hMTD1vF.png)

[https://i.imgur.com/UIGpJC7.png](https://i.imgur.com/UIGpJC7.png)

I also occasionally get this error: [https://i.imgur.com/T8s4IrJ.png](https://i.imgur.com/T8s4IrJ.png) it always only shows my PC's IP, never my phones or any other device in the house.

debug token:  [https://tricorder.pi-hole.net/BLeQi9PA](https://tricorder.pi-hole.net/BLeQi9PA)

&#x200B;

Any help would be greatly appreciated!",pihole,1646673852.0
8998,comment,3,hzqsnbn,,"I only see localhost in the admin-panel

Because all DNS request sends from all devices to router and then to your Pi-hole, so it becomes localhost. You need to change DHCP settings in router and write there in DNS field IP of your Rasp with PiHole.

Obviously all devices should recieve IP settings automatically.",pihole,1646682804.0
8999,comment,0,hzqcn4c,,Did you delete your first thread?,pihole,1646676641.0
9000,comment,1,hzqubxw,,I changed my router settings and when I check my phone it did get the DNS with the IP of my Raspberry PI,pihole,1646683465.0
9001,comment,1,hzqvnva,,"Check settings, DNS, Interface settings.
There you can select from where PiHole will react on DNS requests.",pihole,1646683990.0
9002,post,16,t8too3,"Pihole showing clients as ""_gateway"" or ""OpenWrt.lan"" only. Did I misconfigure somehow my OpenWrt router? Help!",,pihole,1646672145.0
9003,comment,3,hzqkp11,,"The term you are looking for is ""DHCP option 6"" You can set this in Luci or SSH terminal.

The first picture in this post on the openwrt forum has option 6 filled out with the IP ""[192.168.1.169](https://192.168.1.169)""

[https://forum.openwrt.org/t/dns-via-dhcp-wont-work-dhcp-option-6/59274](https://forum.openwrt.org/t/dns-via-dhcp-wont-work-dhcp-option-6/59274)

Here is how you do it in SSH

uci add\_list dhcp.lan.dhcp\_option=""6,172.16.60.64""  
uci commit dhcp  
/etc/init.d/dnsmasq restart

[https://forum.openwrt.org/t/dns-via-dhcp-wont-work-dhcp-option-6/59274](https://forum.openwrt.org/t/dns-via-dhcp-wont-work-dhcp-option-6/59274)

EDIT:I dont know wtf is wrog with copy paste in reddit, I had to re-edit this about 3 times to get it right.",pihole,1646679712.0
9004,comment,1,hzq1mbh,,"In the screenshot above there are two (maybe three) clients, but they only show up as _gateway or OpenWrt.lan.

I would like to see the IP addresses of the clients accessing the Pihole, but it looks like the requests are coming only from the gateway itself. The Pihole is blocking ads fine, though.

Maybe I need to configure something else in my OpenWrt router? Thanks!

The logs: https://tricorder.pi-hole.net/LvkdxjEU/",pihole,1646672405.0
9005,comment,2,hztw0j3,,"Yeah, copy-paste doesn't work for me either... have to switch to ""Markdown Mode"" to paste, then switch back to the ""Fancy Pants Editor"" to continue writing as normal using the fancy style buttons.",pihole,1646742836.0
9006,comment,1,hzqmmwa,,"If you want more than 1 server you need to comma separate the IP's

""6,172.16.60.64, 172.16.60.65""

I think you can only add about 6 not sure, Oh and IPv6 IP's are not added the same it looks similar but different.",pihole,1646680460.0
9007,comment,2,hzq3utf,,"Maybe your clients are still asking the router for dns and the router asks pihole.

Did you configure the DHCP server in your router to distribute the new DNS server to the cloents?

You can check within a client: what is its network setting regarding DNS?",pihole,1646673278.0
9008,post,18,t8ol86,Pihole up but not working?,"I’ve been using pihole for a few months now without issue - on my raspberry pi 4. Today morning I thought I’d download Docker to the same Pi, which worked successfully but I noticed that all ads started to reappear? Is there something I messed up or can do to fix this?",pihole,1646657704.0
9009,comment,3,hzp5lke,,"Basic todolist, while somebody more advanced can explain how to troubleshoot  

0) What ads? Are there from the platform itself? (Like Reddit)  
1) Do you see logs for those domains in Pihole? If yes,  Pihole doesn't work. If not, Pihole is working fine  
2) If there's no logs, your devices use another DNS resolver. Identify the DHCP server that gave its address.",pihole,1646657971.0
9010,comment,3,hzpeszw,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1646662798.0
9011,comment,1,hzrxqv9,,"I am guessing something messed up with ports when docker was installed. If you really want to try docker and pihole together there are a few ways to do it.

1. install docker then install a pihole container on it.
2. wipe your current raspberry pi and install dietpi on it. The dietpi installation can help you install pihole + unbound and docker without you having to fiddle to set everything up. They even have a tutorial to set it up. DM me if you require some help.",pihole,1646699399.0
9012,comment,2,hzp66q4,,"Thanks for the quick response -

1. For example, when on yahoo to check for ads, the banners are all back. Under “Query Log” nothing seems to be updating when on the yahoo page. 

I’ve got a Unifi dream machine pro which I’ve set to point to my pi for the DNS resolver.",pihole,1646658311.0
9013,comment,3,hzpj5te,,"Kinda panicked (internet access seemed to have dropped, required clearing dns entries on my router) and wiped the pi and reinstalled.. up and running again now.",pihole,1646664799.0
9014,comment,1,hztdi7t,,"Yeah it looks like that’s the problem. 

1. Might have to try that out - I did do a fresh install of pihole right after and it seems to be broken again this morning with no error logs so that’s thrown a spanner in the works. 
2. I’ll have a look at a few guides regarding dietpi and will definitely reach out if needed! Thanks.",pihole,1646728361.0
9015,comment,2,hzp8h3v,,"I don't really know Docker sorry  

>Under “Query Log” nothing seems to be updating when on the yahoo page. 

It seems your device doesn't use Pihole anymore... hmmm...  

>I’ve got a Unifi dream machine pro which I’ve set to point to my pi for the DNS resolver.  

I don't really know Unifi, sorry.  
I guess there's no way to do a nslookup/dig then, it would've given what is really used. I'm not sure your issue is really about Pihole, I wonder if because the change, Pihole was acting as DHCP and now doesn't...  

Stupid remark : did you try changing the settings on the device, and then re-enter Pihole as the DNS resolver?  
At work, one of our tools refused to reload some broken  settings unless we did a *change* instead of simply saving.  

My intuition is that Unifi switched to an emergency hardcoded resolver while Pihole was down for the update, and didn't notice Pihole is back online... but I have absolutely nothing to prove it.  
Or maybe, for some reason, Docker blocked port 53 so Unifi can't reach Pihole, and THEN uses an hardcoded resolver to load the domain. (If Pihole was totally unreachable, you wouldn't have access to the admin interface, that's why I think it's specific to the DNS port)  

*Also, remember that clients have cache. Even if you fix Pihole, it could take a while before previous devices stop loading the ads.*",pihole,1646659591.0
9016,comment,1,hzp7nyv,,"Im not a professional either, but every time i've had problems i've fixed it with a status check/update/re-install. 

Have you also verified that the dream machine still points to the pihole and not a secoundary dns? I have no idea how it is with unify, but for my system i had to manually block all Android devices not connecting to Google dns. 

[https://docs.pi-hole.net/core/pihole-command/](https://docs.pi-hole.net/core/pihole-command/)",pihole,1646659152.0
9017,comment,1,hzp7u0a,,"I mean, it was working completely fine all this time. As soon as I installed Docker to the same Pi - it broke.. 

I’ve tried updating etc - everything seems to be done and at the latest version it can be.",pihole,1646659243.0
9018,post,0,t8i2oc,Update....,"Ok,I finally got my phone to use Pihole but it's still not blocking ads. And in the section where it says ""Top Clients"" my phone is listed as blocked. ???????????????",pihole,1646631258.0
9019,comment,3,hzo6n9l,,"> And in the section where it says ""Top Clients"" my phone is listed as blocked.

That section shows the top clients with blocked domains, not blocked clients.

How do you know your phone is using Pi-hole?  Are you seeing queries from the phone in the Pi-hole query log and none are blocked?  From your OP, it appears there are blocked domains from the phone.",pihole,1646631657.0
9020,comment,2,hzpkhq4,,"Type in your pihole IP address into web browser. On the left it says Query log, click. Green was allowed, Red was blocked. Refresh the site ur looking at (on device) then refresh Query Log and see what was allowed and blocked. You can also force every device on your network to use pihole DNS by changing settings in your router.",pihole,1646665389.0
9021,comment,1,hzoai6m,,Sorry. I don't understand this at all. Very new. Could you explain it very simple so I can understand what to do? I've been working very hard on getting this going and it's been extremely tiring.,pihole,1646634249.0
9022,comment,1,hzogpmc,,Pihole does not block Youtube Ads (as far as I know). So ads thrown into a video stream by Youtube and other streaming servers do not come from a different source.,pihole,1646638842.0
9023,comment,1,i00fsvs,,"I think I may have finally figured out which PiHole items are being blocked and need to be whitelisted for Paramount Plus work.  The combo I identified via a Roku requires the following to be whitelisted:

doppler-reporting.cbsivideo.com

spoc-pool-gtm.norton.com

saa.cbsi.com

pubads.g.doubleclick.net

PiHole was certainly doing its job, as it is trying to block the ads, and Paramount is trying to show ads.  Allowing these through should hopefully work for you, as it did me.  I am pretty limited on what I whitelist, and went one-by-one to identify which links needed to be allowed.",pihole,1646855082.0
9024,comment,1,hzo75jq,,"So what does that mean,blocked domains? I'm extremely new at this stuff.  There are a bunch of queries in green with my phone listed and it says it's using Pihole and the queries are not blocked. But ads are still not blocked. Pls help.",pihole,1646631987.0
9025,comment,1,hzpmw0o,,Ok thanx,pihole,1646666434.0
9026,comment,2,hzodtmh,,Have you checked the query log? You can filter for your iphone in the search box top right.,pihole,1646636632.0
9027,comment,1,hzok60u,,I'm watching the terminal but it is doing nothing. How do I track ads on the phone with the terminal? And where do I find the list of these sites later in Pihole? Does it keep a record or do I save it and how do I save it ( the record)?,pihole,1646641620.0
9028,comment,0,hzoh4e7,,Really .....so I been banging my head on the wall trying to get it going for nothing? Especially Tubitv...their ads are annoying AF ...and I was thinking all I have to do is go thru the list and disable the ones I don't want ..jeeze ..,pihole,1646639166.0
9029,comment,1,i0195de,,Hmmmmm...ty for the suggestion...,pihole,1646866463.0
9030,comment,2,hzo8r9h,,"When a client requests a domain name resolution, Pi-hole first looks to see if it should block the domain by checking its gravity database.  If the domain is on the list to be blocked, Pi-hole blocks the domain and returns 0.0.0.0 to the client. 

If the domain is not in the list to be blocked, Pi-hole forwards the request to your designated upstream DNS server and returns the actual IP to the client. 

Use these tools to help determine the source of the ads:

https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522",pihole,1646633052.0
9031,comment,1,hzodyv3,,"No. Also it's an Android,not an iPhone. Where do I look for these ads? They said watch the ads in real time but what do I do then? So confused....",pihole,1646636742.0
9032,comment,1,hzoe9zh,,I'm looking at the terminal on the Pihole itself and looking at the ads on the phone. What am I doing wrong?,pihole,1646636979.0
9033,comment,1,hzoeijp,,The system keeps logging me out now....idk why ...,pihole,1646637164.0
9034,comment,1,hzok8f9,,O ok...cool,pihole,1646641674.0
9035,comment,2,hzok5r4,,">Really

Really. As covered in the fairly prominent [FAQ](https://www.reddit.com/r/pihole/comments/frum61/frequently_asked_questions) pinned in this very sub, that new users would ideally read before posting.

Pi-hole (and DNS in general) has no idea what content is, or what's behind a domain. If advertising, telemetry, pictures of kittens...whatever you want blocked, is coming from the same domain as content you *don't* want blocked, Pi-hole (or any other DNS filter) can either block it all, or allow it all. It's very binary. There's no middle ground.",pihole,1646641613.0
9036,comment,1,hzo8xsq,,Then what? How do I fix it?,pihole,1646633174.0
9037,comment,1,hzokhc8,,">and returns 0.0.0.0 to the client.

Since we seem to like to occasionally check each other, it's probably worth clarifying that this is a configurable option.",pihole,1646641881.0
9038,comment,1,hzokbak,,Ok......,pihole,1646641740.0
9039,comment,2,hzoa7pa,,"If you are getting ads you want blocked and the client in question is using your pihole, use the guide provided and adjust your block list.",pihole,1646634049.0
9040,comment,2,hzpalia,,"Since the OP is ""extremely new at this stuff,"" I'm confident they haven't changed this.",pihole,1646660720.0
9041,comment,2,hzokrzd,,"I think I saw you mention earlier that you're on Android.

It's possibly worth your time to check out Brave Private Web Browser, a fork of Chromium with some baked in adblock support.",pihole,1646642120.0
9042,comment,0,hzodg7a,,How? I am just trying to watch movies without stupid ads. How do I do that?,pihole,1646636356.0
9043,comment,1,hzqvgu6,,Changed what?,pihole,1646683912.0
9044,comment,1,hzol92f,,"Yes,thank you. I'll do that. And btw,how about running Pihole on an iPad Air 2? I am able to log into the Pihole from there but beyond that idk how to set it up. Computers were okay though. It's just the IOS and Android devices I'm having trouble with. You know.",pihole,1646642516.0
9045,comment,1,hzqmiss,,I think you may be misunderstanding how all of this works.,pihole,1646680415.0
9046,comment,1,hzqvx3v,,">Changed what?

Blocking mode.

https://docs.pi-hole.net/ftldns/blockingmode/",pihole,1646684090.0
9047,comment,2,hzolwg2,,"There's nothing to set up, per se.

Either clients get their information from DHCP broadcast from the router (or Pihole if you're using Pi-hole for DHCP) and this includes your Pi-hole instance as the singular DNS endpoint, or you set a static address on the individual clients.

On iOS that's something like:

⚙️ → General→ WiFi → the little ℹ️ icon next to the access point you want to configure → click the 'Static' tab → configure as desired",pihole,1646643054.0
9048,comment,1,hzqvbp5,,"Yeah,maybe. I'm very new at this. That's why I'm asking for help.",pihole,1646683856.0
9049,comment,1,hzqwgn7,,"I'll look into it,thanks. That might be my trouble all the while!",pihole,1646684299.0
9050,comment,1,hzon961,,K,pihole,1646644201.0
9051,comment,2,hzqy00c,,That is very unlikely to be the cause of your problem.,pihole,1646684890.0
9052,comment,1,hzqychc,,"Thanks anyway. Lack of experience is probably the cause of the problem,unless you have any other suggestions?",pihole,1646685023.0
9053,comment,0,hzrp0j5,,Hello?,pihole,1646695474.0
9054,post,0,t8h3yc,PiHole isn’t working after changing the subbet,"SOLVED!

I need to change the subnet on my router from 192.168.1.1/24 to anything else (picked 192.168.2.1)

I’ve changed it on the router level and I’ve also changed it in pihole web-interface, I’ve also assigned the mac address of the raspberry pi that’s connected with ethernet to 192.168.2.8.
Pictures attached to all I’ve done.
The raspberry pi isn’t showing in the list of connected devices to my network, anything I’m missing?",pihole,1646627697.0
9055,comment,1,hzo1mij,,">Pictures attached to all I’ve done.

Note: Pictures not in fact attached.

It's not you, it's this sub. It's caught me out a few times myself, and is more than mildly fucking annoying, especially if you went to no small amount of effort captioning them and/or rely on them for demonstrative purposes, only for them to just disappear without notice when you hit submit.",pihole,1646628642.0
9056,comment,1,hzo0c7h,,"PiHole doesn't update it's IP adress by itself. Did you try the solutions suggested in this thread? [https://discourse.pi-hole.net/t/change-ip-adress/3837](https://discourse.pi-hole.net/t/change-ip-adress/3837) (Reconfiguring via `pihole -r`, editing `/etc/pihole/setupVars.conf` or `/etc/dhcpcd.conf`)",pihole,1646627915.0
9057,comment,1,hzo422v,,"I was uploading the pictures, posting them on my feed and linking them here, but i got the solution while i was doing that (in about a minute) that’s why i didn’t link the pictures.

And i marked the post as solved.",pihole,1646630056.0
9058,comment,2,hzo0ppg,,"No i didn’t do that, but it looks like the solution.
When i get back home I’ll try this and update the reply.",pihole,1646628125.0
9059,post,1,t8fxdd,Change new router,"Hi all, I have a Pi-hole running on raspberry pi Zero W for almost 2 years. 

I’m going to get a new router next week. Am wondering how and what should I do to get the Pi-hole up on the new router before I mess up everything.

Any advise or guidance would be much appreciated. Thank you in advance.

P/s: I’m running on headless raspberry pi.",pihole,1646623582.0
9060,comment,3,hzo6yzb,,"As others have noted, set up the new router with the same IP range and subnet.  If the old router is on [192.168.0.0/24](https://192.168.0.0/24), set up the new router the same way.

Also make the SSID and password the same on the new router as the old.  Then the wireless clients will connect automatically using the existing credentials.",pihole,1646631867.0
9061,comment,1,hznzgbo,,[deleted],pihole,1646627425.0
9062,comment,1,hzo9902,,"Ok, thank you.",pihole,1646633386.0
9063,comment,2,hzsvrfd,,"In line with this response, and a bit off topic, I also use the same Wi-FI SSID and password as my previous router to avoid having to reconfigure all my IoT devices.

Ultimately, choose the simplest route possible.",pihole,1646715822.0
9064,comment,1,hzo06x2,,How do I connect my raspberry pi to the new router? I don’t think it will auto connect by simply setup the old IP address?,pihole,1646627833.0
9065,comment,1,hzo3sfb,,[deleted],pihole,1646629895.0
9066,comment,1,hzo97jz,,"Ok, I will give it a try when I get my new router. 
Thank you.",pihole,1646633358.0
9067,post,0,t8ep8a,3 questions,"What does a pihole do

How do I know if it’s working 

Should I connect it directly to my router via rj45",pihole,1646619503.0
9068,comment,8,hznkrbx,,[deleted],pihole,1646620088.0
9069,comment,3,hznlr1q,,"Pihole is a DNS server that can be configured to block IP address of websites and such. This includes but is not limited too ads, trackers, telemetry, and whatever else you want. Like Tik Tok or Google. 

You do not have to use an Ethernet connection, you can do WiFi. RJ45 is definitely the easiest though. 

You’ll know it’s working if internet assets you have blocked fail to load.",pihole,1646620558.0
9070,comment,4,hznw6vy,,All of these questions and more can be answered using Google.com or by using the search feature.,pihole,1646625718.0
9071,comment,3,hznk884,,Yes. Yes. Yes.,pihole,1646619833.0
9072,comment,1,hznl4v7,,Hence my response lol,pihole,1646620268.0
9073,comment,-3,hznkvek,,"Idk how people troll about a pihole but 🤷🏻‍♂️, I’ll check them out thank you!",pihole,1646620142.0
9074,comment,-4,hznkf09,,I see. How about this what’s 2x3^4/2^6x5,pihole,1646619925.0
9075,comment,3,hzo0spu,,"Well, some people would say that asking someone to answer you all the questions that are answered in the first screen of the official site pi-hole.net is trolling. If you could find this sub you know what the official site is, you can find your own answers faster than you can write your post.",pihole,1646628171.0
9076,comment,5,hznkq0p,,🥔,pihole,1646620071.0
9077,post,3,t8ebn1,Suddenly had DNS issues on my network. Resolved problems but now my pihole isn't blocking ads.,"Suddenly while using the internet today, I was no longer able to make new connections to websites but existing connections such as twitch streams and discord continued working as expected. I suspected a DNS problem and the network diagnostic tool on my main PC confirmed this. I checked on my pi and I was running into issues where it could not ping anything on my local network and nothing on my local network could ping it, despite it being connected to my wi-fi and it showing up in the device list on my router. After an excessive amount of googling and running a lot of commands to diagnose and fix the issue, I finally got it talking to everything else on my local network. I ran the commands to check its pihole status and it claims to be blocking ads. However, I no longer seem to be getting any ad blocking happening on my network. The sites I use to test it all have ads showing up, which they did not in the past during tests. My router still has the correct DNS settings, and I'm able to connect to websites so the pihole must be doing something at least, but it's not doing its job. I'm really not a networking person (or a linux person, yet) and I'm amazed I even got it to this point after the problems I had but now I'm stuck. What diagnostic steps should I take at this point?

Edit: All problems resolved. Updated the pi and it started blocking ads on my phone. Ran the following commands on my Windows PCs and the pihole started blocking ads for them as well: 

ipconfig /flushdns

ipconfig /release

ipconfig /renew",pihole,1646618299.0
9078,comment,1,hznk0x6,,[deleted],pihole,1646619736.0
9079,comment,2,hzns4u3,,"I've only configured and interacted with my Pihole through command line, so I don't think I've accidentally disabled it. I did get blocking working again, sort of. It required some updating of packages and now things are almost as they should be. Except it's only working for some devices on my network which is bizarre. I can load a page on my phone and see that my pihole is blocking stuff in the logs. But when I load the same page or anything at all on my PC there's 0 activity in the logs. Not only does it not show anything being blocked, it doesn't show anything happening at all on the pihole. I'm really confused.

Edit: Resolved that issue too. Details in post text.",pihole,1646623690.0
9080,post,14,t8ba9c,Getting pi.hole to resolve correctly on LAN,"I’m running PiHole in Docker on a Synology NAS, and it works great - with one (minor) problem. If I browse to http://pi.hole on my LAN, it loads up the Synology’s admin interface (at my NAS IP, port 5000) not the PiHole admin interface, which is at the same IP at port 8000.

How do I get http://pi.hole to resolve to the correct IP and port? 

Related question: can I set up the PiHole to resolve other LAN-based services using names rather than IP (sonarr.local, perhaps?)

Thanks in advance, and please forgive the newbie question. I tried searching both the FAQs and Google for an answer but came up empty.",pihole,1646608835.0
9081,comment,7,hzn00cu,,"You need a reverse proxy to make that happen. I don't know if Synology has that feature available out of the box. The default http port is 80, and default https port is 443. That is where you are going to when making the request",pihole,1646610272.0
9082,comment,3,hzn4poo,,"It looks like you need to use Name-based virtual hosts on your Synology, leveraging either port 80 or 443. The web server in use by the Synology will determine which document root is being requested based on the domain name. Yes, both sites will be running on port 80 or 443 (or one you specify).

Scroll down to the [Name-based virtual hosts section](https://michaelbolger.net/post/2019-03-10-synology-multiple-sites/) for an example.",pihole,1646612447.0
9083,comment,1,hzn479l,,"You could have another webserver before the NAS and redirect them.

The related question is easier: just set a local dns entry at web admin GUI > local DNS > DNS record",pihole,1646612212.0
9084,comment,1,hznu1y3,,"You could enter [https://pi.hole:443](http://pi.hole:443) or [http://pi.hole:8000](http://pi.hole:8000) (assuming you didn't change the HTTPS port.

edit: fix the fat finger mistake I made.",pihole,1646624643.0
9085,comment,1,hzo9db4,,"I  successed Pi-hole in Docker on a Synology NAS.  
That is used ""macvlan""  
The detail is below   
https://docs.docker.com/network/macvlan  
For example method by realrized on a synology NAS  
1.You login ssh to synology NAS  
2. command line  below  by sudo user  
docker network create -d macvlan \\  
\--subnet=your local IP range (ex. 192.168.20.0/24) \\  
\--ip-range= Pi-hole IP (ex. 192.168.20.11/32) \\ If you set ""192.168.20.101/28"",  distribution range 192.168.20.101-116  
\--gateway=your gateway IP (ex.192.168.20.1) \\  
\-o parent=""Use NIC"" (ex.eth0) ""obuect name""  
3. you attach Pi-hole network to ""obuect name"" on Synology docker setteing interface  
4.you can access ""http://Pi-hole IP"" , if you set WEB\_PORT = 80 on env\_value",pihole,1646633467.0
9086,comment,1,hzq08m9,,Setup docker to go from 85 external to port 80 in the docker container.  Then when you go to the ip eks. 192.168.1.2:85 you should see pihole web interface .,pihole,1646671865.0
9087,comment,0,hzmx8gq,,http://pi.hole:8000 should do the trick. either that or you have to bake the port into the ip the pi.hole domain is referring to.,pihole,1646608998.0
9088,comment,1,hzn53im,,"I wonder what is listening on port 80, the NAS web admin page is on 5000, and pihole is on 8000, then what is stopping him to use 80?",pihole,1646612627.0
9089,comment,1,hzn5svt,,"Humm, is that like a reverse proxy?",pihole,1646612961.0
9090,comment,1,hzp9ehm,,"Seeing http running on 443 is... troubling  
[EDIT] Okay, got nerd sniped by a simple typo.",pihole,1646660093.0
9091,comment,1,hzmxkdw,,"That works, but I’d prefer not to specify the port every time. How do I do the “port baking”?",pihole,1646609153.0
9092,comment,1,hzne9tv,,"Not sure, would first have to understand what is running on 80. OP you can attempt to change the admin console for pihole to 80 and see what happens.",pihole,1646617005.0
9093,comment,1,hzp9b3y,,It seems there's a basic redirect on port 80? If the default port goes to 5000,pihole,1646660044.0
9094,comment,1,hzn8fwi,,"There's no proxying taking place per say, simply the web server makes a decision based on the domain name and which document root to send the client. I've done this in NGINX and IIS. It's more complicated with HTTPS because you need to implement SNI to handle the TLS handshake, which occurs before the web server determines where to send you.",pihole,1646614226.0
9095,comment,1,hzp9m7p,,It's probably just a typo.,pihole,1646660207.0
9096,comment,1,hzpsp2i,,"Yup, jump on that typo.  Sigh.  My brain autocorrected when I read it the first time.",pihole,1646668844.0
9097,comment,1,hzmxqd9,,I believe pihole has a feature where you can specify your own domains for your local network. I'm not sure what it's called right now.,pihole,1646609228.0
9098,comment,2,hzpatyi,,"If it was meant as https, port 443 would be the default so I'm not sure if OP meant to use a random port or a well-known port unlikely to be taken.  

But I guess I can't really complain given that on my house, I redirect 443 to my openVPN TLS instance.",pihole,1646660838.0
9099,comment,2,hzn4auy,,"Local DNS, but it cannot do anything about ports",pihole,1646612257.0
9100,comment,1,hzpsvza,,"Yes, I know 443 is the default.  I was overdocumenting.",pihole,1646668923.0
9101,comment,-2,hzn4g11,,isn't it possible to just write the port into the local DNS record?,pihole,1646612324.0
9102,comment,3,hzn5fsg,,"No. The D in DNS is for domain, and domains have zero concept of ports, or anything that comes after the TLD.",pihole,1646612788.0
9103,comment,2,hzn4w86,,It isnt possible. DNS just do one thing and one thing only. It is just not designed to also return port infomation.,pihole,1646612532.0
9104,comment,1,hzp9vbx,,"Web browsers don't support it so it's ""no"" for the implicit question, but [SRV records](https://en.m.wikipedia.org/wiki/SRV_record) are a thing and meant exactly for handling ports as well  

Basically, it's like having reserved subdomains for specific apps (like _minecraft.srv.game1.example.com) and the record contains the port. So if you want to play on example.com, Minecraft knows where it can look for the default port : game1.example.com and game2.example.com will return *the same IP* but different ports.  
This way, one machine can host several server instances ""port-less"" as long the user enters with different subdomains.",pihole,1646660343.0
9105,comment,1,hzp9mth,,"Technically, DNS *can* do it with SRV records nowadays.  
I say technically because it's supported by many software BUT NOT any single web browser, which is the one thing you need for a web interface.    
[EDIT] It's a chicken-and-egg issue as SRV can't be added without a new HTTP(S) standard, and no website would switch to that because of legacy support

For example, that's how Minecraft admins can setup domains that go to a port other than 25565, without asking users to specify a port.",pihole,1646660216.0
9106,comment,1,hzpfhgv,,"O really? <insert ""O RLY"" owl picture here>",pihole,1646663118.0
9107,post,44,t8al1a,Pihole on RPi w/ recursive DNS and DHCP; Devices assigned Static IPs on network won't work with DNS,"Hello,

Before reading and to give more context, here's a diagram of what my home network looks like: [https://imgur.com/a/MR9wf1c](https://imgur.com/a/MR9wf1c)

Just started to use Pihole on my Raspberry Pi for the first time and I loved having the recursive DNS feature on it so I decided to start using the DHCP feature on it and disabled the DHCP feature on my Router.Once I did that, I decided to go into my Personal PC and change the DNS settings on it from being Primary DNS: [192.168.0.9](https://192.168.0.9)Secondary DNS: 1.1.1.1

to my PC's DNS just being [192.168.0.9](https://192.168.0.9)

As soon as I removed [1.1.1.1](https://1.1.1.1) as being an optional DNS on my PC, I get no internet signal on my PC anymore. 

Right now, I currently have only 2 devices with static IPs on my home network and that's my personal PC and my Raspberry Pi hosting Pihole and both are connected to the router directly via ethernet cables.

Do I need to change something in my PIhole Admin page to allow devices with Static IPs to persist but still use Pihole as their DNS server?",pihole,1646606785.0
9108,comment,5,hznrj3n,,"If your internet breaks when you remove [1.1.1.1](https://1.1.1.1), then it was obviously using that DNS server. If it was using that one, then it wasn't using your Pi-Hole.

DHCP is a related  but separate topic here. Since your PC has a static IP, then let's leave DHCP out of it.

You need to check the Pi-Hole GUI to see if your Pi-Hole is processing your PC's DNS requests.  If they're not showing up, then they're not getting there. If they show up but fail, then your Pi-Hole is not getting to the internet. Then it may be an issue between your Pi-Hole and your Router.

I have a similar set up to you, but there's too many details missing to precisely identify the source of your trouble.",pihole,1646623387.0
9109,comment,1,hzmtkbx,,">Just started to use Pihole on my Raspberry Pi for the first time and I loved having the recursive DNS feature on it

Pi-hole has no such feature.",pihole,1646607367.0
9110,comment,1,hzndz16,,"A couple of things that I learned when I set mine up.  

First, my pihole devices each have a static IP.  I first got pihole running and tested it.  Then I added unbound and tested that.  Then I pointed pihole to unbound and tested again.  For testing, I used nslookup and/or dig depending on the OS of the device I was testing with.  On Windows, start nslookup then use the *server* [*192.168.0.9*](https://192.168.0.9) command to point to the pihole.  Then when you type in the domains you're looking for it will do the lookup:

>\> server 10.10.2.2  
Default Server:  \[10.10.2.2\]  
Address:  10.10.2.2  
  
\> google.com  
Server:  \[10.10.2.2\]  
Address:  10.10.2.2  
  
Non-authoritative answer:  
Name:    google.com  
Addresses:  2607:f8b0:4004:837::200e  
[142.251.33.206](https://142.251.33.206)

I set up my unbound on port 5353 and then used nslookup to test out the unbound:

>\> set port=5353  
\> www.google.com  
Server:  \[10.10.2.2\]  
Address:  10.10.2.2  
  
Non-authoritative answer:  
Name:    www.google.com  
Addresses:  2607:f8b0:4004:c0b::67  
2607:f8b0:4004:c0b::63

(I shortened the list of responses as there is no value in lengthening this post)

In my above example, my pihole is pointed to the unbound as it's already set up.  I just tested each part.  For dig the syntax is similar as follows:

>dig [www.google.com](https://www.google.com) @10.10.2.2

or:

>dig [www.google.com](https://www.google.com) \-p 5353 @10.10.2.2

Next, the thing I learned was that a single pihole left me opened to failure, or I had to leave a different external DNS provider which defeated my purpose so I set up 2 pihole servers with unbound with both.  This kept the pihole software redundant but left the unbound a single point of failure, so I changed the unbound to bind to the external port instead of just [127.0.0.1](https://127.0.0.1) and both piholes point to their own unbound and the other pihole's unbound.  Last I used Gravity Sync to copy the database from my primary pihole to the secondary.

Last, I took steps to stop regular DNS resolution through my router.  I blocked all devices from communicating through port 53 except the IPs of the piholes.  I also set up my DHCP server so any computer pulling an address got the pihole addresses as the DNS servers.  You'll need to be a good bit more advanced to really block all DNS requests (search on DoH for more information).

The video that I started with was exactly the same as where you did.  I then grew it from where Jeff left off.",pihole,1646616860.0
9111,comment,1,hzolkfj,,"If you are using static IP on your PC then the DHCP settings on router and pi-hole would be irrelevant.

Are you sure you fully disabled DHCP on router and PC, and enabled on pi-hole?  I recently got a new router and got caught out before I only disabled IPV4 DHCP on it, not IPV6. Could be you're still actually connecting with DHCP and using the router DNS.",pihole,1646642780.0
9112,comment,1,hzp14qy,,"Going to be the devil's advocate and assume the lack of DHCP *is responsible* of the issue, given that it seems Reddit didn't find the answer yet by reasonably assuming DHCP is not related.   

Is it possible that the router blocks static IP devices, or that the static IP for your device is conflicting with another device?  

>As soon as I removed 1.1.1.1 as being an optional DNS on my PC,

Nitpick, optional DNS is not a thing. Secondary is used everytime, even if primary is online.",pihole,1646655210.0
9113,comment,1,hzo0st8,,"So here's the funny thing, I went into my Pihole's GUI and most if not all of my PC's dns requests were logged in Pihole and my PC's static IP shows up in the Pihole GUI as being one of the top clients on my network making requests. And just to be sure, on my PC i ran ""nslookup [google.com](https://google.com)"" and it sent back that it was using my pihole server to retrieve the dns info, listing the ip for my pihole and everything.

So I think from that evidence alone, I can guarantee my PC is using Pihole I just have no idea why removing [1.1.1.1](https://1.1.1.1) as a secondary dns server on my PC just makes my PC not get any internet connectivity.",pihole,1646628172.0
9114,comment,11,hznanhr,,Installing pihole with unbound is a common way to use it.,pihole,1646615286.0
9115,comment,2,hzmtztq,,"Correction: I followed this tutorial to make my Pihole DNS a Recursive DNS:   
[https://www.youtube.com/watch?v=FnFtWsZ8IP0](https://www.youtube.com/watch?v=FnFtWsZ8IP0)",pihole,1646607557.0
9116,comment,1,hzo2l9k,,"I appreciate the potential project ideas that I could start from what I have right now, and I'm really impressed with what you've accomplished, but... you didn't quite answer my question. I will look into DoH though and possibly adding on a second pihole dns similar to how you set yours up, but I came into this looking for answers to my current problem. I still appreciate the feedback though! Thank you!",pihole,1646629198.0
9117,comment,1,hzr9ab1,,"So shortly after making this post, i decided to go back to using my router's built in DHCP and disabled Pihole's DHCP for the time being while I figured out the DNS issue and I got it resolved! All i had to do was go into my Rasp Pi and restart the DNS service in pihole via terminal entering ""pihole restartdns"" and after I did that, I set my PC's dns server to only being [192.168.0.9](https://192.168.0.9) and it began working and only using pihole :)",pihole,1646689162.0
9118,comment,1,hzp9bzz,,">I just have no idea why removing [1.1.1.1](https://1.1.1.1) as a secondary dns server on my PC just makes my PC not get any internet connectivity.

That clearly shows that your PC was relying on 1.1.1.1 for DNS and NOT using your Pi-Hole. As I said, check to see if your PC is connecting to your Pi-Hole (you did and it is). THEN, check to see if your Pi-Hole is connecting to the internet. I suspect that your Pi-Hole is not doing its part, so your PC is going to Plan B with your secondary DNS settings.",pihole,1646660057.0
9119,comment,4,hznb15k,,"It is, I do so myself with self built mainline Unbound with a non-trivial degree of additional configuration you won't find in package manager shipped versions, but it's not a Pi-hole feature.",pihole,1646615464.0
9120,comment,2,hzn6pji,,"Gonna check this out!  Sorry, not able to assist with your question but I dig this setup and going to look into it further",pihole,1646613394.0
9121,comment,2,hzofzeq,,"Pihole is using unbound to perform recursive DNS. Do check a few things,

1. router DHCP is turned off

2. Router's DNS is pointing to Pihole ip address: 192.168.0.9

3. Pihole has a static IP, this should be done in pihole itself

4. Pihole's upstream dns is is: 127.0.0.1#5335 for ipv4 as this is the default for unbound.

5. If the above is set you do not have to manually change the PC DNS server as all traffic will go to the router which will forward the dns to the raspberry pi. You can clear the remove all dns option from the pc.

edit: formatting",pihole,1646638279.0
9122,comment,1,hzo3ujo,,I started with how to tell if your pihole and/or unbound were working.  I also included how to improve failover.,pihole,1646629930.0
9123,comment,2,hzr7h4o,,"Thank you! the DNS issue is resolved! I just had to restart the dns service on my Rasp pi by issuing the command: pihole restartdns. And once I did that, I was able to set my PC's primary DNS server to be my pihole's IP and it worked. so that's resolved! :)",pihole,1646688465.0
9124,comment,1,hzolais,,"> 1. router DHCP is turned off

On my setup I had to set my router to *forward* DHCP requests to Pihole which acts now as DHCP-server.

Otherwise I have my setup as above.",pihole,1646642549.0
9125,comment,1,hzrc5z7,,Glad to hear it. Pi-Hole is pretty awesome!,pihole,1646690265.0
9126,comment,2,hzomxr9,,"Yes. I think you might not be fully understand what or how DHCP works.
Usually there is only one DHCP per network. In this case it would be your pi-hole. Since you have already enabled it. You should disable the DHCP on your router as this can cause conflicts when assigning IP to devices in your home network.


Find the DNS section in your home router and put your raspberrypi IP address.

What this would do is.
All ips to devices will be given out buy your pi-hole.

All network traffic connected to your router will be forwarded to your pi-hole to resolve the DNS.


edit 2, 3:

The tutorial you had followed actually assumes alot of things and does not really mentions the other steps needed. below are the full steps.

1. install pi-hole
2. install unbound
3. go to your router and make make the current raspberry pi IP as static
4. go to your pihole insert unbound as upstream DNS
5. in pihole add current raspberry pi IPs as static as well
6. in pihole enable DHCP assign the same ip range as your router to be safe
7. Find DNS setting in your router and add the raspberry pi IP as the DNS
8. lastly disable your router's DHCP

This will make your pihole a DHCP server - which will handle all ip assignment in your network.

Secondly all devices which are connected will go through pi-hole, as the router's dns is pointing to Pihole. and pihole itself will  be a recursive DNS as it is using unbound.",pihole,1646643929.0
9127,comment,2,hzop2l7,,"Yes, I have disabled DHCP from my router. My router acts as a DHCP-forwarder, so my Pihole is only DHCP-server on my network.

With ""*...Otherwise I have my setup as above...*"" I meant that my setup is like you have described in your post, not the OP's.",pihole,1646645747.0
9128,comment,1,hzopbvq,,my bad misunderstood your comments...,pihole,1646645966.0
9129,post,4,t88t9h,Please help. DNSmasq_Warn Ignoring nameserver local interface,"Am a noob, I am running pihole recursive DNS via unbound on Raspbian.
Been up and running for 6 months no issues until now, no internet on any devices, Pihole is throwing this error and I am locked out of my router due to no internet (TP-Link deco M5 can apparently only edit settings via their mobile App, which you can't do when your wifi is not connected to the internet, go figure)
Would love to share Pihole -d but again no internet to upload.
Have googled the hell out of this and tried everything I've found and am stuck at this point.

Any help would be appreciated, let me know what other details you need.",pihole,1646601873.0
9130,comment,2,hzmk28b,,">Would love to share Pihole -d but again no internet to upload.

Change the nameserver used by the Pi-hole host platform to something other than Pi-hole, then upload the debug log and post the token URL here.",pihole,1646603217.0
9131,comment,1,hzmqrkr,,"Https://tricorder.pi-hole.net/QAf48YD1
Had to connect my raspberry PI to cell phone hotspot to upload this FYI",pihole,1646606129.0
9132,comment,1,hznaffj,,"You have a a configuration problem. Pi-hole is configured for ethernet, but is connected via wifi.   Run `pihole -r` and reconfigure. 
    
    [ DIAGNOSING ]: Networking
    [✗] No IPv4 address(es) found on the eth0 interface.

    *** [ DIAGNOSING ]: Name resolution (IPv4) using a random blocked domain and a known ad-serving domain
    [✓] getrxhere.co is 0.0.0.0 on lo (127.0.0.1)
    [✓] No IPv4 address available on eth0
    [✓] getrxhere.co is 0.0.0.0 on wlan0 (192.168.13.143)

    PIHOLE_INTERFACE=eth0
    IPV4_ADDRESS=192.168.68.112/24",pihole,1646615180.0
9133,comment,0,hznb9gp,,"I'm aware. When I connect Ethernet to raspberry pi (the way I set it up) my raspberry PI has no connection to internet. No connection because there's a problem with DNS that my router is configured to. And I cannot change my routers DNS without this problem being solved. There must be another problem with Pihole, and I'm locked out of my network until I find the solution",pihole,1646615574.0
9134,comment,1,hznqlss,,The problem is that you have Pi-hole configured to listen on an interface that isn't active.,pihole,1646622925.0
9135,comment,-1,hznr5p4,,"It was configured on LAN on purpose.
I had to connect my rasp PI to a hotspot to get you a token URL.
I appreciate your help JFB.
I've decided to reset my raspberry PI and wipe my network and start from scratch.
I will invest in a router that I can actually LAN into.",pihole,1646623200.0
9136,post,0,t82xwj,Blocking list for Church,I am looking at installing PiHole at my church.  I would like to block everything I can that is inappropriate.  Does anyone know of have experience in lists that would be helpful?,pihole,1646585710.0
9137,comment,11,hzljv7j,,OpenDNS with a free account to manage the filters.,pihole,1646588107.0
9138,comment,12,hzm2eic,,"PiHole blocks ads and tracking well. But it is not really the right tool for filtering (censoring) content. 

This implies that someone makes a judgement on what is appropriate or inappropriate for others and this is a moral maze. For example, some churches might want to block LBGT content while others would not. Gambling sites also. And other religions or beliefs? Or legal adult content? Sex education? Evolutionary biology?

What blocking lists are you looking for?",pihole,1646595694.0
9139,comment,8,hzlul18,,"If you are going to use Pi-hole, select a filtered upstream DNS server that is family friendly.  This could be Cloudflare Family, OpenDNS, etc.

Or if you don't want to apply an additional local filtering by Pi-hole, just point the church router at a filtered DNS service.",pihole,1646592454.0
9140,comment,3,hzm2xvc,,"Yes: [https://github.com/chadmayfield/my-pihole-blocklists](https://github.com/chadmayfield/my-pihole-blocklists)

DNS isn't perfect for this type of application, but nothing really is - they'll all have workarounds.   It's probably good enough to avoid the casual mishap/embarrassment.  
  
  
10 years ago, I'd have said use Dansguardian but I think it's abandoned now.  
  
Reminds me of that time in the 90s when I installed an ISDN dialup router in a church/community centre. 2 hours later, we get a call from the Church complaining that I had looked at porn on their computers (which I most assuredly did not)... They called back 30 mins later to apologise when their janitor admitted it was him.",pihole,1646595919.0
9141,comment,10,hzlfeas,,"DNS is the worst way to do this, people can just set a manual dns entry and bypass all filters you set",pihole,1646586295.0
9142,comment,2,hzlib46,,https://firebog.net/,pihole,1646587478.0
9143,comment,2,hzln35p,,"Best way to do this is likely through something like squid on pfsense, not using DNS",pihole,1646589416.0
9144,comment,1,hzmihs9,,I wouldn’t recommend installing pihole on a public network. Ability to log could become a legal nightmare.,pihole,1646602546.0
9145,comment,1,hzmsgo0,,"You can use regex based blocking and find adult site lists etc. these would be good starts

However since what is objectionable at a church is likely more extreme than what we might find at a house you should be open to more manual blocking lists potentially 

Certain services might need to be turned off like TikTok or what have you … manual whitelists might be required 

I would suggest getting good with wireshark or nmap depending on your platform so you can audit services you want to blacklist // whitelist",pihole,1646606874.0
9146,comment,1,hzn0yef,,"NextDNS may be worth a look, too. 😀",pihole,1646610710.0
9147,comment,1,hzn1efw,,"Or this maybe?

https://controld.com/",pihole,1646610917.0
9148,comment,1,hzn6bwa,,"I assume you want to block things like phishing and malware. This might be a good start:

https://github.com/blocklistproject/Lists",pihole,1646613212.0
9149,comment,1,hzsgux7,,"The adlist that Pi-hole uses by default. The ""Steven Black"" one. On its GitHub page you can find extended versions of the list that also feature pornography and gambling domains to be blocked, among other stuff.",pihole,1646708196.0
9150,comment,5,hzlqeye,,I have considered this as an alternative,pihole,1646590772.0
9151,comment,2,hzmnhw5,,"Pi-hole (optionally) blocks domains.

Those domains may serve ads, or tracking and telemetry, or pictures of kittens but Pi-hole sure as shit doesn't know anything about what's behind those domains. DNS has precisely zero concept of what content is.",pihole,1646604705.0
9152,comment,9,hzmbrl5,,[removed],pihole,1646599687.0
9153,comment,6,hzlh0v5,,"Some routers can be configured to redirect all dns traffic (port 53) to your pi-hole’s ip, blocking the use of alternative dns servers.

Edit: most->some",pihole,1646586959.0
9154,comment,-1,hzlqlqz,,I am aware of this.  Thanks,pihole,1646590847.0
9155,comment,-2,hzlqofw,,"Aware of the problems, thanks",pihole,1646590877.0
9156,comment,2,hzmofz0,,">Ability to log could become a legal nightmare.

So don't. It's pretty simple. I should hope OP doesn't intend to anyway as logging an entire congregation's DNS request history seems more than a little fucky unless they're made aware this is happening.",pihole,1646605115.0
9157,comment,1,hzmoshu,,"This is not a public network, I assume.  For the church only.",pihole,1646605263.0
9158,comment,0,hzmnqx6,,"1. It is a private network not a public network.  As a church we only provide access as needed.
2. We already log network data with our Unifi controller.  We also have cameras that log everyone.  Also I wouldn't log with PiHole since that would be redundant anyway.
3. Anyone who doesn't think they are being logged or having their picture taken must live in a cave.",pihole,1646604814.0
9159,comment,4,hzlvnlk,,You can still run pi-hole locally to block even more. It may be the best combo for free web filtering available.,pihole,1646592893.0
9160,comment,5,hzmp1lh,,[removed],pihole,1646605373.0
9161,comment,1,hzn62gt,,I wish I have a platinum.,pihole,1646613090.0
9162,comment,5,hzliox5,,">	Most routers can be configured to redirect all dns traffic (port 53) to your pi-hole’s ip

Some routers. Not most.",pihole,1646587633.0
9163,comment,1,hzlmkul,,"Pretty sure chrome on Android, by default, uses DNS over https to Google DNS servers. Can't really block port 443 and most folks would be using mobile devices at a church with only staff using desktops/laptops",pihole,1646589206.0
9164,comment,2,hzlv7yi,,"Genuinely curious, if you're aware of the downfalls why go this route?",pihole,1646592712.0
9165,comment,4,hzmes8j,,"This is the way!

Setup 2 piholes at the church for redundancy :)

Block all outbound port 53 except from the 2 pinholes.  If your router/firewall supports it reroute to the pihole.

On the piholes use openDNS family shield ips 208.67.222.123 and 208.67.220.123 for your upstream lookups",pihole,1646600972.0
9166,comment,1,hzlq63t,,"> Pretty sure chrome on Android, by default, uses DNS over https to Google DNS servers.

It doesn't.",pihole,1646590672.0
9167,comment,2,hzsl1nj,,"OP is probably looking to prevent teenagers from casually visiting inappropriate websites when being social at church, and to prevent weird ads from showing on the church staffs' devices. Blocking DNS queries will suffice, unless some kid is REALLY determined to break the rules.

That's my guess.",pihole,1646710190.0
9168,comment,1,hzme5cn,,[deleted],pihole,1646600699.0
9169,comment,1,hzm9uvf,,"Thanks for checking - my Android is by no means in default configuration. 

However this IS an option within chrome under 'privacy' if anyone is interested.",pihole,1646598881.0
9170,comment,1,hzme8si,,"Funny OP, your name changed!",pihole,1646600740.0
9171,comment,1,hzmnyxy,,"The default configuration there is opportunistic, and has been default enabled for about a year now on the release rail.

It's only used if the current DNS provider can facilitate it. Which won't be the case here. It'll almost *never* be the case in a home or private wireless scenario.",pihole,1646604911.0
9172,comment,1,hzmer15,,[deleted],pihole,1646600957.0
9173,comment,0,hzmf041,,K,pihole,1646601065.0
9174,post,1,t7s7wj,Move SD card from Pi 4 to Pi 3,"I have Pi-hole setup in a Pi 4 4GB, which was always overkill for Pi-hole.

I recently received a Pi3B+

Can I simply move the SD card from the Pi4 to the Pi3, or do I need to reinstall Pi-hole from scratch on the Pi3?",pihole,1646545722.0
9175,comment,8,hzjnp4p,,I would not swap cards. I would do a fresh OS flash and a clean reinstall of Pi-hole. Use the teleporter function in your existing Pi-hole to export the settings. Then in the new install you can import them.,pihole,1646546198.0
9176,comment,1,hzjr1to,,">Can I simply move the SD card from the Pi4 to the Pi3

Yes.",pihole,1646548332.0
9177,comment,1,hzk7w7z,,"Buy another pi 2 for pihole unbound/DoH pivpn combi, it’s fast enough for pretty much everything, and you can use the more capable ones for other applications.",pihole,1646561403.0
9178,comment,1,hzqoiev,,You can but in my experience you sometimes get odd behavior.  Use teleporter to back up your settings and reinstall the OS.  Takes about 30 minutes so not a huge undertaking.,pihole,1646681186.0
9179,comment,1,hzkp686,,"Pi3 boards are very common here in Malaysia
have never seen a Pi2 for sale",pihole,1646574209.0
9180,comment,1,hzkup8f,,I see. So I’d reinstall as well. Glhf,pihole,1646577191.0
9181,post,1,t7p3ec,Chronometer / security-related question,"Hello, quick question for the experts on that group:

How ""dangerous"" is it to expose the Chronometer page (\\admin\\api.php) to the web, behind a Caddy reverse proxy (https)?

I need access to that page (json) outside of my local network because I use it to extract my Pi-hole data for a KWGT widget

I  tried to extract the same data using Tasker + AutoTools SSH, then parse and send it to KWGT, but I wasn't successful  


Many thanks",pihole,1646534272.0
9182,comment,2,hzj5uij,,"Use a VPN, and gain full remote network access in the process.",pihole,1646536330.0
9183,comment,1,hzj7mhe,,"If you really want to do it, use a VPN. Or you might better stick with a push option, push data from pi to the server and get data from server, never send any request back. That way you know exactly and can control what is sent out.",pihole,1646537238.0
9184,comment,1,hzjvaeq,,Exactly what others have said. Use OpenVPN or wireguard and setup a VPN that your devices can communicate with your network from anywhere. That way you can have pihole protection anywhere you have an internet or mobile data connection. Trust me it might seem like a pain to setup properly if you arnt super fluent in it but it's amazing and super convenient. I love having the ad and tracking blocking everywhere I go.,pihole,1646551356.0
9185,comment,1,hzki75n,,"I already have WireGuard but I'm looking for a solution that will allow me to access that JSON data over the web to populate my widget, without being connected to my VPN all the time.

Tasker can also pull that information via SSH and push it to KWGT but I can't figure out to parse the data correctly.


[https://i.imgur.com/1Zdifk9.jpg](https://i.imgur.com/1Zdifk9.jpg)",pihole,1646569703.0
9186,comment,1,hzl2m51,,Ah my apologies. I misunderstood 😂. Any reason you wouldn't want to be connected to your VPN all the time?,pihole,1646580960.0
9187,post,0,t7m4bi,Idk what this means need help,,pihole,1646524296.0
9188,comment,8,hziit9l,,"""no route to host"" means your system was unable to get the IP address of the computer whose DNS name is install.pi-hole.net via the http protocol on port 443 secured by TLS.

Basically, it means it can't find the site it's trying to pull data from.

Try to `ping` the same host ([https://install.pi-hole.net](https://install.pi-hole.net)) or `nslookup` that host (without the https:// part) or open in a web browser.

If none of those work, verify you have networking enabled on your device.",pihole,1646525000.0
9189,comment,5,hzihlmq,,"From the Pi terminal, what is the output of:

`nslookup install.pi-hole.net`",pihole,1646524428.0
9190,comment,2,hzkm0po,,check your DNS on the pi itself.,pihole,1646572288.0
9191,comment,3,hzj72dj,,Thanks for the help I just did a fresh install of the os and it worked,pihole,1646536958.0
9192,post,3,t7m1jj,Questions about Pihole + PiVPN,"Hi all,
I’ve been running pihole on a pi zero 2 with rpi os for about a month now and am completely loving it (thanks devs!). I recently learned that I could use pivpn to access pi hole when I am away from home and would like to try that out. I just have a few questions about it that hopefully this sub could answer.

1. Will the network speed when using pivpn be limited to the download/upload speed of the pi?

2. Will my pi zero 2 be able to handle both pihole and pivpn. I have about 15 devices on my main network using pi hole and would like to use pivpn for some family members on different networks (maybe 6-10 devices, moderate usage).

3. If I do set up pivpn, is there any additional setup on pihole that I have to do to make it work with pivpn (for example, to avoid “ignoring query from non-local network” errors. 

Thanks in advance for your help!",pihole,1646524046.0
9193,comment,3,hzihcjc,,">	Will the network speed when using pivpn be limited to the download/upload speed of the pi?

If you don't use a split tunnel, client data speed will be limited by your home network upload speed. 

>	Will my pi zero 2 be able to handle both pihole and pivpn

Yes. Particularly if you use a split tunnel and only route DNS back to home.",pihole,1646524310.0
9194,comment,3,hzixzgw,,"I’ve been running pi-hole and pivpn on a pi-zero for quite a while now and it works great. Mine uses a wired connection so the limiting factor for speed is my internet upload speed (25mbps). I do not use split tunneling, but have never noticed any performance issues. 

When you install pivpn it will notice that you have pi-hole installed and make the necessary pi-hole configuration changes for you.",pihole,1646532353.0
9195,comment,1,hzilqqx,,"If i don’t use split tunneling and use pi hole as the pivpn dns, will my pi still be able to handle it? I’m a bit new to all of this, so sorry if I don’t completely understand.",pihole,1646526401.0
9196,comment,1,i0txard,,">	If you don't use a split tunnel, client data speed will be limited by your home network upload speed.


I’ve been doing DAYS of research on trying to get this split tunnel working properly through WG. My VPN download speed is still being limited by my ISP’s upload speed, and I'm still able to browse devices on my local lan (basically it's still acting as if ALL traffic is going through). I'd like to just use the VPN for DNS so I can use my phone at it's 5G speeds. If you have a sec, would you mind helping me out? Any help would be sincerely appreciated! 



Server Config: 

[Interface]


PrivateKey = <redacted>


Address = 10.6.0.1/24


MTU = 1420


ListenPort = 51820

[Peer]


PublicKey = <redacted>


PresharedKey = <redacted>


AllowedIPs = 10.6.0.2/32


---------------------------------------------------
Client Config: 


[Interface]


PrivateKey = <redacted>


Address = 10.6.0.2/24


DNS = 192.168.0.180 #(my Pi's internal IP)


[Peer]


PublicKey = redacted


PresharedKey = redacted


Endpoint = redacted:51820 #redacted is my domain/public ip


AllowedIPs = 192.168.0.180/32",pihole,1647395165.0
9197,comment,1,hzj718z,,Thanks for your help! I will probably try pivpn tomorrow.,pihole,1646536941.0
9198,comment,2,hzj5dy5,,">If i don’t use split tunneling … will my pi still be able to handle it?

Yes. This isn't particularly computationally intensive at all. You could run multiple instances.",pihole,1646536092.0
9199,comment,1,i0u39fr,,"Have you checked our guide?

https://docs.pi-hole.net/guides/vpn/wireguard/overview/",pihole,1647397846.0
9200,comment,0,hzj6yil,,"Ok, thanks!",pihole,1646536902.0
9201,comment,1,i0u9yj9,,"Yeah. I have wireguard installed through PiVPN, so I had to piece it together.


What is odd, is that I have it working… Mobile download speed and I have access to my internal network somehow. After I wrote to you, I realized I was editing ~/configs/ConfigName.conf instead of /etc/wireguard/configs/ConfigName.conf (I am not sure why my config gets saved to two different locations…maybe that’s part of the issue). 


I did some testing and figured out QR codes were being generated from the /etc/ config path… so editing those to match what I typed you made it work. I couldn’t get FileZilla to see /etc/wireguard/configs since it was owned by root, so to transfer one of the client files to my Mac (since no QR code reader), I cp the conf file from the /etc/wireguard path to the ~/config path, then made pi the owner of it. Then I could use FileZilla to copy it onto my Mac.

Sorry if that was a lot to read. I think something’s screwy with my setup since the config files are being generated in two spots. Not sure why they aren’t just being created in my home folder, and not so sure why the QR codes are being generated from a root-owned directory.",pihole,1647400988.0
9202,post,5,t7l3td,Pi-hole at home blocks Tesla app to update vehicle location,"I already white list “Telsa.com” and “teslamotors.com” 

Once I disconnect WiFi, with cell connection, location updated immediately.",pihole,1646521157.0
9203,comment,6,hzibc6t,,Filter the log for that device IP and look at what domains are being blocked and causing your issue.,pihole,1646521536.0
9204,comment,3,hzibuhh,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1646521769.0
9205,comment,1,hzmnx8b,,Repeatedly attempt to access the application. Look in your query logs for the phones IP address. Something that’s blocked is causing the issue.,pihole,1646604890.0
9206,comment,2,hzibhmm,,This,pihole,1646521604.0
9207,comment,2,hzid69f,,"Thank you 

I saw these three were blocked. Whitelisted these three. reboot my phone, now car location was update. Not sure which one causes the issue. I also noticed the weather app on iPhone could not get updated. Ran pi-hole for over a year now, this never happened before. 

[crashlyticsreports-pa.googleapis.com](https://crashlyticsreports-pa.googleapis.com)

[app-measurement.com](https://app-measurement.com)

[gsp-ssl.ls.apple.com](https://gsp-ssl.ls.apple.com)",pihole,1646522375.0
9208,comment,3,hzisoi9,,">Ran pi-hole for over a year now, this never happened before.

Blocklists are fairly dynamic environments. Some more than others.

Pi-hole self updates lists in the small hours of every Sunday morning by default.",pihole,1646529755.0
9209,post,1,t7ke26,Guide to installing OpenMediaVault on Raspberry Pi running Pi-hole,"I'm trying to install  OpenMediaVault on Raspberry Pi 3B already configured with running Pi-hole. I found plenty of tutorials on installing Pi-hole on OpenMediaValut, but not the other way around. Any guidance?",pihole,1646519006.0
9210,comment,1,hzjvxta,,"I would recommend doing it as pihole on openmediavault, mostly because there are all the tutorials.
There may be technical reasons to do it this way but for me having the tutorials and others experience to fall back on is invaluable",pihole,1646551848.0
9211,post,1,t7jh90,"Pi-Hole set as router DNS, but I'm still getting ads","So I just set up my pi hole this weekend, and I'm still being served tons of adds. My router/modem is the Motorola MG7700, and I've made sure to set the DNS to my Pi Hole's static IP. I've checked on my PC, and it also displays the pi hole as the DNS, but I've still got a ton of adds showing up. I'm pretty new to this kind of stuff, so any troubleshooting advice would be appreciated.",pihole,1646516240.0
9212,comment,4,hzi371q,,Update: I was able to reboot my pi-hole without interrupting my connections. Does that imply my router isn't actually using it as the DNS server even though it says it is?,pihole,1646517796.0
9213,comment,2,hzi34tl,,Do your devices have a secondary DNS server set? Is the pihole the only DNS server in your router settings? It needs to be the only one as clients can use configured DNS servers in any order and not necessarily the primary first.,pihole,1646517769.0
9214,comment,2,hzi49n6,,"Two possible reasons to check: 1) is Pihole really used as DNS 2) Piholes filterlist does not match your ads. For 1) you can open the dashboard and watch if queries hit Pihole when surfing or manually blacklist Facebook or so and try to access it (you can leave Facebook blacklisted then!!) For 2) find out the URL sources of your ads and test Pihole for these, blacklist if necessary.",pihole,1646518275.0
9215,comment,2,hzi7rs8,,Are you using a vpn?,pihole,1646519871.0
9216,comment,1,hzi0w6m,,Try incognito to see if ads still come up. I'm thinking the ads are cached on your browser,pihole,1646516753.0
9217,comment,1,hzi7k3m,,"From a client where you are seeing ads (and from the command prompt or terminal in that client and not via ssh to the Pi), what is the output of

`nslookup pi.hole`",pihole,1646519773.0
9218,comment,1,hzm1rxi,,"You could also try to flush your dns cache.  Its entirely possible that your PC is remembering previously visited sites so is not actually looking to pihole for the things it remembers.

At a command prompt type:   **ipconfig /flushdns**",pihole,1646595429.0
9219,comment,0,hzi1e6s,,"Make sure your lists are updated, i’ve noticed the ads are getting more persistent as of late.",pihole,1646516977.0
9220,comment,0,hzi6vtd,,"Don’t use Private Relay on your Apple devices (see the network configuration on device).  Apple is trying to keep things private, but, I believe that is sending DNS queries to them.

The only device on my network that can communicate with outside DNS servers is the pi-hole.  For all other devices, DNS traffic must go to the pi-hole.

I believe that I read that some devices will used UDP on port 443 to hit some DNS servers.  I block UDP on port 443, but allow TCP.

You’ll never be able to block all ads.  However, check your pi-hole to see what is being blocked and allowed.  Also, verify that you are seeing entries from your desired devices.  I log all requests, so that I know what is happening on my network.",pihole,1646519461.0
9221,comment,0,hzip2fp,,"If you use chrome, disable secure dns. Google Chrome will ignore your dns and use their own when you have that turned on. At least this was an issue for me. Couldn’t figure out why ads were blocked in safari but not chrome.",pihole,1646527986.0
9222,comment,1,hzi6lo4,,"No, a standard reboot will have little to no effect on your network. It's not like rebooting a router or PC.",pihole,1646519331.0
9223,comment,1,hzi3r5e,,"The primary DNS on the router is the pi hole, and the secondary is left empty. My PC only lists one DNS (the pi hole) in its network settings",pihole,1646518045.0
9224,comment,1,hzi52k5,,"Now there's something interesting. I blacklisted Facebook, but was still able to visit the site",pihole,1646518637.0
9225,comment,1,hzi925r,,negative,pihole,1646520477.0
9226,comment,1,hzi1iq7,,"Incognito mode still pulls ads on most places. I've also cleared my browser's cache to no avail. Ive got a large number of blocklists from Firebog, but this is just stumping me",pihole,1646517033.0
9227,comment,1,hzi8y8l,,"spits out a server and an address (I can post those if necessary) and a line

\*\*server can't find pi.hole: NXDOMAIN",pihole,1646520425.0
9228,comment,1,hzm2zg5,,"Thanks but I got it resol ed yesterday. My router didn't allow me to set an IPv6 DNS, so a lot of stuff wasn't getting screened by the pi hole. I just disabled IPv6 on the router",pihole,1646595937.0
9229,comment,1,hzi1li7,,"Any advice on where to get good, updated lists besides Firebog?",pihole,1646517068.0
9230,comment,1,hzi8iep,,">	Don’t use Private Relay on your Apple devices

A default Pi-hole installation blocks this. 

https://docs.pi-hole.net/ftldns/configfile/#icloud_private_relay",pihole,1646520217.0
9231,comment,1,hzihiwa,,[deleted],pihole,1646524391.0
9232,comment,1,hzj01b2,,">If you use chrome, disable secure dns.

There is [no need to do this](https://imgur.com/a/M3lZp6j). It took me a while to figure out a way of showing this easily in a single image, hopefully this is pretty clear.

>Google Chrome will ignore your dns and use their own when you have that turned on.

As above, no, it will not. Secure DNS in the default configuration is opportunistic and is used if and only if the current provider (whatever that is - it's not automatically Google) can facilitate it. This will realistically never be the case in a home environment.

Edit: I can provide a .gif showing it resolving if you really need it.",pihole,1646533383.0
9233,comment,1,hziypkb,,">No, a standard reboot will have little to no effect on your network.

Do you not consider ""total loss of resolution"" an effect? If you can still resolve novel addresses while Pi-hole's down, your network is misconfigured.

>It's not like rebooting a router or PC.

See above.",pihole,1646532715.0
9234,comment,2,hzi4mf7,,Is the query log on pihole admin page showing the sites you have been visiting? We need to confirm your PC is actually send DNS requests to the pihole. Try going to a site you haven’t been to in a long time. Then search for that domain in the query log to confirm it’s there.,pihole,1646518435.0
9235,comment,2,hzi8ipp,,So it appears that Pihole is bypassed (not used as DNS or filtering suspended).Can you double check that the client you are testing with has only one entry in its DNS list: the IPv4 address of Pihole. Turn IPv6 off on the PC if in doubt.,pihole,1646520221.0
9236,comment,1,hzi9iwm,,"Try forcing a second dns server on your router to for example your pc, my router used a secondary dns server if i left the second option blank",pihole,1646520695.0
9237,comment,1,hzibgn8,,What is the complete output?,pihole,1646521591.0
9238,comment,1,hzntgcb,,That'll do it too,pihole,1646624342.0
9239,comment,1,hzi1ttc,,"If you google it there are reddit threads and websites with good lists. Add them and update. I run about 15 lists and block about 173,000 domains.",pihole,1646517173.0
9240,comment,1,hzihnxu,,">	Doesn’t Safari also slow things down cause they try to use there DNS (Apple) over your default DNS?

No.",pihole,1646524458.0
9241,comment,2,hzj1pf1,,"Actually you are correct because many people don't use Raspberry Pi for their host. Us ""old timers"" do, however, use Pi's and the reboot time is quite fast. Of course if you are making an inquiry during those 30 seconds, you will fail, if as you say, you are configured correctly. Of course, if you have a built in fail over, there is no interruption.",pihole,1646534222.0
9242,comment,1,hzi54l0,,"Pi hole is displaying recent queries, so at least some traffic is being routed through it",pihole,1646518662.0
9243,comment,1,hzi9c51,,So that looks like it might've worked! Blacklisted facebook is inaccessible and ads aren't being served on other sites,pihole,1646520607.0
9244,comment,1,hzibvpu,,"Server: 2001:558:feed::1

Address: 2001:588:feed::1#53

\*\*server can't find pi.hole: NXDOMAIN

&#x200B;

That first server matches my router's IPv6 DNS server, but I can't change that in router settings. Should I consider using the pi as the DHCP server?",pihole,1646521784.0
9245,comment,1,hzi2iu0,,"So in an attempt to throw everything at the wall to see what sticks, I've got about 800k domains blacklisted, and i've still got ads. showing up on most pages",pihole,1646517493.0
9246,comment,2,hzicdon,,"

>	Should I consider using the pi as the DHCP server?

You can do that, but the router may continue to provide an IPV6 DNS server. 

If you can disable IPv6 on the router, that may be a first troubleshooting step.  Once you get clients using Pi-hole, you can add IPv6 back.",pihole,1646522016.0
9247,comment,2,hzi2ur0,,Sounds like your computer isn’t using the pi-hole as your dns. Make sure your device is manually set to only use the pi-hole IP as its DNS,pihole,1646517644.0
9248,comment,1,hzid29b,,"So after some digging, I found a setting to just turn of IPv6 from the router since I couldn't change IPv6 DNS servers. This seems to have fixed things",pihole,1646522323.0
9249,comment,1,hzi4acu,,My PC already had pi hole set as the primary (and only) DNS,pihole,1646518283.0
9250,comment,1,hzi55p2,,Try opening run>CMD. “ipconfig /release” then “ipconfig /flushdns” then “ipconfig /renew” it will release the ip/flush the dns tables/ then renew the ip.,pihole,1646518676.0
9251,comment,2,hzi5e4n,,"reboot the router too, that can fix oddities as well",pihole,1646518780.0
9252,comment,1,hzi6p7z,,"Tried that along with rebooting the router, and it didnt appear to make a difference",pihole,1646519376.0
9253,post,228,t7j5s1,Blocking these Snapchat domains has been completely ad free for me so far,"analytics.snapchat.com
app-analytics.snapchat.com
usc.adserver.snapads.com
snapads.com
app-analytics-v2.snapchat.com
asia-southeast1-gcp.api.snapchat.com
pica.aeonlucid.com
Us-central1-gcp.api.snapchat.com
Usc.adserver.snapads.com
Geofilters-api.snapchat.com
Cognac-prod.appspot.com
Ase.adserver.snapads.com
Tr.snapchat.com
Loc.sc-jpl.com
Storage.googleapis.com
Snapchat-proxy.appspot.com

I used pi-hole and made my server a static ip address and have my router using my pi as its dns server. Let me know if there are more to add to the list!!

Update: im having some issues with getting snapchat to refresh properly. Ftr i only claim to be a noob with networking and im sure some grouping of these will work. The first four exclusively being blocked will certainly reduce most of the ads and retain full functionality, that I know for sure. More updates to come.

Update2: I really did try and make this work but I can’t seem to blacklist all these domains and refresh stories or subscriptions, but im not upset. I genuinely am able to block ads this way, and if i refresh on a regular network, i can still load new content and watch it all without ads. And that is really what i wanted anyway, theres a lot of cool video series with great content perfect for the phone. I consider watching it all without ads a blessing either way.",pihole,1646515278.0
9254,comment,20,hzk4cad,,">storage.googleapis.com

That's gonna break everything that uses a GCP storage bucket.",pihole,1646558457.0
9255,comment,210,hzi2xwd,,*.snapchat.com,pihole,1646517683.0
9256,comment,9,hzjfh4z,,"I got the \*.snapchat.com joke but wasn't sure if OP was making the same joke but the hard way.

I figured I'd give it a try and sure enough, blocking all of those mean no more snapchat.

Oh well.

I've tried to block ads on snapchat in the past but it seems like no ads means no snapchat.",pihole,1646541372.0
9257,comment,6,hzi4how,,Awesome thank you.,pihole,1646518375.0
9258,comment,2,hzjjtgd,,Is there a way to add all of those at once or do I need to add them individually? Thanks.,pihole,1646543850.0
9259,comment,1,hzjkr2w,,Snapchat has ads?,pihole,1646544396.0
9260,comment,1,hzlmwud,,🤦🏼,pihole,1646589343.0
9261,comment,1,i5j1nly,,"> pica.aeonlucid.com

:(",pihole,1650486851.0
9262,comment,63,hzi7adz,,The real LPT is always in the comments.,pihole,1646519648.0
9263,comment,34,hziaeun,,"Wait i cant tell if this is what i should use, couldnt this block all of snapchat from working? Forgive me for asking, i have a limited understanding of network protocol",pihole,1646521115.0
9264,comment,2,hzl2fno,,\*snapchat\*,pihole,1646580880.0
9265,comment,1,hzi8moh,,Is this a joke or serious? :D,pihole,1646520273.0
9266,comment,1,hziwxvv,,Whoa there computer wiz,pihole,1646531836.0
9267,comment,4,hzjhoeg,,"Excluding the website which blocks all of snapchat, all the domains i listed can be perfectly blocked without disabling snapchat. As long as you dont add *.snapchat.com it should work fine",pihole,1646542626.0
9268,comment,1,hzjhu11,,"I was actually unsure at first if that link suggestion was a joke because i have some rust to shake off with networking stuff, and now i see how obv it was a hella jokey joke",pihole,1646542716.0
9269,comment,1,hzjjwee,,"I added them all individually, but i bet it wouldnt be too difficult to write a script to add them in a list using python or something",pihole,1646543897.0
9270,comment,1,hzjku9l,,"Yeah, theyve been having them but it is relatively recent to have as many as they have been having",pihole,1646544448.0
9271,comment,92,hziblv5,,"Yeah, thats the joke the dude was trying to make.",pihole,1646521657.0
9272,comment,15,hziw7pz,,Yes,pihole,1646531472.0
9273,comment,5,hzjpme0,,I had to add back [us-central1-gcp.api.snapchat.com](https://us-central1-gcp.api.snapchat.com) or I didn't get anything on snapchat.,pihole,1646547395.0
9274,comment,5,hzjps0k,,"You can add them all by entering the following on the command line in a shell window:

pihole -b analytics.snapchat.com app-analytics.snapchat.com usc.adserver.snapads.com snapads.com app-analytics-v2.snapchat.com asia-southeast1-gcp.api.snapchat.com pica.aeonlucid.com Us-central1-gcp.api.snapchat.com Usc.adserver.snapads.com Geofilters-api.snapchat.com Cognac-prod.appspot.com Ase.adserver.snapads.com Tr.snapchat.com Loc.sc-jpl.com Storage.googleapis.com Snapchat-proxy.appspot.com",pihole,1646547492.0
9275,comment,25,hzifxs5,,"Yes, it will block it all.",pihole,1646523651.0
9276,comment,18,hzih9m1,,Dam lmao,pihole,1646524272.0
9277,comment,-1,hzjqekc,,"It’s so true, youre right. And it’s a catch 22 because some of the ads come back. Man i wish there was an easy solution to this 😤",pihole,1646547897.0
9278,comment,1,hzjpzcd,,Thats sooo cool man!! Really appreciate the tip 🙏🏻,pihole,1646547620.0
9279,comment,10,hzkuocc,,The solution is to... not use Snapchat.,pihole,1646577179.0
9280,comment,3,hzl7sv5,,Where else am I gonna watch plastic surgeons work?,pihole,1646583196.0
9281,post,1,t7ig7f,Dnsmasq warnings,"I've been getting a constant stream of warning messages lately, in dnsmasq core: ""DHCP packet received on wlan0 which has no address.""  
My pi is connected to my network wirelessly, and I have it set as the DHCP server.  I don't understand networking enough to solve this from reading similar posts online.  Please help.  
(The system seems to be running fine.  It's just these warnings piling up, that can only be removed one at a time.)  
Thanks.",pihole,1646513142.0
9282,comment,1,hzhtevp,,Did you read the documentation linked under each warning on the diagnosis page?,pihole,1646513405.0
9283,comment,1,i3p8xgw,,I guess this isn't as common or easily fixed as I thought.  What can I do to help you help me?,pihole,1649291532.0
9284,comment,2,i02aw8g,,"I'm having the same issue. The documentation is not helpful. What are some typical resolution steps, or, what are some typical settings that would cause this warning?",pihole,1646883487.0
9285,comment,1,hzhuds6,,"Yes, it says ""No DHCP context has been configured for this interface. Check your DHCP settings.""  Isn't wlan0 referring to my router itself?  I don't see where on the DHCP settings page I'm supposed to configure anything for the router.",pihole,1646513830.0
9286,comment,1,i02hp1s,,">	DHCP packet received on wlan0 which has no address

What is the IP address of the wlan0 interface?",pihole,1646887006.0
9287,comment,1,hzhv0r4,,">	Isn’t wlan0 referring to my router itself?

No. This is referring to the active interface on the Pi-hole host.",pihole,1646514119.0
9288,comment,1,hzhw8j0,,"`wlan0` is a wifi connection. You're probably thinking of `wan`, which is indeed your router's connection to the broader internet.",pihole,1646514660.0
9289,comment,1,i073qn4,,"I didn't know interfaces could have their own IP addresses.  (Unless I never considered that any IP address is necessarily the address of an interface.)  Since my Pi is connected to my network only over WiFi, is the IP address of the wlan0 interface the same as the Pi's own IP address?  But in that case, wlan0 certainly has an address.  
If this is wrong and I'm totally missing the meaning, then where can I check or set the IP address of the wlan0 interface?",pihole,1646969589.0
9290,comment,1,hzp6w47,,So how can I address the underlying issue?  Nothing similar I've found has pointed me to a solution.,pihole,1646658718.0
9291,comment,1,i0755ra,,"`ip addr`

If you generate a debug log, it will have the details of the interfaces and Pi-hole configuration.",pihole,1646970300.0
9292,comment,1,i0elmir,,Both the ip addr command and (what I can glean from) the debug log tell me the wlan0 IP address is 192.168.0.130.  The only interfaces are lo (loopback) and wlan0.,pihole,1647113797.0
9293,comment,1,i3968rf,,"I set a static IP address for wlan0 in /etc/network/configuration.  Running the ifconfig command confirms what was already true, that wlan0 has that IP address.  Yet the warnings continue, saying ""DHCP packet received on wlan0 which has no address.""",pihole,1649011380.0
9294,comment,1,i1ewfvy,,"Any more help, folks?  The support so far has mostly been smugly acting like I should know the solution myself.  I'm trying, but no one's meeting me in the middle.",pihole,1647790534.0
9295,post,2,t7g5ne,"Ubuntu Focal, systemd-resolve and Pi-Hole","Got fed up with NextDNS mishaps, considered ControlD, ended up with Pi-Hole. Very happy, works great. It is now the resolver for the LAN (left DHCP in charge of the router).

But on the machine where Pi-Hole is installed, I still have systemd-resolve set to

https://preview.redd.it/o3zglxwb3ml81.png?width=309&format=png&auto=webp&s=649bf0079d6c5c8095577473a1fb4ad59f81f2d4

**Which is fine, this machine runs nothing that will ever fetch ads or would compromise privacy. But what are the recommended settings for systemd-resolve on the pi-hole host itself?**",pihole,1646506489.0
9296,comment,2,hzhh6mz,,">what are the recommended settings for systemd-resolve on the pi-hole host itself?

If you are not using the Pi to browse (and don't need or want ad-blocking on that client), leave it as you have it.

Using a DNS server other than Pi-hole allows the host device to continue to reach the internet if Pi-hole malfunctions.  This may include system updates, time sync, uploading a Pi-hole debug log, Pi-hole repairs, etc.",pihole,1646507985.0
9297,comment,1,hzhg34e,,IIRC the recommendation is to disable it. See this thread [here](https://www.reddit.com/r/pihole/comments/rte0j0/disable_systemdresolved/),pihole,1646507505.0
9298,comment,2,hzj09hu,,"That's what I figured. I will keep it this way, as the machine running pi-hole does nothing else but run pi-hole and two more apps that are open sourced and I trust to be safe (such as Plex). Thanks!",pihole,1646533500.0
9299,comment,1,hzj032w,,"It seems that it's supposed to be disabled when it interferes with Pi-Hole, which is obvious in itself. This is not a recommendation to disable it when it co-exists with Pi-Hole, which is the point of my question. Thanks.",pihole,1646533408.0
9300,post,1,t7cw2x,Pihole has some problems logging requests when IPv6 is on,"**Setup:** Raspberry PI on local network and Vodafone modem.

Since I enabled IPv6 I had to change the interface settings from ""**Allow only local requests**"" to ""**Respond only on interface eth0""** because I had a weird dnsmasq error telling me that request from the client ""net-x-xx-xxx-xxx.cust.vodafonedsl.it"" (with the x being my public IP) are being ignored because outside my local network.

I did some research and I found that this is a common problem with IPv6. Now most of my requests are from this ""net-x-xx-xxx-xxx.cust.vodafonedsl.it"" as you can see [here](https://imgur.com/a/4E1qHLa). 

I want to ask mainly two questions:

1. am I right not to worry about this client outside my local network? (I think so, but better safe than sorry)
2. Is there a workaround to actually see which client web requests are coming from?",pihole,1646497226.0
9301,comment,2,hzhyzxy,,"Is it possible that this name is your router? 

Is it possible that the clients use the router as DNS and the router uses Pihole as upstream DNS? This would explain why most queries are coming from the router.",pihole,1646515898.0
9302,comment,1,hzjx84n,,"Yes, I used the modem DHCP server because I can't disable it and use PiHole one. I put the IPv4 and the IPv6 PiHole DNS in the router settings. Is this what I'm supposed to do?",pihole,1646552830.0
9303,comment,1,hzk3eal,,"There are two different places, where you can put the Pihole‘s addresses into an „DNS“ field in your router config:

1. The DNS the router has to use (for its own purpose or if it acts as proxy for client requests). The clients remain using the router as DNS.

2. In the DHCP section: this DNS has to be given to the clients when they are configured via DHCP.

These result in these flows of DNS queries:

1. client > router > Pihole > resolvers in the Internet

2. client > Pihole  (> router ) > Internet

As you can see Pihole receives queries from 1: always router 2: the individual client

(2) is recommended. You have (1) mainly.
IPv6 works differently, so (2) configured in IPv4 might leave a different structure in IPv6. So the client might still use the router as DNS when using IPv6 for a query.
Clients can be locally configured to use what they want, difficult to enforce use of a particular set of DNS.",pihole,1646557693.0
9304,comment,1,hzkb6ec,,"There's no way I can do (2) on my router settings and I can't disable DHCP either. So I'm stuck not knowing from what client requets are coming from. Well, not an issue but I needed a confirmation.",pihole,1646564187.0
9305,comment,1,hzkbiho,,"You could disable DHCP in the client (enter settings manually. 

Or - if your ISP box is that restrictive - you could try to put the box in a modem-only mode (this means to buy your own router which you have full control over).",pihole,1646564470.0
9306,comment,1,hzkdat8,,"I can enter settings manually only on PCs because I can't change IPv6 DNS on android. Maybe I'll buy a router but again, is not that big of a deal.",pihole,1646565933.0
9307,post,3,t7bu5f,DHCP options,"is it possible to use pihole as dhcp and set a static lease but with other DNS server for that lease?

&#x200B;

Long story

I changed ISP and I have a new router and TV Box. The router DHCP dont let me change the DNS settings so I have to use PiHole as DHCP and DNS but the TV Box dont let me change its network settings, relies only on DHCP. the problem is it only get the tv service from the ISP DNS.",pihole,1646494284.0
9308,comment,1,hzgm0m9,,"You can do this with a dnsmasq setting. 

https://discourse.pi-hole.net/t/how-can-i-use-pi-hole-for-all-my-devices-except-one-or-more/3372",pihole,1646494652.0
9309,post,5,t79xyo,Create an empty adlist?,"So I'm using a Pihole setup to explicitly block some websites for a client (largely using this setup because it let's me have PiVPN running too and of the client ever decides they want adblocking they already have ehat they need in place). I don't have the default adlist installed so on a few of these blocked pages instead of the dns refused page I get ""you don't have an adlist installed"". I'm not using this for actual ad blocking, all I have is the websites I want blocked in the blacklist, so is there a way I can add an empty adlist or create my own out of these blacklisted sites so people don't see this adlist page?",pihole,1646488543.0
9310,comment,1,hzgfw62,,"> I don't have the default adlist installed so on a few of these blocked pages instead of the dns refused page I get ""you don't have an adlist installed""

Please elaborate?  What DNS refused page?",pihole,1646491802.0
9311,comment,1,hzgklah,,"The usual ""error dns connection blah blah"" whatever the default page most browsers throw up for a DNS connection not going through is. Instead it actually pulls up a page from the Pi saying ""no adlists installed"". Now that may be because I was testing from the Pi itself instead of a separate computer, I didn't think of that until now.",pihole,1646494015.0
9312,comment,2,hzgl13p,,A screen shot would be helpful here.,pihole,1646494218.0
9313,comment,1,hzinfyg,,"Fair enough you're right.

https://i.imgur.com/jVyblwa_d.webp?maxwidth=640&shape=thumb&fidelity=medium

Vs. this:

https://i.imgur.com/jVyblwa_d.webp

Both are blocked by a blacklist entry while I have no adlists installed, but display different messages. I assume the no adlists message would be gone if I had an adlist installed, but I don't need an adlist.",pihole,1646527203.0
9314,comment,1,hzjijay,,">https://i.imgur.com/jVyblwa_d.webp?maxwidth=640&shape=thumb&fidelity=medium

>Vs. this:

>https://i.imgur.com/jVyblwa_d.webp

Were these supposed to be different links? The two URLs have identical image identifiers, with the exception of the former having a few needless view modifiers tagged on to the arse end.",pihole,1646543114.0
9315,comment,1,hzl2zs4,,lordy I don't know what's going on they were different links I copied at the time but damn imgur on mobile sucks these days.,pihole,1646581129.0
9316,post,1,t77uok,Asking about regex on top of block list and stats privacy,"Hello,

I'm using piHole in a Lab, I would like to know if :

1/ Is it possible to add regex on top of a Block list, like my list ( Group Management -> Adlists) contain [domain.com](https://domain.com) and I want to block all subdomain on [domain.com](https://domain.com) (www. fr. etc...) via regex and not having to add them manually.

2/ About stats on the main page, I see that i can show Top cllient/domain or top domain or none. I would like to see only Top Domain since I dont want to discriminate/know any of my clients.

Thanks !",pihole,1646480927.0
9317,comment,1,hzgg6nj,,">Is it possible to add regex on top of a Block list

No.  Adlists (blocklists) contain domains only.

>I would like to see only Top Domain since I dont want to discriminate/know any of my clients.

Unless one of the privacy levels will meet your needs, you will have to modify your local code.

https://docs.pi-hole.net/ftldns/privacylevels/",pihole,1646491945.0
9318,comment,1,i04wgl5,,"Thanks for your reply.

Ok its not possible to add regex on top a list, but if I add the regex into the list directly is it ok ?

Like   "".\*\\.example\\.com"" or ""\^(.\*\\.)?domain\\.com$"" directly set in my blocklist ?

Thanks !",pihole,1646936023.0
9319,comment,1,i050hmr,,">if I add the regex into the list directly is it ok ?

No.  This will be ignored since it isn't a domain.

You can add a regex as a local domain entry (either blacklist or whitelist), but not in an adlist.",pihole,1646937562.0
9320,comment,1,i050pju,,"Ok thanks !

I guess I will process my all list and generate and new one with entries with most common subdomain then :'(

Thanks !",pihole,1646937649.0
9321,post,31,t77dzl,Initial page loading is slow,"Hi all,

I have recently redeployed pihole onto my home network running on my old Pi.

Everything is working well and even for a old pi its very stable and seems to be handling the load no problem. However I am noticing a issue when loading websites on my computers/phone/tablet etc.

It seems initial page loads are taking 10 to 20 seconds depending on the content, once the initial load is done its responsive.

Google result pages seem to be near instant and pages with just text, but loading sites like the [theregister.com](https://theregister.com) or [pistonheads.com](https://pistonheads.com) take a good while. Could it be related to image loading?

The Query logs seem fine though it does look like some image querys are hitting 50 to 100ms. The load on the pi is good so I don't think its a hardware issue. If I VPN out my network everything is fine so I know it isnt a issue with my  connection.

Any advice?

Cheers,

vale",pihole,1646478996.0
9322,comment,6,hzgger0,,Change your upstream DNS server in Pi-hole and see if the problem resolves.,pihole,1646492054.0
9323,comment,5,hzhgncv,,"Point your computer to a public DNS (such as 1.1.1.1, 8.8.8.8) instead of your pihole and see if the problem persists.

If it’s still slow, it’s not the pihole and something else on your home network. If it’s not slow, it’s more than likely the pihole.",pihole,1646507751.0
9324,comment,3,hzgeqq6,,just so you know you aren't loading pages through the pihole. It just handles the DNS records to block ad sites. You can check it by pinging a website from a terminal or CLI. Personally I never had any problems on a Rpi as it's quite lightweight unless you are running/using lots of other services constantly? MySql? Apache2? Samba? Though it should still work fine with them.,pihole,1646491228.0
9325,comment,1,hzj2glt,,"If you load a page and it is slow and the you close the browser, reopen it and try to access that same page, is it still slow?",pihole,1646534602.0
9326,comment,3,hzgun48,,"Already tried this one, switched between Quad9, Cloudflare and OpenDNS and no change. I do have DNSSEC enabled.",pihole,1646498392.0
9327,comment,1,hzkjyzk,,That certainly improved things. I have switched back now and changed the DNS settings around a bit and things are now actually working better. Strange! I will keep a eye on it.,pihole,1646570940.0
9328,comment,1,hzgvdf1,,"Hey, yeah sorry I am aware of that. In my post I mentioned that I could see querys like the following:

2022-03-05 16:41:19 	AAAA	[www.theregister.com](http://www.theregister.com)	cray.xxxxx.local	OK (cache) INSECURE	NODATA (0.8ms)

Which seems fine but then I see slow related query's which likely where the site is loading its images from:

2022-03-05 16:41:18 	DS	regmedia.co.uk	pi.hole	OK, answered by dns11.quad9.net#53 INSECURE	NODATA (61.6ms)

They are much slower, not sure if that is a factor or not.",pihole,1646498705.0
9329,comment,2,hzkk13n,,"A full reboot did in fact help and I am also seeing faster resolution through chrome and not just firefox.

Changing around the DNS providers also seems to have helped a bit too.",pihole,1646570978.0
9330,comment,1,hzgx4r7,,I'm getting an average of 18ms with both of them. I'm using a smart dns service for access to American tv networks. Might be worth trying a different DNS provider for Pihole to see if that the problem. I used to use cloudflared but not with cloudflare to use DNS over HTTPS. Pretty straightforward to install plus it's stops your ISP seeing your requests. they still get them from the IP address you access but why make it easy for them.,pihole,1646499445.0
9331,post,2,t76y2a,"Sometimes is the client the correct device, sometimes the router","or, yet another ""my router is the Top Device on the List question""

First of all, i dunno what else i could name the title.  
its been now two weeks with reading and tinkering and today is finally the point where i ask for help.

I still tinkering with pihole and most of the stuff is running. But there is this weird behavior i saw today:

I connected my Laptop to the lan and checked the pihole stats, where i can clearly see that the requests from the same device will be listed in pihole as the router OR the correct device.  


Here is an example Picture (and yeah i know i still need to blog that damn amazon stuff)

[https://imgur.com/a/8fjEFGc](https://imgur.com/a/8fjEFGc)

Openwrt.lan, fc00::1 and sowi-R1070 are all REQUESTS from the same device but as you can see in the client List ""different"" devices.

My home configuration right now is the following:  
Laptop -> switch -> router -> Modem (Internet)

I am currently running  Pihole on a computer with Ubuntu on a Docker Container   
(Docker Tag 2022.02.1 Pi-hole v5.9 FTL v5.14 Web Interface v5.11)

The DHCP Server is the Router (will be changed in the future to Pihole)  
The DNS Server is Pihole.

My router is running  OpenWrt 21.02.1 r16325-88151b8303",pihole,1646477149.0
9332,comment,1,hzgfwjb,,"So your issue is just that you don‘t like the router showing up with different identifiers in the log?

Why is the router asking for web.de? This might be a query from a client via IPv6 which bypasses Pihole (because you did not care for IPv6) and then asks Pihole as upstream source.

So one name is related to A queries via IPv6. Another to AAAA queries via IPv4. See no pattern to the third. But I guess that different types if queries cause these name spread.",pihole,1646491807.0
9333,comment,1,hzgn10c,,"sorry english isnt my main language.

FireTV-Stick has absolutly no issues and is workin fine.

But the clients openwrt and ""sowi-r1070"" are the same. but i dunno why it shows as ""openwrt"" AND ""sowi-r1070""

lets say, i open on my laptop [web.de](https://web.de) (which i used for a test) suddenly in the client list NOT ONLY my client ""sowi-r1070"" appears on the list but ALSO the openWRT Router (but the request was obviously from ""sowi-r1070"").

but the requests (besides the fire stick) are ALL from my Laptop (sowi-r1070) none of them are from the router themself.

&#x200B;

>a client via IPv6 which bypasses Pihole (because you did not care for IPv6)

i tried to configure pihole for ipv6 question is now, how do i find out what mistake i made with the ipv6 queries?

&#x200B;

sorry, again i hope this time i explained myself a bit better \^\^""

&#x200B;

>So one name is related to A queries via IPv6. Another to AAAA queries via IPv4. See no pattern to the third. But I guess that different types if queries cause these name spread.

Gosh i am so damn Stupid... just opened the container and did 

ping6 2001:4860:4860::8888

getting 100% Package lost. i didn't configure ipv6 properply thanks for the hint ;)",pihole,1646495114.0
9334,comment,1,hzgqkx3,,"I am confused: In §3 you write that sowi-r1070 is the router. In the following text this is the name of your laptop. What is true?

There are two schemes to put Pihole into your network: a) configure all clients to use Pihole as DNS (which has to have an upstream DNS server it can ask: router and/or external resolvers) or b) clients ask the router (so usually what they did before) and you just tell the router to use Pihole as upstream DNS (instead of ISP‘s DNS or something else)

Because of IPv4 and IPv6 can live side by side you could have different architectures in parallel. 

When Pihole reports end user queries coming from the router then this query followed type (b). Not sure if you intended to do so. I implemented (a), so the router does not query Pihole. I use the routers DHCP to configure clients to use Pihole as DNS.

So if sowie-r1070 is your client then the router appears with only two names in the list. ddwrt for queries via IPv4 and fc00::1 for queries via IPv6. This seems ok. 

My take:
- think about your preferred arcitecture (a) or (b) and try to implement it, if you want it „clean“
- I cant see a real issue, so you might just leave it and use it?",pihole,1646496667.0
9335,comment,2,hzm71eh,,"hey,

well yesterday was a ""its better to just walk away from the computer"" day.

which i did and it helped me to solve the problem (i think?).

So to explain everything (which i hope helps people who got simliar problems):

Device A: my Laptop - sowi-R1070

Device B: My router - Openwrt.

What exactly was the Problem:

i browsed on the Internet, and in the client list sometimes my Laptop appeared and sometimes my Router. But ALL the requests came from my Laptop (smart Devices at home excluded). It was kinda like [those posts](https://discourse.pi-hole.net/t/why-do-i-only-see-my-routers-ip-address-instead-of-individual-devices-in-the-top-clients-section-and-query-log/3653) which i read a lot while i tried to figure out my Problem.

What did i do to ""fix it"" (it seems fixed so far):

After reading the IPV6 Post from you, i edited my Docker Compose File which now looks like this:

    ---
    version: ""3""
    
    volumes:
      cfg:
      dnsmasq:
    
    services:
      pihole:
    	container_name: pihole
    	image: pihole/pihole:latest
    	hostname: piholeDocker
    	ports:
    	  - ""53:53/tcp""
    	  - ""53:53/udp""
    	  - ""80:80/tcp""
    	environment:
    	  - TZ=Europe/Berlin
    	  - IPV6ENABLED=true
    	  - ServerIP=192.168.1.11
    	  - ServerIPv6=fd68:c673:288b:0:56bf:64ff:fe7b:c137
    	  - VIRTUAL_HOST=pihole.lan
    	  - WEBPASSWORD=UX8Ro)l2""H,iZthL6tlp5g&bO~
    	  - FTLCONF_ANALYZE_ONLY_A_AND_AAAA=true
    	  - FTLCONF_RESOLVE_IPV4=yes
    	  - FTLCONF_RESOLVE_IPV6=yes
    	  - FTLCONF_REFRESH_HOSTNAMES=ALL
    	# Volumes store your data between container upgrades
    	volumes:
    	  - cfg:/etc/pihole/
    	  - dnsmasq:/etc/dnsmasq.d/
    	dns:
    	  - 127.0.0.1
    	  - 1.1.1.1
    	# Recommended but not required (DHCP needs NET_ADMIN)
    	#   https://github.com/pi-hole/docker-pi-hole#note-on-capabilities
    	cap_add:
    	  - NET_ADMIN
    	networks:
    	  - net
    	restart: unless-stopped
    networks:
      net:
    	enable_ipv6: true
    	driver: bridge
    	driver_opts:
    	  com.docker.network.enable_ipv6: ""true""
    	ipam:
    	  driver: default
    	  config:
    	  - subnet: 172.11.0.0/16
    		gateway: 172.11.0.1   
    	  - subnet: fd00::3:0:0:0/80
    		gateway: fd00::3:0:0:1

afterwards i purged my two volumes (just to be sure) and rerun everything. Which ended in Error Messages (that was the moment where i needed to call it a day).

Solution to that problem was: i forgot to run

    sudo systemctl disable systemd-resolved

sudo systemctl stop systemd-resolved

i was very tired yesterday...

checked the settings on Openwrt:

interfaces -> Lan -> DHCP Server -> Advanced -> DHCP-Options -> 6,SERVERIP

in windows:

ipconfig /release6; ipconfig /renew6;ipconfig /release;ipconfig /renew; ipconfig /flushdns

(better be sure)

and opened a website and BAM, MAGIC!

I see in Pihole ONLY Device A sending requests for a website and not Device A and B for the same website :D

**TL:DR;**

purged everything, edited and reenrolled my docker-compose.yaml, Network seems happy :3

Still a huge thank you for tryin to help me, even if i wrote gibberish like a drunken dumbass yesterday.

i think i just was too frustrated and maybe something in the volumes was wrong. But now it seems like Pihole does what it should do :)

EDIT: Formatting",pihole,1646597648.0
9336,comment,1,hzgszq5,,">	b) clients ask the router (so usually what they did before) and you just tell the router to use Pihole as upstream DNS

More precisely, this is done by the DHCP server (which doesn't have to be the router), and the DHCP server specifies the DNS to use. 

Configuring the router to use Pi-hole is not the preferred option.",pihole,1646497701.0
9337,comment,1,hzm7axb,,">Configuring the router to use Pi-hole is not the preferred option.

ok right now my router is the DHCP and tells the network that the PiHole is the DNS, why shouldn't i do it that way?  


Since i am quiet new to docker and thougt Pihole would be an amazing start to learn it (which is, but also frustrating \^\^) setting up the Pihole as the DHCP is the next step for me :)",pihole,1646597760.0
9338,comment,1,i5f4x1y,,">Configuring the router to use Pi-hole is not the preferred option.

I am also trying to get the logs to show individual client as opposed to the router.

I currently have the router (Netgear RAX30) to be used as the DHCP server, is disabling this and enabling it on Pi-hole the only way to show specific clients?

What do you mean by the above? What IS the preferred option?",pihole,1650415631.0
9339,comment,1,i5f7k3l,,Was setting up Pi-hole as the DHCP server the only way to get individual client logging?,pihole,1650416763.0
9340,comment,1,i5qik1d,,"As mentioned as before, my Router ist still the DHCP. Never got an reply to my question why i should Uwe tue pihole as dhcp",pihole,1650627124.0
9341,post,2,t6vv0m,ignoring query from non-local network my.wan.ip (logged only once),"Hi all,

I get this error about once a day or so.  


 ignoring query from non-local network \*.\*.\*.\* (logged only once) where \*.\*.\*.\* is my WAN ip.

Any idea why a DNS request would come from my WAN IP? Should I just continue to ignore it or should I enable requests on eth0?

The PiHole is behind a Dream Machine Pro.

&#x200B;

Thanks",pihole,1646436255.0
9342,comment,2,hze2mti,,"Is the message coming from dnsmasq?  I saw a single instance of that a couple of days ago.  it was a 169.x.x.x address, I figured it was someone trying to crack my VPN but, of course, it wasn't; almost certainly something on my network was generating a 169.254.x.x address and trying to connect to my pihole (perhaps it was reusing an old DNS server address?)

[https://www.rfc-editor.org/rfc/rfc5735](https://www.rfc-editor.org/rfc/rfc5735)",pihole,1646440837.0
9343,comment,1,hze6y1y,,"I’ve seen that on my UDM Pro as well. You probably have the Pi-hole IP as the WAN DNS on the UDM Pro.

It’s the UDM Pro using its WAN IP to make a DNS query which is ignored, it’ll send another DNS query using its local IP just after the first one. It’s a bug from the UDM Pro that doesn’t initially recognize the local IP of the DNS server",pihole,1646442772.0
9344,comment,1,hzem5pw,,"Check if you have opened port 53, in your firewall settings and this:

https://www.grc.com/intro.htm > services > shields up! > proceed > all service ports",pihole,1646449686.0
9345,comment,1,hze6ha6,,"Looks like it's my ISP, strange because port 53 is blocked",pihole,1646442565.0
9346,comment,2,hzestj7,,I changed it to DHCP DNS in network setting but still getting those requests.,pihole,1646452909.0
9347,comment,1,hzeyvty,,"When you go to settings > internet > WAN > DNS servers, do you see the IP address of your Pi-hole?",pihole,1646456056.0
9348,comment,1,hzf1sdk,,Nope just CloudFlare,pihole,1646457658.0
9349,comment,1,hzf68nt,,"When you said you changed it to DHCP DNS in network settings, what did you mean by ‘it’? Did you change the network settings of the UDM Pro on the Devices page?",pihole,1646460309.0
9350,post,1,t6v91g,Fresh Docker install on fresh Ubuntu 20.04 server install. -2 Domains on Adlist and no blocking?,"I have just installed pihole via docker container on Ubuntu 20.04. As you can see in this screenshot of my dashboard below, sumpin ain't right.

[https://imgur.com/a/4DUIgad](https://imgur.com/a/4DUIgad)

I had pihole working on another machine, but am trying to move my home server functions to a new machine.

I have a vanilla install of Ubuntu 20.04 server + docker-ce, and a vanilla docker-compose.yml. The only thing I changed from the standard docker-compose.yml was the WEB\_PORT environment variable and the the corresponding network port (redundant, I know, but that is how I had it on the old machine).

Does anyone know what's going on?

Here the debug token thingy:

[https://tricorder.pi-hole.net/GYh9kYk2/](https://tricorder.pi-hole.net/GYh9kYk2/)

And here is my docker-compose.yml

    version: ""3""
    
    # More info at https://github.com/pi-hole/docker-pi-hole/ and https://docs.pi-hole.net/
    services:
      pihole:
        container_name: pihole
        image: pihole/pihole:latest
        ports:
          - ""53:53/tcp""
          - ""53:53/udp""
          - ""67:67/udp""
          - ""8080:8080/tcp""
        environment:
          TZ: 'America/New_York'
          WEBPASSWORD: ***********
          WEB_PORT: 8080
        # Volumes store your data between container upgrades
        volumes:
          - './etc-pihole/:/etc/pihole/'
          - './etc-dnsmasq.d/:/etc/dnsmasq.d/'
        # Recommended but not required (DHCP needs NET_ADMIN)
        #   https://github.com/pi-hole/docker-pi-hole#note-on-capabilities
        cap_add:
          - NET_ADMIN
        restart: unless-stopped",pihole,1646434481.0
9351,comment,1,hzdo88j,,"You have an interface problem. Clients can't reach Pi-hole. 

    *** [ DIAGNOSING ]: Name resolution (IPv4) using a random blocked domain and a known ad-serving domain
    [✗] Failed to resolve  on lo (127.0.0.1)
    [✓] No IPv4 address available on eth0@if16
    [✓] doubleclick.com is 142.251.45.110 via a remote, public DNS server (8.8.8.8)

And your gravity list is empty. 

    *** [ DIAGNOSING ]: Info table
       property              value                                   
       --------------------  ----------------------------------------
       version               15                                      
       Last gravity run finished at: 

       ----- First 10 Gravity Domains -----",pihole,1646434685.0
9352,comment,1,hzes38j,,"I had something very close to this issue very recently, and it turned out to be

FTLCONF\_REPLY\_ADDR4:  [xxx.xxx.xxx.xxx](https://xxx.xxx.xxx.xxx)

This one line sorted it out for me using docker compose.

The site that got this up and running was the below

[https://medium.com/alex-blog/automated-dns-ad-blocker-with-pi-hole-and-docker-8e3dae805405](https://medium.com/alex-blog/automated-dns-ad-blocker-with-pi-hole-and-docker-8e3dae805405)

I should mention for me and the config linked is for a pihole system not acting as a DHCP, eg. points towards a router for DHCP",pihole,1646452542.0
9353,comment,1,hzdoqsc,,"Thanks for the response. I'm afraid I'm not following though... pihole is getting requests from machines on my network, or at least that counter is going up. Also, I'm able to hit its web interface from other machines on my network.",pihole,1646434895.0
9354,comment,2,hzevtqd,,"Thanks. I actually found a different workaround that seems to be working.

I remove the ""ports:"" section from my docker-compose file, and in its place added

`network_mode: host`

added set the INTERFACE environment variable to eno1, the name of my ethernet interface.

It now seems to be working.

If I get ambitious, I might try the environment variable you suggested and see if that works as well. But, I think in my situation, host networking is fine.",pihole,1646454446.0
9355,comment,1,hzdoww3,,Restart your container and see if that improves things.,pihole,1646434965.0
9356,comment,1,hzdpell,,"Oh I've tried that many times :) In fact, I even re-installed the underlying OS as I had messed around with KVM virtualization previously and thought that had screwed up some networking on the machine.

At this point, the Ubuntu install is very fresh - no virtualization installed. No other docker containers deployed yet either.

(I also deleted the image and re-pulled it. Same result)",pihole,1646435166.0
9357,post,3,t6rjle,SOLVED - pihole on portainer - pihole-FTL dies,"If anyone happens to run into this problem with pihole-FTL not starting on pihole running in a portainer container, make sure your /etc/pihole and /etc/dnsmasq.d volumes are actually different volumes, if you use the same volume the pihole lists and GitHubVersion file also get read in addition to the dnsmasq files which blows pihole-FTL up. #learningthehardway",pihole,1646424089.0
9358,comment,2,hzdej9y,,Thanks. This was driving me nuts.,pihole,1646430806.0
9359,comment,1,i0tztki,,Yup that worked for me... thank you. now to get past it not letting me log in or showing 0 ip address.,pihole,1647396275.0
9360,post,1,t6rgvu,Found stream deck plugin (news to me!) - need to figure out how to handle two API keys,"[Found this accidentally](https://apps.elgato.com/plugins/us.johnholbrook.pihole) today.

[Github link](https://github.com/johnholbrook/streamdeck-pihole). It indicates that it can control multiple Pi-hole instances (I have two).

Except I can't figure it out and there doesn't seem to be much documentation on github. I figure someone is more experienced with this than myself.  

Help?",pihole,1646423890.0
9361,comment,2,hzd02a6,,"Ask the developer of that app.

https://github.com/johnholbrook/streamdeck-pihole/issues",pihole,1646425287.0
9362,post,0,t6mu3s,Emails not loading properly on iOS mail app,"Does anybody have any insight into this. 

Most emails that I receive from the few other Blume stores that I am subscribed to, do not load properly. For example if I receive an email from new egg, only the text will load but not all the images or links to products. 

And I haven’t had any success identifying anything specific that is being blocked by Pi-hole when I access emails. 

Any idea how to resolve this?

Edit: I see the app-measurement.con domain being blocked around the time I try to read emails. Could that be it?",pihole,1646411417.0
9363,comment,3,hzc168r,,"My wife was having this issue and it ended up being an Apple security setting, nothing to do with Pi Hole.  check Settings>Mail>Privacy Protection.  If it’s turned on that is likely doing it.",pihole,1646411714.0
9364,comment,2,hzc2ezd,,"That solved the problem, thanks!

It was weird because the timing was as around when I setup Pi-hole. I guess I just have upgraded to iOS 15 at the same time.",pihole,1646412203.0
9365,comment,1,hzcupqk,,"That makes no sense. A quick Google search shows that mail privacy protection just serves email to the device through a proxy server. Similar to how chrome or Firefox used to let you ""speedup"" your browsing by getting the pages through their proxy with everything compressed.

If the proxy url isn't blocked, pihole shouldn't have any effect on this feature.",pihole,1646423244.0
9366,comment,2,hzc2mh5,,"yeah, I had the same weird timing as well.   My wife was convinced I broke her email and I couldn’t find anything.  I finally said, show me and noticed it was an apple thing and found the setting.",pihole,1646412285.0
9367,comment,1,i3cx9os,,I’m having this issue as well when using pinhole however I’m still on iOS 14.8 and “Load Remote Images” is enabled for email. Works fine on cellular. Any other thoughts?,pihole,1649083928.0
9368,comment,1,hzf7npl,,"Mail privacy protections has two options, one is to hide IP address and the other is to block all remote content. It looks like block all remote content was enabled",pihole,1646461203.0
9369,comment,1,hzc32k1,,Funny my wife has been complaining I broke the internet on her phone.,pihole,1646412461.0
9370,comment,1,i25ds3p,,"I'm having the same issue when it comes to email signatures. If the image is inserted into the email client signature box, it appears on the iOS Mail app, but when the signature is developed in HTML and inserted into the email client signature, it doesn't appear in iOS Mail app. If we don't use the email signature formatted with HTML, the email signature looks like total crap. Any ideas as to why it wouldn't appear when the remote content isn't being blocked? I'm pulling my hair out trying to figure this shit out.",pihole,1648262995.0
9371,post,1,t6lutl,Pihole.log cannot be flushed during pihole -f,"I'm trying to just clear my logs as I do from time to time to start fresh and started seeing this error.

I've tried repairing and even reinstalling and it persists. I assume due to my lack of Linux skills I'm not understanding the issue.

Anyone able to assist? I'm okay if it's just something stupid I'm missing haha 😅

https://i.imgur.com/uaHk0Ue.jpg",pihole,1646408820.0
9372,comment,2,hzc9z3e,,https://github.com/pi-hole/pi-hole/issues/4611,pihole,1646415178.0
9373,comment,2,hzcno4o,,"Sigh. I knew I was missing it lol. 

Sounds like you guys are on top of it. Thanks jfb. I appreciate you.",pihole,1646420544.0
9374,post,284,t6l0xr,Trying to watch Paramount +,,pihole,1646406561.0
9375,comment,65,hzbsvd1,,I do a quick “disable for 1 minute” to start the show I want and it works after that. But yeah it’s ugly.,pihole,1646408422.0
9376,comment,41,hzbpfmg,,"I can’t get the Paramount+ iOS apps to not crash when they use Pi-hole. Plus that streaming service as a whole is, even compared to the fetid cesspool of streaming services, a landfill of ads and garbage.",pihole,1646407008.0
9377,comment,101,hzcpare,,"hrm, you're not watching paramount+..

paramount+ is watching you...

*edit: woah.. you guys are too kind. thanks for the upvotes*",pihole,1646421170.0
9378,comment,29,hzbp8ye,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1646406931.0
9379,comment,8,hzcu0uf,,"There's no real question here... But when I was using pihole, I used to use anudeep's whitelist scripts to un-break common services like this.

https://github.com/anudeepND/whitelist",pihole,1646422984.0
9380,comment,20,hzdaggn,,"Pihole helps you reconsider who you give your hard earned money to

Companies that track and profile the hell out of paying customers while shoving endless commercials down their throat don’t deserve to be in business imho",pihole,1646429250.0
9381,comment,5,hzc0dlq,,I watch Paramount Plus through Amazon prime.  Haven't noticed anything too off in pihole.,pihole,1646411403.0
9382,comment,17,hzd6yba,,This is why I pirate,pihole,1646427919.0
9383,comment,3,hzcnakr,,Great and I was about to subscribe,pihole,1646420398.0
9384,comment,4,hzcu2t3,,"My one year sub for half off ended today and I just decided to not renew. Really didn't use it, and in large part it was due to how many issues it had with my Pi Hole, especially when trying to use it via a web browser to watch something during lunch. Barely ended up using it so I decided to just wait for the new season of Picard and Strange New Worlds to finish up, then I'll sub for a month to binge them. Other than newer Star Trek series there's really not much else I care to watch on the service.",pihole,1646423004.0
9385,comment,5,hzeu8vr,,"Here’s a whitelist someone put together for Paramount+:

https://github.com/schrebra/paramount.plus.whitelist/blob/main/hosts",pihole,1646453638.0
9386,comment,9,hzcmcz3,,Paramount is the worst streaming service out there when it comes to your privacy! It won’t even work without Location service turned on!,pihole,1646420043.0
9387,comment,2,hzdl80p,,Cross post on r/privacy,pihole,1646433455.0
9388,comment,3,hzbtrkw,,Is there a question?,pihole,1646408778.0
9389,comment,4,hzbwytl,,"This is pretty much the story for any streaming service. You should see what Pluto TV, Disney Plus, Discovery Plus and Hulu does to Pi-Hole.",pihole,1646410058.0
9390,comment,2,hzdy8x5,,"You saw that $1 promo, too? I spent 20 minutes trying to figure out why it wouldn’t play. Figured it was a crap app since on AppleTV I couldn’t even browse the home screen. It was stuck on the menu overlay. Could browse by showing all shows, but it beachballed every time I started something. Eventually I loaded it up in my browser and it refuses to start a video saying I’m blocking ads and that I need to disable that to continue.

WTF? Pi-hole confirmed it. Research a little more. Sure enough all tiers show ads whether they’re internal promos on $10/mo or external ads on the $5. F that. Canceled subscription 25 minutes after signing up and let them know in the custom comments why.",pihole,1646438920.0
9391,comment,0,hzd3wxc,,"""It's like a free video service you have to pay for!""",pihole,1646426770.0
9392,comment,1,hzcuaxd,,"On my Chromecast device, the video loads but there's an incredibly distracting blue bar that shows up and goes away at the bottom of the screen.

Only way for me to use p+ on my tv is if I use apple tv and manually change the DNS server to quad9 or anything other thany pihole 

Videos don't load at all on my PC when using pihole",pihole,1646423089.0
9393,comment,1,hzd869c,,"If you want Paramount+ and don't mind Amazon, subscribe through Prime video. I'm not sure if you need a Prime membership too, but I'd guess yes.",pihole,1646428384.0
9394,comment,1,hzd8seq,,Yuck.,pihole,1646428621.0
9395,comment,1,hzdj36c,,I had to disable pihole for my appleTV in order to get it to work,pihole,1646432598.0
9396,comment,1,hzdof43,,Run vlans and guest WiFi network that isolates clients.,pihole,1646434764.0
9397,comment,1,hzdu969,,"Thanks for posting.  Until last week, I had not had any problem with Paramount+ or HBOMax.  Last week, both stopped working.  I’ll try the allow for 30 seconds to see if it starts working.",pihole,1646437212.0
9398,comment,1,hzet8ic,,"Whenever I have a problem with something getting through that should/shouldn't, I just watch the stream live on the pihole. 

Log into your pihole, and watch the tails. In terminal, which I prefer, I use the Pihole -t command.  Then CTRL-C to stop it. 

But you'll see in real time what is being blocked or going through. It's real time, as opposed to the admin panel thing - which has too much of a lag to be useful.",pihole,1646453120.0
9399,comment,1,hzf0edd,,"I can play feature content, but no extras or trailers. Pi-hole reveals a bunch of calls to ad.doubleclick... domains, that when briefly allowed, enables extra content to play. SO freakin annoying.",pihole,1646456868.0
9400,comment,1,hzfzmbf,,Maybe your list is too restricted.  But I don't have anything whitelisted and Paramount+ works fine.,pihole,1646482253.0
9401,comment,1,hzjzh4e,,I was successful with whitelisting both: cbsinteractive.hb.omtrdc.net & saa.cbsi.com,pihole,1646554576.0
9402,comment,1,hzkkwdt,,u/sirdave82 I added (\\.|\^)s0\\.2mdn\\.net$ and I got past it. Dunno if thats the correct way to do it but got me going.,pihole,1646571556.0
9403,comment,0,hzdsa9d,,"Paramount+ is essential for my four year old, especially when I had a meeting when she was home with me. I needed the following three domains for Paramount+ to work.  I occasionally have trouble on my newest generation AppleTV with subsequent episodes not playing (just a spinning loading circle) sometimes requiring a device reboot. The older Apple TV 4K works fine though. 

ads.play.cbsi.video	
cbsinteractive.hb.omtrdc.net		
pubads.g.doubleclick.net",pihole,1646436382.0
9404,comment,13,hzdr47b,,So this was my fix as well. I tried whitelist one at a time and refreshing but i couldn't get it to load after seven. Disable for 30s and it worked fine through the rest of the commercial breaks too. Something to load the app seems to be only hurdle.,pihole,1646435889.0
9405,comment,14,hzciz4s,,That was my fix as well.  I rarely fire up P+ and wouldn't have it at all if T-mobile hadn't had a promotion for a free year awhile ago... when that promo period is done so is my sub.,pihole,1646418722.0
9406,comment,2,hzf3lvn,,"What's infuriating is that we pay for the $10/month plan and it still wouldn't play shows.  Fortunately if you whitelist ""cbsinteractive.hb.omtrdc.net"" it fixes it.  I've heard that the $5 tier where you still get commercials is way worse due to all of the different domains used.",pihole,1646458707.0
9407,comment,2,hzdxvn9,,[deleted],pihole,1646438759.0
9408,comment,25,hzcu3vv,,Well... Guess Halo is going on the Plex server when it comes out,pihole,1646423016.0
9409,comment,3,hze4qse,,I got a free year subscription thru T-Mobile & cancelled it after three months.,pihole,1646441775.0
9410,comment,1,hzcrtfp,,"If it makes you feel better, the only way I can watch P+ on Android is to download the whole show first.",pihole,1646422130.0
9411,comment,1,hzdcyyi,,">Thank you! Paramount+ is the ONLY service I need to stop PiHole for. Since I have switches built into HomeKit / Home Assistant, I just ask Siri to do it but it's a pain to remember if we are surfing for something to watch.",pihole,1646430209.0
9412,comment,-1,hzd84tl,,"I get it, aren’t you just swapping Paramount+ making a lot of shady DNS calls for telling Amazon everything you watch on Paramount+ instead?",pihole,1646428369.0
9413,comment,3,hzgbjly,,"I think you mean ""privateer""",pihole,1646489588.0
9414,comment,8,hzcm5tn,,"Strange.  For me, Paramount is the only problem.  I haven't seen anything wrong with the other services, but I only have the standard block lists enabled.  I get around the Paramount problem by disabling the Pi-Hole whenever I need to start a new show.",pihole,1646419965.0
9415,comment,3,hzctigg,,I get huge amounts of telemetry blocked from streaming services but the shows still work,pihole,1646422788.0
9416,comment,1,hzcy7eh,,"I have all those you mentioned receipt Pluto, and they work wonderfully",pihole,1646424571.0
9417,comment,12,hzdyy6g,,"wait wait wait.  Did you say ""commercial breaks""?  Are you saying you pay for Paramount+ monthly and you _still_ get commercials?",pihole,1646439223.0
9418,comment,1,hzdt03j,,"Yeah, and they change what they call often enough that even allow-listing sites breaks randomly.",pihole,1646436686.0
9419,comment,2,hzeuxxg,,"Yes, but the alternative is either piracy, or whitelisting a handful of sites permanently.

This is what I do too, disabled pihole for 1 minute, start stream.",pihole,1646453993.0
9420,comment,1,hzdyrao,,Sure from that one device for a bit. I do it for 2 minutes a week so I’m not terribly concerned.,pihole,1646439139.0
9421,comment,15,hzcy3ou,,Plex...the best media server ever!!,pihole,1646424532.0
9422,comment,1,hzh8zre,,"No problem. I never had any issues with it, but just keep in mind... Any project can become malicious at the whim of the developer (npm colors and faker are a prime example of this). So while I always used cron to automate updates, ymmv.",pihole,1646504458.0
9423,comment,4,hzdgg49,,Yup but also a service that functions with pi hole,pihole,1646431547.0
9424,comment,1,hzejmrp,,Are you using the free version? I subscribe to Paramount+ without ads and I haven’t had any issues with Pi-hole and I have more than just the standard blocklist enabled.,pihole,1646448494.0
9425,comment,1,hzd00to,,"On Pluto, I only get the few SSAI based ads they toss out, with many repeats, compared to here at work where I see all kinds of ads.",pihole,1646425271.0
9426,comment,4,hze1xb5,,I have essential and watching Picard. My understanding is that ads still occur for same day viewing.,pihole,1646440523.0
9427,comment,8,hzeobde,,"That's a common thing these days. Hulu, Paramount, Peacock... they all offer paid plans that still have ads.",pihole,1646450702.0
9428,comment,4,hzdmyzx,,Jellyfin >>,pihole,1646434171.0
9429,comment,5,hzdsx6s,,Weird way to spell Jellyfin,pihole,1646436651.0
9430,comment,3,hzew5fa,,Cough...emby... cough,pihole,1646454616.0
9431,comment,13,hzexr73,,That's ridiculous.  We left the cable and TV networks because of commercials.   Blah.,pihole,1646455454.0
9432,comment,1,hzgcdn8,,"My buddy recently showed me emby. He has it in parallel with Plex, as they just look at files. I just realized having two media players is beneficial if one goes down (phoning home server).",pihole,1646490024.0
9433,comment,3,hzf94tn,,Or because a la carte was going to be cheaper. With all of the streaming services Im paying a lot more than I ever did with cable or satellite. And I’m still have commercials with some of them.,pihole,1646462183.0
9434,comment,7,hzfan0k,,"That sucks.  I try to vote with my dollar and only subscribe to servicese w/o commercials.  We have D+ and Netflix, and so-far, nothing more.",pihole,1646463177.0
9435,comment,2,hzfnsqw,,It’s not really a complaint. We watch a LOT of stuff and certainly cancel/add/repeat as required. It’s just a pain. The commercials on paid services is absolutely bullshit.,pihole,1646472773.0
9436,comment,0,hzfcptr,,I recommend checking prime video plenty of good originals on there,pihole,1646464600.0
9437,comment,2,hzgekrf,,"Been to a movie theatre in the last five years?

Ads playing before movies I pay to see is infuriating to me.  I will NOT accept a paid streaming service with ads.  It's back to the high seas if they pull that shit on me.",pihole,1646491144.0
9438,post,0,t6js7t,i wanna use pihole adblock beginner,i wanna use pihole adblock beginner any expert who wants to help me please?,pihole,1646403027.0
9439,comment,2,hzbjb6h,,https://www.reddit.com/r/pihole/comments/9y9e9w/simple_guide_to_setting_up_a_pi_zero_w_and/,pihole,1646404379.0
9440,comment,1,hzbhfhp,,"There are several good tutorials on YouTube. Here's a simple one that I recommend since it uses DietPi as the OS, which is what I use.

https://www.youtube.com/watch?v=4X6KYN1cQ1Y",pihole,1646403537.0
9441,post,3,t6h47p,GIGYA - error bootstrapping sdk,"Any reason why the default blocklist shipped with PI-HOLE is blocking the Gigya SDK?  I believe Gigya SDK is owned by SAP.  I had to whitelist it to get the ""[elancorebates.com](https://elancorebates.com)"" to allow me to login.",pihole,1646394098.0
9442,comment,1,hzcakhd,,What is the domain in question?,pihole,1646415411.0
9443,comment,1,hzg3it9,,I had to whitelist '[socialize.eu1.gigya.com](https://socialize.eu1.gigya.com)'.,pihole,1646484948.0
9444,comment,1,hzgodrl,,"You would need to ask the list maintainer why they have this specific domain on their list. But, they aren't the only list that contains this domain. 

https://blocklist-tools.developerdan.com/entries/search?q=socialize.eu1.gigya.com",pihole,1646495711.0
9445,post,3,t6gexh,The tooltip is off. Any ideas?,,pihole,1646391223.0
9446,comment,1,hzax2l2,,"https://tricorder.pi-hole.net/aQ7pvQjx/

I mean the tooltip is out of bounds, it should be pointing at one of the last few bars, but instead it points outside the graph, and I dont know which of the last bars it is pointing at.",pihole,1646391683.0
9447,post,99,t6g046,Pi-hole version is Untagged,,pihole,1646389460.0
9448,comment,38,hzb28iu,,Uninstalling completely and reinstalling fixed it...,pihole,1646395448.0
9449,comment,7,hzcbp4l,,pihole checkout master,pihole,1646415853.0
9450,comment,3,hzawdi5,,"Generate a debug log, upload when prompted. The devs will use that infomation to help",pihole,1646391121.0
9451,comment,2,hzauzx7,,puh. no idea. reinstall?,pihole,1646390002.0
9452,comment,2,hzauh1m,,Please guide and help to fix this error,pihole,1646389559.0
9453,comment,21,hzbbp8t,,Decent of you to let us know what it took to resolve. Thanks,pihole,1646400812.0
9454,comment,-14,hzcbgpd,,"Reinstall is not a fix, as buying a new car doesn't fix the old one, just replaces it",pihole,1646415761.0
9455,comment,3,hzcszlk,,"This is the correct answer, as covered here: 
https://discourse.pi-hole.net/t/could-not-update-local-repository-contact-support/46060/2

This is not something that needs a reinstall.",pihole,1646422585.0
9456,comment,1,hzav5gm,,"Tried with pihole -r and tried both options repair and reset but still the same error.

I am afraid of uninstalling pi-hole, last time I uninstalled pihole I was not able to access internet.

What to do now ? Please guide",pihole,1646390125.0
9457,comment,2,hzchew8,,Would you consider reinstalling a workaround then?,pihole,1646418109.0
9458,comment,1,hzcmzkz,,"This is probably arguing about definitions, but if you think of it as a bug fix is not a fix, but as a user it fixed a problem for the user. 

I suspect this also depends of how you think of the installation. 

http://cloudscaling.com/blog/cloud-computing/the-history-of-pets-vs-cattle/

If your pihole is a pet, then you want to find the fix, if it is cattle and reinstalling fixes it then it is fixed.

If my car brakes down and I fix the engine I fix the car, if I buy a new one I fix my transportation problem. 

When you think of software as cattle then the cost of a new car is not different from the cost of fixing the old one.",pihole,1646420285.0
9459,comment,-4,hzchpz7,,"Neither, you are not working to fix the problem, but starting from the scratch.

A fresh install has nothing to do with the existing problem",pihole,1646418230.0
9460,comment,-5,hzcu9gb,,"A replacement is not a fix. Stop.
The previous installation is NOT fixed. 
There is no cause for the issue, no solution, just gave up on it. 
And learned nothing, so it will happen again.

Of course it's about definitions, that's what I'm talking about. And reinstall a software won't be  a fix, that's not the definition. Removing a problem is not fixing the problem.",pihole,1646423074.0
9461,comment,2,hzgnjqn,,"A fresh install is sometimes the quickest route to a solution. The OP appears to have some corrupted repositories. Rather than fix each, a reinstall fixes them all at once.

Was there a different solution available?  Yes. But, that's not the route the OP took.",pihole,1646495342.0
9462,comment,2,hzdzdt9,,I bet you’re fun at parties,pihole,1646439413.0
9463,comment,2,hzgnqc7,,">	A replacement is not a fix

The problem was that Pi-hole had version corruption.  Now it doesn't, so the problem no longer exists. I would consider this fixed.",pihole,1646495421.0
9464,comment,-2,hzfdux8,,U can bet I'm professional at job ;-),pihole,1646465376.0
9465,post,16,t6fqd9,query [AAAA] Requests every second,"While im on the pihole admin page in the dashboard, every second (pihole -t) i got:

Mar  4 09:58:49: query\[AAAA\] <Hostname>.localdomain from [127.0.0.1](https://127.0.0.1)Mar  4 09:58:49: cached <Hostname>.localdomain is NXDOMAIN

Mar  4 09:58:50: query\[AAAA\] <Hostname>.localdomain from [127.0.0.1](https://127.0.0.1)Mar  4 09:58:50: cached <Hostname>.localdomain is NXDOMAIN

...

Mar  4 10:03:53: query\[AAAA\] <Hostname> from [127.0.0.1](https://127.0.0.1)Mar  4 10:03:53: Pi-hole hostname <Hostname> is ::1

&#x200B;

Means my dashboard get flooded by pihole quering itself :DI never before had this issue. Any ideas?

* **Pi-hole** [v5.9](https://github.com/pi-hole/pi-hole/releases/v5.9)
* **FTL** [v5.14](https://github.com/pi-hole/FTL/releases/v5.14)
* **Web Interface** [v5.11](https://github.com/pi-hole/AdminLTE/releases/v5.11)

&#x200B;

**#EDIT:**

Already known bug: [https://github.com/pi-hole/pi-hole/issues/4613](https://github.com/pi-hole/pi-hole/issues/4613)

&#x200B;

\#CLOSED",pihole,1646388291.0
9466,comment,1,hzaw9dq,,"Generate a debug log and upload when prompted. It would help the devs finding the problem. According to them there are only 8 people on this planet and those at their Neptune office can view the logs, so it is safe to share the link there.",pihole,1646391029.0
9467,comment,1,hzayqz5,,i get this endless loopspam if i put in Use Conditional Forwarding under settings - dns... try disabling this.,pihole,1646392976.0
9468,comment,1,hzayymg,,Never enabled it. Thought it could be the reverse DNS Unbound but also with it deactivated same story. it happens ONLY on the Dashboard site. It seems that pihole requests its own dns requests on the dashboard endless,pihole,1646393140.0
9469,post,2,t6cprt,mtalk.google.com request almost every minute,"Hi,

I have a pihole on raspberry with pivpn for remote access which is working fine. However I noticed there is a request almost every minute. When I did the setup 3 days ago it was only google.com but today I checked again and it send request to mtalk.google.com. Is that normal?
[Here is log](https://i.imgur.com/u5Xzg0y.jpg)",pihole,1646375757.0
9470,comment,1,hzaem3i,,"I get it as well and I've blocked all the mtalk links. All Android devices try to contact this link. It seems to related to Duo and their messaging services from what I've read online; which I don't use. Even Chinese devices which don't have Google play services etc installed try to contact mtalk. I looked into it a while ago and decided they could be blacklisted, and I've not noticed anything broken as a result.",pihole,1646376984.0
9471,comment,1,hzapqaa,,You need to ALLOW all mtalk links.  It's how apps like Signal/Telegram/WhatsApp use push messaging,pihole,1646385608.0
9472,comment,1,hzasojx,,"Thanks for info, so it is normal to have it too frequently",pihole,1646388069.0
9473,comment,1,hzasrca,,"If you are blocking it, it will spam the DNS.  Once it's open you shouldn't really see it that often.",pihole,1646388135.0
9474,comment,1,hzawul5,,"I didn't block by myself however i have some blocklists, i will check them when I have time. Thanks",pihole,1646391504.0
9475,post,3,t69div,"Multiple piholes, remove pi.hole domain name","I have an Asus router with regular internet, and expressvpn. My entire home is on the same subnet, despite how the traffic is routed out to the internet.

2 piholes:

pihole.lan = regular internet (most lan devices)

piholevpn.lan = expressvpn using their downstream servers, along with the firesticks using it

I have PIHOLE\_PTR=HOSTNAME in pihole-FTL.conf  and nslookup shows the actual server name of the piholes, but i still get ping replies for pi.hole. I want to remove pi.hole completely since I'm using 2 pi's. Is this configurable?",pihole,1646364272.0
9476,comment,1,hz9syev,,">i still get ping replies for pi.hole.

Please provide some examples.",pihole,1646364643.0
9477,comment,1,hz9w0fo,,"“nslookup shows the actual server name of the piholes, but i still get ping replies for pi.hole. I want to remove pi.hole completely since I'm using 2 pi's”

What are you hoping to achieve? How do your devices on the LAN know which pi-hole to use? How are you pushing DNS server settings to your devices on the LAN?",pihole,1646366129.0
9478,comment,1,hz9tu8m,,"both pi's are static

subnet 192.168.5.0/24

pihole.lan 192.168.5.2

piholevpn.lan  192.168.5.3

C:\\Windows\\System32>ping pi.hole

Pinging pi.hole \[192.168.5.2\] with 32 bytes of data:

Reply from 192.168.5.2: bytes=32 time=1ms TTL=64

I guess the fact that im running 2 pi's with pihole doesn't matter for troubleshooting reasons, I only expanded on that to avoid the ""why are you using 2 piholes"" questions and to explain why I don't want pi.hole. In a single pihole on a lan setup, the same principles would apply.

Any help to get rid of the pi.hole replies would be much appreciated, and thank you for all you've done for us with this amazing software (running it since Nov 2017).",pihole,1646365068.0
9479,comment,0,hz9xc9f,,"What are you hoping to achieve? - Not have 2 devices share the same hostname, despite having their own hostnames.

How do your devices on the LAN know which pi-hole to use? - My router is handling dhcp, and with each static device assignment, i can tell those client devices what dns server to use. For non static assignments, they default to the non vpn pihole, and route out through regular internet.",pihole,1646366794.0
9480,comment,1,hza0bco,,"Instead of pinging pi.hole, ping the IP of the specific Pi-hole you want to reach.

I have five Pi-holes running right now, and I reach each of them by IP.  Either via ssh, or to the web admin GUI.",pihole,1646368367.0
9481,comment,1,hza5x2z,,I seem to remember window’s having a cache but don’t remember how to clear it. If you use piholevpn.lan server to ping pi.hole what ip reply’s?,pihole,1646371460.0
9482,comment,2,hza0ccs,,">How do your devices on the LAN know which pi-hole to use?

You set the DNS resolver(s) for your clients to use in your router's DHCP, DHCP6 and Router Advertisements settings, for clients that use them to auto configure.

For static assignments they will use the IP v4 and v6 DNS servers you set there.

I set an IPv4 static assignment for each of my Pi-Holes that also assigns a name based on their MAC address making it easy to keep things straight.",pihole,1646368374.0
9483,comment,1,hza3wtg,,"Oh, I see. You have 2 pi-hole servers that are sharing the same host name? How is pi-hole installed by the way? Linux VM? Docker? Raspberry Pi?",pihole,1646370307.0
9484,comment,0,hza14b1,,"Yea i can ssh or ping by the real hostnames, that works fine, I was wondering if in a dual setup, if there is a parameter i can change, and if it 'should' be changed. If the pihole team says I can ignore pi.hole, thats good enough for me.",pihole,1646368789.0
9485,comment,1,hza6xad,,"It's ipconfig /flushdns. Here is whats interesting: Same PC, same subnet:

im using pihole.lan, pi.hole resolves to that server [192.168.5.2](https://192.168.5.2) appropriately

im using piholevpn.lan, pi.hole resolves to that server [192.168.5.3](https://192.168.5.3) appropriately

howver, if i ssh into either pi, pi.hole will not resolve",pihole,1646372054.0
9486,comment,1,hza6048,,"2 separate physical raspberry pi's.

pihole.lan is a Rasp 3 B.

piholevpn.lan is a Rasp Zero W I had hanging around from an old MotionOS project, suitable since it's only handling 2 or 4 devices.

However both have the proper hostnames programmed in the /etc/hostname and /etc/hosts set appropriately, and still pi.hole pings.",pihole,1646371509.0
9487,comment,1,hza7uae,,"It was just a wag. I have 2 piholes running, a vm running Debian 10 and a pi 0 2 running raspbian. The pi replied from localhost and the vm replied from its ip. Sorry I can’t help.",pihole,1646372603.0
9488,comment,1,hzimb4u,,Interesting. What IP address is pi.hole responding from? What happens if you ping that host name with device A turned off or with device B turned off?,pihole,1646526672.0
9489,comment,1,hzaa3w6,,"That helps, I appreciate the reply. Is the VM pihole bridged or nat'd?",pihole,1646374032.0
9490,comment,1,hzimkhr,,"So believe that each pihole will serve its own ip address to whatever client is connected to it. Whatever uses pihole.lan for DNS, it's will serve its own ip for pi.hole. Anything using piholevpn.lan, will get that IP address for pi.hole. I guess that makes sense.",pihole,1646526792.0
9491,comment,1,hzac07l,,"Bridged and dual homed. The host is headless. I’m running 2 networks, 1 goes to  a dd-wrt router connected to a vpn for a little privacy (kodi) and other one just goes out through isp. I use vpn providers dns for vpn net and pihole for isp network. I think nat’d would add a lot more complexity that I don’t need.",pihole,1646375274.0
9492,comment,1,hziqnve,,"What I would like to know is this:
When you ping “pi.hole”, is the IP address that responds similar to the IP address for “pinhole.lan” or “pinhole on.lan”?",pihole,1646528767.0
9493,comment,1,hziraix,,"yes, whatever pihole is used for dns on the pc, the ip address of that pihole will come back when i ping pi.hole.",pihole,1646529080.0
9494,post,5,t689tp,Chrome + Pi-hole + uBlock Origin Thoughts?,"Would this combination, can it compete to Firefox's and Brave's implementation of 'Privacy and AdBlocking with Brave Shield'?

Since Chrome is faster, and there's Pi hole and uBlock. Would it translate to speed and privacy? 

:: Some websites are broken with either Firefox or Brave and runs perfectly with Chrome.",pihole,1646360802.0
9495,comment,8,hzab6lg,,"Brave is a lie, it is not a privacy friend. They started the project to collect data. 

Firefox is the only one that cares at all.",pihole,1646374735.0
9496,comment,2,hzas18h,,Replace Chrome with Firefox if you want privacy.  I have had no issues.  You could also install NoScript too if you like.,pihole,1646387520.0
9497,comment,2,hz9s039,,"Try Vivaldi. It's a chromium based browser with privacy and adblocking stuff built in. Run Pi-hole no matter which you chose.

Chrome is built from the ground up to track you, so Google knows what you are doing even if the sites you are visiting do not.",pihole,1646364175.0
9498,comment,3,hzap11r,,[deleted],pihole,1646385027.0
9499,comment,1,hzb4q9j,,"well, brave has now a proprietary ads like google. but unlike google, you're paid some residues from their pay and you can't even claim it haha.",pihole,1646397015.0
9500,comment,1,hzb5dk7,,yes but it has compatibility issues in some popular websites.,pihole,1646397396.0
9501,comment,1,hz9x81w,,">Try Vivaldi. It's a chromium based browser with privacy and adblocking stuff built in. Run Pi-hole no matter which you chose.

Thanks! I've got some rundown from few searches, comparison and reviews. It looks promising gotta try it. I plan to totally ditch Google's Chrome. I mostly used brave for sometime now but some how got disappointed so I am also planning to ditch it.",pihole,1646366735.0
9502,comment,1,hzb4vrc,,"Not yet, but I was thinking if that would be effective since both Pi-hole and uBlock were good. but running it is like gaming in windows which you are forced to use which here requires a browser.",pihole,1646397106.0
9503,post,4,t67t2p,iPhone listed as a Samsung Galaxy?,"Today, while looking at the query log, I noticed a Samsung Galaxy A10e was listed as one of the top clients. The only Samsung device in our house is a TV, but that’s listed separately and clearly. I’ve confirmed the IP address to be that of my wife’s iPhone 11 Pro. In my router settings, her phone is displayed as “WifeName-iPhone.”


One of my parents or my mother in law owns an A10e, but it’s been weeks since either family has visited. Please forgive my ignorance (I’m a n00b when it comes to network stuff; I followed a tutorial for setting up the Pi-Hole with DietPi), but is it possible my wife’s iPhone was given an IP address previously assigned to a family member’s phone, and the Pi-Hole just hasn’t updated its client name list for some reason?",pihole,1646359320.0
9504,comment,3,hz9jvog,,If it doesn't make problems I wouldn't rlly worry about it.,pihole,1646360022.0
9505,comment,2,hzb1dd3,,"Flush the network table of your pi would solve the issue, I think.

Web GUI > settings > flush network table",pihole,1646394855.0
9506,comment,1,hzan9s4,,"I have a Samsung TV that reports as an iPhone sometimes, wouldn't worry..",pihole,1646383559.0
9507,comment,0,hz9jbq0,,"This thing has cropped up before.   

https://youtu.be/CD9YqdWwwdw",pihole,1646359767.0
9508,comment,2,hztp9fd,,Honestly I wouldn't complain,pihole,1646738275.0
9509,comment,1,hza4t2i,,"How’s it due to human error? I’m not arguing, I genuinely don’t know.",pihole,1646370819.0
9510,post,8,t652j3,Odd entries in my Query Log,"What're these about?

Thanks much!

[https://i.imgur.com/KoQoJH9.png](https://i.imgur.com/KoQoJH9.png)",pihole,1646351008.0
9511,comment,2,hz94sn5,,Querying root domains?,pihole,1646353049.0
9512,comment,2,hz99roq,,A client on your network (at IP 155) is requesting the root domain.,pihole,1646355309.0
9513,comment,1,hzo714u,,I'm not very bright what does that mean & is that bad?,pihole,1646631906.0
9514,comment,1,hzo71cw,,I'm not very bright what does that mean & is that bad?,pihole,1646631910.0
9515,comment,2,hzo7gk0,,"Thats not something bad. They are used when you want to ask recursively, which means asking the top of the hierarchy.",pihole,1646632186.0
9516,comment,1,hzof0pk,,"Cool cool glad it's not a bad thing.

Is there something I can do to make systems not need to do that or is it actually a good thing that it is doing that?",pihole,1646637546.0
9517,comment,1,hzofz7t,,You dont need to worry about the software doing their thing. Why do you need to not make systems do that?,pihole,1646638275.0
9518,comment,1,hzscumi,,"oh I don't need to I was just wondering if it's.. ""good"" that systems are doing that then if it's not bad? Or what is the reason systems do it at all?

I admit I don't understand DNS in much depth.",pihole,1646706355.0
9519,comment,1,hzshw4a,,https://www.google.com/search?q=recursive+dns+lookup,pihole,1646708677.0
9520,post,2,t62jt2,Random Disconnects,"Every now and then I seem to be losing internet no sure if its pihole related as router logs show failure to resolve DNS here is my debug file, It was created after the fact so not sure it contains anything useful.

[https://tricorder.pi-hole.net/d1iTUqo7/](https://tricorder.pi-hole.net/d1iTUqo7/)

Cheers

[https://jmp.sh/e7t34fv](https://jmp.sh/e7t34fv) \>> This is the router log so not sure if its that.",pihole,1646343938.0
9521,comment,2,hzaujh9,,"If Internet connection is down, Pihole will report that names can not be resolved. You can test Internet by accessing a resource with known IP address. ping 8.8.8.8 would be the simplest choice.
In this case Pihole would not be the cause.",pihole,1646389615.0
9522,comment,1,hz8sad8,,Does the RPi freeze also?,pihole,1646347625.0
9523,comment,1,hz8teeo,,Nope pi is fine.,pihole,1646348095.0
9524,post,6,t61i6x,"Running ""pihole -up"" returns error ""Could not update local repository. Contact support""","Am trying to update my Pi-Hole! However, I am getting the ""Could not update local repository. Contact support"" error. Here is my debug log:

[https://tricorder.pi-hole.net/WBlaRaJC/](https://tricorder.pi-hole.net/WBlaRaJC/)

I am on Pi-hole v5.9, Web Interface 5.5 and FTL v5.8.1

    pi@Pi-Server:/etc/.pihole/.git $ pihole -up
      [i] Checking for updates...
      [i] Pi-hole Core:     up to date
      [i] Web Interface:    update available
      [i] FTL:              update available
    
      [i] Pi-hole Web Admin files out of date, updating local repo.
      [✓] Check for existing repository in /var/www/html/admin
      [i] Update repo in /var/www/html/admin...
      : Could not update local repository. Contact support.
    

Any idea why this may be?

Any help is highly appreciated!",pihole,1646341000.0
9525,comment,4,hz8ysnv,,"Get rid of the web admin local files, then update again.

`sudo rm -r /var/www/html/admin`

`sudo git clone https://github.com/pi-hole/AdminLTE.git /var/www/html/admin`",pihole,1646350423.0
9526,comment,0,hz8d2h7,,Try sudo pihole -up,pihole,1646341150.0
9527,comment,-1,hzay3x6,,"Check for general internet connection by running „sudo apt update“. If that fails, something has borked your ip configuration",pihole,1646392494.0
9528,comment,1,hzbiy37,,Thank you! Will try!,pihole,1646404214.0
9529,comment,1,hzbqyhq,,"Should I add the -r (recursive) attribute to the first command, since otherwise it won't delete the directory.",pihole,1646407636.0
9530,comment,1,hzbr7y4,,Yup. All worked (*just wrote* `sudo rm /var/www/html/admin -r` *instead of what you wrote*),pihole,1646407746.0
9531,comment,1,hzc180v,,"Hey! Uhh. Due to the update my admin port changed back to 80. I was running my NGINX proxy on that same server. I changed the lighttpd port under /etc/lighttpd/lighttpd.conf (server.port) back to 8080. Now my NGINX stopped functioning. Made a report on their GitHub here:

[https://github.com/NginxProxyManager/nginx-proxy-manager/issues/1907](https://github.com/NginxProxyManager/nginx-proxy-manager/issues/1907)

Would be nice if something like the port the service / admin panel is hosted on could be configured and saved more easily across updates!",pihole,1646411733.0
9532,comment,1,hz8g2ke,,"    pi@Pi-Server:~ $ sudo pihole -up  [i] Checking for updates...  [i] Pi-hole Core:     up to date  [i] Web Interface:    update available  [i] FTL:              update available  [i] Pi-hole Web Admin files out of date, updating local repo.  [✓] Check for existing repository in /var/www/html/admin  [i] Update repo in /var/www/html/admin...  : Could not update local repository. Contact support.

Sadly, not the solution! Would've been too easy I guess....",pihole,1646342372.0
9533,comment,2,hzc1ije,,"Yes, you should.",pihole,1646411847.0
9534,comment,2,hzcba12,,">I changed the lighttpd port under /etc/lighttpd/lighttpd.conf (server.port) back to 8080.

Don't make changes to that file.  As prominently noted at the top of the file, the contents will be overwritten on your next repair or update.

    ###############################################################################
    # FILE AUTOMATICALLY OVERWRITTEN BY PI-HOLE INSTALL/UPDATE PROCEDURE.
    # ANY CHANGES MADE TO THIS FILE AFTER INSTALL WILL BE LOST ON THE NEXT UPDATE
    # 
    # CHANGES SHOULD BE MADE IN A SEPARATE CONFIG FILE:
    # /etc/lighttpd/external.conf
    ###################################################################

>Would be nice if something like the port the service / admin panel is hosted on could be configured and saved more easily across updates!

To make the change permanent, put the following entry in ***/etc/lighttpd/external.conf*** (include the colon, it is not a typo):

    server.port := 8080",pihole,1646415689.0
9535,comment,1,hzc53lc,,"Did do! Then all worked! (however, it sadly broke my NGINX, no worries, not your job, will continue elsewhere, thank you very much for your help!)",pihole,1646413250.0
9536,comment,1,i03ayr5,,"I am a fucking idiot and I should read, you specifically wrote: ""(include the colon, it is not a typo)"" and I did not listen.

However, thank you very much! all works, all changes applied. All is well! Thank you for educating me on how Pi-hole works! I hope that in the future I can help answer such simple questions to ensure you do not have to do that again.",pihole,1646908277.0
9537,post,9,t5x8ad,Setting up Pihole,Can someone direct me to a video or guide where i can see what i can do with it and how to configure it to block ads and be my dns.,pihole,1646329615.0
9538,comment,10,hz7kaj9,,"This is an older guide, but still works.  You would install Bullseye now, not Buster.

[https://www.reddit.com/r/pihole/comments/9y9e9w/simple\_guide\_to\_setting\_up\_a\_pi\_zero\_w\_and/](https://www.reddit.com/r/pihole/comments/9y9e9w/simple_guide_to_setting_up_a_pi_zero_w_and/)

After you install it, our documentation has the details of how it works:

https://docs.pi-hole.net",pihole,1646329966.0
9539,comment,5,hz7w1f8,,"Logan,

Welcome to Pi-Hole. As you read and follow the instructions for set-up do yourself a favor. As you follow the set-up instructions, open the text editor of your choice and paste the commands into this new document of your record and type notes as you go. You will be able to temporarily paste your Admin portal password there too.

This will help you keep on track and be a huge reference for recovery and future deployments if you like to tinker.

This process has saved me many times as I try new things with the Raspberry Pi. This method will also help you learn all of this too.

Profit, and Enjoy!",pihole,1646334456.0
9540,comment,9,hz7n71o,,i wonder when people learn that using a search engine is faster than using reddit,pihole,1646331074.0
9541,comment,1,hz8kuut,,"Search in YouTube and there are like 15 videos of people walking you through it step by step. 

You probably need to set up a raspberry pi first. Guess how you can learn to do that?",pihole,1646344460.0
9542,comment,1,hz8ho23,,I installed it using docker-compose and it was pretty quick,pihole,1646343098.0
9543,comment,1,hz8vn66,,I setup recursive dns along with it: https://youtu.be/FnFtWsZ8IP0,pihole,1646349053.0
9544,comment,1,hz9havl,,"YouTube search for craft computer and brew video on adding unbound to Pi-Hole. Iirc the name is something like, pihole you're doing it wrong.

Unbound is a simple to set up way to turn your pihole into a recursive DNS resolver",pihole,1646358835.0
9545,comment,2,hz7qn0f,,"Thk you very much , would this also work for ubuntu as i have already installed ubuntu server ?",pihole,1646332376.0
9546,comment,1,hz7qffh,,I wonder when people will realize not everyone gets the same results when searching for the same thing and it would much smarter to post in a community full of people who probably went through the same thing as you and may have some better guides than looking at a mess of search results than google.,pihole,1646332296.0
9547,comment,0,hz8rpzt,,"I run it in docker alongside Portainer. With everything set correctly, when an update comes out, I click 'recreate' in Portainer and let it pull the new image.",pihole,1646347388.0
9548,comment,3,hz7tqc6,,"At this point, all you need to do is install Pi-hole and then look through the documentation.

https://docs.pi-hole.net/main/basic-install/",pihole,1646333559.0
9549,comment,4,hz7s4ho,,"typing the words ""Setting up Pihole"" in a search engine of your choice will always give you the official pihole website WITH documentation. 

you are asking for basic functions - all those can be found there.",pihole,1646332944.0
9550,comment,4,hz7slnj,,"I always wonder how these people with ""home servers"" cope when they can't even Google for a simple guide. How on earth do they manage to do *anything*?

Just ask reddit everything? If only there was a faster way like using a tool that searches the Internet for the answers you need.",pihole,1646333128.0
9551,comment,1,hzanxsu,,"Let's be grateful that we're not seeing the people who use youtube as their search engine, and would not consider google or reddit as information sources because that requires the supreme effort of... reading.

Twitter was on to something when they originally limited a tweet to 140 characters, following market research about the characteristics of the young generations most likely to use the microblogging platform. That was 15 years ago. Consider that those young people are now gradually taking over the majority of the workforce, and they still lack the skills of patience, perseverence and researching something complex on their own. There's even a lucrative niche for people who read reddit posts in youtube videos and getting paid for it, because there are enough people out there not willing to read themselves!

F me did I just turned into a grumpy old man?

Kudos to OP for asking here. These days, that shows a willingness to get educated about something well above average.",pihole,1646384114.0
9552,post,45,t5wzr2,2 x Pi-holes in High Availability - Block hardcoded DNS,"I am currently running two pi hole servers in high availability. The primary Pi-hole server is running in Proxmox and secondary is running on Raspberry Pi. Currently, it is configured so that if the first one goes down, it switches automatically to the second one. The virtual IP used for HA is what is set as the DNS server in Unifi.

I am now trying to implement a configuration on the cloud key that routes all DNS traffic through Pi-hole but the script doesn't seem to work. As soon as I install the JSON file on the CloudKey, I am not able to access any websites.  Here's the content of the JSON file:

       ""service"":{
          ""nat"":{
             ""rule"":{
                ""1"":{
                   ""description"":""DNS Redirect"",
                   ""destination"":{
                      ""port"":""53""
                   },
                   ""inbound-interface"":""eth1"",
                   ""inside-address"":{
                      ""address"":""192.168.99.20"",
                      ""port"":""53""
                   },
                   ""source"":{
                      ""address"":""!192.168.99.20""
                   },
                   ""log"":""disable"",
                   ""protocol"":""tcp_udp"",
                   ""type"":""destination""
                },
                ""6000"":{
                   ""description"":""Translate DNS to Internal"",
                   ""destination"":{
                      ""address"":""192.168.99.20"",
                      ""port"":""53""
                   },
                   ""log"":""disable"",
                   ""outbound-interface"":""eth1"",
                   ""protocol"":""tcp_udp"",
                   ""type"":""masquerade""
                }
             }
          }
       }
    }
    

Also, all my Unifi devices (USG, Access Points, etc.) are pointing to an external DNS server ([1.1.1.1](https://1.1.1.1) & [8.8.8.8](https://8.8.8.8)) and they have static IP addresses (.1, .2, etc.) assigned. 

Is there anything in the script that is preventing me from resolving DNS?",pihole,1646328993.0
9553,comment,13,hz7k9z4,,"I suggest crossposting in r/Ubiquiti, you’ll probably get better help there",pihole,1646329959.0
9554,comment,11,hz7qihs,,"Just a suggestion... rather than trying to masquerade as another DNS server, you could probably just put a firewall rule to prevent access to other DNS servers.

From what I've seen, when a host (e.g. Google Mini) tries to use its hardcoded DNS servers, if they are not reachable it falls back to the DHCP-provided DNS servers.",pihole,1646332328.0
9555,comment,16,hz7k2gt,,"> Currently, it is configured so that if the first one goes down, it switches automatically to the second one

Why have you chosen this method?  If you just run them in parallel, clients will choose which one they want to use.  If either fails, all the clients move to the remaining Pi-hole.",pihole,1646329882.0
9556,comment,3,hz8k671,,"Not the prettiest, but I block both Google DNS of [8.8.8.8](https://8.8.8.8) and [8.8.4.4](https://8.8.4.4) at my firewall from getting out, and I use [1.1.1.1](https://1.1.1.1) and [9.9.9.9](https://9.9.9.9) for DNS for the Pi-Hole's. This works really well, at least for me. I would love to just redirect the DNS, but I am pretty lazy and since it's working I don't have a need to mess with it.",pihole,1646344169.0
9557,comment,3,hz8z6id,,you have a routing or ACL problem not a DNS one.  as /u/thelizardking0725 suggested x-post this on the ubiquiti sub to get some more insight.,pihole,1646350590.0
9558,comment,2,hza3syn,,Did you follow a guide or did this yourself? There is a guide floating around in r/Ubiquiti for this exact use case. IIRC they didn’t use *masquerade* but let me see if I can find it,pihole,1646370247.0
9559,comment,2,hzagpv2,,"I think I followed the same keepalived guide. I couldn’t get it to actually do HA. Keepalived looks for an up or down IP, but most of my failures were due to the DNS services having problems. The Cloudkey my primary Pihole runs on was still up and doing other things. 

After I found out there was even more configuration required to monitor service status, I decided simpler is better. I went with a typical DNS setup and used [force-dns-to-dual-piholes.json](https://github.com/stevejenkins/unifi-linux-utils/blob/master/config.gateway.json/force-dns-to-dual-piholes.json). 

Everything works great and DNS tests show the NAT rule works. Queries are split almost evenly between two Piholes.",pihole,1646378498.0
9560,comment,2,hzaw1gx,,"That's virtually identical to my section in `config.gateway.json` on my VPS-hosted controller, except I don't force my router and APs to go through the pihole, which you do (assuming they're not on a separate VLAN).

I run two piholes, one on a Banana Pi (.6) and one in a NAS Docker container (.7). My router is .1 and the APs are .2 to .4. There's no HA / failover stuff going on in my setup: the two piholes are just running in parallel.

```
    ""service"": {
        ""nat"": {
            ""rule"": {
                ""1"": {
                    ""description"": ""DNS Redirect"",
                    ""destination"": {
                        ""port"": ""53""
                    },
                    ""inside-address"": {
                        ""address"": ""192.168.1.6-192.168.1.7"",
                        ""port"": ""53""
                    },
                    ""inbound-interface"": ""eth1"",
                    ""log"": ""disable"",
                    ""protocol"": ""tcp_udp"",
                    ""source"": {
                        ""address"": ""!192.168.1.1-192.168.1.7""
                    },
                    ""type"": ""destination""
                },
                ""6000"": {
                    ""description"": ""MASQ DNS requests to LAN"",
                    ""destination"": {
                        ""address"": ""192.168.1.6-192.168.1.7"",
                        ""port"": ""53""
                    },
                    ""log"": ""disable"",
                    ""outbound-interface"": ""eth1"",
                    ""protocol"": ""tcp_udp"",
                    ""type"": ""masquerade""
                }
            }
        }
    }
```",pihole,1646390855.0
9561,comment,1,hz9tmik,,"I had similar setup in the pass but not using pi-hole I was using unbound dns (but should work with pi-hole) in each of the raspberry, you don’t need HA you can have N nameservers in your resolv.conf https://stackoverflow.com/a/16708353",pihole,1646364964.0
9562,comment,1,hzbekpq,,"I am going to start from scratch and deploy both Pi-hole servers in parallel. I have few questions about the setup.

My first Pi-hole server will run in an Ubuntu container. Do I have to specify the second Pi-hole server in the resolv.conf file? Do I have to do the same on the second Pi-hole server running in Raspberry Pi?

Do I have to edit anything in the hosts file on either servers?",pihole,1646402214.0
9563,comment,1,hzee7ig,,"If you have your router provide IP address under DHCP, under that option most routers allow for custom DNS to be associated with the DHCP requests... Obviously you would need to set static IPs for the two pis running pi-hole but it is the most straight forward way to setup the pis with pi-hole

Currently running two pis (pi2b & pizero) on the network with pi-hole on each...",pihole,1646446048.0
9564,comment,1,hzenrpk,,"So I have applied the `config.gateway.json` file on the Cloud Key. How do I confirm that DNS is getting routed to Pi-hole servers? When I do a nslookup on Mac, for example, `nslookup yahoo.com` [`8.8.8.8`](https://8.8.8.8), I get the following output:

Server: [8.8.8.8](https://8.8.8.8)Address: [8.8.8.8#53](https://8.8.8.8#53)

Non-authoritative answer:  
Name:	yahoo.com  
Address: [98.137.11.164](https://98.137.11.164)  
Name:	yahoo.com  
Address: 74.6.143.26  
Name:	yahoo.com  
Address: 74.6.231.20  
Name:	yahoo.com  
Address: 74.6.143.25  
Name:	yahoo.com  
Address: 74.6.231.21  
Name:	yahoo.com  
Address: [98.137.11.163](https://98.137.11.163)

Both Pi-hole servers are configured with Unbound.",pihole,1646450441.0
9565,comment,3,hz9il5q,,"I’ve set up my firewall and NAT masquerade rules in EdgeRouter to do what you’re asking (blocking and redirecting non-Pi-hole DNS requests). If you google those terms plus Unifi you should find a few guides to do so. 

Apologies for no direct link as I set it up a long time ago, but it is possible using the router.",pihole,1646359428.0
9566,comment,3,hz86bjj,,"I have proven this works! Block DNS outbound and you should be set with the DHCP DNS.

Also, depending on the router, maybe Nat 8.8.8.8 to your pi-hole?",pihole,1646338497.0
9567,comment,1,hz8es56,,[deleted],pihole,1646341848.0
9568,comment,1,hz96jsh,,Any chance you can link to some further info or a walk through on the subject? Would love to implement similar but hella n00b,pihole,1646353829.0
9569,comment,7,hz7lhxh,,"I have tried that in the past but for some reason when the primary went down, devices were not able to resolve DNS even though the secondary server was still running. I will give it a try again and see if it works.",pihole,1646330421.0
9570,comment,1,hzb585j,,"I will give this a try on the weekend.

What DNS have you specified for the devices with static IP (Router, APs, etc.)?",pihole,1646397307.0
9571,comment,4,hz9iv6m,,Yeah I do the same in EdgeOS and it works perfectly. I’ve seen lots of posts in the Ubiquiti sub about this being more difficult to do in UniFi though. Not sure why it isn’t as foolproof or straight forward. It’s one of the main reasons I won’t switch to USG/UDM devices,pihole,1646359556.0
9572,comment,2,hz8obue,,I tried creating firewall rules based on information I found online but it did not work. I created a rule to allow DNS traffic (Port 53) for the DNS servers and a block rule for the DNS for the range of IPs in my network. I did this through Unifi Controller.,pihole,1646345960.0
9573,comment,3,hza1qxl,,"DHCP provided DNS refers to the DNS servers the router provides to clients when it’s assigning the clients IP addresses and other routing information (that’s DHCP)

A quick non-technical example of DHCP:

1. Client is new on the network, says help I’m new I don’t know anything about this network
2. Router responds saying it’s the gateway and DHCP server for the network
3. Client asks router for an IP address, subnet mask, gateway IP, DNS servers, etc…
4. Client acknowledges and begins using its IP address and the DNS servers it was assigned (unless it’s hard coded to use other DNS servers first)

Routers can have a WAN and LAN DNS servers. The WAN DNS is for the router itself to use only. LAN DNS is typically for the router to assign to clients when requesting IP addresses.

As for the firewall rule to block outbound DNS, it would be set on your router. Be sure to set an exception in the firewall rule or a separate allow rule for your Pi-hole to be able to send out DNS queries, typically over port 53. However, be careful as setting it up incorrectly will break your network until you disable the rule and figure out where the rule went wrong.",pihole,1646369124.0
9574,comment,4,hz8o78m,,"That's pretty weird. I've used quite a few devices with two Pi-holes, and whenever one went down, all of them had automatically switched over.",pihole,1646345907.0
9575,comment,1,hz955m8,,"Stupid question, but is your DHCP server providing the IP for both piholes? If they can only see the primary and it goes down without a secondary provided, this could the issue.",pihole,1646353208.0
9576,comment,1,hzctt0e,,1.1.1.2 and 8.8.8.8 just for router and APs.,pihole,1646422901.0
9577,comment,3,hzafrz7,,"Instead of blocking all others, try redirecting them back to your PiHoles. This way, they always get a response. Faster than waiting for a timeout.",pihole,1646377809.0
9578,comment,1,hz98xny,,Router hands out IP addresses.,pihole,1646354902.0
9579,comment,1,hz994mx,,Is your router giving out two DNS records. One for each Pihole?,pihole,1646354990.0
9580,comment,1,hz99sr0,,"Just the virtual IP. This is the guide I followed to set up both Pi-hole servers.

https://jekhokie.github.io/unifi/pihole/networking/2020/12/15/unifi-pihole-ad-blocking-with-failover.html

I came to know about this setup method from a guide that was posted here on Reddit:

https://www.reddit.com/r/pihole/comments/d5056q/tutorial\_v2\_how\_to\_run\_2\_pihole\_servers\_in\_ha",pihole,1646355315.0
9581,post,6,t5uvc6,What DNS do i choose,"Hey everyone so i was put onto pihole for a number of reasons and i am finally installing on my pi3 , however i am going through the setup and would like to know which DNS should i choose as there is a bunch of them. Do they differ in any way , is one better than the other? Or it doesnt matter.

&#x200B;

For reference the ones im seeing here on my setup are as follows:

Google(ECS,DNSSEC)

Open DNS(ECS,DNSSEC)

LEVEL3

Comodo

[DNS.watch](https://DNS.watch)(DNSSEC)

Quad9 (filtered,DNSSEC)

Quad9 (unfiltered,DNSSEC)

Cloudflare(DNSSEC)

&#x200B;

Any advice would be appreciated.",pihole,1646323429.0
9582,comment,8,hz7dhl7,,"I use Unbound. Here's a really good [video](https://www.youtube.com/watch?v=FnFtWsZ8IP0) explaining why, and how to set it up.",pihole,1646327385.0
9583,comment,4,hz7968x,,"Honestly it depends on who you trust. Personally google is out of the list, then the fastest wins. To me its cloudflare, and they respond in <5 ms for me, even for DNSSEC. I do also trust them so I went with cloudflare, but I also use DoH. Although the speed is a bit slower (about 200ms, but thats similar to other non-DoH respond speed), its way more secure, and I am willing to pay that price.",pihole,1646325753.0
9584,comment,3,hz75tbt,,"They differ and there is a lot of opinions about what's the best approach.

Personally, I don't want to give google any more info about me than they already have.  So I've chosen local servers (in Canada) that have malware filtering and I use DoT to reach them, so that the queries are encrypted.

A lot of folks like Quad9, many Cloudflare.

&#x200B;

Note that this is an easy option to change after you've installed, you can go into Settings |DNS and change the upstream servers at any point if you're not happy, so don't let it delay your install :)

&#x200B;

Good luck!

&#x200B;

Edit for clarity:

To use DoT I don't rely on pihole but have another caching DNS internally that then does the DoT query outbound

As well, one of the key things is: Do you want to filter out potential malware or adult content?  Many providers can do at least one of those (i.e. the filtered options) :)",pihole,1646324437.0
9585,comment,3,hz7jj3l,,"We have a brief discussion on the various nameservers offere on install.  Each has different offerings - some do DNSSEC, some provide filtering, logging policies are different, etc.

https://docs.pi-hole.net/guides/dns/upstream-dns-providers/",pihole,1646329682.0
9586,comment,2,hz7r6vy,,I've used Cloudflare for years and haven't had any problems.,pihole,1646332585.0
9587,comment,2,hz8b281,,I prefer Quad9 filtered as it's an extra layer of protection,pihole,1646340363.0
9588,comment,1,hzd0zdd,,"I use OpenDNS, and setup an account there. Added my public IP to my account.

It adds a second layer of filtering and protection to DNS.

My backup to that is then CloudFlare.

Pi3 is a great option for pihole at home. I always use the one generation back pi for pihole, and the current for my other systems at home. When pi5 comes out, I may not do the shift again, as the pi3 is running so well.

Though, I would recommend a pi4 for an office deployment. Using OpenDNS and filtered Quad9.",pihole,1646425642.0
9589,comment,2,hz7ewkk,,Same. Keeps all dns requests in your network after Abt 6months or more of use,pihole,1646327933.0
9590,comment,1,hz7cpgr,,"Agreed , cloudflare has served me well dealing with some websites i use for dem over the years so ill stick with them",pihole,1646327083.0
9591,post,8,t5trns,"Logged into the WebUI for the first time in a few months and I'm seeing some (a lot of) dnsmasq warnings: ""Ignoring query from non-local network""","[Screenshot](https://i.imgur.com/WLNh8va.png) of the diagnostic page and the text from the message:

>Warning in core:  
>  
>dnsmasq  
>  
>Ignoring query from non-local networkCheck out [our documentation](https://docs.pi-hole.net/ftldns/dnsmasq_warn/) for further information.

I don't understand the documentation info about it:

>dnsmasq  
 can be configured to only accept queries from at-most-one-hop-away addresses using the option local-service  
. Other queries are discarded in this case.  
>  
>This is ment to be a safe default to keep otherwise unconfigured installations safe. Note that local-service  
 is ignored if *any* access-control config is in place (interface  
, except-interface  
, listen-address  
 or auth-server  
).

I can make a debug log if needed. Thanks in advance!",pihole,1646320440.0
9592,comment,2,hz6zlud,,"Do you have more than one network?  

If not, I'd double check that port 53 inbound is NOT open on the router :)",pihole,1646321974.0
9593,comment,2,hz70y4w,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1646322512.0
9594,comment,3,hz716x0,,"I have UniFi devices running two networks (192.168.1.0/24 and [192.168.13.0/24](https://192.168.13.0/24)). Is that an issue? I thought it would be able to handle both. I've had the pihole running for years. Did a recent update make it so I have to do something else?

Just double checked that 53 is not open! Thanks and always good to double check. :)",pihole,1646322607.0
9595,comment,1,hz71nvv,,"Here's the Token:

[https://tricorder.pi-hole.net/Ic5kz2se/](https://tricorder.pi-hole.net/Ic5kz2se/)

I updated pihole and have since only seen one of those errors, but prior to update, it was over 3K.",pihole,1646322792.0
9596,comment,2,hz73cbf,,"Good that 53 is not open inbound :)

The only other thing I can think to look at, if you got to Settings | DNS tab and look at the ""Interface options"" what is selected?  Just to double check that you're not restricting what the pihole should be answering.",pihole,1646323451.0
9597,comment,2,hz796nk,,"In one of the recentish updates, they made it so pihole wont respond to a device on a different subnet. I think theres a place in the UI where you can change that.",pihole,1646325757.0
9598,comment,2,hz74mkl,,"It's set to **Allow only local requests.**

Also there is no Conditional forwarding set up.  


Thanks for your responses!",pihole,1646323960.0
9599,comment,4,hz7gy5r,,If you’re running two networks and pihole is set to only allow local requests then shouldn’t it reject requests from the other network?,pihole,1646328700.0
9600,comment,2,hz7xqvq,,"Yeah that makes sense. I read through the notes under conditional forwarding that seems to specify a way to resolve this:

>If your local network spans 192.168.0.1 - 192.168.0.255, then you will have to input 192.168.0.0/24. If your local network is 192.168.47.1 - 192.168.47.255, it will be 192.168.47.0/24 and similar. If your network is larger, the CIDR has to be different, for instance a range of 10.8.0.1 - 10.8.255.255 results in 10.8.0.0/16, whereas an even wider network of 10.0.0.1 - 10.255.255.255 results in 10.0.0.0/8. Setting up IPv6 ranges is exactly similar to setting up IPv4 here and fully supported. Feel free to reach out to us on our Discourse forum in case you need any assistance setting up local host name resolution for your particular system.

I added my other subnet to the fields at the bottom and I'll see if this resolves it. Thanks!",pihole,1646335126.0
9601,post,3,t5th41,Logs won't flush,"I've tried flushing the logs of the past 24 hours from Chrome on mobile, and it won't flush. What's the command I should use from terminal? Also, my server got unplugged yesterday and nothing stopped working, despite having my pi setup as the primary DNS via LAN. Why's that? How to I ensure that all traffic is going through the pi?",pihole,1646319658.0
9602,comment,11,hz7tndv,,Need more bran,pihole,1646333528.0
9603,comment,6,hz7x7yn,,Have you tried eating more fiber?,pihole,1646334920.0
9604,comment,3,hz6xuf8,,https://github.com/pi-hole/pi-hole/issues/4611,pihole,1646321264.0
9605,comment,3,hz79ygb,,"First, issue a repair command as you have power loss:

    pihole -r 

Select repair and let it run.

Then do this:

    pihole -t

Then go to example.com on your client (phone) and see if it appears on the log. If not disconnect wifi and try again. If yes, then its already using pihole. But you could reboot the router to force all device disconnect and reconnect to wifi.

    pihole -f 

Will flush the logs, but why do you want to do so? Remove one spectific domain from the log? If so theres a better way to do it.",pihole,1646326052.0
9606,comment,7,hz6uc41,,"Fix your toilet. 
Just kidding. 😂",pihole,1646319850.0
9607,comment,1,hz8moad,,Try a plunger. If that fails i hear toilet augers are the go-to,pihole,1646345266.0
9608,comment,1,hz8o2bv,,The real trick is use some dish soap and boiling water. Art the dish soap to the toilet and then pour the boiling water in. Fixes most clogs.,pihole,1646345850.0
9609,post,2,t5ricz,Identify ad domains,"I am quiet new to pihole and I have added some domain lists that I found on GitHub, but I still get ads sometimes in Google discover and sometimes in-app as well. I know we can blacklist domains but how do we identify if a certain ad is from that specific domain? Is there any way to check?",pihole,1646313852.0
9610,comment,3,hz6lwpt,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1646316178.0
9611,comment,1,hz7adw5,,"https://www.reddit.com/r/pihole/comments/saotvn/the_complete_guide_to_common_issues/

This might help. Theres also links to a detailed four-part series on identifying the domains in the post above",pihole,1646326214.0
9612,comment,1,hz6m6zu,,Thanks will check this out,pihole,1646316310.0
9613,post,1,t5qyk7,Quick question on setting the static IP,Do I need to set the static IP in BOTH the pihole configuration AND my ISPs router admin tool?,pihole,1646312083.0
9614,comment,3,hz6ye7b,,">	Do I need to set the static IP in BOTH the pihole configuration AND my ISPs router admin tool?

You don't have to do both, but you can. On my Pi's I set a static IP on the Pi, and I also reserve this IP on the router DHCP table.",pihole,1646321483.0
9615,comment,2,hz6e5zd,,"The router should be enought, but Pi-Hole should have the option in its configuration, so I'd just set it the same. As I usually edit the file, then just select the same options mid the Pi-Hole installation.",pihole,1646312280.0
9616,comment,2,hz6eit2,,"IPv4 or IPv6?

IPv4: pi-hole configuration (edit: ah apologies, done at the OS level, [like this](https://www.tecmint.com/set-add-static-ip-address-in-linux/)), and then distribute that address as the DNS server from wherever the DHCP server is active (either router or pi-hole)

IPv6: your pi-hole's static IP is self-assigned, and to advertise it to clients, you enter this address in the router settings as the IPv6 DNS server.",pihole,1646312476.0
9617,comment,1,hz6e1ak,,"If you set an IP address in the DHCP range, only on ISP router. If is not on DHCP range, you set only on pihole.",pihole,1646312209.0
9618,comment,1,hz6ualc,,"If you are not using pihole as DHCP, you can just assign it a static IP in the router. It’s easier than doing a manual one on the device itself.",pihole,1646319833.0
9619,comment,1,hz7l9sg,,Thank you,pihole,1646330335.0
9620,comment,2,hz6yi71,,">	Pi-Hole should have the option in its configuration

It does not. Setting a static IP is done at the OS level.",pihole,1646321530.0
9621,comment,2,hz6yodg,,">	IPv4: pi-hole configuration

We no longer set a static IP. This is done at the OS level. We changed this several versions ago.",pihole,1646321601.0
9622,comment,1,hz6g81h,,IPv4,pihole,1646313390.0
9623,comment,1,hz7leu3,,Phenomenal thanks!,pihole,1646330388.0
9624,comment,1,hz8ao6j,,"Well at least PiVPN asked me if I wanted to change or keep them, I asume Pi-Hole ahould act similarly.",pihole,1646340212.0
9625,comment,1,hz8awv3,,"And as far as I remember PiVPN chaneged the network file when I changed the IP during configuration, altho it was unstale as I remember so I prefer to copy my own config there.",pihole,1646340306.0
9626,comment,1,hz8tqm7,,">I asume Pi-Hole ahould act similarly.

We assume you don't want Pi-hole to change the IP settings on the host device, so we don't change them.

You make the changes at the OS level should you decide to change them.",pihole,1646348237.0
9627,comment,1,hz8x0a1,,But at least in PiVPN there was an option to change them.,pihole,1646349648.0
9628,comment,1,hz93te0,,"We don't offer that option.  It's simple to change the settings in your OS, or reserve an IP in your DHCP server.",pihole,1646352616.0
9629,comment,1,hz93wpt,,"Well PiVPN does, and I didn't say it wasn't.",pihole,1646352656.0
9630,post,43,t5pcj8,"A tool for identifying source of ads, all on mobile","Ofc you can use the web interface and check the domains, or use termux (or other ssh clients), ssh to the pi and tail the logs, or you could use a computer and use developer tools (devtool), but what if you dont have a computer nearby, or are too lazy to boot your computer for a single domain, but still want the accuracy of devtool?

I found a android app that include devtool, so that you could debug a webpage and determin the ad source, all on mobile. Note that I am in no way associated with the developer of the software. 

The app is called kiwi browser (com.kiwibrowser.browser), and is a chromium based browser. You dont need to give it any permission. Here are the steps for finding out the source of ads:

1. Use kiwi browser to open the site in question, just like any android browser
2. Click the 3-dots on top right, devtool is in the bottom of the menu, you may need to scroll down in the menu
3. The devtool will be opened in a new tab, switch tabs to the new devtool page

From here you have a few options:
### Use element selector
1. Select the element tab
2. Click the ↗□ icon, it will become blue
3. Switch tabs to the orginal page and click the ad
4. Switch back to devtool, the element will be highlighted

### Use ""sources"" tab
1. Select sources tab, same row as the element tab, might be hidden
2. It show resources under each domain, click the arrow beside it to expand each entry, until you find the item
3. Click the item and and look at the preview, repeat if needed
4. Block the domain

tips: images (ads) usually are found in static folder, image folder, etc. css folder is relevent for website styling, which should not directly relate to ads. js are scripts. css and js folder usually dont contain ads so you could skip them first.",pihole,1646306302.0
9631,comment,5,hz69653,,"Been using kiwi for a year now, and it's no more no less than what I expect from a mobile browser... Only, it gets rid of all amp links in searches and that's a breath of fresh air.",pihole,1646309356.0
9632,post,1,t5op1a,pihole unresponsive and won't even show up in router (can't ssh),"Hey all,

so my pihole was running perfectly fine on the new pi zero 2 for months now and stopped working over night. It's completely unresponsive, can't ssh in and doesn't even show up in my network devices on the router. Power cycling the device did nothing. (it's got a static IP).

I stumbled over this post on the forum (but holy, I mean just read it...): [POST](https://discourse.pi-hole.net/t/pihole-non-responsive-after-running-for-some-time/43498/52)

Then restarted my router and the pihole again, and there it is back online. After inspecting the syslog, there are multiple entries with:

`raspberrypi dhcpcd[544]: wlan0: carrier lost`   
`raspberrypi dhcpcd[544]: wlan0: deleting address`

First entry was four days ago, then ok for one day. After one day it then happend every two hours. And at one point it's totally gone.

What should I do now? Any advice on this? The thread on the forum is not really helpful to me, other than some rambling and babbling. I'm no expert linux dev btw, just a user :)",pihole,1646303670.0
9633,post,2,t5nuf7,Augloop?,"I have many queries from domains with ""augloop"" in them.  such as augloop.office.com , augloop-......cloudapp.azure.com and so on.  What is this ""augloop""?  And should this be on my block list?  
thanks in advance",pihole,1646300033.0
9634,comment,1,hz7x2od,,"I simply Googled augloop.office.com......

augloop.office.com is a subdomain of office.com. DNS resolution of augloop.office.com points to 52.111.245.4 with a location in San Francisco, California US. Hosting or network services services are provided on Microsoft Corporation networks via Microsoft Azure.

gethostbyname: 52.111.245.4 [52.111.245.4]

Latitude / Longitude: 37.77493 -122.41942

Time Zone: 07:00",pihole,1646334862.0
9635,post,3,t5mskn,Pi-hole and Unifi UDM-Pro,"Hello Friends,

just a quick question:

I am running a Pi-Hole with Unbound and a UDM-Pro as a Router. To get all VLANs to talk with Pi-Hole I entered the IP of the Pi-Hole as a DNS for the WAN connection. All Clients now go over the Pi-Hole but I see my public IP sometimes as a client in the logs.

Is this okay or am I introducing issues? In the Past when I had entered the IP for all VLANs I got some issue (maybe because the Pi-Hole was in a different VLAN from some clients, but inter VLAN routing was allowed during this time)",pihole,1646295477.0
9636,post,15,t5l9gz,What is this TYPE65521 request?,,pihole,1646289305.0
9637,comment,5,hz5jgx0,,It's apparently an experimental INTEGRITY record for Google sites and Chromium.,pihole,1646289919.0
9638,comment,5,hz5joqy,,https://docs.google.com/document/d/14eCqVyT_3MSj7ydqNFl1Yl0yg1fs6g24qmYUUdi5V-k/edit,pihole,1646290070.0
9639,comment,4,hz5jqt9,,"If its for google sites, I dont know why my local domain would also have a TYPE65521 request. 

I have another domain (pi.weather) hosted on the same pi with pihole, which serves the temperature pressure and humidity, etc. I dont understand why that would also have a TYPE65521.",pihole,1646290110.0
9640,comment,2,hz604bn,,">I dont know why my local domain would also have a TYPE65521 request

It's your chromium browser that makes that request. It can't know if that record exists so it just askes for it and sees what the answer is. According to the document someone else linked here it's an experimental feature only used by a selct group of testers. Did you enroll in some beta programm or do you use some bleeding edge version of chromium?

>I dont understand why that would also have a TYPE65521

*Does* it have a resource of that type? Just because your browser queried for it does not mean it exists, I mean that is how it finds out whether the record exists or not.
Did the REPLY column say `NODATA`? If yes, that record does *not* exist (but the domain exists).",pihole,1646302620.0
9641,post,0,t5gfn6,Issue with Google cert question,Has anyone seen this issue? For some reason it pops up on my phone several times a day and I have no idea why. I don’t see any blocks regarding the Google domain at all. Happening on my iPhone 11. [picture](https://imgur.com/a/sJsVvDI),pihole,1646273216.0
9642,comment,2,hz4qyxh,,"This is an issue for the IOS forums. Once Pi-hole has resolved the domain name, Pi-hole is done.",pihole,1646274340.0
9643,comment,1,hz4xamk,,"I get it, but at the same time I failed to mention that the only time I have this issue is when my iPhone is pointed to pihole as a dns server. If I remove it and it only points to the secondary (cloud flare) I don’t have the issue.",pihole,1646277388.0
9644,comment,1,hz526y7,,Compare the IPs returned by each of the two DNS servers.,pihole,1646279822.0
9645,comment,1,hz8oz2q,,As in doing an nslookup against something or?,pihole,1646346225.0
9646,comment,2,hz8u3x7,,"You can do this against both of the two DNS servers used.

nslookup domain IP-of-the-router-DNS-here

nslookup domain IP-of-the-Pihole-upstream-DNS-server-here",pihole,1646348396.0
9647,comment,2,hzf7apz,,"I may have found the issue. Doing what you suggested gave me 2 different IPs for [google.com](https://google.com), turns out a while back for who knows what reason I made a local dns record for [google.com](https://google.com) to [8.8.8.8](https://8.8.8.8) and I think that may have been throwing it off. Been a day and I haven't received the error message on my phone anyway.",pihole,1646460976.0
9648,comment,1,hzf7ty1,,That will do it.,pihole,1646461312.0
9649,post,0,t5fxmf,How do I configure 2nd pi-hole/unbound,"I setup a second Pi Zero 2/Pi-hole/Unbound, but when I shutdown the first Pi I have no traffic.

Can someone tell me what may be misconfigured.",pihole,1646271715.0
9650,comment,4,hz4o9mr,,"Did you add the second pi-hole to your router?

Did you refresh your client's DHCP to pick it up?",pihole,1646273043.0
9651,post,0,t5fjxs,Tried to setup WAP and now can't connect to Pi/Internet at all," I have a Raspberry Pi running Raspbian.

Previously, I installed PiHole and VNC server. I run the Pi in headless mode and connect through VNC.

I wanted to add a wireless access point on the Pi, so I followed this tutorial: [https://thepi.io/how-to-use-your-raspbe ... ess-point/](https://thepi.io/how-to-use-your-raspberry-pi-as-a-wireless-access-point/)

However, right around the time I was adding the bridge (step 8), my pi lost connection to my VNC client. At first I thought the Pi might be down, but when I connected to the Pi using a physical keyboard and monitor, I saw my Pi was still up indicating it was some sort of connection failure.

However, now I cannot connect headless to my Pi using VNC viewer, I cannot access the Pi at all remotely, even using its ip address.

Furthermore, on the Pi itself, in non-headless mode, I can't access the Internet at all. I tried loading a web page on my browser and nothing happens.

So after following the instructions on the link to setup a WAP, I lost the ability to connect to the Pi through VNC Viewer, through IP address, and the Pi itself can't access the Internet either.

Can someone tell me what happened? The best case is if I can get the WAP working but at the very least, I need to get Pi Hole and VNC Viewer working again, but the instructions don't say how to reverse the process.

Can anyone help? I'd take any suggestions on how to fix the WAP or how to undo the changes that I've made.",pihole,1646270546.0
9652,comment,1,hz4r3fp,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1646274401.0
9653,post,1,t5efzp,(Re-) Introducing munin-pihole-plugins,"What is [munin-pihole-plugins](https://github.com/saint-lascivious/munin-pihole-plugins)?

[Munin](https://munin-monitoring.org/) [plugins](https://gallery.munin-monitoring.org/) for monitoring [Pi-hole®](https://github.com/pi-hole/pi-hole). Transforms a server into a powerful monitoring platform, as simple as [one](https://github.com/saint-lascivious/munin-pihole-plugins#step-one-download), [two](https://github.com/saint-lascivious/munin-pihole-plugins#step-two-install), [three](https://github.com/saint-lascivious/munin-pihole-plugins#step-three-wait), ...[four](https://github.com/saint-lascivious/munin-pihole-plugins#step-four-monitor).

munin-pihole-plugins is a set of Munin plugins for monitoring various Pi-hole stats, and now also an installation and management script for deploying the Munin monitoring environment and a [lighttpd proxy](https://github.com/saint-lascivious/lighttpd-external-munin-proxy) as well as the plugins themselves. Born of personal use, it has developed into a hobby project of mine.

This project is intended to be installed alongside Pi-hole, but there is no direct requirement that this be the case. You will however have to do a small amount of configuration to point the plugins at the correct host with the correct API credentials as munin-pihole-plugins will not be able to obtain this information itself in this case.

This project is not distribution specific, but satisfying dependencies (which can be disabled) does revolve around dpkg and apt, and the default paths (which can be overridden) are Debian-ish. The munin-pihole-plugins script provides a help text capable of listing environment variables used by munin-pihole-plugins and their current values.

Manual installation is also covered in the README in the linked repository. Please direct any issues to [the issue tracker](https://github.com/saint-lascivious/munin-pihole-plugins/issues).

[Plugin image gallery](https://imgur.com/a/Su26uYb)",pihole,1646267165.0
9654,comment,2,i2agk6r,,Just made a PR against the repo,pihole,1648367319.0
9655,comment,1,hz4et9n,,"Author's note: I don't actually run 2M+ domain blocklists updated daily. That's a sample node spun up for testing purposes showing continuously large but variable values, and a range of cases like caches falling over, service restarts etc.",pihole,1646268408.0
9656,comment,1,i2ah8mb,,"Cheers.

The redirection case is obvious in hindsight. It wasn't really something I had considered happening in the API call. That makes perfect sense.

The plugin configuration naming schema is a fun one and something I'll have to look into a bit more. I can't reproduce the fail case on my end, and I'm not immediately sure as to why that is the case. None of my Munin config stubs have extensions.

If specific versions of Munin do require this it's fine and it shouldn't hurt anyone else, but I'd like to understand the difference and what's happening here.",pihole,1648367916.0
9657,comment,2,i2ahx0j,,I am on version 2.0.56 I have munin installed on three server all setup via ansible and usinghttps://github.com/geerlingguy/ansible-role-muninhttps://github.com/geerlingguy/ansible-role-munin-nodeFor quite a while. All plugin configs live in a ansible.conf file. never had issue getting read.I had issue with the initial install and I tried reaching out to you with no response. After my graphs not updating for a few days I found the reason.https://github.com/saint-lascivious/munin-pihole-plugins/blob/master/script/munin-pihole-plugins#L192Took me a few days but once I removed this extra file and restarted my graphs generated. I am not using the cgi mode. Maybe the install should check whats already used.So I fixed up the curl by just allowing the curl to follow links. And since it was an issue for me I renamed the config file to .conf..conf in my experience is pretty common when auto loading extra configs. Maybe the none extension is from older versions. but it just was not loading for me until I renamed.I dumped out the url being built and ran munin-run to see what was generated and was always the default until the change. At least for me so I added it.,pihole,1648368505.0
9658,comment,1,i2akq69,,"Out of curiosity, and to better understand potential use cases and options for handling this going forward, what's the reasoning behind using the cron graph (and html?) strateg(y|ies)?

It struck me as somewhat unusual. The only way to really tell if someone's using the cron strategies, and using them *deliberately*, would be checking to see if they've done something unexpected and somewhat superfluous, going out of their way to uncomment/""enable"" flags for default values.

The reasons behind my explicit setting of cgi graph and html strategies are twofold, as such:

 - I want dynamic graph zooming with dynazoom to work and I've literally never got this to work with the cron strategies, I'm not confident it's even possible.

 - I don't want graphs generated every 5 minutes (or at any interval, really) during the 99.9+% of the day I'm not looking at my Munin server.

There's a bakers dozen nodes in my setup, generating a ballpark figure of approximately 150 individual graphs each, and graph generation is completed within several seconds, on demand as required.

If there's some use case for cron strategy here I'm overlooking (I can imagine at least one but I don't want to speculate), I'll have a think about how to handle this. Though as above it would be quite difficult to determine, and will probably involve some form of user confirmation.",pihole,1648370977.0
9659,comment,1,i2al1r9,,I've never had the CGI mode working. Pretty much gone just the default. I ma probably missing what is need for the cgi mode to work. My generation time has gone up three seconds with the pihole graphs added. I guess I do not care for the realtime result. its more a historical thing to check for me.,pihole,1648371256.0
9660,post,1,t5bpfh,Synology reverse proxy with pihole as DNS/DHCP,"Not sure if this is the right place but I've been tearing my hair out over this (admittedly minor) annoyance.

I should mention in advance that I'm only concerned with internal access, nothing is exposed to the wider internet.

My setup looks like this:

    Router --> Pihole (DHCP/DNS) --> Synology NAS (Docker)
                           |           | APP_A
                            \----> PC  | APP_B
                                       | ...

I have APP_A and APP_B running on docker on my NAS, which has the DSM reverse proxy set up to forward requests like so:

    APP_A.nas.home -> localhost:PORT_A
    APP_B.nas.home -> localhost:PORT_B
    ...

From my PC I can access `nas.home:PORT_A` and have everything resolve correctly, but `APP_A.nas.home` just returns `NXDOMAIN` and I get nothing back.

I don't really mind replacing the reverse proxy on the NAS with settings in pihole or anything, I just don't want to have to remember all the different ports I need (I've got quite a few apps running and I access them from a few different devices).

I can get this working correctly if I use the NAS as a DNS server, but it seems like I can't get pihole's DHCP server to tell everything on the network to use the NAS as the primary DNS (which then forwards everything else to the pihole's DNS), and using the pihole's DNS directly doesn't seem to work either.

Is there a way I can get this working or am I trying to do something that I shouldn't be doing?

Edit: Formatting is hard

Edit 2: I feel like an idiot, I was using the wrong thing.

For those who are (somehow) in a similar situation to me, my solution was basically what was described [here](https://medium.com/@containeroo/using-pi-hole-to-route-your-services-internally-2ff495093718). I edited `/etc/dnsmasq.d/05-custom.conf` and added the line `address=/*.<NAS_NAME>/<NAS_IP>` then ran `pihole restartdns` and it basically just worked.",pihole,1646259395.0
9661,post,3,t5aogo,Whitelist Google Ads?,"Im new to Pihole, is it possible to whitelist Google Ads, such as the ones that appear at the top of a Google search without opening up all the other ads you see on sites?

Thanks for any help!",pihole,1646256576.0
9662,comment,1,hz40nk3,,Try www.googleadservices.com,pihole,1646261697.0
9663,comment,-1,hz41t0g,,Why?,pihole,1646262203.0
9664,comment,2,hz43ew1,,"Thanks! This worked for the sponsored ads on search, shopping tab...

I'm wondering if it will open up Google paid ads on sites. I'll keep an eye out and chime back when ive done some testing. 

Much appreciated!",pihole,1646262928.0
9665,comment,1,hz4e4q4,,"I don't think it will, but I haven't tested that.  I think most of those come from doubleclick",pihole,1646268065.0
9666,post,2,t56kj0,Can’t find the ipv4 or ipv6 addresses for my Pinole after update,There was a page before I updated that gave me the Ipv6 address to use in my dns settings but I cannot find it am I making a silly mistake here ?,pihole,1646245417.0
9667,comment,2,hz42liq,,">There was a page before I updated that gave me the Ipv6 address to use in my dns settings

We removed this from the web admin GUI since the information was not always accurate.

https://discourse.pi-hole.net/t/where-did-the-ip-address-information-go/49677/2",pihole,1646262560.0
9668,comment,1,hz2zkam,,"terminal, “ip addr”",pihole,1646246793.0
9669,comment,1,hz3apgc,,"That helps, am I right in assuming they have removed the feature from the pi holes web page",pihole,1646251063.0
9670,comment,1,hz3jw0s,,"Yes, some time ago. Covered in the release notes.",pihole,1646254645.0
9671,post,2,t56fyb,PiHole blocking RCS,"Is anyone else having issues recently with Pi-Hole blocking RCS messages.  In the last week or so whenever I enable my PiHole as my DNS server on my phone I am unable to send or receive messages.  Not really sure who the RCS provider would be for me, my provider (Bell Canada) or Google.",pihole,1646245081.0
9672,comment,2,hz2wx9m,,You probably have added some blocklists that break the service. Or a blocklist was updated to block some urls the service needs. Try googling the service and whitelist and see if you can find out…,pihole,1646245786.0
9673,comment,2,hz39dhq,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1646250555.0
9674,comment,1,hz34h7s,,What are RCS messages?,pihole,1646248676.0
9675,comment,1,hz4ab6x,,"Yes! My wife and I are in the U.S. and using Verizon. As soon as I connect to the WiFi at home (where Pi-hole is the master of all it surveys), the RCS ""connected"" status immediately changes to ""connecting"" and stays there. If I disconnect from the WiFi, it takes about 10 seconds to reconnect. I still haven't isolated what's breaking it yet, but will happily report anything I find.",pihole,1646266176.0
9676,comment,4,hz3k6ju,,[Rich Communication Services](https://en.wikipedia.org/wiki/Rich_Communication_Services),pihole,1646254761.0
9677,comment,1,hz4at6o,,"You haven't been able to track down which domain is causing the issue, have you?  I've done some quick tests but nothing is jumping out at me.  Hopefully Google isn't using their ad network domains for this.",pihole,1646266426.0
9678,comment,1,hz3opfu,,"Thank you, never heard of it before. Since it seems IP based, breaking it using DNS blocking is very possible …. Good luck to find the right entries.",pihole,1646256630.0
9679,comment,1,hz4drrs,,"Exactly! As soon as the WiFi starts exchanging data, the log gets about 20 hits per second. I'm trying to temporarily whitelist a few at a time, hoping that it's not some odd combination.",pihole,1646267884.0
9680,comment,2,hz3sar7,,"It provides a chat style layer for SMS/MMS and removes most of the inherent limitations to the protocols. It has existed and been deployed in various localities for a very long time, but historically it needed full carrier backing, and as most carriers plainly suck the rollout was very poor.

Approximately 3 years ago Google ended up just going ""fine, well do it all ourselves"" and moving the layer our of carrier handling entirely, but too little too late in the regard that most localities moved on from MMS/SMS many moons ago and consumers still have it stuck in their mind that SMS/MMS is functionally useless.

If carriers pulled their thumbs out of their rear ends a decade ago there's a pretty good chance that the wide and varied personal messenger scene wouldn't be so fragmented and WhatsApp et al would have had no reason to exist.",pihole,1646258119.0
9681,comment,1,hz4jitq,,"I suspect that it's not a blocklist issue at all. Suspending Pi-hole doesn't fix it, either. It's got to be some other configuration issue. My EV car charger and garage door opener disappear when Pi-hole is running, too, even if it's disabled.",pihole,1646270737.0
9682,comment,1,hz4pbwu,,I'm using Pi-Hole exclusively with DNSChanger on my phone.  I only have the issue when it's enabled.,pihole,1646273552.0
9683,post,0,t55q0j,I need help getting Pi-hole working again after a router update,"**Background:** I use my ISP router. I can't use an older version of the router firmware because my ISP is preventing the downgrade. The updates are automatic.

**Problem:** Pi-hole stopped working on all my devices. After a long time of troubleshooting, I think I found the culprit. I found out that my router now uses a DNS6 (IPv6 DNS) to resolve IPv4 addresses. DNS6 takes precedence over DNS4 in resolving web addresses. For context, I don't have a public IPv6 address, only a local one for every device connected. This broke everything, ads are coming through now.

I know this is technically not a Pi-hole problem but if you had a similar experience, any help is appreciated. 

**Temporary fixes I found:** Well for Windows PCs is very simple, I just need to disable altogether the IPv6 interface in the control panel, so the router is forced to use DNS4. I didn't find out what I'm losing by disabling the IPv6 interface, but not having a public IP either, I don't think I would lose much. 

For android devices, I have no idea. I need Pi-hole the most on mobile devices, because of all those ads in most of the apps.

**What I tried:** I tried to reconfigure Pi-hole but, for some reason, the router doesn't even assign a local IPv6 to my Raspberry Pi. This is very strange, since every device connected to my network has it (checking from the control panel of the router).",pihole,1646243218.0
9684,comment,1,hz3di6m,,"Try ""ip addr"" (ssh to PiHole in Terminal) to see if there is an IPV6 address in your PiHole.",pihole,1646252148.0
9685,post,0,t55nmm,PADD screen size,"Hi all. 

Wondering if someone can help me. 
I installed Pi-hole and I have one of those 7” screens at 1024x600. 

It’s working and I installed PADD. 

But it’s only displaying on a corner of the screen. 

https://i.imgur.com/w67nYGX.jpg

Is there any way to get it to use the full screen?",pihole,1646243045.0
9686,comment,1,hz3cu3h,,"I unserstand what you want but in reality, there is notthing wrong with the display the way it is. It's only PiHole and believe me, you will not need the entire screen unless you are using a web browser and the PiHole GUI. Even then, you don't need the entire screen.",pihole,1646251886.0
9687,comment,1,hz3vehp,,"PADD will choose from one of a number of preset screen layouts based on the number of characters that your screen is currently capable of displaying.  There are a number of ways to make it fill your screen, e.g. you can change the resolution of your screen, or you can change to a larger font size, or you can create a customized version of the PADD script to better fit your display at the current font size and resolution.",pihole,1646259425.0
9688,comment,1,hz3zr3a,,"I guess increasing the font would be easiest?

Is there an easy way to do this?",pihole,1646261302.0
9689,comment,1,hz3k7do,,"I get that, BUT I want this to run always on the side of my office shelf as a quick reference.

As such I'd like it as big as possible to actually be able to glance over and see how its looking.

Right now its just a bit too small for that",pihole,1646254770.0
9690,comment,1,hz43oeq,,sudo dpkg-reconfigure console-setup,pihole,1646263049.0
9691,comment,1,hz3mcg0,,"Yeah, it's a new toy and you want to use it, you want to monitor it, you want to play with it. Believe me, once you are done tinkering with it, you only need to ""see"" it once a month or so.",pihole,1646255636.0
9692,comment,1,hz5slhm,,Thanks I tried that but didn’t understand what to set lol,pihole,1646296540.0
9693,comment,1,hz5xz19,,">sudo dpkg-reconfigure console-setup

So I tried messing with this. Got the font a bit bigger but it still is only taking up half the screen",pihole,1646300870.0
9694,comment,1,hz3msdg,,"Again totally get that... 

But I'm a geek so would be a nice visual",pihole,1646255815.0
9695,post,1,t53z6l,Strange entries in Network Overview,"Hi!

I've been looking at what's going on since yesterday and I can't find anything. I hope you can help me.

**Pi-hole setup until 29 nov 21**

* LXC container (ubuntu) and automated install (curl)
*  Pi-Hole 5.1.2, Web Interface 5.1.1, FTL 5.2

**Pi-hole setup from 29 nov 21 until now.**

* Docker container (official image)
* Pi-Hole 5.6, Web Interface 5.8, FTL 5.11

So... Yesterday I opened pi-hole and I went to Network overview and I noticed that there are some strange devices, the first one was the day I made the upgrade. The thing is that these ""devices"", don't show an IP address (it's empty), no queries, all of them are random MAC address(no vendor assigned) and shows as ""unknown"" host. Since the upgrade, I can see about 13 entries like that so... It doesn't happen every day. Of course, I also can see my genuine devices with no problems and works perfectly.

I stopped the docker and run the LXC I had been using until 29 nov and I can't see any device without IP or ""unknown""... So... Looks like this thing started the day I upgraded from LXC to Docker. 

Any idea about what can it be? Sorry if I've made any spelling mistakes.",pihole,1646238691.0
9696,post,1,t53kd2,what is this error?,"hey all.  can you please help me with this [error](https://imgur.com/a/NcFb9DM) im getting?

thanks",pihole,1646237612.0
9697,comment,2,hz2db8r,,"It is not an error, it is a warning.  Dnsmasq is informing you that the name of a client requesting a lease is already in use.

Did you read the linked documentation shown below each warning?",pihole,1646238338.0
9698,comment,1,hz2dsj4,,"i did.  over my head.   i have nothing in my local hosts file.  

##
127.0.0.1	localhost

255.255.255.255	broadcasthost",pihole,1646238522.0
9699,comment,1,hz2j3nc,,Look in file ***/var/log/pihole.log*** for DHCP transactions from that client.  What do the entries in that file show?,pihole,1646240539.0
9700,comment,1,hz48au5,,"thanks for the help, but i just ended up switching my dhcp back to the router.  all that is over my head.",pihole,1646265199.0
9701,post,671,t53a7a,My setup 😊,,pihole,1646236865.0
9702,comment,83,hz2a4uz,,"4 clients, a cute little network 🥰",pihole,1646237098.0
9703,comment,37,hz2awea,,I like the info screen.,pihole,1646237399.0
9704,comment,27,hz2b78p,,"Amazing when you think about how much is in that little package.  

Looks great :)",pihole,1646237517.0
9705,comment,12,hz2dogi,,"What exact display you are using here? These are two buttons on the side, right?",pihole,1646238478.0
9706,comment,10,hz2o49w,,"This is the pihole setup I want, is there a case that accommodates the info screen?",pihole,1646242454.0
9707,comment,11,hz32zhu,,"Pi zero w is perfect for pi hole, mine sits in the window connected to a battery pack.",pihole,1646248098.0
9708,comment,4,hz2jn7v,,I did this exact setup for my parents' Pi.  It works great for them.,pihole,1646240748.0
9709,comment,6,hz39o9y,,"How did you setup the info screen? It looks dope, would be cool to have it in a case too for protection",pihole,1646250668.0
9710,comment,4,hz3a3kt,,I thought I was in /r/homelab for a minute there,pihole,1646250829.0
9711,comment,5,hz2u5f7,,"Can I use that screen and this at the same time?  They are using the same pins but I need a little screen and buttons for a thing.    
https://www.adafruit.com/product/1085",pihole,1646244744.0
9712,comment,5,hz57gem,,I have a [similar setup too](https://i.imgur.com/EoNXSn4.jpg) :),pihole,1646282623.0
9713,comment,3,hz34gm1,,Cooool! Any performance problems? Cause of the Usb-Ethernet-dongle?,pihole,1646248670.0
9714,comment,3,hz39sl7,,"Nice! I've been using this setup for a status screen, it is a little simpler (monochrome oled, no buttons), no issues for a long time now.",pihole,1646250713.0
9715,comment,3,hz3iqjv,,Do they make PoE hats for these little guys? Also would be nice to know if they work with USB adapters,pihole,1646254196.0
9716,comment,3,hz4104a,,Purchased pi 2W on www.pihut.com yesterday,pihole,1646261851.0
9717,comment,3,hz45hvy,,Went to buy that screen it says it's only compatible with raspberry pi zero 2 does anyone know if that's true or not,pihole,1646263885.0
9718,comment,3,hz4qqea,,Did you follow a tutorial to get this setup?,pihole,1646274226.0
9719,comment,3,hz6xvwd,,This checks so many boxes for me. Nice work.,pihole,1646321280.0
9720,comment,2,hz5wobd,,"This is nice. I want to buy one of those screens but I see a 240x240 which looks like it will work on a zero also. Any preference for the 135x240? Is it the aspect ratio?
The shop I want to get from has them about 20 cents difference.",pihole,1646299804.0
9721,comment,2,hzq6yiz,,"Zero makes an awesome hole, set and forget :)",pihole,1646674469.0
9722,comment,6,hz2ug7x,,Perfection. Just how God intended,pihole,1646244855.0
9723,comment,4,hz52kch,,Want to upvote.  Do not want to ruin 420.,pihole,1646280015.0
9724,comment,2,hz2pwqo,,Very cool!,pihole,1646243137.0
9725,comment,1,hz3md6w,,Nice hat,pihole,1646255644.0
9726,comment,1,hz3yubf,,Slick and to the point. 🔥,pihole,1646260904.0
9727,comment,1,hz4gvm8,,"Nice I have a 4B, just ordered a cooling case.",pihole,1646269441.0
9728,comment,1,hz4qp8l,,Nice,pihole,1646274210.0
9729,comment,1,hz5ksfx,,How well does the Zero run Pihole? I’ve been thinking of trying to get one to run it instead of a Pi 4,pihole,1646290831.0
9730,comment,1,hz5yjei,,"pardon my ignorance, new here.   


do you connect this to your main router in order to protect the whole network?",pihole,1646301329.0
9731,comment,1,hz6ud2e,,"This is brilliant, can you give me a little write up on how you about this? If you have time of course, I want to make one too!",pihole,1646319861.0
9732,comment,50,hz2idc9,,[deleted],pihole,1646240260.0
9733,comment,1,hz5lo0i,,makes me unsure how I feel about having 24 clients lol,pihole,1646291433.0
9734,comment,10,hz2d1ig,,Me too.,pihole,1646238235.0
9735,comment,30,hz2lg02,,You talk to my wife?,pihole,1646241437.0
9736,comment,29,hz2dyab,,"https://thepihut.com/products/adafruit-mini-pitft-135x240-color-tft-add-on-for-raspberry-pi-ada4393

Yes, there are 2 buttons ✌️",pihole,1646238582.0
9737,comment,2,i11h5w3,,"Check out Adafruit. I think there's one or two here. Look for ""piOLED"" display.",pihole,1647536750.0
9738,comment,2,i21k8ql,,Just 3d print one... I ordered a display and plan to do it,pihole,1648198529.0
9739,comment,11,hz393ka,,This is a zero 1.3. Runs over Eth0,pihole,1646250449.0
9740,comment,8,hz3noe9,,If this was r/homelab there would be 20 of them clustered.,pihole,1646256178.0
9741,comment,2,hz3y48z,,"In theory, yes - there are other i2c pins on the pi that you could attach it to.",pihole,1646260590.0
9742,comment,2,hz6mkjh,,What case are you using? This seems like a great setup.,pihole,1646316483.0
9743,comment,1,hz5djwl,,"30k ads! :o how long has the been running? I'm new to this, hoping to get something set up once I understand how it all works...",pihole,1646286138.0
9744,comment,1,hz749hs,,what case are you using?  Could you share a link or name?,pihole,1646323816.0
9745,comment,5,hz3973m,,None whatsoever. Been running without issues for over a year now.,pihole,1646250487.0
9746,comment,2,hz3jep1,,There is a micro usb - ethernet POE available,pihole,1646254458.0
9747,comment,2,hz5oe1h,,">	~~www.pihut.com~~

www.thepihut.com",pihole,1646293371.0
9748,comment,2,hz5cqqx,,It's not. On the picture you see a zero 1.3v.,pihole,1646285654.0
9749,comment,5,hz5c9m2,,"Do you mean the screen? Yes, there are tutorials on how to set it up along with the code",pihole,1646285368.0
9750,comment,1,hz5yacc,,"I say buy whatever you feel is better for what you want to achieve. I wasn't really bothered with the actual type of display, as long as I had the stats shown. I went with this as I like the size of it 😁",pihole,1646301124.0
9751,comment,2,hz5l7xx,,In my opinion running pihole on anything other than a zero is an overkill 😁,pihole,1646291122.0
9752,comment,2,hz5ylpi,,"Yes, it works on every device connected to the router",pihole,1646301384.0
9753,comment,3,hz83vbg,,"I'm using the most basic Raspberry Pi Zero 1.3v (no WiFi). It's connected to ethernet via a [USB Dongle](https://www.amazon.co.uk/dp/B00RM3KXAU/ref=cm_sw_r_apan_glt_i_VXN5Q94RYPFHBD1S36EK?_encoding=UTF8&psc=1). Since I have no access to a soldering iron I used solderless [GPIO Hammer Headers](https://thepihut.com/products/gpio-hammer-header-solderless) to attach the [display](https://thepihut.com/products/adafruit-mini-pitft-135x240-color-tft-add-on-for-raspberry-pi-ada4393). I followed the manufacturer's tutorial to get the stats screen working. The Pi is taking power from routers USB port. 

I hope that explains it for you 🙂",pihole,1646337534.0
9754,comment,38,hz2l857,,And everything was purchased at microcenter.,pihole,1646241352.0
9755,comment,1,hztct1c,,This comment and the fact I have 24... in my Prius... That I Overland in... I am really unsure how I'm feeling.,pihole,1646727776.0
9756,comment,4,hz34v2b,,We not talking...,pihole,1646248823.0
9757,comment,1,hz4p25l,,"> You talk to my wife?

Yeah, she said _""Sonny, it's the motion of the ocean and not the size of the boat that matters""_",pihole,1646273423.0
9758,comment,5,hz2eb0c,,"Very cool, thank you!",pihole,1646238717.0
9759,comment,3,hz36hth,,If that only fit my case. Looks great!,pihole,1646249448.0
9760,comment,3,hz3wod7,,New here.. excuse my ignorance but is one of those microUSBs an Ethernet adapter? How does one connect a device like this via Ethernet?,pihole,1646259967.0
9761,comment,2,hz417tk,,That gives me hope.  I have not seen many projects with screen and other drives posted so I had a growing concern.,pihole,1646261945.0
9762,comment,1,hz7blox,,Vilros cases from Amazon https://www.amazon.com/dp/B08ZDPTFQ2,pihole,1646326668.0
9763,comment,2,hz5luti,,"if you don't want to get new hardware, repurposing any old computer you have lying around might work.  my pihole is running off a ~2004 era dell inspiron lol",pihole,1646291564.0
9764,comment,2,hz5o2y9,,"30k DNS queries, not exactly the same. If you have Alexa those numbers jump way up. She likes to phone home A LOT...",pihole,1646293148.0
9765,comment,2,hz7bayg,,They're Vilros branded cases https://www.amazon.com/dp/B08ZDPTFQ2,pihole,1646326556.0
9766,comment,1,hz6ra58,,Superb. Thanx.,pihole,1646318583.0
9767,comment,1,hz5lcl9,,Thanks! piHut had one in stock yesterday and wish I bought it but I was trying to decide if I needed a 4B instead,pihole,1646291211.0
9768,comment,2,hz5zgsv,,"great! gotta try this out. I have a Raspberry Pi laying around..   
searching for a tutorial",pihole,1646302087.0
9769,comment,1,hz88goc,,"Fantastic thank you, excellent little travel pi!",pihole,1646339340.0
9770,comment,9,hz4oub9,,[OP Cooking](https://youtu.be/MbGDH71zm4w?t=271).,pihole,1646273320.0
9771,comment,1,hzw6ccr,,👀 woah,pihole,1646776310.0
9772,comment,1,i2boa66,,"_”Sry ma8, we done pass takin’…”_",pihole,1648395539.0
9773,comment,1,hz4xq25,,*You aint gonna get from NY to the UK in a canoe*,pihole,1646277597.0
9774,comment,8,hz5wm9w,,"I've been actually using a Chromecast power supply which also has an ethernet port in the power adapter. This way a single cable provides both ethernet and power, although it's just 100mbps, I think it's sufficient. It gets detected automatically so no setup to worry about too!",pihole,1646299756.0
9775,comment,3,hz3wu0j,,"Never mind, I see you posted that below! Neat!! A little easier to find these than a full blown pi3 or pi4 these days",pihole,1646260034.0
9776,comment,3,hz5umbj,,"You need to buy a microUSB to Ethernet adapter or a microUSB to USB Female adapter and then connect a USB Male to Ethernet adapter to the Female USB adapter and you have an ethernet port. (Please note that some USB adapters need a driver to work)

Some examples (Amazon links):

- [Micro USB to Ethernet adapter](https://www.amazon.com/Smays-Micro-B-Ethernet-compatible-Raspberry/dp/B01AT4C3KQ)

- [Micro USB to USB Female adaptor](https://www.amazon.com/UGREEN-Adapter-Samsung-Controller-Android/dp/B00N9S9Z0G)

- [USB Male to Ethernet Adapter](https://www.amazon.com/TP-Link-Ethernet-UE306-Foldable-10-11-10-15/dp/B09GRL3VCN)",pihole,1646298142.0
9777,comment,1,hzcfb0i,,Thank you!,pihole,1646417275.0
9778,comment,2,hz68kyw,,nice! I do have an old laptop with a broken monitor that I can connect to an external one.. thank you! I'll give that a shot :),pihole,1646308974.0
9779,comment,1,i1qqfh0,,"I just came across a great idea.. check eBay for an used thin client like the HP T610 or T620.  You can find some for less than $40 with the power cable, 16gb SSD, 4GB ram.  More than enough to run linux and pihole",pihole,1647999988.0
9780,comment,2,hzdacv0,,"Thank you! I have a question, that may be dumb overall...  does the 100mbps speed limit of the pi zero limit the network speed of everything on the network using the pihole?

Also, I love the username.",pihole,1646429211.0
9781,comment,1,i1qqomu,,"Just in case you haven't seen it - https://rpilocator.com/?instock

Follow their twitter and turn on notifications if you want any chance of getting one haha",pihole,1648000102.0
9782,comment,2,hz5zlzk,,A good place to start would be [here](https://pi-hole.net/),pihole,1646302205.0
9783,comment,5,hz59der,,Not with that attitude,pihole,1646283687.0
9784,comment,1,hz642jx,,Wow I never knew you could do this. Will give mine a go tonight!,pihole,1646305779.0
9785,comment,3,hz6fy99,,"Alternatively, you can get an ethernet hub hat for about the same price (and imo, a sleeker look)

https://www.amazon.com/dp/B07X1BH5FN",pihole,1646313247.0
9786,comment,2,hzdcmb0,,"I used a 2006 minilaptop with broken monitor, headless respbian install because I didn't have a monitor. Do all my monitoring through my phone on the network. It's a pretty good setup once I stopped it from going into sleep when I closed the screen.",pihole,1646430073.0
9787,comment,1,hzdejk4,,"No problem! I have not experienced any kind of network speed slowdown on any of my devices going through Pi-hole in the few years of having them in use.

I will warn that running anything resource-intensive on a Zero W while using Pi-hole will cause DNS resolution to almost cease to work until there's some resource available. Because of that, I only run Pi-hole on them.",pihole,1646430809.0
9788,comment,1,hz6fxfw,,Thanks !!,pihole,1646313235.0
9789,post,1,t4v5ge,Use a resolver different from the system one,"Hi Reddit,  

I'm using NextDNS as Pihole's resolver as a second layer of blocking.  
Everything is fine besides a minor issue. Because  NextDNS is defined as the system resolver, it is used by some tools installed along Pihole, like no-ip's updater. But those domains are safe and don't need that second layer.   

Is there a way to say ""all requests handled by Pihole use those resolvers"" but said resolvers are *not* used by the Pi itself? It seems Pihole's resolvers are auto-added to resolf.conf as the system default.  

I tried to use dnsmasq's server directive, but it seems I  can't set a server directive by default ( // is for no dots domains, /*/ doesn't work)",pihole,1646207841.0
9790,comment,7,hz1283z,,[deleted],pihole,1646212277.0
9791,comment,1,hz1lthp,,"Edit the file that populates file /etc/resolv.conf on the Pi. 

In Raspbian, for example, this would be /etc/dhcpcd.conf. Change the nameserver in that file to whatever server you want the Pi to use.",pihole,1646226277.0
9792,comment,1,hz166nd,,Most likely not.,pihole,1646215497.0
9793,comment,0,hz1c1j0,,"The issue is that updating all green lists from firebog takes already a while, and is automatically done on week-ends.  
Unless I start updating lists every hour, Pihole won't be always able to help against phishing because of the one week gap.  

I pick the most domains resolved with NextDNS. The allowed ones are redirected to my ISP, the blocked ones manually added to Gravity.  
Nowadays, 75% of Pihole's queries don't go to NextDNS, which basically makes them blind about the most-used platforms.  

NextDNS is useless 99% of the time, but in the 6 last months, at least 3 phishing attempts were blocked. I prefer giving away my DNS data to this business than letting a litteral scammer in.  
If my wife won't care about data collection, but will care about phishing. It's sad that we have to choose between tradeoffs, but that's the internet.  

(And the logs allow to check that what Pihole does is exactly what is planned... and that's how I discovered that Pihole's resolver will be hammered by tools *not* using Pihole, by virue of being on the same host)",pihole,1646220166.0
9794,comment,1,hz2qxpo,,"Thank you, it works!",pihole,1646243525.0
9795,post,45,t4rl4p,DNS leak - ISP showing up,"Hi there,

I've set up Pihole with recursive applied.
It appears to be working ok as the logs is showing redirects to the localhost.

I've done a DNS leak test and it is showing my ISP.

Does that mean I am still using my ISPs DNS servers in some manner?

And to eliminate my ISP showing, a VPN is required?

--Solved--
https://discourse.pi-hole.net/t/isp-dns-is-leaking-when-using-unbound/39134",pihole,1646195100.0
9796,comment,14,hz0c2w2,,Have you confirmed your device is using the PiHole? (Just because you set it up doesn’t mean all the devises will use it),pihole,1646195207.0
9797,comment,2,hz0et2t,,"This forwarding configuration may have been installed by Bullseye through resolvconf.

Edit file `/etc/resolvconf.conf` and comment out the last line which should read:

    unbound_conf=/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf

Delete the unwanted unbound configuration file:

`sudo rm /etc/unbound/unbound.conf.d/resolvconf_resolvers.conf`

restart unbound:

`sudo service unbound restart`",pihole,1646196594.0
9798,comment,1,hz0elnj,,"The router has an option to overwrite the DNS with the ISP one.

Even so you mentioned that Pi-Hole was added there, you need to totally disable any DNS service on the router itself while leaving only Pi-Hole as the DNS.

There are 2 setup, a LAN DNS (DHCP) and WAN DNS, check everything.",pihole,1646196486.0
9799,comment,1,hz27u45,,Im getting google. Is that bad?,pihole,1646236192.0
9800,comment,1,hzglk6y,,Are you using Firefox? Firefox sets cloud flare dns in it's settings,pihole,1646494449.0
9801,comment,8,hz0d737,,"If your Pihole is running, can you check this site?

https://dnsleaktest.com/

Turn off VPN 
Leave Pihole on

Do an advanced test.

Does it show with your ISP?",pihole,1646195771.0
9802,comment,2,hz0crr8,,"I've set the router DNS settings as the Pihole ip address.

I've seen the logs react to the web browsing accordingly.",pihole,1646195556.0
9803,comment,1,hz0ih66,,"I'm sorry I don't think I have /etc/resolvconf.conf.  
I cannot find it",pihole,1646198587.0
9804,comment,1,hz5va3l,,"This is the second time I came across these instructions. It fixed an unrelated DNS leak for me when setting up unbound as DNS on the same Pi where Pihole runs. 

Maybe add this to the instructions for unbound of the website? As an optional step similar to the Disable resolvconf for unbound? I remember doing both and everything working great after that.",pihole,1646298669.0
9805,comment,1,hz0hx77,,"Thanks for this   
I've done the WAN but forgot to do the LAN.  
Unfortunately the ISP still shows up after reboot of everything.",pihole,1646198281.0
9806,comment,1,hzgoz6a,,">	Firefox sets cloud flare dns in it’s settings

If you are referring to private DNS, yes. But the default Pi-hole installation blocks this. 

https://github.com/pi-hole/pi-hole/pull/3166",pihole,1646495974.0
9807,comment,5,hz0e018,,It lists my ISP as Cloudflare. (My ISP is not Cloudflare),pihole,1646196181.0
9808,comment,2,hz0dwun,,What IPs did you use for the forwarding DNS on the pihole?  The pihole has to go somewhere to resolve all authorized traffic.  My guess is you still have at least one device still with possibly hardcoded DNS.,pihole,1646196136.0
9809,comment,1,hz0iues,,"Please post the output of the following command from the Pi terminal:

`sudo grep -v ‘#\|^$’ -R /etc/unbound/unbound.conf*`",pihole,1646198795.0
9810,comment,5,hz0eb3d,,Are you using unbound / recursive DNS option within Pihole?,pihole,1646196335.0
9811,comment,0,hz0ewdd,,"in Pihole options 
I removed any upstream DNS servers (Google/cloudflare)
And in the custom one I used the one provided by the guide for unbound doco
127.0.0.1#5335 

I'll check if there are any hardcoded DNS ones",pihole,1646196641.0
9812,comment,4,hz0n8fe,,"Never mind   
Read this - working as intended

[https://discourse.pi-hole.net/t/isp-dns-is-leaking-when-using-unbound/39134](https://discourse.pi-hole.net/t/isp-dns-is-leaking-when-using-unbound/39134)",pihole,1646201414.0
9813,comment,1,hz0j8lz,,"Removed Addresses

/etc/unbound/unbound.conf:# Unbound configuration file for Debian.  
/etc/unbound/unbound.conf:#  
/etc/unbound/unbound.conf:# See the unbound.conf(5) man page.  
/etc/unbound/unbound.conf:#  
/etc/unbound/unbound.conf:# See /usr/share/doc/unbound/examples/unbound.conf for a commented  
/etc/unbound/unbound.conf:# reference config file.  
/etc/unbound/unbound.conf:#  
/etc/unbound/unbound.conf:# The following line includes additional configuration files from the  
/etc/unbound/unbound.conf:# /etc/unbound/unbound.conf.d directory.  
/etc/unbound/unbound.conf:include-toplevel: ""/etc/unbound/unbound.conf.d/\*.conf""  
/etc/unbound/unbound.conf.d/pi-hole.conf:server:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # If no logfile is specified, syslog is used  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # logfile: ""/var/log/unbound/unbound.log""  
/etc/unbound/unbound.conf.d/pi-hole.conf:    verbosity: 0  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    interface:   
/etc/unbound/unbound.conf.d/pi-hole.conf:    port:   
/etc/unbound/unbound.conf.d/pi-hole.conf:    do-ip4: yes  
/etc/unbound/unbound.conf.d/pi-hole.conf:    do-udp: yes  
/etc/unbound/unbound.conf.d/pi-hole.conf:    do-tcp: yes  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # May be set to yes if you have IPv6 connectivity  
/etc/unbound/unbound.conf.d/pi-hole.conf:    do-ip6: no  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # You want to leave this to no unless you have \*native\* IPv6. With 6to4 and  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Terredo tunnels your web browser should favor IPv4 for the same reasons  
/etc/unbound/unbound.conf.d/pi-hole.conf:    prefer-ip6: no  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Use this only when you downloaded the list of primary root servers!  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # If you use the default dns-root-data package, unbound will find it automatically  
/etc/unbound/unbound.conf.d/pi-hole.conf:    #root-hints: ""/var/lib/unbound/root.hints""  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Trust glue only if it is within the server's authority  
/etc/unbound/unbound.conf.d/pi-hole.conf:    harden-glue: yes  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Require DNSSEC data for trust-anchored zones, if such data is absent, the zone becomes BOGUS  
/etc/unbound/unbound.conf.d/pi-hole.conf:    harden-dnssec-stripped: yes  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Don't use Capitalization randomization as it known to cause DNSSEC issues sometimes  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # see https://discourse.pi-hole.net/t/unbound-stubby-or-dnscrypt-proxy/9378 for further details  
/etc/unbound/unbound.conf.d/pi-hole.conf:    use-caps-for-id: no  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Reduce EDNS reassembly buffer size.  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Suggested by the unbound man page to reduce fragmentation reassembly problems  
/etc/unbound/unbound.conf.d/pi-hole.conf:    edns-buffer-size: 1472  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Perform prefetching of close to expired message cache entries  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # This only applies to domains that have been frequently queried  
/etc/unbound/unbound.conf.d/pi-hole.conf:    prefetch: yes  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # One thread should be sufficient, can be increased on beefy machines. In reality for most users running on small networks or on a single machine, it should be unnecessary to seek performance enhancement by increasing num-threads above 1.  
/etc/unbound/unbound.conf.d/pi-hole.conf:    num-threads: 1  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Ensure kernel buffer is large enough to not lose messages in traffic spikes  
/etc/unbound/unbound.conf.d/pi-hole.conf:    so-rcvbuf: 1m  
/etc/unbound/unbound.conf.d/pi-hole.conf:  
/etc/unbound/unbound.conf.d/pi-hole.conf:    # Ensure privacy of local IP ranges  
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address:   
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address:   
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address:   
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address:   
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address:   
/etc/unbound/unbound.conf.d/pi-hole.conf:    private-address:   
/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:server:  
/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:    # The following line will configure unbound to perform cryptographic  
/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:    # DNSSEC validation using the root trust anchor.  
/etc/unbound/unbound.conf.d/root-auto-trust-anchor-file.conf:    auto-trust-anchor-file: ""/var/lib/unbound/root.key""",pihole,1646199022.0
9814,comment,4,hz0efic,,"Nope, just plain old PiHole.",pihole,1646196399.0
9815,post,1,t4p68c,Selective client blocking,"I'm back looking at pihole after giving up on it several years ago (wife acceptance factor).

While I'm testing things out, I'd like to default to having pihole not do any blocking. I realize that I could do this by changing the dns server setting on each device to use blocking, but that requires navigating configuration settings for each one. If I can, what I'd rather do is set the router dhcp to give out the pihole as the dns server and set pihole to do blocking for clients I specify.

With the group management, can I disable any blocking as a default and create a group or groups that enable blocking? It's easy enough to identify the mac address for clients.",pihole,1646187715.0
9816,comment,3,hyzybtb,,"> can I disable any blocking as a default and create a group or groups that enable blocking?

Yes.

https://docs.pi-hole.net/database/gravity/groups/",pihole,1646188993.0
9817,comment,1,hyzvryw,,"~~You can do this but with ip not mac. I have some clients with no blocking but still use pihole~~

I was wrong. Was reminded that it is possible.",pihole,1646187904.0
9818,comment,1,hyzwi94,,Sure. I have an “allow all” group on my PiHole.,pihole,1646188220.0
9819,comment,1,hyzy84k,,Any clients would be added as default until you set it manually. Select none of the blocklist and blacklist for the group default would do the trick.,pihole,1646188949.0
9820,comment,1,hz28j4e,,"I'm still a little unclear on this. I think my confusion is between the ideas of blocking groups, lists and domains.

Blocking lists is familiar from browser ad blocking - you add someone's list and various undesirable things disappear from the displayed page.

Group management has subsections for Groups, Clients, Domains, and Adlists. 

I understand assigning clients to groups (although the effect of a client being in more than one group escapes me - the documentation loses me at ""FTLDNS""). I also gather that whenever a client is not found to be assigned to 

The domain section appears to allow creating mini blacklists with single domains or sets of related domains and assigning them to groups (and thus to the clients in the groups). That makes sense to me, but how this relates to the non-group management blacklist is unclear. I don't expect to use either, anyway.

The adlist section makes sense to me as similar to browser ad blocking - assigning a magic list to groups and thus to the clients in the groups. What wasn't clear to me before is that an ""adlist"" is shorthand for a list of what are ""domains"" in the group documentation.

I'm concluding that the switch for a group status between enable and disable has nothing to do with the clients in the group, but turns on/off applying the group managed mini blacklists and adlists of domains to be blocked. So disabling a group would be the equivalent of (temporarily) removing all adlists and domains (mini blocklists) from the group.

Am I on the right track?

Thanks.",pihole,1646236465.0
9821,comment,3,hyzygod,,">You can do this but with ip not mac

This is incorrect.  From the web Admin GUI group management > client page:

""You can select an existing client or add a custom one by typing into the field above and confirming your entry with ⏎.

Clients may be described either by their IP addresses (IPv4 and IPv6 are supported), IP subnets (CIDR notation, like 192.168.2.0/24), their MAC addresses (like 12:34:56:78:9A:BC), by their hostnames (like localhost), or by the interface they are connected to (prefaced with a colon, like :eth0).

Note that client recognition by IP addresses (incl. subnet ranges) are preferred over MAC address, host name or interface recognition as the two latter will only be available after some time. Furthermore, MAC address recognition only works for devices at most one networking hop away from your Pi-hole.""",pihole,1646189049.0
9822,comment,1,hz2b5lb,,"Adlists are public lists of domains to be blocked (you may see these referred to as blocklists).  When gravity updates (weekly by default) the public adlists are fetched and the domains are added to gravity.

Domains are entries that are local to your machine only.  These never update unless you manually change them.

You assign clients into groups, then selectively apply adlists and domains to those groups to tailor blocking for the clients in that group.

>disabling a group would be the equivalent of (temporarily) removing all adlists and domains (mini blocklists) from the group.

Yes.

If you don't make any groups, then all your adlists and domains and clients are in the default group.",pihole,1646237499.0
9823,comment,2,hyzzbgp,,"Oh man, yea I remember now. I was wrong.",pihole,1646189416.0
9824,comment,1,hz3e59l,,Thanks.,pihole,1646252398.0
9825,post,1,t4na4k,Love PiHole but some sites don't work,"I have my primary and secondary DNS pointing to 2 pi-hole boxes.  Once in a while I have some stubborn DNS issue with regular sites.  Take off instance this one [https://cew.georgetown.edu/cew-reports/roi2022/](https://cew.georgetown.edu/cew-reports/roi2022/)

Going through the pinhole won't work and as I switch to another ISP with its own DNS servers, everything works fine.

Anyway I can do some verbose troubleshooting in pihole and figure out once for all what the heck is going on?",pihole,1646182114.0
9826,comment,8,hyzjcl4,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1646182342.0
9827,comment,3,hyzqf3n,,"https://www.reddit.com/r/pihole/comments/saotvn/the_complete_guide_to_common_issues/

This might also help",pihole,1646185512.0
9828,comment,1,hyzt41r,,"Excellent start and troubleshooting should begin :-)  Geeks at work, stay away",pihole,1646186722.0
9829,comment,1,hz095fy,,Are you using the default lists or have added additional ones. This loads for me using the default lists.,pihole,1646193783.0
9830,comment,1,hz1yd4a,,"Man this is really really strange.  As I am doing ""pihole -t"" and looking for the georgetown. edu query I can not even see it in the pihole logs, like the client is not even hitting the pihole dns?

In my explorer browser I get this:

Make sure the web address https://cew.georgetown.edu is correct

Error Code: INET\_E\_RESOURCE\_NOT\_FOUND",pihole,1646232312.0
9831,comment,1,hz1mwqt,,I believe I am using the default lists. Is there a way to reset and re-upload the defaults list only?,pihole,1646226855.0
9832,comment,2,hz1nr8i,,[Restoring default Pi-hole adlist(s)](https://discourse.pi-hole.net/t/restoring-default-pi-hole-adlist-s/32323),pihole,1646227287.0
9833,post,1,t4la6l,Non-zeroed A-Record Response to VPN Adapter,"  I've recently set up pi-hole and all seems to be working great, except for devices that connect to a VPN (not integrated with Pi-hole).  At first I believed the name resolution to be coming from the VPN provider.  However, I mucked about with the OpenVPN configs on my Windows box to have it use the local DNS settings, rather than those pushed by the provider, to no avail.  I went so far as to capture DNS packets in Wireshark, and verified the pi-hole is what's responding with the valid IP.

  As you can see from below, DNS requests to the cardiwersg.com domain from the local network (192.168.224.0/24) are answered by the pi-hole (192.168.224.254) with 0.0.0.0 as expected.  However, when the same box is connected to VPN (thus using the Windows TAP adapter and a DHCP address, usually in the 10.151.0.0/22 range), pi-hole responds with a valid IP.  

    202	2022-03-01 15:50:05.119289	192.168.224.254	192.168.224.193	DNS	90	Standard query response 0x709e A cardiwersg.com A 0.0.0.0
    438	2022-03-01 15:50:35.389003	192.168.224.254	10.151.2.138	DNS	106	Standard query response 0xf4e6 A cardiwersg.com A 162.252.21.21 A 162.252.21.20    

  Interestingly, the query only shows in the pi-hole query log for the local adapter.  Pi-hole's only upstream DNS server is the BIND  instance running on the same box on UDP/5053, so it's obviously forwarding the DNS lookup to BIND.  I've got pi-hole configured to respond only on the only active interface, rather than the default local queuries only, so I'd expect the same behavior in both instances.

  Debug token: https://tricorder.pi-hole.net/NA9PYikY/",pihole,1646176494.0
9834,comment,1,hyz64la,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1646176567.0
9835,comment,1,hyz7jvg,,"The logs expose my public domain name, so I've DM'd you the log",pihole,1646177164.0
9836,comment,1,hyz86ab,,The only people who can access your log (eight of us on this planet) are all on the Pi-hole team. You can safely post the token publicly.,pihole,1646177429.0
9837,comment,1,hyz8smb,,added,pihole,1646177695.0
9838,comment,1,hyzfwbm,,"Humm, so you are implying that there are someone not on this planet can access the logs...  /s",pihole,1646180818.0
9839,comment,1,hyzl7i4,,Just the five people in our Neptune office.,pihole,1646183170.0
9840,comment,1,hz017tn,,[O rly?](https://i.kym-cdn.com/entries/icons/facebook/000/000/015/oreally.jpg),pihole,1646190224.0
9841,post,2,t4hh3z,Get rid of annoying pop-ups,"I have pi-hole together with piVpn installed on a raspberry pi3b+. In general i use Safari for macOS for browsing.

Everything works fine, i dont see ads but one thing that annoys me a lot is when i click on a button from a website sometimes opens a new tab with an ad. Now, thanks to pihole the ad is not displayed but the tab is still being opened with an error message like in the screenshot. How can i stop these new tabs from being opened? 

&#x200B;

&#x200B;

https://preview.redd.it/t7jwpiol0uk81.png?width=1390&format=png&auto=webp&s=f4250be33bd36bb538e04fa04289d774db678714",pihole,1646166501.0
9842,comment,6,hyyxc9l,,">How can i stop these new tabs from being opened?

Configure your browser to not allow pop-ups.",pihole,1646173026.0
9843,comment,1,hyyhgqf,,"Does safari not have a pop-up blocker?  I refuse to use safari, I use Firefox mostly.  I also run plugins to prevent trash, plug ins like ""no script"", privacy badger, WebRTC control, etc.  My problem is usually have to figure out how to let a pop-up I want through.",pihole,1646166936.0
9844,comment,1,hyyjlvz,,i already have installed adguard and adblock+ in Safari.,pihole,1646167752.0
9845,comment,2,hz0l8hw,,I think you can try ublock orgin becouse Adblock plus giving ads and adguard is not open source.,pihole,1646200181.0
9846,comment,1,hyyqlx7,,"Seems excessive to run three, but I have heard that some of the browser blocker get ads that pihole misses, like ads that come directly from YouTube.com.  mostly I was suggesting Firefox because I don't have pop-up issues, and I don't trust safari any more than Google chrome.",pihole,1646170417.0
9847,post,0,t4gtay,Reverse lookups when running multiple Pi-holes as DNS and DHCP,"Hi all,

I've recently added some resiliency to my home network by adding a second Pi-hole. They're both configured identically except for a split DHCP scope to avoid duplicate address allocations.

It all works well but I have one (pedantic) issue. When a client gets an IP from DHCP on one Pi (Pi 1) then does a DNS lookup on the other Pi (Pi 2) the logs on Pi 2 don't have a reverse lookup for the name since only Pi1 knows it. I was looking at Conditional Forwarding but if I set both Pis up to forward to each other for the subnet won't there be a risk of a loop if a lookup isn't resolved by either?

What's the best solution here? My other thought was adjusting my DHCP scope split to alight with a /25 mask, would Conditional Forwarding behave correctly then?

EDIT: I think I've got this sorted. Basically I moved my IP ranges around.  I run my network in [192.168.1.0/24](https://192.168.1.0/24). I've now split it up as:

*  [192.168.1.0/26](https://192.168.1.0/26) End user devices with static IPs
* [192.168.1.64/26](https://192.168.1.64/26) DHCP range on Pi-hole 1
* [192.168.1.128/26](https://192.168.1.128/26) DHCP range on Pi-hole 2
* 192.168.1.196.0/26 Network devices with static IPs

This means conditional forwarding on Pi1 can forward the subnet [192.168.1.128/26](https://192.168.1.128/26) and Pi2 can forward [192.168.1.64/26](https://192.168.1.64/26). The only other thing to note is DON'T enter the local domain otherwise your local domain lookups can forward back and forward in a loop.

Now it's just IPv6 that's messy but I don't think I can do much about that.  
",pihole,1646164830.0
9848,comment,1,hyymyr0,,Just use a single pihole for DHCP would be my suggestion. Do you really have need of a redundant DNS/DHCP on your network?,pihole,1646169030.0
9849,comment,1,hyzu8xl,,What problem are you trying to solve by having two?,pihole,1646187235.0
9850,comment,2,hz1281q,,It gives you additional redundancy. If you run PiHole on a host besides other services you might have to restart the host from time to time or break things. Therefore having a second instance that can take over directly ensures that network is always up if one PiHole becomes unavailable.,pihole,1646212275.0
9851,post,0,t4gogg,Multiple issues with sites unavailable,"Is anyone else having trouble with normal cloud services?

* I work at a small, private K12 with Pi-Hole running DHCP/DNS with Unbound
* Our Chromebooks will only allow logins from cached users.
* I'm getting connection errors on run of the mill sites like [gstatic.com](https://gstatic.com) and [amazon.com](https://amazon.com)
* Chromebooks won't connect to our standardized testing host (Cambium).
* Other large, typically stable SaaS are flaky and intermittent.
* It worked fine on Friday and it turned to mush on Monday.

I ran \`pihole restart\` to clear cache, reload lists, and restart the DNS resolver: no change. 

After school ends today, I'm going to try a backup Pi with Pi-Hole.",pihole,1646164494.0
9852,comment,2,hyyxg6e,,"Please generate a debug log, upload the log when prompted and post the token URL here.",pihole,1646173068.0
9853,comment,2,hz1q8mv,,"Thanks for the response. It was resolved when I came in this morning with no apparent explanation. 

My testing indicated that it was outside our control, but I never found the smoking gun.",pihole,1646228557.0
9854,post,1,t4fb1u,Odd A records being appended with my domain then forwarded to my router.,"I've noticed some odd A records being appended with my domain then forwarded to my router for resolution.  Only local domain look ups should go to my router and I suppose since these end in my ""domain.com"", pihole is sending them that way.  Everything else should be resolved by unbound.

Appears to be happening with both my Google Pixel phones but also my Synology NAS.  I have recently been setting up unbound so perhaps its just some residue from the setup before I had it fully working.  When looking up those FQDNs manually, it returns my WAN IP address.

It seems odd to me. Any thoughts?  Is this normal?  

[Screenshot](https://imgur.com/V7AtQoR)",pihole,1646160934.0
9855,post,1,t4entx,Raiplay + Fire stick,"Salve,  
volevo sapere come configurare le whitelist per poter vedere raiplay sulla firestick (l'unico modoin cui riesco  è disattivare pihole:\\)  
Grazie",pihole,1646159296.0
9856,comment,1,hyxznwj,,"Ciao, dovresti specificare la tua configurazione di pihole, è standard o hai caricato delle liste di domini custom da bloccare?
L'installazione standard non blocca RaiPlay.",pihole,1646160087.0
9857,comment,1,hz0nvau,,I dont understand anything you said.,pihole,1646201818.0
9858,comment,1,hz0zm2c,,"ho pihole con qualche adlist caricata (firebog, StevenBlack etc)",pihole,1646210186.0
9859,comment,2,hz13brd,,I will try to help him in PM.,pihole,1646213185.0
9860,comment,1,hz0zmy5,,sorry but i've a very bad English,pihole,1646210205.0
9861,comment,1,hz132e6,,"Controlla i log e vedi cosa blocca RaiPlay e metti in whitelist i domini che bloccano la visione, una delle liste  caricate blocca la visione.",pihole,1646212970.0
9862,comment,1,hz12viu,,"It's Italian, does't exist only English in the world.",pihole,1646212817.0
9863,comment,1,hz1bmjp,,"`2022-03-02 11:55:01 	A (IPv4)`	[`www.raiplay.it`](https://www.raiplay.it)	`[indirizzo IP]	OK (forwarded to 1.1.1.1#53)`	  
`2022-03-02 11:43:24 	A (IPv4)	www.raiplay.it	[indirizzo IP]	OK (forwarded to 1.1.1.1#53)`	  
`2022-03-02 11:10:01 	A (IPv4)	www.raiplay.it	[indirizzo IP]	OK (forwarded to 1.0.0.1#53)`	  
`2022-03-02 10:25:05 	A (IPv4)	www.raiplay.it	[indirizzo IP]	OK (forwarded to 1.1.1.1#53)`	  
`2022-03-02 09:58:21 	A (IPv4)	www.raiplay.it	[indirizzo IP]	OK (forwarded to 1.1.1.1#53)`	  
`2022-03-02 07:45:10 	AAAA (IPv6)	www.raiplay.it	[indirizzo IP]	OK (forwarded to 1.0.0.1#53)`",pihole,1646219860.0
9864,comment,1,hz1jr2q,,"Deve poter accedere anche a videowall.rai.it, mediapolisgs.rai.it.
Probabilmente bloccati dalle liste custom. Cerca nel log tutto quello che ha dominio rai.it e metti in whitelist tutti quelli bloccati.",pihole,1646225150.0
9865,comment,1,hz24mul,,">mediapolisgs.rai.it

erano già in whitelist, faccio una prova togliendo anche [firetvcaptiveportal.com](https://firetvcaptiveportal.com) dalla blacklist?",pihole,1646234923.0
9866,comment,1,hz42c9x,,"Prova a toglierlo dalla blacklist, se non dovesse funzionare io abiliterei solo le liste standard di installazione, poi successivamente abilitare una alla volta le liste custom per capire quale contiene il blocco della FireTV",pihole,1646262444.0
9867,comment,1,hz63tdb,,"anche svuotando le adlist, il problema rimane.  
lo aggirerò disattivando pihole.  


Grazie per l'aiuto",pihole,1646305581.0
9868,post,2,t4dflj,Domain with SSL on Web UI,"As the title implies I am looking for a way to add a domain and ssl to my Pi-hole web ui interface, any help?

Thank you in advance!",pihole,1646156187.0
9869,comment,2,hyzh80k,,Yea that is what I did but to get it to work in Nginx I had to do *.example.com/admin. That was the only way I could get into the web UI.,pihole,1646181400.0
9870,comment,1,hyxv59a,,https://redmine.lighttpd.net/projects/1/wiki/docs_ssl,pihole,1646158365.0
9871,comment,1,hyy18ua,,"I try to do it adding adding the .pem and .key I got from Cloudflare Client SSL and the webserver doesn't start, failing when trying.

&#x200B;

Edit: I am thinking, could I possibly put NGINX reverse proxy in front of it on the same server and add the SSL through let's encrypt that way?",pihole,1646160689.0
9872,post,18,t4bv39,Disney plus trackers keep running in background (fire stick),I recently set up fire stick on pihole . Even when turning the fire stick off after using the Disney plus app I’m getting 40-60 blocked dns queries from a Disney tracker every 10 minutes. Does anyone else see this? It’s crazy. I have to go into the settings to force quit the app to get it to stop,pihole,1646152143.0
9873,comment,16,hyxi9pu,,"Firesticks never turn off unless you disconnect the power, apps run in the background unless you kill them.  It's the same on almost every streaming device.",pihole,1646153404.0
9874,comment,7,hyxtaaz,,"It’s also worth nothing that often times when you block trackers like this, you will see them begin to repeat connection attempts far more frequently. 

Roku will ping like once an hour if I allow it to connect, but if I block it, it retries like every 30 seconds. 

It doesn’t know that you’re blocking it, only that there is an issue and it’s attempting to establish a successful connection again and it will rapidly try until it does.",pihole,1646157641.0
9875,comment,3,hyxkpi5,,"It's normal, Netflix does the same on FireTV system.",pihole,1646154345.0
9876,comment,2,hz02x08,,"You may want to send a fake reply to it and might stop it from spamming request:

1. In pihole web interface > local DNS > DNS records, set a entry for the tracker. 
2. You can try to set the tracker domain to 127.0.0.1
3. In group management, create a group and a whitelist entry to allow the trackers only for that device.
4. Check if the behavior stops after a minute or so
5. If not, add another entry but use the chatty client IP, then delete the 127.0.0.1 one.
6. Repeat the above steps, but use these instead, in the following order:

* 127.0.0.1
* (the client's IP)
* (the pihole IP)
* (any one IP that belongs to your network, try once is ok)
* 0.0.0.0",pihole,1646190953.0
9877,comment,1,hyy5ose,,"Yeah a lot of stuff is constantly doing this. If you have say 30 devices on your network, you can watch the log on pi-hole and it's amazing the tuff that flies by.",pihole,1646162404.0
9878,comment,1,hyyb5j1,,"Sufficiently powered Firesticks don't turn off-off. They sleep, apparently lightly. I assume that this is the case with all of the USB-powered streamers.  Remove the power source to stop the chatter.",pihole,1646164508.0
9879,comment,1,hz17hx0,,The same with a MI Box.,pihole,1646216564.0
9880,comment,0,hyyhifx,,"Unfortunately, the ""phoning home"" that these services do also includes your updates. So remember, if you stop them from calling home, you will eventually have problems with your apps.",pihole,1646166954.0
9881,comment,2,hyxie5z,,I thought it was kinda scary I set up pihole just recently. Thanks for the info!,pihole,1646153452.0
9882,comment,2,hyz1wzm,,">	Roku will ping like once an hour

It's not pinging, it is requesting domain name resolution. These are separate processes.",pihole,1646174841.0
9883,comment,0,hyxtgam,,Do you find this effects performance at all with all the pings. I just got my hands on a raspberry pi 3b which I’m running pihole on in docker,pihole,1646157706.0
9884,comment,1,hz0atqh,,"I’m sorry I’m not fully understanding. Under DNS records do I put 127.0.0.1 in the domain section or the ip section. And what am I whitelisting, the culprit?",pihole,1646194592.0
9885,comment,1,hyypxs5,,How do you prevent this,pihole,1646170160.0
9886,comment,6,hyxzinp,,"Running a PiHole and looking at the logs is very eye-opening.  99% of the people have absolutely no idea how often their connected devices are ""phoning home"".  Roku and Samsung are high on the list of very chatty devices in my home.  What's amazing to me is how Apple keeps touting the privacy aspects of their devices, but the second you load a third party app on them the floodgates open and it's an endless stream of tracking and usage metrics flowing outward from that app.",pihole,1646160032.0
9887,comment,4,hyz27si,,I was using ping as a loose term here. Not a true ping command. I should have clarified and been more specific.,pihole,1646174963.0
9888,comment,2,hyxtony,,Not at all. DNS on a home network level is such a low requirement for resources. Your rPi is more than capable of handling that.,pihole,1646157797.0
9889,comment,2,hyxttch,,No negative performance,pihole,1646157848.0
9890,comment,2,hz0elbl,,"Yes. Whitelist the culprit only for that device. Put the 127 IP in the IP section. 

For example, the client is requesting example.com every 2 seconds.

Create a local DNS for example.com, put example.com in domain section, 127.0.0.1 in IP section.

Create a group, name it ""firestick"" (for example), and create a whitelist under group management > domains for example.com and assign it to group firestick only.

This would make pihole reply 127.0.0.1 to the firestick if firestick request it, and 0.0.0.0 if you blocked the domain for other clients, assuming you havent changed the blocking mode.

## The order is important. Create the local DNS entry first then do the whitelist.",pihole,1646196481.0
9891,comment,5,hyy84s8,,">Running a PiHole and looking at the logs is very eye-opening. 99% of the people have absolutely no idea how often their connected devices are ""phoning home"".

It seems to me that 99% of pi-hole log file watchers have no idea how DNS and pi-hole works.

A client needs to connect to a DNS Server to get the ip address for a url it wants to contact. If the client get's that address, it will be used for any further contact to that url. Each DNS entry has a TTL (time to live), which is about 12h typically. That means whenever a device is phoning home, it will need to lookup the ip address only once every 12 hours. If it cannot get the address for the url it tries to contact, it will try again. The time between those retries can differ depending on the implementation the device is using. And it can be as short as seconds between retries.

What does that mean for your pi hole logs? Whenever you see masses of entries  of phoning home, you only see those retries. 10 thousands of log entries could in effect mean one simple update check without pi hole.

That does not mean there is no phoning home, but it is most of the time not as mind blowing as the number of log entries make it seem.",pihole,1646163346.0
9892,comment,2,hyz1aiw,,"That said, if you're getting hammered by several poorly configured devices, you can just up your local TTL a bit to get them to calm down - easy fix and helps your logs/statistics to be more meaningful/informative.",pihole,1646174588.0
9893,comment,3,hyy9i8c,,"I understand that completely, and that what I'm seeing is the ""retries"" and that some software is written poorly so that it just spams retries if it's having trouble.  

But what I'm talking about being eye-opening is the absolute breadth of tracking and metrics sites that a seemingly benign app or device feels the need to (try to) communicate with.",pihole,1646163877.0
9894,comment,2,hz1mjfc,,">	Each DNS entry has a TTL (time to live), which is about 12h typically.

The vast majority are less than 6 minutes.  A 12 hour TTL would be appropriate for a nameserver, but not an individual domain.",pihole,1646226661.0
9895,comment,1,hz1fy3z,,"Them i'm sorry I misunderstood you. I am always somewhat triggered when i here somebody talking about the retry numbers in the log file.

I shouldn't have made assumptions.",pihole,1646222860.0
9896,comment,1,hz1o0ro,,"I looked that up before answering because I didn't know the amount. I found this answer on a config guide of a (german) hosting provider:

&#x200B;

>TTL wird in Sekunden angegeben. Der typische Standardwert ist liegt normalerweise bei zwölf1212 Stunden (43.200 Sekunden) oder bei 24 Stunden (86.400 Sekunden)

[https://www.ionos.de/digitalguide/server/konfiguration/dns-ttl-verstehen-und-anwenden/](https://www.ionos.de/digitalguide/server/konfiguration/dns-ttl-verstehen-und-anwenden/)

&#x200B;

Edit: Including that typo quoted",pihole,1646227422.0
9897,comment,2,hz2417i,,"That guide tells how to change the DNS TTL for a domain at the nameserver level.  You will be very hard pressed to find any public domain with a TTL as long as 12 hours.  Some examples of common domains on the internet, with their published TTL provided by the nameservers (in seconds).  TTL data as returned by unbound in recursive mode.

&#x200B;

|Domain|TTL|
|:-|:-|
|cnn.com|60|
|bild.de|600|
|pi-hole.net|300|
|reddit.com|300|
|bbc.com|300|
|facebook.com|300|
|irs.gov|600|",pihole,1646234681.0
9898,post,49,t4bk8z,Pihole in combination with Google Wifi cannot provide IPs to wired devices,"Hi all

I am posting here in the hope that I might get some advice which unfortunately I haven't got from my recent techsupport post. 

My home Pihole is configured as per option 2 on [https://www.mbreviews.com/pi-hole-google-wifi-raspberry-pi/](https://www.mbreviews.com/pi-hole-google-wifi-raspberry-pi/) acting as DHCP for the overall network and connecting to the network via wifi. Pihole seems to give an IP fine to wireless devices but seems unable to do it for devices that are hard-wired to the Google Wifi unit. 

The pihole seems to have recognized my LAN MAC address and even assigned it an IP address, but this does not seem to be being picked up by the Win 11 PC. I have even tried fixing the IP currently assigned to the PC on the pihole and manually assigning the same IP on Win 11, but this seems to have had no effect. I have also disabled ipv6 in the LAN adapter settings as I know this caused trouble in my previous techsupport post.

Diagnosing the connection within win 11 gives the result: """"Ethernet"" doesn't have a valid IP configuration"". I have also tried other devices which have had the same result.

Pihole is running the latest evergreen versions

Could anyone suggest how I could diagnose and fix this? 

Thanks in advance for any advice",pihole,1646151364.0
9899,comment,7,hyy0q9t,,"I have the same setup with the Google Nest Wifi, except my PiHole Pi is plugged in via ethernet. 

I have a reservation for my Pi on the Google Home app, and a DHCP pool of one IP, the same as the reservation. All of my wired and wireless devices get IPs from PiHole. I don't have many, but PS4, Kodi, Hubitat and a Dell computer, all connected via a switch. 

Granted, I don't have Win11, but I doubt that's the issue. Do you have a non Win11 pc to try on? 

Also, is the DHCP reservation on Google in the same subnet as the DHCP pool on the PiHole?",pihole,1646160493.0
9900,comment,2,hyy2vsv,,"We need more info.

Can you show us:

Print screen of the pi-hole DHCP configuration page

Print screen of the google home LAN Settings page

Print screen of the google home DNS Settings page

Print screen of the google home DHCP IP reservations page

Print screen of your device (Win11) ipconfig",pihole,1646161318.0
9901,comment,1,hyy6a0l,,Change the DNS on the individual devices and it should show them,pihole,1646162629.0
9902,comment,1,hyy91y5,,[deleted],pihole,1646163701.0
9903,comment,3,hyy9j7a,,"I have tried the same PC on win 10 and got the same result (win11 install was me trying to eliminate the possibility that I had some dodgy configuration on the win 10 install). Also tried a win 10 laptop and also got the same too.

no overlap I don't think. Google wifi pool is one IP, which is statically assigned to the pihole. Pihole's pool ends before the google wifi pool starts. I have just read a quick article on subnets and I think the answer to your question if the reserved DCHP on google is the same subnet as the pool on the pihole is a yes (pihole is 192-168.86.250 , piholes dhcp pool is [192.168.86.20](https://192.168.86.20) to [192.168.86.249](https://192.168.86.249))  
More screenshots at [https://imgur.com/a/H3ZL1VI](https://imgur.com/a/H3ZL1VI) which might explain better than me!",pihole,1646163887.0
9904,comment,1,hyy8rd7,,"[https://imgur.com/a/H3ZL1VI](https://imgur.com/a/H3ZL1VI) should have most of those, ip config 

`""ipconfig /all"" result taken from win 10 (have the pc setup to dualboot:`  
  
  
  
`Windows IP Configuration`  
  
  
  
`Host Name . . . . . . . . . . . . : DESKTOP-SNI76J0`  
  
`Primary Dns Suffix . . . . . . . :`  
  
`Node Type . . . . . . . . . . . . : Hybrid`  
  
`IP Routing Enabled. . . . . . . . : No`  
  
`WINS Proxy Enabled. . . . . . . . : No`  
  
`DNS Suffix Search List. . . . . . : lan`  
  
  
  
`Ethernet adapter Ethernet:`  
  
  
  
`Connection-specific DNS Suffix . :`  
  
`Description . . . . . . . . . . . : Realtek Gaming 2.5GbE Family Controller`  
  
`Physical Address. . . . . . . . . : 18-C0-4D-A8-16-A9`  
  
`DHCP Enabled. . . . . . . . . . . : Yes`  
  
`Autoconfiguration Enabled . . . . : Yes`  
  
`Autoconfiguration IPv4 Address. . : 169.254.130.244(Preferred)`  
  
`Subnet Mask . . . . . . . . . . . : 255.255.0.0`  
  
`Default Gateway . . . . . . . . . :`  
  
`NetBIOS over Tcpip. . . . . . . . : Enabled`  
  
  
  
`Wireless LAN adapter Local Area Connection* 11:`  
  
  
  
`Media State . . . . . . . . . . . : Media disconnected`  
  
`Connection-specific DNS Suffix . :`  
  
`Description . . . . . . . . . . . : Microsoft Wi-Fi Direct Virtual Adapter #3`  
  
`Physical Address. . . . . . . . . : C8-3A-35-DF-6C-26`  
  
`DHCP Enabled. . . . . . . . . . . : Yes`  
  
`Autoconfiguration Enabled . . . . : Yes`  
  
  
  
`Wireless LAN adapter Local Area Connection* 12:`  
  
  
  
`Media State . . . . . . . . . . . : Media disconnected`  
  
`Connection-specific DNS Suffix . :`  
  
`Description . . . . . . . . . . . : Microsoft Wi-Fi Direct Virtual Adapter #4`  
  
`Physical Address. . . . . . . . . : C8-3A-35-DF-6C-27`  
  
`DHCP Enabled. . . . . . . . . . . : No`  
  
`Autoconfiguration Enabled . . . . : Yes`  
  
  
  
`Wireless LAN adapter WiFi:`  
  
  
  
`Connection-specific DNS Suffix . : lan`  
  
`Description . . . . . . . . . . . : 802.11n USB Wireless LAN Card`  
  
`Physical Address. . . . . . . . . : C8-3A-35-DF-6C-24`  
  
`DHCP Enabled. . . . . . . . . . . : Yes`  
  
`Autoconfiguration Enabled . . . . : Yes`  
  
`IPv4 Address. . . . . . . . . . . : 192.168.86.110(Preferred)`  
  
`Subnet Mask . . . . . . . . . . . : 255.255.255.0`  
  
`Lease Obtained. . . . . . . . . . : 24 February 2022 11:12:00`  
  
`Lease Expires . . . . . . . . . . : 27 March 2022 11:11:59`  
  
`Default Gateway . . . . . . . . . : 192.168.86.1`  
  
`DHCP Server . . . . . . . . . . . : 192.168.86.250`  
  
`DNS Servers . . . . . . . . . . . : 192.168.86.250`  
  
`NetBIOS over Tcpip. . . . . . . . : Enabled`",pihole,1646163588.0
9905,comment,1,hyyb2br,,"No switch in my setup right now, I had one (internet->GoogleWifi->Switch->PC) but removed it to try and isolate the issue.",pihole,1646164473.0
9906,comment,8,hyyv8t6,,"So your images looks pretty much the same as mine, except my pi reservation is set as [192.168.10.10](https://192.168.10.10), my Nest Router is [192.168.10.1](https://192.168.10.1) and my PiHole DHCP Pool is set as [192.168.10.50](https://192.168.10.50) \- [192.168.10.250](https://192.168.10.250). So the only difference I see is different IPs and that my Pi is wired. Can you plug the Pi into the switch and try it?",pihole,1646172204.0
9907,comment,1,hyybexx,,"what is your network physical configuration?

internet (ISP router) -> google wifi -> computer?

do you have a switch? where in this configuration?",pihole,1646164608.0
9908,comment,4,hyyxxbk,,Thats worked! You have no idea how long I have been trying to get this sorted and had no idea the answer could be this simple!,pihole,1646173257.0
9909,comment,1,hyybo3s,,"internet (ISP router) -> google wifi -> computer is exactly right.   
I did have a Gigabit 16 port switch in between the google wifi and the computer but removed it to try and isolate the problem",pihole,1646164707.0
9910,comment,0,hyybz23,,">169.254.130.244

Have you checked for a static ip on the computer?",pihole,1646164827.0
9911,comment,1,hyygt7m,,I hadn't had one set but I had even tried setting a static IP on both the Pihole and the windows machine but still no luck. I can take some more screenshots shortly to show what the current config looks like.,pihole,1646166689.0
9912,comment,1,hyyw355,,"When left to assign an IP manually, it had set a very different IP address not within the pihole range.  
I have now manually set the IP address it should use (by going into the network adapter, properties, ipv4 properties, then setting like [this](https://imgur.com/a6NNZfj). I get this [warning](https://imgur.com/ScuWJQA), but ipv4 connectivitiy still shows as ""No Internet Access"". Details look like [this](https://imgur.com/WAwiFNn)  
Ip address I set it is the same static ip set in the Pihole's DCHP config",pihole,1646172536.0
9913,comment,1,hyyxpbp,,"Don't assign a static IP on the computer. 
You need to understand what's wrong with your network.

What is your isp router range?",pihole,1646173168.0
9914,comment,1,hyz17ev,,"by ISP router range, you mean the device before the google wifi which provides the internet connection to it? if so, it is set to modem mode, which means I dont think it even has a range, just passes the connection via LAN cable to the Google Wifi unit, which does the whole networking piece. 

Following the advice of another commenter, inserting my switch in between the google wifi and the computer, and using the extra ports gained I hardwired the pihole,  which seems to have worked, even when I switch back to automatically assigning an IP and DNS. 

Still not sure I understand what the issue was though, but nontheless pleased to get it sorted. Thank you for your help!",pihole,1646174552.0
9915,comment,2,hyz98oc,,"Yes, that device.

I was trying to understand who was giving your PC that IP address.
And seeing that your PC IP address was in a different subnet, it means it was another DHCP server. 

My guess is that your isp router was in fact that DHCP server, and you had your computer connected to you isp router (different subnet).

It's hard to explain in writing, but I'm glad you sorted it out.",pihole,1646177887.0
9916,comment,2,hyzkjaf,,"Why are your subnets so different? One post says your Pihole is 192.168.10.10 and router is 192.168.10.1 but ipconfig output shows 192.168.86.X/16, which has a 255.255.0.0 subnet mask, using 192.168.86.250 for DNS. Then in your static IP config you set your subnet mask to 255.255.255.0 which is a /24 subnet.

If your router is 192.168.10.1 then windows can’t see the router as its subnet is masked.",pihole,1646182871.0
9917,post,10,t4900c,Upgrade pi zero w to pi zero 2 w,"I am getting a pi zero 2 w and wanted to upgrade my pihole with it.  
Can i just pop in the existing sd card into the new pi zero 2 and boot up and that's it ? Or do i have to start fresh ? 

Thanks",pihole,1646144509.0
9918,comment,23,hywyli1,,"I would start fresh.  Export your existing Pi-hole settings with teleporter and after you have the new install complete, import the old settings.",pihole,1646145261.0
9919,comment,6,hywxsrb,,"You can but I wouldn’t. The chip architecture should allow you to rebuild the system better. However, the difference is minimal and really if what you have now works I wouldn’t change it.",pihole,1646144899.0
9920,comment,4,hyx44fb,,"I believe it won’t boot up, cause I already tried it. The chip architecture in the new zero 2 w is the same as the raspberry Pi 3b (64bit) while the original zero W is 32bit for one. But if you insist, in the /boot folder, copy and rename the bcm2710-rpi-3-b.dtb to bcm2710-rpi-zero-2.dtb, and you should be good to go. But starting fresh is always the best. Good luck.",pihole,1646147667.0
9921,comment,1,hyxi3lp,,Star a fresh installation. Choose 64 bit architecture.,pihole,1646153341.0
9922,comment,1,hyyjpov,,"I usually remove the bloat and Bluetooth 
That is extra step",pihole,1646167793.0
9923,comment,1,hyz1prd,,I would just start fresh. Just keep a copy of your wh it elists and black lists obviously..,pihole,1646174760.0
9924,comment,0,hz0xu3m,,I'd use the 2W for something else. It's completely overkill for Pihole.,pihole,1646208798.0
9925,post,19,t47s5a,Upgrade (kinda) broke Pihole,"Hello everyone,

the other day I upgraded my DietPi 8.1.2 from Raspberry Pi 2 to 3, just by inserting  the old SD card into the new Pi. It worked like a charm, but Pihole kinda broke. I don't know actually what happened but ads are now showing on mobile and desktop pc.

I tried to reboot, update gravity, flush DNS, restart DNS service, repair (through pihole -r), all with no luck.

Here I uploaded the debug log, hope it helps: [https://tricorder.pi-hole.net/p3zmH0F6/](https://tricorder.pi-hole.net/p3zmH0F6/)

What can I try next? I'd rather not reinstall everything from scratch. Thanks in advance.",pihole,1646140866.0
9926,comment,4,hywto7v,,"From a client where you are seeing ads (and from the command prompt or terminal in that client and not via ssh to the Pi), what is the output of

`nslookup pi.hole`

`nslookup flurry.com 192.168.1.100`",pihole,1646142960.0
9927,comment,1,i0cozwh,,"Update: I called ISP tech support, they told me they enabled IPv6 for everybody so there's that. Pihole was not the culprit.

Still, I cannot disable IPv6. I tried to enable it also on PiHole, with no luck.

I set static IPv6 on my PC so it now works, but on Android I cannot assign a static IPv6. How can I set PiHole to use DHCPv6? Is it even possible?

I know this is a dirty workaround, but it's the best I can do at the moment.",pihole,1647077818.0
9928,comment,1,hywz1pu,,"Thanks for the quick reply.

nslookup pi.hole

`Server:  vodafone.station`  
`Address:  fe80::1614:59ff:fe03:d40`  
  
`*** vodafone.station non è in grado di trovare pi.hole: Non-existent domain`

It says: vodafone.station is not able to find pi.hole: Non-existent domain

nslookup [flurry.com](https://flurry.com) 192.168.1.100

`nslookup flurry.com 192.168.1.100`  
`Server:  pi.hole`  
`Address:  192.168.1.100`  
  
`Nome:    flurry.com`  
`Addresses:  ::`  
`0.0.0.0`",pihole,1646145462.0
9929,comment,3,hyx39a9,,The device is not using Pi-hole for DNS.,pihole,1646147300.0
9930,comment,2,hyx4enz,,"I thought that might be the problem, so I checked:

\- pihole says both desktop and mobile use pihole under tools/network

\- Both desktop and mobile say [192.168.1.100](https://192.168.1.100) under dns

\- pihole is dhcp server, those two devices have static dhcp leases (and IPs check out) so I know pihole assigned them the ""correct"" settings",pihole,1646147788.0
9931,comment,5,hyx5wlo,,">fe80::1614:59ff:fe03:d40

This is the DNS server being used, and it isn't Pi-hole.

    [✗] No IPv6 address(es) found on the eth0 interface.

Note that when you specifically direct the DNS query to Pi-hole, Pi-hole responds.  This indicates that Pi-hole is working properly, but the client is sending DNS queries elsewhere.  Also note that this is an IPv6 address, not an IPv4.  Many clients preferentially use an IPv6 address over an IPv4.",pihole,1646148419.0
9932,comment,1,hyx8kuj,,"Huh, I wonder how it got there, that's the ipv6 address of the vodafone station.

I tried to remove that by manually setting the network parameters but it doesn't seem to work.

Is it recommended to enable ipv6 on the pihole?",pihole,1646149523.0
9933,comment,1,hyzemma,,Is that a link local IPv6? My ssh broke because of pihole returned a IPv6 link local address. I have to manually flush the cache or use IPv4 instead of pi.hole,pihole,1646180258.0
9934,comment,2,hyxlm5p,,"Are you using ipv6 on your network? If so, then I suspect you want dns but I don’t know what you’re doing.",pihole,1646154696.0
9935,comment,1,hyxrqzf,,"I don't. And even if I did, funny part is: there is no setting to enable/disable IPv6 on the vodafone station.

I'm trying to search for a solution but I can't seem to find one, I'll have to dig deeper.",pihole,1646157052.0
9936,comment,2,hyxs953,,The client device has ipv6 enabled because it’s using ipv6 dns.,pihole,1646157246.0
9937,comment,1,hyxwguy,,"Yes, but who told them to use ipv6? I certainly didn't. Pihole almost certainly didn't. Vodafone station maybe? Probably? But why? I can't figure that out.",pihole,1646158870.0
9938,comment,2,hyxwnhx,,"What device above are you doing the dns lookups on? On that device, disable ipv6.",pihole,1646158941.0
9939,comment,1,hyxzc3q,,"Huh (part 2): now desktop works fine:

`nslookup pi.hole`  
`Server:  pi.hole`  
`Address:  192.168.1.100`  
  
`Nome:    pi.hole`  
`Address:`  [`192.168.1.100`](https://192.168.1.100)

Mobile does not. Maybe it's a problem of dns caching of something like that? Obviously I don't have IPv6 enabled on my smartphone (OnePlus Nord).",pihole,1646159963.0
9940,comment,2,hyxzxt1,,"Whatcha mean? Phones support ipv6. 

Who is handling dhcp? Go there and make sure you aren’t serving up dhcpv6 IPs too.",pihole,1646160192.0
9941,comment,1,hyy1oby,,"Mh, it might be actually.

Pihole is dhcp server, and it does not serve v6. But my phone shows also an ipv6 beside its ipv4, so it might be it.

I might wait for the lease to expire, or try and flush dns on it somehow.",pihole,1646160854.0
9942,comment,2,hyy1vxo,,Someone is handing out ipv6 IPs… got another device on the network like the default gateway or cable modem doing it too?,pihole,1646160935.0
9943,comment,1,hyy37vp,,"Maybe it *was* handing out ipv6s... while I upgraded pihole, the vodafone station stayed on, but it's actually weird. You can't disable its dhcp server altogether, so the trick is to hand out only a single ip to the pihole (192.168.1.100), and let pihole manage dhcp requests.

Since pihole was out for a bit, maybe requests kind of timed out and the router started to assign ipv6? It would be plain stupid though, since you can't enable nor disable ipv6 in the router settings...",pihole,1646161447.0
9944,comment,2,hyy6odg,,Disable dhcp entirely on whatever the Vodafone is and give the Pi-hole a static IP. You don’t need dhcp for a single IP and it’s causing other issues.,pihole,1646162783.0
9945,comment,1,hyy775v,,"You can't disable it entirely, router doesn't allow it. I already looked into it, banged my head on it, you just can't. This is the only workaround.",pihole,1646162986.0
9946,comment,2,hyy7x8z,,"Here is what I’d do then.  

-	Give Pi-hole a static IP
-	disable dhcp on Pi-hole
-	allow other dhcp to give out all addresses
-	update dhcp to give Pi-hole ip out for dns 

The problem you have is that you have multiple dhcp servers basically fighting each other.

I use active directory in my network so dhcp is handled by my domain controllers.

Also, you restricted dhcp on the vfone, but did you restrict the ipv6 range? It’s handing out ipv6 addys…",pihole,1646163266.0
9947,comment,1,hyyab0f,,"I did not restrict ipv6 on the router because there is no setting to do so. Nor to enable it. Nor is mentioned anywhere. The ""giving out ipv6s"" was just my theory.
I won't change the dhcp server to the router, it worked fine for almost 5 years with no problem at all. The only problem I ever had was when I did this pi2 to pi3 upgrade.",pihole,1646164182.0
9948,comment,2,hyyphgw,,"It isn’t a theory. Your devices are getting an ipv6 IP and are doing ipv6 dns lookups. 

Good luck!",pihole,1646169990.0
9949,comment,2,hyyw3bw,,Thank you for the time you spent to help me!,pihole,1646172538.0
9950,post,0,t40uvt,Can Pi-Hole block Amazon Prime ads on my Samsung TV?,"Total nube here, with probably dumbest question ever asked.  I have tried searching here using ""amazon"" as search term but nothing relevant appeared.
I just want to watch Lexx on Amazon Prime on my Samsung TV without an ad appearing about every 4 minutes.  I have Google as my Internet Provider using their Model GFRG200 router with 4 Ethernet jacks in the back, if that info makes any difference.
I read the FAQs and the 1st one answered the question of whether PI-Hole can block You Tube Ads, and the answer was ""#1 - No, Pi-hole can't block ads on Youtube"".  So if it can't on You Tube than that probably answers my question; NO it can't block Amazon Prime ads,  but I thought I would try anyway.",pihole,1646114166.0
9951,comment,14,hyvpeqi,,Nope.  The reason you can't block things like this is relatively simple.  The ads come from the same source as the content.  Attempts to block the ads would result in blocking the desired content.,pihole,1646114355.0
9952,comment,2,hywtabx,,Pi hole blocks IMDB tv ads,pihole,1646142772.0
9953,comment,1,hyw5q8f,,Why would you buy/pay for amazon prime if you get ads anyway?,pihole,1646126567.0
9954,comment,1,hywfbij,,"The show is on IMDb TV, which is ad supported.  You can watch it through the Prime Video app, but I bet it tells you that you are watching on IMDb TV.",pihole,1646134449.0
9955,comment,1,hywme04,,You “could” try running pihole -t while the stream is running and block the random domain(s) that come through. But it could break the app in the future streams if it decides to try and stream from that domain,pihole,1646139107.0
9956,comment,1,hyx15hw,,You have successfully done this?,pihole,1646146392.0
9957,comment,3,hywa119,,"Well, they're not technically *advertisements* for other products that you have to pay for. They're suggestions of other shows you might want to watch.",pihole,1646130207.0
9958,comment,1,hywlhkd,,"Because for the price of a Twitch sub + a few cents/month, I get a sub included in Prime.  
For us, Prime Video is a nice plus for the Twitch package.",pihole,1646138583.0
9959,comment,0,hyx0rk0,,"1:  I don't pay for it, I get it from a friend, a former roommate and it has just remained when he moved out.
2.Not everything on Prime has all these ads, their featured shows do not at all.  Lexx is just one of the myriad of shows on the periphery of Prime that they include to greedily suck in more revenue...to squeeze as much from every bit they stream...that is just the logic of modern Capitalism...oh oh, sorry mods, I don't want to turn this into a political discussion, so if anyone responds to that last comment, we should move it to another sub-reddit.",pihole,1646146222.0
9960,comment,1,hywzmoq,,"I think you are correct.  I now remember seeing that IMDB logo after the show.  Seriously though, the ads almost make it impossible to watch.",pihole,1646145723.0
9961,comment,1,hz27z0m,,"yep

&#x200B;

edit: one of the lists sites I found on reddit did it.",pihole,1646236247.0
9962,comment,1,hywb0cg,,That's a service I am not willing to pay for,pihole,1646131030.0
9963,post,0,t40j1a,Pi-hole - time to block,"Hi,

Using Pi-hole standalone with its IP being given out by a separate DHCP server. 

I have several domains that are blacklisted that I would like to enable/disable on demand. 

Where would I find a setting that will govern the time it takes for Pi-hole to sinkhole the query for a blacklisted domain once it is enabled? Assume Pi-hole honors the TTL set upstream.

Thanks.",pihole,1646112980.0
9964,comment,1,hyvobzk,,"My understanding is once it’s on the blacklist/gravity block lists a query for it against the pihole will correctly fail. 

 But you are right in pointing out that dns caches , and if you just added a device to the list that a given client already knows the resolution of, that client won’t need to ask pihole. The ip will be known to the client and the hit will succeed as per the caching behavior. Without involving the pihole. 

The only place I’m aware of controls for the various time to live values are in the original zone files ie: not a value easily manipulated or in my experience ever needed to be manipulated from the perspective of pihole. 

( I’ve adjusted these values for unrelated goals on my own zonefiles. )

You can likely test it with two clients and your pihole with little effort. Look up on client A - success. Apply block. Try on client B and again on client A. Watch your log to see what queries occur, after of course being certain you are only asking pihole. Personally I’d do it with a direct nslookup or dig asking only the pihole.",pihole,1646113680.0
9965,post,1,t3w0s1,Block DNS Requests by IP Geolocation proxy PoC,"Someone posted [Here](https://www.reddit.com/r/mikrotik/comments/t1rvbx/is_there_a_way_to_filter_dns_responses_based_on/) about a method to selectively block IP's based on their source country using pure DNS. I figured there had to be something like this because it sounds like a logical thing to want to do. Well I searched a lot, and this thing did not exist.

After a couple of days figuring out how to write Python again (It's been a few years), I have a working prototype of a ""Country blocking DNS Proxy"".

The use case is for people who run Pihole for several different gateways where the firewall router would NOT be the one servicing the packets (so blocking the countries there is not possible) but the local DNS server (probably Pihole) would be servicing the DNS requests. The proxy will ask the upstream pihole for the DNS entries, then un-pack them, remove the IP's belonging to blocked countries, re-pack the request, and forward it onto the client. 

This implementation is dirty, and definitely not ready to go into ""production"" but I think with some help from the community it could be quite useful for others.

&#x200B;

Thus I am sharing it here. Please be gentle with me as I'm not a python dev in any way...

&#x200B;

[DNS Country Filter Proxy](https://github.com/t4thfavor/DNSCountryFilter/tree/main)",pihole,1646099167.0
9966,comment,1,hyuxlbt,,Nice work. Geo blocking should be standard. I’m sure there’s some challenges with implementing it.,pihole,1646100157.0
9967,comment,1,hyuy6jd,,"It's definitely going to slow down queries a bit since the geolocation portion requires a web call. If you brought down an IP Geolocation DB you could probably make it a little faster, but still DNS should be subsecond, and this ""might"" still be that fast as long as the geolocation place isn't throttling queries.",pihole,1646100426.0
9968,comment,1,hyuz9ly,,">	Geo blocking should be standard.

Standard where?",pihole,1646100921.0
9969,comment,1,hyv1r23,,"Standard in a DNS filtering proxy I guess :) I thought there would be some ""list"" one could import into Pihole, because that seems like it should be a thing.

Technically this could dynamically build the ip or dns list on the fly, but I don't know enough about the architecture of pihole to know if it's doable.",pihole,1646102071.0
9970,comment,1,hyv2olb,,"Pi-hole resolves domain names to IP's only. If the domain is not blocked by Pi-hole, the IP is obtained from an upstream DNS server.  

The location of an IP is not provided by the nameservers, so the upstream DNS server cannot provide this information. 

Pi-hole is not a proxy.   And geolocation records for IP'S are not known to be particularly accurate.",pihole,1646102510.0
9971,comment,1,hyv30nc,,"All known variables there. It's definitely possible to provide intelligent blocking once the DNS request is in your code though. But unfortunately you have to request the location from another service adding latency. I don't think it should be built in, but definitely something that could be ""slipped in"" between the end user and the pihole, and perhaps configured within the well built UI that exists in the pihole env.",pihole,1646102666.0
9972,comment,2,hyv6flp,,"> I don't think it should be built in, but definitely something that could be ""slipped in"" between the end user and the pihole

That's what your mod does.

>perhaps configured within the well built UI that exists in the pihole env.

This is not something we are interested in adding.",pihole,1646104261.0
9973,comment,2,hyv79e3,,"No worries, thanks for the replies, I suppose I'll have to get better at Python then :)",pihole,1646104653.0
9974,post,3,t3pcwl,Pi.Alert Reporting in Wrong Time Zone,"PiAlert is showing any times (device connect/disconnect history, for example) in Zulu/GMT+0 time. I'm in EST/EDT New York +5. Pi.Hole, on the other hand, is doing everything correctly, and my RPi is set for New York as well. 

Any suggestions or direction to fix this? (hopefully? lol)",pihole,1646080870.0
9975,comment,4,hytpzwx,,Contact the author of the pi.alert software.,pihole,1646081210.0
9976,comment,2,hyv661s,,"output of these?

    timedatectl status
    timedatectl timesync-status",pihole,1646104132.0
9977,comment,-2,hytr7wm,,"Yeahh, that'll surely be my next step. Knowing there are so many scholars here, hoping someone can give me a quick answer. 

Nevertheless, as always, and as appreciated, thank you for the quick response! :)",pihole,1646081682.0
9978,comment,1,hyw7tb3,,"`pi@raspberrypi:~ $ timedatectl status`  
`Local time: Tue 2022-03-01 09:51:18 GMT`  
`Universal time: Tue 2022-03-01 09:51:18 UTC`  
`RTC time: n/a`  
`Time zone: Europe/London (GMT, +0000)`  
`System clock synchronized: yes`  
`NTP service: active`  
`RTC in local TZ: no`  
`pi@raspberrypi:~ $ timedatectl timesync-status`  
`Server: 137.190.2.4 (2.debian.pool.ntp.org)`  
`Poll interval: 34min 8s (min: 32s; max 34min 8s)`  
`Leap: normal`  
`Version: 4`  
`Stratum: 2`  
`Reference: C63C16F0`  
`Precision: 1us (-23)`  
`Root distance: 28.167ms (max: 5s)`  
`Offset: +1.039ms`  
`Delay: 52.108ms`  
`Jitter: 1.364ms`  
 `Packet count: 31`  
`Frequency: -5.758ppm`",pihole,1646128330.0
9979,comment,2,hywfsvl,,Thats why. Your timezone was in UTC+00. Use `sudo raspi-config` to set that.,pihole,1646134808.0
9980,comment,1,hywifhk,,That did the trick. Thanks!,pihole,1646136668.0
9981,post,56,t3obz1,"I am forced to use Comcast/xFinity equipment, how do I set up Pi-hole?","I am moving to a new address that is according to xFinity website uses Fiber and I must get their equipment because they are the only compatible equipment that their system can allow. I believe it's the XB6 Aries TG3482G.

What is my best course of action? Anyone had any success with installing Pi-Hole on an xFinity modem/router? Also, I saw the router online and it gets its signal from a coaxial cable. What exactly is the new technology here?

&#x200B;

Thank you.",pihole,1646078255.0
9982,comment,51,hytj9ct,,"1. Go here: https://www.xfinity.com/support/devices/#unauth and type in your address. Itll tell you if there are any 3rd party modems you can buy that are compatible. I HIGHLY doubt there is NO compatible model

2. You might not even need a new one. Can you change DNS for IPv4 and IPv6 (or disable IPv6) on your current modem? If you can thats all you need.

3. You can always just set up a router between the modem and your devices.",pihole,1646078584.0
9983,comment,16,hytizek,,You should be able to use an external router regardless. You just need to use their modem and add a router via Ethernet. Once you have that setup the Pi-hole should be easy money!,pihole,1646078475.0
9984,comment,12,hytonhd,,Just put your own router in between your house and their equipment. Then you can use your own pihole without a problem.,pihole,1646080688.0
9985,comment,23,hyuk37p,,"ITT: a bunch of people who don’t know how fiber works. 

You don’t use the coax on their equipment, and you’re free to not use their box. On fiber it’ll get internet through the WAN Ethernet port from a wall jack - the “modem” is actually an ONT located outside. In truth Fiber doesn’t use modems. 

Plug in any router you want to the Ethernet and set your DNS for Pi-hole.",pihole,1646093807.0
9986,comment,3,hyuwqak,,"Is it truly fiber that is terminated is a common connector (i.e. ST assuming it's a shorter hual multimode fiber into your home), or is if 'fiber to the curb' (fiber to some demarcation point outside your home and then from there it's copper into the home - this is pretty common)?",pihole,1646099762.0
9987,comment,2,hyutjqk,,"I have an XFinity setup and it works great.  To be clear, I am using Coax not fiber but think that it should works the same.  You can do this one of two ways:

1. Bridge Mode: This is a setting in the cable gateway and basically converts it from a router to a dumb gateway.  Whatever device attached to it is effectively on the public and so you go bridge mode and then attach a router and you are good to go.  I do this and it works great!  In this scenario, your router is your DHCP server and you configure it out hand out Pi-Hole for DNS.
2. Double NAT: This is less ideal, but it still works.  In this scenario, you leave the cable modem in router mode and attach your router to one of the cable modem ports.   Your computers then hang off your router.  This will work too, but you are setup for double NAT which introduces other challenges.  In this case, your router is still doing DHCP and you can configure it to deliver Pi-Hole DNS via DHCP.",pihole,1646098295.0
9988,comment,2,hyuudki,,I got the XB6 this week and was blown away you cannot modify the DNS or disable DHCP. A downgrade in my opinion. I simply put the XB6 in bridge mode and used my own router instead.,pihole,1646098689.0
9989,comment,2,hyv0s4u,,"What I did was I bought my own router, enabled bridge mode on my xfinity gateway, turned off DHCP on my router and then let my pihole manage it.",pihole,1646101617.0
9990,comment,2,hyvsobl,,"Ran my own router for years ""on"" a combo unit.  Not fiber (I wish!), But I used the ISP POS, in ""bridge"" mode.  IE it no do poo.  It took the coax signal (again, not a fiber zone, but what I'm saying should work fine!), And basically acted like it was just a modem.

Moved to a different ISP, took the modem only option, much to the ISP's ""dislike"".  Blew that router, and went to PFSense.",pihole,1646116485.0
9991,comment,3,hyuaebg,,"They told me the same thing, My Aris modem and router I purchased worked perfecty fine.

Getting information from Xfinity/Comcast is about as reliable as the stuff coming out of the Kremlin the last few ~~days~~ ~~years~~  forever.

&#x200B;

edit:  ah a downvote.. Hi Igor!",pihole,1646089376.0
9992,comment,1,hytn9wm,,"Sadly I am in the same boat with an xfinity router/modem combo (no restrictions with the fiber connection like you though). 


I just set the DNS server manually on as many devices as I can to point to the pihole. Sucks because rokuTV etc, stuff that I really want on there, can’t be connected because of no way to manually change DNS settings. But I get it on all my personal devices so it’s better than nothing.",pihole,1646080152.0
9993,comment,-1,hyu5g06,,"Doubt it will work. I had an XB7 before and you can’t change the DNS server or turn off DHCP. I tried creating a pool of 1 IP, and use Pi-hole for DHCP, but you can’t tweak IPv6 and some devices would do DNS over IPv6 bypassing my Pi-hole.",pihole,1646087288.0
9994,comment,1,hytix11,,I just setup pihole as dhcp. If you can't connect pihole via ethernet just connect via wifi and setup pihole accordingly.,pihole,1646078450.0
9995,comment,1,hytpvkp,,"Different ISP, same problem.

I solved it by: Internet -> ATT router ->pfSense firewall

Any FW will do.  If you can do passthrough or DMZ on the ISP equipment it does not appear as a double NAT.",pihole,1646081164.0
9996,comment,1,hyv8kjc,,"Why not try an asus ax6000 if you are looking for a fiber connected router, it has both 10gb sfp+ and normal 10gb port",pihole,1646105280.0
9997,comment,1,hyvpczt,,I have their equipment and my nighthawk router also.,pihole,1646114324.0
9998,comment,1,hyw9w4m,,"The ""TG"" part of the Arris model number is ""telephony gateway"" which likely is pre-configured with rules for prioritizing VoIP traffic. So if you bought phone service as part of your plan, you'll need a VoIP box of some kind, and this has it built in.",pihole,1646130091.0
9999,comment,1,hywhlxh,,Use their modem and *your* router.,pihole,1646136106.0
10000,comment,1,hywmte8,,"put a router after the equipment, have its dhcp server enabled, change the ip address to something else, and connect all your devices to that router. it worked for me.",pihole,1646139350.0
10001,comment,1,hywnhq0,,"It’s more cumbersome…but you should be able to change the dns settings across each device manually…? It’s a PITA but that’s likely gonna be your cheapest bet…

Though I know my roku tv doesn’t allow setting dns it takes whatever comes from DHCP",pihole,1646139735.0
10002,comment,1,hyx6iqc,,"I have no knowledge of the equipment you're about to receive, but my modem/router doesn't allow me to set a custom DNS address. On the other had it allows me to disable the DHCP server. I went ahead and did that, and used the one that can be enabled in pihole. By having the pihole providing the DHCP server, it can then give himself as the DNS server to all the devices connected to the network.",pihole,1646148675.0
10003,comment,1,hyyc0e9,,"Throw their modem/router in bridge mode, and hook up your own router.

ALSO: 
> XB6 Aries TG3482G.

Arris TG3482G. That has the Intel Puma 7 chipset, well known for stability and reliability issues. [See here](https://approvedmodemlist.com/intel-puma-6-modem-list-chipset-defects/)

[Arris TG3482G Specs](http://www.dslreports.com/hardware/ARRIS-TG3482-h4594)

(Yes I know the article is about Puma 6, but 7 also suffers from the same issues)",pihole,1646164841.0
10004,comment,-1,hyui39j,,"This doesnt seem accurate. i have Xfinity and bought a docsis 3.1 modem and my own nighthawk router on their 1200 GBps fiber line with no problems, someone is drastically lieing to you on that.",pihole,1646092875.0
10005,comment,-1,hyuzwll,,"Settings in the web interface, enable listen on all interfaces.",pihole,1646101214.0
10006,comment,14,hytkl6v,,"Unfortunately it says: 

Your area has a Fiber-Only network

This is a Fiber-Only network location that has a faster Internet connection, with fast download and dramatically faster upload speeds, access to more advanced TV service, and a more reliable network. At this time, there are no current retail modems on the market that work with this new technology. Visit our FAQs for more information about available services in your home.

2- I can change my current DNS for both on my own router/modem combo. 

So I’m left with connecting my router to it?",pihole,1646079107.0
10007,comment,2,hyuh3ix,,You mean xFinity router between the house and my equipment?,pihole,1646092412.0
10008,comment,7,hyuu9ej,,Not how it works anymore. att and comcast both require their gateway plugged into the Ethernet on the ONT. Att does a check every few days so even if you mac spoof a switch to their gateways mac. Your still having to set it back up every few days. So better to use bridge mode or op passthrough if offered.,pihole,1646098634.0
10009,comment,1,hyv8m2q,,"Thank you! Yes, I’m kinda confused as for terminology and connectivity. I see the XB6 with a coaxial cable, but xFinity says it’s fiber. So I’m not sure which it is.",pihole,1646105300.0
10010,comment,1,hyv8euu,,"Do you mind recommending a good/cheap router? Also, if I understand it correctly, I only need a router in this situation and not a combo. Am I correct?",pihole,1646105204.0
10011,comment,1,hywnf26,,">  I simply put the XB6 in bridge mode and used my own router instead.  

This. Put the Xfinity device into [bridge mode](https://www.xfinity.com/support/articles/wireless-gateway-enable-disable-bridge-mode), at which point it should function only as a modem, and use your own router.",pihole,1646139693.0
10012,comment,1,hyxu4l2,,"Can you set the DHCP range, and fixed ips formax addresses? My coax modem won't let me disable DHCP either, but I just told it to only lease 2 IPs, and only to the Mac addresses of my servers nics. The server is manually configured, so it never asks. The pihole responds to all other requests and everything works. It's a dirty hack.",pihole,1646157968.0
10013,comment,1,hyugumn,,How do you ask them to activate your equipment though? My understanding is that I have to call them to activate it?,pihole,1646092297.0
10014,comment,1,hyuhb1x,,Can’t you also use pihole for ipv6? How were you able to use it for ipv4 but not 6?,pihole,1646092510.0
10015,comment,1,hyuukqi,,"Yup I’m a similar setup. Just used ip passthrough in the att gateway. Att will still try to grab your dns though so you have to toggle a setting on their website so it doesn’t hijack

Edit: it’s called att dns error assist.",pihole,1646098784.0
10016,comment,15,hytls82,,"Yes.

Set the IPv4 and IPv6 DNS on your modem/router to be your pihole. That's all you have to do. Personally I would use pihole for DHCP too.

If your xfinity modem doesnt all you to turn off DHCP you can set it to only assign one address to your pihole and use the pihole to handle the rest.",pihole,1646079574.0
10017,comment,26,hytscuu,,Try a fiber modem anyway. Comcast/Xfinity is well known for lying to their customers about equipment restrictions.,pihole,1646082118.0
10018,comment,17,hyun908,,"Fiber -> Modem -> Your Router -> Your Network <- Pihole     
     
Most people have ISP equipment as the boundary between their network and the outside world. It's not a big deal.    
Just put the Pihole on the network somewhere, tell the router to use the Pihole address when assigning DHCP DNS, and forget the modem is even there.",pihole,1646095311.0
10019,comment,1,hywf6rt,,"Okay, if it is an XB6 then you can enable bridge mode if you want to. Per these instructions.

https://www.xfinity.com/support/articles/wireless-gateway-enable-disable-bridge-mode

Just remember that if you go this route then the router connected to the XB6 is on the public Internet.

Regarding coax vs fiber, I would not worry about it; it really does not matter in practice. All you care about is speed and reliability. Oh and they could have run fiber to a device outside that converts it to coax for the run to the xb6. (That makes sense because installers are likely more comfortable running coax)",pihole,1646134351.0
10020,comment,1,hyvel8m,,"That’s right, just a wireless router. The modem part is taken care of by the XB6. You can login to the XB6 and put it in bridge mode. Then plug the XB6 into your routers WAN/Internet port and the router should automatically pick it up (Make sure the router's WAN is set to DHCP). Then you can configure you’re router with proper DHCP/DNS and wifi settings. 

I would just get any Wifi6 router. (The XB6 is Wifi6) I got one by TP-Link, I know Asus makes good ones, but I’m not qualified to recommend something to be honest. If you have a lot of devices, you might want it to handle more bandwidth. For example some routers say AX1800 which means they can handle a max of 1800mbps at once for all devices. An AX3000 can handle 3000mbps etc. 1800mbps is usually enough unless you have several people streaming, gaming, all at once.

I have Rogers service in Canada (which uses the XB6 with coax) and when you bridge your XB6, they warn you it will disable any WiFi 'boosting pods' your service provider may have provided you, and will prevent you from using any mobile apps that your service provider might offer to let you manage the XB6. If you have wireless TV service as well, the WiFi TV devices may also get disconnected. I just have internet service so it doesn't matter to me.",pihole,1646108214.0
10021,comment,1,hyyq6l6,,"This does work, but you might run into the issue of double NAT with port forwarding issues so I like the WAN IP on the router.",pihole,1646170253.0
10022,comment,1,hyumwaz,,"call and give them the MAC address.

First be sure of compatibility.  You can research this on here.  Then there will be a sticker on the side of the modem. It will have a MAC address. you call and give them that.. It will populate and you should be fine.. 

Do not just take there word for it...",pihole,1646095142.0
10023,comment,1,hyuue8o,,"You can’t disable it on the XB7, so you’d have both being used for DHCP, and you can’t restrict it to just one IP like IPv4",pihole,1646098698.0
10024,comment,1,hywtt90,,This is not an option on my Xfinity router.,pihole,1646143029.0
10025,comment,42,hyujl5k,,"“””fiber modem”””

Fiber doesn’t use modems, they use ONTs which assign a DHCP address to a router directly over Ethernet(or static IP/PPPoE if your ISP is Stone Age)

You can just grab your own Ethernet router and plug it in, set the DNS to your Pi-hole like you would anything else.",pihole,1646093569.0
10026,comment,15,hyutlav,,"Yeah, I used to work for Comcast and even internally nobody knows their ass from their elbow there. Not to mention the average tenure isn't long enough for anyone to learn anything. I worked there for 2.5 years and was more tenured than 37% of the entire company worldwide.",pihole,1646098315.0
10027,comment,2,hyuar2u,,"Nah, it'll be device-locked in a way that isn't easily spoofed.",pihole,1646089530.0
10028,comment,3,hytwlzs,,"Not likley to work, most networks use MAC filtering to prevent rogue devices. This is what Comcast does in our area.",pihole,1646083755.0
10029,comment,7,hyuxifc,,"This ^

I've had a home wifi network setup forever, before Comcast provided me a wifi modem. This gives me total control over the network and my router is the only thing connected via Ethernet to the modem. 

It also means that when I decided to upgrade my internet a year or so ago to handle everyone learning/working at home, I didn't have to change anything. I swapped out the old modem for the new one and my home network worked exactly as before, but faster and with less lag.",pihole,1646100120.0
10030,comment,1,hywob9r,,What do you mean by on the public?,pihole,1646140192.0
10031,comment,1,hyvg5xe,,"Side question, did you notice if you Pi-hole slows down your speed?",pihole,1646109022.0
10032,comment,1,hyywl82,,"Router (default gateway) remains the comcast box and is still the firewall as well. It just doesn't hand out ip addresses anymore. The pi hole tells DHCP clients to use the Comcast box as the default gateway, and the pihole as DNS. The only real issue I've run into is that ipv6 still ends up a bit weird and some clients that prefer ipv6 can end up using the wrong DNS server.",pihole,1646172730.0
10033,comment,1,hyv8apl,,"I see! If you can’t restrict it to one IP as the case with ipv4, why does pihole allows ipv6? Or is there a way to use ipv6 too?",pihole,1646105146.0
10034,comment,2,hyxuz4r,,For years Comcast had me on a modem rental that wouldn’t even give me the full speed available to my account. I finally bought my own and I got like 50 mbps extra. So pissed that I didn’t do it sooner.,pihole,1646158298.0
10035,comment,8,hyu4jqi,,Can't you just spoof the MAC of the modem?,pihole,1646086916.0
10036,comment,1,hyuarkp,,"If it were only MAC, that'd be easy, but I'll bet they have other ways of doing device authentication.",pihole,1646089536.0
10037,comment,1,hywv874,,"Sorry, I was missing a word.  What I meant is that in bridge mode, the router that you attach to your XB6 is exposed to the public Internet.  This raises the typical security concerns and so you should make sure that you have a good one that is properly updated and all that stuff.

It is not a huge deal, but you do need to maintain it.",pihole,1646143715.0
10038,comment,2,hyvgt6h,,"No it doesn’t slow down speed. Even if Pihole wasn’t working properly your true “internet speed” wouldn’t be affected, only the domain lookup would be slowed down, which yes, does affect loading times, but not your actual bandwidth. 

I’ve not noticed any negative effects in load times or speed. Any issue I’ve ever had is solved by a reboot anyway. 

My beginners advice would be not to go crazy adding way too many custom block lists or you’ll end up breaking too many websites and spend a lot of time hunting down things to whitelist.",pihole,1646109358.0
10039,comment,1,hyywu2k,,Oh yes sorry for my misunderstanding. That does sound like a decent solution minus the IPv6 issue. You can probably disable IPv6 on all your PC clients anyway to help with that.,pihole,1646172827.0
10040,comment,1,hyweyn8,,"Because Pi-hole works for both, I don’t get your question. Not everyone uses ISP routers",pihole,1646134178.0
10041,comment,8,hyul5lc,,"Many Modems are designed to be controlled by your ISP so there isn't much documentation on getting in tot he settings interface. Also not all modems allow for MAC Spoofing, this is a reasonably reliable security because if 2 devices enter the network with same MAC they can just block both and let Tech support clear it up. The Rogue device will be easy for them to identify and isolate, as it is unlikely someone trying to steal internet is going to call the ISP and complain about their non-existent service. 

&#x200B;

Something to keep in mind, Routers are a down-stream device as far as your ISP is concerned they could care less about what is past the modem. Often time your ISP will try to sell you on a combo modem, router, wifi access point unit. My dad has this with Starlink system but they offer an add-on device that allows you to disable the router/access point functionality and pass-down a WAN line to plug in to your own gear.",pihole,1646094313.0
10042,comment,0,hyuay1h,,"You could try, but it'd be an expensive way to get an answer to that. I'll bet that some web searches would turn up information on the device and Comcast's methods.",pihole,1646089615.0
10043,comment,1,hyxodqx,,Youre assuming Comcast uses best industry practices.,pihole,1646155758.0
10044,comment,4,hyubgdf,,"It's neither expensive nor difficult to spoof your device's MAC. 

If the ISP is getting a cloned MAC I don't see how else they could identify a rogue modem.

Eh... Try it.",pihole,1646089839.0
10045,comment,1,hyyub6s,,I'm assuming that Comcast has already had to deal with lots of people trying all sorts of ways to steal Internet service.,pihole,1646171840.0
10046,comment,8,hyuh7rb,,"I concur, my ISP locks my connection to my routers MAC address. I just copied it and swap it out for a Mikrotik router. I just pasted the MAC address in the mikrotik router settings and it works fine.",pihole,1646092468.0
10047,post,2,t3j21l,DNSMASQ Warning - ignoring nameserver - local interface,"&#x200B;

|Time|Type|Message|
|:-|:-|:-|
|2022-02-28 07:33:57|DNSMASQ\_WARN|Warning in  dnsmasq core:ignoring nameserver 10.10.20.10 - local interface Check out [our documentation](https://docs.pi-hole.net/ftldns/dnsmasq_warn/) for further information. |
|2022-02-28 07:33:58|DNSMASQ\_WARN|Warning in  dnsmasq core:ignoring nameserver 10.10.20.10 - local interface Check out [our documentation](https://docs.pi-hole.net/ftldns/dnsmasq_warn/) for further information. |
|2022-02-28 07:33:58|DNSMASQ\_WARN|Warning in  dnsmasq core:ignoring nameserver 10.10.107.10 - local interface Check out [our documentation](https://docs.pi-hole.net/ftldns/dnsmasq_warn/) for further information. |
|2022-02-28 07:33:58|DNSMASQ\_WARN|Warning in  dnsmasq core:ignoring nameserver 10.10.107.10 - local interface Check out [our documentation](https://docs.pi-hole.net/ftldns/dnsmasq_warn/) for further information. |

This is what the documentation says about it:

>ignoring nameserver ADDRESS \- local interface  
>  
>At least one server directive is redundant and point to the dnsmasq instance itself. The server is ignored.

I already fixed some other warnings (like [ignoring domain](https://www.reddit.com/r/pihole/comments/rvattc/dnsmasq_warning_ignoring_domain/)) and I know this has to be related to my configured VLANs, but I can't figure out how to solve it

I found the [following solution](https://lists.thekelleys.org.uk/pipermail/dnsmasq-discuss/2004q4/000037.html) but my 01-pihole.conf file already has the no-resolv

>The reason for the ""ignoring nameserver"" is that dnsmasq is looking in  /etc/resolv.conf for upstream nameservers, as well as in  /etc/dnsmasq.conf, so it ends up with the set of (127.0.0.1,  12.158.80.10, 64.94.110.11) as upstream nameservers. However, dnsmasq  also knows that it is listening on 127.0.0.1 for DNS queries, so it's  clever enough to ignore that - and tell you about it. This is quite  important, since looping-back queries will cause them to circulate  hundreds of times until tables are filled and the query gets thrown away.    
>  
>To get rid of the warning, you can tell dnsmasq not to read  /etc/resolv.conf, by adding ""no-resolv"" to /etc/dnsmasq.conf 

Thanks in advance for your help

**/etc/resolv.conf**

    # Generated by resolvconf
    nameserver 127.0.0.1

**/etc/dnsmasq.d/01-pihole.conf**

    # Pi-hole: A black hole for Internet advertisements
    # (c) 2017 Pi-hole, LLC (https://pi-hole.net)
    # Network-wide ad blocking via your own hardware.
    #
    # Dnsmasq config for Pi-hole's FTLDNS
    #
    # This file is copyright under the latest version of the EUPL.
    # Please see LICENSE file for your rights under this license.
    
    ###############################################################################
    #      FILE AUTOMATICALLY POPULATED BY PI-HOLE INSTALL/UPDATE PROCEDURE.      #
    # ANY CHANGES MADE TO THIS FILE AFTER INSTALL WILL BE LOST ON THE NEXT UPDATE #
    #                                                                             #
    #        IF YOU WISH TO CHANGE THE UPSTREAM SERVERS, CHANGE THEM IN:          #
    #                      /etc/pihole/setupVars.conf                             #
    #                                                                             #
    #        ANY OTHER CHANGES SHOULD BE MADE IN A SEPARATE CONFIG FILE           #
    #                    WITHIN /etc/dnsmasq.d/yourname.conf                      #
    ###############################################################################
    
    addn-hosts=/etc/pihole/local.list
    addn-hosts=/etc/pihole/custom.list
    
    localise-queries
    no-resolv
    cache-size=10000
    
    log-queries
    log-facility=/var/log/pihole.log
    
    log-async
    server=127.0.0.1#5335
    domain-needed
    expand-hosts
    bogus-priv
    local-service

**/etc/dnsmasq.d/02-pihole-dhcp.conf**

    ###############################################################################
    #  DHCP SERVER CONFIG FILE AUTOMATICALLY POPULATED BY PI-HOLE WEB INTERFACE.  #
    #            ANY CHANGES MADE TO THIS FILE WILL BE LOST ON CHANGE             #
    ###############################################################################
    dhcp-authoritative
    dhcp-range=10.10.1.15,10.10.1.50,24h
    dhcp-option=option:router,10.10.1.1
    dhcp-leasefile=/etc/pihole/dhcp.leases
    #quiet-dhcp
    
    domain=lan
    local=/lan/

**/etc/dnsmasq.d/10-vlans.conf**

    # Interfaces to listen
    interface=eth0
    interface=eth0.20
    interface=eth0.107
    
    #Adding VLANs for Pi-Hole to run DHCP + DNS
    # 20, 107
    
    server=/guest/10.10.20.10
    server=/20.10.10.in-addr.arpa/10.10.20.10
    
    server=/iot/10.10.107.10
    server=/107.10.10.in-addr.arpa/10.10.107.10
    
    #Guest Network
    domain=guest,10.10.20.0/24
    dhcp-range=set:eth0.20,10.10.20.15,10.10.20.30,255.255.255.0,24h
    dhcp-option=tag:eth0.20,option:router,10.10.20.1
    
    #IoT Network
    domain=iot,10.10.107.0/24
    dhcp-range=set:eth.107,10.10.107.15,10.10.107.60,255.255.255.0,24h
    dhcp-option=tag:eth.107,option:router,10.10.107.1",pihole,1646064543.0
10048,comment,1,hytjzgm,,"Im guessing this is an issue with your VLAN config. I dont use VLANs and all of my other files look the same as yours.

Generate a debug log though. Is there anything interesting in it?",pihole,1646078869.0
10049,comment,1,hz00l5p,,"Finally I found the cause of the problem, I just removed the following lines:

**/etc/dnsmasq.d/10-vlans.conf**

    server=/guest/10.10.20.10
    server=/20.10.10.in-addr.arpa/10.10.20.10
    
    server=/iot/10.10.107.10
    server=/107.10.10.in-addr.arpa/10.10.107.10

Could you tell me if they are required somewhere?",pihole,1646189958.0
10050,comment,1,hyzznut,,"I could not upload the debug log because I got this error:

curl failed, contact Pi-hole support for assistance. 
Error message: curl: (60) SSL certificate problem: certificate has expired More details here: https://curl.haxx.se/docs/sslcerts.html

curl failed to verify the legitimacy of the server and therefore could notestablish a secure connection to it. To learn more about this situation andhow to fix it, please visit the web page mentioned above.

There was an error uploading your debug log. Please try again or contact the Pi-hole team for assistance.",pihole,1646189563.0
10051,post,34,t3hxnh,Help setting up CName,"I'm attempting to set up ""snipeit/"" as a record and I'm having trouble getting it to work correctly, I've attempted to locate some information, but either I'm not finding it or I'm just missing it. Anyone know how to correctly set up a domain like ""snipeit/"" nothing is forwarded out of my LAN and no Ports are open on my router (which is heavily locked down, thanks ISP) I have my DNS set up manually to direct to Pi-hole so I'm thinking maybe I'm missing something?  


EDIT: It appears to be working now, not sure what changed but apparently I dont have any more issues!",pihole,1646061517.0
10052,comment,3,hyseien,,"> I'm attempting to set up ""snipeit/"" as a record  

I don't think slashes can be part of a domain, did you try ""snipeit""?  
""snipeit/"" looks like an URL, not a domain  

> but either I'm not finding it or I'm just missing it  

It's done in Local DNS > Local CNAME records.  
Enter ""snipeit"" and the local domain you already specified, either in ""DNS records"" or another way like the hosts file.  
Note that mobile browsers assume one-word domains to represent a search term, you may avoid that by entering ""https://snipeit"" to order the device to parse it as a literal URL.  

> nothing is forwarded out of my LAN and no Ports are open on my router  

What SHOULD be forwarded? To WHERE?  
dnsmasq only allows to setup CNAMEs from domains that are locally known. PiHole will answer with the IP address he knows for the other domain, at which point it's no longer managed by Pihole so you won't see forwarding here.  

... what do you think a CNAME even *is*? It seems you're trying to solve a problem you don't understand and wrongly assumed CNAME with solve it (known as an ""XY problem"" issue)  
Can you try to explain for what reason you need CNAME in the first place?  

> I have my DNS set up manually to direct to Pi-hole so I'm thinking maybe I'm missing something?  

Do you see a request for ""snipeit"" in Pihole? If you can see it, the client-to-Pihole DNS setup is working fine (note that devices can cache the results, so you may not have a new request each time you use it)",pihole,1646062864.0
10053,comment,2,hyt00sn,,"Assuming the dnsmasq documentation is still relevant in current pihole - https://thekelleys.org.uk/dnsmasq/docs/dnsmasq-man.html .

> --cname=<cname>,[<cname>,]<target>[,<TTL>]  
> Return a CNAME record which indicates that <cname> is really <target>. There is a significant limitation on the target; it must be a DNS record which is known to dnsmasq and NOT a DNS record which comes from an upstream server. The cname must be unique, but it is permissible to have more than one cname pointing to the same target. Indeed it's possible to declare multiple cnames to a target in a single line, like so: --cname=cname1,cname2,target  
> If the time-to-live is given, it overrides the default, which is zero or the value of --local-ttl. The value is a positive integer and gives the time-to-live in seconds.",pihole,1646071213.0
10054,comment,1,hyseuk1,,"added the information for those curious, the actual CNAME record i have is ""snipeit"" however, it doesnt appear to work, so I was hoping maybe I just missed some information",pihole,1646063000.0
10055,comment,2,hyuzesd,,">	Assuming the dnsmasq documentation is still relevant in current pihole

It is.",pihole,1646100986.0
10056,comment,7,hysg8b6,,"Sounds like the client requested it before the fix and used its cache. Here's the command I use to try it from Pihole's machine directly, in case you need it someday ;)  

> dig example.com @127.0.0.1 -p 53  

It will ask Pihole's host to query the domain ""example.com"" to Pihole, so you'll avoid the cache from the client device",pihole,1646063556.0
10057,comment,2,hyvyx80,,"Thanks for the confirmation! I've been lazy and am still using some 4.3-ish version, so I'm not always too sure how that translates to the experience of other users on newer versions.",pihole,1646121034.0
10058,comment,2,hyshamu,,Thank you!,pihole,1646063980.0
10059,post,1,t3e1qk,Help: Router level setup issue,"Hello everyone,

Hoping to fix an issue I’ve found when trying to run my dockerized pihole/unbound setup at the router level. 

I have a Firewalla purple, and my pihole is running on a raspberry pi 4 that I’m building up as my home server. I noticed and issue because when I would setup the router dns to go to the pihole device my app templates on portainer would completely fail to load and absolutely no ads were being blocked on devices. Once I removed it from the router level and put it on the device level everything working perfectly. 

We all know how annoying it can be to have to go through all our devices individually though so I’d really like to be able to figure out where my issue is at the router level so I can setup pihole their rather than each device. 

Thanks in advance for any advice or help provided 🙏🏻",pihole,1646049797.0
10060,comment,1,hyrr9lj,,"Three questions to check the basics:

1. What is set as the upstream DNS server in pi-hole?
2. In your router, are you sure that you're setting the DNS server to be handed out to clients over DHCP, as opposed to the DNS server to be used by the router itself?
3. How are you doing local name resolution on your home network? For instance, is it done by the router? If so, have you set up conditional forwarding in pi-hole?",pihole,1646051543.0
10061,comment,2,hys0k4o,,Okay so I think it’s 3 That is my problem. I’ll have to try tonight and see if I can get it working right by configuring the conditional forwarding.,pihole,1646056641.0
10062,comment,1,hyrwxfe,,"1. The upstream dns provider being used is Unbound (which I used a merged docker container to retrieve the software, so it was a single pihole container already setup to use Unbound) 

2. When I go to my network settings on the Firewalla purple and go to the Lan it shows that the dhcp server setting is active. 

3. Yes the router is handling local name resolution, as for setting up conditional forwarding in pi hole I’d have to check on that.",pihole,1646054781.0
10063,comment,1,hyuesng,,After setting up conditional forwarding I still notice the same issue with the ads continuing to come through and my app template in portainer not loading…,pihole,1646091357.0
10064,comment,1,hyvq3pe,,What is showing in pi-hole's query log? Are clients using it as a DNS server?,pihole,1646114793.0
10065,post,0,t39mfg,Use Pihole + Unbound as DoT server for outside network Android device,"I'm using Adguard Home in my Raspberry Pi now. There is option for setting Adguard Home as DoT and DoH server from outside. It work well with my Android 11 devices.

In order to achieve more privacy, I want to use unbound for upper DNS resolver. After doing some searches, I notice Pihole can work with unbound. So could I setup a DoT, DoH server as Adguard Home?

Thank you.",pihole,1646032121.0
10066,comment,2,hysgk4i,,"> There is option for setting Adguard Home as DoT and DoH server from outside  

I don't know about Adguard Home... they do client authentification, right?  

Because told this way, it sounds like a DoT port can be queried by anybody from outside, which will lead to the obvious ""don't make an open resolver, setup a VPN server instead""  

> In order to achieve more privacy, I want to use unbound for upper DNS resolver.  

What? Unbound won't provide you better privacy. It's main use is to perform *unencrypted* recursive lookups.  
Technically, it *can* be used as a mere DoT/DoH client for a DoT/DoH resolver... but it is what Adguard Home is already providing. What's Adguard Home current resolver?  

Unbound is not the only DoH client by the way. Personnally, I use cloudflared as Pihole's resolver for DoH encryption, and on the side I have unbound in recursive mode for on-demand recursive lookups.",pihole,1646063688.0
10067,comment,1,hyr8ux9,,"Unbound can not operate as a recursive resolver using encrypted outgoing traffic. It's just going to end up as a (rather bloated for the use case) forwarding resolver, and/or spit your queries out in plain text at your home exit point.",pihole,1646037563.0
10068,comment,1,hyt10w9,,"Thank you for your detail explanation.

> I don't know about Adguard Home... they do client authentification, right? 

Yes. There is feature for listing and handling client.


> Because told this way, it sounds like a DoT port can be queried by anybody from outside, which will lead to the obvious ""don't make an open resolver, setup a VPN server instead"" 

Since I don't want to use this server for myself, I want my relatives can use it from outside, so I'm going to setup a open DoT resolver (port 853 open, not port 53).
The VPN solution is fine, but it's too complicated and effect to internet speed for others. Then I didn't choose it.

> Technically, it can be used as a mere DoT/DoH client for a DoT/DoH resolver... but it is what Adguard Home is already providing. What's Adguard Home current resolver? 

My Adguard Home current resolver is Google DNS. I choose it because of the advantage of EDNS Client Subnet.",pihole,1646071597.0
10069,comment,1,hyr97g9,,"Thanks. So in short, I cannot have DoT server on Pihole + Unbound, right?",pihole,1646037835.0
10070,comment,1,hyt6ru1,,"In theory, yes it could work given that Google provides a DoH endpoint. You could setup Unbound (or Cloudlfared?) to listen to another 
port (5335 and 5353 are common, I think) and make it  talk to Google DNS's DoH endpoint  

From then, a ""dig example.com @127.0.0.1 -p 5353"" should bring results from Google, over DOH. And from there, use 127.0.0.1:5353 as the DNS resolver for Pihole... or Adguard Home, in your case.  
^(But maybe Adguard has built-in DoH resolver support? I know Pihole doesn't and I heard it was a difference)  





And now, boring security speech time if somebody is lurking around.  
>I want my relatives can use it from outside, so I'm going to setup a open DoT resolver

I hope you know what you will be doing. If unprotected, an open resolver will allow bad actors to use your infrastructure as a tool to amplify attacks regularily.  

>The VPN solution is fine, but it's too complicated and effect to internet speed for others. Then I didn't choose it.

For the record, The VPN's config can be setup to *only* be used for DNS queries. But yeah, it's a hassle to setup, especially given that for nice logging each device requires its own config file.",pihole,1646073795.0
10071,comment,3,hyr9mls,,You can. I just wanted to make it perfectly clear to you that your traffic is going to be popping out the Unbound end unencrypted if you want to use Unbound as a recursive resolver. If you don't want to use it as a recursive resolver there's not a lot of point in using it at all unless you're making use of any of its other features. Maybe I've misinterpreted what you're wanting here.,pihole,1646038166.0
10072,comment,2,hysgx33,,"I think OP simply want to be able to query the Pihole from the outside, and Adguard Home allows that with the DoH/DoT feature.  
If that's the case, then OP doesn't care about actual encryption, they simply want to be able to use the forced Doh/DoT feature...  

I *hope* Adguard Home authentify OP before answering, else that sounds like an open resolver and OP would rather need a VPN...",pihole,1646063831.0
10073,comment,0,hyt1oej,,"Thank you for your explanation.

I want to use Unbound as a recursive resolver to reduce query time.

Actually I can use Google DNS as upper DNS resolver, but there is still delay from client to Google DNS server right? When using Unbound doesn't have this delay.",pihole,1646071850.0
10074,comment,1,hyt19wl,,Yes. You understand me correctly. And I have replied your comment. Please check.,pihole,1646071693.0
10075,comment,1,hytsew6,,"While you're not wrong, per se, recursive operation is *much* slower at fetching records that don't already exist in the cache. You're trading milliseconds for seconds effectively.

You may be looking at resolutions up to around 4~8 seconds in the worst cases.",pihole,1646082139.0
10076,comment,1,hyu0u5o,,">	You’re trading milliseconds for seconds effectively.

More like trading milliseconds for a few hundred milliseconds. 

4-8 second resolution time would be very unusual.",pihole,1646085406.0
10077,comment,1,hyuz91m,,I thought recursive resolver like Unbound has cache?,pihole,1646100914.0
10078,comment,1,hyu1i25,,">4-8 second resolution time would be very unusual.

For me, using cachedb cache persistence, the 4~8s resolution range sits at around 2%. Yes, that's fairly trivial, but that 2% number is mostly a product of my not ever actually having to blow any part of my cache away at all.

For Johnny Enduser with a regular setup it's not going to be dramatically higher, but it almost certainly will be higher.

Note that I was also talking about the worst possible scenarios, not in general.",pihole,1646085671.0
10079,comment,2,hyv0jgn,,"It does, though it exists in memory only for that current runtime. Nor a particularly optimistic one by default, but that's another discussion I suppose.

Machine/service restarts will force Unbound to rebuild its cache from scratch.

I use an optional Unbound component (cachedb module) that's fairly rarely compiled in to distribution shipped unbound packages for whatever reason, which allows me to keep Unbound's cache resident on disk in a Redis database, which is backed in memory (or it's an in-memory database that's backed by disk rather) which allows me to point multiple Unbound instances at the same central optimistic cache for one, and persist all records Unbound sees as a final optimistic cache layer (served with ttl 0).

The end result of this is that I can restart the machine or unbound.service, and then get a result for an external query effectively immediately as opposed to needing to walk the full path (which may be quite vast for any given record) again.",pihole,1646101505.0
10080,comment,1,hyv96wx,,"Thank you for your explanation. I think I will stick with Adguard Home and Google DNS upstream resolver.
These things become more and more complicated for me now...",pihole,1646105577.0
10081,post,1,t35hrq,getting ads from,"[dat.its-up.com](https://dat.its-up.com)

[syndication.realsrv.com](https://syndication.realsrv.com)

servedby.revive-adserver.net 

any way to block them?",pihole,1646018287.0
10082,comment,2,hyqd64m,,"web admin portal -> query log -> blacklist button beside domains  


web admin portal -> blacklist -> input domains there and block",pihole,1646018405.0
10083,comment,1,hyr3tsj,,"this list contains the domains

[https://raw.githubusercontent.com/miriquidi/dns-block-lists/main/block.txt](https://raw.githubusercontent.com/miriquidi/dns-block-lists/main/block.txt)",pihole,1646033799.0
10084,comment,1,hyqjlfj,,ok i had my router pull up now its down and seem to be working right.  thanks,pihole,1646021508.0
10085,comment,1,hyqhkd3,,ok it's showing only my router as the domain in pi-hole,pihole,1646020492.0
10086,post,40,t359nz,Can't get to web GUI,"I have phile running the latest firmware.  I recently installed LibeNMS on the same pi.  Now, when I go to the address of the pi at 192.168.1.x/admin I can no longer reach the pihole GUI.  It re-directs to a LibreNMS not found webpage.  How do I get access back to my pihole service?",pihole,1646017576.0
10087,comment,6,hyqbi39,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1646017627.0
10088,comment,6,hyr2q5e,,"edit     /etc/lighttpd/lighttpd.conf  
change     ""server.port = 80""  to something else. 808 or 8080 for example  
systemctl restart lighttpd  


I need to do this after every update because I have another service running on port 80.",pihole,1646033022.0
10089,comment,4,hyqtr3i,,"Id look into changing the port of LibeNMS or Pihole

That will lead you to documentation on how to configure the port for each app",pihole,1646027091.0
10090,comment,1,hystjad,,Solved!  Thanks everyone.,pihole,1646068762.0
10091,comment,2,hyqf1ck,,"&#x200B;

https://tricorder.pi-hole.net/uYlNUF72/",pihole,1646019282.0
10092,comment,2,hysrjmk,,"Thanks for your help!

Just a followup for new people like me, if you're useing the IP address x.x.x.x/admin page, you'll need to change it to x.x.x.x:port number/admin.  So for me, it was 192.168.1.x:8080/admin.",pihole,1646067985.0
10093,comment,2,hyqhm3x,,I also tried running the repair option from the CLI since I saw a few things that maybe were suspect.  This is the result: [https://tricorder.pi-hole.net/yDJGY01v/](https://tricorder.pi-hole.net/yDJGY01v/),pihole,1646020516.0
10094,comment,20,hyqsgzu,,"    [✗] tcp:*:80 is in use by apache2 (https://docs.pi-hole.net/main/prerequisites/#ports)

You have Apache2 running on port 80.  Either stop Apache or move lighttpd or Apache to another port to remove the conflict.",pihole,1646026324.0
10095,comment,1,hysr6zg,,"Ah, thanks, that works!",pihole,1646067853.0
10096,post,2,t34z1y,How do I force my pihole to read setupvars?,"Maybe, I am missing something but I've rebooted, reloaded, restarted, flushed, and whatever and for the life of me I can't get it to recognize the current settings of the cache size. (I set it to 100,000 to see what it did, then rolled it back to 10,000) It doesn't care what I make the setting in the conf file, it just ignores the changes. Any help would be greatly appreciated!",pihole,1646016650.0
10097,comment,1,hyqbjc7,,"    pihole -r 

Repair

Then it would read the vars again.",pihole,1646017643.0
10098,comment,1,hyq9qm9,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1646016818.0
10099,comment,1,hyqdcxq,,"TY, I didn't realize this was necessary.",pihole,1646018492.0
10100,comment,0,hyqsn4k,,[deleted],pihole,1646026423.0
10101,comment,1,hyqkcah,,:) did that solved the issue?,pihole,1646021892.0
10102,comment,1,hyqot0n,,It's not.,pihole,1646024261.0
10103,comment,1,hysllyx,,"But I have a question then, doesnt restart the computer (or the pi) restart FTL? Then why wont FTL read the vars again?",pihole,1646065694.0
10104,comment,0,hyqt67d,,O really? But the comment said this solved the issue. I thought I read some info saying you need to use the repair function to reload the setup vars. I used the same method to edit the cache size.,pihole,1646026738.0
10105,comment,1,hyqumea,,"Yeah, all good now back to 10,000 which is what I wanted it to be. :D",pihole,1646027623.0
10106,comment,2,hyqukd6,,"It didn't work until it was done, lol.",pihole,1646027588.0
10107,comment,1,hysj1br,,"To be fair, I had read the exact tip somewhere and would've given the same recommendation. Happy to learn that a simple restart will work, so you accidentally helped two people today.",pihole,1646064677.0
10108,comment,1,hz25xr9,,"You are correct and my comment was in error.  This should remind me to not respond to posts on a mobile device; I misread the problem.

It does require a repair to read the setupVars.conf file.  I'm not on my regular computer and can't look up our code right now, but it's in there somewhere.",pihole,1646235442.0
10109,comment,1,hytplpw,,"Restarts, reloading everything, and whatnot did not work. Only the ""do nothing"" repair. (Just ran it with no reconfiguration.) This is after I had updated the pihole previously as well... As in, it had to have reloaded the FTL in the process as that was the part that was being updated. Mind you, I had not changed this configuration recently either and had left it at 10,000 entries and it had registered previously the change. I changed it about a month ago, tested it, it wasn't working well, and I changed it back. Then I went into the web interface and changed it back. It just randomly decided it was warping back in time to the old value despite that not being even what was in the setupvars.conf file. So, either way it is resolved, but there seems to be a lot of misinformation here. I know what it was supposed to be doing, it just decided it wasn't doing it! :D",pihole,1646081058.0
10110,post,0,t2rtt4,Pihole performance??,"Is there a document describing how pihole works?  I am considering one, but I am concerned that the pi will be a bottleneck.  

Any comments regarding performance?",pihole,1645979316.0
10111,comment,6,hynzyvd,,">Is there a document describing how pihole works?

[https://docs.pi-hole.net](https://docs.pi-hole.net)

>I am considering one, but I am concerned that the pi will be a bottleneck.

Only your DNS traffic goes to Pi-hole/Pi.  The data traffic is unaffected.  Even the most lightweight Pi will easily run Pi-hole with no adverse impact on your data traffic.",pihole,1645982638.0
10112,comment,2,hynwrf3,,"It’s DNS, very little power needed.  Will definitely not be a bottleneck",pihole,1645981397.0
10113,comment,4,hynvb1s,,"Slow proformance, lol. Your internet connection is going to be slower then what your pi can process for DNS inquiries.",pihole,1645980826.0
10114,comment,2,hyntvc9,,"I have no experience doing this personally, but I know of school IT admins that run pihole on their entire network. A rasberry pi can handled millions of queries per day with no performance issue. The web GUI will be slow and terrible, and you can’t enable any kind of splash page at that volume, but by default the pi will handle a shit ton of traffic.",pihole,1645980263.0
10115,comment,1,hynwxux,,Pi zero good enough?,pihole,1645981468.0
10116,comment,1,hyqg6a5,,Performance? it's a DNS server.,pihole,1646019821.0
10117,comment,3,hynyleq,,"Completely fine, as long as you don't throw 100k queries per minute at it, which won't happen at any normal circumstances. DNS is not ""normal"" traffic so to speak. It's just a tiny fraction of it. Pihole doesn't route all traffic through it. Only DNS, which isnt really performance intensive.",pihole,1645982111.0
10118,comment,1,hyo01pe,,A Pi Zero is a popular choice.  This will easily handle a home network.,pihole,1645982669.0
10119,comment,2,hyo03yk,,">as long as you don't throw 100k queries per minute at it

Which would trigger rate limits.",pihole,1645982693.0
10120,comment,1,hyo0cna,,"Didn't know that. Thanks alot!

Out if curiosity: Is there a way to disable the rate limit, or increase it at least if you have something like a really big network with thousands of people?",pihole,1645982786.0
10121,comment,1,hyo5mpq,,"Yes, just remember the a Pi4 won't do a 1,000 queries per second.  I tested it and posted in this forum about the testing.

A Pi3 does not stress on 500k queries per day.",pihole,1645984795.0
10122,comment,1,hyob99r,,https://docs.pi-hole.net/ftldns/configfile/#rate_limit,pihole,1645986967.0
10123,post,1,t2qobq,Homekit Install Error: Operation not permitted /usr/bin/pihole-FTL,,pihole,1645976040.0
10124,comment,2,hynko80,,Did you run it with sudo?,pihole,1645976564.0
10125,comment,1,hynm70s,,Crosspost:  https://discourse.pi-hole.net/t/error-while-installing-with-homebridge/53929,pihole,1645977189.0
10126,comment,1,hys0lz4,,"I ran into errors with the pihole-FTL when bind9 and apache2 were still running on my machine due to the ports they were using are the same pihole is gonna use.

As I didn't need these services I just deactivated them via

~~~
sudo systemctl service stop {apache2/bind9}
~~~

If you need to run these anyway or the FTL is still not working after these steps just watch out which services are still running on the pihole ports (e. g. 80 or 53) with the following:

~~~
sudo lsof -i -P -n | grep LISTEN
~~~

You either need to find new ports for these services or get pihole to use different ones.

Cheers",pihole,1646056667.0
10127,comment,0,hyo87np,,you need permission. either run it as root or with sudo,pihole,1645985784.0
10128,comment,1,hz4yelq,,damn. also I was running it out of the terminal in Homebridge. brain fart. have a silver.,pihole,1646277932.0
10129,post,45,t2o4f6,Run pihole on cellular raspberry setup to reduce bandwidth usage,"Hi,

I am putting the parts necessary to build out this Raspberry Pi remote cellular router/access point:

[https://www.reddit.com/r/linux/comments/sbb8n7/my\_amazing\_ultra\_portable\_low\_power\_consumption/](https://www.reddit.com/r/linux/comments/sbb8n7/my_amazing_ultra_portable_low_power_consumption/)

Does anyone have any idea if pihole can run on this concurrently? I realize this is not a typical set up because there is no per se router involved here and I am not 100% the Raspberry is acting as one here.

I think adding pihole to the same machine would be awesome because it would reduce cellular bandwidth used by limit ads. I am just not that savvy in networking unfortunately.

any thoughts?

thanks

mv",pihole,1645968156.0
10130,comment,32,hynff9a,,[deleted],pihole,1645974320.0
10131,comment,9,hyn3ok2,,"That setup is running dnsmasq, which will conflict with pihole-FTL. When you install Pi-hole you will need to remove dnsmasq.",pihole,1645968462.0
10132,comment,5,hyn7ztr,,Thank you.,pihole,1645970784.0
10133,comment,1,hyqbzg7,,That's what I do.,pihole,1646017850.0
10134,comment,1,hyrge1h,,"Stupid question, but what devices will use this Pihole?  

If it's a computer-like device (smartphone, computer), you can also setup a VPN-Pihole in the cloud. It can be useful as a backup plan. ;)  



>there is no per se router involved here and I am not 100% the Raspberry is acting as one here.  

At a technical level, Pihole doesn't require a router to function. *The other clients* usually do in order to reach it as the default.  

There are a few ways to ""teach"" the device to use Pihole, each of them having a few downsides :  

- If Pihole is on the same LAN  
1 DHCP settings *won't work on devices with hardcoded resolvers*  
a) Take your actual DHCP server, usually bundled in the router, and sets Pihole as the resolver *doesn't work if the DHCP has hardcoded settings*  
b) Turn off the actual DHCP server, turn on the one bundled inside Pihole. *doesn't work if you need the other DHCP server for some reason* (A variant is to setup both DHCPs to serve two groups of devices)  

2 Router blocking  
In an actual router, redirect the DNS port to Pihole's IP, block the DoT port and known DoH addresses *won't work if the router doesn't provide outbound mapping+firewall*  

3 Client-side config  
Set manually the DNS resolver in the client's setting *doesn't work if you don't have enough rights on the device + cubersome*  

- If Pihole is on a seperate network  
4 VPN tunnel  
Setup Pihole as a VPN server, install a VPN client on the devices *requires even more rights than option 3*",pihole,1646043622.0
10135,comment,1,hyynutu,,"Laptops, tablets.",pihole,1646169371.0
10136,comment,0,hypj2bv,,HUEEE back from the other post!. I actually use a 4G net at home without limits and Pihole has reduced a lot of the traffic (around 400k blocked domains). It should work fine,pihole,1646004659.0
10137,comment,4,hynocw3,,That would be the sole purpose as a backup and/or camping hotspot.,pihole,1645978073.0
10138,comment,1,hyqceu4,,"Does the installer not notice it's there and offer to remove it? Haven't tried, asking for a friend",pihole,1646018046.0
10139,comment,1,hyqs8hj,,It does not.,pihole,1646026188.0
10140,post,1,t2ngmj,Block a country domain? (block every website from a country),"Hi all!  
Is there any way to block every website from a specific country?   
for example websites ends with "".ir"", is it possible to block it?   
Thanks!",pihole,1645965833.0
10141,comment,3,hyn244l,,"Go to ""Blacklist Management"", add the domain you want, check the option ""Add domain as wildcard"", and finally confirm with ""Add to Blacklist"".

See here: [https://imgur.com/a/WBHufyZ](https://imgur.com/a/WBHufyZ)",pihole,1645967543.0
10142,comment,1,hyn17vt,,"In theory yes, with regex blacklisting this shouldn't be an issue",pihole,1645967002.0
10143,comment,1,hyn1ceh,,What you want is called a regex.,pihole,1645967079.0
10144,comment,-1,hyrbb1u,,What top level domain deserves to be blocked permanently?,pihole,1646039504.0
10145,post,2,t2migg,Android sometimes bypassing the PiHole,"SOLVED see below  


I have for reasons got twitter blocked. Noticed on the mobile it is still accessible. Now I have DNS hijack on the router so hard coded DNS is captured, turned off private DNS in the settings and disabled it on the browser too. What is odd for me so I guess I am missing something obvious. If I open a termux window and do a nslookup then sure enough my router catches that, however, if I ping [twitter.com](https://twitter.com) the ping goes through and I can still open the webpage or links to threads.

On PCs it is blocked as expected. Any thoughts?",pihole,1645962223.0
10146,comment,2,hyn13f1,,"I assume it’s a mobile device? What about the possibility that it picks up the DNS for Twitter while it’s over cellular, caches it, and then uses that cache while on wifi?

You’d have to clear the cache on the device and find a way to keep it from recaching once it goes to cellular.",pihole,1645966925.0
10147,comment,1,hyn4s3r,,"When it comes to mobile devices and PiHole, you haver to remember that PiHole only works within YOUR network. So if you have your WiFi on AND your cell data on, your device will pull from both connections. In order for your mobile device to use PiHole exclusivly, you will havre to turn off your cell data connection.",pihole,1645969080.0
10148,comment,1,hyniw80,,"I'm having a similar problem but not just with my phones but also PCs and tablets. I blocked porn sites and sometimes browsers get blocked and sometimes they don't, but every time I run nslookup, I get the expected 0.0.0.0 as the result.",pihole,1645975821.0
10149,comment,1,hyp5jpp,,"When you look at your Wi-Fi settings on your mobile do you see both DNS 1 and 2? If so, what is set in DNS2?",pihole,1645998974.0
10150,comment,1,hyte6qw,,Check to see if Private DNS is enabled on the Android device. This uses DNS over TLS (DoT) which bypasses Pi-Hole. Easy way to prevent this is to block port 853.,pihole,1646076628.0
10151,comment,1,hyztn8j,,"Here's an update.
Ran tcpdump on the router and same commands immediately before the ping command there's a mdns request

```
Frame 4: 136 bytes on wire (1088 bits), 136 bytes captured (1088 bits)
Ethernet II, Src: Mob (xx:xx:xx:xx:xx:xx), Dst: IPv4mcast_fb (01:00:5e:00:00:fb)
    Destination: IPv4mcast_fb (01:00:5e:00:00:fb)
    Source: Mob (xx:xx:xx:xx:xx:xx
    Type: IPv4 (0x0800)
Internet Protocol Version 4, Src: Mob (192.168.5.40), Dst: 224.0.0.251 (224.0.0.251)
    0100 .... = Version: 4
    .... 0101 = Header Length: 20 bytes (5)
    Differentiated Services Field: 0x00 (DSCP: CS0, ECN: Not-ECT)
    Total Length: 122
    Identification: 0x2c56 (11350)
    Flags: 0x4000, Don't fragment
    Fragment offset: 0
    Time to live: 255
    Protocol: UDP (17)
    Header checksum: 0x6750 [validation disabled]
    [Header checksum status: Unverified]
    Source: Mob (192.168.5.40)
    Destination: 224.0.0.251 (224.0.0.251)
User Datagram Protocol, Src Port: mdns (5353), Dst Port: mdns (5353)
Multicast Domain Name System (query)
```
went through the steps of blocking it on the router by hijacking it to the Pi, tested with another blocked domain and that works but can still ping twitter <puzzled>",pihole,1646186962.0
10152,comment,1,hypeghr,,"This is when I've been home hours and following a restart, I can see from doing a nslook up that the Pi is queried but a ping and open the web page is working. To be clear Twitter isn't the issue it is that there's an alternative for the mobile and as far as I can see I have those disabled or hijacked at the router.",pihole,1646002682.0
10153,comment,1,hynafv1,,">In order for your mobile device to use PiHole exclusivly, you will havre to turn off your cell data connection.

No.

The option to use both radios simultaneously is a [developer option](https://imgur.com/a/tESHBel) (very occasionally exposed as an advanced option), one I'm pretty willing to bet the vast majority of users will never enable.

Note: I have specifically enabled this (and the others you see) myself. It's not a default.",pihole,1645972016.0
10154,comment,1,hypeilg,,"It's is literally open a command window nslookup response is from the PiHole, ping 2 seconds later and it goes to site. Mobile is less than a metre from the router. Options to revert to data are disabled.",pihole,1646002708.0
10155,comment,1,hype1nd,,There's only the DNS provided by my router's DHCP and that's the Pi,pihole,1646002507.0
10156,comment,1,hyujfqz,,853 is blocked already. Private DNS is off and in the browser too. FWIW I've repeated with mobile data off to preclude that as a bypass method. Next step I guess is wireshark on the router that'll be a job for a day everyone else is out if I break the connection people get grumpy.,pihole,1646093499.0
10157,comment,1,hz9pc3r,,"Unsurprisingly the issue was PICNIC.  


At some point in the past I'd put the mobile into a separate group to whitelist some domains without which Fitbit would not work. That's only visible when looking at the lists under groups rather than as white/black list. Adding a new blacklist regex automatically adds to the default but not to the mobile unless you use the groups tab.  


Eventually setting up a separate WiFi just for the mobile on the router and then running wireshark showed me it was the PiHole responding to the DNS request for the ping. Unsure why that went through but the nslookup failed. Thought I'd make a post so that it may with a bit of searching stop someone else descending the same rabbit hole.",pihole,1646362896.0
10158,comment,1,hync7qg,,"And by enabling this option, the cell radio cancels out as long as the WiFi signal is connected AND STRONG ENOUGH. Not much different than what I posted other than mine is manual and this is automatic. Also, some provider cell phones cannot access developer options without being rooted.",pihole,1645972869.0
10159,comment,1,hysjn5z,,"Hmmmm... I remember that on some devices, an empty DNS2 is sometimes treated as ""use a system-hardcoded resolver as secondary""
*Maybe* your phone interprets the DHCP-provided config as ""use Pihole most of the time, and sometimes Google DNS""",pihole,1646064919.0
10160,comment,1,hyut82n,,Browser's secure DNS off? That uses DoH,pihole,1646098141.0
10161,comment,1,hynd8pr,,">And by enabling this option, the cell radio cancels out as long as the WiFi signal is connected AND STRONG ENOUGH.

No. That's a totally different option in advanced wireless settings, `switch to mobile data`. Having both radios enabled simultaneously just allows for faster switching between the two.

Because like you've correctly pointed out, despite your initial assertion, even with both radios active only one is ever actually in use at any given time.",pihole,1645973346.0
10162,comment,1,hyujng4,,"I have normal DNS hijacked, I can see that's working if I do a nslookup that request [8.8.8.8](https://8.8.8.8) but gets the response from the Pi but ping work, I am going to need to monitor the router's LAN port.",pihole,1646093600.0
10163,comment,1,hz61nf2,,"Yes but in this instance it is immaterial, this is a command window that's open. I've turned on the Pi's WiFi so I can put the mobile on that and then capture a trace, out of interest.",pihole,1646303852.0
10164,post,3,t2lf0b,After updating and giving me a NaN,"Hello,

I'm new to this channel. Can someone assist me with the NAN after the update? I'm still new to the coding side.  I looked around and only a few post but didnt help me to resolve the issue 

token [https://tricorder.pi-hole.net/4cu4pdgW/](https://tricorder.pi-hole.net/4cu4pdgW/)

&#x200B;

https://preview.redd.it/lasotar0rck81.png?width=579&format=png&auto=webp&s=f21588035c9fa7cd0aba03c8a09102599c7dd828

https://preview.redd.it/zjecft5arck81.png?width=973&format=png&auto=webp&s=d1acd35029503844894c74342a69003014a6b11a",pihole,1645957538.0
10165,comment,1,hymsnuc,,"Output of the following command(s)?

    sudo netstat -tulpn | grep LISTEN",pihole,1645960874.0
10166,comment,0,hymtbhn,,"nvm, i solved it somehow. it was something about the FTL",pihole,1645961395.0
10167,comment,3,hyn48z5,,">	it was something about the FTL

Please be more specific. Another process was running on port 53. What was it?",pihole,1645968785.0
10168,comment,3,hyosr7w,,"i hate these kinds of ""answers""",pihole,1645993833.0
10169,post,1,t2jvuq,Help requst for sql commands,"## [solved] see edit 4

I forgot when, but I remember the following commands used to work for deleting FTL database entry.

    sqlite3 pihole-FTL.db ""delete from queries where domain like 'example.com';""

But now they dont work:

    Error: cannot modify queries because it is a view

I have stopped FTL before that.

Did the syntax changed? Or better, how should I remove domain ""example.com"" from queries? 

https://discourse.pi-hole.net/t/can-i-remove-a-specific-domain-from-the-logs/29384/6

Edit: looking into https://discourse.pi-hole.net/t/delete-queries-error/53761/2

Edit2: problem solved (actually not, see Edit3). According to the [link in Edit](https://discourse.pi-hole.net/t/delete-queries-error/53761/2), the syntax did change. Now you need to use `query_storage` instead of `queries`. For example:

    sqlite3 pihole-FTL.db ""delete from query_storage where domain like 'example.com';""

Edit3: but the domains arent removed from the queries table. How to force the queries table to regenerate again?

Edit4: the command is not correct. Use this instead.

    sudo sqlite3 /etc/pihole/pihole-FTL.db ""delete from query_storage where domain in (select id from domain_by_id where domain like '$1');""

For example, 

    sudo sqlite3 /etc/pihole/pihole-FTL.db ""delete from query_storage where domain in (select id from domain_by_id where domain like 'example.com');""

Or you could use wildcards:

    sudo sqlite3 /etc/pihole/pihole-FTL.db ""delete from query_storage where domain in (select id from domain_by_id where domain like 'example%');""

Edit5: changed the commands in Edit4 to use sudo and absolute path.",pihole,1645951346.0
10170,comment,1,hymkoke,,">Error: cannot modify queries because it is a view 

I've been meaning to look into this myself. I'm seeing the same error, in a slightly different situation. The same error pops up when `pihole flush` is issued from the command line, but it appears to just be cosmetic in my case as logs are actually flushed. I don't use the long term database at all.",pihole,1645954553.0
10171,comment,1,hyqseob,,"I keep getting 'Error: no such table: query_storage' when I try to run the command in you fourth edit.

I'm running Pi-hole v5.9, AdminLTE v5.11, and FTL v5.14.

Any ideas? I'm trying to purge a domain entry.",pihole,1646026287.0
10172,comment,1,hyqtanq,,Did you cd in /etc/pihole? Thats part of my script and I have already cd into the /etc/pihole. You may need sudo for that.,pihole,1646026813.0
10173,comment,1,hyqtv8b,,"If you are trying to purge a domain entry you may want to have a look at https://github.com/SodaWithoutSparkles/Rm-Pihole-querry 

Read the README first - most importantly this part:

>The devs suggest not using it because it would permantly remove some stats that _might_ be useful for debugging. Check out [this reddit post](https://www.reddit.com/r/pihole/comments/kacbjl/a_simple_script_to_remove_unwanted_queries_from/) where I post this repo to r/pihole

The commands in this post are part of this script.",pihole,1646027159.0
10174,comment,1,hyqu25t,,"Ah, thank you for the assist!",pihole,1646027278.0
10175,post,0,t2j8dm,installed Pi-Hole on my Synology DS420+ and it's soooooo slooooooow,"Hi guys

just installed pihole (firs time user) to my DS420+ with  DSM 7.0.1-42218  through Docker.

I followed a pretty straight forward tutorial online and i just let Pihole use Synology's network (didnt go thru MVLAN stuff)

&#x200B;

&#x200B;

https://preview.redd.it/c2q1u0ikzbk81.png?width=664&format=png&auto=webp&s=f1a685203d3ad7b5633c95a5fa5047bbaab626b2

&#x200B;

&#x200B;

Fired it up and all seems working

&#x200B;

https://preview.redd.it/pwi14798zbk81.png?width=965&format=png&auto=webp&s=21c6781c5bdd79a14759708e363180537aad2552

&#x200B;

I go to the web UI and the page takes minutes to load before I see the pihole dashboard. I tried to login, refresh, etc. It seems that every page load takes over a minute to load and display. It doesn't time out or anything, the tab just loads forever until it finally decides to display content.

I've tried rebooting everything and different browsers as well.

&#x200B;

On firebug it shows that it took 1.6minutes for the main html page to load (/admin)  


https://preview.redd.it/adhf7uns0ck81.png?width=1005&format=png&auto=webp&s=57945408089c34fdade0eb5079d3cd6949c551bc

&#x200B;

When i try to login, the index.php?login page takes almost a minute to load.",pihole,1645948696.0
10176,comment,2,hymfvqu,,Can you link to the tutorial you used?,pihole,1645950877.0
10177,comment,0,hymr0zz,,"Your NAS has barely enough power to offer filesharing capabilities. Running docker on it is the least thing you should do. (I own a 420 as well, it sucks hard)",pihole,1645959576.0
10178,comment,-8,hymrjzq,,I didn't save the link and can't recall now but just google and you'll find a lot of articles and tutorials easy.,pihole,1645959992.0
10179,comment,-2,hymrhin,,on the contrary i finally got it to work. it's quite snappy actually and there's still plenty of headroom (CPU/RAM). I think you may have lots of synology apps running on your NaS to have docker. I dont have much running on the NAS so i figured i could make use of some excess resources.,pihole,1645959939.0
10180,comment,9,hymubud,,"I was asking for the specific tutorial that you followed, in case there is a clue in it to what has gone wrong.  There are indeed many tutorials on the Internet, and they're not all good, or up to date.",pihole,1645962178.0
10181,comment,4,hyn3zsi,,">	i finally got it to work

If this is Pi-hole to which you refer, what did you do to get it to work?",pihole,1645968641.0
10182,comment,2,hyq7nf3,,"I think imade a mistake on my router setting by changing the DNS of the WAN to point Pihole, which is wrong... So i reverted that and instead set LAN->DHCP->DNS settings to point to pihole.  


Then rebooted everything again and now it's super snappy.. barely making a dent in Synology resources.",pihole,1646015854.0
10183,post,3,t2hc6l,Pihole interfering with Android screen-casting to a Roku-enabled TV?,"Unfortunately I've made a few changes around my network and mobile devices lately, so I can't swear the last time this worked..

Ive got a \~1-2 year old Roku-enabled TV by TCL and a couple current/new Android devices here. As recently as a couple months ago I used my previous Android phone to screen mirror to my TV without any drama.

Since then, I installed a new Unraid server and am running Pihole as a docker, and upgraded a couple phones in the house to new Androids.

With those being all the changes I can think of for my home network/devices, I tried to Cast to my TV from both phones and neither device can see find the roku.

Im exploring pihole a bit at the moment to see if I can find any info from its logs, but has anyone else run into this and have a fix / work around?

thanks..",pihole,1645941301.0
10184,comment,1,hym3kn4,,"Interesting. I have a Samsung TV and a Shield Pro that I used to be able to cast to from my phone; sometime in the past two years or so, the Shield casting stopped working, and the TV is spotty. I never considered my pi-hole could be the culprit, but I'm intrigued by this thinking.",pihole,1645942285.0
10185,comment,1,hym7i06,,"Given a pihole is ‘just a dns server that blocks’ remove it from the dns settings on the devices. 

Test. If it works then you can debug why it is in the way of local discovery which I would guess is via broadcast on the same segment. There is a possibility the devices are using an outside service to find the cast targets but personally I’d be surprised. 

Pihole is easy enough to enable/disable that it shouldn’t be bad to quickly establish if it is part of the problem or not.",pihole,1645944850.0
10186,comment,1,hym5fhj,,"Im a complete newb to pihole.. 

Ive tried watching the live log updates as I tell my phone to Cast to TV and I get nothing exciting.. 1 query to a roku log.. tried whitelisting it and then Casting again and it didnt seem to make a difference when it was successfully resolved.. will continue to dig.",pihole,1645943475.0
10187,post,521,t279ao,"Added a 7"" touchscreen to my pi-hole",,pihole,1645910057.0
10188,comment,14,hylf8bz,,"Hahaha, nice to see I'm not the only one to use IKEA to [mount my network stuff to](https://i.imgur.com/0q6xFI0.png).

It's held up very well over the years, despite changing, adding, moving and strapping a decent amount of weight on there. 

I didn't dare strap the NAS to it though. haha",pihole,1645929216.0
10189,comment,9,hykfmim,,What screen is it?,pihole,1645913174.0
10190,comment,6,hyl27az,,I need to get into the pihole life,pihole,1645923123.0
10191,comment,6,hykb8eg,,Ikea SKADIS?,pihole,1645911313.0
10192,comment,7,hykj9ie,,Is that router the R7900 or R8000?,pihole,1645914733.0
10193,comment,54,hykc46y,,[deleted],pihole,1645911688.0
10194,comment,5,hykpw0r,,What are you using to output the video to the screen? It doesn't look like just a full screen browser but I could be wrong. I like this better than a screen as a hat.,pihole,1645917586.0
10195,comment,4,hyli4s0,,I need a Set up like this 😫,pihole,1645930627.0
10196,comment,3,hykmxq3,,What have you got everything attached to on the wall? Is it specifically for mounting equipment etc.?,pihole,1645916304.0
10197,comment,3,hym5jix,,Look at PADD if you’ve not already.,pihole,1645943550.0
10198,comment,3,hyuxvg2,,I’ll add 7” to your pi-hole,pihole,1646100286.0
10199,comment,2,hylq8n6,,Next item would be a UPS?,pihole,1645934758.0
10200,comment,2,hym3fgy,,What’s that keyboard,pihole,1645942194.0
10201,comment,5,hyl0ciy,,"Pihole is so insanely useful. Currently 22% of my network traffic is being block because its ad related, like my god!",pihole,1645922284.0
10202,comment,2,hylstqu,,"Is this providing any sort of function or just to look cool?  I run pihole on a Ubuntu VM inside an ESX cluster, rarely even look at it.  Just curious.",pihole,1645936139.0
10203,comment,1,hykjfwt,,Looks sexy AF,pihole,1645914810.0
10204,comment,1,hymhu5j,,"I kinda like the pegboard idea, I think I could get it looking very tidy with some cable trunking added",pihole,1645952372.0
10205,comment,1,hymk8z7,,ooh yeah touch that dirty little pi hole.,pihole,1645954222.0
10206,comment,1,hymoegn,,"How does the screen affect temperature,  is it running noticeably hotter?",pihole,1645957469.0
10207,comment,1,hyn777j,,Dumb question but what do you need to type on a dedicated PiHole box?,pihole,1645970376.0
10208,comment,1,hyn7cml,,"Can you explain what your setup in the image do. 
I’m interested in networking stuff and looking for ideas to make.",pihole,1645970454.0
10209,comment,1,hynszd9,,"Your antenna orientation is wrong, are you covering your upstairs from there?",pihole,1645979915.0
10210,comment,-4,hymzzdj,,r/cablegore,pihole,1645966219.0
10211,comment,19,hykfz06,,"I'd guess it's this one, looking at the design - 
 https://thepihut.com/products/7-ips-capacitive-hdmi-touch-screen-lcd-1024x600?variant=32229005754430&currency=GBP&utm_medium=product_sync&utm_source=google&utm_content=sag_organic&utm_campaign=sag_organic",pihole,1645913329.0
10212,comment,3,hykkosw,,You got it.,pihole,1645915341.0
10213,comment,5,hykks7x,,R8000,pihole,1645915383.0
10214,comment,7,hyl147u,,Ayyy-ooo,pihole,1645922633.0
10215,comment,3,hyks1a6,,It's just a full screen browser,pihole,1645918535.0
10216,comment,3,hykpjuq,,"IKEA SKADIS Pegboard, White 30x22",pihole,1645917437.0
10217,comment,2,hyv1k4q,,ZING!,pihole,1646101981.0
10218,comment,2,hyo6ggd,,If you don’t need it to fold you can get a Logitech K400 for 20USD on sale often!,pihole,1645985103.0
10219,comment,1,hymo8e7,,"Folding Keyboard, iClever BK08 Bluetooth Keyboard with Sensitive Touchpad (Sync Up to 3 Devices) https://www.amazon.com/dp/B07ZRNJ4DX/ref=cm_sw_r_apan_glt_i_C04RSZKMWKEN94XF7HAC?_encoding=UTF8&psc=1",pihole,1645957334.0
10220,comment,29,hyl14fv,,">	22% of my network traffic is being block

22% of your DNS requests are being blocked. This does not directly translate into a similar reduction in traffic volume.",pihole,1645922635.0
10221,comment,1,hyntexx,,It's really just for fun. I usually just use vnc to get at the pi. It has been handy to log into the router and pi hole while setting up.,pihole,1645980084.0
10222,comment,1,hykl76t,,"Thank you, I need to get a couple shorter cables to feel less home network conscious about it all.",pihole,1645915560.0
10223,comment,1,hyn8e7e,,"Not much, usually just remote in for updates.",pihole,1645970990.0
10224,comment,2,hyncl9p,,Router with pi hole > switch > patch panel that runs to cat6 outlets throughout the house,pihole,1645973041.0
10225,comment,1,hynuypp,,"Yes, covers main floor and exterior cameras on 4 sides of the house and garage. The center 2 antenna do not rotate and the bottom 2 are only adjustable down. I can fold them in.",pihole,1645980691.0
10226,comment,2,hyn15gx,,"There, I fixed it.
https://imgur.com/gallery/TBcwoYg",pihole,1645966962.0
10227,comment,10,hykkr49,,This is the one.,pihole,1645915370.0
10228,comment,6,hykl0tl,,They make for reasonable VPN routers. I used to sell them.,pihole,1645915486.0
10229,comment,2,hymg1no,,"Not a knock on yr setup OP or Pihole, I ran one for years. But, after finally diching my R7300DST(dumb BestBuy only, Netgear model with powerline adapter, but no custom firmware). I went with an ASUS and the Asus-Merlin firmware runs Diversion(a much less-cool DNS ad blocker), Unbound and a number of other handy scripts directly on the router. But that screen would be great for a jukebox with my Allo/Pi music streamer.",pihole,1645951002.0
10230,comment,6,hyl1vpq,,"Correct, its just requests, sorry. Still insane…",pihole,1645922980.0
10231,comment,0,hyneox0,,"Gotcha. I use ssh or VNC for this, depending on what I'm doing, and it works great but obviously everyone's setup and needs are different.",pihole,1645973999.0
10232,comment,1,hyo3olh,,Thanks,pihole,1645984067.0
10233,comment,1,hynv9ds,,"Ahh gotcha makes sense, you should look at going ubnt being you have Ethernet through out the house. If it works though don’t touch it",pihole,1645980808.0
10234,post,2,t25iu1,do i need to portforward to use unbound with pihole ?,"Hi.
I have a home network setup with pfsense firewall/router -> switch for all units.
I do also have an small raspberry pi 4 in the switch with pihole for the units the dont need strigent blocking via mu pfblockerNG/firewall setup. ( wifes mobile, kids shield playstuff,  etc etc)
But I can t get unbound to answer any of the DNS requests from those units. CNAME/IP/NONAME & N/A are some of the answers unbound 127.0.0.1#5335 gives me..

so! i have tried alot of different approaches towards this, ubuntu server,raspberry os, dietpi, differentpihole configs, recolver conf etc etc.. and im stuck and feed up!

can I just solve this by using another recursive resolver alike unbound ? 
in case which can do this ??

dnscrypt 
Bind
powerDNS..

or do i only need to portforward port 5335 from my ""master"" router to the pihole unit",pihole,1645905201.0
10235,comment,3,hyjyq6v,,">do i need to portforward to use unbound with pihole ?

No.  If you install unbound on the same device as Pi-hole, you link Pi-hole and unbound on the loopback IP ([127.0.0.1](https://127.0.0.1)).  Traffic between Pi-hole and unbound is internal to the device.  No port forwarding required.

client > Pi-hole > unbound

https://docs.pi-hole.net/guides/dns/unbound/",pihole,1645906011.0
10236,comment,1,hym8xo7,,Maybe you can look here https://www.reddit.com/r/pihole/comments/rnoyw0/dns_shows_ips_other_than_my_own_with_unbound/?utm_source=share&utm_medium=ios_app&utm_name=iossmf,pihole,1645945837.0
10237,comment,1,hywx9vp,,"solved it, thanks..

my pfsesne setup was the bottleneck, installed wireguard server/pihole directly connected to my modem, now it works..",pihole,1646144665.0
10238,comment,1,hym65t9,,"yes, but its here the problem exists.

I cant get unbound to run raspberry pi os, dietpi, ubuntu server etc.
the setup from exactly this page dont run on my unit. Unbound simply dont work.....
And I dont get it..

all i get is SERVFAIL ~25ms average..

I just cant find out what wrong with unbound, so im also asking for alternatives if anyone knows ?",pihole,1645943961.0
10239,comment,1,i0u78f2,,"So what firewall do you have now between your modem and wireguard server/pihole?

Also instead of installing unbound on your pi, just forward your requests back to pfsense and use dns resolver(unbound).",pihole,1647399690.0
10240,comment,1,hyn3ctj,,"Please post the output of the following command from the Pi terminal:

`sudo grep -v ‘#\|^$’ -R /etc/unbound/unbound.conf*`",pihole,1645968273.0
10241,comment,1,i1bdwl2,,"pfsense is unbound and dhcp.

pihole and other services are inferior.",pihole,1647718056.0
10242,comment,1,i1bk2pm,,So is pfsense your firewall now or is something else?  Did not answer the queston.,pihole,1647720765.0
10243,comment,1,i1opzgx,,"yesm is has always been,",pihole,1647970284.0
10244,post,1,t25f0n,Having trouble setting up Local DNS Records,"Hi,

I'm just starting out on networking, and right now my first step is to make my self-hosted services easier to access by giving them domains.

My server is running Proxmox and Pi-hole is installed with Docker inside an LXC container.

I have configured my routers DHCP server to use the static IP of the LXC Container where Pi-hole is installed as it's DNS server. I can see on Pi-hole that all my containers and other devices, ex Desktop, phone, and other things are using the correct DNS IP and only that one.

I have made a DNS record inside Pi-hole settings, router.home > [192.168.10.1](https://192.168.10.1) which is the normal address I access my routers gateway. Trying to access this through router.home just gives me ""Server Not Found"".

What have I missed?

&#x200B;

Sidenote, the router that's from my ISP prevents port forwarding port 443. Since I want to be able to access some of my services outside my own network with https. I should buy another router shouldn't I?",pihole,1645904904.0
10245,comment,1,hyoa6ty,,"Log into your PiHole and on the left menu go to ""Loacal DNS then DNS Records. At the top you add your domain that you want then the IP address. Let's say that you want to access your router by typing ""router.home"" - you would enter the DOMAIN as ""router.home.localdomain"" and in the next box the IP address ""109.168.xxx.xxx"". Just add the "".localdomain""  suffix to anything that you want to type to access like server1.localdomain or pi,hole.localdomain and you can access anything in your network.",pihole,1645986549.0
10246,comment,1,hyom00v,,"Isnt .home the same thing as .localdomain in this example?

I tried adding router.home.localdomain > gateway IP but still comes up as inaccessible.",pihole,1645991137.0
10247,post,0,t243m3,Pi-hole block Flightradar24 app. No planes with Pi-hole. No issue when use 5g cell network. What should I look into? Thanks,,pihole,1645901320.0
10248,comment,3,hyk6mhr,,Mine is working. I see it hits an Amazon Cloud host in Germany. Is that geo blocked on your FW or your pihole lists are overzealous?,pihole,1645909354.0
10249,comment,2,hyjoic4,,"I don't have this issue
Try whitelist
api.flightradar24.com
www.flightradar24.com
mobile.flightradar24.com
android.apis.google.com
s3.eu-central-1.amazonaws.com
data-cloud.flightradar24.com
csi.gstatic.com",pihole,1645901818.0
10250,comment,1,hyk6p8p,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1645909387.0
10251,comment,4,hylxf3d,,"Your comments led me to look at my Ubiquiti router’s geo block settings. I removed Germany. Problem fixed. 

Thank you",pihole,1645938624.0
10252,comment,1,hyjrkmv,,Thanks. I added them all to whitelist. No go. :(,pihole,1645903052.0
10253,comment,2,hym8apa,,That's awesome. Glad we could get to the bottom of it. It's a great app. I used it to monitor my wife's flight into Vancouver from prince George. It had left early but YVR still had it arriving at its usual time.,pihole,1645945395.0
10254,comment,1,hyjs2t4,,"Thanks. I added them all to whitelist. No go. :(

Same problem if I use safari",pihole,1645903254.0
10255,comment,1,hyjtw32,,Interesting I think that planeradar24 don't use more domain do you rebooted your phone or cleaned dns cache?,pihole,1645903995.0
10256,comment,1,hyjulj9,,"No issue before. Just started yesterday or so. I rebooted Pi-hole, router. 
Where to clean dns cache?

This? https://discourse.pi-hole.net/t/how-do-i-flush-my-pi-hole-cache/3020",pihole,1645904283.0
10257,comment,1,hyjw60i,,"I mean iPhone dns cache to remove it restart (reboot) iphone
You can also try to type pihole -g to re-create gravity 
If this does not work, I have no other ideas, sorry I could not help you",pihole,1645904932.0
10258,comment,1,hyjwvmu,,Thank you for all the suggestions.,pihole,1645905231.0
10259,post,1,t22mej,iPhone App Store not loading,"Recently the App Store on my iPhone no longer loads.  I use pi-hole with unbound on my network.  Pi-hole is also my dhcp server.   If I disable pi-hole for 5 min, it still will not load.   But if I use my guest network on my ASUS RT-AC88U it seems to work.  My understanding is that guest network bypasses pi-hole since it is on my lan.  

How can I fix this?  Are there things I can do to better understand what is causing it to not load?  Since disabling pi-hole doesn’t seem to fix it, it leads me to believe that it is not related to a block list.  

Thanks for your suggestions",pihole,1645897381.0
10260,comment,1,hyjiwc6,,">If I disable pi-hole for 5 min, it still will not load

When you disable Pi-hole, no blocking is applied to any clients (Pi-hole is just a pass-through to the upstream DNS server).  If the content will still not load, the problem is outside of Pi-hole.",pihole,1645899533.0
10261,comment,1,hyjltld,,"No blocking, but could it still be related to DNS or any other services Pi-hole provides?

It works on my guest network which I believe bypasses Pi-hole.  Maybe something else is also different on guest network but that is what led me to believe Pi-hole was somehow involved.",pihole,1645900721.0
10262,comment,1,hyjrbrw,,">could it still be related to DNS or any other services Pi-hole provides?

It could be related to your upstream DNS servers you are using for Pi-hole.  The replies will be shown in the query log.  If you are getting refused or blocked status in the query log, this is a problem with the upstream DNS server.  If the upstream server is returning a valid IP, then the problem likely lies elsewhere.",pihole,1645902955.0
10263,comment,1,hyjxa35,,I am using unbound.  I did also try switching back to google dns but that didn’t seem to fix it.  I will admit that I am not experienced with unbound.   Mostly default install also running on raspberry pi.,pihole,1645905401.0
10264,comment,1,hyjz5lc,,"Check the IP that unbound returns for the App store domain(s).  Since unbound isn't location aware, it may not be the correct IP for your region.

You can compare the returned IPs from unbound to returned IP's from any other upstream provider with a dig command - example:

`dig bag.itunes.apple.com @1.1.1.1`

Tailing the dnsmasq log with the following commands will show you the domains requested when you launch the app store.

`pihole -t`",pihole,1645906193.0
10265,comment,1,hykeloc,,"Thank you!  I think this is heading in the right direction.  Some of this is beyond my knowledge / skill so bare with me....

This is what I see when I tail pihole log:

16:31:31: query\[A\] e673.dscx.akamaiedge.net from [192.168.1.38](https://192.168.1.38)

16:31:31: forwarded e673.dscx.akamaiedge.net to [127.0.0.1#5335](https://127.0.0.1#5335)

16:31:31: reply e673.dscx.akamaiedge.net is [104.88.72.24](https://104.88.72.24)

And this is what I see from dig:

pi@raspberrypi:/etc/unbound/unbound.conf.d $ dig bag.itunes.apple.com @1.1.1.1; 

<<>> DiG 9.11.5-P4-5.1+deb10u2-Raspbian <<>> bag.itunes.apple.com @1.1.1.1;; global options: +cmd;; Got answer:;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 25262;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 1;; OPT PSEUDOSECTION:; EDNS: version: 0, flags:; udp: 1232;; QUESTION SECTION:;bag.itunes.apple.com.          IN      A;; ANSWER SECTION:bag.itunes.apple.com.   86393   IN      CNAME   init-cdn.itunes-apple.com.akadns.net.init-cdn.itunes-apple.com.akadns.net. 3593 IN CNAME itunes.apple.com.edgekey.net.itunes.apple.com.edgekey.net. 21593 IN  CNAME   e673.dsce9.akamaiedge.net.e673.dsce9.akamaiedge.net. 13   IN      A       96.7.64.34

&#x200B;

Does this imply that itunes using [e673.dsce9.akamaiedge.net](https://e673.dsce9.akamaiedge.net) and unbound is returning IP of [104.88.72.24](https://104.88.72.24) but expecting [96.7.64.34](https://96.7.64.34) for my region?

If I understand what you are saying unbound is not location aware so it cant know the correct IP to give me.  

Are there ways to fix this if this is the case?

Thanks again for your quick responses and help!",pihole,1645912741.0
10266,post,4,t222j0,Does pihole process traffic even if not used as the DNS?,"A few years ago I set up a pihole in my home network and it's worked flawlessly since. But yesterday I updated the firmware on my router and a bunch of settings were reset. Notably, the DNS server was set to CloudFlare instead of the pihole's IP. I had to do some troubleshooting to get internet working on my devices again. 

I assumed that if my router isn't using the pihole as DNS then it won't be doing anything, but I noticed that some of my devices were connecting to wifi but not getting any internet. And those devices were showing up in the pihole requests log! When I unplug the pihole, those devices get internet back, and when I plug the pihole back in, the problem returns.

So I guess my question is: can the pihole do something when plugged into a network even if nothing on that network is using it for DNS?",pihole,1645895916.0
10267,comment,2,hyjigax,,">can the pihole do something when plugged into a network even if nothing on that network is using it for DNS?

From your description (those devices were showing up in the pihole requests log!). some devices are still using Pi-hole.

Fix the router DHCP settings to provide the IP of Pi-hole )and only Pi-hole) for DNS, then renew the leases on all DHCP clients.",pihole,1645899348.0
10268,post,16,t204n6,Anyone have a blocklist for Russian companies?,I'd like to block as many Russian companies domains from my network as possible.  Anyone know of a blocklist for this?,pihole,1645890771.0
10269,comment,20,hyiymj6,,You can start with `(\.|^)\.ru$`,pihole,1645891207.0
10270,comment,7,hyj6a24,,"You need a good firewall and then just block connections to all the CIDR blocks assigned to Russia.

www.ipdeny.com is what I use to make aliases in OPNsense, then block all in and out traffic.

\*Blocking outbound traffic to Russia is only half the job. Hackers might still be probing you, hoping to use you as a node in their attacks. I added the blocks for Russia, Iran, Syria, and I think a couple others (so far lol) and I see incoming hits from all of them, every day.",pihole,1645894391.0
10271,comment,4,hyjs8zg,,This is pointless. Anything malicious coming out of Russia will be behind a VPN. You're just adding additional overhead and latency on your system by checking and filtering IP ranges that won't ever be seen.,pihole,1645903323.0
10272,comment,5,hyjuaxt,,"Or on a cloud provider, or on any one of thousands of other infected computers in every country with Internet access.   But the point of PiHole still is really to block ads, not security from state sponsored hacking attempts.",pihole,1645904160.0
10273,comment,2,hyjz5gz,,I'm attempting to block outgoing connections to Russian domains that may be embedded in web pages. Not the other way around.,pihole,1645906192.0
10274,comment,6,hylj4ov,,"They don't care. This is just part of the virtuous ""I'm Helping!"" effort that's going around right now. Just like the ""block Russia from your GitHub"" campaign that kicked off a day or two ago - completely pointless, but it makes them feel like their opinions/actions matter. Laughable.",pihole,1645931122.0
10275,comment,2,hyk9avq,,The regex provided will do this.  Assuming the companies use the Russia TLD.,pihole,1645910490.0
10276,comment,1,hynuu1z,,Are you always this negative?,pihole,1645980639.0
10277,post,1,t2047v,"OpenVPN doesn't work with Pi-Hole ""Server IP address could not be found""","I'm running a VPN server and Pi-Hole (both DHCP and DNS server) on a Synology NAS.

I configured my OpenVPN like this:

>remote ""my DDNS"" 1194  
>  
>dhcp-option DNS ""Pi-Hole IP (same IP for NAS)""

First I had the following warning: ""DNSMASQ\_WARN: Ignoring query from non-local network"" because the IP was in a range of 10.8.0.X due to OpenVPN. I could fix this by enabling ""Permit all origins"" in Pi-Hole DNS settings (my Pi-Hole port is not exposed to the internet).

After that if I try to load any webpage, I get either ""server IP address could not be found. DNS\_PROBE \_FINISHED\_BAD CONFIG"" or ""DNS\_PROBE\_STARTED"" at Chrome. It's not only Chrome as other apps aren't connecting either. I tried on a different device as well with same results.

The only address resolving is my router IP [192.168.0.1](https://192.168.0.2). I cannot access my NAS with neither the IP or the DDNS.

The odd thing is that when I see the query logs in Pi-Hole everything seems fine, I can see the request being accepted, and status green.

What could cause the problem?

This is how my hosts look like on my Network tab:

https://preview.redd.it/vqlriwj1a7k81.png?width=705&format=png&auto=webp&s=0e9afd313fe71497df8d35ab4da75554f4c451a9",pihole,1645890739.0
10278,comment,1,hyixuhl,,Did you setup routing between your lan and the OpenVPN subnet?,pihole,1645890869.0
10279,comment,0,hyizvwf,,Can you please explain this in more depth? I included also a picture in post as well with the hosts seen on my dashboard. Maybe this is the cause why the hostname is blank?,pihole,1645891747.0
10280,post,10,t1wd0l,RE: // Pi-hole deployment help,"So, I have recently found my old pc in some sketchy den but its got 2 cores and 8 gigs of ram, well enough for Pi-hole, but what I want to do is have Pi-hole run in the background of the pc and then give it to my brother so he can still use it for studies. How would I go around doing this?",pihole,1645879720.0
10281,comment,9,hyicrqd,,It install as a programme on your PC that autostarts when the machine is ready. But it is not adviced to turn the PC off as you would have to deal with a DNS resolver being unavailable.,pihole,1645880279.0
10282,comment,2,hyjzgjo,,"The point of a pihole is that everything on your network relies on it for dns. Pihole down = internet down.

Give this pc to your brother for his studies, and go buy a cheap pi zero or something so it can run pihole separately. Having to tell your brother ""never turn this pc off or our internet goes down"" is not going to be ideal. Even if he just reboots it after installing some software, you'd temporarily have no dns and therefore effectively no internet. (yes, readers who have a deep understanding of networking, I know this is an over simplification - that's very intentional).",pihole,1645906323.0
10283,comment,1,hyiu3p8,,Assuming Linux you could use docker. But for it to work all the time the pc has to be on constantly,pihole,1645889246.0
10284,post,2,t1w0wy,pihole DNS,"Hello

im new in Pihole and basically in networking and synology too. Just recently I bought pretty nice router and then realized, (when i knew what it is) that my router does not support loopback/hairpin. I was trying a few things  and nothing was working. A week back I installed Pihole and setup its DNS,  adding Local IP pointing to my [domain.name](https://domain.name).  My domain is of course pointing through A record to my public IP.  Its working perfectly from outside, problem is that from local its sometimes working sometimes does not. 

Bellow Ip adresses are just examples

Pihole runs on Synology DSM 220+ as docker container with 6 GB RAM. 

&#x200B;

**Router  settings**

internet connection type - *Dynamic IP*. (even though I have public address [91.xxx.xxx.xxx](https://91.xxx.xxx.xxx) and I can reach from outiside to my local with same IP for last 3 years )

IP address 192.168.1xx.140

Subnet mask 255.255.255.0

Default Gateway 192.168.1xx.1

Primary and secondary DNS = [8.8.8.8](https://8.8.8.8) [8.8.4.4](https://8.8.4.4).  

**Router DHCP server**

Router DHCP server enabled

Default gateaway  empty

Primary DNS   [192.168.1.11](https://192.168.1.11) (local synology IP)

Secondary DNS empty

&#x200B;

Synology IP [192.168.1.11](https://192.168.1.11)

&#x200B;

Traffic is going through pihole (see picture).

Pihole DNS Record 

my.public.IP       to [192.168.1.11](https://192.168.1.11)

[s](https://something.mydomain.name)omething.my.domain to 192.168.1.11

nextlcloud.my.domain to 192.168.1.11 

and a few more records all pointing to [192.168.1.11](https://192.168.1.11)  

&#x200B;

ALL A records on my provider working well, as I have no problems to reach (through port forwarding) my local synology services from outside. Only from inside its working randomly. 

&#x200B;

Is there anything wrong? Anything missing? 

&#x200B;

https://preview.redd.it/hx2lx52q56k81.png?width=1531&format=png&auto=webp&s=94895163a92d9dc68e70997c8427676c9c379d0f

Is it also OK to have such high number or Percentage Blocked?",pihole,1645878590.0
10285,comment,2,hyiistd,,"Not sure if this is causing your problems, but your router’s DHCP server config should have a default gateway assigned, and it should be your router’s IP",pihole,1645883781.0
10286,post,67,t1uxh1,Is what pihole shows = Everything my ISP can see?,"Does my ISP know more or less than my Pihole logs? For instance, when I connect to TOR, I see nothing in pi-hole logs related to this request whatsoever. But what about my ISP? Sorry bad English.",pihole,1645874559.0
10287,comment,58,hyi53ue,,"If you are using the ISPs DNS, then yes. (If 8.8.8.8, then the same applies to Google and so on) That's why unbound is a thing.",pihole,1645874771.0
10288,comment,22,hyiwpqk,,"This is a simple question.  And the answer, is ""it depends"".  I can't really explain it any better or in more detail than it is explained here:

https://anonymousplanet.org/guide.html",pihole,1645890386.0
10289,comment,9,hyiqs71,,"Your ISP can see what sites you’re visiting unless your traffic is routed elsewhere (via Tor or VPN, for example). PiHole (even with Unbound or encryption) does not affect this.",pihole,1645887750.0
10290,comment,12,hyih30k,,"In the old days, without https, everything was in plain sight unencrypted. Not only for ISP but also other computers in your local network.
Thanks to the diffusion of encryption it’s not true anymore so ISP (or others) may only try to understand what you are looking at using metadata, dns queries or other “indirect” ways.
Use always TOR + HTTPS when privacy is a must (have a look here for a great explanation https://www.eff.org/it/pages/tor-and-https).
Also, don’t trust VPNs they may be compromised as well as ISPs.",pihole,1645882833.0
10291,comment,4,hyiyf6e,,"More. 

The pi-hole just handles DNS, your ISP handles ***all*** the traffic. 

Things like HTTPS/SSL and VPNs stop the ISP from being able to see the contents of some things, but not everything uses that. Some protocols are still plain text traffic, but they're being replaced. And they can still see ***where*** the packets are going until they exit their network, which TOR and VPNs alleviates to an extent.",pihole,1645891119.0
10292,comment,3,hykwlue,,"I'm retired from an ISP so, can your ISP see what you do and where you go? Yes! Does your ISP care? No, unless the FBI or something like that need to know about you because you are a criminal. If PiHole doesn't log it, does your ISP still see it? Yes! Oh, if you are using a VPN remember, you are still being logged somewhere by some server. Don't believe the BS that so &so VPN keeps no logs!",pihole,1645920578.0
10293,comment,3,hyib7aj,,"they could know more, potentially. unless you submit all of your dns queries through a vpn in another country, all your non- encrypted traffic and ip you calls",pihole,1645879277.0
10294,comment,1,hyk9zxl,,"PiHole is just the DNS lookups. 

From a traffic perspective : At a minimum your ISP will see the source (your router) and destination (remote server). It knows if you go to a Tor node. It knows if you go to CNN websites more often than Fox News websites. 

Unless your comms are encrypted end to end, assume your ISP can see everything. 

Furthermore, you can have high confidence that your ISP sells the browsing and communication patterns and behavior info it collects to interested parties.",pihole,1645910789.0
10295,comment,1,hyo7xzn,,"It depends.

Your ISP can see your unencrypted traffic.


That goes for DNS too, regardless of what provider you're using UNLESS you're using DoT (DNS over TLS) or DoH (DNS over HTTPS).


HTTP, DNS, FTP, SMTP are all generally unencrypted.

Doesn't really matter if you're on a VPN or not, someone will have the ability to see your traffic. It's just who do you trust more? Your ISP or a potentially shady VPN service?



So tl;dr - use DoH or DoT and figure out where you want to put your trust. Your ISP, or a third party provider who offers DoH/DoT like quad9 or cloudflare.",pihole,1645985680.0
10296,comment,22,hyi6a53,,"Settings > DNS 
I chose Quad9(ECS,DNSSEC) and Cloudflare(DNSSEC)",pihole,1645875717.0
10297,comment,1,hyky61x,,"Not quite. So your ISP will see all traffic that you send. So even though you may send a DNS request to something like 8.8.8.8 or 1.1.1.1, your isp can still see those requests, and potentially log them and sell that data to advertisers. Even using unbound, that behaviour can still be logged. You’d need to use DNS over HTTPS for your ISP to fully not see your dns queries. Or use a VPN to encrypt all your traffic from your ISP",pihole,1645921294.0
10298,comment,3,hyj25va,,This needs to move to the top. Really good info in there!,pihole,1645892702.0
10299,comment,8,hyiulw4,,"What this guys says. We are only talking about DNS here, but after your DNS request is fullfilled, eaither by pihole or by and upstream DNS resolvers, now your computer will try to make a connection to the site via IP. That IP needs to get routed and that what your ISP's job is.",pihole,1645889470.0
10300,comment,5,hyimcla,,"Can’t a TOR exit node be compromised as well?

https://www.techrepublic.com/article/why-tor-and-privacy-may-no-longer-be-synonymous/",pihole,1645885611.0
10301,comment,1,hyj9nyl,,">Not only for ISP but also other computers in your local network.

This lie has been promulgated way too far.

If you are on a \*switched\* Ethernet network, the only devices that see your traffic between the Internet and you are your PC, any connected switch and the router.  Other devices do NOT see the traffic -- the switch only puts it on your port.

If a switch was compromised, or you had a 10mbps hub, it's a different story... but other local machines couldn't see the traffic by virtue of being on the same network.",pihole,1645895780.0
10302,comment,3,hyj5ert,,"For example, when you access example.wordpress.com, the ISP can always see that you opened an SSL connection to an endpoint that belongs to WordPress.com but not what blog specifically you requested.

Inside corporate networks, this protection is frequently circumvented by using HTTPS/SSL inspection (MITM).",pihole,1645894044.0
10303,comment,1,hyskpq9,,"> Don't believe the BS that so &so VPN keeps no logs!  

And the overpriced ones that *really* do will anyway start keeping logs the day their gov send a request for *you* specifically.",pihole,1646065346.0
10304,comment,1,hyjvlxd,,"But TOR (by default) is a triple encryption tunnel, like having 3 random VPNs protecting each other.",pihole,1645904702.0
10305,comment,41,hyi89bh,,"Then Quad9 & Cloudflare see what the PiHole is logging basically. Both promise not to store this data as far as I know, so make of that what you wish.

If you want to use unbound, here's the pretty simple tutorial:

https://docs.pi-hole.net/guides/dns/unbound/",pihole,1645877222.0
10306,comment,1,hynyv45,,"Correct.

Though with the VPN you're basically adding two more parties (the VPN and their ISP) to the list. Somakes sense if you don't trust your ISP, but always depends on the VPN etc. as well.",pihole,1645982217.0
10307,comment,1,hyjrykp,,"In other words, people need a tunnel (VPN/DNS) to hide traffic.  

At that point, the question of DNS security becomes moot, because even using Google DNS would be enough as long the DNS request goes through the tunnel.  

If you don't have a tunnel, the ISP will *know* where you go anyway. DoH/DoT will prevent the ISP from sending a fake answer to redirect you, but won't help against sniffing.",pihole,1645903207.0
10308,comment,5,hyj4gct,,"Yes, and they frequently are.

Police and government agencies have been known to set up their own TOR exit nodes for the purpose of logging.",pihole,1645893653.0
10309,comment,3,hyjotdj,,"They can and often are. The point is that using TOR you are not using a single node but a series of them. The exit node may know that someone is going to iloveillegalstuff.com but they cannot (easily) know who is (because the request came from another node, who received it from another and so on).",pihole,1645901944.0
10310,comment,3,hyjso9g,,"Yes, but it's irrelevant for this exact attack. A TOR connexion, by default, uses three* nodes each with it's own encrytion. So it's like a VPN inside a VPN inside a VPN, randomly selected from a pool, the last one being  from a smaller pool.  
The exit node know where you go but not who you are, the entry node knows who you are but not where you go, the intermediate node makes sure the entry and exit don't know each other.  

The logging exit node won't try to pinpoint your device, it will try to identify your browsing habits. For example, if 3 different TOR connexions go to reddit with the user u/Johnadams1797 , then those 3 connexions are obviously from the same person.  
It's not perfect logging, but given that few people run exit nodes (legal responsibility), controlling a node in a small pool is more common than ALSO controlling the two others in a big pool.  

*Assuming you use an exit node. If you use an hidden service, the hidden service will also protects against you, so it will PROBABLY use three nodes on its end. So 6 encryption for one tunnel.  
Some people, for the sake of experiment, host services without the need of privacy.  For efficiency, they sometimes are setup to only use 1 node on their side, so the full tunnel uses 4 encryptions and is 33% more efficient.  
To take an example, Facebook's onion service probably doesn't need to hide its identity, as long the privacy of the USERS is protected by their own 3 nodes.",pihole,1645903496.0
10311,comment,3,hyjg8iy,,If you're talking passive interception you are correct. Man in the middle attacks are still possible though in switched networks using arp cache poisoning.,pihole,1645898454.0
10312,comment,1,hyjpi52,,"Wi-Fi, cheap domestic all-in-one modem/routers…",pihole,1645902224.0
10313,comment,3,hyjsdyn,,">this protection is frequently circumvented by using HTTPS/SSL inspection

For people wondering, it only works if your devices manually trusts a non-trusted certificate. Default CAs would be in trouble if they created fake certificates. (Diginotar *bankrupted* because unremoved physical keys allowed a hacker to create false certificates)  

So if it's your own device, you should be safe from such attack unless you tinkered with settings by adding a non-standard root.",pihole,1645903380.0
10314,comment,2,hypvb65,,[deleted],pihole,1646010143.0
10315,comment,6,hyjil5k,,This is awesome. I just learned a ton about DNS.,pihole,1645899405.0
10316,comment,6,hyi8x44,,"Thanks for the link. But my main question was : 
An ISP logging my traffic as much as they can


vs 


Pi-hole ""log everything"" mode

How do they compare?

Edit : sorry if I was not clear, what I am asking is : Can my ISP see more than what appears on pi-hole logs?",pihole,1645877703.0
10317,comment,1,hyjghnd,,"I would consider that cache poisoning an artifact of the switch being compromised.

A lot of folks have this idea that you can just fire up Wireshark and see all that is happening...",pihole,1645898556.0
10318,comment,1,hyjprpc,,"Still a switched network.

The router can see all the traffic, but that doesn't mean every client can.",pihole,1645902332.0
10319,comment,1,hyqrof7,,"Yes, sorry, you're right. I didn't have SNI in mind... The privacy issue you described can be prevented by using encrypted SNI (ESNI), which is not widely rolled out.

https://blogs.keysight.com/blogs/tech/nwvs.entry.html/2021/10/05/esni_the_road_nottaken-FKq4.html",pihole,1646025866.0
10320,comment,18,hyia1e3,,"Pihole will only show DNS lookups, not any other traffic.  Your ISP will see what sites you connect to, unless you use a VPN.",pihole,1645878491.0
10321,comment,12,hyi9qge,,"Well theoretically the ISP could sniff every packet, i.e. the content & destination/origin of your communication with the web (unless you use a VPN/TOR). PiHole only looks at DNS requests.",pihole,1645878276.0
10322,comment,2,hyjraca,,"Not sure what “old days” means to you.
I personally did this to impress nerd friends in the age of wep keys and it was as simple as firing up wireshark and push a button.",pihole,1645902940.0
10323,comment,1,hyloyq8,,"They can also sniff any http traffic.

If you use a VPN they can see you are using which VPN and to what server.

I believe they know you are using TOR? If not, they can use deep packet inspection to know.",pihole,1645934093.0
10324,comment,0,hyjryvm,,"WEP - you mean that flawed encryption protocol that has been strongly discouraged for over a decade and a half? Yeah, that's old days for sure.

Wireless sniffing is a different beast than wired.",pihole,1645903210.0
10325,comment,2,hyjstng,,"It is literally what I said…
Old days = sucked. Now = ok thanks to modern encryption.",pihole,1645903558.0
10326,comment,1,hyjue3f,,"I thought you were implying that this wasn't all that ""old"". 🙂  My apologies.",pihole,1645904197.0
10327,comment,1,hyjw3wo,,"It’s ok, you were technically correct, but so was I :)
And anyway you provided great context to the answer.",pihole,1645904908.0
10328,post,1,t1unln,Question: Can I add NS records to point to other local DNS servers?,"My router (Ubiquiti EdgeRouter 10X) forwards all traffic to my pi-hole and that's working fine.  The router resolves local entries for my "".lan"" domain too.  However I have two servers, server1 and server2, each hosting VMs and running DNSmasq for local name resolution.

How do I get the pihole to resolve \*.server1.lan by forwarding queries to server1, and \*.server2.lan by forwarding queries to server2?

My understanding is that I would want to add NS records to do this but I cannot find any docs on this for the pi-hole.

Any help anybody could provide would be supremely helpful!  Thank you for taking the time to read this.

&#x200B;

\*EDIT: I think I can do this on the Edgerouter according to the instructions below but I am still keen to do it via the Pi-hole, at least as a learning experience.

`set service dns forwarding options server=/domain.local/192.168.1.10`

[https://help.ui.com/hc/en-us/articles/115010913367-EdgeRouter-DNS-Forwarding-Setup-and-Options](https://help.ui.com/hc/en-us/articles/115010913367-EdgeRouter-DNS-Forwarding-Setup-and-Options)",pihole,1645873481.0
10329,comment,1,hyi68ci,,"This should be what you're looking for. You're not using AD, but local DNS servers of any type should function the same way:

https://www.reddit.com/r/pihole/comments/m5k469/using\_pihole\_in\_an\_active\_directory\_environment/",pihole,1645875678.0
10330,comment,1,hyi8os3,,"Thank you so much for the reply!  Can you please confirm my understanding below?

I could add a file such as 02-mydomains.conf with

`server=server1.lan/192.168.4.1`

`server=server2.lan/192.168.4.1`

And then if i looked up something like somehost.server1.lan the query would be forwarded to [192.168.4.1](https://192.168.4.1) for resolution...",pihole,1645877537.0
10331,comment,1,hyjzrnl,,"I'm afraid I'm not an expert here. I've been saving the post for a while, but haven't had a chance to actually play with it yet.",pihole,1645906456.0
10332,post,0,t1s1xh,Can someone build a Pi Hole server for me in AWS?,"edit: thanks for all your thoughts and feedback on the matter. I'm having second thoughts and with so much on won't be pursuing this in the near future. 


so I've tried following guides online and seem to fail miserably each time (three times now). My first attempt was back in November and since then I've accumulated nearly $100 in AWS costs (for what I thought was meant to be free tier services). 

I'm willing to pay someone reasonable amount to get me a Pi Hole Ubuntu Server up and running (Sydney is the closest) that I can point my home to. Had in mind the person set up a brand new AWS account that I could take over entirely. For payment we can either use a service like fiverr for escrow or I just buy you Amazon vouchers or something...

Buying a raspberry pi is not really an option (cost and supply wise in NZ).  

Anyone up for the job?

I'm not a total failure I swear haha. Before having two children I used to be able to follow some guides that seemed more complex than this. I think there's just too many distractions. Hence another reason why I need a pi hole adblocking (everytime I put YouTube on for them there's some annoying as hell ads).",pihole,1645863705.0
10333,comment,4,hyhrr10,,"Just a note - Pi-hole will not help you with the Youtube ads.

I'm using Brave + uBlock origin and haven't seen an ad on YT for years.",pihole,1645863920.0
10334,comment,3,hyi9rus,,"If getting this to work on aws, would you even have the know how to determine of there are no backdoors or other credentials left by the one doing this for you?

Might be better to have a go at it yourself, get to grips with what is and what isn't free tier and possibly tell what you did and where you got stuck?

This as you'd have to know just enough to get things up biy should also have sone ideas what to do to update or fix when it breaks?

I assume spinning up a linux distro isn't the biggest hurdle?

If aws is too much with all their offerings, why not simply rent a VPS elsewhere and then throw pihole on top of that? I myself do not believe in free really. As soon as there is enough market space, I expect those things to be no longer free anyways.

How much would a pi 3(b) be where you are at? I don't think it would have to be the biggest available pi4.",pihole,1645878302.0
10335,comment,3,hyicqzr,,"You're going to need ongoing support if you don't do the installation yourself.  I personally wouldn't trust someone who would do this for a small flat fee.

What's the reason you want to do this with AWS instead of buying a cheap computer and doing it locally?  If you can't find a Raspberry Pi there are other SBCs that will run Linux, or you could pick up a cheap used desktop computer.  For compute the AWS free tier only includes 12 months.",pihole,1645880266.0
10336,comment,2,hyi33id,,"For TVs running Android (you can also install it on a Fire TV, since they run Android as well), there's also SmartTubeNext:

https://github.com/yuliskov/SmartTubeNext/releases/

For Android phones, there's NewPipe:
https://newpipe.net/

YouTube Vanced is also popular:
https://vancedapp.com/",pihole,1645873113.0
10337,comment,1,hz5ur8r,,Thanks for this. I feel like such a fool.,pihole,1646298253.0
10338,comment,1,hz5v094,,"Yeah correct. Installing pihol on ubuntu I can manage. But it all goes downhill from there! 

I think I'm too busy with other project now to give this the time - and that probably extends to having someone else do it for me as well.",pihole,1646298451.0
10339,comment,1,hz0yycb,,">What's the reason you want to do this with AWS instead of buying a cheap computer and doing it locally?

And there are people like me who have a main Pihole locally, and still made an emergency Pihole with VPN on Oracle Cloud's free tier anyway.  
I learned the hard way that when we go on vacation, a local Pihole won't help much unless we let the LAN online when nobody's home",pihole,1646209665.0
10340,comment,1,hz5uv0w,,Ah I'm unifi and apple hardware throughout though.  Thanks for taking the time to let me know though!,pihole,1646298334.0
10341,post,1,t1ojeu,Unexpected Drop In Queries.,"Anyone know where to look as to why my pihole queries stopped for about an hour and ever since then, has dropped in numbers? Not sure why the 7-8 inactivity happened, no power outage, no network outage. Very odd for what's been a stable build for awhile.

https://preview.redd.it/yz5brg2az3k81.png?width=3028&format=png&auto=webp&s=862d811eefa728bbb80d3cf9065d88d03122f10e",pihole,1645851393.0
10342,comment,2,hyhaann,,"Look in ***/var/log/pihole.log***, ***/var/log/pihole-FTL.log***, and ***/var/log/syslog***.",pihole,1645852264.0
10343,comment,1,hyi7qaz,,Look at those two big devices (orange and blue (maybe even the dark blue)) and see what they are.  They may have been turned off or just gave up,pihole,1645876831.0
10344,comment,1,hyiuq1f,,">/var/log/syslog

Odd. All those log files only show back to midnight of today.",pihole,1645889522.0
10345,comment,1,hyiuxov,,"Since it's now 24 hours past the time this began, the dashboard no longer shows that history. I'll see if I can dig into the query log more.",pihole,1645889615.0
10346,comment,1,hyj2hgz,,The same logs with numeric suffixes are previous days.,pihole,1645892836.0
10347,comment,1,hyiv12b,,"lol, nevermind, Long-term data would be my place to look - :)",pihole,1645889654.0
10348,comment,1,hyivv1c,,for next time :),pihole,1645890020.0
10349,comment,1,hyj1rip,,"I know this has been answered probably before but searching for a client with the name of :: is pain to format, can you tell me why a client is showing that as it's name as opposed to it's IP?",pihole,1645892536.0
10350,comment,1,hyj7rsn,,::1 is the IPv6 version of the local host 127.0.0.1,pihole,1645894999.0
10351,post,5,t1nqdt,"My logs show ""webapi.camera.home.nest.com"". Their website indicates this is associated with the Nest API which is used for Nest Cams. I have a Nest Thermostat, no Nest Cams, and the IP is my phone.","https://developers.nest.com/reference/api-camera

So this is obviously coming from the Nest app on my phone when I go in to adjust the temp or whatever. I'm just really curious why a domain that seems specific to their cameras is called by the app when I don't have their cameras. Is it maybe just checking to see if I do have cameras...?

I searched the domain, obviously - that's how I found the link above - but I can't find any reason why the *app* is calling this domain and not a *camera* (which again, I don't have, but for instance, [here](https://securityboulevard.com/2019/10/security-review-of-nest-camera/) it says he observed an actual camera calling that domain). Figured I'd come here next as you guys generally seem to know a lot about random domains that pop up in Pihole logs. TIA for any information!

To add, I blacklisted it. Haven't noticed anything broken yet, but it hasn't been very long and I didn't do any restarts/resets/etc so it might be a caching thing right now.

\*Edit: I found another site that mentions this exact URL... Seems to be related to authentication in the Nest app, maybe? He's on iOS and I'm on Android but I'm sure the apps would still use the same URL. But the whole blog post is over my head so I'm not sure what he's actually saying. https://den.dev/blog/nest/",pihole,1645848831.0
10352,comment,1,hyijb1v,,I have a Nest thermostat and doorbell. The nest app allows me to control both devices so it’s probably some software call from the app looking for or supporting the camera functionality.,pihole,1645884053.0
10353,post,1,t1nmk4,Whenever my Dns cache insertion increase the DNS cache size my internet stop to work ... Any solutions?,,pihole,1645848515.0
10354,comment,2,hyhakd2,,"It is normal for the number of DNS cache insertions to exceed the cache size after FTL has been running a while.

What is shown in the logs in directory ***/var/log*** around the times your internet stopped working?

    pihole.log 

    pihole-FTL.log 

    syslog",pihole,1645852420.0
10355,post,1,t1k8hp,Naive question - does anything prevent gadget makers from embedding their own DNS?,"I own a peloton bike and a mix of amazon and other IoT devices, and I notice that a huge number of the blocked requests come from these devices. The obviously get their DNS from my gateway router, which tells them to get their DNS from pi-hole. 

My devices work fine, but they can presumably see they’re not getting the same tracking data that they receive from other customers. 

Couldn’t Peloton or Amazon or these other devices run a pseudo-DNS server specifically for their ad networks, and hard code the secondary DNS into the device’s firmware?

I’m guessing that pi-hole and other ad blocking users are just not a big enough problem for them to bother? And it would be semi-trivial to block the IP addresses of these pseudo-DNS servers anyway?",pihole,1645838739.0
10356,comment,15,hygk3g6,,"Yes companies frequently hardcode DNS servers in their devices that will bypass PiHole under normal circumstances. If your router supports it, you can setup destination NAT rules so that any DNS traffic on your network gets redirected to PiHole, and this will combat hardcoded servers.",pihole,1645839210.0
10357,comment,3,hygkkeq,,A lot of them do. I block port all port 53 traffic. It helps but it’s not perfect.,pihole,1645839434.0
10358,comment,2,hygv0lm,,"Yes. Streaming sticks are notorious for this, given something better than most consumer routers you can hijack the dns and point it back to the Pihole. I do it with OpenWrt but other OS will also have the same abilities, I block port 853 too which will lock out DOT but for DOH via 443 you'd need to block individual IP since HTTPS is necessary for so much else.",pihole,1645844411.0
10359,comment,7,hyh1rfb,,IMO this is a much better solution that just blocking the traffic. Some devices will hang trying to connect to the hard coded server before finally giving up and going to the one handed out by DHCP (I had a TV that did this.) A NAT redirect with a masquerade rule solves this problem.,pihole,1645847731.0
10360,comment,3,hygx2wx,,"I find when I do that, some, IME Google devices, bug out and refuse to connect when 8.8.8.8 isn't available",pihole,1645845415.0
10361,comment,2,hz0yhn1,,"As a rule of thumb :  
Coming from Pihole's IP or another admin-configured device? Allow  
Port 53? That's DNS, redirect to Pihole  
Port 853? Encrypted DNS (DoT), block  
Going to a known DoH address on port 443? block",pihole,1646209305.0
10362,comment,4,hygx9cp,,Don't forget about DOT and DOH. Ports 853 and 443,pihole,1645845501.0
10363,comment,2,hygpr3r,,"Ya, I also block outgoing port 53 traffic to anything other than my local DNS server.",pihole,1645841893.0
10364,comment,1,hyj015f,,"Thanks everybody! Good stuff to think about.

Unrelated to pi-hole, I had been using dd-wrt on my router(s) for many years, but I was running into more and more ~~problems~~ complexity as I added IoT devices and the needs of my family evolved. I got some advice from r/HomeNetworking to just bite the bullet and go with a retail mesh network, which I've had for a couple years now.

The connectivity and simplicity of mesh is perfect, but it doesn't allow nearly as many options as I used to have with dd-wrt. No NAT rules for me these days, but good to know that's a patch I could go back to.

Edit: problems ==> complexity",pihole,1645891809.0
10365,comment,1,hzotmri,,Does the masquerade rule preserve source IP or does it all appear to be coming from the network gateway?,pihole,1646649583.0
10366,comment,4,hygxdkk,,"I had a similar issue at first and found that a source NAT MASQ rule fixed the issue. As I understand it, that rule will mask the return traffic from PiHole so the source address appears to be 8.8.8.8 (or whatever original DNS server) but is actually PiHole.",pihole,1645845557.0
10367,comment,8,hyh2ygh,,">	Ports 853 and 443

If you block port 443 you won't be doing much internet browsing.",pihole,1645848335.0
10368,comment,1,hzp5qwg,,It preserves source ip,pihole,1646658058.0
10369,comment,1,hygxlzi,,Yeah the masquerading rules started confusing me so I gave up trying to control my Google devices lol,pihole,1645845669.0
10370,comment,2,hyh32jp,,Well don't BLOCK 443. But I have blocked outgoing traffic to known public DNS servers on port 443,pihole,1645848392.0
10371,comment,1,hzp7c4g,,"Can you share your rules? 

The current rules I’m using uses DNAT in PREROUTING and SNAT in POSTROUTING, and that does not preserve source IP.",pihole,1646658969.0
10372,post,1,t1jw2v,pihole deployment help,"So, I have recently found my old pc in some sketchy den but its got 2 cores and 8 gigs of ram, well enough for pihole, but what I want to do is have pihole run in the background of the pc and then give it to my brother so he can still use it for studies.  How would I go around doing this?",pihole,1645837772.0
10373,comment,0,hylrnbw,,"Just to confirm we're on the same page here, you want your network's DNS resolution capabilities to be deferred to a relic of yesteryear, that will then be managed by a child?",pihole,1645935508.0
10374,post,1,t1in5n,Custom Domain/URL resolving,"I've configured pi-hole in a docker container, as well as nginx-proxy-manager. I'm attempting to reach out to a custom domain that would resolve as the IP.

Example, the dns ip is 192.168.0.5, and homer is hosted on port 8095.. if I type custom.home, I want it to resolve to 192.168.0.5:8095. 

I've tried redirection hosts and proxy hosts in nginx proxy manager with no luck. What am I missing here?",pihole,1645834244.0
10375,comment,1,hygc0xm,,"Did you define the upstream DNS in the Docker compose?
I.E.: `PIHOLE_DNS_: 10.0.0.2#5053;1.1.1.1`

Looks like the formatting is especially important in recent versions.
[https://hub.docker.com/r/pihole/pihole/](https://hub.docker.com/r/pihole/pihole/)",pihole,1645835454.0
10376,comment,1,hygga43,,"Yep, mine is:

      PIHOLE_DNS_: 127.0.0.1;8.8.8.8",pihole,1645837425.0
10377,comment,1,hygpnr3,,"Apologies, I see what you're asking. Try taking a look at this post / solution: [https://discourse.pi-hole.net/t/how-to-handle-dns-on-pi-hole-dhcp-on-router-and-also-resolve-local-hostnames/46923/4](https://discourse.pi-hole.net/t/how-to-handle-dns-on-pi-hole-dhcp-on-router-and-also-resolve-local-hostnames/46923/4)  
Match that up with the Docker compose settings to look at in the link I sent prior:

`REV_SERVER ""true""`  
`REV_SERVER_DOMAIN`  
`REV_SERVER_TARGET`  
`REV_SERVER_CIDR`

May also need to edit the /etc/hosts file with the devices you want resolved by hostname.",pihole,1645841851.0
10378,post,0,t1hs09,Pihole blocking a couple of domains from its own IP,"My pihole has never shown any logs from pi.hole or blocked anything from localhost before. Usually it's always been reverse lookups. However, today, after updating, I noticed that my logs show pi.hole having reached out to mirror03.downloadhill. com and www .titaniumequities. com, and both were blocked as they're on my abuse/malware lists. Interestingly, these show up under two different client pages with identical names of pi.hole, one on IPv4 and the other over IPv6.

What steps can I take to ensure my pihole has not become compromised?",pihole,1645831862.0
10379,post,1,t1hi11,How to redirect a domain to internal IP?,"How can I configure my pihole to redirect a domain to an internal ip

I'd like any request for lets say [www.google.com](https://www.google.com) to be redirected to [192.168.1.2](https://192.168.1.2)

&#x200B;

How can I configure this?",pihole,1645831087.0
10380,comment,2,hyg33iv,,"You need to create an A record pointing [www.google.com](https://www.google.com) to [192.168.1.2](https://192.168.1.2). Then anything using your pihole as a DNS server will see that record, and associate that domain with that IP address.

https://zewwy.ca/index.php/2018/01/03/adding-a-static-host-record-to-pihole/",pihole,1645831496.0
10381,comment,1,hyg4bwm,,weird. It doesn't work. Not sure what's wrong.,pihole,1645832032.0
10382,comment,1,hygfs35,,"If [192.168.1.2](https://192.168.1.2) is not in the assigned IP address for dnsmasq.conf, then dnsmask probably will assign it to another computer.  The other computer will have to have [192.168.1.2](https://192.168.1.2) assigned as its static address.  

A line in dnsmasq.conf for DHCP range will have to look like:

dhcp-range=192.168.200.50,192.168.200.250,[255.255.255.0](https://255.255.255.0),12h

This line allocated local network IP addresses between 50 and 250 for 12 hours.",pihole,1645837191.0
10383,comment,4,hyg5lhy,,"If you're pointing a known domain (like [google.com](https://google.com)) to something else internally, make sure you flush your dns cache before testing. Existing domains will likely already be in cache on your machine.

And like u/jhspyhard said, make sure you're actually pointing at the pihole for DNS. Firefox, for instance, can use DoH, which will not go through your Pihole for DNS requests.",pihole,1645832586.0
10384,comment,1,hyg55ll,,Are you sure your browser is actually pointing at your pihole and not some other dns provider?,pihole,1645832392.0
10385,comment,1,hyg5exa,,Your right. It's this PC. I tried another device on the network and it is working!,pihole,1645832505.0
10386,comment,1,i1owem8,,"Don't forget that devices have a cache, your PC may have already loaded the domain",pihole,1647972751.0
10387,post,92,t1fx22,"pihole is acting weird with google fonts, and other google icons. does anyone know what domain this is?",,pihole,1645826790.0
10388,comment,67,hyfs7sq,,Whitelist fonts.gstatic.com,pihole,1645826972.0
10389,comment,10,hyhoqr7,,sa ree rea,pihole,1645861665.0
10390,comment,3,hyhra8t,,"For those of you that had fonts.gstatic.com blocked, just out of curiosity, what adlists are you using?

None of the adlists that I'm using list it, and I thought I was using all of the default lists.",pihole,1645863564.0
10391,comment,-1,hygte7f,,"Yep, ive learned to live with it. You get used to it eventually",pihole,1645843629.0
10392,comment,-8,hyggklk,,Or just use deepl.com as translation tool,pihole,1645837559.0
10393,comment,19,hyfudzo,,Wow thank you! I've had this issue too but never thought to ask here about it.,pihole,1645827850.0
10394,comment,28,hyfssuw,,They use that as part of tracking bizarrely.,pihole,1645827210.0
10395,comment,2,hygloam,,"Thank you! I didn;t even think it (Google fonts issue) was due to my PiHole!

Fixed - finally! :)",pihole,1645839958.0
10396,comment,1,hyi04wp,,I use many haha,pihole,1645870630.0
10397,comment,2,hyi09c7,,"It is not only google translate, google fonts are used in many sites ect",pihole,1645870731.0
10398,comment,46,hyftxya,,"It's google, they'll track every domain. Gotta judge what your willing to tolerate for ease of use.",pihole,1645827666.0
10399,comment,24,hyfy42g,,It’s not at all bizarre.  They make their web fonts available for other sites to use… that injects tracking on all the sites using them.  Pretty damn smart.,pihole,1645829382.0
10400,comment,2,hyj7l2d,,"Crazy. I'd query which list it is on just to find out. I have 53 entries in my list of Ad Lists, 2,585,416 domains in the gravity database, and not one of them contains fonts.gstatic.com lol",pihole,1645894923.0
10401,comment,16,hyg3pyp,,"It can be downloaded and placed in the site files, lazy admins enable this tracking.",pihole,1645831767.0
10402,comment,10,hyg3kxv,,"Or just lazy web admins not bothering to download the font and use it properly.

Down vote away, it's still lazy and tracking isn't smart it should be eradicated.",pihole,1645831707.0
10403,comment,1,hyja0pd,,Thats crazy haha,pihole,1645895926.0
10404,comment,1,hyja4ht,,I have only 800k,pihole,1645895967.0
10405,comment,2,hzorjtm,,"Yep, it’s a GDPR violation apparently.",pihole,1646647833.0
10406,comment,16,hyg4msy,,"You might not like tracking, in fact you may be horribly against it, but I wouldn’t say it’s not smart as it is an incredibly profitable business.  Their approach to inject tracking by offering a product that people want to use, is in fact rather smart.",pihole,1645832162.0
10407,comment,6,hyg3se5,,That’s one reason why a site might use their web fonts… but that’s not really an “or” to what I said.,pihole,1645831796.0
10408,comment,2,hyhphd7,,"Keeping the original Google font source allows browsers to reuse fonts that have already been cached by other sites using the same font files, and also eases load on your site by not having to serve them. The downside is it gives Google something else to track, but using them doesn't make admins/dev lazy.",pihole,1645862205.0
10409,comment,-11,hyhpj27,,[deleted],pihole,1645862240.0
10410,comment,-14,hyg446k,,Yea yea,pihole,1645831939.0
10411,comment,-6,hyhq30t,,"Like there isn't an alternative that doesn't track, there are plenty. The load a font puts on a site is tiny, standards have always been to use local fonts.
If you love Google why use pihole at all?",pihole,1645862649.0
10412,comment,6,hyie5cm,,"I think you struggle with reading comprehension.  I didn’t once say I like trackers.  I said that it would be inaccurate to call it not smart as it is a very profitable business and that Google’s approach to offer web fonts for web designers to use that enables them to track people across random sites is actually quite a smart approach.  Saying something is smart is not the same as saying I like something, it’s simply acknowledging the ingenuity of what they are doing.  Your comments on the other hand are not smart as they are riddled with logical fallacies.

Also, while I do block a lot of trackers with Pi-hole, there are many people that choose to use it not for the privacy aspects but simply because they do not like to see ads.

I’ll note that while I also manage a couple engineering teams for a somewhat large web company, I am often pushing back on marketing’s requests to add 3rd party trackers for a variety of reasons (1 of which being privacy).",pihole,1645881114.0
10413,comment,1,hyrcw17,,"That's a mighty ignorant thing to say. I just picked a random Japanese font family on Google and *each style* is 5MB to 6MB in size, 35MB (zipped) for the entire family. And yes, I do happen to live in Japan.",pihole,1646040781.0
10414,comment,-2,hyikhdo,,[deleted],pihole,1645884660.0
10415,comment,1,hyri9jx,,"You don't need the entire family, pick a style and use that. 

You should always host assets yourself (styles, scripts, images, fonts, etc), unless you're prototyping. CDNs can experience downtime, can get compromised, and can change their content like google love to do.

look at how big most of the tracking shite is on most websites, I moved to a static site and dropped near 50mb in tracking alone.

Perhaps I'm old school and vehemently against tracking, pervasive adverts and data collection for profit. My opinion is fixed on this.

Happy Cake day, Didn't imply you weren't living in Japan or that it was part of the problem!",pihole,1646045139.0
10416,comment,3,hyimq28,,"* you’re

Clearly you have a single view of management and that’s fine.  It’s likely based on your interactions with yours.  I actually lean on others’ viewpoints all the time.  My job is to help coach and grow the engineers that report to me, act as a facilitator with other teams if they are blocked, and to help ensure that the teams have appropriate direction.  Because of the scope I manage I give my leads pretty big leeway to make decisions.  If I don’t agree with a technical direction, I share my concerns and my reasoning for them, but ultimately they are the ones in the code base that will be supporting it.  I generally prefer to let people write their own destiny.  Shoving my opinion down others’ throats runs counter to these goals.  In your case, I’ve simply pointed out that you are conflating your dislike of something with it being “not smart”.  From both a technical approach and a business approach it is actually a rather smart approach given the goals that they have.  Again, you may disagree with those goals, but that doesn’t make it any less smart if an approach.

Just because you disagree with their business model, doesn’t make it dumb.  It just means you don’t agree with it.  Again, very different things.  At the end of the day nothing is free.  People choose to prefer “free” products which inevitably means that they are the product.  Until people more widely choose to pay for every service, you will find companies finding ways to monetize that free service.",pihole,1645885798.0
10417,comment,1,hyrn8vw,,"I only mentioned that I live in Japan because of the relevance of Asian fonts to my point.

Obviously one only picks out the exact styles needed but for a multi-lingual website using several font styles you can quickly end up with 30, 40, 50MB of fonts. It's not a small matter.

> Perhaps I'm old school and vehemently against tracking, pervasive adverts and data collection for profit. My opinion is fixed on this.

You can absolutely host your own fonts, that's not the issue. My point is that many sites that choose to have Google host & serve their fonts are not doing it because of laziness but rather for reasons of performance & limiting data transfer. Most of these sites are likely using Google for analytics anyway so it's not like self-hosting fonts would suddenly make the site trackerless.",pihole,1646048900.0
10418,comment,-1,hyipy08,,[deleted],pihole,1645887360.0
10419,comment,2,hyis4sx,,"Apparently you don’t seem to understand what “not smart” means or what “triggered” means.  Apologies for trying to explain something to someone that is clearly obtuse.

It’s only a tool that turns you into a product if you use it certain ways.  On the positive side at least Apple is making strides to support user privacy which, honestly I very much appreciate.",pihole,1645888368.0
10420,comment,3,hyjeo9v,,"Ignore his guy. He is one of those people that ruin Reddit for everyone else. You are trying to respond logically, and he is just trying to get a response out of you. 

Sad really",pihole,1645897821.0
10421,post,0,t1f5bc,Had to manually add another dnd server on my iPhones. I was getting YouTube Ads every 5 min or anytime I would fast forward or rewind the video…,"Anybody work around this or found a solution? I’m not getting rid of my Pi-hole because it’s helped out on my Samsung tv and everything else basically 

*** meant to put I get an add every minute on a 5 min video

** excessive ads. I’m not trueing to BLOCK ads from YouTube.",pihole,1645824793.0
10422,comment,1,hyfu3w3,,"Please see our FAQs linked in the rules on the sidebar.

[https://www.reddit.com/r/pihole/comments/frum61/frequently\_asked\_questions/](https://www.reddit.com/r/pihole/comments/frum61/frequently_asked_questions/)

First FAQ: **How do I block YouTube ads? (short answer - Not with Pi-hole)**",pihole,1645827735.0
10423,comment,6,hyfsl1j,,Pihole won't block YouTube ads as they come from the same domain as the videos. Some lists or filters claim to but you will get spotty results or just break the site.,pihole,1645827121.0
10424,comment,1,hygb9ni,,"There is a solution: get YouTube Premium. Believe me, it's amazing and you also get YouTube Music. With Pi-Hole unfortunately is impossibile to block ads on the iOS non jailbroken iPhone (actually there is one method, but if you are not familiar with it, better not try).",pihole,1645835105.0
10425,comment,-1,hyfwjko,,"I’m not wanting it to block them, but since I got pinhole and been using it in getting excessive ads. It was always the usual 2 ads in the beginning and mid if the video was really long. Now it’s literally every minute",pihole,1645828735.0
10426,comment,0,hygdzxb,,"Excessive ads. Not trying to block ads.

It’s almost like Google/YouTube forget I just watched a 15 sec ad and boom! Another",pihole,1645836358.0
10427,comment,3,hyg4zcr,,"That's YouTube being extra predatory, not because of a PiHole installation.  They are awful and we all hate them here.  Someone will suggest YouTube Vanced",pihole,1645832316.0
10428,comment,0,hygdwk0,,I mean it only started as soon as I started using pinhole dns. Had to taken it off on my iOS and now it’s back to normal. Weird stuff,pihole,1645836315.0
10429,post,6,t1e7z8,Pihole display hostname instead of IP,"Hello,

Just wanted to share, i wanted my pihole to display hostnames instead of ip address an all i found are some broken scripts so i decided to fix them and share.

You need to configure your pihole as dhcp and run the script on your pihole (maybe install some python missing dependencies)

the fixed script is located in my repo:

[https://github.com/idan357/Public/blob/5df3a9736f2de625a29842b90bd5ed027a0f57e5/pihost.py](https://github.com/idan357/Public/blob/5df3a9736f2de625a29842b90bd5ed027a0f57e5/pihost.py)

the broken guides that i used  are:

[https://github.com/Chrus3/PiHost](https://github.com/Chrus3/PiHost)

and 

[https://web.archive.org/web/20190215140446/http://aquriousmind.com/pihole/](https://web.archive.org/web/20190215140446/http://aquriousmind.com/pihole/)

&#x200B;

The script update your host file automatically with each dhcp request, you can add it to boot with:

    sudo nano/etc/rc.local 

Add the command to launch PiHost at startup. Make sure to use the absolute reference to the file.

    sudo python3 /home/pi/pihost.py &",pihole,1645822364.0
10430,comment,3,hyfgyxa,,Interesting will check it out.,pihole,1645822521.0
10431,comment,1,hyfi38c,,"I just use conditional forwarding for each of my subnets, and set the /local= flag for my domains on the dns servers responsible for them so you don’t get dns loops. 

You can have the DHCP server responsible for your clients be the DNS server for them answering their hostname requests. That way it’s dynamic so if you connect another device you can immediately contact it by hostname

Pihole should automatically grab hostnames for your devices if you have conditional forwarding enabled so I don’t see the point of this. Though I haven’t used it as a DCHP server ever so that may be my misunderstanding",pihole,1645822961.0
10432,comment,3,hyfiw10,,I did the conditional forwarding but I didn't see any change,pihole,1645823277.0
10433,comment,1,hygbnw9,,"Odd. That might be down to the DNS server running DHCP in that case. Is it a home router? Always worked for me with both OpenWRT and AsusWRT firmwares. You can reset pihole, run wireshark, check dns requests going from pi to router. Can pin down if its a pihole issue or if the router isn’t responding with the names properly. Depends how much you want to troubleshoot it.",pihole,1645835287.0
10434,post,1,t1bber,/etc/hosts queries working in reverse only?,"I added an entry to my /etc/hosts file on my pihole, let's say it's this:

10.1.1.86 foo

When I try to ping foo from a Windows desktop, it claims it can't find it.  When I do a ping -a and the IP, it comes back as foo.  Nslookup also shows an entry which implies the ping would resolve, but it doesn't.  Here's the raw console text:

    C:\Users\user>ping foo
    Ping request could not find host foo. Please check the name and try again.
    
    C:\Users\user>nslookup foo
    Server:  pi.hole
    Address:  10.1.1.53
    
    Name:    foo
    Address:  10.1.1.86
    
    
    C:\Users\user>ping -a 10.1.1.86 -n 1
    
    Pinging foo [10.1.1.86] with 32 bytes of data:
    Reply from 10.1.1.86: bytes=32 time=59ms TTL=63
    
    C:\Users\user>    

I've tried the ""Advanced DNS settings"" checkboxes, but nothing seems to change this behavior.  Any ideas?",pihole,1645814877.0
10435,comment,2,hyf2zzc,,"Use FQDN. If that works, then you need to set the default DNS domainname on the host from which you are pinging.

Your DNS record on the pi-hole should be in this format;

10.9.9.33    hostname.domainname    hostname",pihole,1645817042.0
10436,comment,1,hyf31ml,,"Ping is not a reliable tool to check DNS resolution.  Your nslookup shows that Pi-hole is correctly resolving the domain name to the IP per your hosts file mapping.  At that point, Pi-hole has done its job and the rest of the ping process is outside the realm of Pi-hole.",pihole,1645817060.0
10437,post,7,t19455,custom dnsmasq on Google Home/Nest Routers,"Is there any way to setup a custom dnsmasq on Google Home/Nest Routers? I know the advanced settings on these are fairly limited. I originally went with the setup because simply they just work, easy setup and low maintenance. But I'd like to be able to set pihole up as the dhcp/dns host and monitor clients from there.

&#x200B;

Thanks!",pihole,1645809248.0
10438,comment,3,hyejss6,,This is a good question to ask on the Google Home/Nest forums.,pihole,1645809787.0
10439,comment,2,hyfpxya,,"I think google home devices are hardwired to google dns servers as default over the dhcp provided values. The only way I could make google home use pihole was to block google servers at the router level. The google home device first complained, and then it started using pihole dns after a while, but with frequent complaints about not being connected to the internet",pihole,1645826056.0
10440,comment,2,hyel5bs,,"Good thought, will do. Thanks!",pihole,1645810295.0
10441,comment,1,hygcq6l,,You can cause all DNS queries (port 53) to go through the router using nftables or iptables.  See [this project](https://github.com/JVital2013/pihole-router) for the iptables code.,pihole,1645835774.0
10442,post,3,t16aqh,Dexcom Whitelist Domains?,"We just got a Dexcom blood glucose monitor in the house, and the apps are terrible.  My Pi-Hole is not the DHCP server so unless I set a static IP, getting client traffic is not possible.  So, I can't debug the issue right now.  I was wondering if anyone knew domains or regex for whitelisting to get the Dexcom apps to work correctly.  I'm sure I can figure it out later, but if someone has done it before, I'd be grateful for the help.",pihole,1645801966.0
10443,comment,1,hyfjw5a,,I’m using Dexcom G6 and Loop app on iOS on my network and haven’t had any issues with PiHole.,pihole,1645823676.0
10444,post,3,t1605x,Pihole in Azure container won't update gravity,"Trying to run Pihole in an Azure Container Instance.

When I select `Tools | Update Gravity`:

      [i] Neutrino emissions detected...
      [✓] Pulling blocklist source list into range
      [i] No source list found, or it is empty
    
    
      [i] Preparing new gravity database...
      [✗] Unable to create new database /etc/pihole/gravity.db_temp
      Error: near line 191: stepping, database is locked (5)
      [✓] Cleaning up stray matter
      [✓] FTL is listening on port 53
         [✓] UDP (IPv4)
         [✓] TCP (IPv4)
         [✓] UDP (IPv6)
         [✓] TCP (IPv6)
    
      [✓] Pi-hole blocking is enabled

I'm using Azure blob storage for the two shares.

The `deploy.yaml`:

    name: 'pihole-group'
    apiVersion: '2018-10-01'
    location: centralus
    tags: {}
    properties:
      containers:
      - name: pihole
        properties:
          image: pihole/pihole:latest
          ports:
          - protocol: UDP
            port: 53
          - protocol: UDP
            port: 67
          - protocol: TCP
            port: 80
          - protocol: TCP
            port: 443
          environmentVariables:
          - name: TZ
            value: America/Chicago
          - name: WEBPASSWORD
            value: [redacted]
          resources:
            requests:
              memoryInGB: 1.0
              cpu: 1
          volumeMounts:
          - name: pihole
            mountPath: /etc/pihole/
            readOnly: false
          - name: dnsmasq
            mountPath: /etc/dnsmasq.d/
            readOnly: false
      restartPolicy: Never
      ipAddress:
        ports:
        - protocol: UDP
          port: 53
        - protocol: UDP
          port: 67
        - protocol: TCP
          port: 80
        - protocol: TCP
          port: 443
        type: Private
      networkProfile: 
        id: [redacted]
      osType: Linux
      volumes:
      - name: pihole
        azureFile:
          shareName: container-pihole-etc-pihole
          readOnly: false
          storageAccountName: companyblob
          storageAccountKey: [redacted]
      - name: dnsmasq
        azureFile:
          shareName: container-pihole-etc-dnsmasq
          readOnly: false
          storageAccountName: companyblob
          storageAccountKey: [redacted]
    

Any suggestions?",pihole,1645801213.0
10445,post,1,t14taa,"""Mailhub"" requested by localhost every minute (or SMTP-Domain)","I don't know, if here's the right place but I noticed a strange behavior checking my Pihole Queries yesterday:

(Seems to be related to this post [https://www.reddit.com/r/raspberry\_pi/comments/6b8gnw/how\_to\_disable\_email\_client/](https://www.reddit.com/r/raspberry_pi/comments/6b8gnw/how_to_disable_email_client/)

Found here

[https://pi-hole.net/blog/2017/05/31/what-really-happens-on-your-network-redux/#page-content](https://pi-hole.net/blog/2017/05/31/what-really-happens-on-your-network-redux/#page-content)

But sadly: No answers. :( )

Localhost requested the DNS of my Mail-Server SMTP every minute, every hour, every day. I used mailutils to atomatically sent out a mail with a rsync cron job log I have running every night to back up my NAS drive attached to the PI.

But since this creates just a lot of wanted ""spam"" I thought: If this is the problem creating thousands of request I disable this feature. After I removed ""mailutils"" and the smtp domain of my provider from my PI the mailhub domain took over and localhost is requesting this domain every minute.

I monitored my network traffic and it's just lighttpd (using unbound) running, nothing else.

Any idea? Can this be ignored? Has a bot-network taken over my pi? ;)",pihole,1645797904.0
10446,comment,3,hye46qi,,This is a good question for the Pi or mail client forums.  It's not a Pi-hole issue.,pihole,1645803815.0
10447,post,39,t14m9x,Why do I have so many queries from my router?,,pihole,1645797392.0
10448,comment,26,hye8cfw,,"Quite often devices use the router as their dns server which then points at your pi.  Obviously in your case you have your laptop, phone, etc directly querying the pi-hole so it’s not all.

So I’d recommend checking what other devices are on your network.  Any smart TVs, IoT devices, etc that could still be hitting the router instead of directly to your pi-hole for dns.",pihole,1645805442.0
10449,comment,6,hye8tij,,"I see this too. Somebody correct me if I'm wrong here, but I believe some of your IoT gear simply uses the router as the DNS server regardless of what DHCP is telling it. Your router may be configured to use your pihole as DNS, and may pass out that IP from the DHCP server, but still answers DNS queries by querying the pihole and passing along the response.  This may have become part of the IoT device saved configuration from before you stood up that pihole. Either way, the pihole is still doing the blocking, but the statistics are off.",pihole,1645805627.0
10450,comment,2,hyeowpf,,How can you display hostnames rather than ip addresses?,pihole,1645811713.0
10451,comment,3,hye3fp5,,We can't know this with the information you have provided. What domains is the router requesting?,pihole,1645803515.0
10452,comment,1,hyf0cgx,,"Most Linux-based things don’t seem to cache DNS results, so if the router itself is trying to phone home for updates or has to look up other upstream services, it could be generating this traffic itself.",pihole,1645816011.0
10453,comment,1,hyfkb1n,,"The default behvaiour if a DNS is not manually set, is to set the gateway (router) as the main DNS server. The router then forwards requests to your router, so that will appear as the origin in pihole.",pihole,1645823842.0
10454,comment,1,hygu9aq,,"I see similar but I have my router hijack any direct dns to other than my Pihole, Roku is a prime offender here of directly querying Google but mobiles do it too. Think it is possible to actually show the devices if the Pihole is moved to another subnet but I've yet to try implementing that, the destination tells me enough to identify the offenders.",pihole,1645844043.0
10455,comment,-1,hygf7x9,,"Don’t point your router are your ph-hole, just the clients . And then point pi-hole to your  unbound DNS server.",pihole,1645836931.0
10456,comment,0,hyf1286,,"Not FROM your router, but to the devices connected to it. It's the hostname+fritz.box appended to it (can be changed in the router settings)",pihole,1645816288.0
10457,comment,5,hyeakty,,Thanks for your response. It's just that I we don't really have any other devices than that. So to me it seems like only a small percentage of the queries are directly going to the pihole.,pihole,1645806300.0
10458,comment,1,hyeap3u,,Thanks! Good to know it's nothing to worry about.,pihole,1645806345.0
10459,comment,7,hyet3s1,,"With peace and love idk what the other guy is talking about(not saying he's wrong), there's something in the Web interface called conditional forwarding. Just gotta fill in a few things. it's really easy.",pihole,1645813283.0
10460,comment,3,hyfe0eb,,Having PiHole act as DHCP also does this.,pihole,1645821366.0
10461,comment,2,hyewdes,,Thanks both will try.,pihole,1645814507.0
10462,comment,2,hyiotf4,,"if not using pihole for DHCP, you setup conditional forwarding on the DHCP page",pihole,1645886824.0
10463,comment,0,hyerdi8,,"You need to login to the pihole and do ""sudo nano /etc/hosts"" and put in the ip address hit tab twice, put in device name, hit enter and put in the second device and so on.  When you are done hit Ctrl X and enter to save it. Then give it a little time to read the file or reboot.",pihole,1645812642.0
10464,comment,0,hye7hlt,,[https://imgur.com/a/mikjyvu](https://imgur.com/a/mikjyvu) seems normal to me,pihole,1645805108.0
10465,comment,0,hyg67s0,,"That's the right answer. I think disable the router's DHCP server and replacing it by the one pihole can provide should give more precise stats.

Blocking is occurring nonetheless.",pihole,1645832857.0
10466,comment,2,hyed1dm,,"I implemented a pihole after putting firesticks and smart TVs on my network. Those devices are using original network configurations while simply renewing their (reserved) DHCP leases. If I trudge around my house and reconfigure them all, then they'll show up as discrete clients.  And firesticks are really chatty devices, constantly pre-loading content so it's ready to go when you switch to them.",pihole,1645807235.0
10467,comment,1,hyfmc2q,,"I only have queries from my router, because I'm too lazy to configure each of my devices. I only configured my router to point to the pi-hole and pi-hole only. This is definitely fine :)",pihole,1645824637.0
10468,comment,2,hygfai6,,This is the way.,pihole,1645836965.0
10469,comment,1,hyj78at,,"I cannot find it, is it at the bottom of the page?",pihole,1645894779.0
10470,comment,3,hyf40jo,,no,pihole,1645817442.0
10471,comment,2,hyef85g,,"As I mentioned in the other comment, we don't have any devices in the house other than what you see in the image. Not even a TV or a firestick or anyting like that. So I do wonder why it is like that.",pihole,1645808054.0
10472,comment,1,hyf80r3,,"I have two Rokus and they spammed my piholes to the point that they are being rate limited. It’s funny to see how many requests they generate, close to 25,000 per 24 hour period.

I’m certain these device makers will be baking in DoH going forward, so I am grateful for Pihole until that day comes.",pihole,1645819003.0
10473,comment,2,hyjz7ho,,"settings, DNS, advanced, conditional forwarding is under there",pihole,1645906216.0
10474,comment,1,hyhjfhl,,Actually he/she is not wrong,pihole,1645857883.0
10475,comment,1,hynxc3h,,Thanks,pihole,1645981621.0
10476,comment,0,hyigfz5,,"In a dynamic IP environment yes, he/she is",pihole,1645882467.0
10477,comment,1,hyjqw0g,,"1. That’s an assumption you’re making, OP didn’t say anything about their IP environment.


2. Saying ‘no’ without any context serves to help no one. You just come off rude.",pihole,1645902786.0
10478,comment,1,hyjz163,,1) ok... sure. let's assume that OP is using DHCP as we are talking about a DNS/DHCP server,pihole,1645906141.0
10479,post,2,t14e1n,See device names without DNS set in PiHole Top Lists,"Hello, I am sure this has been asked before, and I believe I can't do it, but my question is as follows.  I have a TCL ROKU TV in a bedroom.  It does not allow DNS to be manually set, but I have DNS on my router set to PiHole.  I believe it is working as it should, but I want to see the TV show up in the Top Lists on the dashboard.  I assume all if its queries show up under my router at this time, on the Top Lists.  Is there a way to get this to work as I want?  I have tried all settings I can find in the Linksys Router and PiHole.I have DHCP enabled on my router, and a reservation for all devices on my network.",pihole,1645796727.0
10480,comment,2,hye3a9v,,https://discourse.pi-hole.net/t/why-do-i-only-see-my-routers-ip-address-instead-of-individual-devices-in-the-top-clients-section-and-query-log/3653,pihole,1645803454.0
10481,comment,1,hye59uo,,"My concern with using pihole for dhcp is that if for whatever reason the pihole goes down while I am not home, nobody in the house would have Internet.  So I am trying to avoid that. I overlooked including this info originally in post.",pihole,1645804243.0
10482,comment,2,hyedeqw,,"Having DHCP on the pihole is a bit of a risk in that regard. I have faced this exact issue. 

But keep in mind the DHCP only fires when the device is first making the request on the network. Once it is given and IP address, it will keep working with that IP until the lease expires. So if DHCP goes down devices with address will keep working.

Your much bigger problem is when DNS goes down. Active connections won't drop, but you won't be able to do much of anything online without working DNS. 

This is a much bigger problem. During covid lockdown I had to teach my kids how to reset the modem, router and pihole so they didn't miss class because one of those components was misbehaving.",pihole,1645807374.0
10483,comment,1,hyeau3d,,">if for whatever reason the pihole goes down while I am not home, nobody in the house would have Internet

This is the case whether Pi-hole is your DHCP server or not.  Pi-hole is the DNS server for the network, and if it goes down, there is no DNS resolution for any of the clients.

DHCP transactions are occasional.  Once a client has an IP and DNS server from the DHCP server, the client doesn't go back to the DHCP server until it is time for lease renewal.  If you have a 7 day lease duration, the DHCP server can be down for a bit less than 7 days with no impact on your network, unless that DHCP server is also the DNS server.",pihole,1645806397.0
10484,comment,1,hyfmbgy,,Think I’m gonna set up dhcp on pi and see if that resolved my Issue,pihole,1645824631.0
10485,comment,1,hyesmn0,,"That is a fair point on the leases. Maybe I just need to accept the fact my pi likely isn’t gonna go down. Currently I have all important devices to have 8.8.8.8 as secondary dns so if my pi fails though.  

If I got all this working how I want I wouldn’t need to point all devices manually to my pi dns which would be nice.",pihole,1645813109.0
10486,comment,2,hygjtpn,,Pihole uses dnsmasq.  This is a lightweight dhcp server which can be turned on or off.  It is already there and working since this program is what is blocking the ads.,pihole,1645839084.0
10487,comment,3,hyeusoa,,">Currently I have all important devices to have 8.8.8.8 as secondary dns so if my pi fails though.

Don't do this.  Given multiple DNS servers, clients are free to use any of them at any time, which will result in some DNS traffic bypassing Pi-hole.

There is no reliable concept of **primary** or **secondary** DNS.  It is more like **this DNS server** and **another DNS server**.",pihole,1645813911.0
10488,comment,1,hygk5ed,,Yup. I have it off currently as I’m using my router for dhcp.  I plan to switch to pi for Dhcp over the weekend and see if that resolves my issue.,pihole,1645839235.0
10489,comment,1,hyfm4kw,,"Thought 2nd was a failover, hopefully setting up dhcp on pi resolves my issue and I can do away with manually configuring each device.",pihole,1645824556.0
10490,post,6,t14dm7,RAM/Compute concerns (running on SteamLink),"Hello everyone. I got Pihole working on a Steamlink with arch linux (1 armv7 core, 256MB of RAM).

I plan to use it on a small network (<6 clients). I have ~300k domains on blocklists.

So far, my RAM usage hovers around 8-10%, but don't know if it will increase over time.

Since I'm just setting it up, should I discard it and go with the RaspberryPi route/other HW? Could I face some issues down the road?

I'm not running anything besides pihole (and I don't plan to add any other service)

Thanks!",pihole,1645796694.0
10491,comment,2,hye378b,,"Note that Arch is not supported by the Pi-hole team. Arch has their own implementation. 

https://wiki.archlinux.org/title/Pi-hole",pihole,1645803420.0
10492,comment,1,hye4ea3,,"Hi dev! :) Yup yup, I'm aware of that and that's why I don't want to bother anyone with technical/bug stuff, I know I'm being stubborn and using something on an OS that's not supported, just wanted to know how RAM usage will evolve while I keep using pihole.

Is the question still out-of-reach? 
(Thx for your amazing work btw)",pihole,1645803898.0
10493,comment,1,hye4q4i,,"RAM usage should not increase as you use Pi-hole. 24 hours of query data and your gravity list are typically in memory at once. 

I can't speak for any differences in the Arch implementation.",pihole,1645804030.0
10494,comment,1,hyeb0nb,,"Perfect, in that case I think I'm all set. Thanks a lot.",pihole,1645806466.0
10495,post,16,t13k05,iPhone not using piHole anymore,"As of this morning, my iPhone does not seem to use the piHole anymore. It is configured to use it as DNS in its network settings (at this point I cannot set it at my router so I configure devices manually). Other devices use it as expected. Looking at the query log the iPhone does not show up. Any ideas what I can do to fix this?  


UPDATE: I found a solution and posted in a comment below. It had to do with my network topology but I don't know if it a piHole problem, an access point problem or a router problem",pihole,1645794168.0
10496,comment,16,hye1oua,,"Do you have the phone configured to use cellular data in the event of WiFi problems?

Edit - the Setting is **Wi-Fi Assist** in the ***Settings > Cellular*** menu on the iPhone.",pihole,1645802813.0
10497,comment,8,hydjdgx,,iCloud Private Relay.,pihole,1645794387.0
10498,comment,3,hydk21x,,IPv6 points to another DNS?,pihole,1645794753.0
10499,comment,3,hyeb2es,,"unrelated but while i’m not able to change dns servers on my router as well, i could disable the dhcp server and turn on the one on pihole and configure it to distribute itself as dns server. not sure it would solve the problem but it would solve the “configure devices manually” issue.

also to check on network settings from my iPhone I use Net Analyzer (free version), maybe there’s some clue you don’t see in the settings there",pihole,1645806485.0
10500,comment,2,hyerd1q,,"So here is what I have. I have a modem, a router firewall (Firewalla Gold), a mesh wifi (eero pro 6), a switch.

Initially I laid it out in this way

Modem -> Router (Firewalla gold) -> WiFi AP (eero) -> Switch -> Docker Host -> piHole

Modem -> Router (Firewalla gold) -> WiFi AP (eero) -> iPhone (via Wifi)

All traffic (both wired and wireless) went through the eero and everything worked.

To try optimizing things, I change the topology to connect the switch to the router directly:

Modem -> Router (Firewalla gold) -> Switch -> Docker Host -> piHole

Modem -> Router (Firewalla gold)  -> WiFi AP (eero) -> iPhone (via wifi)

This way the wifi traffic would go through the eero and the wired traffic directly to the router. Did not change DHCP or IP addresses, just moved one cable.

In the second configuration the wired devices go through the piHole, the wireless ones dont.

Reverted back to the initial configuration and wireless devices go through the piHole

Anyone have any idea why?",pihole,1645812637.0
10501,comment,1,hydr3m9,,"Maybe you want to install Pivpn with Wireguard in your raspberry pi and connect to that everytime from your iPhone. I do it even when I'm in the house with my iPhone (it's always on), and don't have any problem whatsoever.",pihole,1645798249.0
10502,comment,1,hyekgef,,Not familiar with iPhone but has it switched to DNS over HTTP? That would cause it to ignore piHole.,pihole,1645810037.0
10503,comment,2,hyehqcb,,When I first setup my pihole my iPhone did this. OP should definitely check this.,pihole,1645809003.0
10504,comment,3,hydjgy0,,it's off,pihole,1645794437.0
10505,comment,2,hydl5wm,,Doesn't look like. I only see IPv4 addresses in the network config on the iPhone,pihole,1645795339.0
10506,comment,2,hydntcg,,I enabled IPv6 and configured the DNS entry with an IPv6 address and still no joy :(,pihole,1645796685.0
10507,comment,2,hyex88l,,"Because in the second setup there is no route between your wireless and wired networks. 

The modem is not a router. Internal traffic is not going to go iPhone > AP > Modem > router > switch > pihole.

With the current setup you essentially have two LANs. WiFi can only see other WiFi devices and wired other wired devices.You can prove this by trying to ping your pihole IP from your iphone. ""No route to host"".

All your internal traffic needs to flow through your router.

The configuration is always Modem > Router > rest of your network.",pihole,1645814826.0
10508,comment,2,hydrevq,,"I use docker on my ubuntu server, not a raspberry pi. Also, I use a company phone and cannot really use a VPN on it",pihole,1645798394.0
10509,comment,1,hyewkqo,,Sure sounds like an awful lot of hoops to jump through for something that should just work.,pihole,1645814582.0
10510,comment,2,hydoedn,,Ok. If iPhone doesn‘t show IPv6 settings (own IP address etc) then my guess was wrong.,pihole,1645796966.0
10511,comment,2,hyexpwq,,"Yes, I made a mistake in the post (just fixed it). Both the switch and the AP are connected to the router, not the modem. I can browse the piHole from the phone",pihole,1645815014.0
10512,post,3,t132zl,Can I listen on exactly 2 interfaces?,"I would like to listen on eth0 and wg0 only, is that possible? I'd prefer not to listen on all interfaces. I tried 'pihole reconfigure' but from setup it also only allows 1 choice.",pihole,1645792817.0
10513,comment,2,hydhcbp,,Don't configure the other interfaces. Pihole will still 'listen' on all interfaces but it's only able to listen to the interfaces that are configured and operational in the OS.,pihole,1645793253.0
10514,comment,1,hydrf6w,,"Oh ok, thanks a lot. That makes sense. So as long as I don't configure a tun0 on the pi then pihole doesn't technically listen on tun0?

edit: I mean, it ""listens"" but doesn't listen?",pihole,1645798398.0
10515,comment,1,hydsbz7,,"Exactly. PiHole is an app - it rides on top of the OS. And, for the most part, can't operate at the OS level. So if something is or isn't configured in the OS there isn't much PiHole can do about it.

I guess PiHole can ignore an interface if it's configured in the OS. But the opposite isn't true - if it's not configured in the OS PiHole can't decide to configure that port to listen for traffic.",pihole,1645798813.0
10516,post,2,t12emx,IP-address confusion,"I want to set up pihole but I am a little confused by the installation process wanting me to define a static IP.
I have all the IPs of my network set to static in my router, also the Raspberry Pi I want to install on (which is already running a print server).
I don't want the pihole installation messing with the static IP setting of the device, and it shouldn't be necessary as I already set it in the router.

I've read online that pihole doesn't CHANGE the setting but rather just wants to KNOW which static IP I'm using, so it wouldn't interfere with the router's settings.

Can someone confirm and/or clarify this for me?

In my experience devices can't connect to the router if both the router and the device want to use the same static IP address (even if it sounds like it should work). And I'd really like my router to set the IPs.",pihole,1645790558.0
10517,comment,3,hydgikt,,"When you set upPiHole it asks you to provide the static IP of your device, but by default it does not hand out reservations and can't/won't change your network's configuration. 

You can keep your static assignments on your router; PiHole has the option to be a DHCP server but it doesn't need to be.",pihole,1645792777.0
10518,comment,2,hye1ay8,,">	I don’t want the pihole installation messing with the static IP setting of the device
>	Can someone confirm and/or clarify this for me?

It won't.",pihole,1645802656.0
10519,comment,1,hydh1td,,"Thanks for clarifying, that's a relief. 😅
I only started familiarizing myself with IP assignment because of this setup and it confused me.",pihole,1645793087.0
10520,comment,1,hye2v6h,,"Thanks, got everything working as expected.",pihole,1645803287.0
10521,post,0,t1007u,Limit memory use Docker for Windows,"Hi swarm intelligence!

I've been running pi-hole on Windows for Docker for a while and would like to know if there are any options to limit memory use. Currently the Docker VMMEM process is using \~1GB of RAM. I'm using newest pi-hole version with Docker 4.5.1 for Windows with WSL2 backend. 

Is there any way to optimize memory use e.g. via .wslconfig file?

Thanks",pihole,1645781730.0
10522,comment,1,hye0esr,,This is a good question for the WSL or Docker forums.,pihole,1645802298.0
10523,comment,1,hyiyjvg,,Docker has documentation that tells you how to do it…,pihole,1645891175.0
10524,post,0,t0w2na,Pihole in Proxmox Container,"Trying to setup a backup Pihole in a Proxmox LXC container. Got everything up and running, except DNS queries weren't being resolved. Checked the logs on Pihole and determined this was because of the default setting for responding on networks one hop away. Assumed this was something to do with the container creating an extra hop and turned that off. Now the Pihole is processing and resolving DNS queries from my test client, great! However, for some unknown reason that resolution isn't making it back to the client. Pihole logs show it doing exactly what it's supposed to do, but the query never fully resolves on the client-side.

Did some Googling and Reddit searching and found people having similar issues while running Pihole in a non-privileged container, so I rebuilt it as a privileged container but am still seeing the same behavior. Also tried disabling the firewall in Proxmox in case that was interfering with the response traffic in some way, no dice.

Any suggestions?",pihole,1645767105.0
10525,post,5,t0sf7m,Blocking the newly nosy Wordle?,,pihole,1645756075.0
10526,comment,7,hycg26r,,"Here are the domains requested in Google Chrome MacOS when playing Wordle at this link:

https://www.nytimes.com/games/wordle/index.html

    www.nytimes.com
    a.nytimes.com

But, these lead to redirects via js to two additional domains requested, both of which are blocked by default by Pi-hole.

    googletagmanager.com
    www.googletagmanager.com

Details from uBlock Origin logger:

    +0			www.nytimes.com	1	image	https://www.nytimes.com/games/wordle/images/wordle_logo_144x144.png
    +0			www.nytimes.com	1	other	https://www.nytimes.com/games/wordle/manifest.json
    +0			www.nytimes.com	1	image	https://www.nytimes.com/games/wordle/images/NYT-Wordle-Icon-32.png
    +0	||nytimes.com/svc/nyt/data-layer?	--	www.nytimes.com	1	xhr	https://a.nytimes.com/svc/nyt/data-layer?sourceApp=games-crosswords&referrer=&assetUrl=https%3A%2F%2Fwww.nytimes.com%2Fgames%2Fwordle%2Findex.html
    +0	googletagmanager.com/gtm.js	<<	www.nytimes.com	3	script	https://www.googletagmanager.com/gtm.js?id=GTM-P528B3&gtm_auth=tfAzqo1rYDLgYhmTnSjPqw&gtm_preview=env-130&gtm_cookies_win=x
    +0	||googletagmanager.com/gtm.js$script,redirect-rule=googletagmanager.com/gtm.js	--	www.nytimes.com	3	script	https://www.googletagmanager.com/gtm.js?id=GTM-P528B3&gtm_auth=tfAzqo1rYDLgYhmTnSjPqw&gtm_preview=env-130&gtm_cookies_win=x
    +0	||googletagmanager.com^	--	www.nytimes.com	3	script	https://www.googletagmanager.com/gtm.js?id=GTM-P528B3&gtm_auth=tfAzqo1rYDLgYhmTnSjPqw&gtm_preview=env-130&gtm_cookies_win=x
    +0			www.nytimes.com	1	font	https://www.nytimes.com/games/wordle/fonts/karnakcondensed-normal-700.woff2
    +0			www.nytimes.com	1	script	https://www.nytimes.com/games/wordle/main.4d41d2be.js
    +0			www.nytimes.com	1	doc	https://www.nytimes.com/games/wordle/index.html
    +0	https://www.nytimes.com/games/wordle/index.html",pihole,1645766613.0
10527,post,4,t0rxnk,Blocking iOS App Store ads,"I have a feeling it’s the same situation as YouTube, but on some mobile games I keep getting ads from the iOS App Store. Are the domains for those blockable or do they heavily overlap with the App Store functionality.",pihole,1645754668.0
10528,comment,2,hyc9qdo,,"My kids are forever complaining about how pihole blocks in-game apps from some of their games. The developers of these apps make it so that viewing an ad gives you extra content, so it must work on at least some of them.",pihole,1645763216.0
10529,comment,2,hybrzof,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1645754906.0
10530,comment,0,hybsgo5,,"I know I can look through the logs, most of the queries  related to the ads are random AWS or azure domains, and it’s hit or miss if they break the App Store. I’m seeing if there’s any blocklist that covers said App Store ads without limiting functionality.",pihole,1645755122.0
10531,post,14,t0gfd7,Pihole and ITV hub,"I'm in the UK, and with very little effort I've got ads blocked on ITV, channel 4 and channel 5 on demand.  Channels 4 and 5 block flawlessly, but ITV usually throws an error necessitating ""try again"", which works twice.  The third ad break has me going back to ""home"" before resuming, then all is good again for 2 and breaks.  Still far quicker and less annoying than watching ads, but wondered if other users were experiencing this behaviour?",pihole,1645723720.0
10532,comment,3,hyb32lw,,"Block the following domain for itv & channel 5

tom.itv.com

c5ads.ott.skymedia.co.uk",pihole,1645744107.0
10533,comment,3,hyad7n0,,"To be honest, I'm not sure I set about to deliberately block channel 5 ads, as I rarely use their on demand service.  I set up the most commonly used for ITV and channel 4, so maybe the ads are served from the same place?  I've only added 17 domains.  I'll grab them in a bit.",pihole,1645734343.0
10534,comment,2,hy9nzoz,,Although I've not really looked into it what urls are you blocking for channel 5? It's the only channel we regularly watch online,pihole,1645724879.0
10535,comment,1,hybpm7r,,"We're on Scottish equivalent - STV player - and tbh it's the one streaming service where I can't block ads at all! Can only see queries to a limited number of domains, cant find any to block that stop ads but let the rest run.",pihole,1645753833.0
10536,comment,1,hzq4a7l,,"* Based on my testing the domains that need to be blocked vary with the app being used to stream iTV.  Firestick, Smart TV, Browser, etc....  I use a Firestick w/the official iTV app and the behaviour Possible-Ad-2682 described matches mine.
* However I have noticed a difference depending on the video being played.
   * LINGO -> plays back with no issues
   * No Return & Trigger Point -> Commercial breaks present error message ""try again"". Selecting ""try again"" continues playback. NOTE 1: After 10 seconds ""try again"" switches to ""wait"" and there is no way to continue. NOTE 2: Occasional errors occur during playback (not @ commercial) - these have no way to continue.  NOTE 3: Occasionally no error is presented at a commercial break - the show continues without intervention. Unable to determine the pattern / cause. 
* My Current iTV blocklist
   * toots-a.akamaihd.net - Exact blacklist - iTV Adverts
   * app.launchdarkly.com - Exact blacklist - iTV Data Collection
   * clientstream.launchdarkly.com - Exact blacklist - iTV Data Collection",pihole,1646673446.0
10537,comment,1,hyb8n5j,,Please share!,pihole,1645746430.0
10538,comment,2,hy9qkkb,,">what urls are you blocking for channel 5

Domains, not URL's.",pihole,1645725840.0
10539,comment,1,hymx5i9,,"Busy with work the last few days, but will share my blocked domains as soon as I have time.",pihole,1645964283.0
10540,comment,1,hz7o7rj,,Did you manage to block itv hub ads. Mine plays but then gets an error screen when an ad should play,pihole,1646331458.0
10541,comment,1,i2r279j,,"Yes, this is exactly what I get, but clicking past them mostly works.  Occasionally I'll have to exit the show and go back in. Still much faster and infinitely less annoying than ads.",pihole,1648667305.0
10542,post,6,t0fn8h,Pihole stopped resolving and admin panel showing “NaN” data on the dashboard,"Internet has been flaky lately and was about to call up Spectrum and noticed when I went into the pihole dashboard all the data shows NaN and pihole is apparently offline….oddly enough I just SSH’d into it and was able to sudo apt upgrade

As well as pihole -up (which is up to date)

followed by pihole -g and all my lists are updated 

It is on a pi0 but I’ve never seen the dashboard load this slow before either even checking in the group management > adlists takes ages to load.",pihole,1645721715.0
10543,comment,2,hy9ghkb,,"Please generate a debug log, upload the log when prompted and post the token URL here.",pihole,1645722079.0
10544,comment,1,hy9jju1,,Is there by chance a way of doing it by command line? The web panel is very slow/unresponsive(?),pihole,1645723230.0
10545,comment,1,hy9malh,,`pihole -d`,pihole,1645724251.0
10546,comment,1,hy9qwu1,,ok the token is https://tricorder.pi-hole.net/BgNCFpqF/,pihole,1645725967.0
10547,comment,1,hy9vnnf,,"What is the output of the following command from the Pi terminal:

`echo "">stats >quit"" | nc localhost 4711`",pihole,1645727749.0
10548,comment,1,hy9xpgr,,"nc: getaddrinfo for host ""localhost"" port 4711: Name or service not known",pihole,1645728529.0
10549,comment,2,hya1kap,,"Restart FTL with the following command, then run the previous command again:

`sudo service pihole-FTL restart`",pihole,1645729982.0
10550,comment,1,hyaq10z,,">echo "">stats >quit"" | nc localhost 4711

dietpi@DietPi:\~$ sudo service pihole-FTL restart  
sudo: unable to resolve host DietPi: Name or service not known  
dietpi@DietPi:\~$ echo "">stats >quit"" | nc localhost 4711  
nc: getaddrinfo for host ""localhost"" port 4711: Name or service not known  
dietpi@DietPi:\~$",pihole,1645739067.0
10551,comment,1,hybaivi,,">echo "">stats >quit"" | nc localhost 4711

dietpi@DietPi:\~$ sudo service pihole-FTL restart  
sudo: unable to resolve host DietPi: Name or service not known  
dietpi@DietPi:\~$ echo "">stats >quit"" | nc localhost 4711  
nc: getaddrinfo for host ""localhost"" port 4711: Name or service not known  
dietpi@DietPi:\~$",pihole,1645747232.0
10552,comment,1,hyb0vm3,,"Are you using the DietPi installed version of Pi-hole, or did you install Pi-hole using our install script?

In either event, I would run `pihole -r` and select the ***repair*** option.",pihole,1645743230.0
10553,post,1,szfvlv,Orange pi zero 2 + additional question.,"I've been looking in to setting up pi hole for some friends, and am wondering whether [this](https://m.aliexpress.com/item/1005001823662622.html?gatewayAdapt=Pc2Msite&spm=2114.12010612.8148356.7.17379c73vPsjxT) would be good performance wise, 

2nd question, what would be a good os to use with it? I'm thinking of using debian, but would there be a better option?

The device looks good enough, but I am wondering whether anyone else has had issues/success with it.

Thank you

Edit: might go with armbian as the os",pihole,1645617893.0
10554,comment,1,hy8v4w7,,That device will work fine. Any of the OS's you mentioned will also work.,pihole,1645713882.0
10555,comment,1,i79a32v,,"Hi,

Did Armbian work ?

Aliexpress page explicitly suggested to download their linux image and not to install armbian",pihole,1651641378.0
10556,comment,1,hy911zv,,"Thanks for your response, based on the product info, It looks like armbian Is the most stable/supportive for the zero 2, so I think I'm going with that.",pihole,1645716246.0
10557,comment,1,i7prffr,,"Yes, armbian worked beautifully, probably better than the ""official"" ones too.",pihole,1651953842.0
10558,post,2,t08n78,PiHole - Filter by Client?,"Hello! I use Adguard, but I want to switch to PiHole. Can I set up different filters for different clients with PiHole like I can with AdGuard? So forbid the children DNSs that are otherwise allowed etc?

I can not set up PiHole as a DNS server, but must set each device manually - which works well with Adguard. Here I can then assign filters etc. to each client. Is this now also possible with PiHole? Thanks!",pihole,1645701596.0
10559,comment,3,hy8fdsz,,"Yes, pi-hole lets you put clients into groups and then assign blocklists to that group.",pihole,1645706355.0
10560,comment,2,hy8fl12,,"Yes, you should be able to, it's been a while since I've done it so I can't really say how well it works.

There is a 'Group Management' section where you set up the groups you want, then you can add manually blocked domains or addlists to those groups to make your filters.  Once you have done that, you can add the clients to what group you want. This is done by the MAC address in a dropdown box. Select your device and assign it to the group.

Might be easier to block everything and make an allowed list. This way when kids have friends over and they connect they also get blocked.",pihole,1645706467.0
10561,comment,2,hy8vbcx,,https://docs.pi-hole.net/database/gravity/groups/,pihole,1645713958.0
10562,comment,1,hy8pc43,,Perfekt! Just what I’m looking for. Thanx!,pihole,1645711357.0
10563,comment,1,hy8p7uk,,Ahhh. That sounds great. Thank you.,pihole,1645711302.0
10564,comment,2,hy9blsw,,"> https://docs.pi-hole.net/database/gravity/groups/
Been looking for this for a while. I wanted to separate the kids into a different DNS upstream server. Thanks as well!",pihole,1645720232.0
10565,comment,1,hy90qz9,,Thanx!!,pihole,1645716129.0
10566,post,4,t01d7k,"Looking for help setting up a 2nd PiHole and Gravity Sync - Install went well, but doesn't seem to be working.","Hello,

I've gone through the setup for a 2nd PiHole using Gravity Sync.  However, it doesn't seem to work correctly.  

I assume that when I pull the plug on my first PiHole, then the second one should kick in and it should continue to provide me with internet.  

That doesn't happen.

It doesn't seem to be using the second PiHole.  I got no errors or issues when setting up Gravity Sync...

Wondering where to start troubleshooting.

Thanks.",pihole,1645675695.0
10567,comment,3,hy73l1u,,"For gravity sync specifically, contact the developer on his Github issues page. 

As for the two Pi-Holes: how are they advertised to clients?  Are clients aware of the existence of two Pi-Holes?",pihole,1645676186.0
10568,comment,2,hy7414s,,Do you have both of your pi-holes being configured as your client’s DNS servers? Pi-hole #2 should be the 2nd DNS server listed and get to work if #1 isn’t available.,pihole,1645676398.0
10569,comment,1,hy7dkjq,,"It would be helped to know what you mean by *the second should continue to provide you with internet*

Running multiple DNS servers internally isn’t a challenge in terms of high service availability. This includes piholes. However you configure your clients to get the values for DNS servers should bet set to hand out each one you want them to use. 

If this is dhcp on the router, no issue. Static entries, again no issue. If one of the piholes is doing DHCP then you have to decide how you want to handle the fact that if one goes away the other is still there to answer name resolution (and might be used at any time not just in a fail over state) but unless gravitysync is also doing the leases and checking to see if the other pi is there and answering dhcp requests, ready to start a dhcpd process and then kill itself if primary comes back - dhcp will be broken. 

Thank fully the fix doesn’t need to be that hard. You can run two non-overlapping scopes. One on each. This might mean for burps if a lease expires and a new one comes from the other pool. You can also overlap the scopes but only for static leases. 

I should add that the dhcp problem also might be safely ignored if you set a lease long enough that you can sort out the problem on the dhcp-pihole. 

My understanding is gravitysync is mostly for syncing the gravity lists and white/black lists to reduce the overhead on managing multiple piholes.",pihole,1645681187.0
10570,comment,1,hy7t1q6,,I agree with the above: 1) Gravity sync is least important and the final topping 2) the Pi‘s need to have a different (static) IPv4 which both must be distributed (via DHCP or statically) to the clients 3) use the DHCP in the router (two DHCP is not what you want) 4) shut off IPv6 or care for it (not so easy) 5) both Piholes will be queried „randomly“ (client decision),pihole,1645690732.0
10571,comment,1,hycgjye,,"It doesn't ""kick in"", you should have both running at the same time and have both set in DHCP as dns servers. That way both get handed out to clients so that if one drops, the other will automatically respond. When both are running, either will respond.",pihole,1645766896.0
10572,comment,2,hy7a9iq,,"This sounds like it's likely the issue.  Depending on the OS, the order of DNS entries may not matter (they may round robin or pick the fastest resolver rather than going in sequential order).",pihole,1645679465.0
10573,comment,1,hy9d20m,,"Wait. I thought this could be accomplished in the router's DNS settings. I have it setup as:
DNS Primary: piHole 1
DNS Second: piHole 2

This way I wouldn't have to manually configure DNS setting and would let the router push these values. This is interesting.",pihole,1645720782.0
10574,comment,1,hy9dabj,,"In my situation, I guess piHole 1 works very well. I see traffic and stats. Where as piHole 2 has minimal traffic.",pihole,1645720868.0
10575,comment,1,hy9iu0p,,"You have it correct. Your DHCP server will hand out client DNS settings. What I’m asking is the router/DHCP configured this way or is the OP trying to use the pi-holes in high availability, two different approaches.",pihole,1645722960.0
10576,post,1,t016vl,Still can't get Pihole / PiVPN to work on Oracle Cloud but AWS works,"Follow up to [https://www.reddit.com/r/pihole/comments/swcw0n/cant\_get\_to\_admin\_page\_pivpn\_wireguard\_on\_vps/](https://www.reddit.com/r/pihole/comments/swcw0n/cant_get_to_admin_page_pivpn_wireguard_on_vps/)

I launched an Amazon EC2 instance following [this tutorial](https://github.com/mgrimace/PiHole-with-PiVPN-and-Unbound-on-VPS-) \- everything worked fine. When I follow the same steps in Oracle, I can't see the Pi-Hole admin page or use Pi-Hole as DNS for my VPN connection. 

The only difference that I see between Amazon and Oracle is that in Oracle has 2 users in ubuntu. It has the ""ubuntu"" user and another user called ""opc"". PiVPN makes you pick which user to install to - neither accounts work. 

I feel like this should be pretty simple, but for some reason there is some networking problem with Oracle's Cloud instance that I can't figure out. Any help is appreciated.",pihole,1645675203.0
10577,comment,2,hy9cqft,,"Firewall is blocking u, kindly run the below iptable rules to enable it

sudo iptables -P INPUT ACCEPT
sudo iptables -P OUTPUT ACCEPT
sudo iptables -P FORWARD ACCEPT
sudo iptables -F",pihole,1645720660.0
10578,comment,2,hzg490t,,Update: I finally set up [WireHole](https://github.com/IAmStoxe/wirehole) and it worked directly. Hope this helps somebody one day.,pihole,1646485415.0
10579,comment,1,hy9wj9y,,"hi rex,

I tried this and still no change. It didn't help.",pihole,1645728081.0
10580,comment,1,hyi5xcm,,"iptables -I INPUT 1 -s 192.168.0.0/16 -p tcp -m tcp --dport 80 -j ACCEPT
iptables -I INPUT 1 -s 127.0.0.0/8 -p tcp -m tcp --dport 53 -j ACCEPT
iptables -I INPUT 1 -s 127.0.0.0/8 -p udp -m udp --dport 53 -j ACCEPT
iptables -I INPUT 1 -s 192.168.0.0/16 -p tcp -m tcp --dport 53 -j ACCEPT
iptables -I INPUT 1 -s 192.168.0.0/16 -p udp -m udp --dport 53 -j ACCEPT
iptables -I INPUT 1 -p udp --dport 67:68 --sport 67:68 -j ACCEPT
iptables -I INPUT 1 -p tcp -m tcp --dport 4711 -i lo -j ACCEPT
iptables -I INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT

ip6tables -I INPUT -p udp -m udp --sport 546:547 --dport 546:547 -j ACCEPT
ip6tables -I INPUT -m conntrack --ctstate RELATED,ESTABLISHED -j ACCEPT




Try these command they should update ur firewall rules",pihole,1645875433.0
10581,post,147,szzg3y,"Where's the ""other"" coming from?",,pihole,1645670173.0
10582,comment,19,hy6t0id,,"Mine all say ""already forwarded' in the query logs.  No action was taken.",pihole,1645671264.0
10583,comment,13,hy6t59a,,https://github.com/pi-hole/FTL/pull/1284,pihole,1645671323.0
10584,comment,3,hy9ey73,,Its from the man in the basement,pihole,1645721499.0
10585,comment,5,hy6qru2,,"Wasn't getting this until recent update. Just curious why it started happening with the new update and what exactly it means.

It's coming from multiple devices on my network so not sure what's causing it.

And the only upstream servers I have it set to use in the web UI is the 2 local hosts that are shown.",pihole,1645670256.0
10586,comment,2,hya22gd,,Google,pihole,1645730169.0
10587,comment,2,hya44om,,From Beyond.,pihole,1645730940.0
10588,comment,1,hy9te0f,,Simon is a computer. Simon has a brain. You either do what Simon says or else go down the drain.,pihole,1645726894.0
10589,comment,6,hy6tbj5,,Ooohhh you're right! Idk why I didn't notice this 🤣🤣🤣 well that gives me some answers. Still curious why it just started doing this on the most recent update.,pihole,1645671403.0
10590,comment,17,hy80ltv,,"The PR says: There are queries which are neither sent upstream nor are they cached or blocked.

It says what the queries _are not_ but it doesn't go on to explain what these queries _are_. 

Are they malformed queries? Are they being rejected by pihole for some reason? If you see a large number of this type of query what action should you take, if any?",pihole,1645696302.0
10591,comment,1,hyz7u2i,,">what exactly it means.

It was driving me crazy, because neither the release note or the pull request explained exactly how a request can be neither cached not forwarded.  
Turns out the answer is in [the update announcement](https://pi-hole.net/blog/2021/01/27/pi-hole-ftl-v5-6-released/)  

> The updated dnsmasq has a new feature to group queries that need to be forwarded so only one query (instead of previously many) is sent upstream.  

> To better show you when queries are grouped, we added a new reply type “already forwarded” which is given to any query which came in while FTL was still waiting for the reply from upstream.  

So basically, it is acting like a cache. We receive request A and while waiting for the answer, request B is received. B is equal to A, but A's reply is not in the cache yet because it's not received yet.  
Previously, pihole would send another request, and put the first reply in the cache for when C would be asked.  
Now, Pihole will set B as pending and when A's reply is received, the answer is for both A and B, and put in the cache.  

Because B didn't fulfill the condition for upstream (no request sent), cached (it waited for an answer) or blocked (of course!), B was not in any answer category, so the percentage was wrong. B is put in ""other"" in order for the answer percentage to be identical to the query percentage.",pihole,1646177282.0
10592,comment,43,hy6uamh,,">	Still curious why it just started doing this on the most recent update.

Because that's when we added it. 

https://pi-hole.net/blog/2022/02/12/pi-hole-ftl-v5-14-web-v5-11-and-core-v5-9-released/",pihole,1645671845.0
10593,comment,5,hy87e4k,,"That's kind of my question on this as well. What exactly does this ""other"" mean and is it a good or bad thing? And if it's a bad thing what do I do about it if anything?

I'm not exactly the most literate on some of this stuff yet. Pihole is kind of a hobby for me and a good project for me to learn some minor Linux and understanding how networks work. It's been nice and I've learned a decent amount but I'm still very ignorant on the topics.",pihole,1645701199.0
10594,comment,3,hy9kxjm,,"Do you use pihole's integrated DHCP server? I do and the ""other"" section is filled with queries from my amazon firestick that always defaults to Google's DNS [8.8.8.8](https://8.8.8.8) no matter what I do.

I would then suppose the ""other"" section is for DNS queries then went through outside of pihole.",pihole,1645723740.0
10595,comment,1,hy9n3ca,,"I thought about that but it's queries coming from almost every device in my network from several different programs/apps. It's seems to be pretty random.

Edit: I do use piholes built in DHCP.",pihole,1645724546.0
10596,comment,1,hyz6drc,,">I would then suppose the ""other"" section is for DNS queries then went through outside of pihole.

... if they were outside of Pihole, how could they be logged in Pihole?  

[EDIT] It is for when a request is awaiting for a reply and the same request is received. Technically it is not ""cached"" because bothing is cached *yet*.  
https://pi-hole.net/blog/2021/01/27/pi-hole-ftl-v5-6-released/",pihole,1646176673.0
10597,comment,2,hy9nwcj,,"My router is very stubborn and advertises as an ipv6 DNS server even though I disabled its DHCP server. Maybe you have the same issue. Go through the network settings of your various devices, if you find fe80::1 in your DNS servers, that's your router.

Also, make sure you have disabled your router's DHCP server in case you didn't already.",pihole,1645724844.0
10598,comment,1,hy9pqqg,,I have disabled it and ipv6 should be disabled but I'll have to double check when I get a chance.,pihole,1645725528.0
10599,post,1,szzemc,Bought a new router (TPLink AX6000) and cannot get internet connection after disabling DHCP on router,"I set up the new router fresh out of the box, no problem at all. Was initially configured to be the DHCP router as expected. Tested my connectivity speed and all looked great. I turned off DHCP and then waited. Pi-Hole was already configured to be my DHCP server for the router I was replacing, so I did no additional configuration on the Pi-Hole server.

My new router never received a new IP address from Pi-Hole and I had no internet connectivity.  I was able to browse to the Pi-Hole administration portal so that told me LAN connectivity was there, but no internet. I checked the DHCP leases on Pi-Hole and could not find the MAC address of my router. I then attempted to manually enter a static IP reservation for the router, but that did not work.  

I reset the router and did the basic set up a second time and I had internet connectivity. Again I turned off DHCP on the router and I lost internet connectivity as no IP address was assigned to the router from Pi-Hole.  

I am currently back on my old router and Pi-Hole is running just fine as the DHCP server.  Do you have any suggestions?",pihole,1645670053.0
10600,comment,2,hy6tebq,,Yes. Actually assign the router a static IP in the routers admin page. Some devices are capable of operating as a DHCP server but lack the ability to broadcast a DHCP request.,pihole,1645671439.0
10601,comment,1,hy6vcdk,,"This sounds like a problem for a TPLink subreddit or forum.

Having said that:  Your default gateway needs to have a static address.  I'm assuming that is configured vi the TPLink software (I don't run TPLink routers).  Once you've set that address, Pihole needs to hand it out to the clients via the default gateway option.

I'm assuming you're using the same address on the TPLink as you did on our other router?  If not, you obviously need to change that in your Pihole config.",pihole,1645672326.0
10602,comment,1,hy6vtqi,,funny. i tried something similar. i started with that same router and ended up returning it. seems like its a fine router for just your every day joe but its settings and configurations are seriously lacking. i was not able to make pihole work on it the way I wanted to. i ended up buying the ASUS AX6000 instead and finally got it all working with that one. With IPv6 and everything. there is also custom firmware made by the community for the ASUS routers to really let you mod it and adjust it any way you need.,pihole,1645672548.0
10603,comment,2,hy7aoq3,,That was it!! Thank you so much.,pihole,1645679677.0
10604,comment,1,hy70x07,,Thanks for this advice. I am going to try that. I'll report back.,pihole,1645674917.0
10605,comment,1,hy9kois,,This. I found this useful in my situation.,pihole,1645723647.0
10606,comment,2,hy7apuc,,That was the solution. Very much appreciate your help.,pihole,1645679693.0
10607,comment,1,hy710ez,,Thank you. I am going to try assigning the default IP via TP-Link before disabling DHCP.,pihole,1645674961.0
10608,comment,1,hy91k6u,,Glad I could help :),pihole,1645716445.0
10609,post,4,szy69g,Amazon.com not working,"I set up Pi-Hole earlier. I have my router configured to use it as the primary DNS, and 8.8.8.8 as a secondary. It seems Amazon.com is unreachable now. Pings are also not responding (resolving to 198.18.100.10 currently) I have whitelisted pretty much everything I have seen blocked within 15 minutes of not being able to reach the site, but it didn't help. I am really stumped at this point. Why can't I hit Amazon?! On my phone, I cannot access it via the app either.

TIA !!",pihole,1645666587.0
10610,comment,3,hy6z8i6,,"Also fyi using a secondary dns does not mean ""backup dns"". It will typically use both, bypassing your pihole. If you disable your pihole in the admin screen can you access amazon?",pihole,1645674129.0
10611,comment,1,hy7ppel,,"Sounds like you have set it up wrong. 

1. Set your router to use 8.8.8.8 or whatever as the primary dns, it doesn't need it for anything else than firmware updates etc. 

2. The pihole handles your devices, so define 8.8.8.8 as it's external dns and configure your devices to use the pihole as primary dns. You can do this manually on each device or in your dhcp server.",pihole,1645688455.0
10612,comment,1,i4t39gk,,Same problem. Also Amazon app do not work here.,pihole,1650009733.0
10613,comment,-3,hy6m6xk,,I found Amazon blocked by blacklist by default. Check your logs and whitelist it if you want.,pihole,1645668206.0
10614,comment,0,hy6iud6,,"Well Amazon is an extremely hard server to get through according to my research. They can detect vpn serves and such and disable access. They force you to allow them to see you shopping trends and other information. 

At least that’s what I’ve found when I was using a vpn service before switching to my current one.",pihole,1645666737.0
10615,comment,7,hy6nuui,,Amazon is not blocked if you use only the adlist we offer on install.,pihole,1645668948.0
10616,comment,0,hy6phmr,,"Another thing, my Peacock streaming app is completely blocked on my TV now too. I have been going through and allowing every single blocked request that shows up after I try to play something, but eventually I ran out of sites to allow. I ended up turning off PiHole sadly :/",pihole,1645669680.0
10617,comment,3,hy784hq,,"These tools can help determine why your desired content does not load. 

https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522",pihole,1645678406.0
10618,comment,1,hyj1hly,,If you search this sub for paramount or cbs you'll find a couple of domains to whitelist for Paramount+ (it was the same when it was CBS All Access).,pihole,1645892422.0
10619,post,5,szy4g6,Unable to add a domain name to my pi's address,"Hi, is it expected behavior to be unable to use a custom domain name to go to my pi's IP ?

For example if I add pi.net as a new domain name that redirect to my pi, I got the same message when visiting a blocked site except it's found on no black lists

Any clues ?",pihole,1645666446.0
10620,comment,1,hy6o0cr,,"Try hitting `http://HOST.DOMAIN/admin`, I expect you will see it work.

[https://discourse.pi-hole.net/t/pihole-local-blocked-because-is-not-found-on-any-blacklist/20655](https://discourse.pi-hole.net/t/pihole-local-blocked-because-is-not-found-on-any-blacklist/20655)",pihole,1645669017.0
10621,comment,1,hy6r0k7,,Guess I'll just use pi.hole :'),pihole,1645670365.0
10622,comment,2,hy8dckf,,"There was some security reasoning behind it, but I think if you are not making the pihole accessible to the outside world, you can make some changes to `/etc/lighttpd/external.conf` and have the base domain redirect to `/admin` site. Instructions for that are towards the bottom of the thread I previously linked.",pihole,1645705173.0
10623,post,7,szu32g,Pi-Hole weirdly high usage randomly spiking (load average of 15) Web interface sometimes unreachable,"Hello there!

I am running this on a Raspberry Pi 4b with 4GB of RAM and a MicroSD Card.

For the entire past year of running my Pi-Hole, everything has always been fine and nothing problematic occurred. Yet recently it went down for no apparent reason, and after rebooting, it seemed to be constantly under load.

On this Raspberry Pi I am running a PiVPN, Pi-Hole, obviously, and NGINX Proxy Manager. Nothing more, nothing less.

I am on Pi-Hole version 5.9, Web-interface v.5.5 and FTL v.5.8.1

Whenever I try to update it shows the following:

(the Raspberry is apparently under such high load that it took ages to run this command to take the screenshot)

&#x200B;

https://preview.redd.it/mhewwhgstnj81.png?width=1342&format=png&auto=webp&s=07e9b85319dcac692112cf554454dc47a3f37184

My Pi-Hole has been doing this kind of stuff lately:

https://preview.redd.it/uzp8l01opnj81.png?width=1808&format=png&auto=webp&s=59b6e9bccc9bdc6923c3c5e2f66b5539e28b9002

I turned the DNS blocking off for this very reason (yet my Pi-Hole is still my resolver), yet it does not seem to affect the heavy load the Pi-Hole is under at all.

Here even is a usage of 107% of the CPU:

&#x200B;

[107&#37; CPU usage, however, this is CERTBOT which comes with NGINX](https://preview.redd.it/8df92ev1qnj81.png?width=1878&format=png&auto=webp&s=ac738ccf6da452c72d90603d78159d1fd1da6c3d)

Here is the problem: whenever I see such a high CPU usage, it always lists google domains as one of the reasons:

&#x200B;

https://preview.redd.it/6lq6yk99qnj81.png?width=1860&format=png&auto=webp&s=8a18966186a2eeee63415b027300d2b8a84cd198

(first image it did this too)

I do not think this has something to do with thermal throttling, as I am monitoring the Pi's temperature through Pi-Hole and it is currently at 38°C (*a fan is attached*)

&#x200B;

https://preview.redd.it/8iae8uq6tnj81.png?width=304&format=png&auto=webp&s=117354ec34eb09b09312800a97a300b77114a292

And I think I know the reason for why that is.

In the beginning when I did not know much about the Pi-Hole I was trying to figure out how to block all Google ads on YouTube and found a pretty interesting adlist that promised to do so:

[https://raw.githubusercontent.com/kboghdady/youTube\_ads\_4\_pi-hole/master/youtubelist.txt](https://raw.githubusercontent.com/kboghdady/youTube_ads_4_pi-hole/master/youtubelist.txt)

However, instead of adding it as an adlist, I added it as individual domains, I think, which is where the problem may now come from.

&#x200B;

https://preview.redd.it/thjtci2crnj81.png?width=1510&format=png&auto=webp&s=c7bf1ff04ca332984624b8d2e6ff14f2dd63c7af

I do not know if this is normal, but my ""domains"" section has 17,500 entries!

In the end, I am using a total of 12 adlists:

1. [https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts](https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts)
2. [https://www.sunshine.it/blacklist.txt](https://www.sunshine.it/blacklist.txt)
3. [https://raw.githubusercontent.com/kboghdady/youTube\_ads\_4\_pi-hole/master/youtubelist.txt](https://raw.githubusercontent.com/kboghdady/youTube_ads_4_pi-hole/master/youtubelist.txt) (YouTube one)
4. [https://adaway.org/hosts.txt](https://adaway.org/hosts.txt)
5. [https://v.firebog.net/hosts/AdguardDNS.txt](https://v.firebog.net/hosts/AdguardDNS.txt)
6. [https://v.firebog.net/hosts/Admiral.txt](https://v.firebog.net/hosts/Admiral.txt)
7. [https://raw.githubusercontent.com/anudeepND/blacklist/master/adservers.txt](https://raw.githubusercontent.com/anudeepND/blacklist/master/adservers.txt)
8. [https://s3.amazonaws.com/lists.disconnect.me/simple\_ad.txt](https://s3.amazonaws.com/lists.disconnect.me/simple_ad.txt)
9. [https://v.firebog.net/hosts/Easylist.txt](https://v.firebog.net/hosts/Easylist.txt)
10. [https://pgl.yoyo.org/adservers/serverlist.php?hostformat=hosts&showintro=0&mimetype=plaintext](https://pgl.yoyo.org/adservers/serverlist.php?hostformat=hosts&showintro=0&mimetype=plaintext)
11. [https://raw.githubusercontent.com/FadeMind/hosts.extras/master/UncheckyAds/hosts](https://raw.githubusercontent.com/FadeMind/hosts.extras/master/UncheckyAds/hosts)
12. [https://raw.githubusercontent.com/bigdargon/hostsVN/master/hosts](https://raw.githubusercontent.com/bigdargon/hostsVN/master/hosts)

These are all the adlists I use!

And whenever there is a command taking up huge chunks of my CPU's capacity, it has something to do with googlevideo domains:

&#x200B;

https://preview.redd.it/apf4q4qxrnj81.png?width=1885&format=png&auto=webp&s=96ce270e809f1cbaec3ff7d7a5b404511a64893e

And the command that is running is super long:

&#x200B;

https://preview.redd.it/yikhpth2snj81.png?width=1797&format=png&auto=webp&s=0d559f1272e839ed5feb84ff5e8ca16025fc3793

So, is this a common issue?

Is it truly the problem that I accidentally added 17k domains individually? If so, how do I remove them (I have some other important whitelisted domains in there, so it would be nice if I could figure out how to remove only the googlevideos domains)

If anyone has experienced similarly weird Pi-Hole behavior, please let me know!

&#x200B;

TL;DR /opt/pihole/list.sh sometimes takes up 99% of CPU resources out of nowhere and lists a huge command with Google domains to the point where my Pi-Hole is incapable of resolving domains (*whilst no other service is seemingly taking more CPU capacity at any point*)

&#x200B;

EDIT: Added the pihole -up image",pihole,1645655659.0
10624,comment,3,hy6hlfx,,"Sorry don’t have anything helpful to add but my RPi4 has shown me issues lately with ‘more load than 4 cores’ which is strange because a.) I’ve never had this issue in 2+ years running the same config and 2.) PiHole is the only thing running on a 4gb RPi 4 without DHCP handling so I fail to see how it can be using that much.

I assumed it was something wonky and a future update would fix it.",pihole,1645666183.0
10625,comment,2,hy6o6l2,,">	I’ve never had this issue in 2+ years running the same config

The display of this warning was recently added to Pi-hole. 

>	I assumed it was something wonky and a future update would fix it.

The CPU load is being accurately reported. There are a number of processes that could consume lots of CPU for a short period. Pi-hole updates, rebuilding gravity, etc.",pihole,1645669095.0
10626,comment,1,hz2rm8a,,"Exactly. My Pi is also not updating, which is weird. For me it is 1+ year running with no issue, now this? Super confused. Please let me know once you know anything!",pihole,1646243781.0
10627,comment,1,hy8ri2y,,Interesting good to know!,pihole,1645712326.0
10628,comment,1,hz2rqdw,,"But this has never happened before. My Pi-Hole is now always reporting high usage. As of right now, my 100MB swap partition is even always full, something that has never happened before.",pihole,1646243822.0
10629,post,22,szt4pc,Cant download from thingverse,"Hi!

Since the last few days, thingverse has changed its policies and now everytime I try to download something while using pi-hole I get the message ""You need to disable your adblock to download....""

But I can´t find a way to whitelist thingverse in the query log.

Can someone help, please?

Thanks in advance!",pihole,1645653260.0
10630,comment,11,hy67so0,,you can add a /zip to the end of the URL and it will download with adblocking on.,pihole,1645661775.0
10631,comment,6,hy5pszi,,"it's either google's adsystem or amazon's.  
I'm just disabling for 5 minutes. I don't download that many that often.",pihole,1645654275.0
10632,comment,4,hy9ma5h,,Thingiverse is turning to crap since they got bought out.  Try prusaprinters.com instead.  They have a pretty good collection of stuff.,pihole,1645724246.0
10633,comment,3,hy6smtc,,"I added this as a regex filter in PiHole. Seems to be working.

    ||doubleclick.net^$xhr,redirect-rule=noop.txt,domain=thingiverse.com",pihole,1645671093.0
10634,comment,2,hy6j0ob,,Are you using Chrome with uBlock extension? Try using another browser?,pihole,1645666815.0
10635,comment,2,hy6nkk0,,"Yep I saw this today for the first time. I disabled for 5 mins and was surprised it worked immediately, which told me it’s probably the Pi-hole blocking it. I was happy to continue blocking whatever unless I need to download a stencil.",pihole,1645668818.0
10636,comment,1,hy5nvs3,,What do your logs show?,pihole,1645653540.0
10637,comment,1,hye0j83,,"As of yesterday, it seems to be working again. YMMV",pihole,1645802348.0
10638,comment,4,hy6857f,,:O I will try it! Thanks,pihole,1645661931.0
10639,comment,2,hy5zhrn,,Its a very good idea. Thanks! Had not tought of doing it before! :),pihole,1645658189.0
10640,comment,2,hy9psz4,,Didn't know about it. I will take a look later. Thanks!,pihole,1645725552.0
10641,comment,2,hya38z9,,"I've stopped uploading designs to Thingiverse precisely for the lack of support. Search sucks. Half the time the website doesn't even work, and now advertisement shenanigans.",pihole,1645730614.0
10642,comment,1,hy9pn0p,,"That worked for me, but could you explain how it works?  I'd like to know what it's doing.  I can't seem to understand how the PiHole is figuring out that the requests for doubleclick came from Thingiverse.

&#x200B;

Thanks!",pihole,1645725489.0
10643,comment,1,hy9sk17,,"That wouldn't work in Pi-Hole since it's only DNS. 

That DOES work however, in uBlock Origin.",pihole,1645726586.0
10644,comment,0,hy6tihe,,"I don't know how to do it. Can you give more instructions, please?",pihole,1645671490.0
10645,comment,2,hy6jd9i,,I disabled the AdBlock on Chrome. Tried with edge too and same result. Could not download with pinhole activated. But I disabled it temporary as suggested here and is working fine now :),pihole,1645666967.0
10646,comment,1,hy5zeoe,,"v7event.stats.avast.com  
(blocked [analytics.ff.avast.com](https://analytics.ff.avast.com))

it is what appears just after I hit download button",pihole,1645658153.0
10647,comment,1,hy9wjwf,,"I had ublock origin disabled for Thingiverse and I was still getting notifications to turn off my ad blocker. I disabled PiHole and I was able to download, but the ads came through.

As soon as I entered this filter into Pihole, I was able to download STLs without seeing ads.

My guess is PiHole automatically redirects all DNS for doubleclick.net, but the filter allows DNS access to doubleclick from thingiverse.",pihole,1645728087.0
10648,comment,2,hy6y2g8,,"Log in to the PiHole admin panel. Click on Whitelist on the left sidebar. Select RegEx Filter tab at the top, and paste that filter expression above in the Regular Expression box. Then click the Add to Whitelist button.",pihole,1645673588.0
10649,comment,1,hy6v9j6,,I had to use ms edge but I still had pihole running and then I could download.,pihole,1645672289.0
10650,comment,1,hy9wuod,,"Which is weird, since doubleclick.net has been in every filter list for the last 10 years.",pihole,1645728202.0
10651,comment,1,hy8413a,,"Thanks, I will try it later when I'm at home.",pihole,1645698774.0
10652,comment,1,hy9zrr1,,"Yes, thingiverse changed something recently where they're checking if your browser session can access doubleclick - since it is widely blocked by ad blockers. If your browser can't, it throws up the ""Please disable your ad blocker"" sob story. The regex filter allows doubleclick traffic to come through to your browser session. I haven't seen any ads though, but since traffic is there, some might leak through.",pihole,1645729305.0
10653,post,3,szrlxq,How can I examine large log files offline?,"I'm trying to determine if power was off to my distant home over a year ago.  It has a Raspberry Pi running pihole on the network.  I would expect a log to have data gaps in a period when the power was off.  The Pi is a Raspberry Pi 3 Model B Plus Rev 1.3 with 1GB and it balks at examining large amounts of data.  I expect it is memory constrained.

Can I offload a copy of the log files to examine by another computer?  Can I grab them and SSH them to another, more capable machine?

What files in what locations will give the answers I need, please....  Thanks to all that respond!",pihole,1645649439.0
10654,comment,3,hy5r7vz,,"Long term database is at ***/etc/pihole/pihole-FTL.db***.

Daily dnsmasq logs are ***/var/log/pihole.log*** and with numerical suffixes.",pihole,1645654822.0
10655,comment,3,hy5rsl4,,"I will take a look, thanks a bunch.  

Pihole is wonderful thing.  Thanks for being part of the team and thanks for the support.",pihole,1645655046.0
10656,post,5,szrjy5,"Unable to resolve dns domains from lan, but works from wg and from localhost","Hello, 

&#x200B;

I am facing a problem that I can't solve. I have been a PiHole user for almost 2 years, with unbound, everything was working fine on my lan and on my wg network managed with pivpn.

&#x200B;

Following a move, my entire network was shut down, moved, then reconnected identically (the same router provided by my ISP, a rpi 4 for pihole and pivpn), a nas and an android tv box.

&#x200B;

When I reconnected the whole thing, I immediately had resolution problems, so I looked at Pihole.

In the meantime, I went on the dhcp of the router and indicated a known resolver ([1.1.1.1](https://1.1.1.1)).

&#x200B;

Doing a dig  @/127.0.0.1 works but if from another device I do a dig @<ip-pihole>, then the dig falls in timeout.

&#x200B;

What is really weird, is that my phone, connected with wg, has pihole setup as dns resolver and it works fine when wg is on.

&#x200B;

As far as Pihole is concerned, I've done a diagnostic, but I must admit that I'm reaching my limit in terms of analysis. 

&#x200B;

I have a code for the diagnosis, but I don't know what to do with it \^\^

&#x200B;

[https://tricorder.pi-hole.net/i0l0gvJW/](https://tricorder.pi-hole.net/i0l0gvJW/)

&#x200B;

(if I follow this address, I get a github test pattern, but then I get a 403 error...)

&#x200B;

What can I give as information to get help?",pihole,1645649294.0
10657,post,2,szpd3e,Pihole -r errors out?,"So I tried to reset my pihole due to this error:  https://old.reddit.com/r/pihole/comments/nt13nx/i_got_the_could_not_update_could_not_update_local/

When I followed the instructions and ran pihole -r it bombs out with:

 [i] SELinux not detected
  [i] Repair option selected
  [i] Performing reconfiguration, skipping download of local repos
  [✓] Resetting repository within /etc/.pihole...
  [i] Resetting repository within /var/www/html/admin......  Unable to reset /var/www/html/admin, exiting installer

Anything thoughts? Thank you! I'm just trying to update my pihole. Nothing fancy.",pihole,1645643678.0
10658,comment,1,hy64fov,,"u/EvolutionVII mentioned the following fix in the previous post. 

>>> For reference:

>>> sudo rm /etc/.pihole/.git/index.lock 

>>> fixed this issue without having to repair anything.

Have you tried the above fix ?",pihole,1645660298.0
10659,comment,1,hy9dqgn,,"Unfortunately, it doesn't work. ""rm: cannot remove '/etc/.pihole/.git/index.lock': No such file or directory""",pihole,1645721035.0
10660,comment,1,hy9epqa,,Something broke completely (probably). Create a backup of your lists etc and do a complete re install of the OS and then install pihole again. That should be a solid fix.,pihole,1645721411.0
10661,post,10,szn943,Pi-Hole keeps resetting block list to zero,This has been happening for the last couple of weeks now and I'm not exactly sure why. I have a raspberry pi 3 that I am using as my pihole. It seems like when I'm waking up and testing a couple of things I am not getting blocks anymore and I go to look at the domains in the ad list and I see zero listed. I go in and take a look and there are all gone. Has anybody else seen this or is this just me? It's becoming quite annoying that is for damn sure.,pihole,1645638263.0
10662,comment,2,hy4n2up,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1645639759.0
10663,comment,2,hy4qqim,,Check that your SD card has not failed and gone into read only mode.,pihole,1645641154.0
10664,comment,1,hz8y0a1,,This is still happening and it's weird,pihole,1646350076.0
10665,comment,1,hy4pbxu,,https://tricorder.pi-hole.net/9Nyfv3nc,pihole,1645640625.0
10666,comment,1,hy62w7a,,"Updated:
https://tricorder.pi-hole.net/LSLnddJm",pihole,1645659635.0
10667,comment,1,hy4r1pa,,"Well I can keep adding things to it once I see and it loads up and I can update it and it puts everything back into perspective, it's just that eventually I look and it goes away",pihole,1645641269.0
10668,comment,1,hy4txv0,,"Your debug log shows repeated occurences of the following lines.  Are you running any software that touches the gravity database?  Gravity sync, etc?

    [2022-02-23 01:01:05.479 872M\] Gravity database is busy (whitelist)  
    [2022-02-23 01:01:05.479 872M\] Gravity database is busy (blacklist)  
    [2022-02-23 01:01:05.479 872M\] Gravity database is busy (gravity)",pihole,1645642376.0
10669,comment,1,hy4rc1r,,"So after re-putting everything back in my block list is sitting at 4,079,201 but I'm willing to bet in 2 days this is going to be gone again.",pihole,1645641379.0
10670,comment,1,hy58cs5,,"Easy test is to make a text file (in terminal use nano or touch command) that will behave normally, then reboot and see if it there or disappeared. SD cards fail in this way.",pihole,1645647839.0
10671,comment,1,hy4u6wt,,The only thing I'm running other than pihole is piVPN,pihole,1645642470.0
10672,comment,1,hy5dibw,,"Okay, I had to files on the root of the pi user, after a reboot they are still there. 🥳",pihole,1645649723.0
10673,post,21,szmsbk,Load issue on Synology/Docker,"I have a double Pi-Hole setup:

* Inside Docker on a Synology DS918+ (16 Gb)
* Inside Docker on the Raspberry Pi4 (4 Gb)

My setup works for many months without any trouble.

Recently, my Pi-Hole on the Synology start to have Load issue.

    Long-term load (15min avg) larger than number of processors: 8.4 > 4
    This may slow down DNS resolution and can cause bottlenecks.

[https://imgur.com/a/QEi1Ahj](https://imgur.com/a/QEi1Ahj)

Sometime, this Pi-Hole just go offline.

Strangely my NAS isn't overload (50% of CPU and memory usage).

[https://imgur.com/a/6TypEAy](https://imgur.com/a/6TypEAy)

Both Pi-hole are using the same version:

**Docker Tag** [2022.02.1](https://github.com/pi-hole/docker-pi-hole/releases/2022.02.1) , **Pi-hole** [v5.9](https://github.com/pi-hole/pi-hole/releases/v5.9) , **FTL** [v5.14](https://github.com/pi-hole/FTL/releases/v5.14) , **Web Interface** [v5.11](https://github.com/pi-hole/AdminLTE/releases/v5.11)

What I tried :

* Restart my PiHole docker
* Restart my NAS

Problem still present.

Any hep will be welcome, thanks",pihole,1645637028.0
10674,comment,1,hy4vgk4,,"how do you manage a permanent load of 50% cpu? i use a synology rackstation with ryzen and 16gigs of ram for video editing. 

 i run a pihole in docker, netdata, and homeassistant. the are all limited to 512mb ram use and low cpu prioritization. 3 people work off that nas and cpu usage is barely hitting 10%. the pihole is at 60mb ram usage right now.

&#x200B;

what else are you running?",pihole,1645642954.0
10675,comment,1,hy667tu,,">Strangely my NAS isn't overload (50% of CPU and memory usage).

It's worth noting that ""load average"" is not the same as the CPU load. It also includes processes waiting for disk I/O, or processes in an uninterruptible sleep state. See https://www.brendangregg.com/blog/2017-08-08/linux-load-averages.html",pihole,1645661082.0
10676,comment,1,hy53y01,,"My CPU is a Celeron is less powerful than your Ryzen.

What's run on my NAS:

* VM of HomeAssistant with 11 Addons
* VM of vDSM
* 12 Docker containers

I'm checking on ""Resource Monitor"", my CPU usage is in between 36 to 45%

[https://imgur.com/a/k0RmAc1](https://imgur.com/a/k0RmAc1)

Ideally, I would like to know the average on CPU usage the last 5 minutes for each process.",pihole,1645646188.0
10677,comment,6,hy57219,,"You are running 12 containers and a VM of HA all on a Celeron processor and wondering why they are slow.  That is why.  :)

You will also notice in your CPU graph that the I/O wait time is quite high.  This means that the CPU is waiting for a disk process to complete before it can continue processing.  Ideally this this be as close to zero as possible.

You'll also see that the Load Average times are very high another indicator that your processor is queuing tasks and doesn't have enough power.

Your only option really is to invest in a dedicated machine for your docker bits.",pihole,1645647358.0
10678,comment,2,hy55vmz,,"try spinning up a netstat docker, it shows all kinds of statistics of the synology nas , temperatures, usage and much more.",pihole,1645646919.0
10679,comment,2,hy5jvuo,,[deleted],pihole,1645652069.0
10680,comment,1,hy5dz6l,,"Your Celeron would be fine if it didn't have to deal with so much. It does have less cores and cache vs Intel's Pentium and Core lines. Mine (N3050) was a champ at just running Hyper-V with 2 VMs (Domain Controller + DNS + DHCP, Pihole) but it mostly idled. Throw more resources at it like pulling files for backups or some scripts and it started choking a bit. You might want to have another box set up and move some of those processes to it. Been having better luck piling the old workload onto one of [these servers](https://www.supermicro.com/en/products/system/Mini-ITX/SYS-E200-8D.cfm).",pihole,1645649895.0
10681,comment,1,hy9kncz,,"Before order a dedicated machine for my docker, I turned off all my VM and all the docker containers excepting Pi-Hole.

The load average still at “5.20, 5.07, 5.15 ” one hour after stoping all VM and docker.
The number are better but not normal.

load average: 5.20, 5.07, 5.15 [IO: 3.98, 3.83, 3.70 CPU: 1.22, 1.23, 1.44]

So I suppose, the problem come from the I/O because now CPU load look ok for 4 cores processors.",pihole,1645723634.0
10682,comment,1,hy9lv6l,,"I run the command, but I don't know you to interpret it.

I have a tone of requests like this:

tcp        0      0 NAS:microsoft-ds   Mac:61975          TIME\_WAIT    
tcp        0      0 NAS:microsoft-ds   Mac:62006          TIME\_WAIT    
tcp        0      0 NAS:microsoft-ds   Mac:62144          TIME\_WAIT    
tcp        0      0 NAS:microsoft-ds   Mac:61954          TIME\_WAIT    
tcp        0      0 NAS:microsoft-ds   Mac:61960          TIME\_WAIT",pihole,1645724092.0
10683,comment,2,hy7xx1w,,"Running stuff on a container always has extra overhead, especially of memory.",pihole,1645694316.0
10684,comment,1,hy66ejy,,"I’m using zigbee2mqtt. Due to DSM 7, the usb access in docker is more limited. Running HA in a VM resolve this issues. 

Maybe the solution is run zigbee2mqtt on my raspberry Pi 4. I think my system was fast when I used HA in docker.",pihole,1645661163.0
10685,comment,1,hy9l5da,,"Yes, but my issues look come from the load average I/O, not the memory.

Check my reply

https://www.reddit.com/r/pihole/comments/szmsbk/comment/hy9kncz/?utm\_source=share&utm\_medium=web2x&context=3",pihole,1645723819.0
10686,comment,2,hy8jsje,,[deleted],pihole,1645708686.0
10687,comment,1,hy9mkbv,,"Thanks for the hack :-).

I think it's look more simple to run in on my Raspberry Pi 4. but it may try it.",pihole,1645724350.0
10688,post,7,szlsay,Need Best Practices for MacOS and DNS,"I'm running a PiHole on my local network and was pointing my MacBook Pro's DNS directly to the PiHole for a while because I enjoyed being able to see a device-by-device breakdown in the PiHole admin interface. Unfortunately whenever I leave my home wifi network and go to a different one, the DNS still tries to access my pihole and I get no internet. On iOS the DNS settings seem to be per-network, but on MacOS it seems to be per-device. I've since switched back to having my DNS point at the router which points at the PiHole, but now my Mac gets lumped in with all of the other unidentified devices on my network. 

What's the workaround for this? Am I correct in thinking that iOS and MacOS work different with their DNS settings?

Thanks in advance for your help!",pihole,1645634503.0
10689,comment,6,hy4a24p,,Why not set the DNS pointer in your home network router and not in the specific device? The DHCP prtocall passes DNS and gateway information to all the hosts on the network.,pihole,1645634749.0
10690,comment,3,hy61mdy,,use the pi-hole as the DHCP server,pihole,1645659089.0
10691,comment,2,hy4a6o5,,"Yes this is true and super annoying

In macOS you can create different network profiles, I haven’t checked yet if that contains DNS settings too.",pihole,1645634797.0
10692,comment,2,hy5xjkw,,"It should be fine to set the DHCP server to tell devices the pihole is your DNS server.

However, what I found is that on my phone/laptop I missed pihole's ad blocking when I was not at home. I set up a Wireguard on-demand connection that only connects when I am on wifi that is \_not\_ my home wifi. It provides me with access to my local devices, but specifically the pihole DNS.

It's so useful and reliable that my wife has agreed to have it running on her phone too!",pihole,1645657368.0
10693,comment,1,hy66ozg,,"Log into your router and look for a field called LAN DNS or something close to it. It should be in the same submenu as network settings (where you set your network IP range, etc.). LAN DNS tells your router to give out that DNS address to clients who request an IP address from your router.

You have your router’s WAN (internet-facing) DNS set as Pi-hole’s IP address, so your router is advertising itself as DNS server then passing them onto Pi-hole. That’s why you see your router as the only client if you don’t override the DNS address",pihole,1645661293.0
10694,comment,2,hy9g5ad,,"This seems to be the perfect solution with little to no overhead. For MacOS/iOS devices, I just share the wifi password (iCloud or bluetooth, I think) or have family and friends scan a QR code and that's it. The router pushes the DNS settings to their devices, and I don't get interrupted. I don't know about Windows/Android devices. I haven't had to deal with them. I think the Android devices will need a QR code reader app.",pihole,1645721952.0
10695,comment,1,hy4belh,,"I do have my router DNS pointing to PiHole so the adblocking is working just fine, but unless I point my Mac directly to the pihole it shows up as my router rather than my laptop in the admin interface.",pihole,1645635254.0
10696,comment,1,hy62p8k,,Is this possible on a Google WiFi router? I’ve heard you can’t turn of that router’s DHCP server and it will interfere.,pihole,1645659553.0
10697,comment,1,hy4qg0k,,"While still not ideal, this is the method I’m going to use for the time being. I set up a separate “Location” for my home with DNS going straight to PiHole rather than router, and the “Automatic” location points to cloud flare dns (my old go-to). This seems like it’ll work although still a couple clicks when I leave my home network unlike my phone.",pihole,1645641043.0
10698,comment,9,hy55mta,,"To explain what u/coldafsteel meant....Set your router's DHCP server to supply the pihole as the DNS. So anybody that connects to your network and gets given a DHCP address, will have the pihole set as the DNS. That is how I do mine.",pihole,1645646827.0
10699,comment,5,hy4cy18,,https://discourse.pi-hole.net/t/why-do-i-only-see-my-routers-ip-address-instead-of-individual-devices-in-the-top-clients-section-and-query-log/3653,pihole,1645635839.0
10700,comment,1,hy4dyvs,,have you set up Conditional Forwarding in your pihole?,pihole,1645636229.0
10701,comment,1,hy64x9i,,"No idea, I'd never use anything made by Google.

But surely even if your router is acting as the DHCP server you could configure it to tell every device to use the pi-hole as nameserver? Or are its settings completely locked down?",pihole,1645660510.0
10702,comment,1,hy6czy7,,"Unfortunately, no. You can't disable the Google WiFi router's DHCP service.",pihole,1645664111.0
10703,comment,1,hy4dsfc,,"Are you suggesting I use the pihole as the DHCP server as stated in the article? To be clear I do have all of my other devices set up in a way where they’re identified by name in the admin interface, and I can get my Mac to do this, but when my Mac is set up to do this it can’t access the internet on other networks without having to change DNS",pihole,1645636160.0
10704,comment,1,hy4e488,,Doesn’t sound familiar so probably not,pihole,1645636286.0
10705,comment,1,hy9j12s,,I seen this just from a random Google search. The URL is https://blog.rottenwifi.com/google-wifi-dns/. But I can't vouch for it because I don't have a Google Wifi Router.,pihole,1645723035.0
10706,comment,3,hy5yhcn,,"You don't need to use the pihole as DHCP server. Use the router's DHCP if you like, but have the router hand out the pihole's IP as the DNS instead of running DNS on the router.

This way all dynamically configured devices will use pihole as DNS, and the pihole will be able to identify the individual clients. You won't have to change your settings when you go to a different LAN.",pihole,1645657760.0
10707,comment,1,hy4pkhx,,"This command from the Mac terminal will tell you which DNS servers the Mac is using:

`scutil --dns`",pihole,1645640715.0
10708,comment,1,hy4e9ru,,"in your pihole, Settings - DNS - look at the bottom of the page.",pihole,1645636345.0
10709,comment,1,hy4ejg4,,No that’s disabled. I’ve been using the /etc/hosts method to name devices.,pihole,1645636450.0
10710,post,31,szdxx5,Unable to access Admin Panel,"I'm trying to access the admin panel however I am getting ""took too long to respond"". I know the IP address is set up correctly and I am able to ping the raspberry pi.

&#x200B;

Debug log is SmOqd0BQ",pihole,1645610795.0
10711,comment,11,hy37bsx,,"Did you actually install the admin panel?
Have you tried another web browser?
Deleted your browser cache?
Run “pihole -r” in console or ssh to repair the install. Could fix whatever issue there is.",pihole,1645616174.0
10712,comment,2,hy42a76,,"Correct port?
Sometimes there are some troubles if there's already another service running on this port.",pihole,1645631738.0
10713,comment,2,hy4g4a1,,"Has it worked before, or this is a fresh install?

Can you ssh into it?",pihole,1645637052.0
10714,comment,1,hy4txrw,,try entering the pi hole's ID as the domain instead of using `pi.hole`.  EG `192.168.x.xxx/admin`,pihole,1645642375.0
10715,comment,1,hy5ij8z,,"In addition to the other suggestions, make sure you're connecting over http and not https. You won't get the error you're describing, but you won't be able to connect over https by default. Just one more thing to keep in mind while troubleshooting.",pihole,1645651570.0
10716,comment,-2,hy3iifu,,"Do you have all of the requierments, apache or nginx should work, also honestly you don't rlly need the admin panel unless you want to tweak some blocking, haven't rlly changed anything in mine. Also I presume you installed it.",pihole,1645623025.0
10717,comment,3,hy3inib,,"It should've also asked you if you want to install all of the requierments, during the admin interface setup. Also if Pi-Hole actually works would be a nice sign.",pihole,1645623097.0
10718,post,8,szdvyj,running netdata and pihole together on RPI,"HI, found this article [https://learn.netdata.cloud/guides/monitor/pi-hole-raspberry-pi](https://learn.netdata.cloud/guides/monitor/pi-hole-raspberry-pi) buth wehn installing this and starting it via /ipadresRPI:19999 I get a message ""do you want to go to pihole admion site"" understand this because it is the same IP adres....but can you avoid this or is pihole dashboard en netdata dashboard combined not usefull at all?

&#x200B;

thanks

gr",pihole,1645610606.0
10719,comment,1,hy4uhy2,,"Just added Netdata to my existing PiHole install using the script available from that article, and all appears to be working ok. 

Typing in _just_ the IP address takes me to the ""did you mean to go to the admin panel"" page that you're getting. IPaddress/admin loads the PiHole admin page, and IPaddress:19999 loads Netdata.",pihole,1645642587.0
10720,comment,1,hy4zozp,,I really do not like to admin...but I forgot one 9 in the poet number :-),pihole,1645644570.0
10721,post,0,sz3r6h,pihole admin interface only on designated IP,"Hi, 

how do I TELL pihole that it can't run the admin web interface on every network interface? It seems to refuse to want to restrict what interfaces it runs the web pages on...

I tried [server.bin](https://server.bing)d in the lighttpd.conf file but that doesn't work.

I'm not trying to impact the interfaces the DNS listens on at all. Just the web interface.

any ideas?

thanks!",pihole,1645577937.0
10722,comment,1,hy1juqt,,"in file lighttpd.conf (or better yet, to avoid the awkwardness of future pihole updates, modify the /etc/lighttpd/external.conf)

add this line:

server.bind = ""[192.168.68.2](https://192.168.68.2)""

This should work but its still screwed up.

Got it sort of working by doing that AND setting the server.port to 81. But that shouldn't need to be done.",pihole,1645579425.0
10723,comment,1,hy1unvt,,"Bind the port to the IP address of the interface you want to use.

This file is /etc/lighttpd/external.conf. Add this line to it, replacing 10.0.0.10 by the primary IP address you just set:

server.bind = ""10.0.0.10"" 

If for whatever reason you are using an older version of Pi Hole, simply add that line to lighttpd.conf.",pihole,1645584344.0
10724,comment,1,hy3u8mv,,"I used IPtables to restrict port 80 to specific MAC addresses.  I’m not good at IPtables, so I installed UFW and build a basic firewall with that first.  Then tweaked IPtables.",pihole,1645628432.0
10725,post,2,sz23xa,Can't update to 5.9: Error: Local revision could not be obtained,"Hi,

When running pihole -up the process aborts with following error message:

    [✓] Update local cache of available packages
      [i] Existing PHP installation detected : PHP version 7.4.28
      [✓] Checking for git
      [✓] Checking for iproute2
      [✓] Checking for whiptail
      [✓] Checking for ca-certificates
    
      [i] Checking for updates...
    error: refs/tags/2.0 does not point to a valid object!
    error: refs/tags/2.8 does not point to a valid object!
    error: refs/tags/V2.5.1 does not point to a valid object!
    error: refs/tags/V2.9.1 does not point to a valid object!
    error: refs/tags/V2.9.2 does not point to a valid object!
    error: refs/tags/v2.1 does not point to a valid object!
    error: refs/tags/v2.10 does not point to a valid object!
    error: refs/tags/v2.10.1 does not point to a valid object!
    error: refs/tags/v2.10.2 does not point to a valid object!
    error: refs/tags/v2.11 does not point to a valid object!
    error: refs/tags/v2.11.1 does not point to a valid object!
    fatal: offset beyond end of pack index for .git/objects/pack/pack-c2a7e85c6e0c9b04f9fb70c5d4eef9002fc80229.pack (truncated index?)
    fatal: offset beyond end of pack index for .git/objects/pack/pack-c2a7e85c6e0c9b04f9fb70c5d4eef9002fc80229.pack (truncated index?)
    fatal: offset beyond end of pack index for .git/objects/pack/pack-c2a7e85c6e0c9b04f9fb70c5d4eef9002fc80229.pack (truncated index?)
    
      Error: Local revision could not be obtained, please contact Pi-hole Support
      Additional debugging output:
    On branch master
    Your branch is behind 'origin/master' by 4 commits, and can be fast-forwarded.
      (use ""git pull"" to update your local branch)
    
    nothing to commit, working tree clean

Tried ""pihole checkout master"" and it fails too with following error message: 

    [i] Shortcut ""master"" detected - checking out master branches...
      [i] Pi-hole core
    error: refs/tags/2.0 does not point to a valid object!
    error: refs/tags/2.8 does not point to a valid object!
    error: refs/tags/V2.5.1 does not point to a valid object!
    error: refs/tags/V2.9.1 does not point to a valid object!
    error: refs/tags/V2.9.2 does not point to a valid object!
    error: refs/tags/v2.1 does not point to a valid object!
    error: refs/tags/v2.10 does not point to a valid object!
    error: refs/tags/v2.10.1 does not point to a valid object!
    error: refs/tags/v2.10.2 does not point to a valid object!
    error: refs/tags/v2.11 does not point to a valid object!
    error: refs/tags/v2.11.1 does not point to a valid object!
    fatal: offset beyond end of pack index for .git/objects/pack/pack-c2a7e85c6e0c9b04f9fb70c5d4eef9002fc80229.pack (truncated index?)
      [✗] Unable to pull Core master branch

I also tried pihole -r to repair my installation, but that didn't help.

When I run pihole -v version has an error:

    fatal: offset beyond end of pack index for .git/objects/pack/pack-c2a7e85c6e0c9b04f9fb70c5d4eef9002fc80229.pack (truncated index?)
      Pi-hole version is ERROR (Latest: v5.9)
      AdminLTE version is v5.10.1 (Latest: v5.11)
      FTL version is v5.14 (Latest: v5.14)


Debug token is here:  [https://tricorder.pi-hole.net/EHxvSlTv/](https://tricorder.pi-hole.net/EHxvSlTv/)   


Thanks in advance for your help",pihole,1645573334.0
10726,comment,3,hy17b6d,,"This will rebuild the local repository. 

    cd /
    sudo rm -rf /etc/.pihole
    sudo git clone https://github.com/pi-hole/pi-hole /etc/.pihole",pihole,1645573771.0
10727,comment,1,hy32732,,"Thanks a lot, that helped. I guess I have an updated version now apart from the web interface that is stuck on 5.10.1, but I am still getting an error when running pihole -up:

    [i] Checking for updates...
    [i] Pi-hole Core:     up to date
    error: bad object header
    error: unknown object type -1 at offset 904104 in .git/objects/pack/pack-209af37de6a0166e23d13ee81f04e16984d2ee7f.pack
    fatal: packed object f5e01e2d15b295e3a7ddbf248df97239f715ade9 (stored in .git/objects/pack/pack-209af37de6a0166e23d13ee81f04e16984d2ee7f.pack) is corrupt
    [i] Web Interface:    up to date
    [i] FTL:              up to date

pihole -v :

    Pi-hole version is v5.9-1-g9be5199f (Latest: v5.9)  
    AdminLTE version is v5.10.1 (Latest: v5.11)  
    FTL version is v5.14 (Latest: v5.14)",pihole,1645612100.0
10728,post,48,sz221o,Turn off warning permanently,"This new triangle appearing in the GUI keeps coming back after ""trash can"" it. 

Any setting to turn it off permanently? 
Kinda annoying.",pihole,1645573195.0
10729,comment,8,hy374zf,,Perhaps warnings should have different notification treatment versus errors?,pihole,1645616034.0
10730,comment,10,hy1qgy2,,"It is kind of annoying. Adjusted packet size blah blah… I mean, if I’ve gone to look at that page, can’t it stop until new warnings are issued?",pihole,1645582461.0
10731,comment,42,hy16yyq,,">	Any setting to turn it off permanently?

Address the cause(s) of the warnings.",pihole,1645573628.0
10732,comment,2,hy2rb8u,,"I asked this question, with how I would disable it. If you want to make it go away, here's how.


https://www.reddit.com/r/pihole/comments/sj5p3u/is_it_a_good_idea_to_edit_headerphp_to_remove_the/?utm_medium=android_app&utm_source=share",pihole,1645603076.0
10733,comment,5,hy1704r,,Yeah. The triangle leads to some line where the error you’d need to fix is defined. Fix that error and the triangle disappears.,pihole,1645573642.0
10734,comment,1,hy3nfvw,,"Honest question: I totally get the whole ""eliminate the warnings."" commentary. Is there a roadmap for adding a link to an article for resolving the root cause of the error in the notification message?

When Googling the error message it is all over the place. I would assume linking the error message to the resolution steps on Pi-Hole's community page or support docs would be fruitful.",pihole,1645625417.0
10735,comment,3,hy3ny4n,,These are all warnings.,pihole,1645625658.0
10736,comment,8,hy23yyq,,"Restart Pi-hole and the warnings will clear.  You won't get any notification until new warnings are generated.

`pihole restartdns`

or

`sudo service pihole-FTL restart`

or from the ***admin GUI > Settings***",pihole,1645588723.0
10737,comment,22,hy1wigv,,"OP has a point though. I have a persistent warning for DHCP I cannot get rid of. I have a work laptop on a different domain, it will never use pihole but it uses DHCP. I would love to mark this exact warning as ""Ignore"".

Warning in dnsmasq core:Ignoring domain workdomain.net for DHCP",pihole,1645585194.0
10738,comment,3,hy3g22w,,"How can I disable the CPU load average warning? I run it in a Docker container, and it keeps popping up.",pihole,1645621719.0
10739,comment,2,hy34evd,,"So any hint? How so I address it? My issue is ""Long term load, CPU"" warning. 

I'm sure my 2 core Celeron can handle the Pihole as it mostly sits idle.

Thanks.",pihole,1645613932.0
10740,comment,-27,hy1gbeo,,Or live with it... it's amazing how many OCD afflicted people are using Pihole today.,pihole,1645577804.0
10741,comment,1,hy33ome,,Thanks. I'll check it out.,pihole,1645613330.0
10742,comment,9,hy244ow,,">triangle leads to some line where the error you’d need to fix is defined

Warnings, not errors.",pihole,1645588801.0
10743,comment,-2,hy21vr5,,"Yeah let me just call up cloud-flare and tell em I need them to change their infrastructure so my pihole stops complaining, lol",pihole,1645587717.0
10744,comment,2,hy3o8rt,,">	I would assume linking the error message to the resolution stepson Pi-Hole’s community page or support docs would be fruitful.

Below each warning on the diagnostic page there is a link to our documentation.",pihole,1645625796.0
10745,comment,5,hy3oxb8,,Are some with different priorities than others? Alert fatigue is a problem.,pihole,1645626108.0
10746,comment,0,hy2bwqr,,Thanks 😊,pihole,1645592705.0
10747,comment,15,hy21bp6,,"Better yet, eliminate the warnings.

https://discourse.pi-hole.net/t/ignoring-domain-config-domain-for-dhcp-host-name-hostname/52027/8",pihole,1645587447.0
10748,comment,2,hy2sgzv,,"You can create a file in /etc/dnsmasq.d (e.g. 10\_workstuff.conf) with following content

[`domain=workdomain.net`](https://domain=workdomain.net)`,<ip addres of your work laptop>`",pihole,1645603988.0
10749,comment,3,hy4ma4i,,"As said 

You can disable the load check:

https://docs.pi-hole.net/ftldns/configfile/#check_load",pihole,1645639425.0
10750,comment,3,hy3jn9e,,"You have the option of not checking system load. 

https://docs.pi-hole.net/ftldns/configfile/#check_load",pihole,1645623600.0
10751,comment,-16,hy21s12,,"Or stop using pihole and go to adguard and bind so your logs aren't getting overflowing full of useless error msgs that you can never correct, like dns size adjust for 1.1.1.1",pihole,1645587668.0
10752,comment,4,hy23uxx,,Change your packet size.  Problem solved.,pihole,1645588668.0
10753,comment,3,hy3uqeq,,"I haven't seen any recently, thanks for confirming. 

This is valuable info as well as not surprising, considering the quality of the product!

Thanks!",pihole,1645628644.0
10754,comment,3,hy3pjkx,,"Any warnings on the diagnosis page have equal standing and will trigger the alert.

What warnings do you have?",pihole,1645626386.0
10755,comment,4,hy30fun,,"I was tempted to make a post about this earlier because I'm not 100% sure this is working for me. I've created this file and added two hosts into it (my work laptop and my wife's). The warnings have stopped for my laptop, which is good but not for my wife's for some reason. 

I've just updated the pihole though so the messages have stopped for the moment.",pihole,1645610617.0
10756,comment,1,hy3ttlc,,"I don't have a single Windows device on my network and I have 72 warnings all saying 

> Ignoring domain us.ad.wellpoint.com for DHCP host name L3MM1373

What am I doing wrong?  Everything else seems to be working properly",pihole,1645628255.0
10757,comment,2,hy3k3cd,,"Sorry if this is a stupid question, but how would you add multiple domains?",pihole,1645623821.0
10758,comment,1,hy52jwa,,Thanks for that!,pihole,1645645660.0
10759,comment,9,hy23sho,,">full of useless error msgs that you can never correct, like dns size adjust for 1.1.1.1

You can easily correct this.  Note they are warnings, not errors. 

https://discourse.pi-hole.net/t/dnsmasq-warn-reducing-dns-packet-size/51803/9",pihole,1645588636.0
10760,comment,1,i1uk6km,,"question. why does only my pihole show these mesggages?

Nothing in the logs like this for a seperate unbound server or bind server. If i switch my lan over to use these servers I do not get any of these messages in the logs. Why does this happen on pihole?

&#x200B;

Thank ya",pihole,1648070263.0
10761,comment,2,hy3qbra,,"I've only had packet size and I reconfigured to stop it.
Oh and system load on the pi 1b. Not much to do about that.",pihole,1645626738.0
10762,comment,1,hy41b40,,Read the link posted above. You can fix this with a dnsmasq configuration.,pihole,1645631346.0
10763,comment,2,hy3oeyg,,Multiple lines as the above.,pihole,1645625878.0
10764,comment,-6,hy24gvz,,"I don't want to change my packet size and end up with fractured and truncated packets slowing down dns. 

Isn't there a way to turn off the messages instead? Pihole never did this before and its the only dns server in our proxmox cluster.

For what its worth if I turn off dnssec I stop getting the errors.

I guess I could turn off syslog forwarding to my syslog server for the pihole and just ignore them?",pihole,1645588968.0
10765,comment,2,hy3qmia,,">	and system load on the pi 1b. Not much to do about that.

You can disable the load check:

https://docs.pi-hole.net/ftldns/configfile/#check_load",pihole,1645626871.0
10766,comment,10,hy26iog,,">I don't want to change my packet size and end up with fractured and truncated packets slowing down dns.

This is happening anyway, which is why you are receiving the warnings.  Additional discussion here:

https://discourse.pi-hole.net/t/dnsmasq-warn-reducing-dns-packet-size/51803/31

> Pihole never did this before

This feature was added two revisions ago, and was described in the release notes.  Did you read them prior to updating Pi-hole?

>Isn't there a way to turn off the messages instead?

No.",pihole,1645589964.0
10767,comment,1,hy3xs6q,,Well that's handy thanks,pihole,1645629908.0
10768,comment,-7,hy26wfj,,"Thanks for the effort and patience you have for us users. 

I'm going to try to hack together a way to turn off the messages. Maybe I can just pull that part of the web client out?

I don't want to stop using pihole and go back to plain bind and dhcp but I may have too. I don't want to see these msgs.

Thx again",pihole,1645590149.0
10769,comment,5,hy27n48,,">	I don’t want to stop using pihole and go back to plain bind and dhcp but I may have too. I don’t want to see these msgs.

These messages bother you that much?  There is only a warning triangle on the dashboard that bounces twice. You have to go the diagnostics page to see the actual warnings.",pihole,1645590514.0
10770,comment,0,hy292r7,,"Its the fact that its there every single time I open pihole web page.

I'd rather switch products, as there are several, than deal with stuff I do not like.

Still, appreciate you. Have a good one",pihole,1645591247.0
10771,comment,0,hy33fg3,," I have to agree with Fearless here...

Having the option is nice, not having the option to turn it off is not. - or dismiss for 90 days etc would be nice too.",pihole,1645613121.0
10772,post,9,syzk72,How to whitelist ads on Thingiverse,"Thingiverse.com all of a sudden seems to be able to detect my pihole blocking ads, and I wanted to whitelist that site. However whitelisting thingiverse.com with wildcards doesn’t seem to fix the issue. Just wondering if anyone else here has encountered this and had a whitelist entry that’ll make it work again?",pihole,1645567024.0
10773,comment,9,hyd96k2,,"I just had a look into their javascript and noticed that you can just append ""/zip"" to the thing url to download the files.

Example:

Thing: [https://www.thingiverse.com/thing:4933613](https://www.thingiverse.com/thing:4933613)

Download: [https://www.thingiverse.com/thing:4933613/zip](https://www.thingiverse.com/thing:4933613/zip)",pihole,1645787952.0
10774,comment,5,hy0wriu,,"tl;dr:  thingverse isn't detecting pi-hole, it's not detecting an ad from doubledick.net.

&#x200B;

Going to Thingiverse and attempting to download a file has the following result in the pi-hole tail log

`Feb 22 16:30:23 dnsmasq[21461]: query[A] www3.doubleclick.net from xxx.xxx.xxx.xxx`

`Feb 22 16:30:23 dnsmasq[21461]: gravity blocked www3.doubleclick.net is` [`0.0.0.0`](https://0.0.0.0)

no way in hell i'm going to enable doubledick.net, they have trackers everywhere.

Thingiverse may have been useful at one time, but it's totally fubared now.

&#x200B;

btw, this is what is behind one of the download buttons:

`<div class=""i-button left"" style=""background-image: url(&quot;data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxM3B4IiB2aWV3Qm94PSIwIDAgMTIgMTMiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDU4ICg4NDY2MykgLSBodHRwczovL3NrZXRjaC5jb20gLS0+CiAgICA8dGl0bGU+ZG93bmxvYWQgYnV0dG9uIGNvcHk8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZyBpZD0iUGFnZS0xIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWNhcD0icm91bmQiPgogICAgICAgIDxnIGlkPSJ0aGluZy1wYWdlLXdpdGgtb3ZlcmxheSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTExNzAuMDAwMDAwLCAtODguMDAwMDAwKSIgc3Ryb2tlPSIjRkZGRkZGIj4KICAgICAgICAgICAgPGcgaWQ9ImRvd25sb2FkLWJ1dHRvbi1jb3B5IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMTcwLjAwMDAwMCwgODkuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8cG9seWxpbmUgaWQ9IlN0cm9rZS0xLUNvcHktOSIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgcG9pbnRzPSIxMiA1IDUuOTcxNzE4MDUgMTEgMCA1LjA1NzU5Mjc1Ij48L3BvbHlsaW5lPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTYsMCBMNiwxMCIgaWQ9IkxpbmUtMi1Db3B5LTUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYuMDAwMDAwLCA1LjAwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTYuMDAwMDAwLCAtNS4wMDAwMDApICI+PC9wYXRoPgogICAgICAgICAgICA8L2c+CiAgICAgICAgPC9nPgogICAgPC9nPgo8L3N2Zz4=&quot;); background-position: center center; background-repeat: no-repeat;""><span>Download</span></div>`

&#x200B;

After doing a deeper dive into the webpage source, I can now  see why the site was so crappy.  The whole thing is served up by a rat's nest of javascript that calls... more js.",pihole,1645569406.0
10775,comment,2,hzktgzg,,after complaining on Twitter looks like they fixed it!,pihole,1646576553.0
10776,comment,1,hy69s5s,,Death to Thingiverse,pihole,1645662663.0
10777,comment,2,hyokzbg,,"Nice catch!  That worked for me.  Agreed with everyone above, ain't no way I am whitelisting that ad-serving nightmare of a domain.  :-)",pihole,1645990735.0
10778,comment,3,hy6qyaj,,"\*sigh\*

I've been noticing thingiverse being more aggressive recently with complaining about ""ad blockers"". I'm in the same boat as you with never allowing doubleclick.

Are there any workarounds?",pihole,1645670336.0
10779,comment,3,hy94omb,,jdownloader works for me. just copy the thingiverse files page link to jdownloader and grab the zip.,pihole,1645717641.0
10780,post,1,syz8d3,Unbound stops working after reboot since reinstallation,"I had to setup my raspberry pi from scratch again. Everything was working nicely beforehand. I am using unbound as dns server. Everything works after starting from scratch but after a first reboot, unbound stops resolving. I receive SERVFAIL for the tests suggested in the pihole docs. This has taken me hours by now. What is going on here?

&#x200B;

Edit: Internet is working again when switching in pihole from unbound to another dns-server. So I am quite confident it is a problem with unbound.",pihole,1645566183.0
10781,comment,5,hy2grtx,,"This may be your problem. 

A forwarding configuration may have been installed by Bullseye through resolvconf.

Edit file `/etc/resolvconf.conf` and comment out the last line which should read:

    unbound_conf=/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf

Delete the unwanted unbound configuration file:

`sudo rm /etc/unbound/unbound.conf.d/resolvconf_resolvers.conf`

restart unbound:

`sudo service unbound restart`",pihole,1645595530.0
10782,comment,1,hy0qbt9,,"I just had NOERROR on  the test cononection, but when pointing pihole to unbound again, there is no dns resolving",pihole,1645566915.0
10783,comment,1,hy1mwee,,First thing I always check when I have a SERVFAIL is that the time and date is set correctly.,pihole,1645580839.0
10784,comment,1,hy2c0pq,,Are you using IPv6?,pihole,1645592763.0
10785,comment,1,hy2qir1,,"This seems to have solved the issue for now, thank you. It’s peculiar that I remember in the old setup, I received warnings in pihole but everything was working still. I used these commands to eliminate the warnings. Why would it now stop working altogether when using the faulty conf?",pihole,1645602454.0
10786,comment,1,hy2pzxk,,"Datetime is correct. When I used dig, it resolves dns now but not when the requests come from pihole",pihole,1645602050.0
10787,comment,1,hy2px5x,,"No, unbound is only setup for ipv4",pihole,1645601991.0
10788,post,2,syyzrq,Difficulty bypassing for a device,"I have pihole setup and it runs great. The issue is my wife’s devices. She uses a lot of social media and I’ve had a hard time trying to hunt an peck to whitelist domains for her. At this point I just want to have pihole bypassed for her.

My though was using the groups and clients feature. If I add her device as a client, but remove it from being added to any group, should that bypass the pihole for her device? I’ve tried, and it doesn’t seem to work. See still has issues with social media on the WiFi at home. If she disconnects, and uses cellular, things work fine. So for some reason the pihole is still doing some blocking.

Is there another/better way to do this? I’d rather not have to change her dns directly on device if I can avoid it.",pihole,1645565588.0
10789,comment,5,hy0oyk2,,"Create a group that is not filtered and add the devices to that group.

For me I added a 2nd SSID into a different VLAN and that VLAN uses PiHole but is not filtered.  This allows wireless devices on my network to choose to be filtered or not.",pihole,1645566396.0
10790,comment,3,hy1yb7t,,"So, it appears that when setting up the client via a MAC address, there is a delay if the device gets a new IP address. Here is a note on the client page (which I just noticed):

>Note that client recognition by IP addresses (incl. subnet ranges) are preferred over MAC address, host name or interface recognition as the two latter will only be available after some time.

So what I have done for now is just pushed her devices to a different VLAN, and setup that VLAN as a client with no blocking. This seems to be doing what I need.",pihole,1645586031.0
10791,comment,2,hy0nlm0,,"I ran into the same issue. I just set the DNS servers on the iOS devices to point to an outside DNS server and the problem was taken care of. 

For iOS, go to Settings —> Wi-Fi —> Click on the blue information circle to the right of the network you are using —> Scroll down to Configure DNS and change it to Manual and add in what ever outside servers you would like.",pihole,1645565889.0
10792,comment,1,hy12nf0,,"Don't set it as her DNS, you can install a browser AdBlocker if she needs it.",pihole,1645571789.0
10793,comment,1,hy1ue4n,,"I'd just create a bunch of whitelists for the specific sites that your wife needs to access, assign them to a group (e.g. ""wife""), then set a client rule to assign your wife's device to groups ""Default"" and ""wife"". Being in group ""Default"" will block unwanted stuff as per normal, but being in group ""wife"" will unblock just the specific whitelisted sites.",pihole,1645584226.0
10794,comment,1,hy3ks3c,,"Three ways this can be handled: 

Method 1: Create a group just for her device, and don't assign it to any lists (Not even default). This will just turn Pi-Hole into a ""dumb DNS"" server for that device only. 

Method 2: Turn on Private/Secure DNS (DoT) or install an app like Nebulo or Intra (DoH/DoT) on the device in question - This will allow the device to just bypass Pi-Hole. (IF you're not blocking this on an upstream firewall)

Method 3: Have device use another outside DNS server (1.1.1.1, etc)(This will work if you're not blocking or redirecting DNS to Pi-Hole)",pihole,1645624154.0
10795,comment,2,hy0q77c,,How do I make the group not filtered? Don’t assign any adlists to that group?,pihole,1645566868.0
10796,comment,3,hy0o4ed,,"Ya, I know how to do that. I was hoping to avoid this because it’s updating multiple devices (phone, iPad, laptop). Also, it’s one more thing/place to maintain settings. If I can keep it all server side and push them, it’d be easier.",pihole,1645566083.0
10797,comment,1,hy1y1oy,,"I was doing this for awhile, but she was getting tired of constantly having me unblock things.",pihole,1645585906.0
10798,comment,2,hy0qys9,,"Exactly this.

I ended up going this route as well, as my fiancée seems to have a love/hate relationship with PiHole. I don't have any blocklists tied to her device group right now, so she's getting ALL the ads and trackers, lol

I always offer to ""re-enable"" it for her when she complains about the ads, though.",pihole,1645567156.0
10799,comment,2,hy0s0ai,,"Going this route, could I still add some domains to the blacklist for this group, even though there are no adlists ties to it?",pihole,1645567558.0
10800,comment,1,hy16fpt,,"So I tried just this.

I created a new group ""Bypass"". I assigned my iPhone to this group, and only this group. This group is not tied to any AdLists.

However, when I view the logs while browsing Facebook, I still see:

>Feb 22 15:38:27 dnsmasq\[9111\]: query\[AAAA\] app-measurement.com from 2601:204:ca00:4XX:XXXX:XXXX:XXXX:926e  
Feb 22 15:38:27 dnsmasq\[9111\]: gravity blocked app-measurement.com is ::  
Feb 22 15:38:27 dnsmasq\[9111\]: query\[A\] app-measurement.com from 2601:204:ca00:4XX:XXXX:XXXX:XXXX:926e  
Feb 22 15:38:27 dnsmasq\[9111\]: gravity blocked app-measurement.com is 0.0.0.0

So blocking is still going on.

Now, one thing I have noticed, but my iPhone apparently will generate new IPv6 addresses when I disconnect and reconnect from wifi (I have Private Wi-Fi Address turned OFF). I added my device as a client via the MAC address, which my understanding should catch all possible IP addresses my device has. Is there a lag in when pihole associates the ip to the Mac? or maybe there is a different method that is used?",pihole,1645573399.0
10801,comment,2,hy1949n,,"This is a really good question. I’d like to know the answer to.

Btw, private address controls the MAC address of the device not the IPv6 privacy extension that generate new IPv6 addresses periodically or when reconnecting to a network",pihole,1645574549.0
10802,comment,1,hy1juis,,"From what I recall, the app-measurement.com block is a setting defined in the FTL config (default is enabled, if memory serves). This is a global setting for all devices, regardless of group membership. I have this defined in my config as well, and it doesn't negatively impact her web experience.

I would also test on an ad-laden website (Yahoo, CNN, MSN are some of the worst offenders that immediately come to mind) and see what your experience is like.",pihole,1645579422.0
10803,comment,1,hy1qtc5,,"Group Management| Ad Lists

From there you can see the group assignments for each add list.  All of mine only have the block group.

I hope that is the final piece of the puzzle for you.",pihole,1645582618.0
10804,comment,2,hy19int,,I'm making a forum post over on the discourse (sorry if that is bad form) to follow up on this. Not sure how often the devs patrol over here.,pihole,1645574721.0
10805,comment,2,hy1a9ub,,They’re active on both. Certainly not bad form,pihole,1645575056.0
10806,post,0,sywk20,How can I run Pihole repair without triggering the dialogue?,"I'm trying to automate the process of running Pihole repair with a bash script, but I'm stuck with the dialog that Pihole pops-up when running ""pihole -r"".

I tried to see if I can pipe it, but due to the fact that Pihole triggers the dialog and let's you select 'Repair' or 'Reconfigure', it doesn't complete.

How do I bypass this step and automatically run repair like ""pihole -r --repair"" for example? This command would be useful by the way if there is no native way  to do so already.

I tired it with something like ""echo -ne '\\n' | pihole -r"" and other variations, but it doesn't work in this case.

EDIT: Found non-native solution, check comments.",pihole,1645559435.0
10807,comment,2,hy077up,,Stupid question: What causes an admin to need to run repair commands regularly?,pihole,1645559703.0
10808,comment,1,hy0fa8a,,Look into “expect” the language. You can setup an expect wraper that calls the repair script and reply to every prompt.,pihole,1645562784.0
10809,comment,2,hy1nelc,,Not a stupid question. You should never need to repair. Something is wrong if you do. Automating is the wrong approach.,pihole,1645581067.0
10810,comment,1,hy08mes,,"It wouldn't be regularly, but I still think it would be useful to have this command natively.

There are times that I have a power outage in my house, and it causes Pihole to corrupt in some way or another (run on a RPi4).

The way I have to fix it then is by changing the resolver to something like '1.1.1.1' and then repair. What I want to do is create a bash script and run it for situations like this, so I don't have to be on a terminal when it happens and the whole house loses internet connection.

My only problem is this dialog. Other than that I pretty much figured it out.",pihole,1645560238.0
10811,comment,1,hy0pqan,,"This is awesome, thank you. I figured it out, I will add the steps below for anyone in need for this.

1. Install the 'expect' package
2. Create a bash script to run the Pihole repair dialog and give it execution permissions (example name test)
3. Create the ""expect script"" to automate the process of enter input

&#x200B;

    #!/usr/bin/expect -f
    
    spawn ./test
    expect ""We have detected an existing install."" { send ""\r"" }
    interact

4. Save the file and give it execution permissions (assuming both files reside inside the same parent directory, otherwise specify path to 'test' file, not just the name.)

Done, after this you can just run the file and it will automate the whole process of repair. This is very basic and probably you can run the 'pihole -r' command from inside of the ""expect script"" without creating a second file, but I'm too lazy to look it up right now.

WARNING: This is just the solution for the specific problem I had in the OP thread and not the whole script of detecting corruption and making the necessary changes before this part comes up, since it would be out of scope. If you use Unbound for your own Upstream DNS, this won't work without changing the resolver temporarily to something like '1.1.1.1'.",pihole,1645566687.0
10812,comment,1,hy1nkkn,,I was thinking it. Glad you said it 😎✌️,pihole,1645581143.0
10813,comment,1,hy3lnh5,,"It's simple. While Pihole processes traffic, a power outage happens. This causes the Pihole to break and therefore I have to repair.

There are a lot of threads I encountered with the same problem and all replies by the Admins give the solution of changing the resolver temporarily and performing a repair.

Since right now I don't have a UPS to prevent outage, this is my only solution. It will detect the incident and then perform the repair, that's it.

Not a stupid question and not a stupid, at least temporary, solution. Whats your recommended approach of troubleshooting Pihole corruption due to unexpected power outage?",pihole,1645624571.0
10814,comment,2,hy093da,,Might I suggest investing in an uninterruptible power supply (UPS). Some can be had for cheap and they significantly increase your network stability and uptime.,pihole,1645560415.0
10815,comment,1,hy1n47g,,"Sounds like you are trying to solve something that shouldn't be happening. You should solve the cause of the problem, not try to automate repair. 

You should, when working normally, never use repair.

You are trying to cross the ocean by removing the water. That's the wrong approach.",pihole,1645580937.0
10816,comment,1,hy0segw,,I am glad it helped. FYI: There is an autoexpect command that can build an expect script named “script.exp” based on your initial run.,pihole,1645567710.0
10817,comment,1,hy09abb,,"Definitely going to buy a UPS for my whole setup, but for now this is the solution for me. Lately we had a handful of outages due to weather.",pihole,1645560487.0
10818,comment,1,hy0swf6,,"I just read about that too, thanks. This is a very basic just-found-out script for me anyway, so I just posted it like a solution for anyone with the same problem. I will optimize it for sure later!",pihole,1645567894.0
10819,comment,2,hy0b27y,,"https://imgur.com/a/GLwrLx0  Oh I know all about how that can be, I am in the same boat. Thus, I love my UPS. Internet gateway, router, PiHole, switches, wireless access points, NAS; it all runs for 180min after the power is out, plenty of time for a safe shut down if need be.",pihole,1645561165.0
10820,comment,2,hy0bvxw,,"I love the setup, definitely going to setup something like it. I was already thinking of an APC UPS too, how much was this one?",pihole,1645561481.0
10821,comment,1,hy0cfdd,,Amazon lists it at $207 now. I got mine at my local Microcenter for like $180.,pihole,1645561690.0
10822,comment,2,hy0curs,,"Going to take it into consideration, thank you.",pihole,1645561854.0
10823,post,4,syvrmx,Help with Pi-hole set-up on Orbi R50 with ATT modem (Fiber),"Hi everyone, I recently upgraded to ATT Fiber (had spectrum before) and kept my mesh system (Orbi R50). 
            
* *ATT Modem:*
I have IP passthrough set-up on the ATT modem and disabled the radios as well as packet filterting. 

* *Orbi R50:* I have AP Mode enabled. 

I think due to this set-up i'm unsure how to update/change the Orbi DNS so I can set-it to the Pi-holes IP address. 

My rasberry pi is connected directly to my Orbi and Orbi is connect to the modem. 

In AP mode I try and select fixed IP and enter my Pi-holes IP for primary and secondary DNS but I get an error. 

LAN set-up is grayed out entirely.",pihole,1645557435.0
10824,comment,2,hy0m0lc,,"I think you'll still need to have the Orbi in router mode since you've put the modem in Passthrough.   


Not sure how many IPs AT&T will dole out (usually on residential, it's one ).",pihole,1645565297.0
10825,comment,1,hy0evsw,,Are you configuring your Orbi from the web interface? I have pi-hole running DHCP and DNS alongside my Orbi no problems.,pihole,1645562633.0
10826,comment,3,hy0owiy,,"I did think this was a weird setting, but followed instructions I saw when googling my initial set-up. I’ll try router mode and see if that helps. Thanks!",pihole,1645566375.0
10827,comment,1,hy0faph,,"Correct, the app is pretty lightweight so I have to use the web UI. 

I was able to set-up the Orbi previously when I had spectrum, but I ran into issues when I switched to ATT and set the router to AP mode.",pihole,1645562789.0
10828,comment,3,hy10fbf,,Router mode is what you need to configure the Orbi’s DNS settings. 👍,pihole,1645570865.0
10829,post,4,syueci,Pi-hole being blocked,"My instance of pi-hole running on a Rpi4 has made a couple of requests that were blocked, one to crashlytics.com and one to adsbynimbus.com. Why is this?",pihole,1645554066.0
10830,comment,3,hxzzgf9,,"If Pi-hole is blocking them, those domains are either in your adlists or in your local domain blocks.",pihole,1645556748.0
10831,comment,1,hy2j9vt,,Do you mean the pi itself made those requests? What else do you have running on it?,pihole,1645597145.0
10832,comment,1,hy3gxyy,,Second one is a mobile ad provider. By any chance are you also running a VPN or other tunnel on your Pi?,pihole,1645622201.0
10833,comment,1,hy3sm7e,,"The only other non-system app running in realVNC, for remote access, so I guess that's it. I don't see ads when using VNC, so it must be tracking. The connection still works when blocked, so I'll leave it that way. Thanks to all who replied.",pihole,1645627739.0
10834,post,4,sytaxu,"EPDG calls can't be disabled, anyone seen this?","iphone, when on a piholed wifi network and cellular data is disabled pihole is seeing tons of these from the phone. WiFi Calling is disabled on the phone and i created a blacklist to ignore the DNS requests but am unable to discover how to disable this feature. pretty sure its related to wifi calling and using wifi for cellular communications when in spotty areas. Anyone seen this and figured out how to actually disable?

Feb 22 12:25:23 dnsmasq\[695\]: regex blacklisted [ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org](https://ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org) is [0.0.0.0](https://0.0.0.0)

Feb 22 12:26:23 dnsmasq\[695\]: query\[A\] [ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org](https://ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org) from [192.168.1.159](https://192.168.1.159)

Feb 22 12:26:23 dnsmasq\[695\]: regex blacklisted [ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org](https://ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org) is [0.0.0.0](https://0.0.0.0)

Feb 22 12:26:53 dnsmasq\[695\]: query\[A\] [ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org](https://ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org) from [192.168.1.159](https://192.168.1.159)

Feb 22 12:26:53 dnsmasq\[695\]: regex blacklisted [ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org](https://ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org) is [0.0.0.0](https://0.0.0.0)

Feb 22 12:27:23 dnsmasq\[695\]: query\[A\] [ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org](https://ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org) from [192.168.1.159](https://192.168.1.159)

Feb 22 12:27:23 dnsmasq\[695\]: regex blacklisted [ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org](https://ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org) is [0.0.0.0](https://0.0.0.0)

Feb 22 12:28:23 dnsmasq\[695\]: query\[A\] [ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org](https://ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org) from [192.168.1.159](https://192.168.1.159)

Feb 22 12:28:23 dnsmasq\[695\]: regex blacklisted [ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org](https://ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org) is [0.0.0.0](https://0.0.0.0)

Feb 22 12:28:53 dnsmasq\[695\]: query\[A\] [ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org](https://ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org) from [192.168.1.159](https://192.168.1.159)

Feb 22 12:28:53 dnsmasq\[695\]: regex blacklisted [ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org](https://ss.epdg.epc.mnc260.mcc310.pub.3gppnetwork.org) is [0.0.0.0](https://0.0.0.0)",pihole,1645551392.0
10835,post,3,syrdxm,"pihole does not show all hostnames, some still visable as ipadres","HI, just installed pihole on my raspberry pi. works fine, usde opendns for upstream and set my RPI as DNS for my router. Some of the devices show up with their hostnames, but some still show only as IP adres. How can I fix this??

&#x200B;

thanks

gr bas",pihole,1645546599.0
10836,comment,1,hxztqn9,,[deleted],pihole,1645554595.0
10837,comment,1,hy0bw5p,,"thanks! Not all devices have static ip, but checking the ip adresses with fing also works :-)",pihole,1645561484.0
10838,comment,1,hy3fx7j,,"in the /etc/hosts fil I only see this:

  `GNU nano 5.4                          hosts`  
`127.0.0.1       localhost`  
`::1             localhost ip6-localhost ip6-loopback`  
`ff02::1         ip6-allnodes`  
`ff02::2         ip6-allrouters`  
  
`127.0.1.1       RPI3`",pihole,1645621644.0
10839,post,8,syq1rb,PiHole keeps going offline every few hours,"As the title says. Web UI is reachable, all statistics on the dashboard read ""NAN"". Other aspects of the UI are available, though things like generating a debug log fail with no output, likely due to being unable to upload what with DNS resolution failing. Accessible via SSH, too. Generating a LOT of errors that it didn't used to, mostly relating to 1 particular device trying to get DHCP, even though it has its address statically assigned both in the DHCP server and in its on-board configuration. (PiHole also functions as DHCP server in home network, since my modem/router combo unit won't allow custom DNS settings.)

[Here's a screenshot](https://i.imgur.com/xSVxgjO.png) of what errors have been generated in the last ~5 minutes, since reboot. Before I rebooted this morning, ~12 hours since the last reboot, there were ~4300 errors in that log. 

https://tricorder.pi-hole.net/JJM4RKUU/ - debug log, though I got a 403 when I tried to visit that. I may be doing something wrong.

---

This happens every few hours, and has been going on since Friday. I've updated pihole and tried to update the rest of Linux, though every time I do the latter I get this output:

    The following packages have been kept back:
    raspberrypi-sys-mods raspberrypi-ui-mods
    0 upgraded, 0 newly installed, 0 to remove and 2 not upgraded

But that's how it's always behaved, so I didn't really think anything of it. 

It'll work fine for a while, but at some point, likely early this evening, it'll just stop working, I'll go check the web UI and it will report the status of ""offline"" and no DNS resolution will be possible. If I'm away from home, my connection on my phone will shit the bed, since I use Wireguard VPN for DNS resolution when away. 

Let me know if you have any other questions, I'll provide whatever I can to help y'all figure out what this is. 

Thanks!",pihole,1645543117.0
10840,comment,2,hxz2hhs,,"To start with your screenshot, you have a device in /etc/hosts with a static IP but it looks like you have not assigned that through DHCP so it is conflicting.  Start there.",pihole,1645544031.0
10841,comment,2,hxzscbj,,"Happens to me, every few times, I just reset the Pi, idk if its the Pi-Hole or just the connection dropping.",pihole,1645554065.0
10842,comment,2,hy15yb1,,Are you using PoE to power your RPi? I've seen that cause similar issues if there isn't enough power.,pihole,1645573191.0
10843,comment,1,hxz9dfx,,"Output of ip addr on RPiNAS shows that it's using 192.168.10.4 for eth0, but .134 for wlan0, so that's that mystery solved. Not sure why wlan is active, as I disabled it when I first set it up, but hey, whatever. I've disabled it again.

Still not telling me why it's going offline every few hours. Is it possible that this issue was generating enough errors to overwhelm the resources available to this RPi? It's a 3B, so it *should* be able to handle all of this with no issue. And, TBF, it has, for several years now. Nothing else runs on this RPi, either. Just PiHole. 

Thanks again!",pihole,1645546796.0
10844,comment,1,hxzsq42,,"I mean, same here! I've had to reset it a few times over the years I've had it, for sure. Every few months or so seems right. But now it's like every few *hours*, which is a whole other animal of a problem.",pihole,1645554211.0
10845,comment,1,hy17kqe,,"Nah. I did, but the PoE HAT left a lot to be desired. It's got a Canakit high quality PSU on it. Good thinkin, though!",pihole,1645573883.0
10846,comment,1,hy05zzu,,It might happen once or twice a day for me.,pihole,1645559235.0
10847,comment,1,hy068da,,"Where you completely lose DNS resolution for your whole network? And you're not curious as to why, or trying to resolve that? That is not normal, or even remotely acceptable, behavior...",pihole,1645559324.0
10848,comment,1,hy078ra,,"Yeah, it kinda doesn't bother me that much, think it should be the network on the Pi, as private transmission IP was not accesible from a PC.",pihole,1645559713.0
10849,comment,1,hy3hugo,,"It's weird tho that my Virtual Machines didn't use the secondary DNS, or so it seems.",pihole,1645622675.0
10850,post,25,syphzo,1GB RAM ok for PiHole?,"Does anyone know if a 1GB RAM Pi4 is enough ram for running PiHole? 

Thanks in advance!",pihole,1645541696.0
10851,comment,35,hxyxn8f,,"Yes, plenty. My PiHole is Zero 2 W with 512m Ram.",pihole,1645542004.0
10852,comment,7,hxzmbnh,,"I'm running on the original Pi-Zero WH - memory load is sitting at 13.6%. The only time I notice it ""slow"" is when if/when I reboot or updating the Pi-hole software takes longer than it would on a PC or more-powerful Pi. But it's very ""set it and forget it"" anyway when you do that, so just walk away and have a snack.",pihole,1645551780.0
10853,comment,6,hxz33ke,,"Should be fine, make sure to pick a light OS :)

I run my VM with 1 core and 512 MB Ram",pihole,1645544280.0
10854,comment,6,hxz9psa,,"Even lighter as a LXC container I use on Proxmox only need like 256MB ram, you'll be fine, just stick to a light OS like /u/cptnoblivious71 suggest. or even go headless/non GUI, pihole just doesn't need it!",pihole,1645546930.0
10855,comment,4,hxzg978,,I have a Zero W and it runs just fine.,pihole,1645549451.0
10856,comment,3,hxzivps,,works fine on a zero w 512mb of ram over wifi,pihole,1645550463.0
10857,comment,3,hxzagqn,,My Pi-hole instance is on a Raspberry Pi 4 w/ 2GB but only uses \~100MB. That includes running Unbound with the OS DietPi.,pihole,1645547221.0
10858,comment,2,hxzbzif,,"i use raspberry pi os lite 64 bit on pi 3 which has 1 GB ram, you should be good",pihole,1645547807.0
10859,comment,1,hxzdgss,,"I run 64 bit Ubuntu Server VMs with 512MB.  There is free RAM, I think I could safely go to somewhere in the 300's.

You can use the spare RAM for a VPN server, or ...",pihole,1645548382.0
10860,comment,1,hxznfym,,"I ran it in a vm with like 290 ram, anything less and it didn't work. I also ran it on a eeepc from 2010 1gb ram for like 5 years.",pihole,1645552204.0
10861,comment,1,hy0bss3,,Running mine on the orginal pi zero with 512 meg.   Internet via usb wifi dongle,pihole,1645561447.0
10862,comment,1,hy0d9j6,,Mine is running on an old Pi 1 with 512 megs. Both CPU and RAM are bored.,pihole,1645562013.0
10863,comment,1,hy0efbn,,"Thanks everyone. I’ve been wanting to get a Pi however the stock shortages have been annoying. CanaKit has 1gb kits in stock, as of two hours ago.",pihole,1645562456.0
10864,comment,1,hy0lb47,,"1GB is huge for pihole. Your OS will use more memory than pihole. If you run the desktop version, it will want more RAM. If you use a lite headless OS it will have plenty of RAM for pihole and a lot more.",pihole,1645565033.0
10865,comment,1,hy108ph,,Thats way overkill.  I run on a Pi Zero W and have no problems.,pihole,1645570791.0
10866,comment,1,hy11rw2,,More than enough. I've been running Pi-Hole on my Raspberry Pi 1 with 256 MB of RAM for over a year and it's only using about 30-40% of that RAM.,pihole,1645571421.0
10867,comment,1,hy14pa7,,"More than enough. I run my raspberry pi 3 with pihole, pivpn, unbound, plex, transmission and I have memory usage at 18%. It's also thanks to dietpi that keeps the stress of the system super-low. So choose your os wisely.",pihole,1645572659.0
10868,comment,1,hy16fid,,Mine's running perfectly happily on an OG Raspberry Pi B with 256Mb.,pihole,1645573396.0
10869,comment,1,hy1fn4n,,Way overkill,pihole,1645577495.0
10870,comment,1,hy1o0dd,,ALL for home use anything you can put pihole on is OK. Unless you’re that grey bread at my work that has a 1980 ibm.,pihole,1645581345.0
10871,comment,1,hy1ps91,,"More than enough, I'm running on a Pi 4B 1G with RaspiOS lite. For the most part it's snappy, only when querying the entire database do I find it slow.",pihole,1645582149.0
10872,comment,1,hy1tgs7,,Should be fine. Have been running Pi-hole on a Pi 1 for 2 years.,pihole,1645583810.0
10873,comment,1,hy28h0s,,"My RPi 4 with 2GB shows that Pihole is currently using 12.6% of available RAM. 

It's also running PiVPN, and not remotely close to breaking a sweat.",pihole,1645590933.0
10874,comment,1,hy2cxqq,,"I've got 1GB in a Pi 3B, and it's plenty. The pihole admin page shows 21.4% total memory usage, and that's with XRDP and transmission running, as well.",pihole,1645593258.0
10875,comment,1,hy9ljic,,"1GB seems to be way too much. I have a PiHole running off of a Raspberry Pi 3. I think I have PiOS or something lightweight as the operating system. While running 'pihole -c', it reports to be using less than 100MB of RAM.",pihole,1645723971.0
10876,comment,3,hy10j78,,Mine is on Zero1 with PiVPN... and unbound for  experiments.,pihole,1645570909.0
10877,comment,2,hxzoxzf,,"Exactly, no GUI required as u/Nanabaz2 points out.  The VM I mentioned runs Ubuntu Server 20.04, so, no GUI and it uses just over 200 MB of RAM (I just gave it some spare :) ).",pihole,1645552769.0
10878,comment,2,hy0ncve,,Keep in mind that the Pi4 performance wise is absolutely overkill for Pihole unless you have a ton of clients. For a normal household a Zero does the job perfectly aswell,pihole,1645565798.0
10879,post,54,syo337,Odd behavior since yesterday - localhost heavy query action wifi dropping,"So I am using the google nest system and I have it DHCP enabled to hand out one address and one address only, which is reserved for the pihole, which seems to be holding that address just fine.  DHCP server is set up and running as it has for a while on the pihole. Yesterday around noon, I tried to update gravity after adding some whitelist items.  After that happened, I started seeing a TON of inquries from localhost and pi.hole.   I ended up turning off the DHCP server and enabling on my google puck instead and all seemed to be fine again.  I rebooted the wifi and the pihole and then set it back up the way it was, pihole being DHCP server enabled and changed google wifi back to the way it was. All was well until last night at 2AM, the localhost and pihole were heavily hit again with about  5k queries per hour.  I am not sure why it's behaving this way.

&#x200B;

Edit: Getting many of these errors, even after turning off DHCP on the pihole and enabling on the pucks, just so I can work in the meantime:   Maximum number of concurrent DNS queries reached (max: 150), probably doesn't surprise anyone here.  At times, the PI appears to be over 100% of capacity, the load goes into the red.",pihole,1645537857.0
10880,comment,4,hxzc4ih,,"Interesting, I started getting ton's of localhost and pi.hole requests from mine. I thought it was related to Ubuntu updates. I ended up moving them to raspberry pi os (bullseye, no gui) and it cleared up. I still see some, but I was getting 5000+ per hour just seemingly out of the blue.",pihole,1645547860.0
10881,comment,3,hy03ymy,,"on Pihole try enabling the following on DNS setting page.

`Never forward non-FQDN A and AAAA queries`

`Never forward reverse lookups for private IP ranges`

it might be software on the pi or local networking trying to reverse DNS on IPs and/or looking up non-FQDN's of devices on the local network.

Is the pi itself using pihole or separate DNS?

Have you looked at the query log to find what is being looked-up,  may give a clue?

Other than that use tools like netstat to see what applications and devices are making these queries.",pihole,1645558457.0
10882,comment,2,hy0p544,,"Are you saying that you have two DHCP servers (Google Puck and Pi-hole) on the same network segment?

If so, that's not going to end well (in fact, it's surprising that it even started well).

Running two DHCP servers for the same segment is only practical when they're configured to peer and properly failover.

Turn off DHCP on the Google system and assign your Pi Hole's system a static IP in the OS.  Then just use Pi-hole DHCP.

Or, disable Pi-hole DHCP and make the Google DHCP range large enough to cover all your devices (plus 10-20%).",pihole,1645566464.0
10883,comment,1,hxzerhm,,I'm going to try undoing any changes I made yesterday including adding some white lists.  I can't imagine something I white listed caused this but it's worth a shot.,pihole,1645548878.0
10884,comment,1,hy0ewgz,,"Same thing happened to me yesterday, I had to disable my pi-hole today so I could work. 

I haven't had a chance to trouble shoot it yet.",pihole,1645562640.0
10885,comment,1,hy0i3v0,,"A few suggestions:

* Are you sure your DHCP ranges don't overlap? It would be very bad indeed if another device on your network received your pihole's IP address.

* Have you tried adding Local DNS entries for the domains getting all the lookups? Once the requesting device has received an IP in response it should cache it.

* What device is making all the requests? You should be able to see which it is in the ""Top Clients (total)"" section of the Dashboard.",pihole,1645563846.0
10886,comment,1,hy0pucl,,"Wifi dropping? That has only ever happened to me on weaker hardware when pummeling it with streaming or massive amounts of recurring requests.

Pihole issues aside you may want to diagnose your hardware. You can naturally reach a point where you need more processing power and more antennas.",pihole,1645566731.0
10887,comment,1,hy0x63p,,I had a similar issue a while back. It was caused by setting my pihole as dns on the wan side of my router if i'm not mistaking. Setting these to 1.1.1.1 solved the issue,pihole,1645569567.0
10888,comment,1,hy1g3t9,,I’ve had this issue since installing last month on Ubuntu. Wi-Fi turns off after three days. Not sure if related.,pihole,1645577706.0
10889,comment,3,hxze0tj,,"I'm on the raspberry pi OS without a GUI on a raspberry pi zero with a wired adapter. I had gotten a lot of hits on my Linux machine yesterday actually for Ubuntu updates. The timing of it happening at 2:00 a.m has me stumped there was nothing going on here at that hour.

Edit. I'm moving some files around on the network. Just a few family pictures and they're moving at a very slow speeds. Like $125 pictures is moving at 743 kB/sec. This is from one NAS to another NAS so it should be very quick. Everything is cat 6 or 5e. The entire network is moving very slow and I have to wonder if this is something bigger outside of the pihole.  In just trying to update running sudo APT Get update on the pie hole. I can't even resolve the address to raspian.raspberrypi.org.

Edit2: since I had significant network speed degradation, including file transfer speed from device to device over wired connections. I shut down the raspberry pi and everything seems to have gone back to normal so whatever is happening is almost certainly coming from the device.",pihole,1645548595.0
10890,comment,1,hy0dveg,,I do have those two boxes checked. It's Google for DNS servers.  The top domains it's hitting over and over again are pihole.pihole and pihole.lan ( The raspberry pi and the domain are both named pihole). The top clients are pi.hole and localhost. I checked the logs and it's showing pihole.lan as the domain local host as the client status okay and reply is serv fail over and over.   Note I was running unbound and had a custom IP address in there for upstream DNS server. I've removed it and let's see what happens. The way the logs look it kind of looks like it's circular logic trying to ping itself over and over again. I'll run it for a bit and send an update this evening. I appreciate the help.,pihole,1645562243.0
10891,comment,1,hy3j36i,,"I took another look this morning,   basically getting this over and over

query\[A\] pihole.home from (ip address of pihole)

dnsmasq\[5393\]: forwarded pihole.home to [127.0.0.1](https://127.0.0.1)\#(unbound port)

&#x200B;

Unbound is running, this is new behavior so it's hammering itself to death here?

&#x200B;

 Edit: looked a bit more later, it's doing this on every request, which I guess means it's running itself in circles.    Changing DNS back to a traditional server like google results in reduced spikes.  Still seeing most inquiries come from ""localhost"".",pihole,1645623319.0
10892,comment,1,hy12k2z,,"So I followed the instructions I found online somewhere and quite frankly it worked well for a while. Google only hands out one address and has One address reserved and it's for the pi hole only. So say my Google pick ends in.1 The pie ends in .2.  Google only has the IP address of .2 reserved and only hands out IP addresses between .2 and .2. The pie hole can hand out addresses from  .10 to .250. I just couldn't find any other instructions online to get to work well with pihole being the DNS server.   That being said, if there's a better way I'll definitely try it.",pihole,1645571749.0
10893,comment,1,hy0mgjb,,"DHCP is not overlapping. I'm not quite sure how to do step two. All of the requests were coming from the pi hole itself or localhost. For some contacts at 4:00 a.m. the pi hole had 5,500 requests, localhost had just short of 3,000 and the next highest device which was my desktop had 55. Since I took out the custom DNS server for unbound, it seems to have resolved but I have very few devices on the pi hole.   I'm going to let it simmer for a little bit and then turn the DHCP server back on when I turn it off the Google pucks.",pihole,1645565462.0
10894,comment,1,hy18514,,It was definitely getting pummeled. When the pi zero was getting hit that hard. It's way over capacity and lag times are so long that the monitor shows it is actually being down while it's trying to essentially catch up as best I can tell. I used to run it on a raspberry pi 4 and had really no issues but it was like driving a Lamborghini to the neighbor's house when I could have walked in terms of the amount of overkill.,pihole,1645574127.0
10895,comment,3,hxze9br,,"I posted a thread over at pihole forums, but no bites

https://discourse.pi-hole.net/t/2-piholes-primary-started-seeing-hundreds-of-requests-for-ubuntu-localdomain-from-secondary/53707",pihole,1645548685.0
10896,comment,2,hy13k3r,,"Those were bad instructions.  Set a static IP on the Pi and turn off the Google DHCP server.

Here's why... the Google DHCP server will hand out .2 to the Pi-hole.  But it won't just stop there.  Any other device asking to DHCP an address could potentially begin a conversation with the Google router instead of the Pi-hole -- the thing is, the Google router will end up just saying ""no address for you!"", then the client tries again until it somehow manages to have the DHCP conversation with the Pi-hole and get an address.

source: 25+ years of net.admin, sometimes dealing with the annoyances of poorly configured and rogue DHCP servers.",pihole,1645572172.0
10897,comment,1,hzkbre6,,"Two DHCPs ?
No wonder 
Technically it could still work.
However, you should only have one DHCP server/agent per subnet.",pihole,1646564670.0
10898,comment,1,hy0oulq,,"> I'm not quite sure how to do step two.

After you log into the Pi-hole admin screen, look down the left side column menu. You will see ""Local DNS"". Click on that. Then click on ""DNS Records"". You can manually add domains and IP addresses there that Pi-hole will use to fulfill requests. Add the domains that are being constantly requested along with the correct IP addresses for them.",pihole,1645566355.0
10899,comment,1,hy18jhh,,"Thanks for the input. I always was of the understanding that having two DHCP servers was like crossing the streams. You don't know what's going to happen but it's not going to be good. So if I turn off DHCP do I just set it lan?  I love the Google pucks portability and usability, but I prefer the old fashioned router interface.

Edit: I was out running some errands when I responded to this. I got home to check the settings on the router. My choices are DHCP static or PPOE.  The problem is I have a dynamic IP address so my only choice is DHCP unless I'm doing it wrong.  PPOE doesn't seem to apply which is why just about all the instructions I can find show to use DHCP and reserve one address and one address only and Make the pool one address long.",pihole,1645574303.0
10900,comment,1,hzkiaxq,,"In case anyone is wondering what I ended up doing here.  Because the Google pucks are so inflexible for setting up, I retired them and got a ""real"" router. All working fine now.",pihole,1646569779.0
10901,comment,1,hy19h3s,,">I always was of the understanding that having two DHCP servers was like crossing the streams. You don't know what's going to happen but it's not going to be good. 

That's exactly right!  And the results are inconsistent from one day to the next (as you've experienced).

It is possible to configure multiple DHCP servers on a single segment -- the trick is that they need to be set up to both know about each other and cooperate.  Even then, they can get confused... LOL

>So if I turn off DHCP do I just set it lan?  

You mean on the Google router side?  Probably?  I haven't had the ""pleasure"" of dealing with that interface...",pihole,1645574702.0
10902,comment,1,hy1i25s,,"You have no idea what you're missing, and I don't mean that in a nice way, Google.    Apparently it's impossible to turn DHCP off on these Google pucks. 

So I've been running the pihole the last 6 hours or so with the DHCP server coming from the google pucks and the pihole just being on. My ad blocking has gone down from what used to be about 10% to 0.2%. The pi hole is extremely laggy still and at times I'm still getting load warnings.   Strangely, my normal load would be less than 10% and I'm hovering between 80 to 90 normally now since I turned off DHCP.  And it still lags out so badly, at times the chronometer shows it as down.",pihole,1645578601.0
10903,comment,1,hy1idxs,,"Ok, so the blocking likely went way down because the DHCP server isn't pointing clients at the pihole.

Can you configure that in the Google puck settings?",pihole,1645578754.0
10904,comment,1,hy1ripy,,"Unfortunately no. There is no way to turn off DHCP in a Google Puck short of using a hammer on it. That last thought has crossed my mind today.  I can however set it as a DNS server but then I don't think it can tell the difference between my phone, a computer and a television.",pihole,1645582935.0
10905,comment,1,hy1skrt,,"Sorry, perhaps I wasn’t clear.

Can you configure the DNS settings in the router to point clients at the pihole for DNS?

I mean, I’m not opposed to the hammer approach, but I’d probably try and sell it first. Lol",pihole,1645583411.0
10906,comment,1,hy1vsbt,,"Yes I can point the DNS to the pihole. So at that point I assume leave DHCP disabled on the pihole and continue to leave it enabled on the Google Puck since I can't turn it off? 

I agree hammer is last resort and generally reserved for hard drives I'm scrapping.",pihole,1645584860.0
10907,comment,2,hy1w0wy,,"Exactly.

The pihole can still tell which client is requesting things so that shouldn’t be an issue.",pihole,1645584969.0
10908,comment,1,hy1xaad,,Thank you so much for all of your help!,pihole,1645585551.0
10909,post,2,sylu1f,provide Pihole DNS over HTTPS (not cloudlared) ?,"I know I can set up Pihole to receive dns from cloudlfare via https probably from other DNS too.

But I have pihole hosted on my cloud server, and I would like to set it up with encryption if possible.

Can I set up Pihole to provide DNS over TLS? I use traefik proxy for the webserver and pihole runs in docker.

Reason I would like to set this, is so I can use it on my mobile, as android allows only to use DNS over TLS as default provider, without using any extra application. I just simply cannot put there only IP for some reason.

EDIT:

I tried to follow this  [Pi-hole + traefik = DNS-over-TLS : pihole (reddit.com)](https://www.reddit.com/r/pihole/comments/fy8zmu/pihole_traefik_dnsovertls/) 

But I forwarded only 853 to 53/tcp on pihole, I did not forward ports 53/tcp udp via Traefik and I was getting error in Traefik logs that TLS certificate expired, and DNS did not connect on my phone. I was using same TLS cloudflare provider as for normal websites. Any idea why this failed?",pihole,1645530998.0
10910,comment,3,hxyedvh,,Dont run a open resolver. Install a VPN client with spilt tunnel,pihole,1645531930.0
10911,comment,3,hy14v8a,,"Having an open resolver only available over dns over tls or https isn't nearly as bad as people here make it out to be. I believe this ""rule"" mainly comes down to not participating in amplification attacks. If your open resolver isn't available over udp plain text, then you're fine in that regard. I think it's perfectly fine to set up a dns over tls (only) resolver, open to the public, for your own use with android's private dns feature. Others may disagree with me, but I encourage you to do your own research. The simplicity of using a built-in android feature and not having a constantly running vpn connection outweighs any security concerns of exposing _only_ a dns over tls service (which would be similar to running your own web server).

You can put unbound or nginx (can provide http and dot services using the same package) or stunnel or similar in front of pihole to provide the encryption. Or use Adguard Home which has it built in.

You will need a valid cert (just like you would for https). Check out https://ip.addr.tools for this.",pihole,1645572728.0
10912,comment,1,hxyzl99,,"This simply will not work without a service like unbound for TLS if you want to accept HTTPS/TLS connections I would suggest you look at Adguard Home, this is a built in feature, you do need to get a cert.

u/SodaWithhoutSparkles is correct, I just use wireguard and set it up to just send DNS requests back to my home, to get adblock, on iphone this can be setup to turn on when not connected to certain wifi's.",pihole,1645542836.0
10913,comment,1,hxz7ggx,,"about the adblock function, I even added more lists for blocking adds and I am still getting ads on youtube and other websites.",pihole,1645546039.0
10914,comment,0,hxz8xoq,,"Well you might want to check the internet, you cannot block youtube ads with dns, or any other site that serves ads over its own domain.

You'd be fine with just adding https://oisd.nl/ as your only list.",pihole,1645546627.0
10915,comment,1,hxzsvld,,thank you,pihole,1645554269.0
10916,post,15,sykkid,Wireguard & DDNS setup,"Hi everyone,

I've recently set up pi-hole on my raspberry pi zero and decided to give wireguard a try in order to be able to access my LAN remotely.

I'm following the [default](https://docs.pi-hole.net/guides/vpn/wireguard/server/) tutorial and in the [ddns section](https://docs.pi-hole.net/guides/vpn/wireguard/server/) they suggest using a DDNS provider such as no-IP. Thankfully my router does support them in-built so I enabled DDNS on my router, added the hostname, domain name, email, and password info, and saved the settings. According to [the no-ip guide](https://www.noip.com/support/knowledgebase/getting-started-with-no-ip-com/) , I shouldn't need to install their app since my router can do the work. My question is, which port do I forward and for whom in order for the DDNS and wireguard to work? I've port-forwarded 47111 as per the wireguard guide's instructions but I didn't port-forward anything else relating to neither the DDNS service nor my pi.

Port-forwarding on my router gives me a drop-down with a bunch of usual options, such as web server, sftp server, etc and you can also add your own (which is what I did for the wireguard server on my pi). Does the DDNS service fall under the web-server (port 80?) section?

Another question I have is that at the bottom of the ddns section page, it says that I should set my pi-hole to ""Listen of all interfaces"" mode. I don't see such an option in the DNS tab, can somebody point me in the right direction?

P.S.: No-ip has an [open port checker tool](https://www.portchecktool.com/) that I'm using to check if a port is open. I checked if port 47111 is open but it says it's not. Does that mean I messed something up when port-forwarding? Wireguard server doesn't run either on the pi right now which would make sense if the port is closed, right?

Thanks everyone in advance.",pihole,1645526526.0
10917,comment,3,hxygrtm,,"Wireguard default port is UDP 51820 but if you changed the config to 47111 that should be ok.  
Wireguard does not respond to anything unless you talk to it with the correct key so you cannot use any port checker.  
You do not need/shall not open any port on your router for the DDNS service to work. Check the DNS from a dns lookup site or with nslookup command eg. ""nslookup youdomain.dyn.com """,pihole,1645533459.0
10918,comment,2,hxyhsyi,,"""**Listen on all interfaces**"" is the ""**Permit all origins**"" option in the **Settings > DNS > Interface Settings**.

On your router, you will be forwarding the port you set for your wireguard install (47111/UDP in the guide) from the router to your RPi. If the wireguard service is running, this should only forward requests to port 47111 on to the RPi.

There is nothing to forward for the DDNS service. The DDNS service just works by your router authenticating with your DDNS provider and updating your ip address against the DNS name you set, whenever your public ip address updates.

Make sure to confirm that the ip address your DDNS provider has for the DNS name is the same as listed in your router for it's WAN (public) connection.

For the port to show as ""OPEN"" will require both the wireguard service to be running and a correctly configured port forward. If the service is NOT running then you may be getting forwarded by the router, only to have the RPi rejecting the connection as no service is available on the port being requested.",pihole,1645534095.0
10919,comment,2,hxzb3s4,,"For what it's worth, I could NOT get wireguard to behave on the same device as my pihole. I never did figure out why but after a restart some iptables were always conflicting. The solution for me was to put wireguard on a different vm (via proxmox). The symptoms sound very similar to your problems anyway.",pihole,1645547469.0
10920,comment,2,hy44fi5,,Thank you everybody for your help! I ended up going with PiVPN w/ Wireguard and everything works smoothly this way. I was facing too many issues when going at it alone using Wireguard alone.,pihole,1645632584.0
10921,comment,1,hxyj74m,,"Thank you very much, I was confused about the DDNS stuff. I read up on it a bit more and it makes perfect sense you're right!",pihole,1645534908.0
10922,comment,1,hxyjjcn,,"Thank you for the detailed answer! If you happen to know, isn't there any way to avoid permitting all origins since pi-hole docs advise against it usually?

As for the port-forwarding and DDNS service, your answer helped me a lot along with my research! I got wireguard up and running and confirmed that my WAN address matches the one I see in my DDNS provider's page.

As for the ""OPEN"" port, the redditor above you mentioned that despite wireguard running and listening on port 47111, any non-authenticated call to it, would  be dropped so I imagine that I can't test the port until I set up the peers, correct?",pihole,1645535101.0
10923,comment,1,hy1km0f,,"I went with wireguard on my OpenWRT router - but I already had a different wireguard endpoint configured there (for work VPN), so it made sense to have it there too.

That also made it easier to set up routing between WG devices and LAN devices.",pihole,1645579775.0
10924,comment,2,hxyvldt,,You can listen to eth0 but you are now two hops away using wireguard. The reason pi-hole docs have so many warnings is incase you do not know what you are doing and open port 53 or 853 on the router to the pi-hole. You shouldn't have any ports open except wireguard.,pihole,1645541105.0
10925,comment,2,hy3wkay,,">As for the ""OPEN"" port, the redditor above you mentioned that despite wireguard running and listening on port 47111, any non-authenticated call to it, would  be dropped so I imagine that I can't test the port until I set up the peers, correct?

That is correct. You could set up WG on another device outside your network and test the connection that way.",pihole,1645629409.0
10926,post,6,syjxs9,"Fusion360 don't work because of pihole, even disabled","Hello,

I can't use Fusion 360 because of Pihole and I don't know why.

When I fix IP and Google or Cloudflare DNS on my network settings, F360 works great. But if I use my pihole address as DNS (static or DHCP), it doesn't work anymore, even disabled.

In my query log, I don't see any blocked URL but I can found some with ""Unknown"" status but those one are OK just after.

I try multiple providers on DNS settings, even localhost with unbound but no change.

Have you an idea ? Maybe a F360 issue ? 

Thanks,",pihole,1645524182.0
10927,comment,6,hxy9yuv,,"I cannot help you out with debugging, but i can however tell you that fusion 360 runs perfectly fine on my computer with pihole set as a DNS, even when enabled",pihole,1645528737.0
10928,comment,1,hxzxe9r,,"I've been using pihole for about a week now.  I had some strange issues at first. 

Unfortunately; if you're like me I hate reading packet dumps, the best route for you to figure out why you're suffering these issues is to use wireshark or install splunk. Personally I go to splunk first, because I hate packet captures, it makes me feel like too much of a nerd.  

Splunk FTW bro.  Why guess? 

C",pihole,1645555972.0
10929,comment,1,hy0apph,,Works for me. Try seeing the traffic and add it to the whitelist,pihole,1645561033.0
10930,comment,5,hxydvmr,,F360 works fine for me as well both at home and work. And my blocklists are pretty aggressive. That said if it doesn’t work disabled then there’s a problem other than blocklists.,pihole,1645531583.0
10931,comment,1,hxyawzg,,"Thank you for your reply. That's good to know.

What version of Fusion 360 ? I have 2.0.12392.",pihole,1645529459.0
10932,comment,1,hxyffws,,Same here.,pihole,1645532623.0
10933,comment,1,hy0g79d,,I can't see any blocked request and it doesn't work even pihole is disable.,pihole,1645563132.0
10934,comment,1,hxzbmro,,"Yes, I conclude that too. Maybe not especially pihole btw, I don't know what happend...",pihole,1645547671.0
10935,comment,1,hxz6spv,,"I do not remember which one it was, since I nuked windows, but i suppose it was pretty recent",pihole,1645545777.0
10936,comment,1,hxysrek,,Same issue or same than XyZaaH ?,pihole,1645539823.0
10937,comment,1,hxzd1on,,Have you tried setting the computer to get dns from the  pi and then rebooting? (I hate recommending reboots but sometimes weird shit gets solved with them.),pihole,1645548218.0
10938,comment,3,hxytd3x,,I have no issues using Fusion with my pihole.,pihole,1645540099.0
10939,comment,2,hxzr6xy,,"Yes, I rebooted multiple times.",pihole,1645553630.0
10940,post,3,syd0gg,Blocked URL shows up from both the client (cheap wifi camera) AND the router. Why?,,pihole,1645500185.0
10941,comment,1,hxx4dx2,,"**EDIT**:  I disabled the Pihole for 10 seconds (disable / for 10 seconds) and the camera connected to its weird server, then when the 10 seconds were up, things calmed down. 

The pihole still 'echoes' the requests from various devices.  My laptop going to reddit is followed by the pihole making a reddit.com request.  Hmm. 

I'm using the PiHole as the DHCP on the network. 

When I look at [the top stats](https://i.imgur.com/xTSTqTu.png), they confirm that the camera and the router are the top devices.",pihole,1645500223.0
10942,comment,1,hxxpbk3,,"Well it is speculation because we don’t know if the camera is respecting the rules. 

If we assume that you’ve set up the dhcp server as the pihole only issues itself as dns resolver, and not the router as back up which then in turn also only knows about the pihole for dns - the remaining possibilities do include the cheap WiFi camera being coded to ask it’s default gateway for dns if it gets nothing good from its dns values. Which as your router is also using the pihole would keep failing. 

This feels like a customer just wants it to work setting as many home router devices will do dns forwarding again, for ‘it just works’ vibes. 

It’s also not what should happen and is thus annoying if not downright shady. You can of course wireshark the conversation and see exactly what’s happening.",pihole,1645512084.0
10943,comment,1,hxyrf77,,"The DHCP server (Pihole) is the [only DNS server](https://i.imgur.com/i7S96mJ.png) and the router only points to the Pihole for DNS via IP address. 

The only recent change was that I split up my network to the two 5 GHz antennas and the 2.4 GHz antenna.  They're separate networks, not separate VLANs. 

A couple of devices had issues with slowdowns when they accidentally connected to 2.4 and splitting up the antennas and connecting the troubleprone devices (fireTV stick and a laptop) to the 5 GHz network solved that. 

It did require me to reconnect the cameras from NETWORKNAME to NETWORK24 instead.  I don't know if that would cause the issue I'm seeing.",pihole,1645539191.0
10944,post,1,syczz1,DNS leak with Orbi router?,"I set up a Pi-hole and configured an Orbi router to use the Pi-hole as the DNS server. The Pi-hole runs cloudflared and has only one upstream DNS server on localhost#5053.

The default block list works. Visiting googletagmanager.com in a browser gives ERR_CONNECTION_REFUSED and dig shows the domain resolves to 0.0.0.0. But when I run a test at dnsleaktest.com, the results say my ISP's DNS servers received requests, when only Cloudflare should have received requests.

Here's why I think the Orbi is involved. The leak test shows my ISP when my computer uses the Orbi's IP address for DNS but the test shows only Cloudflare when my computer uses the Pi-hole's IP address for DNS directly.

From the symptoms I suspect the Orbi is falling back to my ISP's DNS servers when the Pi-hole responds with NODATA (unresolvable domain, like dnsleaktest's) instead of 0.0.0.0 (blocked domain, like googletagmanager.com).

Has anyone else seen this before? In practice it's not a big issue under my threat model since my ISP can see most domains in SNI fields anyway and the Orbi is leaking DNS requests only for unresolvable domains. But it would be nice to know all my DNS queries are limited to the Pi-hole and cloudflared. Next I am going to try using my Pi-hole as my DHCP server so it can advertise itself as the DNS server instead of the Orbi.

Edit: using the Pi-hole for DHCP fixed the DNS leak",pihole,1645500146.0
10945,comment,1,hy0f8g0,,Glad you fixed it. Denying outbound DNS on a firewall from anything other than your pi-hole could also prevent DNS leakage.,pihole,1645562766.0
10946,post,1,sy98vp,Pi Hole / Hyper-V / vswitch,"Hi all, This is possibly a stupid question (tm). If I am installing Pi Hole onto a hyper v guest, if I am already running other guests, can I re-use the existing vswitch or should I create a separate one for the guest that will run pi hole. Or does it matter (eg, dealer's choice :)) Thanks!",pihole,1645489631.0
10947,comment,1,hy0260u,,"You can definitely use the same vSwitch for multiple VMs like you have. I don't see an immediate need to put it on a different vSwitch, unless you need to bind it to different NICs on the host(s).

Hope that helps!",pihole,1645557776.0
10948,post,0,sy882x,Enable SSH,"Hello, 

By a mistake I think, when setting up the rasp pi running DiePi and then installing pihole on it I don't think I have enabled SSH on it. How can I enable it now with only the IP address of the web interface of the pihole to update it?",pihole,1645486840.0
10949,comment,8,hxwbpqq,,"If you have a keyboard and monitor available, go directly to the terminal and enable ssh through DietPi config. 

Otherwise, shut it down and remove the SD card. Mount the SD card on your computer and put an empty file named ssh in the boot folder. Then reboot the Pi with that card and ssh will be enabled.",pihole,1645486996.0
10950,comment,2,hy0voxb,,"Sorted, thank you very much!",pihole,1645568986.0
10951,post,0,sy7i9i,What is downloads.napps-1.com?,"Just wondering if anyone knows what downloads.napps-1.com is please? I am trying to google it and getting nothing that seems sensible. It is currently allowed and is getting a heap of hits (like 283 today).

Thanks",pihole,1645484942.0
10952,comment,3,hxwpr6b,,"Block it and see if something breaks? Then you'll either know what it is, or know it's safe to block.",pihole,1645493383.0
10953,comment,3,hxwuqke,,"Here’s the whois data on the domain: https://who.is/whois/napps-1.com

The info might be masked. Does it mean anything to you?",pihole,1645495683.0
10954,comment,2,hxwupfb,,It belongs to nordvpn from what I can see,pihole,1645495668.0
10955,comment,1,hy0jzrb,,It will be nordvpn. Thanks for that.,pihole,1645564550.0
10956,post,0,sy4v5h,RSYNC Question for Gravity-Sync Install for PiHoles,"I am trying to install Gravity-Sync on my PiHoles so I no longer have to make changes on both when I add DNS'. I got the error that says ""RSYNC Binaries not installed"". I tried using some Google Kung-Fu but I'm still a white belt apparently. Would someobe be able to help on this issue or guide me where I can find the answer? 

My main pi-hole is running DietPi on a physical Pi and my second PiHole is running Ubuntu Server on a VM. Thank you ahead of time!

https://preview.redd.it/1059ss9p69j81.png?width=981&format=png&auto=webp&s=41f6df7ca1939dbb00b7bec9bafa5ba1a7a38926",pihole,1645478562.0
10957,comment,1,hxvte65,,Have you installed rsync?,pihole,1645479439.0
10958,comment,1,hxwanxl,,Have you asked the developer of gravity sync?  They have an issues page.,pihole,1645486538.0
10959,comment,1,hxvth24,,I have not but I tried finding how to do so and couldn't.,pihole,1645479471.0
10960,comment,1,hxwgq5z,,I figured it out! Thank you for the reply.,pihole,1645489206.0
10961,comment,2,hxw2e3e,,"sudo apt install rsync 

(should work for all debian based OSs)",pihole,1645483062.0
10962,post,2,sy4qpr,Port conflict in Pi-Hole Docker installation with systemd," I am trying to install Pi-Hole alongside Nextcloud on my Raspberry Pi with Ubuntu 20.04. NextCloud is installed normally on the top of  Ubuntu, whereas I am trying to install Pi-Hole in a container to avoid any conflicts with the webserver.

I am following this guide: [https://rsw.io/how-to-install-pi-hole-in-a-docker-container-on-a-raspberry-pi/](https://rsw.io/how-to-install-pi-hole-in-a-docker-container-on-a-raspberry-pi/)

This is the error I am getting

`Status: Downloaded newer image for pihole/pihole:latest Creating pihole ... Creating pihole ... error  ERROR: for pihole  Cannot start service pihole: driver failed programming external connectivity on endpoint pihole (56f233c57287a526a4e6adc3038d9359cda06ba8b51c0157146c42171cc47106): Error starting userland proxy: listen tcp4 0.0.0.0:53: bind: address already in use  ERROR: for pihole  Cannot start service pihole: driver failed programming external connectivity on endpoint pihole (56f233c57287a526a4e6adc3038d9359cda06ba8b51c0157146c42171cc47106): Error starting userland proxy: listen tcp4 0.0.0.0:53: bind: address already in use ERROR: Encountered errors while bringing up the project.`

 Port 53 is already in use by systemd-resolve:

    root@ubuntu:/home/ubuntu/pi-hole# sudo lsof -iTCP -sTCP:LISTEN -P -n +c 10 COMMAND       PID            USER   FD   TYPE DEVICE SIZE/OFF NODE NAME systemd-re  41186 systemd-resolve   13u  IPv4 167233      0t0  TCP 127.0.0.53:53 (LISTEN)

 I have tried to stop the process system-re but this has broken all the DNS.

What does the process systemd-resolve do and what can I do to avoid the conflict with port 53, please?",pihole,1645478277.0
10963,comment,2,hxwbqqa,,"The second to bottom post from pelgrim helped me with this:
[https://ubuntuforums.org/showthread.php?t=2461447](https://ubuntuforums.org/showthread.php?t=2461447)",pihole,1645487008.0
10964,comment,2,hy5ucqt,,thanks but unfortunately this didn't solve the problem. This did: https://discourse.pi-hole.net/t/setup-on-pi-in-docker-bind-error/19137/6,pihole,1645656065.0
10965,comment,2,hy6otqg,,"Dman, I have that in my notes too. Sent you the wrong one. Glad you got it figured out!",pihole,1645669381.0
10966,post,1,sy3dru,Installing Pi-Hole on Fedora/RHEL with SELinux,"Hey,

I am currently writing an article for Fedora Magazine regarding the above.

If anybody has any advice/tips/tricks/gotchas and whatnot then I'd love to hear from you. Full attribution in the published article for contributors.

Chime in below or DM me.

I'll link the article here once published.

TIA for your help.",pihole,1645474977.0
10967,comment,2,hxvle2i,,"I'm currently running under docker (Podman) on RHEL8 with no issues, from a bog-standard install on a headless server (old workstation from the office).  I used the cockpit web control panel and had it running in under 10 minutes. 

The secret isn't the pi-hole itself, it's making the podman network available on your LAN, and providing routing.  This is easy if you use a proper router, but not so much if you use something consumer grade.

ETA:  Sorry, forgot about SELinux.  I used the built in tool on cockpit to catch any issues and then generated policy to make it work.  I cannot remember what it was but it was only one thing that needed any editing.  Cockpit is a gamechanger for linux in the home setting, though that's getting farther afield from the focus of this sub.",pihole,1645476241.0
10968,comment,1,hyfvcxi,,"I'm running containerized using podman on Fedora IoT. Only gotcha for me was using host networking and setting the correct capabilities for DHCP to work (--cap-add NET\_ADMIN,NET\_RAW --net=host options).",pihole,1645828247.0
10969,comment,1,hxvrbup,,"Are containers the only option for Fedora now?

I had a quick look at the website and could only see references to F33 and F34. F35 goes EOL at the end of the year and F36 is in beta.

Is there a technical reason behind it's omission?

Downgrading is possible but seems like a lot of work and you could be left with an unsupported server and have to jump to containers anyway.

I set an old Rpi1 up with this years ago running Raspbian and it's been ticking along fine but I'm looking to upgrade before it dies to an Rpi3 running Fedora server. That's one of the reasons I took the article on, I'd lost all my notes when I borked my old PC.

Edit:

I've not done much with Podman tbf but it seems having the base server and the container requires a virtual bridged network. To be able to connect to both you'd need 2 NIC's. Rpi3 has wireless and ethernet. Is that the long and the short of it?

I was going to cover Cockpit. I've only had a quick play around with it but I noticed the SELinux features. Does all that hard work for you.",pihole,1645478605.0
10970,comment,2,hxvtj59,,"> Are containers the only option

Honestly, on that I'm not sure.  I wanted to use containers because I hadn't before and I wanted to experiment with using them.  I don't imagine you _have_ to use a container if you don't want to, but like you said, the listed Fedora versions are long gone.

Fedora is designed as a  very short lifecycle product.  You could use something like CentOS Stream 8 and still be able to use the install scripts (Pi-Hole definitely supports that) but still have a server OS lifecycle of 4-5 years.  I like longer lifecycles for my servers, but that's just me.  Others like to choose differently.

EDIT:  
I totally skipped your networking question: 

>To be able to connect to both you'd need 2 NIC's. Rpi3 has wireless and ethernet. Is that the long and the short of it?

No, not at all.  My podman network has a virtual LAN that exists only on the server, call it 10.84.0.0/16.  My pi-hole instance gets one of those IP addresses.  The key to make this work is to add the route entry for 10.84.0.0/16 to your router, and give it the IP address that the Linux server has on your home LAN (192.168.22.11, say).  Then when the router sees traffic for the pi-hole, it just sends it to 192.168.22.11, and then your linux machine, seeing that it's destined for one of the docker containers, sends it on to the correct one.  

I'm using only one wired NIC on my machine.",pihole,1645479494.0
10971,comment,1,hxvudx7,,"I've been toying with RHEL's 16 free licences offer rather than CentOS but like you say, probably a bit off-topic here. Thanks for your help.

Edit:

Thanks for the edit. I'll start digging around for more on virtual networking. Did you figure this out for yourself, or did you work from a guide or tutorial somewhere?",pihole,1645479839.0
10972,post,1,sy328l,FTL database and/or daily logs corrupt?,"When I view the previous 30 days data, nothing is displayed.
https://i.imgur.com/O3hLpZT.jpg

When I view the previous month, I get a full set of data.
https://i.imgur.com/wz9tP77.jpg

The dasboard shows data for the previous 24 hours. However, querying the long-term data for ""yesterday"" returns nothing.

Obviously something is wrong. How do I go about flushing all of the databases and logs to get this working properly again? Thanks.",pihole,1645474175.0
10973,comment,1,hxvxs80,,"Obviously Pihole is not DNS server for your clients anymore. Depending on your setup you have to investigate why. (Pihole being the DNS for the clients or for the existing DNS server, in the eouter usually)
So in first setup Pihole‘s IP should be distributed as DNS via DHCP or its IPnshould be set as upstream DNS in the router. In both cases the router‘s setting are a good candidate.",pihole,1645481202.0
10974,comment,2,hxw148j,,"Unfortunately, no that is not the issue. Both the Query Log and the tail of pihole.log show ongoing, realtime activity for client DNS requests.",pihole,1645482548.0
10975,comment,1,hxw6v95,,"Ok, but what is image showing then? I interpreted „0 queries“. Strange.",pihole,1645484917.0
10976,comment,1,hxwgkxr,,"The pihole is functional for DNS and domain blocking. The issue is/was database and/or logfiles. I was hesitant to start blowing away the db and log files not knowing whether they would be re-created successfully. Since I have backup images of the SD card, I figured I didn't have much to lose.

I stopped the FTL service, deleted the db file, and re-started FTL. I then disabled query logging, deleted all of the .log and .log.gz files, and then re-enabled query logging. I guess I will find out in a few days if long-term data is being captured correctly and if it is able to be viewed correctly.",pihole,1645489141.0
10977,post,1,sy09s0,Workaround for Excessive Linksys Velop PTR (in-addr.arpa) Requests,"Like many Pi-hole users I have been experiencing the flood of DNS in-addr.arpa PTR DNS requests from Linksys Velop mesh devices. 80% or 90% of the requests into my Pi-hole were coming from the **one** (!) non-router mesh node on my network. It's fairly harmless, I suppose, but it was driving me nuts and making the stats useless.

I didn't want to downgrade the firmware as that could leave security issues unpatched.

I didn't want to have the Linksys router be the DNS and then have it forward all requests to the Pi-hole as that makes the stats *completely* useless.

After a bit of outside-the-box thinking I have devised a relatively simple fix / workaround that has solved the problem. Decided to share here as I see this question asked often and have not seen any fixes or workarounds posted, apart from firmware downgrades. Note that I cannot take responsibility for anything you might ""break"" doing this, proceed at your own risk and only if you feel comfortable with the directions:

1. Block the Linksys mesh node's MAC address from receiving an IP from the Pi-hole's DHCP server. This requires manually editing `/etc/dnsmasq.d/04-pihole-static-dhcp.conf` and adding a new line that contains `dhcp-host=xx:xx:xx:xx:xx:xx,ignore`. Obviously replace the xx'd parts with your mesh node's MAC address.  
I use nano for this, `sudo nano /etc/dnsmasq.d/04-pihole-static-dhcp.conf`  
You will need to add one line for each mesh node that you have.  
Save the file and exit.  
Use `sudo pihole restartdns` to restart the DNS and DHCP (it's the same service). If you do not restart the service your changes will not take effect.

2. Now go to your Linksys' router configuration. I would assume these are a bit different depending on the model but for me it was ""Connectivity"" and then the ""Local Network"" tab. In here you can find the router's DHCP configuration. Enable it. Set the DHCP range to be OUTSIDE the range you have set in your Pi-hole. So if your Pi-hole's DHCP server is using 192.168.1.10 to 192.168.1.100 then maybe choose 192.168.1.150 as the start IP address. Set the maximum number of users to be the same as the number of mesh nodes. For me this is one (1) but if you have more mesh nodes then set accordingly. Save/Apply/ok/whatever is necessary. 

3. Next click on the ""DHCP Reservations"" button on the router config screen. You now need to add one IP reservation per mesh node device using the MAC address of the mesh nodes. Make sure to ok/save/apply the changes. You **must** add these reservations or other devices on your network may grab an IP from the router which would a) circumvent your Pi-hole and b) result in one or more of your mesh nodes not being able to get an IP address at all.

4. If you wish to delete the existing logs on your Pi-hole so you get a fresh start without all the PTR spam, you can do so with this:  
`sudo service pihole-FTL stop`  
`sudo rm /etc/pihole/pihole-FTL.db`  
`sudo service pihole-FTL start`  

That's all! Now my mesh node gets its IP from the router and uses the router for DNS lookups. I assume there are a bunch of useless PTR lookups happening still but I no longer care as I don't see them flooding the Pi-hole logs.

Another potential option would be to block all DNS lookups for the mesh nodes but that would probably stop them from getting updates, not a very good solution IMO.

Hope this helps, feel free to ask questions and I will respond if I can.

Edit: Adding a bit and correcting a bit.",pihole,1645467263.0
10978,comment,1,hxv9bj0,,Couldn‘t you configure the APs with static IP configurations? Two DhCP servers in the same network sounds difficult.,pihole,1645471365.0
10979,comment,1,hxvfu8p,,"They're mesh nodes and I did not find any way to configure them with static IPs. That definitely would have been my preference.

Two DHCP servers can be complex but as long as the second server (the Linksys router) can only serve the mesh nodes and the Pi-hole will refuse to serve the mesh nodes, it will be fine.

If I had it to do over I would buy a mesh system that allowed greater configurability instead of one designed to intentionally hide any possible complexity from the end user.",pihole,1645473991.0
10980,comment,1,hxvhunf,,"Ah, ok. I am sure you have double  checked already, but I would habe expected that they find each other with static IPs equally good if not better than with DHCP. I have expected they do some magic during pairing which is not based on IP. Sometimes you can use IPv6 as a separate technology which could be configured separately (I mean turning off IPv4 what might be impossible to separate the control plane of the mesh APa).",pihole,1645474812.0
10981,comment,2,hxvj27i,,"This has been an ongoing issue for Linksys users for a year or longer, and there has been a lot of discussion about different ways to try and fix the problem.

So far the only solution that has actually worked for people has been to downgrade the firmware and stop allowing automatic updates. I really wanted to avoid that as I don't like leaving known bugs/holes unpatched.",pihole,1645475303.0
10982,comment,2,hxvj74t,,Thank you!,pihole,1645475358.0
10983,post,1,sxysln,Can you add blocklists/adlists by URL through the command line?,"Looking for a way to feed URLs to pihole block lists without having to go through the gui in the web page 

Sorry if this is a bad question

Thank you",pihole,1645463723.0
10984,comment,1,hxuuf3n,,"[https://docs.pi-hole.net/core/pihole-command/](https://docs.pi-hole.net/core/pihole-command/)

&#x200B;

Check out the documentation :)",pihole,1645465524.0
10985,comment,1,hxvsgjj,,"You can directly insert adlists into the database using the following SQL command (change as needed to fit your adlist URL and comment):

    sudo sqlite3 /etc/pihole/gravity.db ""INSERT INTO adlist (address, enabled, comment) VALUES ('https://domain.com/blocklist.txt', 1, 'comment')""",pihole,1645479062.0
10986,comment,1,hxuuub2,,"i did, i didn't see anything about how to input lists by URL, just how to add domains directly.  am i missing it?  can you give a list URL as an arg for `pihole -b`?",pihole,1645465686.0
10987,comment,1,hy0uocu,,"thank you man.  sorry, i probably could've figured it out if i looked into what the web app is doing.  appreciate the quick sqlite lesson though :)",pihole,1645568585.0
10988,comment,1,hxuvfh6,,"I figured whitelisting, blacklisting and regex is what you needed

https://docs.pi-hole.net/core/pihole-command/#whitelisting-blacklisting-and-regex",pihole,1645465910.0
10989,post,11,sxyov6,Google tag manager bypass,"This article seems to say that Google tag manager in the future will be completely bypassing pie hole in all DNS base filtering systems like it.   


[https://chromium.woolyss.com/f/HTML-Google-Tag-Manager-the-new-anti-adblock-weapon.html](https://chromium.woolyss.com/f/HTML-Google-Tag-Manager-the-new-anti-adblock-weapon.html)  


[https://news.ycombinator.com/item?id=30411049](https://news.ycombinator.com/item?id=30411049)",pihole,1645463470.0
10990,comment,3,hxvs8iy,,"Google has been doing everything in its power to run the backbone of internet for the better part of a decade. Google AMP links have been doing this very thing as well, and nothing goes back to the source. Google this, google that, Google phones, google internet, google wearables, google cameras, google computers, google content delivery back-ends, google libraries that most sites use, etc, etc, etc...  

Google is your friend though. Trust it. ~~Dont be evil~~...  ""Do the """"""right"""""" thing""  /s",pihole,1645478973.0
10991,comment,2,hxwjti4,,[removed],pihole,1645490621.0
10992,comment,1,hxwfe4c,,"NoScript is pretty effective. Between that and PiHole, I don't see many ads at all.

And on 8Mbit ADSL, that's significant.",pihole,1645488608.0
10993,comment,1,hxxlx1h,,What about proxies from server side to GTM that run off of the main domain's JavaScript? I've seen some projects on GitHub claiming to bypass blocks to GTM by proxy use on the web server. I'm wondering how effective they are.,pihole,1645509841.0
10994,comment,1,hxypcxt,,[removed],pihole,1645538176.0
10995,comment,1,hxypq1h,,"Besides block lists I've got regex entries also built into my blacklists. I really should learn to better utilise them though. 

Do you find you break anything though with regex blocking?",pihole,1645538359.0
10996,comment,1,hxysfqn,,[removed],pihole,1645539674.0
10997,comment,1,hxystsp,,Please share,pihole,1645539854.0
10998,post,7,sxv4ww,Pi with a Screen for stats,"Hi all,

I'm sure there is a project out there somewhere for this, but I cant find it for the life of me or a good suggestion.

Basically I want to roll a new Pi, but with a screen to show the stats in my office.

Now what I'm after is like a Case or a Screen with stand or something so it can sit up and show off the stats.

Also another question is, if I did this, would I have to roll the Pi OS full with desktop and then log into the Pi-hole dashboard via a browser on the pi itself?

If I did, would there be a performance impact with a Pi 4b 4gb or 8gb variant?

Can anyone advise on something cool for this project?

Also I'm based in the UK so any UK sites would be amazing.",pihole,1645454606.0
10999,comment,4,hxupqah,,"An option I like is [PADD](https://github.com/pi-hole/PADD)  It's console based, so you would not have to install the full desktop if you don't want.  Set the Pi to auto-login, and you will have an info panel up at all times on it.",pihole,1645463694.0
11000,comment,2,hxu6vk1,,I made a screen for mine from an old laptop.  Part to drive the screen from amazon was 22 dollars.  Lots of youtube videos on how to do it.  Very very easy.q,pihole,1645455920.0
11001,comment,1,hxu7a6k,,I have done it with and without.  Easier with for me overall.,pihole,1645456102.0
11002,comment,1,hxu7cuy,,I would post some photos if I knew how.,pihole,1645456136.0
11003,comment,1,hxu7m7g,,Also search amazon for pi screens.  Lots will come up between 50 and 100 dollars,pihole,1645456252.0
11004,comment,1,hxv1ye3,,"I use an elecrow screen, I think it was this one?

7 inches IPS Portable Touch Screen Monitor for Raspberry Pi 4, ELECROW 1024x600 HDMI Portable Monitor for Raspberry Pi, PC, Game Consoles https://www.amazon.co.uk/dp/B08GCM73MH/ref=cm_sw_r_apan_glt_i_KFP5E5FH7QVYN84HEZ24

Just have to connect it all together and it works  well. It's all open though so you can see the pi and wires soay not be that aesthetically pleasing but I just have it on the side of my desk so works for me. I have it running rasbian and then followed a pi hole installation video from YouTube to set it all up. I keep it on all the time and have the browser showing the pihole webpage for the stats. It's touchscreen too so makes it easy to use. One thing to remember is that you have to read the screen installation instructions as it didn't work perfectly out the box due to its weird resolution. It was easy to do though.

You could get the official raspberry pi screen and buy a case that will look much nicer though but I think that will cost more.

Another option if you want a bigger screen is to just put the pi in a nice case and run its hdmi to a larger portable desktop/portable screen (probably won't be touchscreen though) which you can find on Amazon, there are loads of them 👍",pihole,1645468443.0
11005,comment,1,hxv0r8c,,awesome thank you,pihole,1645467974.0
11006,comment,1,hy974bh,,thanks for this,pihole,1645718559.0
11007,comment,-1,hxu7546,,"Thanks David,

I guess I have to run Pi OS with Desktop right?",pihole,1645456039.0
11008,comment,1,hxutw9f,,"Depending on the nature of the data to be showcased, I recommend e-reader screens if possible.",pihole,1645465323.0
11009,comment,2,hxv9tzw,,"Thanks man. 

This is what I thought would need to be done. 
Looked at that exact screen too

Appreciate the detailed reply.",pihole,1645471570.0
11010,comment,1,hxv0w1v,,"ah nuts, I just ordered a hyperpixel 4 screen. Wish I saw this 1 hour ago :D",pihole,1645468026.0
11011,comment,1,hxvgxz6,,"No probs. Mine works well and looks alright on the desk but I will probably move it to my server room as it's a bit industrial looking. It works though and I don't have a keyboard or mouse plugged in so it just sits there with the stats. You can always login from another computer toanage it anyway. The official screen and one of the many cases around would look better but they are more 'rounded' on the edges so may not be as slick as the square edged screens. 

Anyway hope that helped 👍",pihole,1645474443.0
11012,comment,1,hxv2shv,,[deleted],pihole,1645468771.0
11013,comment,1,hxwzabs,,Pseudo seller.,pihole,1645497798.0
11014,post,2,sxuqnu,New York Pizza App blocked,"So, I have noticed that I can't use the new york pizza app when my phone is configured to use pi-hole.

I tested this by assigning the none group to the device, after which the app worked.

I already whitelisted .\*newyorkpizza.\* to be sure it doesn't block it (also the query log shows it isn't blocked.

Does anyone know what could cause this?",pihole,1645453501.0
11015,comment,3,hxu1ugz,,Check which other domains are blocked when you try to open the app.,pihole,1645453581.0
11016,comment,2,hxu788r,,https://discourse.pi-hole.net/t/how-do-i-determine-what-domain-an-ad-is-coming-from/1522,pihole,1645456078.0
11017,comment,0,hxxsxl0,,"Hmmm, I never had a problem with it using the default lists.",pihole,1645514693.0
11018,comment,1,hxu2qmt,,"I did, multiple times.

I get multiple domains which vary from time to time, but none are consistently requested.  
The most common are [app-measurement.com](https://app-measurement.com) and google analytics.

I have tried whitelisting them both",pihole,1645454017.0
11019,comment,1,hxual97,,"Yes, I looked at that; it's how I came upon the pihole -t command.

It's also how I found the various domains as described my other comment.",pihole,1645457548.0
11020,comment,2,hxu9mpt,,"Okay, I tried to just block everything that got blocked. So not every domain was requested every time, but one of those domains is googleads and various [doubleclick.net](https://doubleclick.net) domains. Those are not domains I'd like whitelisted. Is there a way around that?

And yes, after whitelisting all domains I could open the app.

One of those domains, strangely enough is [analytics.tiktok.com](https://analytics.tiktok.com) ...",pihole,1645457132.0
11021,comment,1,hy93ww1,,"For what it's worth, I have the same problem, what I do is just use their website or disconnect from the pihole network for a bit.",pihole,1645717347.0
11022,comment,1,hyuf2jv,,"Well, yea that's what I'm doing now.
Doesn't change the fact that it's annoying as hell",pihole,1646091482.0
11023,post,198,sxtxzi,"So I can never not use pihole again, ADList Suggestions please?","I didn't realize how much of my traffic was just ads and trackers. It's 62 percent. Crazy. 

So do y'all have any good Blocklists I could add to extend ad blocking etc? 

Thanks!",pihole,1645451359.0
11024,comment,98,hxu6pbe,,https://firebog.net,pihole,1645455843.0
11025,comment,38,hxu8mof,,"Right? Once Pi-Hole, always Pi-Hole. A few weeks back my wife started a new game on her phone to play at work when there's not much to do. She told me it would only be fun to play it at home where there are no (!) ads",pihole,1645456701.0
11026,comment,13,hxv179d,,"[https://www.github.developerdan.com/hosts/](https://www.github.developerdan.com/hosts/)

Plenty of options here.",pihole,1645468147.0
11027,comment,12,hxun03d,,There's [the blocklist project](https://blocklistproject.github.io/Lists/) too.,pihole,1645462606.0
11028,comment,56,hxu5dj0,,https://oisd.nl/,pihole,1645455252.0
11029,comment,5,hxuxmzo,,"Technically that's not traffic, that's dns requests. Still crazy",pihole,1645466761.0
11030,comment,4,hxwecnk,,Posts like this help me know I'm \`finally\` making the right choice in getting a pi-hole setup. I've saved a few like this over the past few days so I know to go back and set it up the right way.,pihole,1645488147.0
11031,comment,3,hxvrrfv,,Yeah I find it hard using the net when not at home now. Have tried to setup pivpn but no joy getting that to work yet,pihole,1645478781.0
11032,comment,3,hxwhjkk,,A lot of good blocklist info here:  https://obutterbach.medium.com/unlock-the-full-potential-of-pihole-e795342e0e36,pihole,1645489578.0
11033,comment,6,hxvnpcz,,"My wife didn't understand why I was setting something like this up. Wasn't a big deal to her. Now if the pihole isn't working, I can literally hear her yell from upstairs  ""Why am I getting ads?!"".",pihole,1645477163.0
11034,comment,2,hy32lf7,,https://github.com/badmojr/1Hosts,pihole,1645612432.0
11035,comment,2,hy5f6rc,,"Honestly I find it more amusing digging through the ""audit log"" of the dashboard and blocking random domains that got allowed.lol....",pihole,1645650338.0
11036,comment,5,hxuz9ct,,"Keep in mind it's not a perfect statistics, if some program just pings a DNS which is blocked every second it will inflate the blocked requests number.",pihole,1645467398.0
11037,comment,2,hxv13lp,,"I just found all mine from trial and error online. I can upload all my 4+ million domain  blocklist. I will say however, because I have that many and I have as many adlists as I could do, it does effect daily browsing from time to time. I am not afraid to manually whitelist things as I rather do that then have things go through and block those. I think (for me) I have everything that doesn't need to be block whitelisted. Other than false positives, my laptop runs it like a champ with an average 10 clients, 1GB of RAM, 1 CPU thread, and 10GB of SSD storage running in proxmox on a vm. Let me know if you would be interested in my massive list.

Edit: On average it blocks from 18% up 60% traffic. It all depends on what sites are being accessed and what is happening. I also for safe measures (because we all know how YouTube ads are) have an adblocker for my desktop and phone for YouTube only. I have most of the ads blocked on Pi-hole but this is just to make sure.",pihole,1645468108.0
11038,comment,2,hxy8cuo,,"I don't wanna shit on your parade, but... the shown percentage cannot be directly translated to a claim that ""62 percent of my traffic was ads"". Like at all.

1, Yes, 62% of your current *DNS queries* are blocked. But DNS traffic is a minuscule, negligible, part of your total internet bandwidth.  
(It is true that blocking these DNS queries causes the actual ""ad-delivering"" traffic not to happen in the first place, but the bandwidth saved from this is not possible to derive from those DNS stats, *to the best of my knowledge*, because you cannot predict how much traffic will be exchanged with a server based on a DNS query for its address. Counter-arguments with actual measured numbers are welcome!)

2, From the experience of thousands of users of pihole over the years, we know that client's often don't handle DNS blocks too graciously, resulting in them querying for the blocked entries with higher frequency than if they weren't blocked. In other words, the ""real percentage"" of these DNS requests would almost certainly be lower if they weren't blocked.

tl;dr: Your ad/tracker traffic was not 62% of your total traffic.",pihole,1645527445.0
11039,comment,3,hxvaamh,,"Check out https://block.energized.pro/
They do collated lists so it’s all combined and then cleaned up before it even hits your Pihole",pihole,1645471757.0
11040,comment,1,hxyg8x6,,Don't mean to hijack the thread - but am I right to assume it's pretty much impossible to block ads when using then iOS version of things like Facebook and YouTube?,pihole,1645533135.0
11041,comment,1,hy051ua,,You Can try my blacklist collection https://github.com/petrmikes/piholeBlacklistGenerator,pihole,1645558872.0
11042,comment,1,hy06whi,,"Here are the lists I use:

[https://v.firebog.net/hosts/Easyprivacy.txt](https://v.firebog.net/hosts/Easyprivacy.txt)

[https://v.firebog.net/hosts/Admiral.txt](https://v.firebog.net/hosts/Admiral.txt)

[https://adaway.org/hosts.txt](https://adaway.org/hosts.txt)

[https://v.firebog.net/hosts/static/w3kbl.txt](https://v.firebog.net/hosts/static/w3kbl.txt)

[https://www.github.developerdan.com/hosts/lists/ads-and-tracking-extended.txt](https://www.github.developerdan.com/hosts/lists/ads-and-tracking-extended.txt)

[https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts](https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts)

&#x200B;

They seem to work pretty good and wife doesn't complaint about things being blocked. I had to whitelist about a half-dozen items for various things such as Apple, Netflix, and Microsoft.",pihole,1645559584.0
11043,comment,1,hycfdl2,,"Every so often I do something to my pi’s and need to rebuild my pihole set up, I always consider “well do I really need it?” “That is how webpages provide free stuff, do I want to take it away?” “I am doing other things for privacy do I need this to?” This most recent time that my pihole set up died on me I started getting bombarded with ads for places and things that I would never consider, then some things happened scaring me about my ID was stolen again I stepped up my security and reset up my pihole setup.  
I have two pi’s both running pihole, one as my primary and one as my secondary both are synced together with https://github.com/vmstan/gravity-sync. I have a poop load of block lists, but I have a white list that grows every so often as I find new ways to block things ads while not blocking services. (my most recent addition to the whitelist is Facebook, I like Facebook and don’t want to give it up.)  
I use Pihole unbound https://www.wundertech.net/use-unbound-to-enhance-the-privacy-of-pi-hole-on-a-raspberry-pi/ set up on both my pi’s, at one point in time I had https://docs.pi-hole.net/guides/dns/cloudflared/ running on my system. I suggest unbound and definitely not both, as I understand when running both it takes the best parts out of the other.   
When I find the ad lists, black lists, and white lists that are working for me I make sure to back them up. In settings there is the teleporter where you can save everything and store it where ever you want.  
I have been trying but failing at getting the speedtest add on working but my past few installs haven’t liked it, yeah I break things trying to do things often! https://github.com/arevindh/pihole-speedtest, I think I will try reinstalling the add on?Every so often I do something to my pi’s and need to rebuild my pihole set up, I always consider “well do I really need it?” “That is how webpages provide free stuff, do I want to take it away?” “I am doing other things for privacy do I need this to?” This most recent time that my pihole set up died on me I started getting bombarded with ads for places and things that I would never consider, then some things happened scaring me about my ID was stolen again I stepped up my security and reset up my pihole setup.  
I have two pi’s both running pihole, one as my primary and one as my secondary both are synced together with https://github.com/vmstan/gravity-sync. I have a poop load of block lists, but I have a white list that grows every so often as I find new ways to block things ads while not blocking services. (my most recent addition to the whitelist is Facebook, I like Facebook and don’t want to give it up.)  
I use Pihole unbound https://www.wundertech.net/use-unbound-to-enhance-the-privacy-of-pi-hole-on-a-raspberry-pi/ set up on both my pi’s, at one point in time I had https://docs.pi-hole.net/guides/dns/cloudflared/ running on my system. I suggest unbound and definitely not both, as I understand when running both it takes the best parts out of the other.   
When I find the ad lists, black lists, and white lists that are working for me I make sure to back them up. In settings there is the teleporter where you can save everything and store it where ever you want.  
I have been trying but failing at getting the speedtest add on working but my past few installs haven’t liked it, yeah I break things trying to do things often! https://github.com/arevindh/pihole-speedtest, I think I will try reinstalling the add on?",pihole,1645766237.0
11044,comment,-1,hy1ndd9,,62% NOT getting blocked or more and breaks useful websites.  pi is worthless!,pihole,1645581051.0
11045,comment,10,hxuo8ec,,Fantastic! Thanks a ton!,pihole,1645463093.0
11046,comment,13,hxujary,,Why not use something like wireguard to with connect on demand on outside networks?,pihole,1645461144.0
11047,comment,22,hxujbz2,,Throw pivpn on there and she can do it at work.,pihole,1645461156.0
11048,comment,4,hxv69fz,,You beat me to it!,pihole,1645470141.0
11049,comment,1,hxy4qwv,,"Huh, I've had one of those adlists for a while but his test page isn't blocked. Any ideas why that might happen?",pihole,1645524423.0
11050,comment,5,hxunvam,,"I think I have used some of these. Blocklists.info was the site. 

Very good lists here!

Thank you!",pihole,1645462948.0
11051,comment,8,hxuo7bx,,Added this. Thank you!!,pihole,1645463082.0
11052,comment,2,hxvw4w7,,"And the actual number of requests would likely be significantly lower than the percent here due to how so many things will ping over and over and over again when they are not able to phone home successfully.

Regardless, pihole is absolutely indispensable.",pihole,1645480539.0
11053,comment,3,hxwg8h3,,Do it. It's worth it. I waited around 2 months from my first post on this subreddit to now. It does work with Google wifi unlike what I was told on that post. Best thing I've done in a while. You won't regret it.,pihole,1645488986.0
11054,comment,3,hxw04r6,,Their is this project that I've been using. It works on the same concept but all under one app. Free and open source. https://block-this.com/,pihole,1645482144.0
11055,comment,1,hyrmv44,,"I use zerotier for accessing my PiHole remotely.  
On your phone/tablet it'll install as a VPN so you won't be able to use it if you already use a VPN like PIA or No Root Firewall. (PIA uses it's own DNS and bypasses PiHole)

In my case, I'll use NoRoot Firewall at home then switch to zerotier when I'm oot 'n aboot.

I also added my parents computers and devices to my zerorier so they're protected by my home PiHole to give them a bit of piece of mind in keeping them safe online (old folks y'know ;) ). Really useful, esp as they're at the other end of the country :)  
(Note: When setting zerotier up for non tech folks, add an additional DNS like 1dot1 to their zerotier setup. That way they aren't stranded if your pihole is unavailable for a bit)

https://discourse.pi-hole.net/t/how-to-easily-use-your-pi-hole-outside-of-your-personal-network/18878",pihole,1646048628.0
11056,comment,3,hxvzxyq,,then you need a second pihole for redundancy and setup pihole sync😂,pihole,1645482067.0
11057,comment,3,hxw75fr,,Yeah could you share it with all of us?,pihole,1645485037.0
11058,comment,1,hxx2zts,,"Would you be willing to share, please?",pihole,1645499556.0
11059,comment,2,hxwkpyp,,"They never respond to issues on GitHub, I've stopped using them.",pihole,1645491034.0
11060,comment,2,hxyhlts,,"Wouldn't know about Facebook, i would think not though? YouTube is pretty much impossible. You could use a different front end and access that via your browser. Invideous comes to mind.

There might be alternative Facebook privacy front ends. They have them for reddit Twitter and Instagram that I know about. You can self host these pretty easy with docker compose files or portainer.",pihole,1645533973.0
11061,comment,1,hyrnknr,,">gravity-sync

That sounds liek a you problem lol",pihole,1646049127.0
11062,comment,8,hxujgvl,,"Wireguard.

Wireshark is some other tool",pihole,1645461211.0
11063,comment,3,hxvfzuq,,I second this. I have WireGuard set up and it’s super useful.,pihole,1645474056.0
11064,comment,1,hxwn0b9,,Wireguard is really well done. I setup also for work and I bring it also on my iPhone/Laptop so I can have virtually adblocking everywhere everytime,pihole,1645492106.0
11065,comment,7,hxuo5te,,"Any tips for getting other devices with pivpn? When I set this up I was able to ping other devices but not able to access them within my home network. 

How could one use pivpn to access their Plex without having to port forward Plex for example?",pihole,1645463064.0
11066,comment,3,hxupir3,,Would aPi Zero W be performant enough?,pihole,1645463610.0
11067,comment,2,hxwym5t,,"Is there a benefit to using pivpn over a different vpn? I considered setting up pivpn, but I travel enough that I didn’t want the latency of always connecting to my home network. So I just went with a big vpn provider that has adblocking. Works great for all of my devices when I am away from home. 

The main benefit I saw with pivpn was having access to my home network devices when out and about.",pihole,1645497483.0
11068,comment,3,hxuzmu6,,That block list project you used isn't bad but don't add the one posted above as I feel it contains a lot of safe positives not related to ads etc,pihole,1645467542.0
11069,comment,7,hxvi98g,,[oisd.nl](https://oisd.nl) is all you'll ever need!,pihole,1645474977.0
11070,comment,2,hxwgfab,,"I put an order in for a zero w and a pi4 4gig for tooling around on (e.g., minecraft). Will come in mid-March…can’t wait!",pihole,1645489071.0
11071,comment,-1,hxws4bb,,look for gravity-sync. works perfectly for me with two pi 2‘s.,pihole,1645494476.0
11072,comment,1,hxxx887,,I will get around to it later. Between me being busy and me manually editing all my lists and whitelist and blacklist for a friendly format where you can copy and paste. I have over 100 blocklists to manually edit and about the same for blacklist and 30 for whitelist. I have them copied to a text file but I have to remove the excess things it copied along with it. I'll add them all in text files and post them. Sorry it is taking some time. I wish their was a faster way. I am purposely choosing not to use the backup feature because it does more and shows more then I want it too and does not show the lists until you import it. I am also adding more lists all the time for more coverage and I'll add all the ones that I want and add those to my current massive list. Also just to note updating can take up to 10 minutes when first doing it. I have really slow internet so that also has most to do with it.,pihole,1645518042.0
11073,comment,0,hxxyc71,,"Not entirely true. 
They’ve fixed at least 2 past issues for me. 
They may be slow but think they are only a small team.",pihole,1645518973.0
11074,comment,2,hxyl0my,,"Yes - I was wondering if it would require access via the browser instead.  I might try that - for the 30 or so friends I have on FB, I really don't need much.",pihole,1645535926.0
11075,comment,4,hxumk9l,,"Thx, dont know why i typed that. Meant wireguard",pihole,1645462432.0
11076,comment,1,hxwrje6,,Wireshark is a Network Analyzing tool,pihole,1645494207.0
11077,comment,9,hxv1ms0,,Be sure to check router / firewall settings and make sure you set port forwarding to the vpn.,pihole,1645468317.0
11078,comment,3,hxx0kca,,"I connect to my home network via a pi with pihole and wireguard (pivpn).  When you are connected from your clients (say a mobile phone on your cell provider) you should be able to ping and access anything on your home network.  If you want to use hostnames instead of ips you just setup local dns/cname records in pihole.  If you are using something like docker on a host where you have multiple services on multiple different ports then you need to also use a reverse proxy like nginx (or a docker container like SWAG).   You should not need ANY ports open other than your wireguard port.  When it comes to plex you would need port 443 (and maybe 80) open along with setting up a cname entry at your registrar's (or whoever you use) DNS to point to your reverse proxy.  There is also a setting or two in plex that you need to change to route through your reverse proxy instead of through [plex.tv](https://plex.tv).  Good luck!

&#x200B;

Edit:  Also, if you are not able to access other devices, in your wireguard config file change your AllowedIPs line to something like ""AllowedIPs = 0.0.0.0/0, ::0/0"".  That will route all of your traffic through your server and also allow you to access everything on that home network.  You can google more on how you can customize AllowedIPs to accomplish exactly what you want.",pihole,1645498396.0
11079,comment,2,hxxgdfy,,"I used zerotier and love it. Google “zerotier pi” and the top results will point you in a good direction to install it. It’s like a virtual LAN and you can force traffic to use the pihole, so you can get adblocking anywhere. This will also help with your Plex setup, so you can watch Plex anywhere too.",pihole,1645506487.0
11080,comment,5,hxvoxx7,,I have a pihole running on a zero W with pivpn for almost a year now. Never had any issues,pihole,1645477653.0
11081,comment,1,hxv1c6o,,"Possibly, but I would recommend a pi 4 though",pihole,1645468201.0
11082,comment,1,hxwz04e,,"Personally I enjoy having a vpn to my house. I am using pivpn on an Ubuntu VIrtual Machine running on a HP enterprise server. I don’t notice any lag, usually 70 ms ping. Best part is having access to everything on local network and other VLANs when away from home.",pihole,1645497666.0
11083,comment,6,hxw11ts,,"I really like this list, it's incredibly large and it looks like they actively maintain it and if anything breaks a website they'll fix the list accordingly.",pihole,1645482520.0
11084,comment,1,hxxxfud,,Another thing to note is I've heard that half of my blacklist regex commands are broken because they have https in them. I currently do not know how to fix them. If anyone knows how to fix them it would be greatly appreciated.,pihole,1645518211.0
11085,comment,2,hxvtm5e,,It is. It just won't let me reach my dashboard or anything via IP and port from the raspberry pi VPN. Not sure why.,pihole,1645479527.0
11086,comment,9,hxvfngc,,good luck finding one.,pihole,1645473914.0
11087,comment,4,hxwmoft,,"Most importantly I would suggest getting a micro SD endurance (Samsung or SanDisk makes them). Also, before installing Pihole, choose the OS wisely. There are better os than others, I personally prefer Dietpi which uses ramlog in order to minimize the stress on the sd card, the real weak part of a raspberry system running all day. I have no problem running pihole, pivpn, unbound, plex, transmission etc on a +5 years old raspberry pi 3 24/7.",pihole,1645491954.0
11088,comment,14,hxwah01,,">	if anything breaks a website they’ll fix the list accordingly.

Take a close look at domains they don't block. There are ad serving domains in that exception list.",pihole,1645486457.0
11089,comment,4,hxw18j8,,I love it. Ever since I swapped to using it exclusively I haven't gotten a single false positive. Truly set it and forget it.,pihole,1645482596.0
11090,comment,3,hxxyqex,,"https://regex101.com/ 

Use that site and paste in the regex and an example https site in the text and edit it until it's not messing with the https. 

Good luck! We will wait for your list! Thanks!",pihole,1645519319.0
11091,comment,3,hxxojec,,You might be behind a cg-nat. Check with your ISP if they are providing public ip,pihole,1645511555.0
11092,comment,2,hxvq693,,"I know, it’s sad",pihole,1645478145.0
11093,comment,2,hxxqlei,,Is there a shortage?,pihole,1645512981.0
11094,comment,2,hxxhlam,,"I would then assume my other lists, without then catch them then. I never see ads other than YouTube ads in the app.",pihole,1645507197.0
11095,comment,2,hy4tv57,,He also had an extra lost to block those.,pihole,1645642347.0
11096,comment,2,hy21ufz,,"Here's my backlist and whitelist. I'm still confused on how to edit the regex so nonetheless here it is.

Blacklist: 

`^ad([sxv]?[0-9]*|system)[_.-]([^.[:space:]]+\.){1,}|[_.-]ad([sxv]?[0-9]*|system)[_.-]`

`^(.+[_.-])?adse?rv(er?|ice)?s?[0-9]*[_.-]`

`^(.+[_.-])?telemetry[_.-]`

`^adim(age|g)s?[0-9]*[_.-]`

`^adtrack(er|ing)?[0-9]*[_.-]`

`^advert(s|is(ing|ements?))?[0-9]*[_.-]`

`^aff(iliat(es?|ion))?[_.-]`

`^analytics?[_.-]`

`^banners?[_.-]`

`^beacons?[0-9]*[_.-]`

`^count(ers?)?[0-9]*[_.-]`

`^mads\.`

`^pixels?[-.]`

`^stat(s|istics)?[0-9]*[_.-]`

`^https?://([A-Za-z0-9.-]*\.)?clicks\.beap\.bc\.yahoo\.com/`

`^https?://([A-Za-z0-9.-]*\.)?secure\.footprint\.net/`

`^https?://([A-Za-z0-9.-]*\.)?match\.com/`

`^https?://([A-Za-z0-9.-]*\.)?clicks\.beap\.bc\.yahoo(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?sitescout(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?appnexus(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?evidon(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?mediamath(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?scorecardresearch(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?doubleclick(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?flashtalking(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?turn(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?mathtag(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?googlesyndication(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?s\.yimg\.com/cv/ae/us/audience/`

`^https?://([A-Za-z0-9.-]*\.)?clicks\.beap/`

`^https?://([A-Za-z0-9.-]*\.)?.doubleclick(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?yieldmanager(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?w55c(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?adnxs(\.\w{2}\.\w{2}|\.\w{2,4})/`

`^https?://([A-Za-z0-9.-]*\.)?advertising\.com/`

`^https?://([A-Za-z0-9.-]*\.)?evidon\.com/`

`^https?://([A-Za-z0-9.-]*\.)?scorecardresearch\.com/`

`^https?://([A-Za-z0-9.-]*\.)?flashtalking\.com/`

`^https?://([A-Za-z0-9.-]*\.)?turn\.com/`

`^https?://([A-Za-z0-9.-]*\.)?mathtag\.com/`

`^https?://([A-Za-z0-9.-]*\.)?surveylink/`

`^https?://([A-Za-z0-9.-]*\.)?info\.yahoo\.com/`

`(\.|^)snapads\.com$`

`app-analytics.snapchat.com`

`analytics.snapchat.com`

`(\.|^)sc-prod\.com$`

`(\.|^)sc-jpl\.com$`

`(\.|^)sc-cdn\.com$`

`(\.|^)snapchat\.com$`

`(\.|^)pool\.npt\.org$`

`(\.|^)cf-st\.sc-cdn\.net$`

`waluigi.goguardian.com`

`(\.|^)goguardian\.com$`

&#x200B;

&#x200B;

Whitelist:

`mailtrack.io`  
`cf-st.sc-cdn.net`  
`chat-gateway-prod.chat.snapchat.com`  
`app.snapchat.com`  
`mvm.snapchat.com`  
`us-central1-gcp.api.snapchat.com`  
`us-east1-aws.api.snapchat.com`  
`gcp.api.snapchat.com`  
`aws.api.snapchat.com`  
`us-east4-gcp.api.snapchat.com`  
`loca.sc-jpl.com`  
`spclient.wg.spotify.com`  
`store.steampowered.com`  
`app-analytics-v2.snapchat.com`  
`drive.google.com`  
`(\.|^)tubi\.com$`  
`(\.|^)tubi\.io$`  
`(\.|^)infinity-c18\.youboranqs01\.com$`  
`(\.|^)cdn\.adrise\.tv$`  
`(\.|^)uapi\.adrise\.tv$`  
`(\.|^)s\.adrise\.tv$`  
`insideruser.microsoft.com`  
`video-dfw5-1.xx.fbcdn.net`  
`video-dfw5-2.xx.fbcdn.net`  
`ci3.googleusercontent.com`  
`ci4.googleusercontent.com`  
`wl.spotify.com`  
`2.bp.blogspot.com`",pihole,1645587700.0
11097,comment,2,hy23jml,,"Here is what is enabled and disabled currently.

Whitelist: [https://i.imgur.com/EwMvIYD.png](https://i.imgur.com/EwMvIYD.png)

Blacklist: [https://i.imgur.com/6Z3do1J.png](https://i.imgur.com/6Z3do1J.png)

AdList: [https://i.imgur.com/6Z3do1J.png](https://i.imgur.com/6Z3do1J.png)",pihole,1645588518.0
11098,comment,1,hy1n9wz,,[removed],pihole,1645581008.0
11099,comment,2,hxyq4a3,,"sure is. The global chip shortage. Check out ebay (only retailer that actually has these) for the prices of a rpi3+. Over $100. 

I want another rpi for a project around my house, but I cannot get my hands on one. 

https://www.jeffgeerling.com/blog/2022/its-dire-raspberry-pi-availability-tracker-launched


https://rpilocator.com/",pihole,1645538555.0
11100,comment,1,i1fsopm,,[deleted],pihole,1647803702.0
11101,comment,1,hy2aoy0,,I found the fix to my wrong regex's.,pihole,1645592076.0
11102,comment,1,hy23tzm,,"These are all of my things, even though it is a lot to post.",pihole,1645588655.0
11103,comment,1,i1ftlgk,,Oisd.nl you’ll see it on the blocklist page at the top.,pihole,1647804104.0
11104,comment,1,hy2icit,,">	I found the fix to my wrong regex’s.

What was the fix?",pihole,1645596530.0
11105,comment,1,i1fucr6,,[deleted],pihole,1647804434.0
11106,comment,1,hy2jnut,,"I didn't use them and deleted them. Almost all of what was being blocked was through the AdLists anyways. There was no need for a blacklist. And if a few leak through then I know their will be an update to the adlist, or I can manually add them.",pihole,1645597401.0
11107,comment,1,i1gm2nb,,https://oisd.nl/downloadsXtra,pihole,1647816270.0
11108,post,1,sxtvjm,Can't login to Web Interface,"I have Pi-hole running in a docker container on Ubuntu Server 20.04 LTS. All seemed to work fine so far, I was able to point my routers DNS to the Ubuntu Server, added some Adlists and Whitelists and I was seeing less ads on my local devices.

After some time I recognized that I wasn't able to perform a login via the Web Interface. The page would show up via ""[http://192.168.xxx.xxx/admin/index.php](http://192.168.xxx.xxx/admin/index.php)"". When I click on ""Login"" the password prompt shows up. When I enter the wrong password the UI prompts me with a wrong password notification, whenever I enter the right one I'm getting redirected to the dashboard page but I'm still not logged in and can't navigate to any settings, DNS, or Group Management tab.

I have faced this issue now for several weeks, unable to find any solution on the internet. During this time an update got released. As I am still able to access the container on the host machine and enter pihole commands there, I was able to perform the update and update gravity via the following commands while the container was still running:

docker pull pihole/pihole

docker-compose down

docker-compose up -d

The fact that the container is still running allows me to have the new pihole version installed using the same volumes as the previous one while not facing any DNS resolving issues during the update process. All went fine, the new versions of Pi-hole, FTL and Web Interface are shown correctly on the UI. But the issue remains still the same.

Has anyone encountered the same problems and is willing to share some solutions/attempts?

Have a lovely day :)",pihole,1645451160.0
11109,post,8,sxtpan,How can I see which devices are making which DNS calls? ...,"On my Eero, I set DNS to Custom and have it pointed to my two PiHole boxes. I see all of the DNS calls on PiHole but of course it looks like they're all coming from the Gateway and not the individual devices.

I'm not super knowledgeable wrt networking but it seems like the Eero gateway is doing the DNS lookups /for/ the devices, rather than handing the DNS server IPs to the devices and letting them do it?

Googling around it looks like a common issue. I did notice this:[https://discourse.pi-hole.net/t/majority-of-traffic-through-one-client-eero-settings/12536](https://discourse.pi-hole.net/t/majority-of-traffic-through-one-client-eero-settings/12536)

So on the PiHole DNS settings I enabled Conditional Forwarding. But it doesn't look like it resolved my problem? Is making the PiHole the DHCP server the only way to fix this?

Thanks very much in advance!",pihole,1645450643.0
11110,comment,7,hxtwy2h,,"What you *have* is the piholes as DNS servers for the Eero, and the Eero as DNS server for the clients.

What you *want* is one or both piholes as DNS for the clients. 

Check the Eero DHCP settings, that's where that setting usually lives.",pihole,1645451064.0
11111,comment,1,hxv4ffd,,You want to find the DHCP server settings and change the DNS server IPs to point to your Pi-hole servers.,pihole,1645469412.0
11112,comment,1,hysm5o2,,I think I solved this. I had the HomeKit security enabled in Eero (I think it just adds additional firewall functionality for them). Once I disabled that I could see the individual IPs.,pihole,1646065912.0
11113,comment,2,hxv78r2,,"Gotcha, I think I follow. And I think I'm learning that w Eero that might not be an option. Not the end of the world, but would have been nice.",pihole,1645470537.0
11114,comment,1,hxv7gv0,,">  And I think I'm learning that w Eero that might not be an option.

Ah, wtf? What POS router is this?",pihole,1645470626.0
11115,comment,2,hxv8e7u,,"I could be mistaken, though. I'm a little out of my comfort zone with how this stuff is supposed to work.

So the Eero let's me specify custom DNS servers. I have the primary and secondary pointed to the IPs of my two PiHole devices. But instead of telling the individual devices, ""hey, use these IPs for DNS,"" it looks like the Eero is just doing the lookups itself and passing the responses back to the clients.

It is using the PiHoles for DNS, the requests just all appear to be coming from the gateway.",pihole,1645470997.0
11116,comment,1,hxv8nff,,"Yes, that's the effect of the first part. What you want/need is for the Eero to send out your pihole IP as the DNS server to use. Have a look at the DHCP settings, maybe it's in the wireless settings, no idea.",pihole,1645471099.0
11117,comment,2,hxv8wtq,,"I did see some threads saying it would work if I told Eero to run in bridge mode and used the PiHoles for DHCP, but that's a bridge too far for me.  :)",pihole,1645471202.0
11118,post,11,sxrsvc,Clients not detected,"Hi. I followed the guide on YouTube from TechnoTim to install pinhole in a docker container (on Ubuntu server). The container works and I can login. The only problem I have is that it doesn't see my clients. So far I tried it with a Windows computer and an Android device (just to test it it works before I change my router). I tried it with filling in the IP of the Ubuntu server in the DNS settings on my device (windows computer, Android) and also putting in the mac address in the clients section in pi-hole. So far, no luck. Any ideas what I could do to find out what's wrong/fix it?",pihole,1645444604.0
11119,comment,3,hxuimk4,,"https://www.smarthomebeginner.com/run-pihole-in-docker-on-ubuntu-with-reverse-proxy/

Might need to update your `NetworkManager` per this guide.",pihole,1645460873.0
11120,comment,2,hxtrkmh,,"After windows DNS area manually configured, what doesn't ipconfig /all day your DNS servers are?

Can you ping your pihole from windows?

Are you running any separate subnets or vlans?",pihole,1645447922.0
11121,comment,2,hxu31iy,,"Ok, then on the cmd prompt, type nslookup www.google.com.

The output should return what DNS server IP your system is using, should return the pihole

Also, you can specify what DNS server to use for the query like: nslookup www.google.com x.x.x.x

Where the x's are your pihole

Also, I've seen it a couple times where users are using IPv6 from their isp and it won't use the pihole for lookups...check that out too",pihole,1645454164.0
11122,comment,1,hxymgzj,,"In Settings/DNS in the pi-hole dash, what interface is your pi-hole listening on? If you're firewalled, try changing to another setting.",pihole,1645536699.0
11123,comment,1,hy49hkz,,"Ok, followed this guide, now it works, thanks for the help",pihole,1645634531.0
11124,comment,1,hxtzanm,,"DNS server on windows is the DNS server I gave in manually, witch is the one of my pi-hole. I can ping it and am not running anything else.",pihole,1645452298.0
11125,comment,1,hxub9gs,,"Nslookup gives me a timeout, both with and without the DNS server (the x's) behind it. I'm both cases it says the ""address"" is the pi-hole ip",pihole,1645457832.0
11126,comment,2,hxuc5em,,"Ok, try it using DNS server 8.8.8.8, does it still timeout?",pihole,1645458204.0
11127,comment,2,hxur8vx,,"No, with the Google DNS it works fine",pihole,1645464287.0
11128,comment,2,hxutq1v,,"Ok, that's a good thing.

Go to the web gui of pihole > Settings > DNS > what are your upstream servers configured as?",pihole,1645465258.0
11129,comment,1,hxvvnu0,,"I tried Quad9 (filtered, DNSSEC) on ipv4 and custom 127.0.0.1#5335 (the last one I found online that could be a solution). Both were not working",pihole,1645480349.0
11130,post,4,sxoj18,Blocking E4 ads (UK),"Is anyone here UK based and still successfully blocking ads on E4?

Up until a couple of months ago, blocking the following domains worked, now I get a certificate error on my LG smart TV.  Switch to an unfiltered dns server and E4 app works again but the ads are back grrrr. Something must have changed from a domain perspective and trying to work it out.  (I realise that there's an ITV domain in there too).

[cdn.ss.anno.channel4.com](https://cdn.ss.anno.channel4.com)

[webstats.channel4.com](https://webstats.channel4.com)

[tom.itv.com](https://tom.itv.com)

[toots-a.akamaihd.net](https://toots-a.akamaihd.net)

[c5ads.ott.skymedia.co.uk](https://c5ads.ott.skymedia.co.uk)

[p.videologygroup.com](https://p.videologygroup.com)

[cdn.http.anno.channel4.com](https://cdn.http.anno.channel4.com)

[securecdn.videologygroup.com](https://securecdn.videologygroup.com)

[monitor.channel4.com](https://monitor.channel4.com)

[dsa.moatads.com](https://dsa.moatads.com)",pihole,1645431974.0
11131,comment,1,hxt7gmy,,"Well, enable a single one, test again, repeat until you've found which one it is.",pihole,1645432107.0
11132,comment,1,hy32ryx,,"Disable the entries. Then give 1Hosts a trial run.

[https://github.com/badmojr/1Hosts](https://github.com/badmojr/1Hosts)",pihole,1645612580.0
11133,comment,0,hxt83ry,,"Yes I know, just hoping that someone else may have come across this and/or to see if it's an LG specific problem for example.",pihole,1645432641.0
11134,comment,1,hy360f5,,"ok thanks, will do.  Do you block All4 ads this way?

Not sure why I titled the post E4, I meant All4 / channel 4 app.",pihole,1645615184.0
11135,comment,1,hy8v0ac,,Of course . By opting for more far  better comprehensive  blocklists.,pihole,1645713829.0
11136,post,3,sxnl1h,DNS keeps changing to Google,"Hi all,

I have pihole running in a container in unraid, every so often upstream will change to Google when I have cloudflare, opendns and quad9 set as my preference. It also changes interface settings from recommended to permit all origins. It happens every few days or so, I only notice it when I start seeing issues with my network.  

Has anyone seen this before? I couldn't find anything online about it, any help on this would be great. Thanks!",pihole,1645428251.0
11137,comment,4,hxte5k8,,"From the description it sounds as though you don't have a persistent volume set up, and your deployment is reverting to the defaults as it doesn't have an ability to save any modifications to its configuration (through having no persistent volume).",pihole,1645437682.0
11138,comment,3,hz7bs0u,,"I have the same issue also running unriad - I'm wondering if this happens when the docker updates or if it's just random I might turn off auto-update for pihole and see if it reverts on its own.

&#x200B;

Edit: Actually one thing I noticed now in its docker settings under ""PIHOLE\_DNS\_: it was set to google DNS for me, maybe switching this to your preferred DNS will stop pihole from switching it when it's updated/restarted.",pihole,1646326734.0
11139,comment,1,hxu26e4,,Wouldn't that mean my other settings would change as well? I have local DNS records along with some domains I've manually blacklisted that are still there.,pihole,1645453744.0
11140,comment,1,hz7dqpq,,Oh I'll have to take a look at that. It does seem like when it's restarted cause it chances when my backups run on my. Appdata folder,pihole,1646327484.0
11141,comment,1,hzexf6u,,"Turns out you were right, checked my docker settings and it was to [8.8.8.8](https://8.8.8.8)   


I would've thought that the pihole settings would override that.",pihole,1646455278.0
11142,post,103,sxmcid,PSA: The Sesame Street app on iOS hard-codes 1.1.1.1,"This is bizarre… but the Sesame Street app on iOS is bypassing your pihole. It’s insane, but I’ve verified it. Have a port 53 redirect in place? Tough luck, it will just ignore the DNS response since it didn’t come from 1.1.1.1. Why would a kids app do this?

___

**Edit**: Ok, I was able to run and analyze tcpdump, and it looks like I was somewhat wrong. This is what it looks like now- although I’m a bit out of my depth here. The app isn’t even trying to query DNS yet, all it’s doing to determine ‘connectivity’ is opening TCP connections to the following servers- on port 53:

* 8.8.4.4
* 208.67.222.222
* 1.1.1.1

As far as I can tell, it’s not sending any data- just trying to open the TCP connection. If it fails, the app gives up, saying it is not connected. It perhaps would try some more servers then these, but `1.1.1.1` is successful in this test (Google and OpenDNS is blackholed, so those fail). So, as far as I can tell, this look to be mostly ignorance trying to open up TCP connections on port 53 and not bothering to try UDP or port 443. It’s a rather poor connectivity test to not be testing the actual connectivity required for the app to run.",pihole,1645423786.0
11143,comment,42,hxtuuyw,,"I do something called Masquerade.  My FW pretends to be the rouge DNS server and sends the request to PiHole.  The caller does not know it is getting a response from my server.  I block all 53 and 853 from leaving my network, excluding the PiHoles.",pihole,1645449900.0
11144,comment,110,hxsw6xe,,"> Why would a kids app do this?

Money.",pihole,1645423865.0
11145,comment,8,hxu6a4i,,"Granted, nailing their app to a single DNS provider is annoying, but if they're going through that trouble, why would they use Cloudflare and not a more friendly DNS provider to data collection?  They're far more benign than say Google or many other alternatives.  I typically use Cloudflare and Quad9 on my Pi-Hole.

https://www.cloudflare.com/learning/dns/what-is-1.1.1.1/",pihole,1645455654.0
11146,comment,3,hxukfye,,"A lot of apps do this.

I noticed that after installing ASUS Merlin and turning in dns filter I started seeing queries coming from every device I have never seen before. Android/iOS/Windows/specific apps etc…",pihole,1645461596.0
11147,comment,2,hxwb5c1,,[208.67.222.222](https://208.67.222.222) is the main DNS server for openDNS.,pihole,1645486749.0
11148,comment,1,hxu0fzt,,"You could block it, it should default to whatever you set it to. Google does this too",pihole,1645452888.0
11149,comment,1,hxv7opn,,This is a perfect example of Hanlon's Razor.,pihole,1645470714.0
11150,comment,1,hxubd6q,,"I've seen similar happen with my roommate's mom's iPad on my network. She complained that the app wouldn't load at all. Checking logs, I found that the app was trying to use Apple's DoH server rather than network-provided DNS. 

OP: Try blocking access to 1.1.1.1 on the HTTPS (443) port, as well as an outright block of port 853. (DoT)",pihole,1645457876.0
11151,comment,1,hxw596h,,"doesn bypass my pihole, firewall rule wan out allow port 53 from group dns servers, firewall rule wan out block port 53 all network",pihole,1645484246.0
11152,comment,0,hxu7sel,,Trap 100% of dns requestsand redirect them to the PI hole,pihole,1645456328.0
11153,comment,0,hxuyb1x,,This is why I force all DNS traffic to my pihole in my pfsense. Android phones also forces their DNS servers even if you manually put in the pihole address.,pihole,1645467021.0
11154,comment,11,hxtvp9u,,This is the way.,pihole,1645450377.0
11155,comment,6,hxu33h9,,"How is this done? I have port [53 redirects working on my Unifi gear](https://scotthelme.co.uk/catching-naughty-devices-on-my-home-network/) - but the client is still able to detect that the response is different:

```bash
$ dig @1.1.1.1 duck.com
;; reply from unexpected source: 192.168.4.32#53, expected 1.1.1.1#53

```

In the example above, I’m using dig to directly query `1.1.1.1`, but I redirect it to the PiHole instead. Dig shows me the response, but knows that it didn’t come from `1.1.1.1`

How could I make this transparent?",pihole,1645454190.0
11156,comment,1,hxu3n62,,"Yes, I do the same in my pfSense router.",pihole,1645454448.0
11157,comment,1,hxx9r9l,,"Also set an alias to all known public dns server IPs and block outbound 443 traffic for DoH, if you're really paranoid.

https://public-dns.info/",pihole,1645502893.0
11158,comment,12,hxswdev,,Are they not massively funded by the US government? Is it not illegal to collect information on kids under the age of 13? Where does the money come from?,pihole,1645423980.0
11159,comment,2,hxupxl5,,[deleted],pihole,1645463773.0
11160,comment,1,hxue86b,,"I updated the post with more details. It first tries 8.8.4.4, and then 208.67.222.222. Also, it’s not using it for DNS resolution, but to test TCP connections on port 53.",pihole,1645459073.0
11161,comment,5,hxu2dzt,,"It is blocked, it does not fallback to the default. It just stops working - which is what lead me to post this PSA.",pihole,1645453847.0
11162,comment,2,hxuegd2,,"Outright blocks just cause the app to report no connectivity and give up. However, I did just update the post with more details. In my updated opinion it’s just poor programming and not malicious intent.",pihole,1645459167.0
11163,comment,8,hxu94nf,,"I do this with a Unifi USG.  It's just a second piece of the config.

    {
      ""service"": {
        ""nat"": {
           ""rule"": {
               ""1"": {
                    ""description"": ""DNAT_DNS_VLAN10"",
                    ""inbound-interface"": ""eth0"",
                    ""type"": ""destination"",
                    ""log"": ""enable"",
                    ""protocol"": ""tcp_udp"",
                    ""source"": {
                        ""address"": ""!192.168.2.103-192.168.2.104""
                },
                    ""destination"": {
                        ""port"": ""53""
                    },
                    ""inside-address"": {
                        ""address"": ""192.168.2.103-192.168.2.104"",
                        ""port"": ""53""
                    }
                },
               ""5001"": {
                    ""description"": ""Translate reply back"",
                    ""type"": ""masquerade"",
                    ""protocol"": ""tcp_udp"",
                    ""destination"": {
                        ""address"": ""192.168.2.103-192.168.2.104"",
                        ""port"": ""53""
                    },
                    ""outbound-interface"": ""eth0""
                }
             }
          }
       }
    }

Now my responses look like they come from wherever the client sent the request.

    timmeh@chaos:\~$ nslookup pi.hole 1.1.1.1   
    Server:         1.1.1.1
    Address:        1.1.1.1#53
    
    Name:   pi.hole  
    Address: 192.168.2.103  

Edit: formatting code on reddit is a beyotch.",pihole,1645456916.0
11164,comment,2,hxu5igg,,"When I had an EdgeRouter it was called masquerade and there are instructions on how to do it.  The process has other names depending on the FW.  It may be call NAT redirect also.  For Unifi I am not sure how to do it there.

pfSense it is easy to do and I posted complete instructions in the pfSense forums.

Your testing is correct.  I set a system to use DNS server [1.2.3.4](https://1.2.3.4) (Not a DNS server) and do dig and the response is from [1.2.3.4](https://1.2.3.4).  Until dig works I know it is not working.

&#x200B;

The down side is the PiHole logs show the rouge request from the FW, not the host.  I have not figured that one out yet.",pihole,1645455314.0
11165,comment,1,hxv3c9m,,Could you please help me with the steps for pfsense?,pihole,1645468985.0
11166,comment,16,hxtt52n,,Sesame Street is its own non profit. They get about 5% of their funding from the US government.,pihole,1645448891.0
11167,comment,41,hxsyqb6,,"In no way, shape, or form are DNS requests personally identifying information.",pihole,1645425535.0
11168,comment,5,hxt3yvl,,"If all it's doing is checking the IP you could try to add the IP 1.1.1.1 to the pihole so then the app will see the correct IP in the header. 

You may have to add a route on your router to tell it to reach that network via you pihole.",pihole,1645429309.0
11169,comment,3,hxtqtpi,,"Bruh, sesame street has been owned by HBO for a few years now.",pihole,1645447448.0
11170,comment,1,hxtzf56,,That’s right. This problem goes all the way to the top!,pihole,1645452362.0
11171,comment,1,hxwtpbx,,That’s possible.,pihole,1645495208.0
11172,comment,1,hxufi8s,,"I'll test when I get home. 

One other thought I had: Is it possible the app is demanding DNSSEC validation? I'd try enabling DNSSEC on Pi-Hole.

UPDATE: Home now, and tested the mentioned issue. App seems to connect fine, Not getting any errors or noticing any DNS maladies. 

Tested on an iPhone 6S+ running IOS 15.3.1",pihole,1645459602.0
11173,comment,1,hxv0xpq,,Do you mind trying a `dig` query instead and posting the results? I’m curious how it compares with mine.,pihole,1645468045.0
11174,comment,3,hxv9mjk,,"I used the guide at the link below. NAT rule #3 is the one that does the magic.  


[https://labzilla.io/blog/force-dns-pihole](https://labzilla.io/blog/force-dns-pihole)",pihole,1645471487.0
11175,comment,3,hxtzk9s,,[deleted],pihole,1645452437.0
11176,comment,8,hxtr7ap,,"IP Address isn't 'personal', but it is collected. Given their pattern collection algorithms, and data dumps from other sources, it wouldnt suprise me if they already have a link between possible persons and IPs, and even members of their network.

There's a reason cloudflare makes their DNS servers free and highly available.

They collect tons and tons of data. This is their business model. Think about it. You are the product.

Use unbound if you care.",pihole,1645447689.0
11177,comment,4,hxtmt9c,,Today I’m going to get a list of domains it is resolving. I already know Google analytics is one of them- but there are a lot more tracking domains if my memory servers. It’s been several years since I really looked at it.,pihole,1645444671.0
11178,comment,1,hxxtiol,,It absolutely is used in profile building and associations. Guaranteed.,pihole,1645515137.0
11179,comment,3,hxtfk6c,,"Or it is possible to block at the router level 1.1.1.1 and 1.0.0.1 (and 8.8.8.8 and 8.8.4.4 :) ) : even with a hardcoded dns, the app will need resolution, and will fallback on the dns server designated by the dhcp. Hopefully",pihole,1645438853.0
11180,comment,3,hxtn10w,,"Ughhh… that’s probably the only way to get it to work without allowing outgoing port 53. I’m not sure I want to go that route, but you are probably right. Infuriating that a kids app is doing this.",pihole,1645444833.0
11181,comment,7,hxtsr7c,,"No, they have a partnership.",pihole,1645448656.0
11182,comment,1,hxug3ul,,"That’s an interesting idea… maybe I’ll get some more time to test at nap time, otherwise it will have to be tonight",pihole,1645459855.0
11183,comment,5,hxv245p,,"Here's a dig against '1.1.1.1' for 'pi.hole' and 'duck.com' from inside my network:

    tim@chaos:~$ dig @1.1.1.1 pi.hole

    ; <<>> DiG 9.16.1-Ubuntu <<>> @1.1.1.1 pi.hole
    ; (1 server found)
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 9481
    ;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 4096
    ;; QUESTION SECTION:
    ;pi.hole.                       IN      A

    ;; ANSWER SECTION:
    pi.hole.                0       IN      A       192.168.2.103

    ;; Query time: 8 msec
    ;; SERVER: 1.1.1.1#53(1.1.1.1)
    ;; WHEN: Mon Feb 21 18:40:18 UTC 2022
    ;; MSG SIZE  rcvd: 52

    tim@chaos:~$ dig @1.1.1.1 duck.com

    ; <<>> DiG 9.16.1-Ubuntu <<>> @1.1.1.1 duck.com
    ; (1 server found)
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 56085
    ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1

    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 1472
    ;; QUESTION SECTION:
    ;duck.com.                      IN      A

    ;; ANSWER SECTION:
    duck.com.               15      IN      A       40.89.244.232

    ;; Query time: 88 msec
    ;; SERVER: 1.1.1.1#53(1.1.1.1)
    ;; WHEN: Mon Feb 21 18:40:28 UTC 2022
    ;; MSG SIZE  rcvd: 53

And here's a dig of 'pi.hole' from a DNS server outside my network:

    timmeh@az-dev-22:~$ dig @1.1.1.1 pi.hole

    ; <<>> DiG 9.16.1-Ubuntu <<>> @1.1.1.1 pi.hole
    ; (1 server found)
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: NXDOMAIN, id: 50081
    ;; flags: qr aa rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 1

    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 1232
    ;; QUESTION SECTION:
    ;pi.hole.                       IN      A

    ;; AUTHORITY SECTION:
    .                       86400   IN      SOA     a.root-servers.net. nstld.verisign-grs.com. 2022022101 1800 900 604800 86400

    ;; Query time: 4 msec
    ;; SERVER: 1.1.1.1#53(1.1.1.1)
    ;; WHEN: Mon Feb 21 18:39:03 UTC 2022
    ;; MSG SIZE  rcvd: 111",pihole,1645468504.0
11184,comment,3,hxu91y9,,"If I remember right, Henson retained ownership and creative control over the Muppets and allowed free use on Sesame Street so he could later market them in the movies and things. You'll notice it's not ""Sesame Street presents Muppets Treasure Island"". Pretty smart to get all the kids hooked on your brand then market other products once they're older.",pihole,1645456884.0
11185,comment,4,hxuiviu,,"CloudFlare provides free DNS because they can analyze traffic and queries that way, not to identify individuals. They also have to run lots of high bandwidth edge servers for their CDN anyways so it makes sense to run a few extra services which are relatively lightweight.

There are many good/bad things about CloudFlare but their DNS is one of the less concerning ones. If you're worried, find a different provider or use unbound but realistically you're fine and a lot better off than using most ISP DNSes.",pihole,1645460973.0
11186,comment,10,hxts5pg,,"> They collect tons and tons of data. This is their business model. Think about it. You are the product.

Do you have any proof of this? I don't think that this is their business model unlike with Google.",pihole,1645448288.0
11187,comment,4,hxtgbvd,,"I block the following DNS servers on my router and redirect all DNS queries to my pihole, there may be more:

    1.0.0.1
    1.1.1.1
    4.2.2.1
    4.2.2.2
    4.4.4.4
    8.8.8.8
    8.20.247.20
    8.26.56.26
    9.9.9.9
    9.9.9.10
    9.9.9.11
    84.200.69.80
    84.200.70.40
    149.112.112.10
    149.112.112.11
    149.112.112.112
    163.172.141.219
    207.246.121.77
    208.67.220.220
    208.67.222.222",pihole,1645439503.0
11188,comment,2,hxtkbug,,Nope it will just refuse to open.,pihole,1645442758.0
11189,comment,2,hxtm7fi,,"Yes- it **should** fallback. But it does not. It just fails. Say ‘there is no network connection’. I initially thought it was the pihole fault, but after investigating, I tracked it down to a refusal to fallback/use local DNS servers. The app just gives up if it cannot talk directly with 1.1.1.1.",pihole,1645444212.0
11190,comment,4,hxu40zc,,Give your raspberry pi a second IP of 1.1.1.1 and set a route on your router to point that /32 to your Pi hole.,pihole,1645454628.0
11191,comment,1,hxu1ovy,,"Yea I've had it in the past with another app and moaned at the devloper to resolve it lol.

Good luck",pihole,1645453504.0
11192,comment,3,hxtulh5,,"https://www.vox.com/2015/8/13/9149091/sesame-street-hbo-pbs

Seems it's more complicated than I thought.",pihole,1645449752.0
11193,comment,1,hxuis3b,,"That's honestly the only thing I can think of it being. I tried doing a DiG test with mine (pfSense redirect), and it gets an answer from the ""DNS"" server that I told it to test, not advertising the actual IP address of the Pi-Hole.",pihole,1645460935.0
11194,comment,1,hxv64g2,,Thanks!,pihole,1645470087.0
11195,comment,12,hxtlco1,,I just block any port 53 requests that didn't come from my piHole and redirect them there.,pihole,1645443558.0
11196,comment,1,hxu0hfv,,Who are you using for resolution?,pihole,1645452908.0
11197,comment,7,hxtsxo2,,report the bug - we shouldn’t accept app behaviour like this,pihole,1645448765.0
11198,comment,6,hxtm1yz,,"I am doing this. Which is why the app completely breaks, which then makes my son upset.",pihole,1645444096.0
11199,comment,2,hxtn2jd,,Don't forget 853 for Do~~*H*~~T too  :),pihole,1645444865.0
11200,comment,1,hxu7mmj,,I am using Unbound.,pihole,1645456257.0
11201,comment,3,hxtvb2z,,That would be an app I removed. Find another app!,pihole,1645450157.0
11202,comment,4,hxtmgfq,,"Ah just realized the problem, it denies the request. 


That's really weird.",pihole,1645444405.0
11203,comment,1,hxuabvd,,"I have a very basic TP-Link and something that worked for me was adding the DNS IPs to the Advanced Routing section, like this:

IP: 1.1.1.1
Mask: 255.255.255.255
Destination: 192.168.0.1 (my router IP; can be 0.0.0.0 if your router accepts)

Noticed that this is a low level redirecting on the router and your app shouldn’t complain. But it so, then the app has an extra checking to make sure the hardcoded DNS is being used.

I added Google, Cloudflare, and Quad9 servers.",pihole,1645457434.0
11204,comment,1,hxumfbq,,You need to setup a NAT loopback for port 53 back to the pi-hole. Done right hard coded items work as they think they are good. You also need to do this for port 853.,pihole,1645462377.0
11205,comment,1,hxtn4t9,,"Oh, i do. I just couldn't remember the second port and didn't want to go check",pihole,1645444912.0
11206,comment,1,hxuf8o0,,853 is DoT. DoH runs on 443.,pihole,1645459492.0
11207,comment,3,hxumyls,,You need to setup a NAT loopback for port 53 back to the pi-hole. Done right hard coded items work as they think they are good. You also need to do this for port 853.,pihole,1645462589.0
11208,comment,1,hxuqjw5,,"Ah yes, thanks, updated :)",pihole,1645464018.0
11209,post,0,sxk5wl,Pi hole web interface not showing up (dietpi),"Newbie here,

I recently installed dietpi on my pi 4

I then installed pi hole via the software installer, and completed setup. Now, when I try to access the web interface, all I get is a [placeholder page](https://imgur.com/a/GnrEMUV)

How would I setup the web interface?",pihole,1645416495.0
11210,comment,3,hxsst2p,,">	when I try to access the web interface

What is the exact URL you are using?",pihole,1645421775.0
11211,comment,2,hxsxu25,,Add /admin to the pi-hole ip to access the web interface.,pihole,1645424937.0
11212,comment,1,hxsmq4m,,Dietpi has their own magic going on. This appears to be best directed at Dietpi support.,pihole,1645418284.0
11213,post,0,sxixos,I get hardlocked out of my network when I restart Pi-hole. Sometimes.,"**Basic setup information:**

I am running Pi-hole on a RPi Zero W, connected to my router via an ethernet dongle. The router does routing and WAP things, and is connected to a modem box provided by my ISP, which is set to modem mode. There are a few unmanaged switches connected to the router. All my devices connect to the switches, except the RPi. Pi-hole is the DHCP server. The DHCP server on my router is disabled.

**How I got here:**

There was a power outage this morning, after which I got completely cut off from my network. That means not even being able to access local devices, like the router, the modem, or my NAS. Weirdly enough, the SMB share still worked fine, but I couldn’t access the NAS’s web interface or SSH into it (nor the RPi). I type out the IPs for accessing these local devices.

I ended up factory resetting both the modem and the router. I also reflashed Raspberry OS Lite (I had used the full Raspberry OS before, but only used the GUI once) to the RPi Zero and reinstalled Pihole. I then recovered the router’s and Pi-hole’s settings from backups, which broke things again. I reset the router and reflashed the RPi again, this time reconfiguring them manually.

**What happens:**

I have been messing with the stuff all day and this is all I got:

* If I plug the ethernet dongle in my RPi before giving it power, it breaks the network.
* If I plug in the power adapter first, then plug in the ethernet dongle, the RPi seems to restart, and then things work fine.

This coincides with a change in the bootup text:

Power first:

    [...]
    [  OK  ] Reached target Network is Online.
             Starting Lighttpd Daemon...
             Starting LSB: pihole-FTL daemon...
             Starting /etc/rc.local Compatibility...
    My IP address is 192.168.0.126
    [  OK  ] Started /etc/rc.local Compatibility...
    [...]

Ethernet first:

    [...]
    [  OK  ] Reached target Network is Online.
             Starting Lighttpd Daemon...
             Starting LSB: pihole-FTL daemon...
             Starting /etc/rc.local Compatibility...
    [  OK  ] Started /etc/rc.local Compatibility...
    [...]

TL;DR: The `My IP address is` `192.168.0.126` line is missing when things don’t work.

I also got two warnings, one new and one I have seen before.

* `DHCP packet received on wlan0 which has no address`: this one I have seen, and I think the weird packet is being sent by the router, since it went away previously after I set up a DHCP reservation for the router-
* `no address range available for DHCP request via lo`: This one is new. The documentation says ""No DHCP context has been configured for this address. Check your DHCP settings"", but I don’t know what address this is about nor what a DHCP context is.

**More setup info:**

Before installing Pi-hole, I edited `/etc/network/interfaces` by adding the folowing:

    iface eth0 inet static
        address 192.168.0.126
        netmask 255.255.255.0
        gateway 192.168.0.1

I also added an entry into my router’s ""MAC & IP Binding"" menu for the RPi, as well as reserving the IP in the router’s DHCP server (which was active at the time).

When installing Pi-hole, in the ""Static IP Address"" portion of the installer, I picked `Yes: configure a static IP with the current settings`.

I would also like to say that I don’t really understand static IPs, as I don’t actually know what the ""MAC & IP Binding"" menu does. It is also weirdly enough located in the Security tab. There’s also a ""static routing"" table in the router’s Network tab, which I have not edited as I don’t know what it does. I think I know how a DHCP reservation works though.

Before things broke, I didn’t have the ""MAC & IP binding"" option set and only had a DHCP reservation for the RPi in the router’s DHCP server settings, which itself was turned off.

I have also edited `/etc/hosts` with the IP addresses of NTP servers that resolve (for me) to the following DNS names:

    0.pool.ntp.org
    1.pool.ntp.org
    2.pool.ntp.org
    3.pool.ntp.org
    0.debian.pool.ntp.org
    1.debian.pool.ntp.org
    2.debian.pool.ntp.org
    3.debian.pool.ntp.org

I did this because I had a previous issue where after restarting, the RPi would get stuck in a loop of trying to sync time, but being unable to resolve the time server’s DNS because the requests would have a bogus time attached.

I tried pinging all of these hard-coded servers today and all of them are still up.

I have generated a debug log from when the network works, but I don’t feel right sharing it since it contains quite a bit of personal info. I’ll happily share a specific part of it if it can help. I was unable to generate a debug log when the network doesn’t work, since at that point I can’t SSH into the RPi and it doesn’t have enough USB ports for me to plug in ethernet and a keyboard at the same time.

That about does it. I am kindly asking you for advice, else my family shall eat me and my little internet boxes.

EDIT: Added info about DNSMASQ warnings.",pihole,1645412600.0
11214,comment,1,hxspduk,,"I'm not 100% sure if it's related to your issue or not, but NTP is not exactly bullet proof.

It'll refuse to sync if the offset is too large. From memory this is 1000s, which isn't staggeringly large at all. Just a hair over 15 minutes.

RPi boards don't have RTCs. Most distros are using `fake-hwclock` to wing it. This saves the last known time/offset since epoch on a clean shutdown. An RTC is pretty trivial to add to these boards, and very inexpensive. DS3231 based modules tend to have extremely high precision.",pihole,1645419781.0
11215,comment,1,hxtqgg1,,Are you sure that this is not just an issue of DHCP?   A test would be to manually set an IP in the network of the router. That SMB works might be explained by Microsoft is using autoconfig even in IPv4 and maybe the peers found each other without DHCP.,pihole,1645447215.0
11216,comment,1,hxsq1tn,,"I think this time it's not the NTP, I'm pretty sure this is a network connection problem. The rpi won't even show up in the router's client list when things are broken.

Thaks for the insight though, I thought I would have solved the no RTC problem by hardcoding the time, but looks like that's still useless when electricity goes out for an hour.",pihole,1645420161.0
11217,comment,1,hxtvrno,,"Well, what do you mean by ""manually set an IP in the network of the router""? There are two (three?) different places the router lets me assign an IP address to a MAC address, as I have said in the post.

I already have a DHCP reservation, but that seems useless since the device I'm trying to connect is supposed to be the DHCP server. I also have a ""MAC & IP bind"" set, which I don't know what it does. IIRC a static IP is not supposed to use DHCP, but I have no idea how to tell that to the router.",pihole,1645450414.0
11218,comment,2,hxswkba,,"To take this tangent somewhat further, what I ended up doing was setting up a local NTP server (ntpd can be both client and server) with a dedicated RTC (well, RTCs, it's actually a cluster of machines, but that's mostly irrelevant), and having my DHCP server broadcast its local IP4 address as the relevant dhcp-option field, and pointing clients in my network to it manually if need be.

The server (cluster) syncs time from a NTP server hyper-local to me (via direct IP rather than FQDN), whose time itself is sourced from an atomic clock. I use DS3231 based RTC modules for the cluster to keep time. The modules I use have tiny replaceable rechargable coin cell batteries attached, I could probably get the exact part number for you if you wanted. I haven't actually tested how long they can keep power for but I'm imagining multiple days to weeks. They were a few dollars each. Like literally a couple of bucks. Absurdly inexpensive.

Just looking at my monitoring now the averages over a month are as follows:

 - Delay 4.99 milliseconds

 - Offset -52.53 picoseconds

 - Jitter 2.06 milliseconds",pihole,1645424107.0
11219,comment,2,hxtwv0f,,"I meant that you try to set an IP to the client manually. If your router can usually uses the 192.168.1.1 for example, you could set the IP of your client (PC or so) to 192.168.1.123 with subnetmask of 255.255.255.0 and gateway to 192.168.1.1 and DNS to 8.8.8.8. - You have to tweak the numbers if your router uses a different address on the LAN side. - If this setup works, it is the proof that your network is still working. In this case the Pihole might be the issue, either the DHCP not working, or the DNS or the device is not reachable at all in the LAN (what you can find out with ping for example). One reason could be that the Raspi has no fixed IP (did you configure a fixed IP to the Pi??), then after a reboot it will be lost because the routers‘s DHCP is off.",pihole,1645451017.0
11220,comment,1,hxxl3f5,,"Oh, well I'm pretty sure that's what is happening, since my work devices connected to their VPN and proxy, and all my services that go through open ports still worked. I'm out of home RN, but the issue is almost definitely Pi-hole or the RPi itself.

As I said in the post, the RPi seems to not connect to the network, but only if I plug in the ethernet cable before the power cable.

As I also said in the post, I have configured a static IP for the RPi in /etc/network/interfaces, as well as used something called ""MAC & IP binding"" in the router's Security settings. I don't however know whether that would be enough or if there's something else I need to do.",pihole,1645509318.0
11221,comment,2,hxxvj4y,,"Thank you. Sorry, I went into the wrong direction - I admit, I didn‘t read the very good (but long) starting post carefully enough (phone browser, you know). If I have time later, I will work through it later and may be I can bring up an idea.",pihole,1645516676.0
11222,comment,1,hxxx035,,No problem! I'll admit that I wrote it in a bit of a panic. Thanks for helping out!,pihole,1645517863.0
11223,post,0,sxfvdn,How does one remove a pi hole?,"So,
Considering using my pi as a print server as my wireless card in my printer just died. 
Anyone have a guide on how to remove it and revert everything back?",pihole,1645403498.0
11224,comment,8,hxrw46r,,"If you intend to add another server program under Linux, there's no need to remove pi-hole.

If you don't want pi-hole to be your DNS server, point your gateway to a different one.",pihole,1645405247.0
11225,comment,5,hxrsuzh,,"Uh? If you try to uninstall pihole: https://docs.pi-hole.net/main/uninstall/

If you have just two „applications“ running…. I’d reinstall the os and begin fresh.",pihole,1645403704.0
11226,comment,1,hxs5ppl,,"I have configured my RPi2 to act as a Pi-hole, PiVPN, and a CUPS server for my USB printer. You don't need to give up Pi-hole to run a print server. 

This is essentially what I did for my printer ([link](https://gist.github.com/bcastellano/ae63e9e2da2c3d068c0014ed6963a5a1)). Obviously you would need to get Linux drivers for your printer to use.",pihole,1645409764.0
11227,comment,1,hxt5bcn,,As others already wrote: you can relocate your Pi with Pihole inside your network to habe it close to the printer. I use the Pi as a print server (CUPS) and connect the printer to Pi‘s USB port.,pihole,1645430367.0
11228,comment,-1,hxrt08i,,"I recall I had to do some router tweaks. Any wisdom there?
DNS or something. My memory is fuzzy.",pihole,1645403772.0
11229,comment,1,hxs5y34,,"I had thought of that too, but my router and printer and really far apart and can't really get them closer together.",pihole,1645409876.0
11230,comment,3,hxrtor3,,"Yeah it seems to be. Go to your dns settings and set it back to the router. Same as with dhcp. 

With no further info than that your memory is fuzzy, it’s impossible to tell what you should do. I could think of some ways trying to be funny, but that one above is enough. You’d have to figure out yourself. Or just reset the router. Or let it stay installed and read a book, meet your friends at the park or…",pihole,1645404098.0
11231,comment,1,hxs6pra,,"Could you expand on your thought process here?

It's not immediately obvious as to why this would be a problem at all.",pihole,1645410240.0
11232,comment,1,hxrumhf,,"I believe those are the two settings I was trying to remember.

This is very helpful. 

! Thanks",pihole,1645404544.0
11233,comment,1,hxs8shq,,"I need the pi connected directly to a wired printer to make it wireless. 
My wireless one failed. Router is like 4 rooms away due to technical limitations of my home.",pihole,1645411221.0
11234,comment,2,hxrvk82,,Uhhh… glad to help I guess. Glhf,pihole,1645404985.0
11235,comment,3,hxsixco,,It sounds to me like you are trying to use the RPi as a wireless-to-ethernet bridge?,pihole,1645416231.0
11236,comment,1,hxsfle8,,"But the location of the pihole doesn’t matter as long as it is reachable on your network. Proximity to the router isn’t a thing. Proximity to the printer might be, assuming you need to connect to the printer directly to the pi, likely over a usb link.",pihole,1645414534.0
11237,comment,1,hxtgqhq,,This is correct.,pihole,1645439842.0
11238,comment,1,hxtgtr1,,Yeah I need to be USB to the printer. Wifi isn't good enough in that area too do my DNS reliably I'm afraid.,pihole,1645439918.0
11239,comment,2,hxtial8,,"So you can still run Pi-Hole on that device, just enable it to listen to the WiFi IP and all devices can still have access to Pi-Hole.",pihole,1645441130.0
11240,post,48,sxdwlk,Can Pihole block ads on HBO Max?,"As the title suggests, can Pihole block ads on HBO Max on my AppleTV?

For some reason ATT stopped providing free ad-free HBO Max without any warning and I keep getting ads every 5 seconds while watching South Park. It’s so annoying how frequent they are compared to other streaming platforms I’ve used. 

So basically can Pihole block HBO Max’s advertisements?",pihole,1645397927.0
11241,comment,57,hxs559j,,"`hbo.yspsvc-na.net` is the one you want to add to the blocklist.

*Yes it is possible to block the ads I just tried it myself https://www.reddit.com/r/uBlockOrigin/comments/nrivwk/ad_supported_hbo_max/h54pz1s/",pihole,1645409496.0
11242,comment,7,hxsa52r,,"I just fired up hbo max on my shield and watching key and peele there are no ads. I also get my hbo max from att internet.

I didn't even know there was ad supported hbo max.",pihole,1645411869.0
11243,comment,17,hxrie9n,,"I know this means not using the Apple TV, but you can try watching on a computer using Firefox with an ad blocker like Ublock Origin installed. That blocks Hulu and YouTube and Pandora ads in my experience.",pihole,1645398927.0
11244,comment,11,hxro51a,,"The way PiHole works is that it blocks certain ip addresses or ads domains ( ads.website.com or videoads.com for example ) from a Blocklist.
The ads served on YouTube are hosted on YouTube themselves so the only way of blocking them is by changing the content of the page and removing the ad before the original video loads, same for other services like HBO or Hulu. 
You need an AD-blocker for that",pihole,1645401506.0
11245,comment,7,hxrp986,,I've been successful at blocking ads on IMDb.  Took a few weeks watching stuff and then watching the query log and blocking things.,pihole,1645402012.0
11246,comment,2,hxtcyil,,Wait so is HBOMax free or something? How can they charge you and shove ads down your throat?,pihole,1645436687.0
11247,comment,4,hxrhjvo,,"i dont think so, same as it can’t block ads on hulu",pihole,1645398549.0
11248,comment,-11,hxriqzp,,Pinhole can’t even block YouTube ads 😂,pihole,1645399086.0
11249,comment,1,hxs83te,,It does for me.,pihole,1645410893.0
11250,comment,1,hxuvbu7,,Anything can be blocked all you need to do is time when an add is going to play or inspect the element to find the ad servers domain. Then simply add it to the blocked list.,pihole,1645465870.0
11251,comment,1,hy99qoi,,"Just curios. I've never seen any ads on HBO Max. I get my subscription via AT&T Fiber. I stream HBOMax through all my devices (laptop, mobile, RokuTV) and yet to see a single ad. Am I the only one?",pihole,1645719541.0
11252,comment,-7,hxsow9m,,I’ve give up on pihole. It’s a failed experiment for me. I just use a computer with a browser and ublock now.,pihole,1645419500.0
11253,comment,7,hxrtarl,,you could also Airplay from a mac to the Apple TV. Not sure if the easiest way to do that with windows or Linux but I’m sure solutions exist.,pihole,1645403911.0
11254,comment,1,hxs8r34,,"How does it block Hulu?  

I thought pihole couldn’t do it because Hulu ads come from the same servers as the content.

Does Ublock Origin do something different?",pihole,1645411202.0
11255,comment,2,hxrtcza,,On the app? You have the ~~URLs~~ domains you blocked?,pihole,1645403940.0
11256,comment,-3,hxrquel,,"While cool and all, how's this relevant to OP's question?",pihole,1645402755.0
11257,comment,1,hxts8d1,,It’s like Hulu in which you can be a subscription for either a non-ad-free version or pay a more expensive subscription for ad-free TV.,pihole,1645448334.0
11258,comment,-6,hxrhltq,,Damn. Maybe I won’t try using PiHole then.,pihole,1645398574.0
11259,comment,13,hxrlcf5,,Try using a smaller pin,pihole,1645400250.0
11260,comment,7,hxt2n7d,,cool. the exit is over there...,pihole,1645428291.0
11261,comment,3,hxs9exk,,"Sorry for the confusion. I was talking about trying a computer and a browser with an ad blocker installed. When I watch Hulu that way, I get a warning to disable my ad blocker, but it disappears after a few seconds and loads my shows without ever showing an ad. I realize this doesn’t necessarily involve the Pi-hole, but I was just trying to help OP with their problem.",pihole,1645411523.0
11262,comment,6,hxs5csj,,">You have the URLs you blocked?

Domains. Pi-hole doesn't know what URLs are. It doesn't see anything past the first slash after the TLD.

`this-is-a.domain`

`this-is-a.domain/and/this/bit/is/a.url`",pihole,1645409596.0
11263,comment,10,hxrs3ay,,I think his intention was to share a method which may work for OP's issue.,pihole,1645403342.0
11264,comment,1,hy9anwu,,"Apparently this applies to Paramount Plus as well. If anyone has TMobile, you can get a free year subscription, but it's the ad-supported tier. Meh, it's free.",pihole,1645719882.0
11265,comment,4,hxrhthz,,"you might be able to but im not sure, ive not tried with hbo max",pihole,1645398669.0
11266,comment,-1,hxrzmzs,,"It’s still well worth it.  While it can’t block every ad out there, it does what other ad blockers can’t in that it blocks tracking and all the other dirty data these companies collect and it does it through your whole home.",pihole,1645406897.0
11267,comment,3,hxrrei1,,Heyooooooo,pihole,1645403019.0
11268,comment,1,hxtunv2,,"Isn’t the URL the full thing, and not just the latter part?",pihole,1645449789.0
11269,comment,4,hxrzc56,,Exactly.   I would watch movies and every time an ad would show I would look at the query log and block what came across.   So now when I watch imdb I get a black screen where the ad would have been momentarily and then back to the movie.,pihole,1645406754.0
11270,comment,-9,hxrhvph,,[deleted],pihole,1645398696.0
11271,comment,5,hxs53ca,,">it does what other ad blockers can’t in that it blocks tracking and all the other dirty data these companies collect

This is incorrect. Perhaps wildly so.

Content aware blockers are perfectly able to do so, many do do so, are in fact in a much better position to do so, and significantly more capable of doing so.

Pi-hole, or any other filtering nameserver, has no idea what an ad, a tracker, 'dirty data', or any content at all is. Pi-hole resolves IPs to domains and vice versa, and that's basically the extent of it.

Pi-hole has no idea if you ever even visit a domain after having resolved it. It sees exactly zero data outside of DNS exchange, and optionally DHCP broadcast.",pihole,1645409471.0
11272,comment,3,hxuus3m,,"To give you a better understanding. 
A url is broken up into segments. 

EG: https://example.com/thisIsAPage 

http(s):// —> is the protocol. 
example.com —> the domain/host 

/thisIsAPage —> this is called the URI 

All together when combined, it’s called the url.

PiHole doesn’t care about anything before and after the domain, it just wants the domain.",pihole,1645465663.0
11273,comment,5,hxrjtct,,"Unless they edited their comment after the fact, they didn't.",pihole,1645399559.0
11274,comment,5,hxrvjxl,,You do sound like an asshole,pihole,1645404980.0
11275,comment,2,hxrmzkw,,"i didnt say it doesnt, i said i didnt THINK it would, because ive never tried for hbo max. id still recommend a pihole though.",pihole,1645400987.0
11276,post,2,sx9v0g,"New router, old Pihole, something's not right","Changed from an Asus RT-AC1900P to a Netgear RAX45. I've actually been having problems for months but changing routers made it hit a wall. Few months back the pihole's effectiveness plummeted, only blocking maybe a third of what it had prior (without making any setting changes, maybe just a ph update) and now when I put the new router on, it's useless. blocks nothing. Same config, router is dhcp and dns pointing solely at the ph (router static pi ip .110 as it was before), but ... the router isnt doing what it's told? Acts like it's just bypassing the pihole and still doing its own dns regardless of the settings. WTH?? Additionally, even with the same conditional forwarding as was set and functional before, all queries show as the router ip, tho I'm pretty sure that is an issue that would be fixed by setting the pihole as dhcp as well. Any insight to this would be appreciated",pihole,1645387126.0
11277,comment,2,hxqthnv,,Check ipv6 and disable it if active on the new router.,pihole,1645388296.0
11278,comment,3,hxqx6nr,,"Doesn’t piHole work with IPv6 though. Still no harm in trying with it disabled if enabled (OP)

I think the OP might not have set the routers dns itself to point to the pihole device.",pihole,1645389864.0
11279,comment,3,hxr19d0,,"The problem is that most home admins do not care for the IPv6 network. So it does what it does and autoconfigures itself (without advertising Pihole. So if a client prefers to ask DNS via IPv6, Pihole does not see the traffic.",pihole,1645391595.0
11280,comment,1,hxr3fs0,,"certain that I've changed the setting for the dns. the router defaults to some auto mode for dns, disabling gives me access to the greyed out dns 1 and 2 options, both set to [192.168.1.110](https://192.168.1.110). I have however pretty much ignored anything to do with IPv6, I'll have to give that a look",pihole,1645392517.0
11281,comment,1,hxr379r,,">>> The problem is that most home admins do not care for the IPv6 network.

That makes sense, I’m a full blown SysAdmin, Web developer, tech neeerrrrd. So I setup everything. Lol I legit checked my pihole, I thought I was tripping when I recalled setting up IPv6 for my pihole. 🧐😅😂🤣🤦‍♂️

>>> So it does what it does and autoconfigures itself (without advertising Pihole. So if a client prefers to ask DNS via IPv6, Pihole does not see the traffic.

100%, the router could also be requesting the ISPs dns if the OP never removed that from the dns entries. 

I don’t think the OP replied to any comments yet.",pihole,1645392417.0
11282,comment,1,hxriymk,,">So if a client prefers to ask DNS via IPv6, Pihole does not see the traffic.

Change WAN DNS to Pi-hole. Problem solved.",pihole,1645399180.0
11283,comment,1,hxr4wo5,,">>> router defaults to auto mode for dns…

That would be falling back to your ISP dns (most likely). 

Disable it and those 2 inputs the show up for DNS1 & DNS2

Only use the first input DNS1 set it to —> 192.168.1.110 and leave the DNS2 blank. If you have another DNS server then you can add it or a good fallback DNS would be 1.1.1.1 for DNS2. 

Let’s say your pihole fails and is offline. That still enables everyone on your network to have internet access because it’s unable to query 192.168.1.110 it then falls to cloudflares private & secure DNS —> 1.1.1.1 

FYI: if and when the pihole comes back online it would first query DNS1 instead of querying DNS2. They always go in order no matter the circumstances. 

For your IPv6. There should be an option to disable it and only query using IPv4 dns queries. 

In all honesty IPv6 is new and all but most of the internet hasn’t even moved over yet, there’s no need to worry about it as of now. The moment you can’t access websites because it’s only IPv6 would be quite rare as most sysadmins would setup both IPv4 and IPv6 for their servers.

EDIT: hope this helps and works. Theoretically it should work.",pihole,1645393133.0
11284,comment,1,hxryddv,,"I've been out a bit. Just looking thru the router settings now, IPv6 is disabled, pihole is only checked on ipv4, and the auto dns when on is pointing to [75.75.75.75](https://75.75.75.75) but was deselected and had [192.168.1.110](https://192.168.1.110) (pi) on dns1 when I was trying to get it to work. At the moment I just pulled the pi off the network and put it back to auto as I didnt have the time to tinker with it but I figure I'll probably just flush it and start over and see if that makes a difference.",pihole,1645406305.0
11285,comment,1,hxrzv6r,,"Odd, 

I’ll have a look at your routers manual online when I’m back at the PC. 

If you need some assistance , drop me a DM when you busy with it and I can assist you with setting up the pihole to run the DNS and DHCP configurations and then configure the router to point everything to it. 

If you don’t mind. Could you send me a picture of your router lol.

EDIT: is this your router https://www.netgear.com/home/wifi/routers/rax45/",pihole,1645407007.0
11286,comment,1,hxsgjob,,"Yeah, that's the one. Costco special, 70 off so it was only 130. Been a good piece so far with far better range than my last, aside for seemingly not being able to truly redirect all dns queries. To be fair tho I'm new to Linux/pi/networking specifics so it could absolutely be a pebkac situation",pihole,1645415015.0
11287,comment,1,hxspynn,,"Welp. Success? I don't know. I flushed it all. Flashed the pi with a TwisterOS image, installed pihole, failed, tried again and it worked. Set pi to a static ip on the router of .1.2, changed the dhcp to .3-.255 on the router, power cycled, then signed in and configured the hole. Ads blocked. I still don't have any device names showing on the pihole, it all comes from .1.1, but some day I'll figure it how to assign the ip on the pi and switch the dhcp to the hole but that's probably not tonight.

It's a different os than was on it but that shouldn't matter. All settings are effectively the same with just a new pi ip. No idea what did it.

Thanks for the assist tho!",pihole,1645420111.0
11288,comment,1,hxtvdug,,No stress,pihole,1645450200.0
11289,comment,1,hxtvyx8,,"Cool cool. It’s around 6:30AM for me. Will get back to you after work. 

Possible will have you re install a correct os. You don’t need a desktop environment, it’s just using resources that you never going to use. 

Will walk you through installing Ubuntu-Server. Could you download the latest Ubuntu-server iso so long. 

What I’ll do is setup Ubuntu-server, update the apt packages, setup ssh, setup static IP for the pi, then install pihole with recursive dns (unbound). That is the correct method of installation. 

Download iso: https://ubuntu.com/download/server

Download 20.04.3 LTS",pihole,1645450524.0
11290,comment,2,hxv98j4,,"Really appreciate it but we're good for now. Originally I used the pi for a game emulator, thus twister because everything i need is there. Pihole actually worked great on it behind the emulators. Problems only happened after I changed some things and put it back to Raspbian a while back. Probably totally unrelated I'm sure but, what worked before seems to be working again. Should that change I'll let you know!",pihole,1645471332.0
11291,comment,1,hxx06um,,"Not a problem at all. 

Hope it continues to work as it should.",pihole,1645498220.0
11292,post,7,sx80p6,Questions from an Xfinity user.,"After spending a couple of hours setting up my pi hole I regretfully learned that my Xfinity gateway won't allow me to assign a primary DNS. So I've decided to buy a router in order to circumnavigate the problem in bridge mode.

Does anyone have any recommendations for modems that would be compatible that I may want to consider buying? I'm trying to keep things as fast as possible obviously but I was also wondering if an already built in solution exists.

In other words, are there any solutions out there in which I could simply buy my own modem that would have a sinkhole built in?

I'd be curious to hear from any other Xfinity customers as well that may have resolved this issue. Any answers would be appreciated.",pihole,1645382359.0
11293,comment,5,hxqikeg,,"my ISP does not allow me to assing a DNS in the router config, the way around this, is just deactivating the DHCP on the router (that's allowed) and using the Pihole DHCP, that will deliver all clients on the network an IP specified by pihole, and also, the same instance of pihole as a DNS, if pihole does not have the address, it will hand it to whatever your ISP is using as DNS",pihole,1645383708.0
11294,comment,3,hxqg5ks,,"Built in? I'm not aware of any. If you have a router, just get a modem compatible with Xfinity, and run pihole on a computer on your LAN, then assign it as primary DNS in your router setup. I have Xfinity and I use a Netgear CM1000v2 and it works great with my Netgear R6230 router. I have no issues running Pihole. I also use Wireshark as a VPN server to use my Pihole as my primary DNS on my phone when I am outside of my LAN.",pihole,1645382717.0
11295,comment,3,hxqz9ye,,[deleted],pihole,1645390753.0
11296,comment,3,hxsoae2,,"See if your comcast gateway allows you to set the DHCP range. Set the dhcp range to 1 IP (the one of Pi-hole). 

Then, use the Pi-hole as the DHCP server. 

https://discourse.pi-hole.net/t/disabling-dhcp-on-my-router-causes-no-internet-connection/25013/3?u=ramset

Comcast does not charge you equipment fee if you own the router/gateway.",pihole,1645419151.0
11297,comment,1,hxrqzdu,,"Others have said similar, I use the XFI modem and my own router. 

I bought the router years ago when the modem I had from them wasn't even a wifi modem and set my home network up on it - the advantage was that I had total control over my network.

I'm now three modems later and the best part is, I don't have to change anything when I get a new modem, I just swap and have faster internet speed. You can also get a lot more advanced features from an after market router versus what they give you in the app (esp if you run a feature filled open source platform like OpenWRT).",pihole,1645402820.0
11298,comment,3,hxqxhyr,,"From what I understand thus far, Xfinity is a real pain because it won't allow you to even turn off dhcp. I could put it into bridge mode as a workaround but then I'm told my whole network would be vulnerable unless I have a separate router as a buffer.",pihole,1645389998.0
11299,comment,1,hxqxsdd,,This is great advice thought it's a lot to unpack for me since I'm very inexperienced with this kinda stuff. I didn't even know that my phone could benefit outside of my home.,pihole,1645390120.0
11300,comment,-1,hxr0jfa,,[deleted],pihole,1645391290.0
11301,comment,1,hxrcl9r,,"One really good reason to buy your own modem is to not have to pay xfinity to rent their modem.

I use my own modem and my own router.",pihole,1645396394.0
11302,comment,1,hxu2sgl,,I'll give it a shot.,pihole,1645454042.0
11303,comment,1,hxrstab,,Thanks. I'll definitely look into it.,pihole,1645403683.0
11304,comment,3,hxqzmiq,,">it won't allow you to even turn off dhcp

that's really a pain

&#x200B;

bridge mode + personal router is a good choice, the xfinity modem will ""give internet"" to your router, and all network management is done there, so your network starts at your gateway, unless they are also a pain and their brigde mode is not really a bridge",pihole,1645390901.0
11305,comment,2,hxr7pep,,"It's only a pain if their hardware is all you have for network management. With your own hardware, which is essentially step one of any sensible home network, you don't care what their hardware is doing at all. Their hardware provides a single address to your router, and that's all.       
Step two is replacing their hardware altogether with your own modem, and it further removes their control and presence from your home.",pihole,1645394320.0
11306,comment,2,hxr6ohx,,Be sure you buy one that uses DOCSIS 3.1 (not older 3.0).,pihole,1645393886.0
11307,comment,2,hxr7ynt,,"It's really very easy to do. Comcast provides information on their site about the compatible modems. You buy it, swap it out, and it typically sets itself up. You then forget it's even there.",pihole,1645394430.0
11308,comment,3,hxr76hs,,"So much bullshit here.   
    
>Comcast actually charges customers who use their own modem MORE!!!    
    
No. Your own link says that *in some test markets* customers have *reportedly* received free unlimited data with their Comcast modem. This *potentially* saves those customers from the overage fees that they charge in *some* markets *after* going over the monthly cap *multiple* times.    
      
So IF you are one of the very few people who require an unlimited data plan, and IF they provided the unlimited data with the modem rental, *then* yes, paying the $180 per year modem rental fee is less than the data cap overage fee.    
Unequivocally stating ""Comcast actually charges customers who use their own modem MORE!!!"" is absolute bullshit fear mongering propaganda.     
     
>Once every 2 years I take my Xfinity modem down to my local Xfnity store and they give be a new one for free.    
     
No you are not. You're paying THREE HUNDRED AND SIXTY DOLLARS for that modem. A modem for which an equivalent has a retail price of around 150. Three hundred and sixty dollars is *NOT* ""free"".    
    
>facts are facts. The Xfinity modem is superior to any 3rd party modem you can buy.    
    
You are apparently under the mistaken impression that your opinions are facts. ""Superior"" is subjective. Not a fact.    
     
I bought [this Motorola MB8600 DOCSIS 3.1, 1Gbps modem](https://www.amazon.com/dp/B0723599RQ) for 158 bucks in 2018. I've been getting gigabit speeds out of it ever since. That maxes out most all standard residential grade networking equipment. A Comcast modem could not possibly make my network any faster, no matter what hardware it has.    
    
In that time, you would have been paying your 15 bucks per month for the privilege of having them own the hardware.     
     
Your cost since 2018:  12x15x5= NINE HUNDRED DOLLARS.    
My cost: $158.   
    
You think it's ""superior"" to pay over SEVEN HUNDRED DOLLARS for NOTHING?",pihole,1645394097.0
11309,comment,1,hxr9r4a,,I appreciate it but with all do respect... You kinda sound like you work for Xfinity.,pihole,1645395194.0
11310,comment,1,hxrdso4,,[deleted],pihole,1645396901.0
11311,comment,1,hxrrkce,,"So can I prevent them from throttling my speeds if I have my own modem? 
I'd also be curious to hear what are some of the things they have control of that I may preferably want in my hands.",pihole,1645403095.0
11312,comment,1,hxrsl38,,Thank you for your product link and deconstruction.,pihole,1645403579.0
11313,comment,1,hxrcynk,,[deleted],pihole,1645396550.0
11314,comment,1,hxrnmsf,,"What do you mean? I've been an xfinity user for a long time, as well. All you need to do is buy a compatible modem and use your own router. Unless I'm not understanding what you are getting at.",pihole,1645401276.0
11315,comment,2,hxt9pke,,"They can control the speed, since they're the source.   
I don't think Comcast does that, though. The only reason I can think of why they would is if you went over some kind of cap, but most plans have fine print that say they'll just charge you per gig when you go over the limit. It's in their best interest to keep you at full speed, so I doubt they'd do that.   
Why do you ask? Poor speeds? That's more than likely something unintentional rather than throttling.",pihole,1645433963.0
11316,comment,1,hxrev8r,,Good advice.,pihole,1645397365.0
11317,comment,1,hxrrrp3,,[deleted],pihole,1645403191.0
11318,comment,1,hxrshky,,"I had a data cap before switching to my own modem. Not sure why you seem to think having your own modem bypasses that, it doesn't. There are areas that were not immediately put under a data cap.

The data speed issue you are talking about doesn't make sense, either. If you have a docsis 3.1 cable modem, today, you'll get very fast speeds. If you are doing something like 2/2.5 Gbit then yes, you may want to stick with the xfinify cable modem until more higher speed modem options are available.

I didn't ask you a question to argue, you don't have to spoon feed me.

Nothing wrong with renting the modem, there are pros/cons to renting vs buying your own.",pihole,1645403532.0
11319,post,2,sx7dau,Can I only use the DNS over HTTPS stuff without the adblocker part?,"I've thinking of using a Pi-Hole recently, but because I already have device-level adblockers on my phone and laptop (and other factors) I thought I might not need that; I only need it to get around a ISP-level DNS poisoning, thus using only the DNS over HTTPS part. Can I do that?",pihole,1645380638.0
11320,comment,6,hxqmmgk,,"You could do this but why? 

You’re adding complexity to bypass a feature so that something blocked can get to your device to be blocked. 

Just let pihole block what it can and let your device level blocking be a secondary level.",pihole,1645385402.0
11321,comment,3,hxqu3pn,,The answer is yes. You do not have to block anything. Your reasoning doesn’t matter.,pihole,1645388554.0
11322,comment,3,hxqv13e,,"Just use ""cloudflared""",pihole,1645388950.0
11323,comment,2,hxqmutf,,"You don't need to use any blocklists with pihole. Thats the overwhelming most common use case, but no need to do it if you just want to do something else with it. There's no reason you can't just use it as a way to use cloudflared. Set it up in the same way, just remove any pihole blocklists

I mean all this being said, why not just configure your router to use a different DNS server such as cloudflare or Google DNS? Some routers even have using Cloudflare's DNS over https or TLS built in",pihole,1645385499.0
11324,comment,2,hxqo6a5,,"Device level ad blocking is one thing, DNS is another. I wouldn't go without any protection. 

You still should use some block lists. The defaults are fine.",pihole,1645386046.0
11325,comment,1,hxqbe0a,,Running unbound with an empty blocklist?,pihole,1645380785.0
11326,comment,1,hxqg1x2,,"Yes. Pi hole has a lovely feature where you can create groups of clients and then allocate specific lists to devices in those groups.

So, you could just not have any block lists active for the devices you have covered elsewhere. You might still want e.g. malware / phishing / privacy block lists for them, and you might still want ad blocklists for other devices like TVs, streaming devices and so on.",pihole,1645382675.0
11327,comment,1,hxs72hm,,"To be entirely clear, Pihole has no ""DNS over HTTPS part"". Pi-hole has zero concept of any encrypted transport standards.

You can point Pi-hole to a proxy/stub that does, if you'd like to. Pi-hole is not capable of this itself.",pihole,1645410408.0
11328,comment,2,hxt6yzz,,"> I mean all this being said, why not just configure your router to use a different DNS server such as cloudflare or Google DNS? Some routers even have using Cloudflare's DNS over https or TLS built in

Just an FYI why I do this: my ISP-supplied router actively locks the router PPPoE settings to prevent subscribers from messing with its settings. Additionally, as I mentioned, my ISP does an ISP-level DNS poisoning to further enforce this.",pihole,1645431699.0
11329,comment,1,hxqdcn0,,Could cloudflared work? I had that (too) in mind.,pihole,1645381574.0
11330,comment,1,hxr1y74,,"Cloudflared will put all outgoing dns traffic through HTTPS. So I'd say ""yes, it will do what you want"".",pihole,1645391887.0
11331,comment,1,hy3bxf5,,"You don't have to use cloudflared. You can install dnscrypt-proxy instead and choose from the public server list what you want to use - DoH, Dnscrypt, filtered etc. You run this in the same way as cloudflared with pihole using the one local proxy address as its upstream server.

There's some good tutorials out there, but the best one I've come across is [Derek Seaman's IT Blog](https://www.derekseaman.com/2019/09/how-to-pi-hole-plus-dnscrypt-setup-on-raspberry-pi-4.html)

Ultimately, if you want to encrypt your outbound DNS requests, you're not tied to Cloudflare.",pihole,1645619311.0
11332,post,1,sx6xf4,Unable to change Pi-hole Admin Panel port,"I'm trying to install Nextcloud on the same RPi4 as Pi-hole, and I'm in the process of changing Pi-hole from port 80 to 81.

Following [this thread](https://www.reddit.com/r/pihole/comments/njsx56/comment/gz9659i/?utm_source=share&utm_medium=web2x&context=3), I was able to change the server port in *lighttpd.conf* & *external.conf*, but as soon as I restart the Pi or lighttpd service, the service stops working (error of not being able to start) and of course can't access the admin panel via the default link or the modified with applied port.

How can I change the Pi-hole port from 80 to something else so I can add Nextcloud besides that? I'm planning on enabling HTTPS for the Nextcloud server later (can't figure out how to do this for a local only instance, since all tutorials show with a public domain), but now I can't figure out this seemingly small problem.

After testing it without changing the port, I can access both Pi-hole & Nextcloud via **192.168.1.60/admin/** or **192.168.1.60/nextcloud/**, but *lighttpd* and *apache2* don't work.

Any help appreciated!",pihole,1645379536.0
11333,comment,1,hxq9yse,,https://discourse.pi-hole.net/t/lighttpd-daemon-wont-start/44985/10,pihole,1645380210.0
11334,comment,1,hxr0omo,,"I would suggest putting those services (PiHole and nextcloud) on separate systems so they don't compete. 

You certainly can mix them, but it's more complicated and fragile. Separation keeps it simple and far easier to support, update and change in the future.",pihole,1645391351.0
11335,comment,1,hxqaejv,,"Unfortunately I have already read that thread and tried it, it doesn't change anything. I simply added ':' in front of the '=' symbol and it results to the same exact problem.

I have allowed the port through UFW too. The thread I linked has your reply with this link too, so I made sure to try that too.

EDIT: I will reproduce everything and show you paste the logs.",pihole,1645380384.0
11336,comment,1,hxqdje4,,"Here are the replications.

1. Changed the files like this

&#x200B;

    server.port                 := 81

2.  Allowed the port via UFW and reloaded the Firewall

3.  Restarted lighttpd service

    sudo service lighttpd restart

And then I get the following:

J*ob for lighttpd.service failed because the control process exited with error code. See ""systemctl status lighttpd.service"" and ""journalctl -xe"" for details.*

If I do ""systemctl status lighttpd.service"":

    lighttpd.service - Lighttpd Daemon
    Loaded: loaded (/lib/systemd/system/lighttpd.service; enabled; vendor preset: enabled)
    Active: failed (Result: exit-code) since Sun 2022-02-20 20:20:51 EET; 1min 55s ago
    Process: 2661 ExecStartPre=/usr/sbin/lighttpd -tt -f /etc/lighttpd/lighttpd.conf (code=exited, status=255/EXCEPTION)
    
    
    Feb 20 20:20:51 rpi-void systemd[1]: lighttpd.service: Service RestartSec=100ms expired, scheduling restart.
    
    Feb 20 20:20:51 rpi-void systemd[1]: lighttpd.service: Scheduled restart job, restart counter is at 5.
    
    Feb 20 20:20:51 rpi-void systemd[1]: Stopped Lighttpd Daemon.Feb 20 20:20:51 rpi-void systemd[1]: lighttpd.service: Start request repeated too quickly.
    
    Feb 20 20:20:51 rpi-void systemd[1]: lighttpd.service: Failed with result 'exit-code'.
    
    Feb 20 20:20:51 rpi-void systemd[1]: Failed to start Lighttpd Daemon.

5. If I do ""sudo /usr/sbin/lighttpd -tt -f /etc/lighttpd/lighttpd.conf""

    Duplicate config variable in conditional 0 global: server.modules
    
    2022-02-20 20:39:01: (configfile.c.1296) source: cat external.conf 2>/dev/null line: 28 pos: 21 parser failed somehow near here: (EOL)  
                                                                              
    2022-02-20 20:39:01: (configfile.c.1296) source: /etc/lighttpd/lighttpd.conf line: 68 pos: 14 parser failed somehow near here: (EOL)

If I change the port to :=81 on both files, or only the external.conf file, it will result to the same error. What exactly is the duplication here then?",pihole,1645381651.0
11337,comment,1,hxqgdqh,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1645382810.0
11338,comment,1,hxqgs24,,"Doing it right now.

Also please check the other reply I posted, it may help. Thank you!",pihole,1645382973.0
11339,comment,1,hxqi1bk,,"Unfortunately the Debug log looks too intrusive for my liking. There are parts of the log that I do not want to be viewed and therefore won't upload them.

If this is ok with you, I would love your assistance with the debug I post here manually. Hope you understand.",pihole,1645383487.0
11340,post,2,sx5gmp,pihole on hap ac3,Has anyone tried this before?  To put pihole on an hap ac3 from mikrotik? I have a spare one and wanted to see if anyone had been able to do this before.  Any help appreciated.,pihole,1645375708.0
11341,comment,1,hxyolub,,"I also have an ac3, ill be working on this as well soon. I'll post back here if I make any updates. Any reason why it shouldn't work though?  


I can't test it right now, but it should be, in Winbox:  IP-> DNS -> Add server (pi hole's IP).",pihole,1645537798.0
11342,comment,1,hxzf8hm,,I mean to wipe RouterOS off and put Linux on it with only pihole running,pihole,1645549058.0
11343,comment,1,hyjc6ld,,"It only has 128mb of storage if I am not mistaken, is that even possible?",pihole,1645896804.0
11344,post,3,sx4bav,Pi-hole with Unbound,I'm currently running Pi-hole and Unbound on the same instance of DietPi on a Raspberry Pi 4. All is working well. I could instead point Pi-hole to an instance of Unbound that is running on my OPNsense router. I'm just wondering if there's any real fundamental advantage to doing it one way vs the other.,pihole,1645372733.0
11345,comment,1,hxq1ki9,,"I’d guess it’s irrelevant, as it’s not important where the translation takes place.",pihole,1645376798.0
11346,comment,1,hxq2dwp,,It makes no difference,pihole,1645377128.0
11347,comment,1,hxs34zr,,"I point my instance back to pfsense unbound, but when I did this I had two instances of pi-hole so they shared the same cache, so if the main DNS went down the secondary would pick up right where it left off.",pihole,1645408547.0
11348,comment,2,hxtd5w1,,"Multiple Unbound instances sharing a singular hardbacked cache is quite possible, using the cachedb module, and a Redis database. Records retained in this layer of cache are always served with a TTL of 0, and are served optimistically. If an updated record is found (it's queried in parallel alongside serving the cached response), the cache item will be refreshed.

I have several Unbound instances that share a singular Redis database as their final tier of optimistic cache. The database is memory capped at 16MB, and evicts keys as required in a least recently used fashion. It's reasonably unlikely that either your pfsense or distribution provided Unbound binaries have support for the cachedb module compiled in, but building Unbound from source is trivial. I have armhf and aarch64 (full) builds of Unbound available on my GitHub (same username as here), along with some configuration fragments designed to be educational.

The end result of this is not only each Unbound instance sharing a central cache, but also that central cache surviving service and host restarts. The database operates from memory, and is backed by disk for persistence. A single 16MB database allows for a pool of approximately 20,000 records, which is definitely on the high side for what the average home user could expect to see pass through their network.

PM me or message me in this thread if you would like any more information, or have any questions about this.",pihole,1645436861.0
11349,post,1,sx2jbm,clients using router's IPv6 address for DNS,"I've just changed ISP (I'm now using AT&T).  The AT&T router doesn't let you specify a DNS server, so I've set up the pihole as DHCP server and turned off DHCP on the AT&T router.

IPv4 appears to work fine - the clients get the v4 address and queries go to the pihole and get expected responses.

However some ads that previously were getting blocked seem to be getting through, so when I investigated I saw that DHCP clients are getting the v4 address of the pihole but the v6 address of the router, so some of the queries are going to the router and those queries get ads.

I've tried turning `Enable IPv6 support (SLAAC + RA)` on and off, I've tried setting the router's v6 address in the `Custom 3 (IPv6)` box, I've tried to set the pihole's v6 address in `/etc/dhcpcd.conf` and  `/etc/pihole/setupVars.conf` but it doesn't seem to have any effect.  I've googled a lot but I'm not sure what I'm supposed to be doing.

I'm not sure if I'm using the correct v6 address for the pihole because `ip a` shows four v6 addresses and I'm not sure what to use.",pihole,1645367657.0
11350,comment,1,hxpgsvm,,"A lot of routers will only advertise themselves as the IPv6 DNS server.

To use the pi-hole, you go into the router settings and set the pi-hole address as the upstream DNS server, so the router relays all DNS queries to the pi-hole.

However, some ISP-supplied routers do not allow you to set custom DNS servers, so then you’ll have to set DNS servers manually on the client.",pihole,1645368000.0
11351,comment,1,hxqjta1,,"OK I've solved this using [this Discourse post](https://discourse.pi-hole.net/t/still-getting-ads-with-pihole-ipv6-to-blame/42229/3) \- basically the router is advertising itself as a DNS server (not using DHCP) and I can't turn it off, so I've disabled IPv6 on the LAN and it's fixed the problem.",pihole,1645384226.0
11352,comment,1,hxqi8dn,,I said in the question that the router doesn't let me set the DNS and I'm using DHCP to set the DNS settings on the client,pihole,1645383568.0
11353,comment,2,hxqk11c,,"Yes, but DHCP is only IPv4, with IPv6 the DNS servers are advertised by the router. Pi-hole can advertise its own DNS server, but it cannot prevent the router from sending its own.

If your router has been locked down by the ISP and you can’t set custom DNS servers, you’ll have to set DNS manually on the clients, or get another router.",pihole,1645384317.0
11354,post,1,sx25si,Is my Unbound really resolving recursively here?,"This is not strictly a Pi-Hole issue but thought I'd post here. Have already tried searching for this particular issue but no results. 

I've been running Pi-Hole and Unbound for about 9 months now, on a Pi 4 1GB (IP: 192.168.0.128) and Pi Zero w with a USB ethernet adapter (IP: 192.168.0.199). Both are on Raspberry Pi OS and set as DNS servers on my router's DHCP settings for redundancy. I also have a spare Pi 4 2GB that was not in use until I set it up for troubleshooting as below. 

A few days ago I tried to update my Pi Zero from Buster to Bullseye and ran into some issues so I decided to do a fresh reinstall. I downloaded the latest RPi OS Lite, installed it together with Pi-Hole and Unbound [following the official instructions](https://docs.pi-hole.net/guides/dns/unbound/). However when I use the Pi Zero as a DNS, Pi-Hole keeps showing a SERVFAIL error, like this: 

    Feb 20 19:26:58 dnsmasq[920]: query[AAAA] 1.debian.pool.ntp.org from 127.0.0.1
    Feb 20 19:26:58 dnsmasq[920]: forwarded 1.debian.pool.ntp.org to 127.0.0.1#5335
    Feb 20 19:26:58 dnsmasq[920]: reply error is SERVFAIL
    Feb 20 19:26:58 dnsmasq[920]: forwarded 1.debian.pool.ntp.org to 127.0.0.1#5335
    Feb 20 19:26:58 dnsmasq[920]: reply error is SERVFAIL
    Feb 20 19:26:58 dnsmasq[920]: query[A] 1.debian.pool.ntp.org from 127.0.0.1
    Feb 20 19:26:58 dnsmasq[920]: forwarded 1.debian.pool.ntp.org to 127.0.0.1#5335
    Feb 20 19:26:58 dnsmasq[920]: forwarded 1.debian.pool.ntp.org to 127.0.0.1#5335
    Feb 20 19:26:58 dnsmasq[920]: query[AAAA] 1.debian.pool.ntp.org from 127.0.0.1
    Feb 20 19:26:58 dnsmasq[920]: forwarded 1.debian.pool.ntp.org to 127.0.0.1#5335
    Feb 20 19:26:58 dnsmasq[920]: reply error is SERVFAIL
    Feb 20 19:26:58 dnsmasq[920]: forwarded 1.debian.pool.ntp.org to 127.0.0.1#5335
    Feb 20 19:26:58 dnsmasq[920]: reply error is SERVFAIL
    Feb 20 19:26:59 dnsmasq[920]: query[A] functional.events.data.microsoft.com from 192.168.0.108
    Feb 20 19:26:59 dnsmasq[920]: forwarded functional.events.data.microsoft.com to 127.0.0.1#5335
    Feb 20 19:26:59 dnsmasq[920]: forwarded functional.events.data.microsoft.com to 127.0.0.1#5335
    Feb 20 19:26:59 dnsmasq[920]: query[AAAA] functional.events.data.microsoft.com from 192.168.0.108
    Feb 20 19:26:59 dnsmasq[920]: forwarded functional.events.data.microsoft.com to 127.0.0.1#5335
    Feb 20 19:26:59 dnsmasq[920]: reply error is SERVFAIL
    Feb 20 19:26:59 dnsmasq[920]: forwarded functional.events.data.microsoft.com to 127.0.0.1#5335
    Feb 20 19:26:59 dnsmasq[920]: reply error is SERVFAIL

I also get a SERVFAIL error if I try a dig on the Pi Zero: 

    lhwj@rpi0w:~ $ dig pi-hole.net @127.0.0.1 -p 5335
    
    ; <<>> DiG 9.16.22-Raspbian <<>> pi-hole.net @127.0.0.1 -p 5335
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: SERVFAIL, id: 1104
    ;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1
    
    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 1232
    ;; QUESTION SECTION:
    ;pi-hole.net.                   IN      A
    
    ;; Query time: 0 msec
    ;; SERVER: 127.0.0.1#5335(127.0.0.1)
    ;; WHEN: Sun Feb 20 19:38:52 +08 2022
    ;; MSG SIZE  rcvd: 40

I kept getting this error even after many fresh reinstalls of RpiOS and even when trying the same thing on the spare Pi4 **2GB** ([192.168.0.106](https://192.168.0.106)). But Pi-Hole would work fine if I selected a third party DNS like Cloudflare instead of Unbound, so it's obviously an Unbound issue. 

After some researching I decided to check the /etc/dhcpcd.conf file of my Pi 4 1GB (which was still working fine) for comparison. To my surprise, it showed: 

    interface eth0
            static ip_address=192.168.0.128/24
            static routers=192.168.0.1
            static domain_name_servers=208.67.222.222 208.67.220.220

Hmm it looks like OpenDNS has been the Pi 4's resolver all along. I don't think I set this when I did the installation 9 months ago. But despite this, any queries received by Pi-Hole should be resolved by Unbound recursively and not by the DNS servers listed in dhcpcd.conf, right? 

Now if I change the static DNS in dhcpcd.conf of the Pi Zero to Google, Clouldflare etc (or even to my Pi  1GB, 192.168.0.128), then Pi-Hole and Unbound would seem to work again, dig would show NOERROR, and changing it to [127.0.0.1](https://127.0.0.1) would cause it to fail again. However, when I set this Pi Zero or the Pi 4 1GB as the sole DNS in Windows and do a test at [dnsleaktest.com](https://dnsleaktest.com) and other DNS leak sites, it would show that my DNS is Google/Cloudflare/whatever I set in dhcpcd.conf instead of my own IP address, despite Unbound being set as the sole resolver in Pi-Hole. This to me seems that Unbound is getting its queries from the dhcpcd.conf listed servers rather than resolving recursively. 

Then I decided to install Ubuntu Server on the Pi4 2GB (192.168.0.106). Installed Pi-Hole and Unbound using stock settings. Both worked right away without the SERVFAIL error. If I set the Pi4 2GB now running Ubuntu set as the sole DNS in Windows, finally my own IP is showing on DNS leak test websites, which means Unbound is resolving recursively as it should be.

As a further proof that Unbound on my Pi Zero is using the DNS server in dhcpcd.conf, I set the Pi Zero's dhcpcd.conf DNS as [192.168.0.106](https://192.168.0.106) (my Pi4 2GB running Ubuntu) and did a [pi-hole.net](https://pi-hole.net) dig:

    lhwj@rpi0w:~ $ dig pi-hole.net @127.0.0.1 -p 5335
    
    ; <<>> DiG 9.16.22-Raspbian <<>> pi-hole.net @127.0.0.1 -p 5335
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 2670
    ;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1
    
    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 1232
    ;; QUESTION SECTION:
    ;pi-hole.net.                   IN      A
    
    ;; ANSWER SECTION:
    pi-hole.net.            300     IN      A       3.18.136.52
    
    ;; Query time: 89 msec
    ;; SERVER: 127.0.0.1#5335(127.0.0.1)
    ;; WHEN: Sun Feb 20 19:45:49 +08 2022
    ;; MSG SIZE  rcvd: 56

And when I check the Pi-Hole log in the Pi4 2GB, it does shows the query from the Pi Zero for the dig (note the time and IP address): 

    Feb 20 19:45:49 dnsmasq[904]: query[A] pi-hole.net from 192.168.0.199
    Feb 20 19:45:49 dnsmasq[904]: forwarded pi-hole.net to 127.0.0.1#5335
    Feb 20 19:45:49 dnsmasq[904]: reply pi-hole.net is 3.18.136.52
    Feb 20 19:45:49 dnsmasq[904]: query[A] pi-hole.net from 192.168.0.199
    Feb 20 19:45:49 dnsmasq[904]: forwarded pi-hole.net to 127.0.0.1#5335
    Feb 20 19:45:49 dnsmasq[904]: reply pi-hole.net is 3.18.136.52

With this setting I can also see other DNS queries made to Pi-Hole in the Pi Zero showing up in the Pi 4 2GB's Pi-Hole log as above. 

So my questions are, 

1. Why is Unbound in my new, stock RaspberryPi OS installations failing to work if I set the static DNS server in dhcpcd.conf as [127.0.0.1](https://127.0.0.1), and also 
2. Why is it resolving using the dhcpcd.conf servers and not recursively as it does in Ubuntu? 

I could just set a third party DNS server in dhcpcd.conf on the Pi Zero and be done with it, but I really want Unbound to work recursively as it should.",pihole,1645366515.0
11355,comment,5,hxpdyym,,"This forwarding configuration was installed by Bullseye through resolvconf.

Edit file `/etc/resolvconf.conf` and comment out the last line which should read:

    unbound_conf=/etc/unbound/unbound.conf.d/resolvconf_resolvers.conf

Delete the unwanted unbound configuration file:

`sudo rm /etc/unbound/unbound.conf.d/resolvconf_resolvers.conf`

restart unbound:

`sudo service unbound restart`",pihole,1645366589.0
11356,comment,2,hxpfrnk,,"Brilliant, Unbound is working recursively again! Thanks!",pihole,1645367509.0
11357,post,1,sx11dw,Why is the blocking % so low?,"I still get ads on 99% of sites. and only works on my host machine i set the static dns in my router

https://preview.redd.it/4juq5897nzi81.png?width=1440&format=png&auto=webp&s=1d5031eb28d72dd725c2e77f6d437d77612e7f97",pihole,1645362926.0
11358,comment,3,hxp7xr3,,"1. Check it you’re using pihole for ipv6
2. Do DNS leak test https://www.dnsleaktest.com/",pihole,1645363244.0
11359,comment,2,hxp9ex1,,"You can add more blocklist(s). 
See firebog, OISD.nl, …",pihole,1645364114.0
11360,comment,1,hxpa1r2,,"Check what DNS servers your devices are using. For example, on an iPhone: Settings -> WiFi -> i -> DNS Servers. If there’s other DNS addresses than the pi-hole, it’s not using it.",pihole,1645364471.0
11361,comment,1,hxpdlj9,,"After you made dhcp changes, did you renew the DHCP lease on all clients?",pihole,1645366396.0
11362,comment,2,hxpsm9g,,"Upvote for firebog. Put all greens, you will have around 300k domains and THEN you will have barely any ad.",pihole,1645373173.0
11363,comment,1,hxukuoe,,This is what I did. I removed all the other ones.,pihole,1645461755.0
11364,post,9,sx0fde,Pi-Hole - OPNSense,"Hello,

i am new in pi-hole, i use the pi-hole behind my OPNSense.

Set up in DHCPV4 the IP as DNS for my LAN.

I also made an Firewall rule for those interfaces, just possible to use this Ip-Adress of Pi-Hole for den DNS port.

I did the same for my VLAN- not worked, pi-hole drop following error:

 Ignoring query from non-local network 

&#x200B;

I went to settings and select ""respond to eth0"".

&#x200B;

Because of the Information under those setting, i am unsure if its unsafe for the pi-hole setting this? Do i need special Firewall rules by that?

&#x200B;

Thank you in advance. 

Greetings",pihole,1645360869.0
11365,comment,2,hxpdtam,,"This article may help:

https://pi-hole.net/blog/2021/09/30/pi-hole-and-opnsense/",pihole,1645366508.0
11366,comment,2,hxp8v75,,"It is safe. You're just telling Pi-hole that's it's OK to respond from queries from another subnet other than it's own. Also, I just set up one floating rule that allows all of my local clients to reach the Pi-hole IP on port 53. That may not be your use case but just something to consider.",pihole,1645363799.0
11367,comment,1,hxpe7zu,,"Thank you!
I really did not find that blog article.
I am not sure if it work like i want, using Unbound DNS on some other VLANs for VPN. 

I give it a try later on.
Keep you updated.",pihole,1645366717.0
11368,comment,1,hxpdp4a,,"Thank you for your answer!
Cannot set that floating rule, using a VPN on one VLAN as well. :)",pihole,1645366449.0
11369,post,47,swyewg,Should I point my rPi to use pihole (which is installed on the same rPi)?,"The stack is rPi (w/ dietpi), pihole and unbound. Nothing else.

The rPi is headless, no DE installed, just command line.

my resolv.conf is

    nameserver 127.0.0.1

my eth configuration on the dietpi is

https://preview.redd.it/o10d7on2tyi81.png?width=1001&format=png&auto=webp&s=523157ba8a06025df22735587bf425df45eb21cc

pihole seems to  be correctly configured with unbound

https://preview.redd.it/sx7113ydtyi81.png?width=485&format=png&auto=webp&s=48618b4509f3738f0bab6a37367b1ee2e0dc85b0

I don't have a dhcpcd.conf file configured (I don't have a dhcpcd.service)  
The pihole is working network wide with the pihole's IP set on the router.

Everything seems to work properly except the rPi seems it doesn't use the pihole

https://preview.redd.it/iat2i0kwryi81.png?width=982&format=png&auto=webp&s=6423742180efba24283dbe71a61c0b36a2cd31d9

Is there any reason to force the rPi to use the pihole as well? If yes, what am I doing wrong since it doesn't seem to use it?",pihole,1645353014.0
11370,comment,11,hxovgxr,,"If it is set on the router, you don't need to force your pi to use it. Just disconnect it from the network, reconnect it, and it should automatically set up the dns server properly",pihole,1645354127.0
11371,comment,1,hxqb6q7,,"Just a suggestion but is there perhaps a client that is called ""localhost"" or ""pi.hole"" which is generating queries? It might be that the raspberry is using pihole, it's just not naming itself with it's LAN-IP but with it's local IP of [127.0.0.1](https://127.0.0.1) as origin.",pihole,1645380701.0
11372,comment,-2,hxp2860,,When there is only Pi-Hole and Unbound running on the pi.... what do you expect the pi itself to use Pi-Hole with?,pihole,1645359476.0
11373,comment,1,hxoxrg3,,"That is what I thought, but still doesn't seem to set up the DNS properly.

I've tried to d/c from the network (for over 1 minute) and reconnect it again, I've restarted the rPI, I've restarted the router. Still the rPi  doesn't seem to fall under the pihole coverage.

I still have that rPi line in red in the network overview (I've also deleted it but appears after few seconds still in red)",pihole,1645356020.0
11374,comment,2,hxpjzc5,,"Pi-Hole?

Query goes:

Other computer on the LAN / Raspberry running PiHole --> PiHole --> Unbound --> Rootservers/Upstreams --> Authorative DNS server for the domain --> answer",pihole,1645369490.0
11375,comment,8,hxp81e0,,"Don't trust the line in red, try yourself and see if it works.

For example, add `google.com` to the blocklist, and from your rpi try to query `google.com` like this
```sh
nslookup google.com
```

it should tell you what the DNS server being used is. Also, it should return something like 0.0.0.0 or `Non-existent domain`

If yes, then congrats! Otherwise, maybe your server just isn't accepting DNS queries, so try
```sh
nslookup google.com 127.0.0.1
```
from the rpi.

If that doesn't work, either you didn't open port 53, or you didn't configure pihole well.",pihole,1645363304.0
11376,comment,0,hxpm2jj,,"Yes... I don't know what you think I'm getting at. If the PiHole never does anything on the internet besides DNS Queries, it will never show up as using PiHole, right?",pihole,1645370424.0
11377,comment,2,hxqo2l3,,"    root@pietas:~# nslookup google.com
    Server:         127.0.0.1
    Address:        127.0.0.1#53
    Name:   google.com
    Address: 0.0.0.0
    Name:   google.com
    Address: ::

I guess it's working then :D

Thank you for the help!",pihole,1645386004.0
11378,comment,1,hxppuey,,"I have a dynamic DNS which I use to setup PiVPN, but the queries from the no-ip updater aren't coming through either dnsmasq or pihole, so they appear in my upstream logs despite not seeing anything when using Pihole's tools.  

It seems that the only device who can't use Pihole by default, ironically, is the one running Pihole.  
If it was, the Pihole hosting device would break if Pihole breaks, preventing to repair Pihole... chicken and egg issue.",pihole,1645372032.0
11379,comment,2,hxqxwgi,,"No problem, glad that it works. Don't forget to remove google.com from your blocklist :)

By the way, you should try to write code or results like this for readability next time (with the backticks)

\`\`\`\
code\
\`\`\`\
It will display

```
code
```",pihole,1645390167.0
11380,comment,0,hxpuldc,,"Yep, it's not wise to find a way to force a device to use itself for connectivity, but the OP has nothing on there besides PiHole and Unbound as far as I could see, so this is a non-issue and what little the device is using (package updates I think) does not need Pi-Hole anyway... so I'm confused as to what the OP wants to accomplish.",pihole,1645373980.0
11381,comment,1,hxtbpvi,,fixed and thank you.,pihole,1645435639.0
11382,comment,1,hxqozhq,,"Hi,

to be honest I'm not trying to accomplish something, I'm trying to understand/learn.

In my head, if I set the pihole IP in the router, everything in my network (that uses the router) should be covered by the pihole.

In the WEB GUI the rPi itself doesn't look like it's using the pihole. My question is why?

1. have I installed the pihole wrongly?
2. have I configured badly / missed something?
3. do I have a problem that needs fixing?

As you said the rPi doesn't do anything except running the pihole/unbound and updating packages. If the rPi doesn't use the pihole, it that a problem? Hence my question SHOULD my rPi use the pihole installed in the rPi itself?

Hope this clarifies a bit :D",pihole,1645386390.0
11383,comment,0,hxqru77,,"Okay, so I did understand correctly :D 
First of all: it will not use it because it doesn't do anything that needs Pihole
Second: no, it should not. Because if it did, and Pihole died for some reason, the device itself could not work within your network, leaving the device inaccessible. If it became inaccessible, you could not fix Pihole, leaving you with a device that crashed but was not recoverable.",pihole,1645387593.0
11384,post,1,swvdsj,Errors with WireGuard full tunnel setup,"Hello,

Newbie here: After setting up pi hole on my raspb 4 (dhcp server) I decided to setup a full tunnel WireGuard vpn for ad blocking outside. 

After following [this guide](https://www.reddit.com/r/pihole/comments/bnihyz/guide_how_to_install_wireguard_on_a_raspberry_pi/), my phone is able to connect to the client, but I have no access to the internet or anything on my LAN. However, a little bit of data was being sent (~7 kb).

In the troubleshooting section of that tutorial, he says to run 
` sudo systemctl restart wg-quick@wg0 && pihole restartdns `
Doing that gave me the error: 

` Job for wg-quick@wg0.service failed because the control process exited with erro                                                                                                                   r code.
See ""systemctl status wg-quick@wg0.service"" and ""journalctl -xe"" for details. `

**Systemctl returns this:**

` ● wg-quick@wg0.service - WireGuard via wg-quick(8) for wg0

     Loaded: loaded (/lib/systemd/system/wg-quick@.service; enabled; vendor preset: enabled)

     Active: failed (Result: exit-code) since Sun 2022-02-20 01:48:54 EST; 38s ago
       Docs: man:wg-quick(8)
             man:wg(8)
             https://www.wireguard.com/
             https://www.wireguard.com/quickstart/
             https://git.zx2c4.com/wireguard-tools/about/src/man/wg-quick.8
             https://git.zx2c4.com/wireguard-tools/about/src/man/wg.8
    Process: 1239 ExecStart=/usr/bin/wg-quick up wg0 (code=exited, status=127)
   Main PID: 1239 (code=exited, status=127)
        CPU: 139ms

Feb 20 01:48:54 raspberry4 wg-quick[1239]: [#] ip link add wg0 type wireguard

Feb 20 01:48:54 raspberry4 wg-quick[1239]: [#] wg setconf wg0 /dev/fd/63

Feb 20 01:48:54 raspberry4 wg-quick[1239]: [#] ip -4 address add 10.9.0.1/24 dev wg0

Feb 20 01:48:54 raspberry4 wg-quick[1239]: [#] ip link set mtu 1420 up dev wg0

Feb 20 01:48:54 raspberry4 wg-quick[1239]: [#] iptables -A FORWARD -i wg0 -j ACCEPT; iptables -A FORWARD -o wg0 -j ACCEPT; i>

Feb 20 01:48:54 raspberry4 wg-quick[1273]: /usr/bin/wg-quick: line 295: iptables: command not found

Feb 20 01:48:54 raspberry4 wg-quick[1239]: [#] ip link delete dev wg0

Feb 20 01:48:54 raspberry4 systemd[1]: wg-quick@wg0.service: Main process exited, code=exited, status=127/n/a

Feb 20 01:48:54 raspberry4 systemd[1]: wg-quick@wg0.service: Failed with result 'exit-code'.

Feb 20 01:48:54 raspberry4 systemd[1]: Failed to start WireGuard via wg-quick(8) for wg0.
lines 1-23/23 (END)
`



**Journalctl-xe returns this:**

`Feb 20 01:48:54 raspberry4 wg-quick[1239]: [#] ip link set mtu 1420 up dev wg0

Feb 20 01:48:54 raspberry4 wg-quick[1239]: [#] iptables -A FORWARD -i wg0 -j ACCEPT; iptables -A FORWARD -o wg0 -j ACCEPT; iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE

Feb 20 01:48:54 raspberry4 wg-quick[1273]: /usr/bin/wg-quick: line 295: iptables: command not found

Feb 20 01:48:54 raspberry4 wg-quick[1239]: [#] ip link delete dev wg0

Feb 20 01:48:54 raspberry4 systemd[1]: wg-quick@wg0.service: Main process exited, code=exited, status=127/n/a

░░ Subject: Unit process exited

░░ Defined-By: systemd

░░ Support: https://www.debian.org/support
░░

░░ An ExecStart= process belonging to unit wg-quick@wg0.service has exited.

░░

░░ The process' exit code is 'exited' and its exit status is 127.
Feb 20 01:48:54 raspberry4 systemd[1]: wg-quick@wg0.service: Failed with result 'exit-code'.

░░ Subject: Unit failed

░░ Defined-By: systemd

░░ Support: https://www.debian.org/support

░░

░░ The unit wg-quick@wg0.service has entered the 'failed' state with result 'exit-code'.
Feb 20 01:48:54 raspberry4 systemd[1]: Failed to start WireGuard via wg-quick(8) for wg0.

░░ Subject: A start job for unit wg-quick@wg0.service has failed

░░ Defined-By: systemd

░░ Support: https://www.debian.org/support

░░

░░ A start job for unit wg-quick@wg0.service has finished with a failure.

░░

░░ The job identifier is 1460 and the job result is failed.

Feb 20 01:48:54 raspberry4 sudo[1236]: pam_unix(sudo:session): session closed for user root

Feb 20 01:49:13 raspberry4 sudo[1286]:       pi : TTY=pts/0 ; PWD=/home/pi ; USER=root ; COMMAND=/usr/bin/ls

Feb 20 01:49:13 raspberry4 sudo[1286]: pam_unix(sudo:session): session opened for user root(uid=0) by pi(uid=1000)

Feb 20 01:49:13 raspberry4 sudo[1286]: pam_unix(sudo:session): session closed for user root

Feb 20 01:49:28 raspberry4 sudo[1289]:       pi : TTY=pts/0 ; PWD=/home/pi ; USER=root ; COMMAND=/usr/bin/ls systemctl status wg-quick@wg0.service

Feb 20 01:49:28 raspberry4 sudo[1289]: pam_unix(sudo:session): session opened for user root(uid=0) by pi(uid=1000)

Feb 20 01:49:28 raspberry4 sudo[1289]: pam_unix(sudo:session): session closed for user root

Feb 20 01:50:01 raspberry4 CRON[1298]: pam_unix(cron:session): session opened for user root(uid=0) by (uid=0)

Feb 20 01:50:01 raspberry4 CRON[1299]: (root) CMD (   PATH=""$PATH:/usr/sbin:/usr/local/bin/"" pihole updatechecker local)

Feb 20 01:50:01 raspberry4 CRON[1298]: pam_unix(cron:session): session closed for user root

Feb 20 01:50:14 raspberry4 sudo[1324]:       pi : TTY=pts/0 ; PWD=/home/pi ; USER=root ; COMMAND=/usr/bin/wg

Feb 20 01:50:14 raspberry4 sudo[1324]: pam_unix(sudo:session): session opened for user root(uid=0) by pi(uid=1000)
lines 3401-3441/3441 (END)`


I know this is a beefy post, but any help would be much appreciated",pihole,1645340939.0
11385,comment,2,hxomk0u,,"I have had this setup for a long time. Works great but I used pivpn for setup of WireGuard. Much, much easier, it even includes QR code generation for setup of the clients (eg iPhone). It is aware of Pi-hole as well.",pihole,1645346938.0
11386,comment,2,hxopp1o,,"> iptables: command not found

seems like you're missing iptables(-nft). Install it with `sudo apt install iptables` and try again after a reboot.",pihole,1645349415.0
11387,comment,1,hxrawfg,,Reason I followed that tutorial is because pivpn returned the same error so I uninstalled it,pihole,1645395676.0
11388,comment,1,hxrb509,,"Thanks! Quick question, where do I go after the reboot? Do I reinstall the whole setup, retry troubleshooting, or smth else",pihole,1645395777.0
11389,comment,1,hxrlb11,,"You shouldn't have to reinstall anything, the iptables error should be gone. So if your setup is correct otherwise, it should just work.",pihole,1645400232.0
11390,post,22,swoy3f,"Error while trying to run a curl, might be related to pihole"," I'm trying to run this following command in my raspberry pi (not the one with the pihole installed):

curl -sfL [https://get.k3s.io](https://get.k3s.io/) | K3S\_KUBECONFIG\_MODE=""644"" sh -s -

But I'm getting this message: curl: (7) Failed to connect to github.com port 443: No route to host

After that I tried to ping github.com in my windows PC, and I'm getting request timed out.

I can connect to the github website normally on my phone and computer. Also cloning, pull and push works fine.

I don't know if it can be something related to the fact I'm using pihole.

I'm thinking it might have to do with pihole bc months ago I did the same configuration but it worked, before I installed the pihole.",pihole,1645319334.0
11391,comment,7,hxnd839,,"If you do `nslookup github.com` or `dig +short github.com`, and then ping the resulting IP you receive in the answer and it still times out, DNS isn't your problem.

Example [here](https://imgur.com/a/hzo2g3j).",pihole,1645319701.0
11392,comment,1,hxo5eqm,,Are you using a VPN service provider?,pihole,1645334489.0
11393,comment,1,hxpbv4e,,"Try to do exactly what the script is doing to narrow down the problem. It looks like they build the url based off a few parameters. It could be that there isn’t a binary built readily for the raspberry pi or something else is going on. Based off the other comments, network doesn’t setup doesn’t seem to be the issue.",pihole,1645365473.0
11394,comment,1,hxplpfq,,"I don't know what happened yesterday, but nothing was working. All of sudden, two SD cards that were broken, started to work again.

The same with the github, all of sudden it's working and I was able to create my cluster with all 3 nodes working as expected.

Thank you all for the help!",pihole,1645370269.0
11395,comment,1,hxndwtu,,"Thank you for the help! I did the nslookup and the result was [20.201.28.151](https://20.201.28.151).

I tried to do ping [20.201.28.151](https://20.201.28.151) and it was the same result, request timed out.

I also tried changing my PC dns to [8.8.8.8](https://8.8.8.8) just to check but the result was the same.

Could it be something related to my ISP?",pihole,1645320043.0
11396,comment,1,hxo5gul,,"No, it's all default configuration",pihole,1645334525.0
11397,comment,4,hxnoglb,,">I also tried changing my PC dns to 8.8.8.8 just to check but the result was the same.

Ok. So this indeed confirms that the issue is neither Pi-hole nor DNS related. It appears that there's some breakdown in your routing, but it's not immediately clear whose fault it is, whether it's yours, your ISP's, Github's, Github's ISP's, or something else entirely.",pihole,1645325296.0
11398,comment,1,hxnfoky,,Could you have gotten IP-banned somehow? They do that if you're doing something like cloning hundreds of repositories a minute.,pihole,1645320917.0
11399,comment,2,hxnq9vx,,"I don't think it's something related to my ISP or pihole anymore, I downloaded an app that has a Linux terminal for Android and tried to ping github using my internet phone, with my wifi turned off and it didn't work, the response was just like in my PC.",pihole,1645326214.0
11400,comment,3,hxnfvds,,"I don't think so, I can visualize my repositories, clone them over https/ssh and push/pull normally",pihole,1645321009.0
11401,post,2,swkm3j,Pihole hardware recommendations,"I've been using pihole in small environments and wanted to see what else other people were using for the hardware.  I've been using raspberry pi units for this,  but it's there anything else you guys are using for the hardware that compares in cost and performance?",pihole,1645306746.0
11402,comment,6,hxmlldl,,"Well, if you have a machine on your network that's 'always on' a very small virtual machine setup (1 core, 500 MB RAM) is basically free.

I run mine using Ubuntu server 20.04 LTS.  Works great.",pihole,1645306883.0
11403,comment,5,hxmr75b,,I just run it inside an LXD container on my servers. I have a pair of Odyssey x86 SBC servers in my network closet that runs various LXD containers.,pihole,1645309381.0
11404,comment,3,hxmteld,,I run pi-hole as a docker on an unraid server.,pihole,1645310375.0
11405,comment,3,hxmufqu,,"Nothing is really close to a Pi in terms of cost/performance, but 2nd hand NUCs or Lenovo Think Centre M92/93 are also nice machines for this purpose. Pihole does not really need a lot of resouces, and runs quite well on most hardware. Using it both on RPi4 as well as VMs and docker containers on Ubuntu",pihole,1645310840.0
11406,comment,2,hxmts0j,,I use an Orange Pi One,pihole,1645310545.0
11407,comment,2,hxnqzg1,,Running it on my Synology.,pihole,1645326582.0
11408,comment,2,hxohcv0,,I'm using an original Pi B running Raspbian. Anything more than that is overkill :),pihole,1645342831.0
11409,comment,2,hxq1pao,,"Hi, I got myself a thin client that does the job, the HP T530 with 4GB ram for less than 40$ (second hand) and it runs Ubuntu server just fine. It does 2.9watt idle which it is 95% of the time. Maybe you could look into that?",pihole,1645376852.0
11410,comment,1,hxmshk4,,"You're not going to find a small, low-or-single-purpose, hardware replacement for the Raspberry Pi lineup *that will compare in cost and performance for this purpose* outside of -possibly- orange pi units.

It's unfortunate, but supplies and prices are really bad across the board in that space right now.",pihole,1645309964.0
11411,comment,1,hxms8up,,"I'd change ""hardware that compares in cost and performance?""

to ""hardware that compares in **stability, support**, cost and performance?""

Maybe drop the performance too since I can't put any real load on a Pi Zero for DNS functions.

And other than a VM nothing I've looked at comes close to a pair of Pi.",pihole,1645309854.0
11412,comment,1,hxo49vm,,"Given how much a Raspberry Pi does not cost much and the fact that it performs pretty well, what are you looking for?  Free, and the power of a supercomputer?  If you are not getting the performance you need/want you need to look at what your bottleneck(s) are.  Then remediate those.",pihole,1645333799.0
11413,comment,1,hxoy5gp,,"If cloud is an option, I use on Google cloud with free tier",pihole,1645356336.0
11414,comment,1,hxpi55m,,"If you want to stick with an SBC solution, I have tried a few and have settled on the [Orange Pi Zero2](http://www.orangepi.org/Orange%20Pi%20Zero2/) which can be hardwired or wireless. These are inexpensive at [AliExpress](https://www.aliexpress.com/item/1005001823662622.html?spm=a2g0o.order_list.0.0.21ef1802nSaZsa) and still readily available compared to Raspberry Pi's. Purchased my first from Amazon but it shipped from CN anyway. I have a couple of these running for myself and family members. Built some 3D printed cases and added a 40mm a fan to keep them cool, around 40c. You can run the  OrangePi desktop image but I settled on a lightweight server image instead. Best results have been running Debian Buster Server.",pihole,1645368642.0
11415,comment,0,hxmmb2s,,I need dedicated hardware for this setup,pihole,1645307197.0
11416,comment,0,hxmrd5p,,I really need a separate box for this.,pihole,1645309456.0
11417,comment,1,hxnv7bq,,I run two instances in separate LXC containers on separate servers and they work great!,pihole,1645328763.0
11418,comment,4,hxmqhac,,"I know you said you're currently using a Raspi for this, but I wanted to say that in using my Raspi 4B, I've had no issues with it at the hardware layer. The Raspi I use is a dedicated controller on my network for Pi-hole, a speedtest monitor/Grafana, and Pi Cloud.

Solid stuff. So solid in fact, I'm looking into adding a PoE HAT for the raspi so I can run it without USB power.",pihole,1645309063.0
11419,comment,4,hxn8e63,,"Around here they're not readily available, but if you can get your hands on a Pi Zero 2 W I don't see how you can beat it.  $15 and very low power consumption are going to be hard to beat :)",pihole,1645317345.0
11420,comment,0,hxnqrqv,,Why?,pihole,1645326469.0
11421,comment,3,hxmruy7,,Seems like the Pi is the best bet then.,pihole,1645309680.0
11422,comment,2,hxnvbmf,,Maybe a low end Pi like a Pi Zero? You really do not need much horsepower for Pihole.,pihole,1645328823.0
11423,comment,0,hxnqs6s,,Why again?,pihole,1645326475.0
11424,comment,1,hxnxqje,,"Ya, same here. One running on each of the Odyssey x86's.",pihole,1645330077.0
11425,comment,2,hxncj84,,"I have a few 3B+ that ended up spare or surplus I guess when I updated my RPi cluster to the RPi 4 8GB boards and I had a few DS3231 RTCs (they're cheap as heck and absurdly accurate and have very high precision for their price range) and ended up using a few of them for a totally overkill distributed/redundant NTP server setup. Long story short on that one they see almost no load on them except when they run their `unattended-upgrades` tasks, and they just chug along without intervention for weeks, months, at one point over a year, quite effortlessly. The only reasons they ever tend to go down is during my stupidity or playing around with it or configuring something on the network, or if a power outage exceeds the capacity of my UPS.

People getting genuinely bad RPi hardware isn't unheard of as with any mass produced consumer electronics, but their return policy with vendors is pretty great, and over the many boards that have passed through my hands for my own projects and client projects I've only had a couple of flakey ones.

The hardware, generally speaking, is super solid and fairly robust.",pihole,1645319360.0
11426,comment,1,hxnydc8,,My LXC containers run in Proxmox which is awesome. They both run on separate Qotom fanless PCs.,pihole,1645330428.0
11427,post,0,swk4ja,Pi-hole android through mobile data,"Hello 

I want to connect my phone to pi hole through wireguard that is setup as a split tunnel. My phone works well when connected to the wifi at home but once I switch off the data, it starts to use the [8.8.8.8](https://8.8.8.8) dns instead. On mobile data, I am still able to ping pi-hole and see the query requests coming in. My guess is that pi-hole is getting beaten by [8.8.8.8](https://8.8.8.8) which makes my phone use the response from that instead. Is there any way to block [8.8.8.8](https://8.8.8.8) without having to lug a spare wifi router around?",pihole,1645305339.0
11428,comment,2,hxmjhc8,,"I use the following 

[Interface]

Address = 10.6.0.2/24

DNS = 10.6.0.1


[Peer]

AllowedIPs = 10.6.0.0/24


When it's on only DNS is sent down vpn due to the DNS statement and Allowed IP statement.
If you reuse these to your config the same should also work for you.",pihole,1645305959.0
11429,comment,1,hxmlyz2,,"The following conf works for me:
SERVER
DNS servers : 192.168.0.2  --> this is my raspberry pi ipv4 at home

CLIENT

Allowed IPs: 192.168.0.0/24

This conf allows me to use my raspberry as DNS server and route all other traffic to mobile data provider",pihole,1645307047.0
11430,comment,0,hxmkxfl,,"I have a similar configuration and it still does not work

\[Interface\]  
  
Address=10.253.0.10/32  
DNS=192.168.1.200, 192.168.1.200  
  
\[Peer\]  
  
AllowedIPs=10.253.0.1/32, 192.168.1.0/24",pihole,1645306593.0
11431,comment,1,hxmtahi,,Look at the allowed IP ranges and then look at IPs you list for DNS and tell me how you'll access them vis the VPN?,pihole,1645310323.0
11432,comment,1,hxmv5m1,,"I can access the pi-hole's admin page from my phone. I still see the requests coming into the pihole.log. But I think I found the issue now. Still just a guess but I think it's because my phone is using the ipv6 addresses it gets after asking for a AAAA record. Im running vaultwarden that needs https to run properly but im only letting internal ips access while denying access from the outside internet. I was using pi-hole to instead map the web address to a local ip so that NGINX sees it coming from the internal network rather than the internet, but I guess that won't work. Thanks for the help anyway.",pihole,1645311159.0
11433,post,0,swjfpl,RegEx matches only sometimes,"So I block youtube for the kids when needed and on one of my tablets, they can watch youtube.  Looking at the logs, [googlevideo.com](https://googlevideo.com) gets blocked sometimes but not always on many devices...any ideas

Regex is (\\.|\^)googlevideo\\.com$

https://preview.redd.it/arxyj16uqui81.jpg?width=1280&format=pjpg&auto=webp&s=4420517053ed79722054c5ed2bbc01a362b139b2",pihole,1645303443.0
11434,comment,1,hxmmcp1,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1645307217.0
11435,comment,1,hxnqwh9,,"[How to block internet access at certain times using the PiHole](https://discourse.pi-hole.net/t/block-internet-access-at-certain-times/12036)

[How to enable/disable groups at certain times using the PiHole](https://discourse.pi-hole.net/t/activate-group-with-cron/32660)

Note: If the default DNS settings are changed on the device directly to something **other** than the PiHole then the device will have access to the blocked sites. 

If you are trying to do this to prevent access to sites for children, they’re going to learn very quickly what DNS is and how to change it. Or go to a friends house. Or use a VPN. Or change the DNS settings. Or use a mobile hotspot. Or mess up the Pi enough to the point that you think it’s not working properly / you’re forced to take it offline (potentially by a SO as “the internet keeps going down and I need it so I can work”) / the OS gets corrupted.

Yes, it’s a little easier during COVID as they’re not visiting friends as much but the point still stands. Can the PiHole do this? Yes. Is it what it was specifically designed to do? No. Will they eventually bypass it? Yes.

You’d be better served by parental control / web filtering software specifically designed for this task.

The only way to prevent this is to force any and all devices to use your PiHole for DNS in your router’s firewall configuration. Forcing this option varies wildly from router to router and may not exist in many “consumer” based devices - your best bet would be to google how to do so.

TL;DR Buy proper parental control software for the most effective solution.",pihole,1645326538.0
11436,comment,1,hxtu4be,,"[https://tricorder.pi-hole.net/ICwmpksU/](https://tricorder.pi-hole.net/ICwmpksU/)

Thanks",pihole,1645449481.0
11437,post,1,swjfa5,DNSSEC fails and the works fine serveral minutes later,"I installed pihole and unbound on dietpy and experenicing strange behavoir regarding DNSSEC.

When I try to access some web sides the first time (e.g. [majaro.org](https://majaro.org) or [linuxquestions.org](https://linuxquestions.org)) I get an error. Then, when I try some minutes later it works w/o issues.

I enabled `val-log-level: 2` and run some `dig` commands with and without `+cd` to see what happens.

Can someone tell me what the issue is?

    dietpi@Pihole:~$ dig manjaro.org @127.0.0.1 -p 53
    
    ; <<>> DiG 9.16.22-Debian <<>> manjaro.org @127.0.0.1 -p 53
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: SERVFAIL, id: 55172
    ;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1
    
    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 1472
    ;; QUESTION SECTION:
    ;manjaro.org.                   IN      A
    
    ;; Query time: 0 msec
    ;; SERVER: 127.0.0.1#53(127.0.0.1)
    ;; WHEN: Sat Feb 19 20:49:11 CET 2022
    ;; MSG SIZE  rcvd: 40
    
    dietpi@Pihole:~$ dig manjaro.org @127.0.0.1 -p 53 +cd
    
    ; <<>> DiG 9.16.22-Debian <<>> manjaro.org @127.0.0.1 -p 53 +cd
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 28901
    ;; flags: qr rd ra cd; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 1
    
    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 1472
    ;; QUESTION SECTION:
    ;manjaro.org.                   IN      A
    
    ;; ANSWER SECTION:
    manjaro.org.            81227   IN      A       116.203.91.91
    
    ;; Query time: 3 msec
    ;; SERVER: 127.0.0.1#53(127.0.0.1)
    ;; WHEN: Sat Feb 19 20:49:13 CET 2022
    ;; MSG SIZE  rcvd: 56
    
    dietpi@Pihole:~$ dig manjaro.org @127.0.0.1 -p 53
    
    ; <<>> DiG 9.16.22-Debian <<>> manjaro.org @127.0.0.1 -p 53
    ;; global options: +cmd
    ;; Got answer:
    ;; ->>HEADER<<- opcode: QUERY, status: SERVFAIL, id: 11598
    ;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 1
    
    ;; OPT PSEUDOSECTION:
    ; EDNS: version: 0, flags:; udp: 1472
    ;; QUESTION SECTION:
    ;manjaro.org.                   IN      A
    
    ;; Query time: 3 msec
    ;; SERVER: 127.0.0.1#53(127.0.0.1)
    ;; WHEN: Sat Feb 19 20:50:34 CET 2022
    ;; MSG SIZE  rcvd: 40

The log looks like this:

    [1645300302] unbound[31590:0] info: generate keytag query _ta-4f66. NULL IN                                                       
    [1645300302] unbound[31590:0] info: validation failure <manjaro.org. A IN>: no DNSSEC records from 213.133.105.6 for DS manjaro.or
    g. while building chain of trust                                                                                                  
    [1645300313] unbound[31590:0] info: validation failure <msftspeechmodelsprod.azureedge.net. AAAA IN>: SERVFAIL no DS for DS azuree
    dge.net. while building chain of trust                                                                                            
    [1645300313] unbound[31590:0] info: validation failure <msftspeechmodelsprod.azureedge.net. A IN>: SERVFAIL no DS for DS azureedge
    .net. while building chain of trust                                                                                               
    [1645300339] unbound[31590:0] info: validation failure <manjaro.org. AAAA IN>: key for validation manjaro.org. is marked as invali
    d because of a previous validation failure <manjaro.org. A IN>: no DNSSEC records from 213.133.105.6 for DS manjaro.org. while bui
    lding chain of trust                                                                                                              
    [1645300360] unbound[31590:0] info: validation failure <manjaro.org. A IN>: key for validation manjaro.org. is marked as invalid b
    ecause of a previous validation failure <manjaro.org. A IN>: no DNSSEC records from 213.133.105.6 for DS manjaro.org. while buildi
    ng chain of trust                                                                                                                 
    [1645300508] unbound[31590:0] info: validation failure <maps.dnslytics.net. AAAA IN>: no DNSSEC records from 108.162.192.138 for D
    S dnslytics.net. while building chain of trust                                                                                    
    [1645300508] unbound[31590:0] info: validation failure <maps.dnslytics.net. A IN>: no DNSSEC records from 108.162.192.138 for DS d
    nslytics.net. while building chain of trust                   

have also no idea what dnslytics is. Maybe it is accessed by a FFox plugin like uBlock or DuckDuckGo",pihole,1645303409.0
11438,post,11,sweim3,Update isn't available ?,"PiHole keeps telling me that an update v5.9 is available, but when checking on Docker HUB I'm unable to find any such version. Am I blind or just plain dum ?",pihole,1645289964.0
11439,comment,2,hxmmy7u,,"https://github.com/pi-hole/docker-pi-hole#piholepiholelatest---

"" pihole/pihole:latest   

This version of the docker aims to be as close to a standard Pi-hole installation by using the recommended base OS and the exact configs and scripts (minimally modified to get them working). This enables fast updating when an update comes from Pi-hole.""",pihole,1645307477.0
11440,comment,3,hxlt238,,[Docker Tag 2022.02.1 is v5.9](https://imgur.com/a/K02sBY5),pihole,1645294848.0
11441,comment,2,hxlhwfo,,"Right here

[https://hub.docker.com/layers/pihole/pihole/2022.02.1/images/sha256-565f4c005caeaea0c704e07bbeee6b12578562f314956793be760c054fadaf00?context=explore](https://hub.docker.com/layers/pihole/pihole/2022.02.1/images/sha256-565f4c005caeaea0c704e07bbeee6b12578562f314956793be760c054fadaf00?context=explore)

&#x200B;

You can do docker pull pihole/pihole:2022.02.1 to update",pihole,1645290294.0
11442,comment,1,hxoh6ny,,"For some reason I do not understand, using `pihole/pihole:latest` doesn't work as expected in a docker compose file in Container Station on a QNAP NAS.

It fails to pull the `latest` from docker HUB but uses instead the one stored locally which is also tagged as `latest`.  So the only working solution I have found is to manually edit the compose file and add the exact version number.  
(But according to several other ""helpers"" in this forum, I am clearly and utterly stupid, and they enjoy telling me so) 😥",pihole,1645342697.0
11443,comment,-13,hxlxyee,,"Oh yeah ?

And how was I (and everybody else) to know that ?",pihole,1645296866.0
11444,comment,1,hxli4no,,"2022.02.1  ??  
I was looking for v5.9",pihole,1645290387.0
11445,comment,1,hxpde0k,,">	the only working solution I have found is to manually edit the compose file and add the exact version number.

This is the preferred method. I recall somebody had a similar problem, but can't find it Ina search on our discourse site.",pihole,1645366285.0
11446,comment,1,hxrzrno,,"I use docker compose and mine pulls fine. 

This the portion of my docker-compose that pull pi-hole (I have multiple pulls in the same yaml file).
Maybe something specific to the QNAP version of Docker Compose?

I've also found that docker compose is very picky about version numbers (for this yaml I use 3, but for a yaml on my other box I have to use 2.3 due to needing to use the Nvidia Runtime (and nothing above or below 2.3 seems to work).



    pihole: 
        container_name: pihole
        image: pihole/pihole:latest
        ports:
          - ""53:53/tcp""
          - ""53:53/udp""
          - ""67:67/udp""
          - ""8900:80/tcp""
     environment:
         TZ: ${TZ}
         WEBPASSWORD: 'redacted'
     volumes:
          - ${ROOT}/config/pihole:/etc/pihole
          - ${ROOT}/config/dnsmasq.d:/etc/dnsmasq.d
     restart: unless-stopped",pihole,1645406959.0
11447,comment,3,hxn2c3o,,"If you're using the docker version, this is kind of a core functionality of docker container updates. It's best to understand the tools before you start using them.",pihole,1645314493.0
11448,comment,5,hxm4ca8,,By pulling the docker container that is tagged as latest.,pihole,1645299443.0
11449,comment,4,hxltlrc,,same thing,pihole,1645295074.0
11450,comment,1,hxszxf7,,I suspect this is a QNAP bug in their Container Station implementation.,pihole,1645426344.0
11451,comment,-13,hxmbg5z,,"That's just like saying ""To find out if it's deep enough to dive in, just dive in!""",pihole,1645302460.0
11452,comment,5,hxm7mia,,">ling me that an update v5.9 is available, but when checking on Docker HUB I'm unable to find any such version. 

In docker, the version are different since they will do a monthly stable releases",pihole,1645300818.0
11453,comment,1,hxuso6t,,"does QNAP give you a way to manually issue a docker-compose pull && docker-compose -up d? 

If so I believe there is an option to ignore the cache and pull from source.",pihole,1645464848.0
11454,comment,13,hxmcmu5,,"When a new version of pihole gets release, update the container.

If you don't want to accept the answer, then don't ask the question.",pihole,1645302978.0
11455,comment,1,hxvefe4,,"Technically yes, if one's skilled enough to do it that way - which I ain't. I have to rely on the GUI (which QNAP named Container Station).",pihole,1645473416.0
11456,post,3,swcw0n,Can't get to admin page - PiVPN (Wireguard) on VPS,"I spun up a VPS on Oracle. Installed PiVPN (wireguard) - it works.

Installed Pi-Hole - I picked the wg0 interface (10.6.0.1), but it seems to have just used ens3 (10.0.0.240). The ""Installation Complete"" page shows http://10.0.0.240/admin.

Even after enabling pihole on all interfaces (pihole -a -i all)  I can't log into the admin page.

I get results back from both of these, so Pi-Hole seems to be running.

    dig @10.0.0.240 www.ucla.edu
    dig @10.6.0.1 www.ucla.edu

Any ideas on how I can get to the admin page?",pihole,1645285560.0
11457,comment,3,hxl75xs,,"Are you positive that you installed the webserver. Run ""sockstat"" from console (you may have to install it first) and see what is listening on port 80 and on which interface.",pihole,1645285903.0
11458,comment,2,hxp6cdt,,"So I rebuild the server installing Pi-Hole first. I still can't:

1. Get to the admin page
2. Use Pi-Hole as the DNS on wireguard.

I know this sounds like a noob question, but I'm running out if ideas? Is there something simple I missed?",pihole,1645362263.0
11459,comment,1,hxtzf1z,,"2 things 
The web interface must be listening on the wireguard IP address 
You have to be connecting to it on that address and port. 

You can use command line tools like 
ss -ant
or
netstat -tulpn
or
sudo lsof -i :80 

to see what , if anything, is listening on port 80 , and see which IP’s it’s listening on.

2) use the curl command to make and https get request to the pihole web server.

curl -Lv http://(ip address)/admin

you can add more “v’s” to have it output more information about the request and the response like this 

curl -Lvvv http://(ip address)/admin


There are tools such as ping and tcptraceroute that you can use to check connectivity and the route the packets take as  well.",pihole,1645452361.0
11460,comment,1,hxl8jys,,Yep - looks like lighttpd is running on 80 and pihole-FTL is running on 53.,pihole,1645286483.0
11461,comment,1,hxwotsn,,"Thanks for the reply. Here's what I'm seeing.

`ss-ant`

|State|Recv-Q|Send-Q|Local Address:Port|Peer Address:Port|
|:-|:-|:-|:-|:-|
|LISTEN|0|5|127.0.0.1:4711|0.0.0.0:\*|
|LISTEN|0|128|0.0.0.0:111|0.0.0.0:\*|
|LISTEN|0|1024|0.0.0.0:80|0.0.0.0:\*|
|LISTEN|0|32|127.0.0.1:53|0.0.0.0:\*|
|LISTEN|0|32|10.7.0.1:53|0.0.0.0:\*|
|LISTEN|0|128|0.0.0.0:22|0.0.0.0:\*|
|ESTAB|0|36|10.0.0.152:22|XXX.XXX.X.XX:62876|
|ESTAB|0|0|10.0.0.152:22|YY.YY.YYY.YY:62308|
|ESTAB|0|176|10.0.0.152:22|YY.YYY.YYY.YY:62264|
|LISTEN|0|5|\[::1\]:4711|\[::\]:\*|
|LISTEN|0|128|\[::\]:111|\[::\]:\*|
|LISTEN|0|1024|\[::\]:80|\[::\]:\*|
|LISTEN|0|32|\[::1\]:53|\[::\]:\*|
|LISTEN|0|128|\[::\]:22|\[::\]:\*|

`netstat -tulpn`

| Proto | Recv-Q | Send-Q | Local Address  | Foreign Address  | State  | PID/Program name |
|-------|--------|--------|----------------|------------------|--------|------------------|
| tcp   | 0      | 0      | 127.0.0.1:4711 | 0.0.0.0:*        | LISTEN | -                |
| tcp   | 0      | 0      | 0.0.0.0:111    | 0.0.0.0:*        | LISTEN | -                |
| tcp   | 0      | 0      | 0.0.0.0:80     | 0.0.0.0:*        | LISTEN | -                |
| tcp   | 0      | 0      | 127.0.0.1:53   | 0.0.0.0:*        | LISTEN | -                |
| tcp   | 0      | 0      | 10.7.0.1:53    | 0.0.0.0:*        | LISTEN | -                |
| tcp   | 0      | 0      | 0.0.0.0:22     | 0.0.0.0:*        | LISTEN | -                |
| tcp6  | 0      | 0      | ::1:4711       | :::*             | LISTEN | -                |
| tcp6  | 0      | 0      | :::111         | :::*             | LISTEN | -                |
| tcp6  | 0      | 0      | :::80          | :::*             | LISTEN | -                |
| tcp6  | 0      | 0      | ::1:53         | :::*             | LISTEN | -                |
| tcp6  | 0      | 0      | :::22          | :::*             | LISTEN | -                |
| udp   | 0      | 0      | 127.0.0.1:53   | 0.0.0.0:*        |        | -                |
| udp   | 0      | 0      | 10.7.0.1:53    | 0.0.0.0:*        |        | -                |
| udp   | 0      | 0      | 10.0.0.152:68  | 0.0.0.0:*        |        | -                |
| udp   | 0      | 0      | 0.0.0.0:51820  | 0.0.0.0:*        |        | -                |
| udp   | 0      | 0      | 0.0.0.0:111    | 0.0.0.0:*        |        | -                |
| udp   | 0      | 0      | 0.0.0.0:925    | 0.0.0.0:*        |        | -                |
| udp6  | 0      | 0      | ::1:53         | :::*             |        | -                |
| udp6  | 0      | 0      | :::51820       | :::*             |        | -                |
| udp6  | 0      | 0      | :::111         | :::*             |        | -                |
| udp6  | 0      | 0      | :::925         | :::*             |        | -                |

`sudo lsof -i :80`

| COMMAND  | PID  | USER        | FD  | TYPE | DEVICE | SIZE/OFF | NODE | NAME                                   |
|----------|------|-------------|-----|------|--------|----------|------|----------------------------------------|
| lighttpd | 1272 | www-data    | 4u  | IPv4 | 25006  | 0t0      | TCP  | *:http                                 |
| lighttpd | 1272 | www-data    | 5u  | IPv6 | 25007  | 0t0      | TCP  | *:http                                 |
| gomon    | 2613 | snap_daemon | 11u | IPv4 | 32895  | 0t0      | TCP  | 10.0.0.152:43436->ZZZ.ZZZ.ZZZ.ZZZ:http |

`curl -Lv http://10.7.0.1/admin`, `curl -Lv http://10.0.0.152/admin`, and `curl -Lv http://127.0.0.1/admin` all return results. It's the Pi-Hole home page. 

When on VPN, I can ping 10.7.0.1 and 10.0.0.152, but the site times out if I go to the admin page. Also, if I use 10.7.0.1 as my DNS, pages won't load. 

I'm at a loss...",pihole,1645492948.0
11462,comment,1,hxl8wd3,,Well that checks out. Any firewall on the VPS?,pihole,1645286630.0
11463,comment,1,hxl92vk,,I didn’t install anything. Only 22 and 51820 are open.,pihole,1645286705.0
11464,comment,1,hxla3gx,,Most tutorials install Pi-hole first and then the vpn. Maybe I should just start over lol.,pihole,1645287124.0
11465,comment,3,hxnfwxv,,"I would do pihole first-

Because when you setup PiVPN and it detects pihole it will ask you if you want to route traffic through PiHole.

It could help, I have the exact same setup you expressed on AWS.",pihole,1645321031.0
11466,comment,2,hxnivot,,I will set this up when I have time again. Thanks for the suggestion.,pihole,1645322499.0
11467,post,0,swc6b7,Curseforge App Ads Getting Through,"I recently removed my pihole from being the primary DNS provider on my router. I set it back to just being a static IP device on the network and pointing only certain devices at it to use as their DNS provider. As an example my phone is pointed to it, my computer is pointed to it and I can see on my dashboard all the requests coming and being blocked by the adlists I've configured. My question is by running things this way do things sneak by? 

Curseforge is an application used to manage world of warcraft addons and it has a space in the corner to show ads. Ads were being blocked when I had the pihole configured to be the DNS on the router, but now that I'm just going direct to it it seems to have stopped blocking the ads. I have all the same adlists that worked before so I'm confused why it's not working all of a sudden. Obviously my biggest change was removing it from the router but in theory doesn't going directly to it by specifying it as the DNS provider do the same thing?",pihole,1645283459.0
11468,comment,3,hxl3q1t,,Do you have a “secondary” DNS somewhere that is **not** the PiHole?,pihole,1645284414.0
11469,comment,2,hxncdvj,,"App could have its own dns, try blocking all dns except ones towards pihole",pihole,1645319287.0
11470,comment,2,hxl5but,,"Not that I know of, I've only configured the Pihole's IP as the primary DNS. There is no entry for an alternative. Specifically configured this in the ethernet settings for the network adapter that is hooked up. My alternative DNS is blank.",pihole,1645285120.0
11471,comment,3,hxl6b03,,For a minute there I thought I had it...your comment sparked a thought and I went on the pihole and grabbed it's ipv6 address. I configured my ipv6 dns settings on my computer to point to the ipv6 address of the pihole. I'm definitely catching more things now through that I could see all the ipv6 queries on the dashboard but unfortunately it's still playing ads in curseforge.,pihole,1645285539.0
11472,comment,2,hxlhdr7,,Try disabling IPv6 and see what happens,pihole,1645290084.0
11473,comment,3,hxlm551,,You mean just straight up disabling it on my network adapter? Just uncheck the box?,pihole,1645292018.0
11474,comment,2,hxlmomt,,On the router.,pihole,1645292236.0
11475,post,20,swaoj8,What should I run alongside PiHole on a Raspberry Pi 0 W?,"I ordered a Raspberry Pi 0 W to run PiHole (I'd been anticipating doing so for a while). I got a Canakit that comes with a 16gb SD card. Per PiHole documentation I only need ~2-4Gb for PiHole. What else can and should I run? Mostly looking for other network management stuff as I'll eventually by a more powerful Raspberry Pi for more fun things like RetroPie.

My research has told me about Unbound and OpenVPN being recommended additions.",pihole,1645279123.0
11476,comment,19,hxkurtk,,Unbound + WireGuard,pihole,1645280201.0
11477,comment,6,hxktx6v,,"I don't have a zero. My 2B runs NTP, Mosquitto, & MPPlayer, because I find those useful.",pihole,1645279756.0
11478,comment,5,hxll49x,,"I dont like docker, but Uptime Kuma is a fun lightweight and very basic network monitoring tool.       
iperf3 is fun to get accurate speed tests.      
speedtest-cli is a neat package to get semi-accurate speed tests.       
pydf is a fun package to see how much disk space you have left.      
Uhhhh I'm trying to think of some other small fun packages",pihole,1645291603.0
11479,comment,2,hxlsm5e,,"I had gitea server running on my pi zero W along with pihole. 

That setup is now migrated over to a raspberry Pi 3 and due to the added horsepower i decided to throw a MinIO cluster on the pi 3 as well with docker. 

I might try to use the pi zero as another minIO server later. See if you'd like to explore that",pihole,1645294670.0
11480,comment,1,hxnq3u6,,"Personally I prefer cloudflared over unbound as unbound was too slow and the extra ""privicy"" doesnt worth the extra time IMO. If you trust cloudflare (they are alreadly providing most of the website through their anycast), then I wont advice using unbound.",pihole,1645326131.0
11481,comment,-11,hxktk0b,,[deleted],pihole,1645279568.0
11482,comment,-1,hxmzdro,,home assistant with supervised in docker,pihole,1645313103.0
11483,comment,4,hxkw6np,,What does Wireguard do?,pihole,1645280921.0
11484,comment,1,hxlnvn0,,Unbound: replacing Pihole? Or sort of daisy chained?,pihole,1645292727.0
11485,comment,5,hxl3dmu,,">NTP

What's the benefit of running your NTP service?",pihole,1645284263.0
11486,comment,3,hxmde1w,,[deleted],pihole,1645303311.0
11487,comment,2,hxox7cs,,"Hey - thanks for the pointers to Uptime Kuma! I was searching for something like this *so hard* a year ago, but apparently this thing popped up out of nowhere last year and it looks awesome!",pihole,1645355556.0
11488,comment,10,hxkxe8q,,A Zero will easily run unbound and a VPN.,pihole,1645281505.0
11489,comment,5,hxn9ow2,,"Not on a PiZero, not with an SD card. You won't have an enjoyable/speedy HA experience.",pihole,1645317978.0
11490,comment,7,hxkx9fn,,">	What does Wireguard do?

It's a VPN similar to Open VPN.",pihole,1645281440.0
11491,comment,1,hxmvxzx,,I would propose Tailscale instead of Wireguard…,pihole,1645311520.0
11492,comment,1,hxlsvtv,,"to be its own resolver. With unbound Pihole asks unbound locally for an IP, the first time Unbound asks then direct the DNS root server, from then on unbound can answer this IP from the cache and is therefore unbeatable fast.",pihole,1645294778.0
11493,comment,12,hxl3m81,,"You always know what time it is.

On a serious note, you can redirect all time queries to that single device; this could be helpful in an area with limited or laggy connectivity.",pihole,1645284368.0
11494,comment,1,hxn4ciy,,It's useful if you have CCTV cameras that are blocked from having internet access.,pihole,1645315433.0
11495,comment,5,hxmffom,,"imho, I think it de-skills its user-base and I do not appreciate their approach to networking. I feel like people use Docker as a crutch to avoid learning more about proper configuration and change management. I'd much prefer people learn how systems actually work and how dependencies, well, depend on each other. Instead of ""hurrdurr I goofed and cant read logs. Let me just redploy."" Nothing wrong with it, but even in Enterprise environments I see folks using it to avoid root cause analysis. I hate it.",pihole,1645304201.0
11496,comment,3,hxl5btg,,"Can confirm it, running smoothly with pihole and unbound in network with ~10 active devices",pihole,1645285120.0
11497,comment,0,hxna4x3,,Works great on my pi 4. The zero may be too weak.,pihole,1645318193.0
11498,comment,6,hxkyfyn,,Help me understand. WireGuard is used to connect to your home network while you are away?  Or are you using WireGuard to tunnel out of your home network to somewhere else?,pihole,1645282011.0
11499,comment,1,hxkxche,,Ah okay thank you.,pihole,1645281480.0
11500,comment,1,hxnnkcw,,How come?,pihole,1645324838.0
11501,comment,4,hxlv4rw,,"You’re right, Unbound does cache results but only for the specified Time-to-Live (TTL), once that lapses, Unbound must ask again. It’s slower than using a public DNS server like Cloudflare or Google. However, it’s a better privacy approach to use Unbound and go directly to the root DNS servers, eliminating a middle DNS server.",pihole,1645295703.0
11502,comment,4,hxl4anq,,Ok. Thanks!,pihole,1645284665.0
11503,comment,5,hxlb21f,,Here as well. Pi-Hole+unbound on Pi Zero W without problems. Network ~ 40 devices. Maybe I'll try the idea from a comment above and add Wireguard,pihole,1645287524.0
11504,comment,2,hxred2d,,"Yes, me too. The OP said Pi 0 W.",pihole,1645397146.0
11505,comment,12,hxkz00c,,">	WireGuard is used to connect to your home network while you are away?

Yes. 

https://docs.pi-hole.net/guides/vpn/wireguard/overview/",pihole,1645282270.0
11506,comment,-2,hxovm2d,,https://tailscale.com/download/linux/rpi,pihole,1645354244.0
11507,comment,2,hxmdsny,,"I did a very fast calc and overall, Unbound is way faster. While cloudflare or Google have about 20-40ms where I am (with the odd outlier above 100 of course), Unbound will have about 100ms reaction time on an uncached site, it will have about 4ms on a cached site. As cloudflare and Google have their 20ms ping for every single request, Unbound leaves them far behind speed wise enormously fast.",pihole,1645303491.0
11508,comment,0,hxul60r,,Unbound is wayyy faster. My avg response time is generally between 2-4Ms,pihole,1645461879.0
11509,comment,4,hxkz2ta,,"Thanks

I’m on CGNAT so I haven’t figured out how to do this yet. (Starlink)",pihole,1645282306.0
11510,comment,2,hxme8i7,,The 20-40 ms for every request is not true since either Pi-hole or Unbound—using Cloudflare or Google as upstream DNS—will cache the results until TTL runs out.,pihole,1645303683.0
11511,comment,1,hxum10l,,Cool.,pihole,1645462220.0
11512,comment,3,hxlgehe,,"One way would be to set up a relay server. If you've got a friend or parent on non-cgnat service, you could put a second Pi in their house and use DDNS so the endpoint is always known. Then your Pi0W would connect to that relay Pi persistently and your phone/laptop would connect on demand and route your traffic back to your house.

You could also put the relay server in the cloud using Google Compute, Oracle, Digital Ocean, Linode, etc. I believe there are some free tiers that would work, but even if you have to pay it shouldn't be more than about $5/month.",pihole,1645289689.0
11513,comment,2,hxmn9u6,,">	either Pi-hole or Unbound—using Cloudflare or Google as upstream DNS—will cache the results until TTL runs out.

Both unbound and Pi-hole will cache.",pihole,1645307622.0
11514,comment,1,hxmev16,,"Oh.... Ah....yeah... I absolutely did not forget about PiHole's cache. I.... I've got to go now 😂

Yet, given that this request only happens once.at.the end of the entry's lifetime, speed difference overall will most likely be negligible.",pihole,1645303947.0
11515,comment,1,hxne730,,">I believe there are some free tiers that would work,

Micro instances on Oracle Cloud. 2 for free ""forever"".  
After the 30day trial you also can use 4 CPUs and 24 Go as ARM instances (when you go from free trial to always free, the old ARM locks for a weird reason)",pihole,1645320183.0
11516,comment,2,hxmng7d,,"You’re right, I should’ve used *and* rather than *or*",pihole,1645307703.0
11517,post,39,sw7v0m,"Xfinity Flex not working, possibly due to pihole","As the title says, we just got a free bit of hardware from Xfinity we'd like to use. The problem is, when we try to connect it to the internet, it gets an ENT-22010 error saying ""Yikes, that didn't work"". I found a thread on Xfinity's forums about the topic ([https://forums.xfinity.com/conversations/flex/new-xfinity-flex-will-not-work-ent22010/617ece2524e8282ebaefe650](https://forums.xfinity.com/conversations/flex/new-xfinity-flex-will-not-work-ent22010/617ece2524e8282ebaefe650)), but I'm getting in over my head for my networking skill level.  


Is it really necessary to point the Flex at a different DNS server? Does that pose a security risk? And how would I do it in the first place?",pihole,1645269520.0
11518,comment,39,hxkhcsr,,"yes it does..... Xfinity demands/wants you to use specific DNS servers...most likely to track you and block you from doing any good with your own DNS settings (like privacy and/or ad blocking).

A device like that would not get ANY access on my network..period.",pihole,1645272036.0
11519,comment,52,hxkhgwb,,I recommend phasing out all Xfinity equipment.,pihole,1645272123.0
11520,comment,7,hxkl87x,,"> Is it really necessary to point the Flex at a different DNS server? 

Apparently it is, according to your forum post

> Does that pose a security risk? 

All depends on how you define security risk. It’s unlikely that Crapcast is doing anything *malicious* but they are most likely trying to datamine what you’re watching/doing and can only do that with their DNS servers.

> And how would I do it in the first place?

Do what? Change DNS servers? You’d manually assign the DNS servers on the Comshaft device itself.",pihole,1645274774.0
11521,comment,6,hxkxomg,,"Mine stopped working too. I got rid of it once I realized it was setting up its own lan network and trying to bypass mine. I gave it a static IP within my network and it 'broke'. I mailed it back that day and got a roku ultra, couldn't be happier.",pihole,1645281646.0
11522,comment,4,hxlcwhv,,"I successfully run an xfinity flex through my Pi-hole. To get it working I’m pretty sure I had to babysit the queue to find which domains to whitelist. 

It works great now, and using peacock on it is great too because the ads are all blocked (as long as you open the app directly and not through the built in search) It will still throw that error when it fails to pull an ad for the standby screen :)",pihole,1645288279.0
11523,comment,2,hxm0li3,,Holy shit fuck this company omg. I am so sorry this is happening to you. I pay less than 100$ a month to a fibre provider and I don't have to put up with any of this.,pihole,1645297941.0
11524,comment,1,hxkun67,,"I also have a flex and pihole and receive this message, but it still works. I have to use voice control, which is another sort of problem, but I can still view content. Essentially the only thing I say is the app I want and then I use the physical remote to navigate through it. Honestly I only use YouTube, Netflix, and occasionally peacock because I have Plex and a firebox.",pihole,1645280133.0
11525,comment,1,hxm8diq,,Same issue setting mine up last night. I paused blocking for 5 minutes and it worked.,pihole,1645301134.0
11526,comment,1,hxmb9dp,,Wow that explains why my flex box didn't work when I set it up.... Still sitting on a shelf unplugged. I didn't even want it but they sent it so I figured I'd check it out.,pihole,1645302378.0
11527,comment,1,hxmfqho,,Are you able to NAT the Xfinity DNS to Pi-hole and bypass that way?,pihole,1645304331.0
11528,comment,1,hxndxix,,It's a better doorstop anyway.,pihole,1645320053.0
11529,comment,17,hxl4j8e,,"Yes but unfortunately I feel like things are going to go further and further in this direction and eventually we will have less and less choice in the matter

Edit: Why would anyone down vote this comment unless they were a corporate shill who wants control? that’s what these companies are doing more and more, locking stuff down. But you guys can keep downvoting over truth.",pihole,1645284772.0
11530,comment,5,hxl9vmw,,Wish I could but they forced me to use their modem because I need no data cap.  I keep it bridged though so there's that.,pihole,1645287035.0
11531,comment,1,hxl47c8,,How come? I want another reason to shit on Comcast/Xfinity,pihole,1645284627.0
11532,comment,-6,hxkody7,,"Well if you can recommend an Xfinity compatible cable box that supports 4k and works over wifi I'm all ears

Eidt: I have a Comcast cable box but it's in a different room than the TV.

Comcast also gave me a little box that works over wifi. It essentially streams the cable box to my TV over my wifi and does it in 4k.

Not sure why people think this is unreasonable.",pihole,1645276723.0
11533,comment,1,hxoirxz,,">trying to datamine what you’re watching/doing and can only do that with their DNS servers

Not true, every packet you send or receive still passes through their systems, whether or not you used their DNS to find the address. You think they can't do reverse DNS lookups?

You'd need to encrypt all of your traffic over a VPN. But even that just moves that trust point to a different company.",pihole,1645343936.0
11534,comment,0,hxr876o,,"\> they are most likely trying to datamine what you’re watching/doing 

No DNS data mining going on - see DNS data privacy policy at [https://www.xfinity.com/privacy/policy/dns](https://www.xfinity.com/privacy/policy/dns). 

(note: I work for Comcast)",pihole,1645394530.0
11535,comment,2,hxlouh1,,"Thanks, I'll try this approach before I dig more into how to change DNS settings around.",pihole,1645293122.0
11536,comment,1,hxl9tzp,,"It sounds like the voice commands are being cloud processed and that functionality is being blocked by the Pi-Hole, and causing the error message. Is that whats happening?

I'd hate to think ISPs are starting to fight DNS traffic that's not to their own servers.",pihole,1645287016.0
11537,comment,1,hxr8hir,,"\> Same issue setting mine up last night. I paused blocking for 5 minutes and it worked.

When blocking is turned on, what are the blocked FQDNs? Seems like one of those is on a blocklist and perhaps should not be. 

&#x200B;

(note: I work for Comcast)",pihole,1645394653.0
11538,comment,1,hxmne03,,Cox tried to do it with their streaming box contour. It lasted all of a day in the house till I dropped back off at the Cox store.,pihole,1645307674.0
11539,comment,11,hxl6mtp,,Just a better reason to pirate or buy UHD BluRays.,pihole,1645285680.0
11540,comment,-20,hxlfqwr,,[removed],pihole,1645289424.0
11541,comment,20,hxlhjy3,,"They told me I had to use their modem for unlimited data and I keep it in a box in my garage. I'm using a Netgear modem right now, it works great.

Xfinity is a really shady company, do everything you can to remove their devices from your household. They can't force you to use their networking equipment, that would be a massive antitrust violation.",pihole,1645290155.0
11542,comment,12,hxlw8nh,,They lied. I have unlimited and I own my own equipment. They lied to my parents too when installing their security system. Disconnected the equipment I got for them and replaced it with Xfinity junk. A week later that junk was gone and their hardware was back in use after I straightened them out.,pihole,1645296164.0
11543,comment,2,hxlhmy6,,They still have an unlimited data option if you have your own modem...it just costs more.,pihole,1645290188.0
11544,comment,1,hxmb0fa,,They lied to you. I just got a new plan with them using my own modem and I have unlimited data.,pihole,1645302269.0
11545,comment,1,hxmpe73,,I thought they did away with data caps?,pihole,1645308573.0
11546,comment,8,hxliwsl,,"Contextually speaking, Xfinity's goal is to feed you ad traffic and harvest telemetry. Interfacing with a pihole is not in their realm of interest.. As far as I know (I could be wrong about this), they don't allow user shell access to their devices, so on that premise: If you needed to puTTY into their router or modem you couldn't.

Xfinity is just shady as fuck. They lie to you and tell you you MUST use their modem/router combo for unlimited data. Their goal is to create entire neighborhoods of ""free"" Xfinity wifi (but it's centralized so you know it's not free).",pihole,1645290708.0
11547,comment,1,hxm2ofg,,[deleted],pihole,1645298777.0
11548,comment,1,hxp306m,,"They can, it’s just easier when you use their DNS.",pihole,1645360033.0
11549,comment,0,hxrobtz,,I don’t trust Crapcast further than I can throw them. They can rot in hell for charging first world pricing for third world internet speeds.,pihole,1645401592.0
11550,comment,3,hxlqevq,,"Good luck! This stuff tends to be pretty ad hoc.

Also, I meant to say query log instead of queue but I think you understood me.

One last tip about the flex. Because the device never shuts off it can find the ad/tracking servers if your Pi-hole is down when it query’s and hold on to their ip resolutions. So if you find peacock for example is able too grab ads, give the device a reboot. You can do that by saying “restart now” into the remote/finding the option buried in settings, or by simply pulling the plug.",pihole,1645293764.0
11551,comment,2,hxlb34i,,"I haven't dug into it to see what's going on, mainly because it works enough to do what I want.

Again, it works fine after speaking to the remote to get into an app.",pihole,1645287536.0
11552,comment,1,hxrjqni,,It looks like auth.split.io ? Was the first item to be blocked.,pihole,1645399525.0
11553,comment,7,hxlkt5q,,[removed],pihole,1645291480.0
11554,comment,4,hxn3x0r,,Its cute people still think antitrust means anything in this country these days.,pihole,1645315230.0
11555,comment,1,hxo19fc,,I didn't even know that was an option. To still use your own modem.  Glad you shared that.,pihole,1645332049.0
11556,comment,1,hxq1oww,,">They can’t force you to use their networking equipment

They certainly can. AT&T forces you to use their equipment for their fiber service.",pihole,1645376848.0
11557,comment,1,hxn3jvp,,"I mean it's Comcast that pretty much is a given if somebody is talking to me.

https://www.xfinity.com/learn/internet-service/data

 It's not that I have to use their modem it's that they'll charge me an extra $30 a month if I don't.  I don't disagree this is shitty and And I also don't disagree that there's probably no actual technical requirement for it.",pihole,1645315061.0
11558,comment,1,hxn30dm,,"They did for about a year and then reinstated them.  It got significantly less coverage than it did when they quit doing them for the pandemic.

 I found out after I blasted to pass the cap because I work from home now  I called to complain that's when they told me about this new program they had that is a limited data but requires me to use their modem.

 I was already using their modem and just had it bridge to my own equipment so I just left it where it was and it seems to be working fine.",pihole,1645314809.0
11559,comment,2,hxlmqpl,,"I believe this is also to help their cellular service as well. If they can run more voip, then it’s more efficient for them.",pihole,1645292259.0
11560,comment,1,hxmi858,,"🤔 it's almost like a computer or PlayStation or Xbox or Roku or Nvidia shield, or NAS, or one of the hundreds of other devices that allow media streaming.",pihole,1645305417.0
11561,comment,0,hxm995q,,"I have a Comcast cable box but it's in a different room than the TV.

Comcast also gave me a little box that works over wifi. It essentially streams the cable box to my TV.

Not sure why people think this is unreasonable.",pihole,1645301505.0
11562,comment,2,hxm64fr,,Good to know! Thanks!,pihole,1645300183.0
11563,comment,1,hxu5syl,,Very helpful - thanks! Did your log say with blocklist it was found on by chance?,pihole,1645455443.0
11564,comment,5,hxmwmo6,,Don't use their equipment. Buy your own compatible equipment and then use your own DNS server.,pihole,1645311836.0
11565,comment,-18,hxlljzd,,[removed],pihole,1645291781.0
11566,comment,1,hxn8cxw,,I'm just pointing out that it is an antitrust violation. Maybe one day we can all be a part of a class action against Xfinity.,pihole,1645317329.0
11567,comment,1,hxnc2jm,,"Lol that's true.

It's only $5 more a month to use your own equipment, they're charging you $25 a month for Xfi complete. Unless you've got some special deal. I contemplated getting it and never plugging it in to save $5 a month, but decided I didn't want their trash taking up space in my house.",pihole,1645319132.0
11568,comment,1,hxn8kw1,,"It must be a regional thing, I have my own modem and they don't even flinch when I use a lot.  https://imgur.com/a/3rSgHdr",pihole,1645317436.0
11569,comment,3,hxlnj7i,,"Yeah, either way they are double and triple dipping their prospects.",pihole,1645292584.0
11570,comment,2,hxmic8k,,Because they charge you 10 dollars a month for a device that runs applications AKA a raspberry Pi.,pihole,1645305466.0
11571,comment,2,hxuw7qe,," Match found in https://raw.githubusercontent.com/StevenBlack/hosts/master/hosts:
   auth.split.io 
   cdn.split.io 
   events.split.io 
   sdk.split.io

This looks like it.",pihole,1645466214.0
11572,comment,0,hxoekqt,,"Ok... i linked my source but, yeah ok cool flex.",pihole,1645340729.0
11573,comment,1,hxo1llw,,"I think it is regional. I'm in Denver and they finally started charging overage a couple of years ago. 

Also, what the hell have you been downloading this month?'",pihole,1645332240.0
11574,comment,2,hxlok7t,,"Oh, absolutely the case. I got transferred back to Texas from the Chicago area. They tried to charge me $500 to break the contract I was on… with only two months remaining on it. Fuck Comcast/Xfinity.",pihole,1645293006.0
11575,comment,0,hxmiujv,,"We're talking about two different things here.

Xfinity flex runs apps.

My wireless Xfinity box streams the output from the regular Xfinity cable box to my TV.

I'm talking about cable. It has nothing to do with what OP is talking about.

What I was saying is, there is no solution for my setup unless I use the boxes from Xfinity",pihole,1645305683.0
11576,comment,1,hxvwezs,,thanks! very helpful!,pihole,1645480653.0
11577,comment,1,hxofqe6,,"I know, your link literally said there are two options for unlimited, your own equipment for $30 a month, or Xfi Complete for $25 a month. No flexing over here.",pihole,1645341592.0
11578,comment,2,hxmkc3h,,Just put those boxes on their own VLAN and point them through a separate instance of pihole.,pihole,1645306335.0
11579,post,31,svyl6y,iCloud Private Relay weirdness,"I've seen some really weird behaviour with my iPhone (running whatever the latest is) and iCloud Private Relay on a Pi-holed wifi network. Check this.

* iCloud Private Relay enabled on the iCloud account
* BLOCK\_ICLOUD\_PR=false in /etc/pihole/pihole-FTL.conf
* Limit IP Address Tracking OFF on the settings of the wifi network on the phone

What this setup should create is a situation in which my iPhone will use iCloud Private Relay everywhere but on my wifi network. When my phone connects to wifi it will use the pi-hole for DNS (because Limit IP Address Tracking is off on that individual phone's network settings for that network) and unwanted stuff will be blocked

But.

When my iPhone is on wifi and it tries to access a site that I have blacklisted by pi-hole - like, say I have instagram blocked and someone sends me a link to an post and I click on it - instead of my iPhone doing a DNS lookup on pi-hole, getting blocked, and Safari loading nothing, *the iPhone temporarily drops off wifi and does a DNS lookup over the mobile network then loads the content*. And the iPhone stays connected to only the mobile network while I'm looking at the content.

wtf?

If I close the browser or go to network settings to investigate why all of a sudden I'm loading content over 5G when I'm standing next to the wifi base station, the iPhone reconnects to wifi as if nothing ever happened. If I load a site that's NOT blacklisted, iPhone and wifi and pi-hole act as normal. But if I load a blacklisted site the iPhone instantly drops off wifi and loads everything over the mobile network, then reconnects to wifi afterwards.

It's like iCloud Private Relay has some sort of built-in behaviour of ""if a DNS lookup fails on the the network you're currently on, drop off it and try the lookup again on whatever other network you can find"".

Has anyone else experienced this?",pihole,1645235919.0
11580,comment,13,hxjsrko,,"Settings -> Cellular -> Scroll to the bottom -> Turn off Wifi Assist

Might work ?",pihole,1645252313.0
11581,comment,4,hxk3nsn,,"I don't think this is WiFi Assist related as that's around for years and working just fine in my environment.

But I had a similar experience when enabling ""allow more data on 5G"" under Settings - Cellular - Cellular plans - Data mode.

As it says there: 

>	Allow more data on 5G may prefer 5G over WiFi

[More info](https://support.apple.com/en-us/HT211828)",pihole,1645260696.0
11582,comment,14,hxj48ix,,"isn't that the ""feature"" that tries to help when WIFI misbehaves and automatically goes back to cellular?  forget what they call it... wifi assist?!  that's it",pihole,1645238289.0
11583,comment,2,hxkliw3,,"Block iCloud relay should be set to “true” (I believe)

https://github.com/pi-hole/FTL/pull/1171",pihole,1645274960.0
11584,comment,-1,hxj4fch,,[deleted],pihole,1645238382.0
11585,comment,1,hxof2xr,,"OP here. More experimentation.

This does not appear to be a *specifically* iCloud Private Relay issue after all, as I've just discovered I get the same behaviour if I disable IPR entirely (in iCloud settings on the phone).

It seems as if the only way to guarantee that the iPhone remains on wifi with pi-holed DNS is to set

BLOCK\_ICLOUD\_PR=true

...and not use IPR on the iPhone on wifi.",pihole,1645341115.0
11586,comment,1,hxjsor0,,"That setting got renamed to Limit IP address tracking, (off=no relay) and OP has it off already as mentioned in the post",pihole,1645252256.0
11587,post,0,svxeoh,Pi-Hole on a i386 pc,"Is posible to install pi hole on a i386 architecture old pc? If the answer is yes, is there any guides or tips that I can follow?",pihole,1645232357.0
11588,comment,8,hxj3x7a,,"Do you mean on a PC with x86 or a genuine 386 pc?

If so, just so you are aware, the original Raspberry Pi B+ is roughly equivalent to a Pentium 2 300 Mhz with better graphics.

So the i386 will consume considerably more power than the Pi, but be considerably slower.

Still, if you want a project, you could pull it off. My guess is that it won't be very easy as you will need to find a very paired down distro that you can install all the required packages needed to run it. So it would teach you a lot about Linux.",pihole,1645238138.0
11589,comment,3,hxitjcf,,"I’m not sure if there’s any guides for that specifically. 

However, you basically will want to run the lightest weight Linux distro you can get. I suggest Bodhi Linux. Then install Pi-hole using the install script. 

However, you may want to consider buying a super cheap orange pi or something. The electricity difference alone is justifiable. 

Orange pi’s, raspberry pi zeros, banana pi’s are all under $30 and will run circles around the 386 PC and use so much less electricity that it’ll pay for itself in less than a year.",pihole,1645233075.0
11590,comment,1,hxj4hgf,,"Anything that's only i386 these days has got to be super old and very inefficient. 

i386 support for many many things has been dropped long ago. If you really wanted to, you'd pretty much be on your own.",pihole,1645238411.0
11591,comment,1,hxj6a3m,,"If you want to give it a shot, here is a good hackaday article to get going on installing Linux on a very old laptop:

https://hackaday.com/2011/08/12/installing-linux-on-a-386-laptop/

I have not looked into it, so I don't know the requirements for the pihole on such an old distro.",pihole,1645239293.0
11592,comment,1,hxjvqen,,"If so I think it would be super slow, what kind of network adapter you have there 1Mbps? My dishwasher have more compute power then i386.",pihole,1645254475.0
11593,comment,1,hxl4ii6,,"The real question is: can you get a supported distro to run on it?  If so, then pihole can probably run on it as well.

But, really, if it's a i386, it's from the early 90's at best?  Put it in a museum :)",pihole,1645284763.0
11594,comment,3,hxiuuee,,">I suggest Bodhi Linux.

Note: This distribution is not supported.

You can force the install, but you're on your own if you do.",pihole,1645233713.0
11595,comment,1,hxjx6vt,,Haha 😂 seriously u can consider do a backup Pi-hole on your dishwasher 😅,pihole,1645255578.0
11596,post,21,svwkyd,Roku City Stroll Movie Magic not working with Pihole,"Recently started using Pihole and noticed my Rokus screensaver no longer worked. 

I end up needing to add display.ravm.tv to my whitelist to get the background working again.

Posting this in case anyone else runs into this and actually wants to keep the roku city stroll screensaver working.",pihole,1645229841.0
11597,comment,2,hxixnfx,,"But the ads are still blocked, right? I stupidly sold my Roku TV but somehow had the right blacklist combo of the screensaver and no ads",pihole,1645235085.0
11598,comment,1,i18um3x,,"Just updating after a month of use, it appears using this configuration does block ads for the city stroll as I no longer see the billboard ads.",pihole,1647664079.0
11599,comment,2,hxjyc8f,,"That was the old version of the screensaver.  It still ran, but the ad ""billboards"" were missing.  The new version of the screensaver is blocked completely, replaced by a bouncing logo.",pihole,1645256468.0
11600,post,1,svvvus,Blocklists in browser interface,"Is it just me or are the blocklists no longer able to be seen and maintained in the browser interface?

Used to be in settings, then in tools.  Now I don't find them anywhere.",pihole,1645227787.0
11601,comment,3,hxik3aj,,It’s in Group Management for some odd reason.,pihole,1645228705.0
11602,comment,2,hxim2u8,,"Group management > adlists. 

It's been like this for several/many releases.",pihole,1645229594.0
11603,post,4,svq39s,Is it possible to set up unbound with HTTPS for queries for not cached IP addresses?,"Hi, I couldn't find an answer anywhere to the following questions, so I thought, I'll ask here.

Why is the port separated with a hashtag # and not a colon : when configuring cloudflared?

https://preview.redd.it/qbywj3mz4ni81.png?width=577&format=png&auto=webp&s=d4e14e3a6617a5c20ead97037bc26236b077b3b0

Could you please bring back the following screen to the latest version?

https://preview.redd.it/94bcxevh5ni81.png?width=474&format=png&auto=webp&s=132fd33805651531db46764b343b9527602d2ddd

During the configuration, when in the above interactive menu, how can you go back to the previous page? It doesn't allow me to select Ok or Cancel.

&#x200B;

And lastly, if I were to set up unbound, is it possible to configure HTTPS for queries for not cached IP addresses?",pihole,1645212141.0
11604,comment,3,hxi0vkl,,">And lastly, if I were to set up unbound, is it possible to configure HTTPS for queries for not cached IP addresses?

Could you word this another way perhaps? What are you actually trying to achieve here? Why use a recursive resolver at all if you're just going to be using it as a forwarding resolver?",pihole,1645220636.0
11605,comment,2,hxlfzq3,,"Not OP

What I think he/she wants is as simple as using root dns servers with Pihole. I do the same thing, so you aren't bound to any third party. (unbound seems a neat name lol) and if unbound needs to reach out for an Adress it caches it. That connection is done via port 53 which is pretty much plaintext. I think he/she wants to know, if you can communicate via https with the root servers.

For what I know tho, that isn't possible. I might be totally wrong tho and I appreciate if someone can put down more than just a guess about it.",pihole,1645289521.0
11606,comment,1,hxlq4h9,,"If you don't want to trust a third party, you'll set up your own recursive server which needs to get those specific domains from their corresponding root servers. So as u/Not_a_Candle mentioned, is it possible to communicate with root servers over HTTPS, encrypted? According to Pi-hole, how is it more secure, if my ISP can read all queries?",pihole,1645293644.0
11607,comment,1,hxn3ibu,,">is it possible to communicate with root servers over HTTPS

No.

>how is it more secure

I think you're confusing security and privacy. A local recursive nameserver is marginally more private, because you're not freely handing your full resolution chain to a third party or any given single server except your own.

An HTTPS/TLS transport layer for the transmission/response is somewhat irrelevant when compared against normal recursive operation. DNSSEC mostly negates any need to add an encrypted/obfuscated layer over top of that in order to verify that the response is legitimate.",pihole,1645315041.0
11608,comment,1,hxti566,,"Thank you, this is useful, but let me just say that if something isn't secure, it's probably not private. What do I mean by this? If I'm sending queries in plaintext to those root servers, maybe I'm not relying on a third party, but my ISP will still have the opportunity to see everything and that's a big deal for me, because I'm more than certain that they track every single website you visit.

I guess, I could combine it with a VPN, but then you're relying on the provider or the VPS if you've configured your own VPN.

Okay, once you get the majority of IP addresses cached, you'll benefit from quicker response time and possibly privacy as you don't have to query the same site multiple times and this goes for all devices on your network, but I would assume that there's an expiry date, so you would eventually have to query it again after some time.",pihole,1645441007.0
11609,comment,2,hxtk3lx,,">, but I would assume that there's an expiry date, so you would eventually have to query it again after some time.

This is configurable.

I run two different layers of optimistic cache in Unbound. The first layer being Unbound's cache itself with the addition of the `serve-expired: yes` in the configuration. The TTL of these responses is additionally configurable with the `serve-expired-ttl:` option. By default responses served with `serve-expired` have a TTL of 0 to ensure clients don't hang on to bad data. When an expired record is served, the record is also queried again in parallel to refresh the record. There are yet more additional configuration parameters surrounding what to do if the record cannot be refreshed and how long it should be kept for in this case.

The second layer of optimistic caching I have in Unbound is the cachedb module, configured with a Redis database backend. Records are saved to a persistent database in memory, and disk backed, with a TTL of 0. This TTL is not configurable, it's always 0 as this is somewhat of a ""Hail Mary"" approach. If a record can not be found immediately in one of Unbound's primary cache slabs, the cachedb database is queried, and if a record can be found there it is served.

This allows for Unbound to keep a persistent cache across service and host restarts where Unbound's primary caches are lost. One benefit of this is that multiple Unbound instances can share the same database backend provided they also share database credentials, so redundant servers all have the same pool of information. Every time a record is added to or updated in Unbound's primary cache it is also saved to the cachedb database. Cache prefetching for soon to expire records is a default configuration value.

There's multiple different ways to manage the cachedb database, but I use Redis as it has the most documentation with use in Unbound, and I was already fairly familiar with the database from other projects. I have my Unbound cachedb database set up with a memory cap of 16MB, evicting keys by Least Recently Used. This ends up working out to about ~20k records which is overkill for most home usage and you'd probably never actually see evictions with a cap that high. 8MB is probably perfectly sufficient.

Unbound has a pretty vast amount of configuration options, and I've been examining some of them over the years. Cache database and response policy zones (cachedb and respip modules in Unbound's `module-config:` declaration respectively) I have found particularly interesting. I don't think any distribution packed Unbound packages include either module by default, but compiling Unbound from source is fairly trivial. If you check your Unbound version from the command line it'll tell you the configure string used to compile the binary and what modules are active.

Unbound's [documentation](https://nlnetlabs.nl/documentation/unbound/unbound.conf/) is extremely good.",pihole,1645442577.0
11610,post,1,svp3jh,using pihole to redirect/block minecraft and roblox,I have a crafty 8-year old in the house and I'd like to use my pihole to block access to minecraft and roblox. I've tried adding [minecraft.net](https://minecraft.net) to the black list but nothing happens. It still figures it out. Is this because I have the ISP's DNS server as the secondary DNS on my network? Primary DNS is my pihole.,pihole,1645209529.0
11611,comment,1,hxhfjpe,,"DNS is first come first serve. Remove the non pihole device from the list.

To really catch everything, you need a nat rule to redirect all port 53 traffic to the pihole as will. This will catch anything that tries to bypass the pihole somehow (regular DNS traffic, not DoT or DoH).",pihole,1645212132.0
11612,comment,1,hxi17s1,,">Is this because I have the ISP's DNS server as the secondary DNS on my network?

Yes.",pihole,1645220770.0
11613,comment,1,hxiniqh,,"Remove your ISP's DNS address as the secondary. This will ""usually"" fix the problem. If your 8 year old is really crafty, they could change the IP address settings on their computer to use a different DNS server. Or, if they're using some hardware device to play, it might have hard-coded DNS servers. It seems like Google Chromecast does this. I don't know if this is an issue for Xbox or PS4 or other game devices. If that's the case, you need to do the port 53 redirect that cecil1783 mentioned.   


And if your 8 year old can redirect DNS around the Pi-hole, you've got bigger challenges coming soon. ;-)",pihole,1645230252.0
11614,comment,1,hxklpv3,,"[How to block internet access at certain times using the PiHole](https://discourse.pi-hole.net/t/block-internet-access-at-certain-times/12036)

[How to enable/disable groups at certain times using the PiHole](https://discourse.pi-hole.net/t/activate-group-with-cron/32660)

Note: If the default DNS settings are changed on the device directly to something **other** than the PiHole then the device will have access to the blocked sites. 

If you are trying to do this to prevent access to sites for children, they’re going to learn very quickly what DNS is and how to change it. Or go to a friends house. Or use a VPN. Or change the DNS settings. Or use a mobile hotspot. Or mess up the Pi enough to the point that you think it’s not working properly / you’re forced to take it offline (potentially by a SO as “the internet keeps going down and I need it so I can work”) / the OS gets corrupted.

Yes, it’s a little easier during COVID as they’re not visiting friends as much but the point still stands. Can the PiHole do this? Yes. Is it what it was specifically designed to do? No. Will they eventually bypass it? Yes.

You’d be better served by parental control / web filtering software specifically designed for this task.

The only way to prevent this is to force any and all devices to use your PiHole for DNS in your router’s firewall configuration. Forcing this option varies wildly from router to router and may not exist in many “consumer” based devices - your best bet would be to google how to do so.

TL;DR Buy proper parental control software for the most effective solution.",pihole,1645275084.0
11615,post,6,svokt1,"Anrdoid,DNS, blocking apps and websites","So I have tried with routers like mikrotik to block facebook youtube instagram  on android devices, since these android devices default to 8.8.8.8 to default, dns blocking doesnt work.

I was wondering if with a normal home router and pihole on a linux machine, I can block these apps from android devices, and if so, how?",pihole,1645208149.0
11616,comment,2,hxj3urb,,Add static routes in your router that send 8.8.8.8 and 8.8.4.4 to 0.0.0.0. That will make them inaccessible and force your android devices to use the dns received from dhcp.,pihole,1645238106.0
11617,comment,2,hxke9v4,,What I did is that I blocked 53 port outbound from my lan except for pihole. So androids have no other option but use my pihole.,pihole,1645269551.0
11618,comment,1,hxh97pu,,"Android has the ability to change the DNS server manually.  Settings > Connections > More connection settings > private DNS

Note - That is for Android 12.  I don't know for sure about orevious versions.",pihole,1645209649.0
11619,comment,1,hxll3q1,,"Google's DNS may be default on Android, but it is not mandatory.  If you set both DNS server fields in your router's DHCP server to your PiHole IP address then the Android device will use your PiHole IP address for DNS and not Google's DNS.  Now any app on your phone that uses the Android system DNS settings will be using PiHole.  There is still the possibility that there might be individual apps that have hard coded DNS settings, and that is what the firewall rules redirecting port 53 will help for, but those aren't all that common compared to apps that will use your Android devices DNS server addresses.",pihole,1645291597.0
11620,comment,0,hxh8hxf,,"You need to implement a NAT (network address translation) rule that takes all DNS traffic and sends it to the pihole no matter what the intended server is. This is a firewall configuration. Basically you are going to need a more advanced prosumer router. Netgate is a good choice as their cheapest option is $180. 

Most firewall that allows for this functionality can just be downloaded and installed on any computer you like as they are more or lies standalone operating systems. 

If your router supports DD-WRT firmware or marine Open-WRT that would work as well.",pihole,1645209372.0
11621,comment,3,hxi1zku,,">Android has the ability to change the DNS server manually. Settings > Connections > More connection settings > private DNS

Android Private DNS isn't going to do OP any good to point to their Pi-hole. APDNS *must* be configured via FQDN, and it *must* support TLS. Neither of these things are going to be true in a default home environment.

The same manual wifi credential configuration flow that's existed in Android since the dawn of time still exists in Android 9 (when APDNS was introduced) and higher.

Settings → Connections → WiFi → [SSID] → Advanced",pihole,1645221073.0
11622,comment,0,hxhgbnd,,"Yes, but I dont want to change every android dns manually",pihole,1645212438.0
11623,comment,1,hxhh42w,,"So I just can use any router that supports dd-wrt right ? configure a rule for the DNS and then just block fb,youtube... with pihole ?",pihole,1645212753.0
11624,comment,2,hxj4xa4,,"I agree android's private dns (dns over tls) is ideal here. The fqdn and tls certificate can be easily achieved via https://ip.addr.tools. Unfortunately pihole doesn't serve dns over tls natively. That can be done with unbound doing the tls and forwarding to pihole, or similarly with nginx. Adguard home does support dns over tls clients natively if that's an acceptable option. The only downside to this is it does require setting this on each android device.",pihole,1645238623.0
11625,comment,1,hxhi1ph,,"Assuming that the devices are bypassing your DNS settings in your router as it is, then you need something with more granular firewall control. DD-WRT will do that, but it is not user friendly and there is very little documentation out there. Other ofptions like Netgates pfSense are also not user friendly, but at least have documentation and configuration guides available. 

Have you already tried to just adjust the DNS settings in your router?",pihole,1645213125.0
11626,comment,1,hxj5qhr,,">	That can be done with unbound doing the tls and forwarding to pihole

How?  The outgoing from unbound with TLS is encrypted on port 853, and Pi-hole listens on port 53 with no certificate.",pihole,1645239019.0
11627,comment,1,hxj67oi,,">I agree android's private dns (dns over tls) is ideal here.

Agree with whom? Not I. I hope I'm not giving that impression.

The person I'm replying to doesn't appear to be recommending this either. They just don't seem to be aware that APDNS was added alongside the existing connection configuration options and isn't a replacement for it.

I deploy my own DoH/T/Q proxy stack for my own uses, but I couldn't in any good conscience recommend Johnny Enduser goes down this route, when the infinitely simpler solution is using the access point level DNS endpoint configuration that's existed in every version of Android past and present, or setting up their DHCP properly.

A personal APDNS endpoint as I have can facilitate remote access, but Johnny Enduser isn't going to be able to secure this in a practical fashion, and a split tunnel VPN is both simpler and more practical.",pihole,1645239259.0
11628,comment,1,hxhj68y,,"Yes, but no matter what, any android device has 8.8.8.8 as default, so blocking apps or website with a dns blocker doesnt work.

I once had a mikrotik router and tested to block ig fb and youtube, it was difficult, regex sometimes worked, but not all the time, So I created a schedule to add IPs based on the domain name, and it was adding them to a block list every 30 seconds... it wasnt very efficient, but it worked more or less, the youtube app showed many ADs continuosly for like 3 minutes and then somehow the video that I tried to play started playing.",pihole,1645213579.0
11629,comment,1,hxj6z8c,,"I think they're imaging Unbound handling TLS listening, then forwarding to Pi-hole unencrypted.

I'm not certain this is possible at all, even in bleeding edge git builds. It's also pretty convoluted and a very heavy system to deploy for something there's myriad alternative options for.",pihole,1645239643.0
11630,comment,1,hxj8yko,,"Oops, I guess I agreed with nobody haha. Vpn is probably simpler but I think op would run into the same issue of android trying to use 8.8.8.8 in some cases.",pihole,1645240650.0
11631,comment,2,hxi84hn,,">any android device has 8.8.8.8 as default

Not so much. 8.8.8.8/8.8.4.4 are the defaults in AOSP, and very few vendors do change this, but they are vendor configurable fields and 8.8.8.8/8.8.4.4 isn't going to be true of every Android device inherently. They're user configurable fields as well, but it's a bit of a pain in the ass to do for Johnny Enduser, and edits to these build properties won't survive reboot.

User preference/configuration should still be respected. If you're only supplying a single DNS endpoint via manual configuration, that's very likely to be your mistake here. Supply the Pihole address in both DNS fields, or give the secondary field a null or unoccupied address. Client primary and secondary addresses are guaranteed to be used in strict order. It's less primary and secondary, and more one, and another. Clients may use their own logic to determine which resolver to use at any given point, and if the device has options available to it that aren't your Pi-hole, it can/may elect to use them.

If you're using Pi-hole as your DHCP server, note that Pi-hole only broadcasts a singular endpoint for DNS. Itself. To broadcast a secondary addresses you would need to supply a custom dhcp-option field in the dnsmasq configuration on the Pi-hole host.",pihole,1645223564.0
11632,comment,1,hxhl44v,,"You can't really blcok YouTube ads with pihole so that doesnt surprise me. 

I assumed that you had already changed the DNS, just wanted to verify.",pihole,1645214348.0
11633,comment,1,hxi85l7,,">	any android device has 8.8.8.8 as default, so blocking apps or website with a dns blocker doesnt work.

This is incorrect.  Google may fill in their own DNS resolver if you only provide them one in the DHCP process , but Google devices will respect the DNS server offered by a DHCP server.",pihole,1645223577.0
11634,comment,1,hxj8otm,,This is what I meant. It's possible but I agree it's a bit heavy. Meant it more as an example.,pihole,1645240512.0
11635,comment,1,hxjacr0,,">Vpn is probably simpler but I think op would run into the same issue of android trying to use 8.8.8.8 in some cases.

If your traffic is able to escape an encrypted tunnel, something is pretty seriously wrong with the configuration or implementation.

Android will use the resolvers it has configured, either via manual configuration or DHCP broadcast. In either case, if only a single endpoint is configured, a fallback value may be used. This is typically going to be 8.8.4.4 for the secondary, assuming the vendor didn't change the AOSP default properties (very few vendors do).

A simpler solution to either APDNS or VPN would be configuring the device or network so that it has two DNS endpoints available. This is fairly flexible. If you don't have distinct primary and secondary local resolvers, you can supply Pi-hole's local address in both primary and secondary fields, use a null address for the secondary field (0.0.0.0), or supply a 'dead'/unassigned address in the secondary field.",pihole,1645241368.0
11636,comment,1,hxhlu7p,,"Yes I dont mind the ads, because I'm just trying to block youtube videos and facebook from android and pc.",pihole,1645214635.0
11637,comment,1,hxi9xw6,,"Then how is possible that I have a TP-Link router which I have set dns to 1.1.1.1, but all android devices default to 8.8.8.8? excepto some older androids devices.which reminds me that I once tried to block websites using opendns, but it never worked, because phones got 8.8.8.8 as their primary dns and I never set them on my phones, is automatic.",pihole,1645224310.0
11638,comment,1,hxjbhjd,,"This was in the context of a split-tunnel vpn, but android could just as easily try to use 8.8.8.8 over the vpn.",pihole,1645241956.0
11639,comment,1,hxigg8m,,"Have the router provide two DNS IP'S, not just one.",pihole,1645227099.0
11640,comment,1,hxjcj92,,">This was in the context of a split-tunnel vpn

Split vs. full tunnel doesn't meaningfully change the context here. In either case the VPN configuration would need to be actively rejected.

>but android could just as easily try to use 8.8.8.8 over the vpn.

Not in any fashion I'm aware of. Do you have a specific example that details this?",pihole,1645242507.0
11641,comment,1,hxjew01,,"I'm not sure we're talking about the same thing. I meant to respond to your statement about traffic escaping the encrypted tunnel, the vpn. In a split tunnel vpn, traffic doesn't necessarily have to escape it to not be passed through it. And if android wants to use 8.8.8.8, it could try through the vpn anyway.

Rereading your comment, did you mean android would use the dns specified in the vpn profile over 8.8.8.8, and if it didn't that would mean it rejected the vpn connection altogether? That makes sense. I don't have experience with this to know if this is a solution to making android stop using 8.8.8.8, though.",pihole,1645243773.0
11642,comment,1,hxjgrif,,">did you mean android would use the dns specified in the vpn profile over 8.8.8.8

Yes.

>That makes sense. I don't have experience with this to know if this is a solution to making android stop using 8.8.8.8, though.

I've tried to make this clear, but have apparently failed in doing so, so I'll try again. Android does not use 8.8.8.8 or any other DNS endpoint inherently. This isn't a feature of Android. Android will use the resolver endpoints it has configured, whatever they may be. It just so happens that the Android Open Source Project default primary and secondary DNS property fields are 8.8.8.8 and 8.8.4.4 respectively, because of course they are. This is vendor configurable. Most vendors just don't change the defaults.

They're not inescapable hardcoded values as some people seem to think. Android will respect user configuration. It just always wants a primary and secondary DNS endpoint configured, and may (variable by vendor) supply a default field in cases where you don't. This is only relevant to WiFi connections.

All OP needs to do is supply a secondary DNS endpoint field. It doesn't particularly matter how they do so, whether it be manually configured, or DHCP broadcast. It doesn't even necessarily need to be a reachable address.

If you want to test this yourself, you can manually configure a wireless connection on an Android device and supply null values for one or both DNS fields, test the behaviour as you do so. At the same time you'll be able to see the default configuration hint values for primary and secondary DNS. Null values in both fields should result in a total loss of resolution.",pihole,1645244792.0
11643,comment,1,hxjh3eo,,This is good to know. Thank you for the re-clarification. I was under the impression android devices would use 8.8.8.8 more stubbornly.,pihole,1645244976.0
11644,post,3,svnzfq,DNS_PROBE_FINISHED_BAD_CONFIG problem,"I installed pihole and unbound on my raspberry pi 4 today. I chabged the dns on my android phone in the settings for my wifi. It worked good for about an hour but after nothibg worked and when i tried to go on any page with chrome it showed an error ""DNS_PROBE_FINISHED_BAD_CONFIG""
In the admin page i see that the status of the pihole is active and there are nor errors in the log. Can someone help me?",pihole,1645206652.0
11645,comment,3,hxh38vi,,It appears the phone is not using Pi-hole for DNS at this point.,pihole,1645207366.0
11646,comment,1,hxhe8ug,,Why could this be?,pihole,1645211616.0
11647,comment,3,hxhh5g6,,"Another DNS provided by the router, or secure or private DNS on the device or browser.",pihole,1645212768.0
11648,post,2,svjhlv,Xfinity Flex assistance,"Hey everyone,

New poster on here, but I've been using my pihole for a few months now and I love it. I have a Xfinity Flex Box that I got for free since I have only internet through Comcast, and it's a great little device to see free content through unpaid services (Peacock, Pluto TV, TUBI, Sumo TV, etc...). However, it still has the free ads that pops up on occasion through those services. Has anyone else on here checked through the specific queries that the Flex Box does without interrupting the service itself?",pihole,1645195131.0
11649,comment,3,hxgd0e2,,I have one also. If I remember correctly dns is hard coded for some of the stuff for that box which is probably bypassing your piholes,pihole,1645197307.0
11650,post,38,svh5xn,"Pihole unable to update packet lists - ""Temporary failure resolving x""","The device pihole is running on fails to resolve dns requests for itself and apparently only for itself, as all other devices on the network use pihole without any problems.

`sudo apt update` produces the following error messages:

`Err:1` [`http://deb.debian.org/debian`](http://deb.debian.org/debian) `bullseye InRelease`

  `Temporary failure resolving '`[`deb.debian.org`](https://deb.debian.org)`'`

`W: Failed to fetch` [`http://deb.debian.org/debian/dists/bullseye/InRelease`](http://deb.debian.org/debian/dists/bullseye/InRelease)  `Temporary failure resolving '`[`deb.debian.org`](https://deb.debian.org)`'`

`W: Some index files failed to download. They have been ignored, or old ones used instead.`

I cut some duplicates in the middle there to make it look better, but this happens for multiple repositories.

I have looked into /etc/resolv.conf and it only states an ipv6-address, while other Pis on the network also have the Pihole's ipv4 address as well as the default 'lan' domain in their resolv.conf. Can I just go ahead and add this information to the pihole's resolv.conf?",pihole,1645188513.0
11651,comment,7,hxgmyx7,,"If this is Debian, edit file /etc/dhcpcd.conf and make the changes there.",pihole,1645201220.0
11652,comment,2,hxj04zt,,"I was having a similar issue with unbound. When I started the pi, it couldn’t get any records. I had to set the dns to something else, run apt update and upgrade, and switch back to unbound. I ended up just switching to quad9",pihole,1645236295.0
11653,comment,0,hxg988n,,"I had this problem, too. Because I was setting up a 2nd Pihole at the time anyway, I just pointed each Pihole to the other for their own internal lookups.

If you find the proper solution to this, I'm interested. Thanks!",pihole,1645195727.0
11654,comment,2,hxh9fif,,"Yes, this is raspberry pi os. Alright thank you, I’ll try that tomorrow 👍🏻",pihole,1645209732.0
11655,comment,0,hxgmgwp,,"I found a similar discussion here [https://discourse.pi-hole.net/t/ftl-installation-failed-on-raspberry-pi-3-b/13775](https://discourse.pi-hole.net/t/ftl-installation-failed-on-raspberry-pi-3-b/13775)

After adding an outside dns server to /etc/resolv.conf I was able to run `pihole -r` successfully. However, a reboot resulted in the system becoming unresponsive and required a power cut to get it back. After rebooting, something reverted the changes I made to resolv.conf and updating was again not possible. so I added the contents of my other pi's resolv.conf:

`domain lan`  
`nameserver 192.168.x.x` (my pihole's address inside the network)

once pihole knows to use its own ip adress as a nameserver it works. I'll try and see if rebooting overwrites the file again.",pihole,1645201029.0
11656,comment,2,hxgn0yw,,Does your resolv.conf mention netplan or anything at the top header? Some things overwrite resolv.conf.,pihole,1645201242.0
11657,comment,1,hxh8y8x,,"Nope, it only states that it was created by resolvconf",pihole,1645209546.0
11658,comment,1,hxhotn4,,"Try adding a line like this at the bottom of /etc/dhcpcd.conf

static domain_name_servers=1.1.1.1

That should persist the DNS server name in /etc/resolv.conf even after rebooting.",pihole,1645215833.0
11659,comment,1,hxhy8jx,,Would this also work with the pihole’s own ip address like it did for the temporary solution I tried?,pihole,1645219581.0
11660,comment,1,hxi55p2,,"I don't think it worked for me. But worth a try in your case.

The main thing to check first - does the DNS server address persist in /etc/resolv.conf after a reboot?

If it does - you can then experiment with different IP addresses.",pihole,1645222353.0
11661,comment,1,hxyxkqb,,well... resolv.conf didn't persist after rebooting. I added the pihole's own static ip to /etc/dhcpcd.conf after `domain_name_servers=` and now it works even after a reboot.,pihole,1645541974.0
11662,post,0,svf3cl,Pi-hole for SlackWare when?,When will SlackWare be considered supported by Pi-hole?,pihole,1645181320.0
11663,comment,4,hxfn0mt,,Just out of curiosity: What's wrong with Debian?,pihole,1645183796.0
11664,comment,-4,hxfnn9x,,\*cough\*systemd\*cough\*,pihole,1645184245.0
11665,comment,3,hxfo1zs,,"Just create a VM with one CPU and 1GB, install Debian on it and you are done. Then you are doing the best, by only using it for PiHole and maybe PiVPN. You don't have to worry about systemd or anything else. 

My 1x1 Install here has plenty of CPU power as well as plenty of memory left over.",pihole,1645184535.0
11666,comment,2,hxfpa6p,,"I was kind of joking. Debian's my preferred distro. I couldn't give two fucks about systemd, but some people do, and that's fine.

I think the folk who prefer a systemd-free distribution might be wondering how they can get pihole to work for them, and yours is an excellent suggestion.",pihole,1645185378.0
11667,comment,1,hxhzar3,,How about containerizing instead? I am very happy with the Pi-Hole Docker image.,pihole,1645220003.0
11668,comment,4,hxfrn5a,,"I know it’s not really part of the Pi-hole question, but why don’t people like systemd? IMHO it’s pretty great.

Edit: I [answered](https://uace.github.io/learning/init-vs-systemd-what-is-an-init-daemon) my own question. I guess I’ve used Debian for so long I forgot about the old days with init.d.",pihole,1645186909.0
11669,comment,2,hxjmxvx,,"I am personally no fan of docker.  Yes it uses a few cpu cycles less, but the setup is unnecessarily complicated, the separation of the VMs is not as good, if one container has problems that can spread to other containers, the network setup with hundreds of bridges … 

Well in short after having been responsible for hundreds of servers I prefer a VM over a container every day.  

That said, docker has its uses, especially in the soho market.

Edit: typo",pihole,1645248432.0
11670,comment,5,hxg3m3r,,"Thanks for the link.  If I'm reading it right, it's essentially ""I don't want to change from this way that I know how to use""?

Dinosaurs man... they'll be the death of us all!",pihole,1645193220.0
11671,comment,2,hxkm0t7,,Amen to that.,pihole,1645275275.0
11672,post,9,svemi5,"Blacklist is applied to a custom group, without it being assigned to that group","I am trying to use the default group to have all the ads blocked, but want to enable a few devices (company and personal) to access everything and I have assigned them to a custom group. The custom group still has the blacklists that are in the default one enabled and it seems I can’t escape that (even though I set the rules only for the default one). Tried different combinations of group settings and blacklist/white list, but still the custom group devices are blocked from specific sites. I also get a warning Ignoring domain CONFIG_DOMAIN for DHCP host name HOSTNAME
A DHCP client is not allowed to claim name HOSTNAME in the current DHCP configuration and I can’t seem to fix that. The pihole is my Dhcp server, the router dhcp is disabled.

Devices has 2 entries which are grouped in the custom group.
There are only 2 groups at the moment (default and custom).
Adlist is the general one coming with the installation.
RegEx blacklist has been mostly disabled to unblock my devices.
All blacklisted sites are assigned only to the default group.

I am continuing the troubleshooting, but would appreciate any idea that comes to mind.

Thank you!",pihole,1645179449.0
11673,comment,2,hxgn3no,,"Please generate a debug log, upload it when prompted and post the token URL here.",pihole,1645201270.0
11674,post,9,svc1lf,"Installing pi-hole, pivpn, and unbound","So I’ve been trying to set up pi-hole, pi-vpn and unbound. I can get up-hole to work barely since my isp(at&t) doesn’t allow me to set pi-hole as my dns. So I tried setting up pi-hole as the dns. I disabled the ipv6 and the dhcp server on my router settings and got pi-hole to work over ipv6. I then installed unbound and then installed pivpn. Something broke and I had to reflash diet-pi. I’ve reinstalled pi-hole with little success at recreating the setup. I have very little experience with Debian and was hoping someone could help walk me through and see if I’m missing something. I’m trying to avoid buying a router since pi-hole had a dhcp server. I’m willing to compensate anyone that’s willing to sit down and talk me through the steps since I’m very visibly unable to do it myself. Name your price and shoot me a discord message or drop your tag below. If there’s a series of steps I should do let me know. Thanks",pihole,1645169315.0
11675,comment,4,hxfyhou,,"Hello, here is a description of your question

https://blog.crankshafttech.com/2021/03/how-to-setup-pihole-pivpn-unbound.html

it's not mine, maybe it will help you
for myself, I first installed unbound, then pi-hole, then vpn, but I have a wireguard vpn - ubuntu

good luck, hope this helps you",pihole,1645190758.0
11676,post,9,sv6qfj,best os to install pihole on a vm?,Hi which OS you guys recommend me to install pihole for home use on a mini server i got with ssd,pihole,1645152069.0
11677,comment,25,hxem374,,The one you know how to support,pihole,1645157835.0
11678,comment,10,hxeiihj,,"Dietpi works in our company in production mode for years with not a single problem, also we are running 2 in separate servers, 1 on proxmox and 1 on truenas, we are thinking about run one extra on a raspberry pi , just to keep internet running in case of a simultaneous server reboot or something",pihole,1645156069.0
11679,comment,12,hxeau4s,,I’ve run it on Debian for years.,pihole,1645152464.0
11680,comment,11,hxeljx7,,Debian,pihole,1645157561.0
11681,comment,13,hxeeemg,,Have a look at dietpi,pihole,1645154100.0
11682,comment,3,hxeeauk,,"This is subjective, really. IMHO it all comes down to which of the compatible OSes you're the most comfortable with.

I personally have instances on CentOS 7, DietPi and Debian 11 (my newest build). I've only had a couple of hiccups with the CentOS 7 instance (mostly due to CentOS itself and some of the archaic dependencies), but overall everything's been solid.

Most instances I've seen on this sub are on either Debian or some flavor of Raspbian.

Hope that helps!",pihole,1645154050.0
11683,comment,3,hxeiof8,,I run a proxmox server on a 1L tiny mini micro Lenovo PC. Then jn proxmox I run a Pi-hole Container. I also run a pivpn container and a vm for truenas. There are also a random Ubuntu vm I’m not doing much with. Pi-hole runs on a 256 mb container I don’t even notice it.,pihole,1645156148.0
11684,comment,2,hxfaaux,,I installed piHole on Debian 10 on a BananaPi M2 Berry. With log2ram. Installed about 1m rules and it is running with dhcp and unbound for about 20 clients.,pihole,1645173603.0
11685,comment,2,hxgiobu,,I use Ubuntu. Probably best to use the LTS (Long Term Support) version.,pihole,1645199563.0
11686,comment,3,hxevasn,,Ubuntu server (LTS release) has been working great for me,pihole,1645162920.0
11687,comment,2,hxeajf7,,I always use Ubuntu server to install pihole on,pihole,1645152334.0
11688,comment,1,hxechrj,,"debian, slower more stable update cycle than ubuntu",pihole,1645153212.0
11689,comment,1,hxers0j,,"Depends on what your ""mini server"" actually is, but I often use Ubuntu server and run PiHole in Docker [https://github.com/pi-hole/docker-pi-hole](https://github.com/pi-hole/docker-pi-hole).",pihole,1645160861.0
11690,comment,1,hxg07fz,,Its not necessary deploy a VM you can use Docker.,pihole,1645191618.0
11691,comment,1,hxg3f9z,,I have it installed on Ubuntu Server in a VM machine in Proxmox together with unbound. I have almost half a mil domains on my ad list. There are around 20-25 clients in my network and they generate about 70k queries a day.  I didn't have any issue so far.,pihole,1645193132.0
11692,comment,1,hxg7bt5,,I used raspberry pi os lite x86 in VMware player.,pihole,1645194905.0
11693,comment,1,hxgimrx,,"Ubuntu server LTS has been working very well for me. But it's really about what OS is going to be easiest for you to work with. I feel that it's very important to keep the host OS patched and the software updated. Obviously you want something that runs super light and is secure, especially if you're doing DoH with cloudflare or similar encrypted DNS service.",pihole,1645199546.0
11694,comment,1,hxh7xwv,,"I use Ubuntu, my brother uses Debian, my old man uses 2 pi 2s and raspbian. The right os would be the one you know how to maintain, as this is a dns server it needs to be patched immediately after updates are released. Thus device is now the 2nd most critical piece on your network behind only your router. Keeping it up to date is imperative that's why it's imperative to use an os you know how to maintain.",pihole,1645209162.0
11695,comment,1,hxhdupe,,Dietpi no 🧢,pihole,1645211465.0
11696,comment,1,hxhkkky,,"I am running it in a Debian LXC container in Proxmox. 

But whatever distro you feel comfortable working with is the best choice for you.",pihole,1645214134.0
11697,comment,0,hxetw6f,,Or use docker on any os.,pihole,1645162085.0
11698,comment,0,hxfevcx,,Bruh you just got downvoted for saying what you use :'),pihole,1645177310.0
11699,comment,-5,hxee3zy,,slower? so which os is faster ?,pihole,1645153958.0
11700,comment,1,hxfn2um,,What’s wrong with that?,pihole,1645183840.0
11701,comment,7,hxee73s,,the update cycle is slower,pihole,1645154001.0
11702,comment,1,hxh86xc,,"Debian has a slower upgrade cycle. That does not make the os slower, it just means Debian changes things under the hood less often.",pihole,1645209257.0
11703,comment,0,hxfoi8c,,"Idk, people don't like Ubuntu (server) I guess",pihole,1645184851.0
11704,post,3,sv5m77,AT&T NVG599 cannot change DNS to point pi-hole server," I have installed the properly pi-hole server on Synology Using Docker With A MacVLAN And Bridge.  
Network.

I can see only localhost as a client (which is Synology) and my network devices not showing as clients. After little research, I found I need to change DNS in the router to point to pi-hole ip address. But I have ATT ARRIS NVG599 which I cannot change DNS. Please let me what are other options I can bring clients to the Pi-hole server.

I spoke to tech support he said all ATT modems don't allow DNS change. What have options?",pihole,1645148837.0
11705,comment,2,hxec4cv,,"Are you trying to change the WAN side or the DHCP LAN side?  You can't change the WAN, but an option is to disable DHCP and have the Pi-Hole hand out the IP address settings.",pihole,1645153042.0
11706,comment,1,hxelkam,,"According to [the manual](https://fccid.io/GZ5NVG599/User-Manual/User-Manual-pdf-2140296), you should be able to change the DNS servers by telnetting to the device, switching to config mode, and using the set command.

Make sure you read that stuff thoroughly and understand it before doing it.",pihole,1645157567.0
11707,comment,1,hxemol2,,DHCP side I can disable on the router. After that do I need to follow any other steps?,pihole,1645158136.0
11708,comment,2,hxfh2ro,,Then you have to activate it on the PiHole settings.  Assuming your router is .1 then it should be a matter of turning it on and clicking save.,pihole,1645179105.0
11709,comment,1,hxg7fut,,"2 choices:

1. DHCP on PiHole as previously stated.  Easiest.
2. Install a quality FW between your network and the router.  What I did.",pihole,1645194954.0
11710,post,2,sv3fre,Pi-hole stopped working,"I am a total noob. I have been running a pi-hole with no issue for over two years. I've updated it often.   


The other day I updated pi-hole with the shell command and ever since it has stopped working.   


It doesn't show any dns requests from my local lan in the  querry log on the web interface.

I do have pi-vpn installed and that works just fine currently.  I can access it from  my phone and it shows the data and blocks things etc.  I haven't made any changes to either my router or ph-hole other than to update it. 

I have done some searching but most of those results go immediately above my head. I'd appreciate if someone an point me to a idiots guide that would be awesome.   


All I know is that windows says that there is no dns server. I can goto pi-hole directly via ip-address though and it reports it all updated including the os.",pihole,1645142652.0
11711,comment,1,hxdrncv,,"Sounds like perhaps your devices stopped sending requests to the pi-hole, could your router have updated / dns servers in your devices/router settings changed (if not using DHCP on the pi-hole)",pihole,1645143821.0
11712,comment,1,hyd6u83,,same here . updated . and stopped working  . repair did not work,pihole,1645786157.0
11713,comment,1,hxdt5a5,,"I have all my devices set to manual up addresses and nameservers. I did just update the router after this broke to serve up 1.1.1.1 and 2.2.2.2 as name servers for the time being. 

If I set my dns to 192.168.1.143 (my pi hole) I get nothing. 

If I set it 1.1.1.1 which is Google I think everything works fine without ad blocking obviously.

It's like the Pi-hole decided not to listen for dns requests except those coming in from the vpn.",pihole,1645144484.0
11714,comment,1,hxegrkm,,"[1.1.1.1](https://1.1.1.1) is actually cloudflare, [8.8.8.8](https://8.8.8.8) and [8.8.4.4](https://8.8.4.4) is google",pihole,1645155221.0
11715,post,2,sv35hj,"How do I flush all logs, keep all settings?","Had my install for 2.5 years and my FTL database is about 1.6GB on an 8GB hard drive machine.
Found a button to flush logs, but it looks like it'll only do 24 hours.

Happy to lose the lot now and start building up a new log, I've made a lot of network changes over the years.
Anyone know?",pihole,1645141935.0
11716,comment,3,hxdqzix,,"You can nuke the entire query database by deleting `/etc/pihole/pihole-FTL.db` and it'll be recreated.

You may want to check out pihole-FTL's [configuration options](https://docs.pi-hole.net/ftldns/configfile/), and set a smaller maximum for MAXDBDAYS. The default is a rather staggeringly large 365 days.

I'm reasonably convinced the vast majority of users have no need for a full year's worth of resolution history. A week, or a month maybe, seems like a slightly better balance but eh. I'm not terribly fussed about it besides mentioning it occasionally like this. I disable the long term query database entirely personally.",pihole,1645143533.0
11717,comment,2,hxdrh1o,,"I actually love the full history, but it's particularly large now.  I'll just nuke the FB.

(that worked - thank you)",pihole,1645143745.0
11718,comment,2,hxds44o,,">I actually love the full history, but it's particularly large now.

I have the beginnings of adding database configuration to the initial installation flow sitting in a repo somewhere around here, but I'm not entirely sure I want to go that route and make the installer any more complex, or if it would even be considered for submission if I did complete it.

>(that worked - thank you)

Awesome.",pihole,1645144024.0
11719,post,11,sv1owb,Block Win11 News Feed Widget,"I was just poking around watching the Query Log and started killing things. I believe I've narrowed my results down to what will only break the News Feed, which I do not care for and can't uninstall. Until I find the registry setting to kill it, this was the next best thing. Note that once these are blocked the News widget is still there, but says ""We're having trouble loading the news feed""

&#x200B;

https://preview.redd.it/tnlg4x6e2hi81.png?width=587&format=png&auto=webp&s=a9f1a91826640d717625f7840acadf9471d2edd1

Items to block:

* [assets.msn.com](https://assets.msn.com)
* [browser.events.data.msn.com](https://browser.events.data.msn.com)
* [unitedstates.smartscreen.microsoft.com](https://unitedstates.smartscreen.microsoft.com) (I'm unsure on this one. Also, given the URL, it is likely different in other countries)
* [img-s-msn-com.akamaized.net](https://img-s-msn-com.akamaized.net)

And for good measure, I'm seeing this one show up a lot since the Win11 upgrade: [deff.nelreports.net](https://deff.nelreports.net) \- Blocked

Edit: Make sure [ecn.dev.virtualearth.net](https://ecn.dev.virtualearth.net) is not blocked or it breaks the Traffic widget.

If anyone has insight on these URLs or additional ones related to Win11 that may not be desired, please share!",pihole,1645138024.0
11720,comment,1,hxfcmze,,[deleted],pihole,1645175502.0
11721,comment,2,hxgcbhy,,"Unfortunately not. In Win10 you could, but Win11 it's locked-on in the widgets bar. You could not use the widgets, and maybe uninstall the widgets, but I like the bar, just not the news feed. When I searched for answers, there were none except for Win10. So anybody looking for how to disable them will find this post now, at least until M$ backpeddles and let's us turn them off the normal way.",pihole,1645197025.0
11722,post,1,suzzx7,Just a thought.,"I’ve been using Pi-hole on and off but recently I’ve been using it for the longest.
From my own experience Pi-Hole works best on Ubuntu 20.04 LTS on a computer stick that I bought many years ago.

This is the Lenovo IdeaCentre Stick 300 that shipped with Window 10 but I installed Ubuntu on it, it runs flawless.

But the Pi400 it would have problems every few days, and it’s even on Ethernet, it would stop solving and the Raspbian starts glitchy, maybe this is OS level problem, I tried clean install of the Raspbian many times but still acting up.

I decided to install Ubuntu on the Pi400 and Pi-hole on it and I gotta say it works just like the Pi-hole on the computer stick, and no I do not have two Pi-holes parallel.

I wonder if it has something to do with my hardware? Or the Raspbian or I have bad luck with Raspbian? 

Does anyone has the same situation ?would like to share your experience?",pihole,1645133632.0
11723,comment,3,hxd7gog,,"Running Raspberrian on a pair of Pi 3Bs here, runs for months on end with no problems.

I do have good quality power supplies and good SD cards. Had past Pi problems from lower quality ones in the past.",pihole,1645135505.0
11724,comment,1,hxdyp3d,,"Running it on an rpi4, and don’t have issues with it. Ran it on a 3b before as well without issue.",pihole,1645146973.0
11725,comment,1,hxedwvg,,Running dual with two zero Ws now.  Was a zero W and a 3B+.  I found a cable that lets me run both zeros off one power supply.  I even have Wireguard running on one of them.  Been doing this for years.,pihole,1645153864.0
11726,comment,1,hxeh7jj,,Run mine on a Pi4 standard Raspbian OS.  No issues not sure I remember anymore how long I've been running - at least 6 months.  Some tech toys ya buy and get that ick feeling shortly after... some ya buy and go WOW why didn't I do that sooner... this was the later case.,pihole,1645155436.0
11727,comment,2,hxd8000,,"> I do have good quality power supplies and good SD cards.

This is the ticket right here with ANY of the rpis. Don't cheap out on either of these things are you are likely fine.

Add a battery backup of some kind into the mix too especially if you have frequent outages.",pihole,1645135717.0
11728,comment,1,hxdqlq6,,"i used high quality micro sd card but it could be bad too, but now im using sandisk flash drive no problem so far.",pihole,1645143364.0
11729,comment,2,hxdngra,,"Indeed. I've run it for many years on a PiZero (no-W) connected by USB directly to my router, and it's been rock-solid.",pihole,1645142004.0
11730,comment,2,hxdudme,,"Define ""high quality"".

Mass consumer SD cards are built and defined around bulk contiguous reads and writes, but don't necessarily do particularly well with short, random read and write. Which is the use case you'll see more typically in this environment.

The class rating isn't particularly important outside of writing the operating system image to the disk in the first place and saving yourself some minutes. Once everything is running a good chunk of reads will be from RAM anyway, but I digress. The most important factor you can have in an SD card in this context is reliability and endurance.

I find the SanDisk Endurance and Industrial SD cards are great personally. I got a tray of 50 64GB SD Industrial cards a while ago for use with various projects/clients and I don't recall getting any back yet.",pihole,1645145034.0
11731,post,114,suvkch,Peacock - no ads?,"I ended up doing a month of Peacock for $4.99. It's the cheapest plan, ads included. I've never seen a single ad, I use it on my Roku TV. This morning I asked my coworker, who doesn't use Pi-Hole, if he ever sees ads on Peacock. He says it is nonstop. I mean I just go from episode to episode, no breaks, no blank screens... just no ads at all period for me since day 1.

Has anyone else experienced this? I have a lot of stuff blocked so I am wondering... did I hit the holy grail and actually block ads for a streaming service?",pihole,1645122209.0
11732,comment,59,hxcddmy,,"I believe the pi-hole works on peacock. We've been watching a lot of Olympics lately, but while we do get commercial *breaks*, we don't see any actual commercials. Depends on your blocklist, of course.",pihole,1645124118.0
11733,comment,17,hxcob61,,I did the Peacock sub over a month ago to watch the supercross season and I haven't seen an ad either. Every time I start an event I get a popup saying to disable my ad blocker to see the content but I just close it and the stream works fine. Honestly It's been a pleasant experience.,pihole,1645128236.0
11734,comment,18,hxdqa9a,,"All of Peacock's ads go through a separate server, which is why Pihole can perfectly block them.",pihole,1645143227.0
11735,comment,7,hxebai1,,Paramount+ must be smarter than them because I haven't been able to find a way around the girth of the ads they shove down my throat.,pihole,1645152666.0
11736,comment,3,hxg7are,,I don’t get ads on peacock on my Apple TV but I do when I chromecast. All on same network with Pi-hole dhcp. So yet again another reason to not buy google stiff I guess.,pihole,1645194892.0
11737,comment,2,hxdr6ma,,I have similar situations with Roku Channel. I didn’t realize I should see ads in TV episodes until I accidentally one time disabled pi-hole,pihole,1645143619.0
11738,comment,4,hxdmqf8,,"Paying for a service and still seeing ads. 

First, people paying for that and putting up with it ...idiots. IMO. 

Second, goes to show you just how much companies really really want to push those ads in front of you. They sell far more than products, they sell a lifestyle. They make you want to buy something, anything. They make you want to consume.",pihole,1645141695.0
11739,comment,3,hxcmqo0,,Might make peacock worth it.,pihole,1645127640.0
11740,comment,2,hxd1in5,,can confirm we have no ads on our peacock ad plan with our pihole as well,pihole,1645133287.0
11741,comment,1,hxcscfj,,"I recently picked up 12 months free for being a subscriber to my TV provider and can confirm blocking ads through pihole. I've temporarily disabled and checked, so it appears to be working. It's fun SSHing into your pihole and just checking the tail logs to see the stuff that gets allowed/blocked. You'd also be surprised the amount of telemetry calls that an Amazon Fire TV does during ""sleeping hours"".",pihole,1645129792.0
11742,comment,0,hxdib0f,,"Yeah, I got peacock premium for a month and 0 ads with my pinhole while watching on Xbox one. It does block some of the images in the menu too which makes scrolling harder.",pihole,1645139830.0
11743,comment,1,hxft3vf,,"Likely if you have their ad domain, fwmrm blocked. Comcast runs Freewheel as their advertising arm.",pihole,1645187796.0
11744,comment,1,hxfy3ns,,"I use adguard and same. Bought the 4.99 plan, no ads. Query Logs are full though.",pihole,1645190559.0
11745,comment,-2,hxcqijj,,I have also noticed facebook ads that used to play inside videos no longer play.... anyone else notice this?,pihole,1645129085.0
11746,comment,0,hxgflub,,"We're lazybones and use the set top box to watch Peacock. Can confirm Pihole doesn't block ads served directly through cable, lol",pihole,1645198358.0
11747,comment,17,hxcf7tf,,"My blocklist is pretty dang robust.

I have an issue with Youtube TV that is unresolved where it goes to a black ad screen and then stops. I have to restart the app. I cannot pin that one down though, I whitelisted some Google stuff but ultimately none of it fixed it so I just deal with it. Nothing in the logs for it. I posted about it here but never heard back, just that other people are running into it too.",pihole,1645124809.0
11748,comment,2,hxg8a39,,"Pi-hole newbie here (about 4 months). I just have the standard blocklist and same, I don’t see any ads on Peacock.

EDIT: Oh, and I don’t even pay the $4.99. Just the free option by downloading the app on AppleTV.",pihole,1645195316.0
11749,comment,12,hxdxe3y,,*peacock enters the chat*,pihole,1645146384.0
11750,comment,3,hxezejh,,I pay for paramount ad free and pi hole breaks some programming unless I disable it while it loads,pihole,1645165517.0
11751,comment,2,hxf4zrf,,I had to whitelist 2-3 things just for that stupid app to load.,pihole,1645169463.0
11752,comment,1,hxfvwiy,,"I switched to Diversion as it can run directly on my new router, but it runs the same blocklists. I was horrified using my phone for just a few minutes with it off. It's been years that I've had system wide ad blocking and I wasn't prepared for the pop-up onslaught. Brrrr",pihole,1645189389.0
11753,comment,4,hxcpcv9,,"You might even get it free depending on your ISP. I paid the $4.99 for it after I saw it. I'm going to see if I get it free, my boss said he got the $9.99 for $4.99 because of a deal like that. I know my ISP is one of the ones who get that kind of deal.",pihole,1645128635.0
11754,comment,2,hxcla51,,"I think it depends on the app you're using for YouTube. I know the AppleTV app seems to use it's own internal DNS to bypass pihole... I'm still getting ads on YouTube, but not any other service.",pihole,1645127099.0
11755,comment,1,hxgl6mu,,mind sharing some of them sources?,pihole,1645200539.0
11756,comment,2,hxg1ql0,,Dang even at that tier it's still cramming in something that isn't good. Probably trackers since they don't need to fish up ads.,pihole,1645192345.0
11757,comment,2,hxg1wg5,,"I used to get it ad free courtesy of pihole but they changed the site and app to be infuriatingly painful and impossible to use if pihole was enabled, regardless of what sites I whitelisted.",pihole,1645192422.0
11758,comment,1,hxdva2l,,How is it free through the isp?,pihole,1645145436.0
11759,comment,9,hxclwox,,">I think it depends on the app you're using for YouTube

Just to clarify, this is for Youtube TV and NOT Youtube.",pihole,1645127330.0
11760,comment,1,hxluj61,,"Wait, I’ll still have youtube ads on my ATV? How about iOS? My rasp pi will be here Monday",pihole,1645295456.0
11761,comment,3,hxe5pff,,"Mine offers peacock premium free. All I had to do is get their “flex” device, which I don’t even use. Just sits over there in the corner. They used to email me asking me to send it back since I’m not using it. Just ignored the emails. Eventually they stopped emailing and everything still works fine.",pihole,1645150154.0
11762,comment,1,hxfnqm8,,I get it included from Comcast since they own NBC.,pihole,1645184312.0
11763,comment,4,hxcsp4w,,"Now I'm with you. I can't speak to that with direct experience because I live where YouTube TV is not available, but I would imagine they should be doing something similar like they do in their YouTube App.",pihole,1645129928.0
11764,comment,1,hxluyqz,,"In my experience yes, both iOS and ATV. The only solution I’ve found that truly blocks is a browser extension on desktop.",pihole,1645295634.0
11765,comment,1,hxgcuyh,,What is the flex device/which ISP?,pihole,1645197245.0
11766,comment,1,hxgcnrp,,Ah. But then you have to deal with that customer service. I get it it's a trade off.,pihole,1645197165.0
11767,comment,1,hxlvh63,,"Damn, I have 1Blocker for iOS and macOS because of the new extension scripts added. I’d prefer to use the YouTube app rather than the website.",pihole,1645295846.0
11768,comment,2,hxgfz0z,,Xfinity Flex,pihole,1645198504.0
11769,comment,1,hxgczut,,"What is this ""customer service"" you speak of?",pihole,1645197301.0
11770,comment,1,hxgd1rs,,Yes,pihole,1645197323.0
11771,post,2,suujl1,FREE 3d RED printed pihole case!,"i printed a pihole case a while back and dont need it.  i have it boxed and can mail it for the cost of postage if anyone wants it.  comes with the case and the alternate back with fan mount.  i posted here already and no takers but i thought i would try one more time because i hate throwing away plastic.  its light so it should be cheap.  

should fit pi 2 or 3 with either adafruit or kaman 3.5"" screen

came from this article [https://www.balena.io/blog/add-a-display-to-your-pi-hole-for-monitoring-and-stats/](https://www.balena.io/blog/add-a-display-to-your-pi-hole-for-monitoring-and-stats/)

&#x200B;

&#x200B;

https://preview.redd.it/v1q95dovjfi81.jpg?width=640&format=pjpg&auto=webp&s=eb97a36f9fd3bc51f5dc73d756da0ae04c37f540",pihole,1645119643.0
11772,comment,3,hxc7g3h,,What device is this intended to fit?,pihole,1645121945.0
11773,comment,1,hyjjscd,,"Still available, if so I am interested.",pihole,1645899896.0
11774,comment,2,hxd4nd1,,"sorry, added more detail.  for rpi 3.  came from this article [https://www.balena.io/blog/add-a-display-to-your-pi-hole-for-monitoring-and-stats/](https://www.balena.io/blog/add-a-display-to-your-pi-hole-for-monitoring-and-stats/)",pihole,1645134452.0
11775,comment,1,hyjmpjm,,it is. happy to send it to you. I am new to reddit so don't know how to private message but I would need your zip for shipping and then get the couple bucks from ya.,pihole,1645901083.0
11776,comment,1,hyjn92y,,"Me too, I think I sent a dm with info
 
Thanks",pihole,1645901304.0
